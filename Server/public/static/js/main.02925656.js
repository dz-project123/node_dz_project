/*! For license information please see main.02925656.js.LICENSE.txt */
(()=>{var __webpack_modules__={2024:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Composite:()=>Oe,CompositeItem:()=>Ae,FloatingArrow:()=>Me,FloatingDelayGroup:()=>Xe,FloatingFocusManager:()=>Ot,FloatingList:()=>_e,FloatingNode:()=>$e,FloatingOverlay:()=>Pt,FloatingPortal:()=>_t,FloatingTree:()=>Ue,arrow:()=>T,autoPlacement:()=>S.X5,autoUpdate:()=>S.Me,computePosition:()=>S.oo,detectOverflow:()=>R.US,flip:()=>S.RR,getOverflowAncestors:()=>o.Kx,hide:()=>S.Cp,inline:()=>S.Qo,inner:()=>or,limitShift:()=>S.dr,offset:()=>R.cv,platform:()=>S.Jv,safePolygon:()=>lr,shift:()=>S.uY,size:()=>S.dp,useClick:()=>Rt,useClientPoint:()=>Mt,useDelayGroup:()=>Ze,useDelayGroupContext:()=>Ke,useDismiss:()=>Ft,useFloating:()=>Bt,useFloatingNodeId:()=>ze,useFloatingParentNodeId:()=>Fe,useFloatingPortalNode:()=>bt,useFloatingTree:()=>Be,useFocus:()=>zt,useHover:()=>We,useId:()=>je,useInnerOffset:()=>ar,useInteractions:()=>Vt,useListItem:()=>we,useListNavigation:()=>Xt,useMergeRefs:()=>Q,useRole:()=>Jt,useTransitionStatus:()=>tr,useTransitionStyles:()=>rr,useTypeahead:()=>nr});var n=r(2791),i=r.t(n,2),o=r(1495);function a(e){let t=e.activeElement;for(;null!=(null==(r=t)||null==(r=r.shadowRoot)?void 0:r.activeElement);){var r;t=t.shadowRoot.activeElement}return t}function s(e,t){if(!e||!t)return!1;const r=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&(0,o.Zq)(r)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function l(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function c(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:r}=e;return t+"/"+r})).join(" "):navigator.userAgent}function u(e){return!(0!==e.mozInputSource||!e.isTrusted)||(h()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function p(e){return!c().includes("jsdom/")&&(!h()&&0===e.width&&0===e.height||h()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function f(){return/apple/i.test(navigator.vendor)}function h(){const e=/android/i;return e.test(l())||e.test(c())}function d(){return l().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function y(e,t){const r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function m(e){return(null==e?void 0:e.ownerDocument)||document}function v(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const r=e;return null!=r.target&&t.contains(r.target)}function g(e){return"composedPath"in e?e.composedPath()[0]:e.target}const b="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function _(e){return(0,o.Re)(e)&&e.matches(b)}function w(e){e.preventDefault(),e.stopPropagation()}function x(e){return!!e&&("combobox"===e.getAttribute("role")&&_(e))}var E=r(5207),S=r(3904),k=r(4164);const T=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"===typeof e?e(t):e;return r&&(i=r,{}.hasOwnProperty.call(i,"current"))?null!=r.current?(0,S.x7)({element:r.current,padding:n}).fn(t):{}:r?(0,S.x7)({element:r,padding:n}).fn(t):{};var i}});var O="undefined"!==typeof document?n.useLayoutEffect:n.useEffect;function A(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!A(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!==n--;){const r=i[n];if(("_owner"!==r||!e.$$typeof)&&!A(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function P(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function C(e,t){const r=P(e);return Math.round(t*r)/r}function N(e){const t=n.useRef(e);return O((()=>{t.current=e})),t}var R=r(6284),j=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],M=j.join(","),I="undefined"===typeof Element,D=I?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,L=!I&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},F=function e(t,r){var n;void 0===r&&(r=!0);var i=null===t||void 0===t||null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"inert");return""===i||"true"===i||r&&t&&e(t.parentNode)},B=function(e,t,r){if(F(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(M));return t&&D.call(e,M)&&n.unshift(e),n=n.filter(r)},z=function e(t,r,n){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!F(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),l=e(s.length?s:a.children,!0,n);n.flatten?i.push.apply(i,l):i.push({scopeParent:a,candidates:l})}else{D.call(a,M)&&n.filter(a)&&(r||!t.includes(a))&&i.push(a);var c=a.shadowRoot||"function"===typeof n.getShadowRoot&&n.getShadowRoot(a),u=!F(c,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(c&&u){var p=e(!0===c?a.children:c.children,!0,n);n.flatten?i.push.apply(i,p):i.push({scopeParent:a,candidates:p})}else o.unshift.apply(o,a.children)}}return i},$=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},U=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,r=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===r||"true"===r}(e))&&!$(e)?0:e.tabIndex},H=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},V=function(e){return"INPUT"===e.tagName},G=function(e){return function(e){return V(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,r=e.form||L(e),n=function(e){return r.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]}(t,e.form);return!i||i===e}(e)},q=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return 0===r&&0===n},W=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=D.call(e,"details>summary:first-of-type")?e.parentElement:e;if(D.call(i,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return q(e)}else{if("function"===typeof n){for(var o=e;e;){var a=e.parentElement,s=L(e);if(a&&!a.shadowRoot&&!0===n(a))return q(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=o}if(function(e){var t,r,n,i,o=e&&L(e),a=null===(t=o)||void 0===t?void 0:t.host,s=!1;if(o&&o!==e)for(s=!!(null!==(r=a)&&void 0!==r&&null!==(n=r.ownerDocument)&&void 0!==n&&n.contains(a)||null!==e&&void 0!==e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!s&&a;){var l,c,u;s=!(null===(c=a=null===(l=o=L(a))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(a))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},Y=function(e,t){return!(t.disabled||F(t)||function(e){return V(e)&&"hidden"===e.type}(t)||W(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if("LEGEND"===n.tagName)return!!D.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},K=function(e,t){return!(G(t)||U(t)<0||!Y(e,t))},X=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Z=function e(t){var r=[],n=[];return t.forEach((function(t,i){var o=!!t.scopeParent,a=o?t.scopeParent:t,s=function(e,t){var r=U(e);return r<0&&t&&!$(e)?0:r}(a,o),l=o?e(t.candidates):a;0===s?o?r.push.apply(r,l):r.push(a):n.push({documentOrder:i,tabIndex:s,item:t,isScope:o,content:l})})),n.sort(H).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(r)},J=function(e,t){var r;return r=(t=t||{}).getShadowRoot?z([e],t.includeContainer,{filter:K.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:X}):B(e,t.includeContainer,K.bind(null,t)),Z(r)};function Q(e){return n.useMemo((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)}))}),e)}const ee=i["useInsertionEffect".toString()]||(e=>e());function te(e){const t=n.useRef((()=>{0}));return ee((()=>{t.current=e})),n.useCallback((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)}),[])}const re="ArrowUp",ne="ArrowDown",ie="ArrowLeft",oe="ArrowRight";function ae(e,t,r){return Math.floor(e/t)!==r}function se(e,t){return t<0||t>=e.current.length}function le(e,t){return ue(e,{disabledIndices:t})}function ce(e,t){return ue(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function ue(e,t){let{startingIndex:r=-1,decrement:n=!1,disabledIndices:i,amount:o=1}=void 0===t?{}:t;const a=e.current,s=i?e=>i.includes(e):e=>{const t=a[e];return null==t||t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled")};let l=r;do{l+=n?-o:o}while(l>=0&&l<=a.length-1&&s(l));return l}function pe(e,t){let{event:r,orientation:n,loop:i,cols:o,disabledIndices:a,minIndex:s,maxIndex:l,prevIndex:c,stopEvent:u=!1}=t,p=c;if(r.key===re){if(u&&w(r),-1===c)p=l;else if(p=ue(e,{startingIndex:p,amount:o,decrement:!0,disabledIndices:a}),i&&(c-o<s||p<0)){const e=c%o,t=l%o,r=l-(t-e);p=t===e?l:t>e?r:r-o}se(e,p)&&(p=c)}if(r.key===ne&&(u&&w(r),-1===c?p=s:(p=ue(e,{startingIndex:c,amount:o,disabledIndices:a}),i&&c+o>l&&(p=ue(e,{startingIndex:c%o-o,amount:o,disabledIndices:a}))),se(e,p)&&(p=c)),"both"===n){const t=(0,E.GW)(c/o);r.key===oe&&(u&&w(r),c%o!==o-1?(p=ue(e,{startingIndex:c,disabledIndices:a}),i&&ae(p,o,t)&&(p=ue(e,{startingIndex:c-c%o-1,disabledIndices:a}))):i&&(p=ue(e,{startingIndex:c-c%o-1,disabledIndices:a})),ae(p,o,t)&&(p=c)),r.key===ie&&(u&&w(r),c%o!==0?(p=ue(e,{startingIndex:c,disabledIndices:a,decrement:!0}),i&&ae(p,o,t)&&(p=ue(e,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:a}))):i&&(p=ue(e,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:a})),ae(p,o,t)&&(p=c));const n=(0,E.GW)(l/o)===t;se(e,p)&&(p=i&&n?r.key===ie?l:ue(e,{startingIndex:c-c%o-1,disabledIndices:a}):c)}return p}function fe(e,t,r){const n=[];let i=0;return e.forEach(((e,o)=>{let{width:a,height:s}=e,l=!1;for(r&&(i=0);!l;){const e=[];for(let r=0;r<a;r++)for(let n=0;n<s;n++)e.push(i+r+n*t);i%t+a<=t&&e.every((e=>null==n[e]))?(e.forEach((e=>{n[e]=o})),l=!0):i++}})),[...n]}function he(e,t,r,n,i){if(-1===e)return-1;const o=r.indexOf(e);switch(i){case"tl":return o;case"tr":return o+t[e].width-1;case"bl":return o+(t[e].height-1)*n;case"br":return r.lastIndexOf(e)}}function de(e,t){return t.flatMap(((t,r)=>e.includes(t)?[r]:[]))}let ye=0;function me(e,t){void 0===t&&(t={});const{preventScroll:r=!1,cancelPrevious:n=!0,sync:i=!1}=t;n&&cancelAnimationFrame(ye);const o=()=>null==e?void 0:e.focus({preventScroll:r});i?o():ye=requestAnimationFrame(o)}var ve="undefined"!==typeof document?n.useLayoutEffect:n.useEffect;function ge(e,t){const r=e.compareDocumentPosition(t);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:0}const be=n.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function _e(e){let{children:t,elementsRef:r,labelsRef:i}=e;const[o,a]=n.useState((()=>new Map)),s=n.useCallback((e=>{a((t=>new Map(t).set(e,null)))}),[]),l=n.useCallback((e=>{a((t=>{const r=new Map(t);return r.delete(e),r}))}),[]);return ve((()=>{const e=new Map(o);Array.from(e.keys()).sort(ge).forEach(((t,r)=>{e.set(t,r)})),function(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e.entries())if(n!==t.get(r))return!1;return!0}(o,e)||a(e)}),[o]),n.createElement(be.Provider,{value:n.useMemo((()=>({register:s,unregister:l,map:o,elementsRef:r,labelsRef:i})),[s,l,o,r,i])},t)}function we(e){let{label:t}=void 0===e?{}:e;const[r,i]=n.useState(null),o=n.useRef(null),{register:a,unregister:s,map:l,elementsRef:c,labelsRef:u}=n.useContext(be),p=n.useCallback((e=>{if(o.current=e,null!==r&&(c.current[r]=e,u)){var n;const i=void 0!==t;u.current[r]=i?t:null!=(n=null==e?void 0:e.textContent)?n:null}}),[r,c,u,t]);return ve((()=>{const e=o.current;if(e)return a(e),()=>{s(e)}}),[a,s]),ve((()=>{const e=o.current?l.get(o.current):null;null!=e&&i(e)}),[l]),n.useMemo((()=>({ref:p,index:null==r?-1:r})),[r,p])}function xe(e,t){return"function"===typeof e?e(t):e?n.cloneElement(e,t):n.createElement("div",t)}const Ee=n.createContext({activeIndex:0,onNavigate:()=>{}}),Se=[ie,oe],ke=[re,ne],Te=[...Se,...ke],Oe=n.forwardRef((function(e,t){let{render:r,orientation:i="both",loop:o=!0,cols:a=1,disabledIndices:s=[],activeIndex:l,onNavigate:c,itemSizes:u,dense:p=!1,...f}=e;const[h,d]=n.useState(0),y=null!=l?l:h,m=te(null!=c?c:d),v=n.useRef([]),g=r&&"function"!==typeof r?r.props:{},b=n.useMemo((()=>({activeIndex:y,onNavigate:m})),[y,m]),_=a>1;const w={...f,...g,ref:t,"aria-orientation":"both"===i?void 0:i,onKeyDown(e){null==f.onKeyDown||f.onKeyDown(e),null==g.onKeyDown||g.onKeyDown(e),function(e){if(!Te.includes(e.key))return;let t=y;if(_){const r=u||Array.from({length:v.current.length},(()=>({width:1,height:1}))),n=fe(r,a,p),l=n.findIndex((e=>null!=e&&!s.includes(e))),c=n.reduce(((e,t,r)=>null==t||null!=s&&s.includes(t)?e:r),-1);t=n[pe({current:n.map((e=>e?v.current[e]:null))},{event:e,orientation:i,loop:o,cols:a,disabledIndices:de([...s,void 0],n),minIndex:l,maxIndex:c,prevIndex:he(y,r,n,a,e.key===ne?"bl":e.key===oe?"tr":"tl")})]}const r=le(v,s),n=ce(v,s),l={horizontal:[oe],vertical:[ne],both:[oe,ne]}[i],c={horizontal:[ie],vertical:[re],both:[ie,re]}[i],f=_?Te:{horizontal:Se,vertical:ke,both:Te}[i];t===y&&[...l,...c].includes(e.key)&&(t=o&&t===n&&l.includes(e.key)?r:o&&t===r&&c.includes(e.key)?n:ue(v,{startingIndex:t,decrement:c.includes(e.key),disabledIndices:s})),t===y||se(v,t)||(e.stopPropagation(),f.includes(e.key)&&e.preventDefault(),m(t),queueMicrotask((()=>{me(v.current[t])})))}(e)}};return n.createElement(Ee.Provider,{value:b},n.createElement(_e,{elementsRef:v},xe(r,w)))})),Ae=n.forwardRef((function(e,t){let{render:r,...i}=e;const o=r&&"function"!==typeof r?r.props:{},{activeIndex:a,onNavigate:s}=n.useContext(Ee),{ref:l,index:c}=we(),u=Q([l,t,o.ref]),p=a===c;return xe(r,{...i,...o,ref:u,tabIndex:p?0:-1,"data-active":p?"":void 0,onFocus(e){null==i.onFocus||i.onFocus(e),null==o.onFocus||o.onFocus(e),s(c)}})}));function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pe.apply(this,arguments)}let Ce=!1,Ne=0;const Re=()=>"floating-ui-"+Ne++;const je=i["useId".toString()]||function(){const[e,t]=n.useState((()=>Ce?Re():void 0));return ve((()=>{null==e&&t(Re())}),[]),n.useEffect((()=>{Ce||(Ce=!0)}),[]),e},Me=n.forwardRef((function(e,t){let{context:{placement:r,elements:{floating:i},middlewareData:{arrow:o}},width:a=14,height:s=7,tipRadius:l=0,strokeWidth:c=0,staticOffset:u,stroke:p,d:f,style:{transform:h,...d}={},...y}=e;const m=je();if(!i)return null;c*=2;const v=c/2,g=a/2*(l/-8+1),b=s/2*l/4,[_,w]=r.split("-"),x=S.Jv.isRTL(i),E=!!f,k="top"===_||"bottom"===_,T=u&&"end"===w?"bottom":"top";let O=u&&"end"===w?"right":"left";u&&x&&(O="end"===w?"left":"right");const A=null!=(null==o?void 0:o.x)?u||o.x:"",P=null!=(null==o?void 0:o.y)?u||o.y:"",C=f||"M0,0 H"+a+" L"+(a-g)+","+(s-b)+" Q"+a/2+","+s+" "+g+","+(s-b)+" Z",N={top:E?"rotate(180deg)":"",left:E?"rotate(90deg)":"rotate(-90deg)",bottom:E?"":"rotate(180deg)",right:E?"rotate(-90deg)":"rotate(90deg)"}[_];return n.createElement("svg",Pe({},y,{"aria-hidden":!0,ref:t,width:E?a:a+c,height:a,viewBox:"0 0 "+a+" "+(s>a?s:a),style:{position:"absolute",pointerEvents:"none",[O]:A,[T]:P,[_]:k||E?"100%":"calc(100% - "+c/2+"px)",transform:""+N+(null!=h?h:""),...d}}),c>0&&n.createElement("path",{clipPath:"url(#"+m+")",fill:"none",stroke:p,strokeWidth:c+(f?0:1),d:C}),n.createElement("path",{stroke:c&&!f?y.fill:"none",d:C}),n.createElement("clipPath",{id:m},n.createElement("rect",{x:-v,y:v*(E?-1:1),width:a+c,height:a})))}));function Ie(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach((e=>e(r)))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,(null==(n=e.get(t))?void 0:n.filter((e=>e!==r)))||[])}}}const De=n.createContext(null),Le=n.createContext(null),Fe=()=>{var e;return(null==(e=n.useContext(De))?void 0:e.id)||null},Be=()=>n.useContext(Le);function ze(e){const t=je(),r=Be(),n=Fe(),i=e||n;return ve((()=>{const e={id:t,parentId:i};return null==r||r.addNode(e),()=>{null==r||r.removeNode(e)}}),[r,t,i]),t}function $e(e){let{children:t,id:r}=e;const i=Fe();return n.createElement(De.Provider,{value:n.useMemo((()=>({id:r,parentId:i})),[r,i])},t)}function Ue(e){let{children:t}=e;const r=n.useRef([]),i=n.useCallback((e=>{r.current=[...r.current,e]}),[]),o=n.useCallback((e=>{r.current=r.current.filter((t=>t!==e))}),[]),a=n.useState((()=>Ie()))[0];return n.createElement(Le.Provider,{value:n.useMemo((()=>({nodesRef:r,addNode:i,removeNode:o,events:a})),[i,o,a])},t)}function He(e){return"data-floating-ui-"+e}function Ve(e){const t=(0,n.useRef)(e);return ve((()=>{t.current=e})),t}const Ge=He("safe-polygon");function qe(e,t,r){return r&&!y(r)?0:"number"===typeof e?e:null==e?void 0:e[t]}function We(e,t){void 0===t&&(t={});const{open:r,onOpenChange:i,dataRef:a,events:l,elements:{domReference:c,floating:u},refs:p}=e,{enabled:f=!0,delay:h=0,handleClose:d=null,mouseOnly:v=!1,restMs:g=0,move:b=!0}=t,_=Be(),w=Fe(),x=Ve(d),E=Ve(h),S=n.useRef(),k=n.useRef(),T=n.useRef(),O=n.useRef(),A=n.useRef(!0),P=n.useRef(!1),C=n.useRef((()=>{})),N=n.useCallback((()=>{var e;const t=null==(e=a.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[a]);n.useEffect((()=>{if(f)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(k.current),clearTimeout(O.current),A.current=!0)}}),[f,l]),n.useEffect((()=>{if(!f||!x.current||!r)return;function e(e){N()&&i(!1,e,"hover")}const t=m(u).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[u,r,i,f,x,N]);const R=n.useCallback((function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="hover");const n=qe(E.current,"close",S.current);n&&!T.current?(clearTimeout(k.current),k.current=setTimeout((()=>i(!1,e,r)),n)):t&&(clearTimeout(k.current),i(!1,e,r))}),[E,i]),j=n.useCallback((()=>{C.current(),T.current=void 0}),[]),M=n.useCallback((()=>{if(P.current){const e=m(p.floating.current).body;e.style.pointerEvents="",e.removeAttribute(Ge),P.current=!1}}),[p]);return n.useEffect((()=>{if(f&&(0,o.kK)(c)){const e=c;return r&&e.addEventListener("mouseleave",p),null==u||u.addEventListener("mouseleave",p),b&&e.addEventListener("mousemove",n,{once:!0}),e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",l),()=>{r&&e.removeEventListener("mouseleave",p),null==u||u.removeEventListener("mouseleave",p),b&&e.removeEventListener("mousemove",n),e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",l)}}function t(){return!!a.current.openEvent&&["click","mousedown"].includes(a.current.openEvent.type)}function n(e){if(clearTimeout(k.current),A.current=!1,v&&!y(S.current)||g>0&&0===qe(E.current,"open"))return;const t=qe(E.current,"open",S.current);t?k.current=setTimeout((()=>{i(!0,e,"hover")}),t):i(!0,e,"hover")}function l(n){if(t())return;C.current();const i=m(u);if(clearTimeout(O.current),x.current){r||clearTimeout(k.current),T.current=x.current({...e,tree:_,x:n.clientX,y:n.clientY,onClose(){M(),j(),R(n,!0,"safe-polygon")}});const t=T.current;return i.addEventListener("mousemove",t),void(C.current=()=>{i.removeEventListener("mousemove",t)})}("touch"!==S.current||!s(u,n.relatedTarget))&&R(n)}function p(r){t()||null==x.current||x.current({...e,tree:_,x:r.clientX,y:r.clientY,onClose(){M(),j(),R(r)}})(r)}}),[c,u,f,e,v,g,b,R,j,M,i,r,_,E,x,a]),ve((()=>{var e;if(f&&r&&null!=(e=x.current)&&e.__options.blockPointerEvents&&N()){const e=m(u).body;if(e.setAttribute(Ge,""),e.style.pointerEvents="none",P.current=!0,(0,o.kK)(c)&&u){var t;const e=c,r=null==_||null==(t=_.nodesRef.current.find((e=>e.id===w)))||null==(t=t.context)?void 0:t.elements.floating;return r&&(r.style.pointerEvents=""),e.style.pointerEvents="auto",u.style.pointerEvents="auto",()=>{e.style.pointerEvents="",u.style.pointerEvents=""}}}}),[f,r,w,u,c,_,x,N]),ve((()=>{r||(S.current=void 0,j(),M())}),[r,j,M]),n.useEffect((()=>()=>{j(),clearTimeout(k.current),clearTimeout(O.current),M()}),[f,c,j,M]),n.useMemo((()=>{if(!f)return{};function e(e){S.current=e.pointerType}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove(e){r||0===g||(clearTimeout(O.current),O.current=setTimeout((()=>{A.current||i(!0,e.nativeEvent,"hover")}),g))}},floating:{onMouseEnter(){clearTimeout(k.current)},onMouseLeave(e){R(e.nativeEvent,!1)}}}}),[f,g,r,i,R])}const Ye=n.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),Ke=()=>n.useContext(Ye),Xe=e=>{let{children:t,delay:r,timeoutMs:i=0}=e;const[o,a]=n.useReducer(((e,t)=>({...e,...t})),{delay:r,timeoutMs:i,initialDelay:r,currentId:null,isInstantPhase:!1}),s=n.useRef(null),l=n.useCallback((e=>{a({currentId:e})}),[]);return ve((()=>{o.currentId?null===s.current?s.current=o.currentId:a({isInstantPhase:!0}):(a({isInstantPhase:!1}),s.current=null)}),[o.currentId]),n.createElement(Ye.Provider,{value:n.useMemo((()=>({...o,setState:a,setCurrentId:l})),[o,l])},t)},Ze=(e,t)=>{let{open:r,onOpenChange:n}=e,{id:i}=t;const{currentId:o,setCurrentId:a,initialDelay:s,setState:l,timeoutMs:c}=Ke();ve((()=>{o&&(l({delay:{open:1,close:qe(s,"close")}}),o!==i&&n(!1))}),[i,n,l,o,s]),ve((()=>{function e(){n(!1),l({delay:s,currentId:null})}if(!r&&o===i){if(c){const t=window.setTimeout(e,c);return()=>{clearTimeout(t)}}e()}}),[r,l,o,i,n,s,c]),ve((()=>{r&&a(i)}),[r,a,i])};function Je(e,t){let r=e.filter((e=>{var r;return e.parentId===t&&(null==(r=e.context)?void 0:r.open)})),n=r;for(;n.length;)n=e.filter((e=>{var t;return null==(t=n)?void 0:t.some((t=>{var r;return e.parentId===t.id&&(null==(r=e.context)?void 0:r.open)}))})),r=r.concat(n);return r}let Qe=new WeakMap,et=new WeakSet,tt={},rt=0;const nt=()=>"undefined"!==typeof HTMLElement&&"inert"in HTMLElement.prototype,it=e=>e&&(e.host||it(e.parentNode)),ot=(e,t)=>t.map((t=>{if(e.contains(t))return t;const r=it(t);return e.contains(r)?r:null})).filter((e=>null!=e));function at(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);const n=m(e[0]).body;return function(e,t,r,n){const i="data-floating-ui-inert",o=n?"inert":r?"aria-hidden":null,a=ot(t,e),s=new Set,l=new Set(a),c=[];tt[i]||(tt[i]=new WeakMap);const u=tt[i];return a.forEach((function e(t){t&&!s.has(t)&&(s.add(t),t.parentNode&&e(t.parentNode))})),function e(t){t&&!l.has(t)&&Array.prototype.forEach.call(t.children,(t=>{if(s.has(t))e(t);else{const e=o?t.getAttribute(o):null,r=null!==e&&"false"!==e,n=(Qe.get(t)||0)+1,a=(u.get(t)||0)+1;Qe.set(t,n),u.set(t,a),c.push(t),1===n&&r&&et.add(t),1===a&&t.setAttribute(i,""),!r&&o&&t.setAttribute(o,"true")}}))}(t),s.clear(),rt++,()=>{c.forEach((e=>{const t=(Qe.get(e)||0)-1,r=(u.get(e)||0)-1;Qe.set(e,t),u.set(e,r),t||(!et.has(e)&&o&&e.removeAttribute(o),et.delete(e)),r||e.removeAttribute(i)})),rt--,rt||(Qe=new WeakMap,Qe=new WeakMap,et=new WeakSet,tt={})}}(e.concat(Array.from(n.querySelectorAll("[aria-live]"))),n,t,r)}const st=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function lt(e,t){const r=J(e,st());"prev"===t&&r.reverse();const n=r.indexOf(a(m(e)));return r.slice(n+1)[0]}function ct(){return lt(document.body,"next")}function ut(){return lt(document.body,"prev")}function pt(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!s(r,n)}function ft(e){J(e,st()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function ht(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const dt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function yt(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const mt=n.forwardRef((function(e,t){const[r,i]=n.useState();ve((()=>(f()&&i("button"),document.addEventListener("keydown",yt),()=>{document.removeEventListener("keydown",yt)})),[]);const o={ref:t,tabIndex:0,role:r,"aria-hidden":!r||void 0,[He("focus-guard")]:"",style:dt};return n.createElement("span",Pe({},e,o))})),vt=n.createContext(null),gt=He("portal");function bt(e){let{id:t,root:r}=void 0===e?{}:e;const[i,a]=n.useState(null),s=je(),l=wt(),c=n.useRef(null);return ve((()=>()=>{null==i||i.remove(),queueMicrotask((()=>{c.current=null}))}),[i]),ve((()=>{if(c.current)return;const e=t?document.getElementById(t):null;if(!e)return;const r=document.createElement("div");r.id=s,r.setAttribute(gt,""),e.appendChild(r),c.current=r,a(r)}),[t,s]),ve((()=>{if(c.current)return;let e=r||(null==l?void 0:l.portalNode);e&&!(0,o.kK)(e)&&(e=e.current),e=e||document.body;let n=null;t&&(n=document.createElement("div"),n.id=t,e.appendChild(n));const i=document.createElement("div");i.id=s,i.setAttribute(gt,""),e=n||e,e.appendChild(i),c.current=i,a(i)}),[t,r,s,l]),i}function _t(e){let{children:t,id:r,root:i=null,preserveTabOrder:o=!0}=e;const a=bt({id:r,root:i}),[s,l]=n.useState(null),c=n.useRef(null),u=n.useRef(null),p=n.useRef(null),f=n.useRef(null),h=!!s&&!s.modal&&s.open&&o&&!(!i&&!a);return n.useEffect((()=>{if(a&&o&&(null==s||!s.modal))return a.addEventListener("focusin",e,!0),a.addEventListener("focusout",e,!0),()=>{a.removeEventListener("focusin",e,!0),a.removeEventListener("focusout",e,!0)};function e(e){if(a&&pt(e)){("focusin"===e.type?ht:ft)(a)}}}),[a,o,null==s?void 0:s.modal]),n.createElement(vt.Provider,{value:n.useMemo((()=>({preserveTabOrder:o,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:p,afterInsideRef:f,portalNode:a,setFocusManagerState:l})),[o,a])},h&&a&&n.createElement(mt,{"data-type":"outside",ref:c,onFocus:e=>{if(pt(e,a)){var t;null==(t=p.current)||t.focus()}else{const e=ut()||(null==s?void 0:s.refs.domReference.current);null==e||e.focus()}}}),h&&a&&n.createElement("span",{"aria-owns":a.id,style:dt}),a&&(0,k.createPortal)(t,a),h&&a&&n.createElement(mt,{"data-type":"outside",ref:u,onFocus:e=>{if(pt(e,a)){var t;null==(t=f.current)||t.focus()}else{const t=ct()||(null==s?void 0:s.refs.domReference.current);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent))}}}))}const wt=()=>n.useContext(vt),xt=20;let Et=[];function St(e){Et=Et.filter((e=>e.isConnected)),e&&"body"!==(0,o.wk)(e)&&(Et.push(e),Et.length>xt&&(Et=Et.slice(-xt)))}function kt(){return Et.slice().reverse().find((e=>e.isConnected))}const Tt=n.forwardRef((function(e,t){return n.createElement("button",Pe({},e,{type:"button",ref:t,tabIndex:-1,style:dt}))}));function Ot(e){const{context:t,children:r,disabled:i=!1,order:l=["content"],guards:c=!0,initialFocus:f=0,returnFocus:h=!0,modal:d=!0,visuallyHiddenDismiss:y=!1,closeOnFocusOut:v=!0}=e,{open:b,refs:_,nodeId:E,onOpenChange:S,events:k,dataRef:T,elements:{domReference:O,floating:A}}=t,P="number"===typeof f&&f<0,C=x(O)&&P,N=!nt()||c,R=Ve(l),j=Ve(f),M=Ve(h),I=Be(),D=wt(),L=n.useRef(null),F=n.useRef(null),B=n.useRef(!1),z=n.useRef(!1),$=null!=D,U=n.useCallback((function(e){return void 0===e&&(e=A),e?J(e,st()):[]}),[A]),H=n.useCallback((e=>{const t=U(e);return R.current.map((e=>O&&"reference"===e?O:A&&"floating"===e?A:t)).filter(Boolean).flat()}),[O,A,R,U]);function V(e){return!i&&y&&d?n.createElement(Tt,{ref:"start"===e?L:F,onClick:e=>S(!1,e.nativeEvent)},"string"===typeof y?y:"Dismiss"):null}n.useEffect((()=>{if(i||!d)return;function e(e){if("Tab"===e.key){s(A,a(m(A)))&&0===U().length&&!C&&w(e);const t=H(),r=g(e);"reference"===R.current[0]&&r===O&&(w(e),e.shiftKey?me(t[t.length-1]):me(t[1])),"floating"===R.current[1]&&r===A&&e.shiftKey&&(w(e),me(t[0]))}}const t=m(A);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[i,O,A,d,R,C,U,H]),n.useEffect((()=>{if(!i&&v)return A&&(0,o.Re)(O)?(O.addEventListener("focusout",t),O.addEventListener("pointerdown",e),!d&&A.addEventListener("focusout",t),()=>{O.removeEventListener("focusout",t),O.removeEventListener("pointerdown",e),!d&&A.removeEventListener("focusout",t)}):void 0;function e(){z.current=!0,setTimeout((()=>{z.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const r=!(s(O,t)||s(A,t)||s(t,A)||s(null==D?void 0:D.portalNode,t)||null!=t&&t.hasAttribute(He("focus-guard"))||I&&(Je(I.nodesRef.current,E).find((e=>{var r,n;return s(null==(r=e.context)?void 0:r.elements.floating,t)||s(null==(n=e.context)?void 0:n.elements.domReference,t)}))||function(e,t){var r;let n=[],i=null==(r=e.find((e=>e.id===t)))?void 0:r.parentId;for(;i;){const t=e.find((e=>e.id===i));i=null==t?void 0:t.parentId,t&&(n=n.concat(t))}return n}(I.nodesRef.current,E).find((e=>{var r,n;return(null==(r=e.context)?void 0:r.elements.floating)===t||(null==(n=e.context)?void 0:n.elements.domReference)===t}))));t&&r&&!z.current&&t!==kt()&&(B.current=!0,S(!1,e))}))}}),[i,O,A,d,E,I,D,S,v]),n.useEffect((()=>{var e;if(i)return;const t=Array.from((null==D||null==(e=D.portalNode)?void 0:e.querySelectorAll("["+He("portal")+"]"))||[]);if(A){const e=[A,...t,L.current,F.current,R.current.includes("reference")||C?O:null].filter((e=>null!=e)),r=d||C?at(e,N,!N):at(e);return()=>{r()}}}),[i,O,A,d,R,D,C,N]),ve((()=>{if(i||!A)return;const e=a(m(A));queueMicrotask((()=>{const t=H(A),r=j.current,n=("number"===typeof r?t[r]:r.current)||A,i=s(A,e);P||i||!b||me(n,{preventScroll:n===A})}))}),[i,b,A,P,H,j]),ve((()=>{if(i||!A)return;let e=!1;const t=m(A),r=a(t),n=T.current;function l(t){let{reason:r,event:n,nested:i}=t;"escape-key"===r&&_.domReference.current&&St(_.domReference.current),"hover"===r&&"mouseleave"===n.type&&(B.current=!0),"outside-press"===r&&(i?(B.current=!1,e=!0):B.current=!(u(n)||p(n)))}return St(r),k.on("openchange",l),()=>{k.off("openchange",l);const r=a(t),i=s(A,r)||I&&Je(I.nodesRef.current,E).some((e=>{var t;return s(null==(t=e.context)?void 0:t.elements.floating,r)}));(i||n.openEvent&&["click","mousedown"].includes(n.openEvent.type))&&_.domReference.current&&St(_.domReference.current);const c=kt();M.current&&!B.current&&(0,o.Re)(c)&&(c===r||r===t.body||i)&&me(c,{cancelPrevious:!1,preventScroll:e})}}),[i,A,M,T,_,k,I,E]),ve((()=>{if(!i&&D)return D.setFocusManagerState({modal:d,closeOnFocusOut:v,open:b,onOpenChange:S,refs:_}),()=>{D.setFocusManagerState(null)}}),[i,D,d,b,S,_,v]),ve((()=>{if(i||!A||"function"!==typeof MutationObserver||P)return;const e=()=>{const e=A.getAttribute("tabindex");R.current.includes("floating")||a(m(A))!==_.domReference.current&&0===U().length?"0"!==e&&A.setAttribute("tabindex","0"):"-1"!==e&&A.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(A,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[i,A,_,R,U,P]);const G=!i&&N&&($||d);return n.createElement(n.Fragment,null,G&&n.createElement(mt,{"data-type":"inside",ref:null==D?void 0:D.beforeInsideRef,onFocus:e=>{if(d){const e=H();me("reference"===l[0]?e[0]:e[e.length-1])}else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(B.current=!1,pt(e,D.portalNode)){const e=ct()||O;null==e||e.focus()}else{var t;null==(t=D.beforeOutsideRef.current)||t.focus()}}}),!C&&V("start"),r,V("end"),G&&n.createElement(mt,{"data-type":"inside",ref:null==D?void 0:D.afterInsideRef,onFocus:e=>{if(d)me(H()[0]);else if(null!=D&&D.preserveTabOrder&&D.portalNode)if(v&&(B.current=!0),pt(e,D.portalNode)){const e=ut()||O;null==e||e.focus()}else{var t;null==(t=D.afterOutsideRef.current)||t.focus()}}}))}const At=new Set,Pt=n.forwardRef((function(e,t){let{lockScroll:r=!1,...i}=e;const o=je();return ve((()=>{if(!r)return;At.add(o);const e=/iP(hone|ad|od)|iOS/.test(l()),t=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,a=t.left?parseFloat(t.left):window.pageXOffset,s=t.top?parseFloat(t.top):window.pageYOffset;if(t.overflow="hidden",i&&(t[n]=i+"px"),e){var c,u;const e=(null==(c=window.visualViewport)?void 0:c.offsetLeft)||0,r=(null==(u=window.visualViewport)?void 0:u.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(r))+"px",left:-(a-Math.floor(e))+"px",right:"0"})}return()=>{At.delete(o),0===At.size&&(Object.assign(t,{overflow:"",[n]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(a,s)))}}),[o,r]),n.createElement("div",Pe({ref:t},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))}));function Ct(e){return(0,o.Re)(e.target)&&"BUTTON"===e.target.tagName}function Nt(e){return _(e)}function Rt(e,t){void 0===t&&(t={});const{open:r,onOpenChange:i,dataRef:o,elements:{domReference:a}}=e,{enabled:s=!0,event:l="click",toggle:c=!0,ignoreMouse:u=!1,keyboardHandlers:p=!0}=t,f=n.useRef(),h=n.useRef(!1);return n.useMemo((()=>s?{reference:{onPointerDown(e){f.current=e.pointerType},onMouseDown(e){0===e.button&&(y(f.current,!0)&&u||"click"!==l&&(!r||!c||o.current.openEvent&&"mousedown"!==o.current.openEvent.type?(e.preventDefault(),i(!0,e.nativeEvent,"click")):i(!1,e.nativeEvent,"click")))},onClick(e){"mousedown"===l&&f.current?f.current=void 0:y(f.current,!0)&&u||(!r||!c||o.current.openEvent&&"click"!==o.current.openEvent.type?i(!0,e.nativeEvent,"click"):i(!1,e.nativeEvent,"click"))},onKeyDown(e){f.current=void 0,e.defaultPrevented||!p||Ct(e)||(" "!==e.key||Nt(a)||(e.preventDefault(),h.current=!0),"Enter"===e.key&&i(!r||!c,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!p||Ct(e)||Nt(a)||" "===e.key&&h.current&&(h.current=!1,i(!r||!c,e.nativeEvent,"click"))}}}:{}),[s,o,l,u,p,a,c,r,i])}function jt(e){return null!=e&&null!=e.clientX}function Mt(e,t){void 0===t&&(t={});const{open:r,refs:i,dataRef:a,elements:{floating:l}}=e,{enabled:c=!0,axis:u="both",x:p=null,y:f=null}=t,h=n.useRef(!1),d=n.useRef(null),[m,v]=n.useState(),[b,_]=n.useState([]),w=te(((e,t)=>{h.current||a.current.openEvent&&!jt(a.current.openEvent)||i.setPositionReference(function(e,t){let r=null,n=null,i=!1;return{contextElement:e.current||void 0,getBoundingClientRect(){var o,a;const s=(null==(o=e.current)?void 0:o.getBoundingClientRect())||{width:0,height:0,x:0,y:0},l="x"===t.axis||"both"===t.axis,c="y"===t.axis||"both"===t.axis,u=["mouseenter","mousemove"].includes((null==(a=t.dataRef.current.openEvent)?void 0:a.type)||"")&&"touch"!==t.pointerType;let p=s.width,f=s.height,h=s.x,d=s.y;return null==r&&t.x&&l&&(r=s.x-t.x),null==n&&t.y&&c&&(n=s.y-t.y),h-=r||0,d-=n||0,p=0,f=0,!i||u?(p="y"===t.axis?s.width:0,f="x"===t.axis?s.height:0,h=l&&null!=t.x?t.x:h,d=c&&null!=t.y?t.y:d):i&&!u&&(f="x"===t.axis?s.height:f,p="y"===t.axis?s.width:p),i=!0,{width:p,height:f,x:h,y:d,top:d,right:h+p,bottom:d+f,left:h}}}}(i.domReference,{x:e,y:t,axis:u,dataRef:a,pointerType:m}))})),x=te((e=>{null==p&&null==f&&(r?d.current||_([]):w(e.clientX,e.clientY))})),E=y(m)?l:r,S=n.useCallback((()=>{if(!E||!c||null!=p||null!=f)return;const e=(0,o.Jj)(i.floating.current);function t(r){const n=g(r);s(i.floating.current,n)?(e.removeEventListener("mousemove",t),d.current=null):w(r.clientX,r.clientY)}if(!a.current.openEvent||jt(a.current.openEvent)){e.addEventListener("mousemove",t);const r=()=>{e.removeEventListener("mousemove",t),d.current=null};return d.current=r,r}i.setPositionReference(i.domReference.current)}),[a,c,E,i,w,p,f]);return n.useEffect((()=>S()),[S,b]),n.useEffect((()=>{c&&!l&&(h.current=!1)}),[c,l]),n.useEffect((()=>{!c&&r&&(h.current=!0)}),[c,r]),ve((()=>{!c||null==p&&null==f||(h.current=!1,w(p,f))}),[c,p,f,w]),n.useMemo((()=>{if(!c)return{};function e(e){let{pointerType:t}=e;v(t)}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove:x,onMouseEnter:x}}}),[c,x])}const It={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Dt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Lt=e=>{var t,r;return{escapeKey:"boolean"===typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"===typeof e?e:null==(r=null==e?void 0:e.outsidePress)||r}};function Ft(e,t){void 0===t&&(t={});const{open:r,onOpenChange:i,nodeId:a,elements:{reference:l,domReference:c,floating:u},dataRef:p}=e,{enabled:f=!0,escapeKey:h=!0,outsidePress:d=!0,outsidePressEvent:y="pointerdown",referencePress:b=!1,referencePressEvent:_="pointerdown",ancestorScroll:w=!1,bubbles:x,capture:E}=t,S=Be(),k=te("function"===typeof d?d:()=>!1),T="function"===typeof d?k:d,O=n.useRef(!1),A=n.useRef(!1),{escapeKey:P,outsidePress:C}=Lt(x),{escapeKey:N,outsidePress:R}=Lt(E),j=te((e=>{if(!r||!f||!h||"Escape"!==e.key)return;const t=S?Je(S.nodesRef.current,a):[];if(!P&&(e.stopPropagation(),t.length>0)){let e=!0;if(t.forEach((t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}i(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),M=te((e=>{var t;const r=()=>{var t;j(e),null==(t=g(e))||t.removeEventListener("keydown",r)};null==(t=g(e))||t.addEventListener("keydown",r)})),I=te((e=>{const t=O.current;O.current=!1;const r=A.current;if(A.current=!1,"click"===y&&r)return;if(t)return;if("function"===typeof T&&!T(e))return;const n=g(e),l="["+He("inert")+"]",p=m(u).querySelectorAll(l);let f=(0,o.kK)(n)?n:null;for(;f&&!(0,o.Py)(f);){const e=(0,o.Ow)(f);if((0,o.Py)(e)||!(0,o.kK)(e))break;f=e}if(p.length&&(0,o.kK)(n)&&!n.matches("html,body")&&!s(n,u)&&Array.from(p).every((e=>!s(f,e))))return;if((0,o.Re)(n)&&u){const t=n.clientWidth>0&&n.scrollWidth>n.clientWidth,r=n.clientHeight>0&&n.scrollHeight>n.clientHeight;let i=r&&e.offsetX>n.clientWidth;if(r){"rtl"===(0,o.Dx)(n).direction&&(i=e.offsetX<=n.offsetWidth-n.clientWidth)}if(i||t&&e.offsetY>n.clientHeight)return}const h=S&&Je(S.nodesRef.current,a).some((t=>{var r;return v(e,null==(r=t.context)?void 0:r.elements.floating)}));if(v(e,u)||v(e,c)||h)return;const d=S?Je(S.nodesRef.current,a):[];if(d.length>0){let e=!0;if(d.forEach((t=>{var r;null==(r=t.context)||!r.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}i(!1,e,"outside-press")})),D=te((e=>{var t;const r=()=>{var t;I(e),null==(t=g(e))||t.removeEventListener(y,r)};null==(t=g(e))||t.addEventListener(y,r)}));return n.useEffect((()=>{if(!r||!f)return;function e(e){i(!1,e,"ancestor-scroll")}p.current.__escapeKeyBubbles=P,p.current.__outsidePressBubbles=C;const t=m(u);h&&t.addEventListener("keydown",N?M:j,N),T&&t.addEventListener(y,R?D:I,R);let n=[];return w&&((0,o.kK)(c)&&(n=(0,o.Kx)(c)),(0,o.kK)(u)&&(n=n.concat((0,o.Kx)(u))),!(0,o.kK)(l)&&l&&l.contextElement&&(n=n.concat((0,o.Kx)(l.contextElement)))),n=n.filter((e=>{var r;return e!==(null==(r=t.defaultView)?void 0:r.visualViewport)})),n.forEach((t=>{t.addEventListener("scroll",e,{passive:!0})})),()=>{h&&t.removeEventListener("keydown",N?M:j,N),T&&t.removeEventListener(y,R?D:I,R),n.forEach((t=>{t.removeEventListener("scroll",e)}))}}),[p,u,c,l,h,T,y,r,i,w,f,P,C,j,N,M,I,R,D]),n.useEffect((()=>{O.current=!1}),[T,y]),n.useMemo((()=>f?{reference:{onKeyDown:j,[It[_]]:e=>{b&&i(!1,e.nativeEvent,"reference-press")}},floating:{onKeyDown:j,onMouseDown(){A.current=!0},onMouseUp(){A.current=!0},[Dt[y]]:()=>{O.current=!0}}}:{}),[f,b,y,_,i,j])}function Bt(e){var t;void 0===e&&(e={});const{open:r=!1,onOpenChange:i,nodeId:a}=e;const[s,l]=n.useState(null),c=(null==(t=e.elements)?void 0:t.reference)||s,u=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:a,floating:s}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[p,f]=n.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,d]=n.useState(i);A(h,i)||d(i);const[y,m]=n.useState(null),[v,g]=n.useState(null),b=n.useCallback((e=>{e!==E.current&&(E.current=e,m(e))}),[]),_=n.useCallback((e=>{e!==T.current&&(T.current=e,g(e))}),[]),w=a||y,x=s||v,E=n.useRef(null),T=n.useRef(null),R=n.useRef(p),j=null!=c,M=N(c),I=N(o),D=n.useCallback((()=>{if(!E.current||!T.current)return;const e={placement:t,strategy:r,middleware:h};I.current&&(e.platform=I.current),(0,S.oo)(E.current,T.current,e).then((e=>{const t={...e,isPositioned:!0};L.current&&!A(R.current,t)&&(R.current=t,k.flushSync((()=>{f(t)})))}))}),[h,t,r,I]);O((()=>{!1===u&&R.current.isPositioned&&(R.current.isPositioned=!1,f((e=>({...e,isPositioned:!1}))))}),[u]);const L=n.useRef(!1);O((()=>(L.current=!0,()=>{L.current=!1})),[]),O((()=>{if(w&&(E.current=w),x&&(T.current=x),w&&x){if(M.current)return M.current(w,x,D);D()}}),[w,x,D,M,j]);const F=n.useMemo((()=>({reference:E,floating:T,setReference:b,setFloating:_})),[b,_]),B=n.useMemo((()=>({reference:w,floating:x})),[w,x]),z=n.useMemo((()=>{const e={position:r,left:0,top:0};if(!B.floating)return e;const t=C(B.floating,p.x),n=C(B.floating,p.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...P(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,l,B.floating,p.x,p.y]);return n.useMemo((()=>({...p,update:D,refs:F,elements:B,floatingStyles:z})),[p,D,F,B,z])}(e),p=Be(),f=null!=Fe(),h=te(((e,t,r)=>{e&&(y.current.openEvent=t),m.emit("openchange",{open:e,event:t,reason:r,nested:f}),null==i||i(e,t,r)})),d=n.useRef(null),y=n.useRef({}),m=n.useState((()=>Ie()))[0],v=je(),g=n.useCallback((e=>{const t=(0,o.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u.refs.setReference(t)}),[u.refs]),b=n.useCallback((e=>{((0,o.kK)(e)||null===e)&&(d.current=e,l(e)),((0,o.kK)(u.refs.reference.current)||null===u.refs.reference.current||null!==e&&!(0,o.kK)(e))&&u.refs.setReference(e)}),[u.refs]),_=n.useMemo((()=>({...u.refs,setReference:b,setPositionReference:g,domReference:d})),[u.refs,b,g]),w=n.useMemo((()=>({...u.elements,domReference:c})),[u.elements,c]),x=n.useMemo((()=>({...u,refs:_,elements:w,dataRef:y,nodeId:a,floatingId:v,events:m,open:r,onOpenChange:h})),[u,a,v,m,r,h,_,w]);return ve((()=>{const e=null==p?void 0:p.nodesRef.current.find((e=>e.id===a));e&&(e.context=x)})),n.useMemo((()=>({...u,context:x,refs:_,elements:w})),[u,_,w,x])}function zt(e,t){void 0===t&&(t={});const{open:r,onOpenChange:i,events:l,refs:c,elements:{domReference:u}}=e,{enabled:h=!0,visibleOnly:y=!0}=t,v=n.useRef(!1),b=n.useRef(),w=n.useRef(!0);return n.useEffect((()=>{if(!h)return;const e=(0,o.Jj)(u);function t(){!r&&(0,o.Re)(u)&&u===a(m(u))&&(v.current=!0)}function n(){w.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",n,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",n,!0)}}),[u,r,h]),n.useEffect((()=>{if(h)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(v.current=!0)}}),[l,h]),n.useEffect((()=>()=>{clearTimeout(b.current)}),[]),n.useMemo((()=>h?{reference:{onPointerDown(e){p(e.nativeEvent)||(w.current=!1)},onMouseLeave(){v.current=!1},onFocus(e){if(v.current)return;const t=g(e.nativeEvent);if(y&&(0,o.kK)(t))try{if(f()&&d())throw Error();if(!t.matches(":focus-visible"))return}catch(r){if(!w.current&&!_(t))return}i(!0,e.nativeEvent,"focus")},onBlur(e){v.current=!1;const t=e.relatedTarget,r=(0,o.kK)(t)&&t.hasAttribute(He("focus-guard"))&&"outside"===t.getAttribute("data-type");b.current=window.setTimeout((()=>{const n=a(u?u.ownerDocument:document);(t||n!==u)&&(s(c.floating.current,n)||s(u,n)||r||i(!1,e.nativeEvent,"focus"))}))}}}:{}),[h,y,u,c,i])}const $t="active",Ut="selected";function Ht(e,t,r){const n=new Map,i="item"===r;let o=e;if(i&&e){const{[$t]:t,[Ut]:r,...n}=e;o=n}return{..."floating"===r&&{tabIndex:-1},...o,...t.map((t=>{const n=t?t[r]:null;return"function"===typeof n?e?n(e):null:n})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[r,o]=t;var a;i&&[$t,Ut].includes(r)||(0===r.indexOf("on")?(n.has(r)||n.set(r,[]),"function"===typeof o&&(null==(a=n.get(r))||a.push(o),e[r]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=n.get(r))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[r]=o)})),e):e),{})}}function Vt(e){void 0===e&&(e=[]);const t=e,r=n.useCallback((t=>Ht(t,e,"reference")),t),i=n.useCallback((t=>Ht(t,e,"floating")),t),o=n.useCallback((t=>Ht(t,e,"item")),e.map((e=>null==e?void 0:e.item)));return n.useMemo((()=>({getReferenceProps:r,getFloatingProps:i,getItemProps:o})),[r,i,o])}let Gt=!1;function qt(e,t,r){switch(e){case"vertical":return t;case"horizontal":return r;default:return t||r}}function Wt(e,t){return qt(t,e===re||e===ne,e===ie||e===oe)}function Yt(e,t,r){return qt(t,e===ne,r?e===ie:e===oe)||"Enter"===e||" "===e||""===e}function Kt(e,t,r){return qt(t,r?e===oe:e===ie,e===re)}function Xt(e,t){const{open:r,onOpenChange:i,refs:l,elements:{domReference:c,floating:h}}=e,{listRef:y,activeIndex:v,onNavigate:g=(()=>{}),enabled:b=!0,selectedIndex:_=null,allowEscape:E=!1,loop:S=!1,nested:k=!1,rtl:T=!1,virtual:O=!1,focusItemOnOpen:A="auto",focusItemOnHover:P=!0,openOnArrowKeyDown:C=!0,disabledIndices:N,orientation:R="vertical",cols:j=1,scrollItemIntoView:M=!0,virtualItemRef:I,itemSizes:D,dense:L=!1}=t;const F=Fe(),B=Be(),z=te(g),$=n.useRef(A),U=n.useRef(null!=_?_:-1),H=n.useRef(null),V=n.useRef(!0),G=n.useRef(z),q=n.useRef(!!h),W=n.useRef(!1),Y=n.useRef(!1),K=Ve(N),X=Ve(r),Z=Ve(M),[J,Q]=n.useState(),[ee,re]=n.useState(),ae=te((function(e,t,r){void 0===r&&(r=!1);const n=e.current[t.current];n&&(O?(Q(n.id),null==B||B.events.emit("virtualfocus",n),I&&(I.current=n)):me(n,{preventScroll:!0,sync:!(!d()||!f())&&(Gt||W.current)}),requestAnimationFrame((()=>{const e=Z.current;e&&n&&(r||!V.current)&&(null==n.scrollIntoView||n.scrollIntoView("boolean"===typeof e?{block:"nearest",inline:"nearest"}:e))})))}));ve((()=>{document.createElement("div").focus({get preventScroll(){return Gt=!0,!1}})}),[]),ve((()=>{b&&(r&&h?$.current&&null!=_&&(Y.current=!0,U.current=_,z(_)):q.current&&(U.current=-1,G.current(null)))}),[b,r,h,_,z]),ve((()=>{if(b&&r&&h)if(null==v){if(W.current=!1,null!=_)return;if(q.current&&(U.current=-1,ae(y,U)),!q.current&&$.current&&(null!=H.current||!0===$.current&&null==H.current)){let e=0;const t=()=>{if(null==y.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else U.current=null==H.current||Yt(H.current,R,T)||k?le(y,K.current):ce(y,K.current),H.current=null,z(U.current)};t()}}else se(y,v)||(U.current=v,ae(y,U,Y.current),Y.current=!1)}),[b,r,h,v,_,k,y,R,T,z,ae,K]),ve((()=>{var e;if(!b||h||!B||O||!q.current)return;const t=B.nodesRef.current,r=null==(e=t.find((e=>e.id===F)))||null==(e=e.context)?void 0:e.elements.floating,n=a(m(h)),i=t.some((e=>e.context&&s(e.context.elements.floating,n)));r&&!i&&V.current&&r.focus({preventScroll:!0})}),[b,h,B,F,O]),ve((()=>{if(b&&B&&O&&!F)return B.events.on("virtualfocus",e),()=>{B.events.off("virtualfocus",e)};function e(e){re(e.id),I&&(I.current=e)}}),[b,B,O,F,I]),ve((()=>{G.current=z,q.current=!!h})),ve((()=>{r||(H.current=null)}),[r]);const ye=null!=v,ge=n.useMemo((()=>{function e(e){if(!r)return;const t=y.current.indexOf(e);-1!==t&&z(t)}return{onFocus(t){let{currentTarget:r}=t;e(r)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...P&&{onMouseMove(t){let{currentTarget:r}=t;e(r)},onPointerLeave(e){let{pointerType:t}=e;V.current&&"touch"!==t&&(U.current=-1,ae(y,U),z(null),O||me(l.floating.current,{preventScroll:!0}))}}}}),[r,l,ae,P,y,z,O]);return n.useMemo((()=>{if(!b)return{};const e=K.current;function t(t){if(V.current=!1,W.current=!0,!X.current&&t.currentTarget===l.floating.current)return;if(k&&Kt(t.key,R,T))return w(t),i(!1,t.nativeEvent,"list-navigation"),void((0,o.Re)(c)&&!O&&c.focus());const n=U.current,s=le(y,e),u=ce(y,e);if("Home"===t.key&&(w(t),U.current=s,z(U.current)),"End"===t.key&&(w(t),U.current=u,z(U.current)),j>1){const r=D||Array.from({length:y.current.length},(()=>({width:1,height:1}))),n=fe(r,j,L),i=n.findIndex((t=>null!=t&&!(null!=e&&e.includes(t)))),o=n.reduce(((t,r,n)=>null==r||null!=e&&e.includes(r)?t:n),-1);if(U.current=n[pe({current:n.map((e=>null!=e?y.current[e]:null))},{event:t,orientation:R,loop:S,cols:j,disabledIndices:de([...e||[],void 0],n),minIndex:i,maxIndex:o,prevIndex:he(U.current,r,n,j,t.key===ne?"bl":t.key===oe?"tr":"tl"),stopEvent:!0})],z(U.current),"both"===R)return}if(Wt(t.key,R)){if(w(t),r&&!O&&a(t.currentTarget.ownerDocument)===t.currentTarget)return U.current=Yt(t.key,R,T)?s:u,void z(U.current);Yt(t.key,R,T)?U.current=S?n>=u?E&&n!==y.current.length?-1:s:ue(y,{startingIndex:n,disabledIndices:e}):Math.min(u,ue(y,{startingIndex:n,disabledIndices:e})):U.current=S?n<=s?E&&-1!==n?y.current.length:u:ue(y,{startingIndex:n,decrement:!0,disabledIndices:e}):Math.max(s,ue(y,{startingIndex:n,decrement:!0,disabledIndices:e})),se(y,U.current)?z(null):z(U.current)}}function n(e){"auto"===A&&u(e.nativeEvent)&&($.current=!0)}const s=O&&r&&ye&&{"aria-activedescendant":ee||J},f=y.current.find((e=>(null==e?void 0:e.id)===J));return{reference:{...s,onKeyDown(n){V.current=!1;const o=0===n.key.indexOf("Arrow"),a=function(e,t,r){return qt(t,r?e===ie:e===oe,e===ne)}(n.key,R,T),s=Kt(n.key,R,T),l=Wt(n.key,R),c=(k?a:l)||"Enter"===n.key||""===n.key.trim();if(O&&r){const e=null==B?void 0:B.nodesRef.current.find((e=>null==e.parentId)),r=B&&e?function(e,t){let r,n=-1;return function t(i,o){o>n&&(r=i,n=o),Je(e,i).forEach((e=>{t(e.id,o+1)}))}(t,0),e.find((e=>e.id===r))}(B.nodesRef.current,e.id):null;if(o&&r&&I){const e=new KeyboardEvent("keydown",{key:n.key,bubbles:!0});if(a||s){var u,p;const t=(null==(u=r.context)?void 0:u.elements.domReference)===n.currentTarget,i=s&&!t?null==(p=r.context)?void 0:p.elements.domReference:a?f:null;i&&(w(n),i.dispatchEvent(e),re(void 0))}var h;if(l&&r.context)if(r.context.open&&r.parentId&&n.currentTarget!==r.context.elements.domReference)return w(n),void(null==(h=r.context.elements.domReference)||h.dispatchEvent(e))}return t(n)}(r||C||!o)&&(c&&(H.current=k&&l?null:n.key),k?a&&(w(n),r?(U.current=le(y,e),z(U.current)):i(!0,n.nativeEvent,"list-navigation")):l&&(null!=_&&(U.current=_),w(n),!r&&C?i(!0,n.nativeEvent,"list-navigation"):t(n),r&&z(U.current)))},onFocus(){r&&z(null)},onPointerDown:function(e){$.current=A,"auto"===A&&p(e.nativeEvent)&&($.current=!0)},onMouseDown:n,onClick:n},floating:{"aria-orientation":"both"===R?void 0:R,...!x(c)&&s,onKeyDown:t,onPointerMove(){V.current=!0}},item:ge}}),[c,l,J,ee,K,X,y,b,R,T,O,r,ye,k,_,C,E,j,S,A,z,i,ge,B,I,D,L])}const Zt=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Jt(e,t){var r;void 0===t&&(t={});const{open:i,floatingId:o}=e,{enabled:a=!0,role:s="dialog"}=t,l=null!=(r=Zt.get(s))?r:s,c=je(),u=null!=Fe();return n.useMemo((()=>{if(!a)return{};const e={id:o,...l&&{role:l}};return"tooltip"===l||"label"===s?{reference:{["aria-"+("label"===s?"labelledby":"describedby")]:i?o:void 0},floating:e}:{reference:{"aria-expanded":i?"true":"false","aria-haspopup":"alertdialog"===l?"dialog":l,"aria-controls":i?o:void 0,..."listbox"===l&&{role:"combobox"},..."menu"===l&&{id:c},..."menu"===l&&u&&{role:"menuitem"},..."select"===s&&{"aria-autocomplete":"none"},..."combobox"===s&&{"aria-autocomplete":"list"}},floating:{...e,..."menu"===l&&{"aria-labelledby":c}},item(e){let{active:t,selected:r}=e;const n={role:"option",...t&&{id:o+"-option"}};switch(s){case"select":return{...n,"aria-selected":t&&r};case"combobox":return{...n,...t&&{"aria-selected":!0}}}return{}}}}),[a,s,l,i,o,c,u])}const Qt=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function er(e,t){return"function"===typeof e?e(t):e}function tr(e,t){void 0===t&&(t={});const{open:r,elements:{floating:i}}=e,{duration:o=250}=t,a=("number"===typeof o?o:o.close)||0,[s,l]=n.useState(!1),[c,u]=n.useState("unmounted"),p=function(e,t){const[r,i]=n.useState(e);return e&&!r&&i(!0),n.useEffect((()=>{if(!e){const e=setTimeout((()=>i(!1)),t);return()=>clearTimeout(e)}}),[e,t]),r}(r,a);return ve((()=>{s&&!p&&u("unmounted")}),[s,p]),ve((()=>{if(i){if(r){u("initial");const e=requestAnimationFrame((()=>{u("open")}));return()=>{cancelAnimationFrame(e)}}l(!0),u("close")}}),[r,i]),{isMounted:p,status:c}}function rr(e,t){void 0===t&&(t={});const{initial:r={opacity:0},open:i,close:o,common:a,duration:s=250}=t,l=e.placement,c=l.split("-")[0],u=n.useMemo((()=>({side:c,placement:l})),[c,l]),p="number"===typeof s,f=(p?s:s.open)||0,h=(p?s:s.close)||0,[d,y]=n.useState((()=>({...er(a,u),...er(r,u)}))),{isMounted:m,status:v}=tr(e,{duration:s}),g=Ve(r),b=Ve(i),_=Ve(o),w=Ve(a);return ve((()=>{const e=er(g.current,u),t=er(_.current,u),r=er(w.current,u),n=er(b.current,u)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===v&&y((t=>({transitionProperty:t.transitionProperty,...r,...e}))),"open"===v&&y({transitionProperty:Object.keys(n).map(Qt).join(","),transitionDuration:f+"ms",...r,...n}),"close"===v){const n=t||e;y({transitionProperty:Object.keys(n).map(Qt).join(","),transitionDuration:h+"ms",...r,...n})}}),[h,_,g,b,w,f,v,u]),{isMounted:m,styles:d}}function nr(e,t){var r;const{open:i,dataRef:o}=e,{listRef:a,activeIndex:s,onMatch:l,onTypingChange:c,enabled:u=!0,findMatch:p=null,resetMs:f=750,ignoreKeys:h=[],selectedIndex:d=null}=t,y=n.useRef(),m=n.useRef(""),v=n.useRef(null!=(r=null!=d?d:s)?r:-1),g=n.useRef(null),b=te(l),_=te(c),x=Ve(p),E=Ve(h);return ve((()=>{i&&(clearTimeout(y.current),g.current=null,m.current="")}),[i]),ve((()=>{var e;i&&""===m.current&&(v.current=null!=(e=null!=d?d:s)?e:-1)}),[i,d,s]),n.useMemo((()=>{if(!u)return{};function e(e){e?o.current.typing||(o.current.typing=e,_(e)):o.current.typing&&(o.current.typing=e,_(e))}function t(e,t,r){const n=x.current?x.current(t,r):t.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(r.toLocaleLowerCase()))));return n?e.indexOf(n):-1}function r(r){const n=a.current;if(m.current.length>0&&" "!==m.current[0]&&(-1===t(n,n,m.current)?e(!1):" "===r.key&&w(r)),null==n||E.current.includes(r.key)||1!==r.key.length||r.ctrlKey||r.metaKey||r.altKey)return;i&&" "!==r.key&&(w(r),e(!0));n.every((e=>{var t,r;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(r=e[1])?void 0:r.toLocaleLowerCase())}))&&m.current===r.key&&(m.current="",v.current=g.current),m.current+=r.key,clearTimeout(y.current),y.current=setTimeout((()=>{m.current="",v.current=g.current,e(!1)}),f);const o=v.current,s=t(n,[...n.slice((o||0)+1),...n.slice(0,(o||0)+1)],m.current);-1!==s?(b(s),g.current=s):" "!==r.key&&(m.current="",e(!1))}return{reference:{onKeyDown:r},floating:{onKeyDown:r,onKeyUp(t){" "===t.key&&e(!1)}}}}),[u,i,o,a,f,E,x,b,_])}function ir(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const or=e=>({name:"inner",options:e,async fn(t){const{listRef:r,overflowRef:n,onFallbackChange:i,offset:o=0,index:a=0,minItemsVisible:s=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=e,{rects:p,elements:{floating:f}}=t,h=r.current[a];if(!h)return{};const d={...t,...await(0,R.cv)(-h.offsetTop-f.clientTop-p.reference.height/2-h.offsetHeight/2-o).fn(t)},y=(null==c?void 0:c.current)||f,m=await(0,R.US)(ir(d,y.scrollHeight),u),v=await(0,R.US)(d,{...u,elementContext:"reference"}),g=Math.max(0,m.top),b=d.y+g,_=Math.max(0,y.scrollHeight-g-Math.max(0,m.bottom));return y.style.maxHeight=_+"px",y.scrollTop=g,i&&(y.offsetHeight<h.offsetHeight*Math.min(s,r.current.length-1)-1||v.top>=-l||v.bottom>=-l?(0,k.flushSync)((()=>i(!0))):(0,k.flushSync)((()=>i(!1)))),n&&(n.current=await(0,R.US)(ir({...d,y:b},y.offsetHeight),u)),{y:b}}});function ar(e,t){const{open:r,elements:i}=e,{enabled:o=!0,overflowRef:a,scrollRef:s,onChange:l}=t,u=te(l),p=n.useRef(!1),f=n.useRef(null),h=n.useRef(null);return n.useEffect((()=>{if(!o)return;function e(e){if(e.ctrlKey||!t||null==a.current)return;const r=e.deltaY,n=a.current.top>=-.5,i=a.current.bottom>=-.5,o=t.scrollHeight-t.clientHeight,s=r<0?-1:1,l=r<0?"max":"min";t.scrollHeight<=t.clientHeight||(!n&&r>0||!i&&r<0?(e.preventDefault(),(0,k.flushSync)((()=>{u((e=>e+Math[l](r,o*s)))}))):/firefox/i.test(c())&&(t.scrollTop+=r))}const t=(null==s?void 0:s.current)||i.floating;return r&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{f.current=t.scrollTop,null!=a.current&&(h.current={...a.current})})),()=>{f.current=null,h.current=null,t.removeEventListener("wheel",e)}):void 0}),[o,r,i.floating,a,s,u]),n.useMemo((()=>o?{floating:{onKeyDown(){p.current=!0},onWheel(){p.current=!1},onPointerMove(){p.current=!1},onScroll(){const e=(null==s?void 0:s.current)||i.floating;if(a.current&&e&&p.current){if(null!==f.current){const t=e.scrollTop-f.current;(a.current.bottom<-.5&&t<-1||a.current.top<-.5&&t>1)&&(0,k.flushSync)((()=>u((e=>e+t))))}requestAnimationFrame((()=>{f.current=e.scrollTop}))}}}}:{}),[o,a,i.floating,s,u])}function sr(e,t){const[r,n]=e;let i=!1;const o=t.length;for(let a=0,s=o-1;a<o;s=a++){const[e,o]=t[a]||[0,0],[l,c]=t[s]||[0,0];o>=n!==c>=n&&r<=(l-e)*(n-o)/(c-o)+e&&(i=!i)}return i}function lr(e){void 0===e&&(e={});const{buffer:t=.5,blockPointerEvents:r=!1,requireIntent:n=!0}=e;let i,a=!1,l=null,c=null,u=performance.now();const p=e=>{let{x:r,y:p,placement:f,elements:h,onClose:d,nodeId:y,tree:m}=e;return function(e){function v(){clearTimeout(i),d()}if(clearTimeout(i),!h.domReference||!h.floating||null==f||null==r||null==p)return;const{clientX:b,clientY:_}=e,w=[b,_],x=g(e),E="mouseleave"===e.type,S=s(h.floating,x),k=s(h.domReference,x),T=h.domReference.getBoundingClientRect(),O=h.floating.getBoundingClientRect(),A=f.split("-")[0],P=r>O.right-O.width/2,C=p>O.bottom-O.height/2,N=function(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}(w,T),R=O.width>T.width,j=O.height>T.height,M=(R?T:O).left,I=(R?T:O).right,D=(j?T:O).top,L=(j?T:O).bottom;if(S&&(a=!0,!E))return;if(k&&(a=!1),k&&!E)return void(a=!0);if(E&&(0,o.kK)(e.relatedTarget)&&s(h.floating,e.relatedTarget))return;if(m&&Je(m.nodesRef.current,y).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if("top"===A&&p>=T.bottom-1||"bottom"===A&&p<=T.top+1||"left"===A&&r>=T.right-1||"right"===A&&r<=T.left+1)return v();let F=[];switch(A){case"top":F=[[M,T.top+1],[M,O.bottom-1],[I,O.bottom-1],[I,T.top+1]];break;case"bottom":F=[[M,O.top+1],[M,T.bottom-1],[I,T.bottom-1],[I,O.top+1]];break;case"left":F=[[O.right-1,L],[O.right-1,D],[T.left+1,D],[T.left+1,L]];break;case"right":F=[[T.right-1,L],[T.right-1,D],[O.left+1,D],[O.left+1,L]]}if(!sr([b,_],F)){if(a&&!N)return v();if(!E&&n){const t=function(e,t){const r=performance.now(),n=r-u;if(null===l||null===c||0===n)return l=e,c=t,u=r,null;const i=e-l,o=t-c,a=Math.sqrt(i*i+o*o);return l=e,c=t,u=r,a/n}(e.clientX,e.clientY);if(null!==t&&t<.1)return v()}sr([b,_],function(e){let[r,n]=e;switch(A){case"top":return[[R?r+t/2:P?r+4*t:r-4*t,n+t+1],[R?r-t/2:P?r+4*t:r-4*t,n+t+1],...[[O.left,P||R?O.bottom-t:O.top],[O.right,P?R?O.bottom-t:O.top:O.bottom-t]]];case"bottom":return[[R?r+t/2:P?r+4*t:r-4*t,n-t],[R?r-t/2:P?r+4*t:r-4*t,n-t],...[[O.left,P||R?O.top+t:O.bottom],[O.right,P?R?O.top+t:O.bottom:O.top+t]]];case"left":{const e=[r+t+1,j?n+t/2:C?n+4*t:n-4*t],i=[r+t+1,j?n-t/2:C?n+4*t:n-4*t];return[...[[C||j?O.right-t:O.left,O.top],[C?j?O.right-t:O.left:O.right-t,O.bottom]],e,i]}case"right":return[[r-t,j?n+t/2:C?n+4*t:n-4*t],[r-t,j?n-t/2:C?n+4*t:n-4*t],...[[C||j?O.left+t:O.right,O.top],[C?j?O.left+t:O.right:O.left+t,O.bottom]]]}}([r,p]))?!a&&n&&(i=window.setTimeout(v,40)):v()}}};return p.__options={blockPointerEvents:r},p}},5892:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__}),module=__webpack_require__.hmd(module),function(){var p,aa=[];function ba(e){return function(){return aa[e].apply(this,arguments)}}function ca(e,t){return aa[e]=t}function da(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function ea(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:da(e)}}function fa(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}var ia="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},ja="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ka(e,t){if(t){var r=ja;e=e.split(".");for(var n=0;n<e.length-1;n++){var i=e[n];i in r||(r[i]={}),r=r[i]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&ia(r,e,{configurable:!0,writable:!0,value:t})}}function la(){la=function(){},ja.Symbol||(ja.Symbol=ma)}function na(e,t){this.a=e,ia(this,"description",{configurable:!0,writable:!0,value:t})}ka("Array.prototype.find",(function(e){return e||function(e,t){e:{var r=this;r instanceof String&&(r=String(r));for(var n=r.length,i=0;i<n;i++){var o=r[i];if(e.call(t,o,i,r)){e=o;break e}}e=void 0}return e}})),na.prototype.toString=function(){return this.a};var ma=function(){var e=0;return function t(r){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(r||"")+"_"+e++,r)}}(),ra;function oa(){la();var e=ja.Symbol.iterator;e||(e=ja.Symbol.iterator=ja.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&ia(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return pa(da(this))}}),oa=function(){}}function pa(e){return oa(),(e={next:e})[ja.Symbol.iterator]=function(){return this},e}function qa(e,t){oa(),e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n}if(ka("Array.prototype.keys",(function(e){return e||function(){return qa(this,(function(e){return e}))}})),"function"==typeof Object.setPrototypeOf)ra=Object.setPrototypeOf;else{var sa;e:{var ta={Fg:!0},ua={};try{ua.__proto__=ta,sa=ua.Fg;break e}catch(a){}sa=!1}ra=sa?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var va=ra;ka("Object.setPrototypeOf",(function(e){return e||va})),ka("Object.values",(function(e){return e||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(e[t]);return r}})),ka("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),ka("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var i=r[t];if(i===e||Object.is(i,e))return!0}return!1}})),ka("Promise",(function(e){function t(e){this.C=0,this.b=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function r(){this.a=null}function n(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=ja.setTimeout;r.prototype.c=function(e){i(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(n){this.f(n)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.m),reject:e(this.f)}},t.prototype.m=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.U(e);else{e:switch(typeof e){case"object":var r=null!=e;break e;case"function":r=!0;break e;default:r=!1}r?this.s(e):this.g(e)}},t.prototype.s=function(e){var t=void 0;try{t=e.then}catch(r){return void this.f(r)}"function"==typeof t?this.u(t,e):this.g(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.g=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.C)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.C);this.C=e,this.b=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new r;return t.prototype.U=function(e){var t=this.c();e.sf(t.resolve,t.reject)},t.prototype.u=function(e,t){var r=this.c();try{e.call(t,r.resolve,r.reject)}catch(n){r.reject(n)}},t.prototype.then=function(e,r){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(r){o(r)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.sf(n(e,i),n(r,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.sf=function(e,t){function r(){switch(n.C){case 1:e(n.b);break;case 2:t(n.b);break;default:throw Error("Unexpected state: "+n.C)}}var n=this;null==this.a?o.b(r):this.a.push(r)},t.resolve=n,t.reject=function(e){return new t((function(t,r){r(e)}))},t.race=function(e){return new t((function(t,r){for(var i=ea(e),o=i.next();!o.done;o=i.next())n(o.value).sf(t,r)}))},t.all=function(e){var r=ea(e),i=r.next();return i.done?n([]):new t((function(e,t){function o(t){return function(r){a[t]=r,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,n(i.value).sf(o(a.length-1),t),i=r.next()}while(!i.done)}))},t})),ka("Object.entries",(function(e){return e||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push([t,e[t]]);return r}}));var wa="function"==typeof Object.assign?Object.assign:function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};ka("Object.assign",(function(e){return e||wa})),ka("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}}));var xa=this||self;function ya(e,t,r){e=e.split("."),r=r||xa,e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function za(){}function Aa(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function Ca(e){var t=Aa(e);return"array"==t||"object"==t&&"number"==typeof e.length}function Da(e){return"function"==Aa(e)}function Ea(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ga="closure_uid_"+(1e9*Math.random()>>>0),Ha=0;function Ia(e,t,r){return e.call.apply(e.bind,arguments)}function Ja(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Ka(e,t,r){return(Ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ia:Ja).apply(null,arguments)}function La(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function t(e,t){ya(e,t,void 0)}function u(e,t){function r(){}r.prototype=t.prototype,e.j=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ap=function(e,r,n){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[r].apply(e,i)}}function Ma(e){if(Error.captureStackTrace)Error.captureStackTrace(this,Ma);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function Na(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Oa(){this.b=this.a=null}u(Ma,Error),Ma.prototype.name="CustomError",Na.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e},Na.prototype.put=function(e){this.f(e),100>this.b&&(this.b++,e.next=this.a,this.a=e)};var Qa=new Na((function(){return new Pa}),(function(e){e.reset()}));function Pa(){this.next=this.b=this.a=null}Oa.prototype.add=function(e,t){var r=Qa.get();r.set(e,t),this.b?this.b.next=r:this.a=r,this.b=r},Oa.prototype.remove=function(){var e=null;return this.a&&(e=this.a,this.a=this.a.next,this.a||(this.b=null),e.next=null),e},Pa.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pa.prototype.reset=function(){this.next=this.b=this.a=null};var Ra=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Sa(e,t){return-1!=e.indexOf(t)}function Ta(e,t){return e<t?-1:e>t?1:0}function Ua(e,t){for(var r in e)if(t.call(void 0,e[r],r,e))return!0;return!1}function Va(e){for(var t in e)return!1;return!0}function Wa(e){var t,r={};for(t in e)r[t]=e[t];return r}var Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Za;function Ya(e,t){for(var r,n,i=1;i<arguments.length;i++){for(r in n=arguments[i])e[r]=n[r];for(var o=0;o<Xa.length;o++)r=Xa[o],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}e:{var $a=xa.navigator;if($a){var ab=$a.userAgent;if(ab){Za=ab;break e}}Za=""}function bb(e){return Sa(Za,e)}var cb=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1};function db(e,t){this.b=e===eb&&t||"",this.a=fb}var fb={},eb={},gb=new db(eb,"");function hb(e,t){this.b=e===ib&&t||"",this.a=jb}hb.prototype.rc=function(){return 1};var jb={},ib={};function kb(){this.b="",this.c=lb,this.a=null}function mb(){var e=nb;return e instanceof kb&&e.constructor===kb&&e.c===lb?e.b:(Aa(e),"type_error:SafeHtml")}kb.prototype.rc=function(){return this.a};var lb={};function ob(e){var t=new kb;return t.b=e,t.a=0,t}ob("<!DOCTYPE html>");var nb=ob("");function pb(e){var t=new hb(ib,gb instanceof db&&gb.constructor===db&&gb.a===fb?gb.b:"type_error:Const");t instanceof hb&&t.constructor===hb&&t.a===jb?t=t.b:(Aa(t),t="type_error:TrustedResourceUrl"),e.src=t.toString()}function qb(e){return qb[" "](e),e}function sb(e,t){var r=tb;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}ob("<br>"),qb[" "]=za;var ub=bb("Opera"),vb=bb("Trident")||bb("MSIE"),wb=bb("Edge"),xb=bb("Gecko")&&!(Sa(Za.toLowerCase(),"webkit")&&!bb("Edge"))&&!(bb("Trident")||bb("MSIE"))&&!bb("Edge"),yb=Sa(Za.toLowerCase(),"webkit")&&!bb("Edge"),Ab;function zb(){var e=xa.document;return e?e.documentMode:void 0}e:{var Bb="",Cb=function(){var e=Za;return xb?/rv:([^\);]+)(\)|;)/.exec(e):wb?/Edge\/([\d\.]+)/.exec(e):vb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):yb?/WebKit\/(\S+)/.exec(e):ub?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cb&&(Bb=Cb?Cb[1]:""),vb){var Db=zb();if(null!=Db&&Db>parseFloat(Bb)){Ab=String(Db);break e}}Ab=Bb}var tb={},Fb,Ib,Mb;function Eb(e){return sb(e,(function(){for(var t=0,r=Ra(String(Ab)).split("."),n=Ra(String(e)).split("."),i=Math.max(r.length,n.length),o=0;0==t&&o<i;o++){var a=r[o]||"",s=n[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=Ta(t=0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Ta(0==a[2].length,0==s[2].length)||Ta(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}function Gb(e){var t=document;return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Hb(e){xa.setTimeout((function(){throw e}),0)}function Kb(){var e=xa.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!bb("Presto")&&(e=function(){var e=Gb("IFRAME");e.style.display="none",pb(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(mb()),e.close();var r="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=Ka((function(e){"*"!=n&&e.origin!=n||e.data!=r||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(r,n)}}}),"undefined"!==typeof e&&!bb("Trident")&&!bb("MSIE")){var t=new e,r={},n=r;return t.port1.onmessage=function(){if(void 0!==r.next){var e=(r=r.next).bj;r.bj=null,e()}},function(e){n.next={bj:e},n=n.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in Gb("SCRIPT")?function(e){var t=Gb("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){xa.setTimeout(e,0)}}function Lb(e,t){Mb||Nb(),Ob||(Mb(),Ob=!0),Pb.add(e,t)}function Nb(){if(xa.Promise&&xa.Promise.resolve){var e=xa.Promise.resolve(void 0);Mb=function(){e.then(Qb)}}else Mb=function(){var e=Qb;!Da(xa.setImmediate)||xa.Window&&xa.Window.prototype&&!bb("Edge")&&xa.Window.prototype.setImmediate==xa.setImmediate?(Ib||(Ib=Kb()),Ib(e)):xa.setImmediate(e)}}Fb=xa.document&&vb?zb():void 0,!xb&&!vb||vb&&9<=Number(Fb)||xb&&Eb("1.9.1"),vb&&Eb("9");var Ob=!1,Pb=new Oa;function Qb(){for(var e;e=Pb.remove();){try{e.a.call(e.b)}catch(t){Hb(t)}Qa.put(e)}Ob=!1}function Rb(e){if(this.C=Sb,this.i=void 0,this.c=this.a=this.b=null,this.f=this.g=!1,e!=za)try{var t=this;e.call(void 0,(function(e){Tb(t,Ub,e)}),(function(e){Tb(t,Vb,e)}))}catch(r){Tb(this,Vb,r)}}var Sb=0,Ub=2,Vb=3;function Wb(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Wb.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Xb=new Na((function(){return new Wb}),(function(e){e.reset()}));function Yb(e,t,r){var n=Xb.get();return n.f=e,n.b=t,n.c=r,n}function Zb(e){if(e instanceof Rb)return e;var t=new Rb(za);return Tb(t,Ub,e),t}function $b(e){return new Rb((function(t,r){r(e)}))}function ac(){var e,t;return new cc(new Rb((function(r,n){e=r,t=n})),e,t)}function fc(e,t){if(e.C==Sb)if(e.b){var r=e.b;if(r.a){for(var n=0,i=null,o=null,a=r.a;a&&(a.g||(n++,a.a==e&&(i=a),!(i&&1<n)));a=a.next)i||(o=a);i&&(r.C==Sb&&1==n?fc(r,t):(o?((n=o).next==r.c&&(r.c=n),n.next=n.next.next):gc(r),hc(r,i,Vb,t)))}e.b=null}else Tb(e,Vb,t)}function ic(e,t){e.a||e.C!=Ub&&e.C!=Vb||jc(e),e.c?e.c.next=t:e.a=t,e.c=t}function dc(e,t,r,n){var i=Yb(null,null,null);return i.a=new Rb((function(e,o){i.f=t?function(r){try{var i=t.call(n,r);e(i)}catch(a){o(a)}}:e,i.b=r?function(t){try{var i=r.call(n,t);void 0===i&&t instanceof ec?o(t):e(i)}catch(a){o(a)}}:o})),i.a.b=e,ic(e,i),i.a}function Tb(e,t,r){if(e.C==Sb){e===r&&(t=Vb,r=new TypeError("Promise cannot resolve to itself")),e.C=1;e:{var n=r,i=e.s,o=e.m;if(n instanceof Rb){ic(n,Yb(i||za,o||null,e));var a=!0}else{if(n)try{var s=!!n.$goog_Thenable}catch(c){s=!1}else s=!1;if(s)n.then(i,o,e),a=!0;else{if(Ea(n))try{var l=n.then;if(Da(l)){kc(n,l,i,o,e),a=!0;break e}}catch(c){o.call(e,c),a=!0;break e}a=!1}}}a||(e.i=r,e.C=t,e.b=null,jc(e),t!=Vb||r instanceof ec||lc(e,r))}}function kc(e,t,r,n,i){function o(e){a||(a=!0,n.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,r.call(i,e))}),o)}catch(s){o(s)}}function jc(e){e.g||(e.g=!0,Lb(e.l,e))}function gc(e){var t=null;return e.a&&(t=e.a,e.a=t.next,t.next=null),e.a||(e.c=null),t}function hc(e,t,r,n){if(r==Vb&&t.b&&!t.g)for(;e&&e.f;e=e.b)e.f=!1;if(t.a)t.a.b=null,mc(t,r,n);else try{t.g?t.f.call(t.c):mc(t,r,n)}catch(i){nc.call(null,i)}Xb.put(t)}function mc(e,t,r){t==Ub?e.f.call(e.c,r):e.b&&e.b.call(e.c,r)}function lc(e,t){e.f=!0,Lb((function(){e.f&&nc.call(null,t)}))}Rb.prototype.then=function(e,t,r){return dc(this,Da(e)?e:null,Da(t)?t:null,r)},Rb.prototype.$goog_Thenable=!0,Rb.prototype.cancel=function(e){if(this.C==Sb){var t=new ec(e);Lb((function(){fc(this,t)}),this)}},Rb.prototype.s=function(e){this.C=Sb,Tb(this,Ub,e)},Rb.prototype.m=function(e){this.C=Sb,Tb(this,Vb,e)},Rb.prototype.l=function(){for(var e;e=gc(this);)hc(this,e,this.C,this.i);this.g=!1};var nc=Hb;function ec(e){Ma.call(this,e)}function cc(e,t,r){this.Ak=e,this.resolve=t,this.reject=r}u(ec,Ma),ec.prototype.name="cancel";var x=this;function oc(){return Object.create(z,void 0)}var A=Ka,pc=String,qc=x.Object.freeze||function(e){return e};function rc(e){for(var t,r=Object.keys(e),n=r.length;n--;)Ea(t=e[r[n]])&&rc(t);return qc(e)}function sc(e){var t=Aa(e);if("object"==t||"array"==t){if(Da(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)e.hasOwnProperty(r)&&(t[r]=sc(e[r]));return t}return e}var B=[].pop(),z=/x/.exec("");function tc(e,t){return pc(e).split(t!==B?t:" ")}var uc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(e,t,r,n,i){if(!(t=e instanceof t)&&r)throw new D(r,n,vc(i)?i:e);return t}function xc(e,t){if(!0===(C(e,t)&&e.constructor===t))throw new TypeError("Illegal constructor "+yc(t))}function zc(e,t,r,n,i){if(!(t=Ac(e)===t)&&r)throw new D(r,n,vc(i)?i:e);return t}function Bc(e,t,r,n){return zc(e,"Array",t,r,n)}function vc(e){return e!==B}function Cc(e){return"string"===typeof e}t("H.lang.isArray",Bc),t("H.lang.isString",Cc);var Dc=parseInt,Ec=parseFloat,E=isNaN;function Fc(e){return e===+e}function Gc(e){return!E(+e)}function Ac(e){var t=Object[uc[0]][uc[6]].call(e).match(/^\[object (\w+)\]$/);return t?t[1]:typeof e}t("H.lang.isNumber",Fc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(e){return"number"===typeof e&&0===e%1});var Hc=[];function Ic(e){0>Hc.indexOf(e)&&Hc.push(e)}function yc(e,t,r,n){var i,o="",a=2>arguments.length;return a&&(t={H:x.H},r="",n=Hc.slice()),Jc(t,!0,(function(t,a){try{if(a=Kc(t,i=t[a]),!(Ea(i)&&i.window===i&&i.self===i||Ea(i)&&0<i.nodeType&&Da(i.cloneNode))&&Ea(i)){if(i===e)return o=r+"."+a,!0;if(0>n.indexOf(i)&&(n.push(i),o=yc(e,i,r+"."+a,n)))return!0}}catch(s){}})),a&&(o=o?o.substr(1).replace("."+uc[0]+".","#"):"~"+(Da(e)?Lc(e)+"()":Ac(e))),o}function Kc(e,t){var r=[];return Jc(e,!1,(function(e,n){e[n]===t&&r.push(n)})),r.sort(Mc)[0]}function Mc(e,t){return t.length-e.length}Ic(Hc);var Nc=Object[uc[0]][uc[2]];function Jc(e,t,r){var n;if(e){for(i in e)if((!t||Nc.call(e,i))&&r(e,i,!0))return;for(n=uc.length;n--;){var i=uc[n];if((!t||Nc.call(e,i))&&r(e,i,!1))break}}}function Lc(e){return(e=/^\s*function ([^\( ]+)/.exec(e))?e[1]:"anonymous"}function Oc(e,t,r){r[t]="#"+t}var Pc=!!x.__karma__;function Qc(){throw Error("unimplemented method")}function Rc(e,t){"status"in(t=t||{})&&(this.status=+t.status),"statusText"in t&&(this.statusText=t.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,e?"string"===typeof e?this.c=e:(t=x.ArrayBuffer)&&t.prototype.isPrototypeOf(e)?this.a=e:t&&e.buffer?this.a=e.buffer:x.Blob.prototype.isPrototypeOf(e)&&(this.b=e):this.c=""}function Sc(e){if(e.f)return $b(new TypeError("Already read"));e.f=!0}function Tc(e){var t=new FileReader;return t.readAsText(e),new Rb((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function D(e,t,r){var n=arguments.length;if((t=t!==B?+t:t)!==B){var i=(i=/^.*?\(([^\)]+)/.exec((""+e).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?tc(i[1].replace(/\s+/g,""),","):[];i.forEach(Oc),i=i[t]||"#"+t}var o=e?yc(e):"";return n=2<n?pc(r):"",(i||n)&&(o+=" (Argument "+(i||"")+(n?" "+n:"")+")"),n=Error(o),Object.setPrototypeOf(n,D.prototype),n}function Uc(e,t,r){var n,i,o,a=r&&r.headers||{},s={},l=this;if(!Da(t))throw new D(Uc,1,"function required");Ya(a,Xc.headers,a),Ya(s,Xc,r||{}),s.headers=a,this.c=t,this.a=n=new XMLHttpRequest,t=s.method;try{for(i in n.open(t,e,!0),a)a.hasOwnProperty(i)&&(o=a[i])&&n.setRequestHeader(i,o);n.withCredentials=!!s.withCredentials,function(){var e=A(l.b,l),t=+s.timeout||0;Vc?(Wc(l,"timeout",e),n.timeout=t):t&&(l.f=setTimeout((function(){n.abort(),l.b({type:"timeout"})}),t)),Wc(l,"error",e),Wc(l,"load",e),n.send(s.data)}()}catch(c){this.b({type:"cors"})}}t("H.net.Response",Rc),Rc.prototype.type="default",Rc.prototype.type=Rc.prototype.type,Rc.prototype.status=200,Rc.prototype.status=Rc.prototype.status,Rc.prototype.statusText="OK",Rc.prototype.statusText=Rc.prototype.statusText,Rc.error=function(){return Rc.a||(Rc.a=new Rc(null,{status:0,statusText:""}),Rc.a.type="error"),Rc.a},Rc.error=Rc.error,Rc.prototype.text=function(){var e=Sc(this);if(!e)if(this.c)e=Zb(this.c);else if(this.a){var t,r=(e=new Uint8Array(this.a)).length,n=Array(r);for(t=0;t<r;t++)n[t]=String.fromCharCode(e[t]);e=Zb(n.join(""))}else e=this.b?Tc(this.b):$b("Unsupported response body");return e},Rc.prototype.json=function(){return this.text().then(x.JSON.parse)},Rc.prototype.blob=function(){var e,t=Sc(this);return t||(this.b?e=this.b:this.a&&(e=new Blob([this.a],{type:"application/octet-stream"}))),t||Zb(e)},Rc.prototype.arrayBuffer=function(){return this.a?Sc(this)||Zb(this.a.slice(0)):this.blob().then(Rc.b)},Rc.b=function(e){var t=new FileReader;return t.readAsArrayBuffer(e),new Rb((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))},!Pc&&x.Response&&x.Response.error&&(Rc=x.Response,Ic(Rc.prototype)),u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",t("H.net.Xhr",Uc);var Xc={method:"GET",headers:{},data:null},Yc="withCredentials"in new XMLHttpRequest,Vc="timeout"in new XMLHttpRequest,bd,cd,dd,gd,hd;function Wc(e,t,r){Yc?e.a.addEventListener(t,r):e.a["on"+t]=r}function Zc(e,t,r){Yc?e.a.removeEventListener(t,r):e.a["on"+t]=null}function $c(e,t){var r=[];return e&&r.push(yc(e)),1<arguments.length&&r.push(""+t),r=Error(r.join(" ")),Object.setPrototypeOf(r,$c.prototype),r}function ed(){if(this.constructor=this.constructor,!Cc("STATIC_DB"))throw new D(this.constructor,0);if(this.g=fd(),!this.g)throw new $c(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Zh=A(this.Zh,this)}function md(e,t,r){if(e.b)e.a?(e.a.push(t),r&&e.c.push(r)):e.f?r&&r(e.f):t(e.b.result);else{e.b=e.g.open("H_STATIC_DB",1),e.b.onupgradeneeded=e.Zh;var n=e.b.onerror=function(){clearTimeout(e.i),e.f=this.error,e.c.forEach((function(t){t(e.f)})),delete e.a,delete e.c};e.i=setTimeout((function(){n.call({error:Error("DbOpenTimeoutError")})}),500),e.b.onsuccess=function(){clearTimeout(e.i),e.a?(e.a.forEach((function(e){e(this.result)}),this),delete e.a,delete e.c):(delete e.b,delete e.f,e.a=[],e.c=[])},e.a.push(t),r&&e.c.push(r)}}function jd(e,t,r){md(e,(function(e){e=e.transaction(["data"],"readwrite"),t(e.objectStore("data"))}),r)}function kd(e,t,r){t&&(e.onsuccess=function(){t(this.result)}),r&&(e.onerror=function(){r(this.error)})}function id(e){var t=Object.prototype.toString.call(e);return"[object Blob]"===t||"[object ArrayBuffer]"===t||Cc(e)||Ea(e)}function nd(){return gd||(gd=new ed),gd}function fd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function od(){var e="";if(!vc(hd))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)hd=!1;else{try{var t=fd();e="H_TEST_DB";var r=t&&t.open(e,1)}catch(n){}hd=!!r&&null===r.onupgradeneeded,r&&t.deleteDatabase&&t.deleteDatabase(e)}return hd}function qd(){0!=rd&&(sd[this[Ga]||(this[Ga]=++Ha)]=this),this.zd=this.zd,this.mb=this.mb}Uc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Uc.prototype.abort=Uc.prototype.abort,Uc.prototype.b=function(e){var t,r=e.type;e=this.a,this.f&&clearTimeout(this.f),"load"===r?e instanceof XMLHttpRequest&&200!==e.status&&(t="network"):t=4===e.readyState&&0===e.status&&"error"==r?"cors":"error"!=r?r:"network",Zc(this,"timeout",r=this.b),Zc(this,"error",r),Zc(this,"load",r),e=0===e.status||t&&"network"!==t?Rc.error():new Rc(e.responseText||null,e),t=this.c,delete this.b,delete this.c,delete this.a,t(e)},u($c,Error),t("H.lang.IllegalOperationError",$c),$c.prototype.name="IllegalOperationError",p=ed.prototype,p.put=function(e,t,r,n){if(!Cc(e)&&!Fc(e))throw new D(this.put,0);if(!id(t))throw new D(this.put,1);jd(this,(function(i){kd(i.put(t,e),r,n)}),n)},p.get=function(e,t,r){var n;if(!Cc(e)&&!Fc(e))throw new D(this.get,0);if(!Da(t))throw new D(this.get,1);return jd(this,(function(i){kd(n=i.get(e),t,r)}),r),{cancel:function(){n&&(n.onsuccess=ld)}}},p.remove=function(e,t,r){if(!Cc(e)&&!Fc(e))throw new D(this.remove,0);jd(this,(function(n){kd(n.delete(e),t,r)}),r)},p.clear=function(e,t){jd(this,(function(r){kd(r.clear(),e,t)}),t)},p.Zh=function(){var e=this.b.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",nd),t("H.util.IndexedDBStorage.isSupported",od);var rd=0,sd={};function td(e){e&&"function"==typeof e.F&&e.F()}function ud(e,t){this.type=e,this.currentTarget=this.target=t,this.c=this.a=!1,this.Ik=!0}function vd(e,t,r){vd.j.constructor.call(this,e,r),this.data=t}function wd(e,t,r){wd.j.constructor.call(this,e,r),this.message=t}qd.prototype.zd=!1,qd.prototype.F=function(){if(!this.zd&&(this.zd=!0,this.o(),0!=rd)){var e=this[Ga]||(this[Ga]=++Ha);if(0!=rd&&this.mb&&0<this.mb.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete sd[e]}},qd.prototype.tb=function(e,t){this.zd?void 0!==t?e.call(t):e():(this.mb||(this.mb=[]),this.mb.push(void 0!==t?Ka(e,t):e))},qd.prototype.o=function(){if(this.mb)for(;this.mb.length;)this.mb.shift()()},ud.prototype.stopPropagation=function(){this.a=!0},ud.prototype.preventDefault=function(){this.c=!0,this.Ik=!1},t("H.util.Event",ud),ud.prototype.stopPropagation=ud.prototype.stopPropagation,ud.prototype.stopPropagation=ud.prototype.stopPropagation,ud.prototype.CAPTURING_PHASE=1,ud.prototype.CAPTURING_PHASE=ud.prototype.CAPTURING_PHASE,ud.prototype.AT_TARGET=2,ud.prototype.AT_TARGET=ud.prototype.AT_TARGET,ud.prototype.BUBBLING_PHASE=3,ud.prototype.BUBBLING_PHASE=ud.prototype.BUBBLING_PHASE,ud.prototype.eventPhase=0,ud.prototype.eventPhase=ud.prototype.eventPhase,u(vd,ud),t("H.util.DataEvent",vd),u(wd,ud),t("H.util.ErrorEvent",wd);var xd=Math,yd=xd.min,zd=xd.max,Ad=xd.round,Bd=xd.floor,Cd=xd.ceil,Dd=xd.abs,Ed=xd.log,Fd=xd.sqrt,Gd=xd.pow,Hd=xd.exp,Id=xd.sin,Jd=xd.asin,Kd=xd.cos,Ld=xd.tan,Md=xd.atan,Nd=xd.atan2,Od=xd.LN2,Pd=xd.PI,Qd=Pd/2,Rd=Pd/4,Sd=2*Pd,Td=3*Pd,Ud=Pd/180,Vd=180/Pd,Wd=1/0,Xd=Gd(-2,53),Yd=Yd||function(e){return Ed(e)/Od};function Zd(e,t){var r;return 0>(r=e%t)===0>t?r:r+t}function $d(e,t,r){return t-=r=r||0,(e-=r)-Bd(e/t)*t+r}function ae(e,t,r){return e>r?r:e<t?t:e}function be(e,t,r,n){return n||(n=0),t<r?e>=t-n&&e<=r+n:e>=r-n&&e<=t+n}function ce(e,t,r,n,i,o){return Fd(Gd((e-i)*(n-o)-(t-o)*(r-i),2)/(Gd(r-i,2)+Gd(n-o,2)))}t("H.math.normalize",$d),t("H.math.clamp",ae);var de={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function ee(e,t,r,n,i,o){var a=r.length,s=a,l=r[0],c=0,u=0,p=0;n=n/2||0;var f=o||2;o=f*(i?0:1)+1;for(var h=f-2;1!=c&&s>o;){s-=h;var d=r[--s];f=r[--s];var y=r[s?s-h-1:(a+(s-h-1))%a],m=r[s?s-h-2:(a+(s-h-2))%a];f>=e-n&&f<=e+n&&d>=t-n&&d<=t+n||m>=e-n&&m<=e+n&&y>=t-n&&y<=t+n?c=1:c||f!==e?!c&&be(e,f,m,n)&&((f<e&&m>e||f>e&&m<e)&&(u+=(l=d+(e-f)/(m-f)*(y-d))>t,p+=l<t),c=be(t,d,y,n)&&ce(e,t,f,d,m,y)<=n?2:0):(m===e&&(d<t&&y>t||d>t&&y<t)||(l<=e&&m>e||l>=e&&m<e)&&(d>=t?++u:++p),c=be(t,d,y,n)&&ce(e,t,f,d,m,y)<=n?2:0),l=f}return!c&&i&&0!==p&&0!==u%2&&(c=3),c}function fe(e,t){return ee(e.x,e.y,t,0,!0)!==de.NONE}function ge(e){for(var t=e.length,r=new Float64Array(2*t),n=t&&vc(e[0].x);t--;){var i=e[t],o=t<<1;r[o]=n?i.x:i[0],r[o+1]=n?i.y:i[1]}return r}function he(){}function ie(e,t,r){this.type=e,this.data=t,this.c=ac(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=je,r!==B&&(this.priority=r),this.fh().add(this)}t("H.math.CoverType",de),t("H.math.isPointInsidePolygon",fe),t("H.math.flatten",ge),t("H.util.ICancelable",he),he.prototype.cancel=function(){},he.prototype.cancel=he.prototype.cancel;var je=1,ke={Vo:0,Yo:je,To:2};function le(e){var t;for(t in this.a={},ke)this.a[ke[t]]=[];this.Ze=e,this.Ze.addEventListener("allocatable",A(this.b,this))}p=ie.prototype,p.then=function(e,t,r){return this.c.Ak.then(e,t,r)},p.resolve=function(e){this.Yd=3,this.c.resolve(e)},p.reject=function(e){this.Yd=5,this.c.reject(e)},p.Yd=0,p.cancel=function(){3>this.Yd&&(this.oe(),this.fh().remove(this),this.Yd=4)},ie.prototype.cancel=ie.prototype.cancel,t("H.util.JobManager",le);var me=Object.keys(ke).map((function(e){return ke[e]})).sort().reverse();function ne(e,t,r){var n=[],i=arguments.length;return e&&n.push(yc(e)),1<i&&(i=2<i&&Bc(r)?" out of ["+r[0]+"..."+r[1]+"]":"",n.push("("+t+i+")")),n=Error(n.join(" ")),Object.setPrototypeOf(n,ne.prototype),n}le.prototype.add=function(e){C(e,ie,this.add,0),this.a[e.priority].push(e),this.b()},le.prototype.contains=function(e){return-1<this.a[e.priority].indexOf(e)},le.prototype.remove=function(e){var t=e.priority,r=this.a[t].indexOf(e);return-1<r?(this.a[t].splice(r,1),!0):(e.Li&&this.Ze.yf(e.Li),!1)},le.prototype.b=function(){me.forEach((function(e){this.a[e]=this.a[e].filter((function(e){var t;if((t=this.Ze.Jg(e))===z)return!0;var r=A(this.Ze.yf,this.Ze,t,e);e.Li=t,e.then(r,r),e.Yd=e.qj(t)?1:5}),this)}),this)},u(ne,Error),t("H.lang.OutOfRangeError",ne),ne.prototype.name="OutOfRangeError";var oe="closure_listenable_"+(1e6*Math.random()|0);function pe(e){return!(!e||!e[oe])}var qe=0;function re(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.Mf=i,this.key=++qe,this.be=this.rf=!1}function se(e){e.be=!0,e.listener=null,e.proxy=null,e.src=null,e.Mf=null}function te(e){this.src=e,this.a={},this.b=0}function ve(e,t){var r=t.type;if(!(r in e.a))return!1;var n,i=e.a[r],o=cb(i,t);return(n=0<=o)&&Array.prototype.splice.call(i,o,1),n&&(se(t),0==e.a[r].length&&(delete e.a[r],e.b--)),n}function ue(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i];if(!o.be&&o.listener==t&&o.capture==!!r&&o.Mf==n)return i}return-1}te.prototype.add=function(e,t,r,n,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=ue(e,t,n,i);return-1<a?(t=e[a],r||(t.rf=!1)):((t=new re(t,this.src,o,!!n,i)).rf=r,e.push(t)),t},te.prototype.remove=function(e,t,r,n){if(!((e=e.toString())in this.a))return!1;var i=this.a[e];return-1<(t=ue(i,t,r,n))&&(se(i[t]),Array.prototype.splice.call(i,t,1),0==i.length&&(delete this.a[e],this.b--),!0)},te.prototype.na=function(e){e=e&&e.toString();var t,r=0;for(t in this.a)if(!e||t==e){for(var n=this.a[t],i=0;i<n.length;i++)++r,se(n[i]);delete this.a[t],this.b--}return r},te.prototype.sh=function(e,t){var r=void 0!==e,n=r?e.toString():"",i=void 0!==t;return Ua(this.a,(function(e){for(var o=0;o<e.length;++o)if(!(r&&e[o].type!=n||i&&e[o].capture!=t))return!0;return!1}))};var we=!vb||9<=Number(Fb),xe=vb&&!Eb("9");!yb||Eb("528"),xb&&Eb("1.9b")||vb&&Eb("8")||ub&&Eb("9.5")||yb&&Eb("528"),xb&&!Eb("8")||vb&&Eb("9");var ye=function(){if(!xa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{xa.addEventListener("test",za,t),xa.removeEventListener("test",za,t)}catch(r){}return e}();function ze(e,t){if(ud.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=t,t=e.relatedTarget){if(xb){e:{try{qb(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ae[e.pointerType]||"",this.b=e,e.defaultPrevented&&this.preventDefault()}}u(ze,ud);var Ae={2:"touch",3:"pen",4:"mouse"};ze.prototype.stopPropagation=function(){ze.j.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ze.prototype.preventDefault=function(){ze.j.preventDefault.call(this);var e=this.b;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,xe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var Be="closure_lm_"+(1e6*Math.random()|0),Ce={},De=0;function Ee(e,t,r,n,i){if(n&&n.once)return Fe(e,t,r,n,i);if("array"==Aa(t)){for(var o=0;o<t.length;o++)Ee(e,t[o],r,n,i);return null}return r=Ge(r),pe(e)?e.U.add(String(t),r,!1,Ea(n)?!!n.capture:!!n,i):He(e,t,r,!1,n,i)}function He(e,t,r,n,i,o){if(!t)throw Error("Invalid event type");var a=Ea(i)?!!i.capture:!!i,s=Ie(e);if(s||(e[Be]=s=new te(e)),(r=s.add(t,r,n,a,o)).proxy)return r;if(n=Je(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)ye||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(Ke(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return De++,r}function Je(){var e=Le,t=we?function(r){return e.call(t.src,t.listener,r)}:function(r){if(!(r=e.call(t.src,t.listener,r)))return r};return t}function Fe(e,t,r,n,i){if("array"==Aa(t)){for(var o=0;o<t.length;o++)Fe(e,t[o],r,n,i);return null}return r=Ge(r),pe(e)?e.U.add(String(t),r,!0,Ea(n)?!!n.capture:!!n,i):He(e,t,r,!0,n,i)}function Me(e,t,r,n,i){if("array"==Aa(t)){for(var o=0;o<t.length;o++)Me(e,t[o],r,n,i);return null}return n=Ea(n)?!!n.capture:!!n,r=Ge(r),pe(e)?e.U.remove(String(t),r,n,i):!!e&&(!!((e=Ie(e))&&(t=e.a[t.toString()],e=-1,t&&(e=ue(t,r,n,i)),r=-1<e?t[e]:null))&&Ne(r))}function Ne(e){if("number"===typeof e||!e||e.be)return!1;var t=e.src;if(pe(t))return ve(t.U,e);var r=e.type,n=e.proxy;return t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(Ke(r),n):t.addListener&&t.removeListener&&t.removeListener(n),De--,(r=Ie(t))?(ve(r,e),0==r.b&&(r.src=null,t[Be]=null)):se(e),!0}function Ke(e){return e in Ce?Ce[e]:Ce[e]="on"+e}function Oe(e,t,r,n){var i=!0;if((e=Ie(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==r&&!o.be&&(o=Pe(o,n),i=i&&!1!==o)}return i}function Pe(e,t){var r=e.listener,n=e.Mf||e.src;return e.rf&&Ne(e),r.call(n,t)}function Le(e,t){if(e.be)return!0;if(!we){if(!t)e:{t=["window","event"];for(var r=xa,n=0;n<t.length;n++)if(null==(r=r[t[n]])){t=null;break e}t=r}if(t=new ze(n=t,this),r=!0,!(0>n.keyCode||void 0!=n.returnValue)){e:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break e}catch(a){i=!0}(i||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=t.currentTarget;i;i=i.parentNode)n.push(i);for(e=e.type,i=n.length-1;!t.a&&0<=i;i--){t.currentTarget=n[i];var o=Oe(n[i],e,!0,t);r=r&&o}for(i=0;!t.a&&i<n.length;i++)t.currentTarget=n[i],o=Oe(n[i],e,!1,t),r=r&&o}return r}return Pe(e,new ze(t,this))}function Ie(e){return(e=e[Be])instanceof te?e:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(e){return Da(e)?e:(e[Qe]||(e[Qe]=function(t){return e.handleEvent(t)}),e[Qe])}function F(){qd.call(this),this.U=new te(this),this.wn=this,this.Mg=null}function Re(e){var t=(e=e||{}).callback;this.b=e.label,Da(t)&&(this.callback=t),this.a=!!e.disabled,Re.j.constructor.call(this)}u(F,qd),F.prototype[oe]=!0,p=F.prototype,p.Mb=function(){return this.Mg},p.ka=function(e){this.Mg=e},p.addEventListener=function(e,t,r,n){Ee(this,e,t,r,n)},p.removeEventListener=function(e,t,r,n){Me(this,e,t,r,n)},p.dispatchEvent=function(e){var t,r=this.Mb();if(r)for(t=[];r;r=r.Mb())t.push(r);r=this.wn;var n=e.type||e;if("string"===typeof e)e=new ud(e,r);else if(e instanceof ud)e.target=e.target||r;else{var i=e;Ya(e=new ud(n,r),i)}if(i=!0,t)for(var o=t.length-1;!e.a&&0<=o;o--){var a=e.currentTarget=t[o];i=a.jd(n,!0,e)&&i}if(e.a||(i=(a=e.currentTarget=r).jd(n,!0,e)&&i,e.a||(i=a.jd(n,!1,e)&&i)),t)for(o=0;!e.a&&o<t.length;o++)i=(a=e.currentTarget=t[o]).jd(n,!1,e)&&i;return i},p.o=function(){F.j.o.call(this),this.U&&this.U.na(void 0),this.Mg=null},p.jd=function(e,t,r){if(!(e=this.U.a[String(e)]))return!0;e=e.concat();for(var n=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.be&&o.capture==t){var a=o.listener,s=o.Mf||o.src;o.rf&&ve(this.U,o),n=!1!==a.call(s,r)&&n}}return n&&0!=r.Ik},p.sh=function(e,t){return this.U.sh(void 0!==e?String(e):void 0,t)},t("H.util.EventTarget",F),F.prototype.ka=F.prototype.ka,F.prototype.setParentEventTarget=F.prototype.ka,F.prototype.Mb=F.prototype.Mb,F.prototype.getParentEventTarget=F.prototype.Mb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.F=F.prototype.F,F.prototype.dispose=F.prototype.F,F.prototype.tb=F.prototype.tb,F.prototype.addOnDisposeCallback=F.prototype.tb,F.prototype.xn=F.prototype.jd,F.prototype.jd=function(e,t,r){var n,i,o=!0,a=r[r.currentTarget===r.target?"AT_TARGET":t?"CAPTURING_PHASE":(n=!0,"BUBBLING_PHASE")];return(!n||"pointerenter"!==(i=r.type)&&"pointerleave"!==i)&&(r.eventPhase=a,o=F.prototype.xn.apply(this,arguments),n&&this.Mb&&null===this.Mb()&&delete r.eventPhase),o},F.prototype.Tk=function(e){for(var t,r=this;r&&(t=r.Mb())&&t!==e;)r=t;t||r.ka(e)},F.prototype.setRootParentEventTarget=F.prototype.Tk,u(Re,F),t("H.util.ContextItem",Re),Re.prototype.Ge=function(){return this.b},Re.prototype.getLabel=Re.prototype.Ge,Re.prototype.Jc=function(e){return this.b!==e&&(this.b=e,this.dispatchEvent("update")),this},Re.prototype.setLabel=Re.prototype.Jc,Re.prototype.dc=function(){return this.a},Re.prototype.isDisabled=Re.prototype.dc,Re.prototype.va=function(e){return e!==this.a&&(this.a=e,this.dispatchEvent("update")),this},Re.prototype.setDisabled=Re.prototype.va;var Se=new Re;function Te(e){if(x.document){var t=document.createElement("canvas");return t.width=t.height=1,t.getContext("2d",{fp:e})}return null}function Ue(){return window.devicePixelRatio||1}Re.SEPARATOR=Se,t("H.util.getPixelRatio",Ue);var Ve=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function We(e){var t=Xe[e],r=x.RegExp;return t||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(e){return e instanceof Number?Array(e):e.map((function(e){return ae(Ad(e),0,255)}))}),"none"===e?t=new Uint8ClampedArray([0,0,0,0]):(Ye.fillStyle="black",Ye.fillStyle=e,Ve.test(Ye.fillStyle)?t=new Uint8ClampedArray([r.$1,r.$2,r.$3,255*r.$4]):(Ye.clearRect(0,0,1,1),Ye.fillRect(0,0,1,1),t=Ye.getImageData(0,0,1,1).data)),Xe[e]=t),t}function Ze(e){return"none"!==e&&0<We(e)[3]}var Xe=oc(),$e=!!x.VBArray;function af(e,t){return e!==B?e:t}function bf(e){return/^<svg/.test(e)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e):e}function cf(e){this.fc=0<+e?xd.round(e):0}t("H.util.eval",(function(a){return eval(a)})),t("H.util.provide",(function(e){var t=xa.$jscomp;if(t&&"function"==typeof t.Vl&&t.Vl())throw Error("goog.provide cannot be used within a module.");ya(e,void 0)})),cf.prototype.next=function(e){if(9007199254740992===this.fc)throw new ne(e,this.fc,[0,9007199254740991]);return this.fc++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function ld(){}var hf=qc([]),jf=qc({});function kf(e){return"CANVAS"===e.tagName?[e]:e.getElementsByTagName("CANVAS")}function lf(e,t,r){var n;if(t=e.ownerDocument===t?e.cloneNode(!0):t.importNode(e,!0),r)for(e=kf(e),n=(r=kf(t)).length;n--;)r[n].getContext("2d").drawImage(e[n],0,0);return t}var Ye=Te(!0),mf=Te(!1);function nf(e){var t=e.complete,r=0<e.naturalWidth;if(t&&!r&&$e)try{mf.drawImage(e,0,0),r=!0}catch(n){}return t&&r}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(e,t){if(t=t||"",of){var r=new of;r.append(e),e=r.getBlob(t)}else e=new Blob([e],{type:t});return e}var qf=x.navigator;function rf(){var e=rf.a;return e||(e=this,rf.a=e,Ic(rf.a),F.call(e),sf(this)),e}function sf(e){e.g=10,e.i=6,e.a=oc(),e.b=oc(),e.c=0}function tf(e,t,r,n){if(!uf[e])throw new D(tf,0,"Mime type is not supported");this.f=e,"crossOrigin"in(e=n?Wa(n):{})||(e.crossOrigin="anonymous"),this.a=e,vf.href=t.toString(),ie.call(this,vf.protocol+"//"+vf.hostname,t,r)}cd=/Edge\/\d+/.test(qf.appVersion),dd=/(A|a)ndroid/.test(qf.appVersion),u(rf,F),rf.prototype.o=function(){rf.j.o.call(this),sf(this)},rf.prototype.Jg=function(e){e=e.type;var t=this.a[e]||0;if(this.c<this.g&&t<this.i){var r=++this.f;return this.c++,this.a[e]=t+1,this.b[r+""]=e,r}return z},rf.prototype.yf=function(e){var t=this.b[e];if(!vc(t)||!this.a[t])throw new $c(this.yf,"Unknown requestId");this.c--,this.a[t]--,this.a[t]||delete this.a[t],delete this.b[e],this.dispatchEvent("allocatable")},rf.prototype.f=-1,u(tf,ie),tf.prototype.qj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.oe=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var e=this,t=wf(this.a),r=t.headers;return t.headers=r=r?Wa(r):{},r.Accept="application/json",new Uc(this.data,(function(t){200<=t.status&&300>t.status?e.resolve(t.json()):e.reject(t)}),t)},"text/plain":function(){var e=this;return new Uc(this.data,(function(t){200<=t.status&&300>t.status?e.resolve(t.text()):e.reject(t)}),wf(this.a))},image:function(){var e=x.document.createElement("img"),t=this,r=this.data;return e.onload=A(this.resolve,this,e),e.onerror=function(){t.reject(Rc.error())},e.crossOrigin=this.a.crossOrigin,e.src=r,{abort:function(){e.onerror=e.onload=null,$e&&nf(e)||e.removeAttribute("src")}}}};!function(){try{var e=new XMLHttpRequest;e.open("get","/",!0)}catch(t){e={}}"response"in e&&(uf.arraybuffer=function(){var e,t=new XMLHttpRequest,r=this,n=this.a,i=n.headers;if(t.open("GET",this.data),xf(t,n),t.responseType="arraybuffer",i)for(e in i)t.setRequestHeader(e,i[e]);return t.onerror=t.ontimeout=function(){r.reject(Rc.error())},t.onload=function(){r.resolve(new Rc(t.response))},t.send(),t})}();var yf=new le(new rf);tf.prototype.fh=function(){return yf};var vf=x.document.createElement("a");function wf(e){var t=Wa(e);return delete t.crossOrigin,xf(t,e),t}function xf(e,t){e.withCredentials="use-credentials"===t.crossOrigin}function J(e,t){this.x=+e,this.y=+t}function zf(e){if(!e)throw Error("invalid argument");return e instanceof J?e:new J(e.x,e.y)}function Af(e){var t=Bf[e];if(!t)if(e in Cf)t=Bf[e]=e;else{t=Df.length;var r="",n=e.charAt(0).toUpperCase()+e.substr(1),i="",o=!1;Ef&&(o=(i=Ef+n)in Cf);for(;t--&&!o;)o=(i=(r=Df[t])+n)in Cf;if(o&&(Ef=r),!(t=o?i:null))throw Error("Could not find any variant of CSS property ["+e+"]");Bf[e]=t}return t}t("H.math.Point",J),J.prototype.set=J,J.prototype.set=J.prototype.set,J.prototype.clone=function(e){return e?(e.x=this.x,e.y=this.y):e=new J(this.x,this.y),e},J.prototype.clone=J.prototype.clone,J.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},J.prototype.add=J.prototype.add,J.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},J.prototype.sub=J.prototype.sub,J.prototype.scale=function(e,t){return this.x*=e,this.y*=void 0===t?e:t,this},J.prototype.scale=J.prototype.scale,J.prototype.round=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},J.prototype.round=J.prototype.round,J.prototype.floor=function(){return this.x=Bd(this.x),this.y=Bd(this.y),this},J.prototype.floor=J.prototype.floor,J.prototype.ceil=function(){return this.x=Cd(this.x),this.y=Cd(this.y),this},J.prototype.ceil=J.prototype.ceil,J.prototype.ia=function(e){return!(!e||this.x!==e.x||this.y!==e.y)},J.prototype.equals=J.prototype.ia,J.prototype.Cj=function(e,t){var r=t.x-e.x,n=t.y-e.y,i=e;if(r||n){var o=((this.x-e.x)*r+(this.y-e.y)*n)/(r*r+n*n);i=0>=o?e:1<=o?t:new J(e.x+o*r,e.y+o*n)}return i},J.prototype.getNearest=J.prototype.Cj,J.prototype.Wa=function(e){return Fd(Gd(this.x-e.x,2)+Gd(this.y-e.y,2))},J.prototype.distance=J.prototype.Wa,J.fromIPoint=zf,t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(e,t,r,n){if(!e||!t||!r)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=e,this.version=t,this.revision=r,n&&Ya(this,n)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var e,t=[];for(e in this)Cc(this[e])&&t.push(this[e]);return t.join(";")};var Gf={};function Hf(e,t,r,n){if(!e)throw new D(Hf,1,"Must specify a name parameter");return Gf[e]||(Gf[e]=new Ff(e,t,r,n))}function If(){If.j.constructor.call(this),this.a=Jf(this),this.f=oc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Ff.get=Hf,u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(e){var t=e.type,r=!!this.f[t],n=e.data,i=Kf++,o=n&&n.Mo?n.Mo:B,a=!0;return r?(this.b[i]=e,Lf(this,t,i,n&&n.message,o)):(e.reject(new D(this.g,0,"processor_not_found")),a=!1),a},If.prototype.c=function(e){e=e.data;var t=this.b[e.taskId],r=e.taskId,n=e.data,i=this;if(2===e.type)new tf("arraybuffer",n).then((function(e){return e.arrayBuffer()})).then((function(e){i.a.postMessage(["3",r,[e]],[e])}),(function(){i.a.postMessage(["3",r,[null,"ERROR"]])}));else{if(t){switch(e.type){case 1:t.resolve(n);break;case 0:t.reject(n)}delete this.b[r]}this.dispatchEvent(new ud(this.A.IDLE))}};var Kf=0,Qf,Tf;function Mf(e,t,r){var n,i=Kf++;return e.b[i]=n=ac(),Lf(e,t,i,r),n.Ak}function Lf(e,t,r,n,i){n===B||Ca(n)||(n=[n]);try{e.a.postMessage([t,r,n],i)}catch(o){(e=e.b[r]).reject(o.message)}}function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch(d){}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Of(a)),c}function Of(e){F.call(this),this.a=e}function Nf(a){F.call(this),this.a=a,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Pf(){var e=Qf;return e||(e=Qf=this,F.call(e),Rf(this)),e}function Rf(e){var t,r=e.b;if(r)for(t=r.length;t--;)r[t].F();e.b=[],Ic(e.b),e.c={},e.f=oc()}function Sf(e,t,r){ie.call(this,e,t,r)}function Uf(e,t,r,n,i,o){var a,s,l,c,u=e.length;if(u)for(a=[];u--;){var p=e[u],f=p.length,h=0;for(l=1;l<f;l++)if(c=Vf(p[l-1],p[l],r,t,n,i)){var d=c[0],y=c[1];h&&h.ia(d)?s.push(y):a.push(s=c),h=y,o&&(l=f,u=0)}}else a=e;return a}function Vf(e,t,r,n,i,o){var a=e.x;e=-e.y;var s=t.x;if(t=-t.y,r=-r,o=-o,a>s){if(s>i||a<n)return;var l=a,c=e;a=s,e=t,s=l,t=c,l=1}else if(a>i||s<n)return;if(e>t){if(t>r||e<o)return;var u=1;e=-e,t=-t,c=o,o=-r,r=-c}else if(e>r||t<o)return;if(a<n){if((e+=(n-a)*(t-e)/(s-a))>r)return;a=n}if(e<o){if((a+=(o-e)*(s-a)/(t-e))>i)return;e=o}return s>i&&(t=e+(i-a)*(t-e)/(s-a),s=i),t>r&&(s=a+(r-e)*(s-a)/(t-e),t=r),u&&(e=-e,t=-t),l?[new J(s,-t),new J(a,-e)]:[new J(a,-e),new J(s,-t)]}function Wf(e,t,r){var n,i;e=Xf(e,!0),t=Xf(t,!1);var o={},a=n=1;switch(~~(r||0)){case 1:a=n=0;break;case 2:n=0,a=1;break;case 3:n=1,a=0}r=n;var s=a;if(t&&e){for(t.se=new Yf(t.x,t.y,null,Zf(t)),e.se=new Yf(e.x,e.y,null,Zf(e)),a=t;a.next;a=a.next)if(!a.Za)for(n=e;n.next;n=n.next)if(!n.Za){var l=$f(a.next),c=$f(n.next);if(i=ag(a,l,n,c,o)){i=o.pl;var u=o.ql,p=o.Po,f=o.Qo;bg(i=new Yf(p,f,null,null,null,null,!0,0,0,i),a,l),bg(l=new Yf(p,f,null,null,null,null,!0,0,0,u),n,c),i.Th=l,l.Th=i}}for(o=fe(t,cg(e)),r&&(o=!o),a=t;a;a=a.next)a.Za&&(a.vh=o,o=!o);for(o=fe(e,cg(t)),s&&(o=!o),n=e;n.next;n=n.next)n.Za&&(n.vh=o,o=!o);for(dg(t),dg(e);(e=eg(t))!=t;){for(r=null;!e.yg;e=e.Th){for(o=e.vh;(r=new Yf(e.x,e.y,r)).artificial=e.Za||e.Sj,e.yg=1,e=o?e.next:e.gc;)if(e.Za){e.yg=1;break}if(!e)break}r.Uh=h||null;var h=r}return h}}function Yf(e,t,r,n,i,o,a,s,l,c){this.x=e,this.y=t,this.next=r||null,this.gc=n||null,this.Uh=i||null,this.Th=o||null,this.Za=!!a,this.vh=!!s,this.yg=l||0,this.alpha=c||0,n&&(n.next=this),r&&(r.gc=this),this.Sj=!1,this.se=null}function $f(e){for(;e&&e.Za;)e=e.next;return e}function Zf(e){if(e)for(;e.next;)e=e.next;return e}function eg(e){var t=e;if(t)do{t=t.next}while(t!=e&&(!t.Za||t.Za&&t.yg));return t}function dg(e){var t=Zf(e);t.gc.next=e,e.gc=t.gc}function ag(e,t,r,n,i,o){var a,s=t.x-e.x,l=t.y-e.y,c=n.x-r.x,u=n.y-r.y,p=s*u-l*c;return p?(c=((r.x-e.x)*u-(r.y-e.y)*c)/p,p=(l*(r.x-e.x)-s*(r.y-e.y))/p,0>c||1<c||0>p||1<p?0:(0===c?a=e:1===c?a=t:0===p?a=r:1===p&&(a=n),a&&!o?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.se&&(a.se.x=a.x,a.se.y=a.y),ag(e,t,r,n,i)):(i.Po=e.x+c*s,i.Qo=e.y+c*l,i.pl=c,i.ql=p,1))):0}function cg(e){for(var t=[];e;)t.push(e.x,e.y),e=e.next;return t}function bg(e,t,r){for(t=t.next;t!==r&&t.alpha<=e.alpha;)t=t.next;e.next=t,e.gc=t.gc,e.next.gc=e,e.gc.next=e}function Xf(e,t){for(var r,n=null,i=0,o=e.length;i<o;i++)(r=new Yf(e[i].x,e[i].y,n)).Sj=t,(r.next=n)&&(n.gc=r),n=r;return n}function fg(e,t,r){var n=ae(+e,-90,90);if(t&&E(n))throw new D(t,r,e);return n}function gg(e,t,r){var n=+e;if((-180>n||180<n)&&(n=Zd(n+180,360)-180),t&&E(n))throw new D(t,r,e);return n}function hg(e,t,r){var n;if(e!==B&&E(n=+e)&&t)throw new D(t,r,e);return n}function ig(e,t){return 0>e!==0>t&&180<Dd(t-e)}function jg(){xc(this,jg)}function kg(e,t,r){this.lat=fg(e,kg,0),this.lng=gg(t,kg,1),r!==B&&(this.alt=hg(r,kg,2))}function lg(e,t,r){var n=Ea(e)&&!(E(e.lat=fg(e.lat))||E(e.lng=gg(e.lng))||e.alt!==B&&E(e.alt=hg(e.alt)));if(!n&&t)throw new D(t,r,e);return n}function ng(e){if(!e)throw new D(ng,0,e);return new kg(e.lat,e.lng,e.alt)}function K(e,t,r,n){og(this,fg(e,K,0),gg(t,K,1),fg(r,K,2),gg(n,K,3))}function og(e,t,r,n,i){return e.a=r,e.b=i,t<n&&(r=t,t=n,n=r),e.c=t,e.f=n,e.l=e.g=e.i=null,e}function qg(e,t){return(e=t-e)+(0>e?360:0)}function pg(e,t){return(e+=t/2)-(180<e?360:0)}function rg(e,t,r,n,i,o,a,s,l){r=yd(r,a),e=zd(e,i);var c=pg(t,i=qg(t,n)),u=pg(o,a=qg(o,s))-c;if(180>(u+=0>u-1e-6?360:0)-1e-6){c=t;var p=s}else u=360-u,c=o,p=n;return 360<=(u=u+i/2+a/2)+5e-7?(c=-180,p=180):u-5e-7<i?(c=t,p=n):u-5e-7<a&&(c=o,p=s),l?og(l,e,c,r,p):new K(e,c,r,p)}function sg(e,t,r){return r||(lg(e,sg,0),lg(t,sg,1)),new K(e.lat,e.lng,t.lat,t.lng)}function tg(e,t){var r=1,n=e.length,i=null;if(!Ca(e))throw new D(tg,0,e);if(0<n){var o=e[0];for(i=sg(o,o,t);r<n;r++)o=e[r],i.Xc(o.lat,o.lng,t,i)}return i}function ug(e,t){var r,n=3,i=e.length;if(!(t||e&&null!=e.length))throw new D(ug,0,e);if(0<i)for(r=new K(e[0],e[1],e[0],e[1]);n<i;n+=3)r.Xc(e[n],e[n+1],t,r);return r}function vg(e,t){var r,n=1,i=e.length;if(t&&(!e||null==e.length))throw new D(vg,0,e);if(0<i)for(r=new K(e[0].c,e[0].a,e[0].f,e[0].b);n<i;n++)r.ec(e[n],t,r);return r}function wg(e,t,r,n,i,o){xc(this,wg),this.c=e||10,this.b=null,this.f=n||0,this.g=i||0,this.i=t||1,this.l=r||1,this.m=!!o,this.flush()}function xg(e){var t=e.b;if(e.m&&!t){var r=e.head;(r.entries||r[0]||r[1]||r[2]||r[3])&&(t=yg([t=[r],t,t,t],[r[6],r[7],r[4],r[5]]),e.b=t)}return t}function yg(e,t){var r,n,i,o,a=0;for(r=3;0<=r;r--){var s=r+4,l=0<r%3,c=[],u=t[r],p=e[r];for(n=p.length;n--;){var f=p[n];if(i=f.entries)for(o=i.length;o--;){var h=i[o].a(r);(l?h>u:h<u)&&(u=h)}for(o=4;o--;)(i=f[o])&&(l?i[s]>u:i[s]<u)&&c.push(i)}a+=c.length,t[r]=u,e[r]=c}return a&&(t=yg(e,t)),t}function zg(e,t,r){var n,i;if(e.m&&(n=e.b))for(i=3;0<=i;i--){var o=t.a(i);if(i%3?o>=n[i]:o<=n[i]){if(!r){e.b=null;break}n[i]=o}}}function Bg(e,t){var r,n=e.head;if(t){var i=t;if(i!==n)for(n=i;i=i.parent;)(i.entries||1<i.a)&&(n=i)}else for(;!n.entries&&2>(r=n.a)&&r;)n=i;e.head=n}function Cg(e,t,r,n,i,o,a,s,l){var c,u=t.entries,p=t[7],f=t[4],h=t[5],d=t[6],y=t[8],m=t[9];if(u){var v=u.length;if(i>f||n>p||a<d||o<h)for(;v--;){f=(p=u[v]).a(3),h=p.a(0),d=p.a(1),p.a(2)>=i&&d>=n&&(h<a||s&&h==a)&&(f<o||l&&f==o)&&r.push(p)}else for(;v--;)r.push(u[v])}(o>y||l&&o==y)&&(i<m&&(c=t[1])&&Cg(e,c,r,n,i,o,a,s,l),(a>m||s&&a==m)&&(c=t[3])&&Cg(e,c,r,n,i,o,a,s,l)),n<y&&(i<m&&(c=t[0])&&Cg(e,c,r,n,i,o,a,s,l),(a>m||s&&a==m)&&(c=t[2])&&Cg(e,c,r,n,i,o,a,s,l))}If.prototype.A={IDLE:"idle",Ni:"error"},If.prototype.i=function(e,t){var r=this.l||(this.l=new ud(this.A.Ni));r.data=t,delete this.f[e],this.dispatchEvent(r)},u(Of,F),Of.prototype.postMessage=function(e){x.setTimeout(A(this.b,this,e),0)},Of.prototype.b=function(e){var t=new ud("message");t.data=e,this.a.dispatchEvent(t)},Of.prototype.terminate=function(){this.a.F(),this.F()},u(Nf,F),Nf.prototype.postMessage=function(e){var t=new ud("message");t.data=e,x.setTimeout(A(this.a.c,this.a,t),0)},u(Pf,F),Pf.prototype.o=function(){Pf.j.o.call(this),Rf(this)},Pf.prototype.Jg=function(e){var t;if(e=e.type,!(t=this.f[e]))throw new $c(this.Jg,'Unknown type "'+e+'"');var r=this.b,n=r[0];return n||(n=r[0]=new If,this.tb(La(td,n)),Va(this.c)||Mf(n,"0",r=x.Object.keys(this.c))),(r=n).f[e]||(r.f[e]=t,Mf(r,"1",[e,Da(t)?t+"":t]).then(ld,A(r.i,r,e))),n},Pf.prototype.yf=function(){},Pf.prototype.a=function(e,t){var r=this.f,n=r[e];if(n){if(t!==n)throw new $c(this.a,'Type "'+e+'" is already registered')}else r[e]=t},u(Sf,ie),Sf.prototype.fh=function(){return Tf||(Tf=new le(new Pf)),Tf},Sf.prototype.oe=function(){},Sf.prototype.qj=function(e){return e.g(this)},t("H.math.clipping.clipStrips",Uf),t("H.math.clipping.clipPolygon",Wf),t("H.geo.isDBC",ig),t("H.geo.AbstractGeometry",jg),jg.prototype.getBoundingBox=jg.prototype.K,jg.prototype.equals=jg.prototype.ia,jg.prototype.rb="",jg.prototype.Hb="",jg.prototype.toString=function(){return this.cd([this.rb.toUpperCase()," "]).join("")},jg.prototype.toString=jg.prototype.toString,jg.prototype.Kc=function(){return{type:this.Hb,coordinates:this.bd()}},jg.prototype.toGeoJSON=jg.prototype.Kc,jg.prototype.Y=function(){return{type:this.rb,coordinates:this.pc(),boundingBox:this.K().Y()}},jg.prototype.forWorkerMessage=jg.prototype.Y,u(kg,jg),t("H.geo.Point",kg),kg.prototype.ia=function(e){return this===e||!!e&&this.lat===e.lat&&this.lng===e.lng&&(this.alt||0)===(e.alt||0)},kg.prototype.equals=kg.prototype.ia,kg.prototype.Wa=function(e){if(this===e||this.lat===e.lat&&this.lng===e.lng)e=0;else{var t=this.lat*Ud,r=e.lat*Ud;e=12742001.58*Jd(yd(1,Fd(Gd(Id((t-r)/2),2)+Kd(t)*Kd(r)*Gd(Id((this.lng*Ud-e.lng*Ud)/2),2))))}return e},kg.prototype.distance=kg.prototype.Wa,kg.prototype.zg=function(e,t,r){var n;if(r){if(n=t/6371000.79){t=e*Ud,e=Ud*this.lat;var i=Id(e);r=Id(n);var o=Kd(n);n=Ud*this.lng;var a=Kd(e);e=Jd(a*Kd(t)*r+i*o),t=(n+(t=Nd(Id(t)*a*r,o-i*Id(e)))+Pd)%(2*Pd)-Pd,i=new kg(e*Vd,((t*=Vd)+540)%360-180)}return i||this}return 0===((e=(e%360+360)%360)+90)%180?(e=this.lng+t/(6371000.79*Sd*Kd(this.lat*Ud))*(270===e?-360:360),new kg(this.lat,(e+540)%360-180)):((t/=6371000.79)&&(e*=Ud,i=this.lat*Ud,r=this.lng*Ud,o=(n=i+t*Kd(e))-i,a=Ed(Ld(n/2+Rd)/Ld(i/2+Rd)),a=E(o/a)?Kd(i):o/a,e=t*Id(e)/a,Dd(n)>Qd&&(n=0<n?Pd-n:-(Pd+n)),n=new kg(n*Vd,((r+e+Td+(Dd(i+o)>Qd?Pd:0))%Sd-Pd)*Vd)),n||this)},kg.prototype.walk=kg.prototype.zg,kg.prototype.K=function(){return new K(this.lat,this.lng,this.lat,this.lng)},kg.prototype.getBoundingBox=kg.prototype.K,kg.validate=lg,kg.fromIPoint=ng,p=kg.prototype,p.rb="Point",p.cd=function(e){return e.push("(",this.lng," ",this.lat,")"),e},p.Hb="Point",p.bd=function(){return[this.lng,this.lat,this.alt||0]},p.pc=function(){return[this.lat,this.lng,this.alt||0]},u(K,jg),t("H.geo.Rect",K),K.prototype.rb="Polygon",K.prototype.cd=function(e){var t=this.c,r=this.a,n=this.f,i=this.b;return e.push("(","(",r," ",t,",",i," ",t,",",i," ",n,",",r," ",n,",",r," ",t,")",")"),e},K.prototype.ia=function(e){var t=this===e;return!t&&C(e,K)&&(t=this.c===e.c&&this.a===e.a&&this.f===e.f&&this.b===e.b),t},K.prototype.equals=K.prototype.ia,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone,K.prototype.Nb=function(){return this.l||(this.l=new kg(this.c,this.a)),this.l},K.prototype.getTopLeft=K.prototype.Nb,K.prototype.Jb=function(){return this.g||(this.g=new kg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Jb,K.prototype.bn=function(){return this.c},K.prototype.getTop=K.prototype.bn,K.prototype.Pl=function(){return this.f},K.prototype.getBottom=K.prototype.Pl,K.prototype.xm=function(){return this.a},K.prototype.getLeft=K.prototype.xm,K.prototype.Sm=function(){return this.b},K.prototype.getRight=K.prototype.Sm,K.prototype.bb=function(){return this.i||(this.i=new kg(this.f+(this.c-this.f)/2,pg(this.a,this.Ab()))),this.i},K.prototype.getCenter=K.prototype.bb,K.prototype.Ab=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.Ab,K.prototype.Ld=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Ld,K.prototype.Bb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.Bb,K.prototype.Rf=function(){return!this.Ab()&&!this.Ld()},K.prototype.isEmpty=K.prototype.Rf,K.prototype.K=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.K,K.prototype.uf=function(e,t,r){var n=this.bb();return r||(e=fg(e,this.uf,0),t=gg(t,this.uf,1)),(e=(t=this.Xc(e,t,r)).bb()).lat===n.lat&&e.lng===n.lng&&this.Ld()===t.Ld()&&this.Ab()===t.Ab()},K.prototype.containsLatLng=K.prototype.uf,K.prototype.gd=function(e,t){return t||lg(e,this.gd,0),this.uf(e.lat,e.lng,t)},K.prototype.containsPoint=K.prototype.gd,K.prototype.Qg=function(e,t){var r=this.bb();if(!t&&!C(e,K))throw new D(this.Qg,0,e);return(e=(t=this.ec(e,t)).bb()).lat===r.lat&&e.lng===r.lng&&this.Ld()===t.Ld()&&this.Ab()===t.Ab()},K.prototype.containsRect=K.prototype.Qg,K.prototype.Xc=function(e,t,r,n){if(!r){if(E(e=fg(e)))throw new D(this.Xc,0,e);if(E(t=gg(t)))throw new D(this.Xc,1,t)}return rg(this.c,this.a,this.f,this.b,e,t,e,t,n)},K.prototype.mergeLatLng=K.prototype.Xc,K.prototype.jk=function(e,t,r){return t||lg(e,this.jk,0),this.Xc(e.lat,e.lng,t,r)},K.prototype.mergePoint=K.prototype.jk,K.prototype.ec=function(e,t,r){if(!t&&!C(e,K))throw new D(this.ec,0,e);return rg(this.c,this.a,this.f,this.b,e.c,e.a,e.f,e.b,r)},K.prototype.mergeRect=K.prototype.ec,K.prototype.Bc=function(e,t,r,n,i,o){return i||(e=fg(e,this.Bc,0),t=gg(t,this.Bc,1),r=fg(r,this.Bc,2),n=gg(n,this.Bc,3)),rg(this.c,this.a,this.f,this.b,e,t,r,n,o)},K.prototype.mergeTopLeftBottomRight=K.prototype.Bc,K.prototype.nd=function(e,t){var r=this.a<=this.b,n=e.a<=e.b,i=this.a<e.b,o=e.a<this.b;if(!t&&!C(e,K))throw new D(this.nd,0,e);return this.f<=e.c&&e.f<=this.c&&(!r&&(!n||i||o)||!n&&(i||o)||i&&o)},K.prototype.intersects=K.prototype.nd,K.merge=rg,K.fromPoints=sg,K.coverPoints=tg,K.coverLatLngAlts=ug,K.coverRects=vg,K.prototype.Hk=function(e,t){var r=this.a,n=this.c,i=this.b,o=this.f,a=this.bb().lng;lg(e,this.Hk,0);var s=e.lat-o-(n-o)/2,l=e.lng-a;return e=-180>(e=r+(0>(l=180<l||-180>l?-(a+e.lng):l)?2*l:0))?360+e:e,i=180<(i+=0<l?2*l:0)?i-360:i,90<=(n=0<s?n+2*s:n)&&(n=90),-90>=(o=0>s?o+2*s:o)&&(o=-90),t?og(t,n,e,o,i):new K(n,e,o,i)},K.prototype.resizeToCenter=K.prototype.Hk,K.prototype.Hb="Polygon",K.prototype.bd=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.Y=function(){return this.pc()},K.prototype.pc=function(){return[this.c,this.a,this.f,this.b]},wg.prototype.remove=function(e){var t,r,n,i=!1;return e&&(t=e.node)&&t.b===this&&(r=t.entries)&&0<=(n=r.indexOf(e))&&(r.splice(n,1),this.s(t),zg(this,e,!1),i=!0),i},wg.prototype.flush=function(){var e=new Ag(B,NaN,this.f-this.i,this.g-this.l,this.f+this.i,this.g+this.l);e.b=this,this.head=this.a=e,this.b=null},wg.prototype.Za=function(e,t,r,n,i,o){var a=[],s=this.head,l=this.a;return e<=s[5]&&t<=s[6]&&(i?r>=s[7]:r>s[7])&&(o?n>=s[4]:n>s[4])&&Cg(this,s,a,e,t,r,n,o||n>=l[6],i||r>=l[5]),a},wg.prototype.Lc=ba(1);var Dg=0;function Ag(e,t,r,n,i,o){this.c=t,e&&(this.parent=e,this.b=e.b,1&t?(r=e[8],i=e[5]):(r=e[7],i=e[8]),2&t?(n=e[9],o=e[6]):(n=e[4],o=e[9])),this[7]=r,this[5]=i,this[8]=(r+i)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Eg(e,t){return e[t]||(++e.a,e[t]=new Ag(e,t))}function Fg(e,t){(e.entries||(e.entries=[])).push(t),t.node=e}function Gg(e,t,r,n,i){var o=e[5],a=e[6];return e[7]<=t&&e[4]<=r&&(o>n||o===n&&o===e.b.a[5])&&(a>i||a===i&&a===e.b.a[6])}function Hg(e,t,r,n,i,o){Hg.j.constructor.apply(this,arguments)}function Ig(e,t,r,n,i){if(Gg(e.a,t,r,n,i))return Jg(e,e.a,t,r,n,i,e.c);throw Error("Coordinates out of bounds")}function Jg(e,t,r,n,i,o,a){var s=t[8],l=t[9],c=0,u=0;return a&&(i<s||(c=+(r>=s)))&&(o<l||(u=+(n>=l)))?r=Jg(e,Eg(t,c|u<<1),r,n,i,o,a-1):(Fg(t,r=new Kg(r,n,i,o)),zg(e,r,!0),Bg(e,t)),r}function Kg(e,t,r,n){this.id=Dg++,this[0]=t,this[1]=r,this[2]=n,this[3]=e}function Lg(e){this.g=new Hg(+e||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}function Mg(e,t,r,n,i,o){return o?(o=new Kg(i,-t,r+360,-n),e.f.push(o),e.i=!0,e.a&&e.a.Bc(t,r,n,i,!0,e.a)):(o=Ig(e.g,r,-t,i,-n),e.b&&e.b.Bc(t,r,n,i,!0,e.b)),++e.Eh,e.c=null,o}function Ng(e,t,r,n,i,o,a){var s,l=(e=e.f).length,c=[];if(l){var u=r+360;for(s=i+360;l--;){var p=e[l];(Og(p,t,r,n,i,o,a)||Og(p,t,u,n,s,o,a))&&c.push(p)}}return c}function Og(e,t,r,n,i,o,a){var s=e[3],l=e[0],c=e[1];return e=e[2],(o?l<=n:l<n)&&(a?s<=i:s<i)&&e>=t&&c>=r}function Pg(e,t){var r,n,i;if(r=t.length){var o=e.length;for(n={};o--;)n[e[o].id]=1;for(;r--;)(i=t[r]).id in n||e.push(i)}}Ag.prototype.a=0,Ag.prototype.removeChild=function(e){var t=e.c;this[t]===e&&(delete this[t],delete e.parent,--this.a)},Ag.prototype.Lc=ba(0),u(Hg,wg),Hg.prototype.s=function(e){for(var t,r,n=this.head;e&&!((t=e.entries)&&t.length||(t&&delete e.entries,e.a||!(r=e.parent)));)r.removeChild(e),n===e&&(n=r),e=r;this.head!==n&&(this.head=n,Bg(this))},Hg.prototype.yc=function(e,t){return Ig(this,e,t,e,t)},Kg.prototype.a=function(e){return this[e]},t("H.geo.QuadTree",Lg),p=Lg.prototype,p.Eh=0,p.Rc=function(){return this.Eh},p.Bb=function(){return this.i},p.K=function(){var e,t;if(!this.c){var r,n,i,o=[];if(!this.b&&(e=xg(this.g))&&(this.b=new K(-e[0],e[3],-e[2],e[1])),(t=this.b)&&o.push(t),!this.a&&(i=(n=this.f).length)){e=90;var a=360,s=-90;for(r=0;i--;){var l=n[i];e=yd(e,l[0]),a=yd(a,l[3]),s=zd(s,l[2]),r=zd(r,l[1])}this.a=new K(-e,a,-s,r-360)}(t=this.a)&&o.push(t),(t=o[0])&&(o[1]&&(t=t.ec(o[1],!0)),this.c=t)}return this.c},p.yc=function(e){var t=e.lng;return Mg(this,e=e.lat,t,e,t,!1)},p.Pj=function(e){var t=e.Nb(),r=e.Jb();return(e=e.Bb())?Mg(this,t.lat,r.lng,r.lat,t.lng,e):Mg(this,t.lat,t.lng,r.lat,r.lng,e)},Lg.prototype.insertBoundingBox=Lg.prototype.Pj,Lg.prototype.remove=function(e){var t;if(e.node){var r=this.g.remove(e);this.b=null}else(r=0<=(e=(t=this.f).indexOf(e)))&&(t.splice(e,1),this.i=0<t.length,this.a=null);return r&&(--this.Eh,this.c=null),r},Lg.prototype.remove=Lg.prototype.remove,Lg.prototype.Pf=function(e,t,r){var n=this.g,i=e.Nb(),o=e.Jb(),a=-i.lat;i=i.lng;var s=-o.lat;return o=o.lng,!t&&a===s||!r&&i===o?e=[]:e.Bb()?(Pg(e=n.Za(-180,a,o,s,r,t),n.Za(i,a,180,s,!1,t)),Pg(e,Ng(this,a,o,s,i+360,t,r))):Pg(e=n.Za(i,a,o,s,r,t),Ng(this,a,i,s,o,t,r)),e},Lg.prototype.intersectBoundingBox=Lg.prototype.Pf;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg="undefined"!==typeof BigInt?BigInt:Number;function Sg(e){var t=Rg(0),r=Rg(0),n=[];if(e.split("").forEach((function(e){e=Rg(Qg[e.charCodeAt(0)-45]),t|=(e&Rg(31))<<r,(e&Rg(32))===Rg(0)?(n.push(t),t=Rg(0),r=Rg(0)):r+=Rg(5)})),0<r)throw Error("Invalid encoding");return n}function Tg(e){return e&Rg(1)&&(e=~e),+(e>>=Rg(1)).toString()}function Ug(e){var t=void 0===e.precision?5:e.precision,r=void 0===e.hf?0:e.hf,n=void 0===e.jf?0:e.jf;e=e.ci;var i=Math.pow(10,t),o=Math.pow(10,n);t=Vg(t,r,n);var a=[],s=Rg(0),l=Rg(0),c=Rg(0);return e.forEach((function(e){var t=Rg(Math.round(e[0]*i));a.push(Wg(t-s)),s=t,t=Rg(Math.round(e[1]*i)),a.push(Wg(t-l)),l=t,r&&(e=Rg(Math.round(e[2]*o)),a.push(Wg(e-c)),c=e)})),(t instanceof Array?t:fa(ea(t))).concat(a instanceof Array?a:fa(ea(a))).join("")}function Vg(e,t,r){if(0>e||15<e)throw Error("precision out of range. Should be between 0 and 15");if(0>r||15<r)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>t||7<t||4===t||5===t)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return e|=r<<7|t<<4,Xg(1)+Xg(e)}function Xg(e){var t="";for(e=Rg(e);31<e;){t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e&Rg(31)|Rg(32)],e>>=Rg(5)}return t+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e]}function Wg(e){var t=0>(e=Rg(e));return e<<=Rg(1),t&&(e=~e),Xg(e)}function Yg(e){return Ug({ci:e.polyline,precision:e.precision,hf:e.thirdDim,jf:e.thirdDimPrecision})}function Zg(e){if(1!==+(e=Sg(e))[0].toString())throw Error("Invalid format version");var t=+e[1].toString();t={precision:15&t,hf:t>>4&7,jf:t>>7&15};for(var r=Math.pow(10,t.precision),n=Math.pow(10,t.jf),i=t.hf,o=0,a=0,s=0,l=[],c=2;c<e.length;){var u=Tg(e[c])/r;o+=u,a+=Tg(e[c+1])/r,i?(s+=u=Tg(e[c+2])/n,l.push([o,a,s]),c+=3):(l.push([o,a]),c+=2)}if(c!==e.length)throw Error("Invalid encoding. Premature ending reached");return{polyline:(e=Object.assign({},t,{ci:l})).ci,precision:e.precision,thirdDim:e.hf,thirdDimPrecision:e.jf}}function L(e){L.j.constructor.call(this),e&&$g(e,L,0),this.$=e||[],this.a=ah(this,0,this.$.length)}function ah(e,t,r){e=e.$;var n=0;for(t=zd(t,0),r=yd(r,e.length),r-=2,t+=1;t<r;)n+=ig(e[t],e[t+=3]);return n}function bh(e,t,r,n,i){var o=e.$.length;t=fg(t,i),r=gg(r,i),e.$.push(fg(t,i),gg(r,i),n===B?0:hg(n,i)),o&&(e.a+=ig(e.$[o-2],r)),delete e.b,delete e.c}function $g(e,t,r){for(var n,i=e.length,o=!(i%3);o&&i;)o=!(E(e[--i]=hg((n=e[i])===B?0:n))||E(e[--i]=gg(e[i]))||E(e[--i]=fg(e[i])));if(!o&&t)throw new D(t,r,e)}function ch(e){var t=new L,r=0,n=e.length;if(n%2)throw new D(ch,0,e);for(;r<n;)bh(t,e[r++],e[r++],0,ch);return t}function dh(e,t){return e.b-t.b}function eh(e,t){var r,n=e.$,i=-2,o=[],a=e.c;if(!a){a=e.c=new Lg;var s=0,l=e.$,c=l.length;for(r=0;r<c;r+=3){var u=l[r],p=l[r+1];if(r){if(h<p)var f=h,h=p;else f=p;if(y<u)var d=u;else{d=y;var y=u}(f=Mg(a,d,f,y,h,180<h-f)).b=s++}y=u,h=p}}for(l=(a=a.Pf(t).sort(dh)).length,t=0;t<l;t++){if(c=3*(s=(s=a[t]).b),s>i+1){var m=[n[c],n[c+1]];o.push(m)}i=s,m.push(n[c+3],n[c+4])}if(e.a){for(n=[],i=o.length,t=0;t<i;t++)if(a=(m=o[t]).length){for(l=[],e=0;e<a;e+=2)s=m[e],c=m[e+1],l.push(s,c),r=m[e-1],e&&ig(c,r)&&(n.push(l),r+=0>r?360:-360,(l=[]).push(m[e-2],r,s,c));n.push(l)}o=n}return o}function fh(e){var t=Zg(e);e=t.polyline;var r=t.thirdDim;if(t=2===r||3===r,r=0===r,!e)throw new D(fh,0,"data");if(t||r){r=e.length;for(var n=Array(3*r),i=0,o=0;i<r;i++){var a=e[i];n[o++]=a[0],n[o++]=a[1],n[o++]=t?a[2]:0}}if(!n)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(n)}function gh(e){xc(this,gh),gh.j.constructor.call(this),this.la=hh(this,e,this.constructor,0)}function hh(e,t,r,n){var i,o=[];if(!Bc(t))throw new D(r,n);for(i=0;i<t.length;i++){if(!e.b(t[i]))throw new D(r,n);o.push(e.c(t[i]))}return o}function ih(e){ih.j.constructor.call(this,e)}function jh(){}t("H.util.flexiblePolyline.encode",Yg),t("H.util.flexiblePolyline.decode",Zg),u(L,jg),t("H.geo.LineString",L),L.prototype.gi=function(e,t,r){bh(this,e,t,r,this.gi)},L.prototype.pushLatLngAlt=L.prototype.gi,L.prototype.ff=function(e,t,r){r&&$g(r,this.ff,2),void 0===t&&(t=this.$.length),t&&(this.a-=ah(this,e-3,e+t+3));var n=r?this.$.splice.apply(this.$,[e,t].concat(r)):this.$.splice(e,t);return r&&(this.a+=ah(this,e-3,e+r.length+3)),t&&!r&&(this.a+=ah(this,e-3,e-3)),delete this.b,delete this.c,n},L.prototype.spliceLatLngAlts=L.prototype.ff,L.prototype.Qj=function(e,t,r,n){this.ff(e,0,[t,r,n])},L.prototype.insertLatLngAlt=L.prototype.Qj,L.prototype.Dk=function(e){this.ff(e,3)},L.prototype.removeLatLngAlt=L.prototype.Dk,L.prototype.qd=function(e){bh(this,e.lat,e.lng,e.alt,this.qd)},L.prototype.pushPoint=L.prototype.qd,L.prototype.yc=function(e,t){this.Qj(3*e,t.lat,t.lng,t.alt)},L.prototype.insertPoint=L.prototype.yc,L.prototype.Xe=function(e){this.Dk(3*e)},L.prototype.removePoint=L.prototype.Xe,L.prototype.ye=function(e,t){var r=this.$,n=3*e;e=r[n];var i=r[n+1];return r=r[n+2],t&&(t.lat=e,t.lng=i,t.alt=r),t||new kg(e,i,r)},L.prototype.extractPoint=L.prototype.ye,L.prototype.El=function(e,t,r){var n=this.$;t=t||0,r=af(r,n.length/3);for(var i=3*t;t<r;)e(n[i++],n[i++],n[i++],t++)},L.prototype.eachLatLngAlt=L.prototype.El,L.isDBC=ig,L.prototype.eh=function(e){var t=this.a;return e&&(t+=ig((e=this.$)[e.length-2],e[1])),t},L.prototype.getDBCs=L.prototype.eh,L.prototype.Ie=function(){return this.$.length/3},L.prototype.getPointCount=L.prototype.Ie,L.prototype.um=function(){return this.$},L.prototype.getLatLngAltArray=L.prototype.um,L.prototype.b=z,L.prototype.K=function(){var e;if(!(e=this.b)){var t,r,n=(e=this.$).length,i=3,o=z;if(3<=n){var a=t=e[0],s=r=e[1];for(o=new K(a,s,t,r);i<n;i+=3){if(a=e[i-3],s=e[i-2],t=e[i],s>(r=e[i+1])&&180<r-s||s<r&&-180>s-r||r<s&&180>Dd(r-s)){var l=s;s=r,r=l}a<t&&(l=a,a=t,t=l),rg(o.c,o.a,o.f,o.b,a,s,t,r,o)}}e=this.b=o}return e},L.prototype.getBoundingBox=L.prototype.K,L.prototype.nn=function(){return this.b!==z},L.prototype.hasBoundingBox=L.prototype.nn,L.fromLatLngArray=ch,L.prototype.ia=function(e){var t,r=this===e;if(!r&&(r=C(e,L))){var n=this.$;for(e=e.$,r=(t=n.length)===e.length;r&&t--;)r=n[t]==e[t]}return r},L.prototype.equals=L.prototype.ia,p=L.prototype,p.rb="LineString",p.cd=function(e,t){var r,n=this.$,i=n.length;if(i){for(e.push("("),r=0;r<i;r+=3)r&&e.push(","),e.push(n[r+1]," ",n[r]);t&&(n[0]!==n[i-3]||n[1]!==n[i-2])&&e.push(",",n[1]," ",n[0]),e.push(")")}else e.push("EMPTY");return e},p.Hb="LineString",p.bd=function(){var e,t=[],r=this.$,n=r.length;for(e=0;e<n;e+=3)t.push([r[e+1],r[e],r[e+2]]);return t},p.pc=function(){var e,t=this.$;if(this.K().Bb()){var r=1;for(e=(t=t.slice()).length;r<e;r+=3)0>t[r]&&(t[r]+=360)}return t},p.Ko=function(e){e=void 0===e?5:e;for(var t=this.$,r=t.length,n=[],i=0;i<r;i+=3)n.push([t[i],t[i+1],t[i+2]]);return Yg({polyline:n,precision:e,thirdDim:2,thirdDimPrecision:e})},L.prototype.toFlexiblePolyline=L.prototype.Ko,L.fromFlexiblePolyline=fh,u(gh,jg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(e,t,r){return e=[e],t!==B&&e.push(t),r&&(t=hh(this,r,this.splice,2),e=e.concat(t)),this.a=z,this.la.splice.apply(this.la,e)},gh.prototype.splice=gh.prototype.splice,gh.prototype.hc=function(e){var t=this.la.length;if(!(0<=e&&e<t))throw new ne(this.hc,e,[0,t-1]);return this.a=z,this.la.splice(e,1)[0]},gh.prototype.removeAt=gh.prototype.hc,gh.prototype.remove=function(e){if(0<=(e=this.la.indexOf(e))){var t=this.la.splice(e,1)[0];this.a=z}return t||z},gh.prototype.remove=gh.prototype.remove,gh.prototype.mm=function(){return this.la},gh.prototype.getGeometries=gh.prototype.mm,gh.prototype.push=function(e){var t=hh(this,[e],this.push,0)[0];this.a&&(this.a=this.a.ec(e.K())),this.la.push(t)},gh.prototype.push=gh.prototype.push,gh.prototype.K=function(){var e,t,r;if(!(e=this.a)&&(e=z,this.la.length))for(e=this.la[0].K(),r=1;r<this.la.length;r++)(t=this.la[r].K())&&(e=e?e.ec(t):t);return this.a=e},gh.prototype.getBoundingBox=gh.prototype.K,gh.prototype.a=z,gh.prototype.c=function(e){return e},gh.prototype.ia=function(e){var t,r=this===e;if(!r&&(r=C(e,this.constructor))){var n=this.la;for(e=e.la,r=(t=n.length)===e.length;r&&t--;)r=n[t].ia(e[t])}return r},gh.prototype.equals=gh.prototype.ia,gh.prototype.cd=function(e){var t,r,n=this.la,i=n.length,o=!1;if(i){for(e.push("("),t=0;t<i;t++)(r=0<t&&o)&&e.push(","),n[t].cd(e),"EMPTY"===e[e.length-1]?e.splice(-1-+r,+r+1):o=!0;o?e.push(")"):e.splice(-1,1,"EMPTY")}else e.push("EMPTY");return e},gh.prototype.pc=function(){for(var e=[],t=this.la,r=t.length;r--;)e[r]=t[r].pc();return e},gh.prototype.Y=function(){var e=gh.j.Y.call(this);return e.type=this.rb,e},gh.prototype.bd=function(){for(var e=[],t=this.la,r=t.length;r--;)e[r]=t[r].bd();return e},u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(e){return C(e,L)},ih.prototype.rb="Multi"+L.prototype.rb,ih.prototype.Hb="Multi"+L.prototype.Hb,t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Xd,jh.prototype.update=function(e,t){t!==kh.NONE&&(this.a=e,t&kh.SPATIAL&&(this.f=e),t&kh.VISUAL&&(this.g=e),t&kh.ADD&&(this.b=e),t&kh.REMOVE&&(this.c=e),t&kh.Z_ORDER&&(this.l=e),t&kh.VOLATILITY&&(this.i=e))},jh.prototype.update=jh.prototype.update,jh.prototype.Bm=function(){return this.a},jh.prototype.getMark=jh.prototype.Bm,jh.prototype.a=Xd,jh.prototype.rn=function(e){return this.a>e},jh.prototype.isAny=jh.prototype.rn,jh.prototype.g=Xd,jh.prototype.Vd=function(e){return this.g>e},jh.prototype.isVisual=jh.prototype.Vd,jh.prototype.f=Xd,jh.prototype.yh=function(e){return this.f>e},jh.prototype.isSpatial=jh.prototype.yh,jh.prototype.b=Xd,jh.prototype.Rj=function(e){return this.b>e},jh.prototype.isAdd=jh.prototype.Rj,jh.prototype.c=Xd,jh.prototype.Sf=function(e){return this.c>e},jh.prototype.isRemove=jh.prototype.Sf,jh.prototype.l=Xd,jh.prototype.zh=function(e){return this.l>e},jh.prototype.isZOrder=jh.prototype.zh,jh.prototype.i=Xd,jh.prototype.vn=function(e){return this.i>e},jh.prototype.isVolatility=jh.prototype.vn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function lh(e){lh.j.constructor.call(this),void 0!==e&&(this.data=e)}function M(e){if(xc(this,M),M.j.constructor.call(this,e?e.data:B),this.ea=mh.next(),e){var t="min";Fc(e[t])&&(this.m=e[t]),Fc(e[t="max"])&&(this.s=e[t]),(t="visibility")in e&&(this.u=!!e[t]),(t="volatility")in e&&(this.P=!!e[t]),(t="zIndex")in e&&(this.l=+e[t]||0),(t="provider")in e&&!C(e[t],N)&&(this.ma=e[t],this.ra(kh.ADD))}}jh.Flag=kh,u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.j.o.call(this),delete this.data},u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function oh(e,t,r){var n,i;if(!r||e[0]|t[0]){var o=e.length,a=t.length,s=yd(o,a),l=1;for(i=+r+1;l<s;l+=i)if(n=e[l]-t[l])return n}return r?0:o-a}function ph(e,t){return e.cj(t)}function qh(e,t,r){if(null===t||t===B)return null;if(0<=Object.keys(t).length&&"[object Object]"!==Object.prototype.toString.call(t))throw Error(vh(e,r));try{return JSON.stringify(t),t}catch(n){throw Error(vh(e,r))}}function vh(e,t){return"Object Remote-Id: "+e.i+" - "+(t?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function wh(e){var t;if(e){var r=xh;for(t=C(e,wh);r--;){var n=yh[r];if(e.hasOwnProperty(n)){var i=e[n];if(t)this[n]=i;else{if((i=zh[r](i))===Ah)throw new D(wh,0,n+": "+e[n]);i!==this[n]&&i!==B&&(this[n]=i)}}}(r=t?e.b:this.lineWidth&&Ze(this.strokeColor))||(this.b=r),(r=t?e.Ob:Ze(this.fillColor))||(this.Ob=r),(r=t?e.a:"none"!==this.strokeColor&&this.lineWidth)||(this.a=r)}qc(this)}M.Type=nh,M.prototype.cb=function(){return this.ea},M.prototype.getId=M.prototype.cb,M.prototype.Ai=function(e){if(!Fc(e)&&!Cc(e))throw new D(this.Ai,0,"id must be a number or a string");return this.i=e,this},M.prototype.setRemoteId=M.prototype.Ai,M.prototype.Rm=function(){return this.i},M.prototype.getRemoteId=M.prototype.Rm,M.prototype.m=-1/0,M.prototype.s=1/0,M.prototype.zj=function(e){var t=this.s;if(e)for(e=this;e=e.Fa;)t=yd(t,e.s);return t},M.prototype.getMax=M.prototype.zj,M.prototype.Bj=function(e){var t=this.m;if(e)for(e=this;e=e.Fa;)t=zd(t,e.m);return t},M.prototype.getMin=M.prototype.Bj,M.prototype.u=!0,M.prototype.qb=function(e){return(e=!!e)!==this.u&&(this.u=e,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.qb,M.prototype.wc=function(e){for(var t,r=this;(t=r.u)&&e&&(r=r.Fa););return t},M.prototype.getVisibility=M.prototype.wc,M.prototype.P=!1,M.prototype.Lf=function(e){for(var t,r=this;!(t=r.P)&&e&&(r=r.Fa););return t},M.prototype.getVolatility=M.prototype.Lf,M.prototype.Vk=function(e){var t=this.P;return t!==!!e&&(this.P=!t,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Vk,M.prototype.l=B,M.prototype.Ij=function(){return this.l},M.prototype.getZIndex=M.prototype.Ij,M.prototype.fe=function(e){return e!==this.l&&(this.Ye(),this.l=e,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.fe,M.prototype.L=B,M.prototype.Uc=function(){var e,t,r=this.L;if(!r){var n=+((e=this.l)!==B);(r=this.Fa)?(r=r.Uc().slice())[0]|=n:r=[n],r.push(e||0,0>(t=this.Di)?this.ea:t),this.L=r}return r},M.prototype.getZInfo=M.prototype.Uc,M.prototype.Ye=function(){this.L=B},M.compareZInfo=oh,M.compareZOrder=ph,M.prototype.cj=function(e){return this.T-e.T||oh(this.Uc(),e.Uc(),!1)},M.prototype.compareZOrder=M.prototype.cj,p=M.prototype,p.previousSibling=z,p.nextSibling=z,p.Di=-1,p.Fa=z,p.Fm=function(){return this.Fa},M.prototype.getParentGroup=M.prototype.Fm,M.prototype.bc=function(){for(var e,t=this;e=t.Fa;)t=e;return t},M.prototype.getRootGroup=M.prototype.bc,M.prototype.contains=function(e){return this===e},M.prototype.contains=M.prototype.contains,M.prototype.ka=function(e){if(this.Fa)throw new $c(this.ka,"Not allowed for a child of a group");M.j.ka.call(this,e)},M.prototype.setParentEventTarget=M.prototype.ka,M.prototype.draggable=!1,M.prototype.ma=z,M.prototype.ca=function(){return this.ma},M.prototype.getProvider=M.prototype.ca,M.prototype.ee=function(e,t){var r,n=this.ma;if(r=n!==e){if(t&&(n&&!C(n,N)||e&&!C(e,N)))throw new $c(t,"Only LocalObjectProvider allows an object transfers");t=this.type!==nh.GROUP,n&&(this.invalidate(kh.REMOVE),t&&n.Ga(this)),(this.ma=e)&&(t&&e.fa(this),this.ta=z,this.invalidate(kh.ADD))}return r},M.prototype.ta=z,M.prototype.Kb=function(){return this.ta||(this.ta=new jh)},M.prototype.getInvalidations=M.prototype.Kb,M.prototype.ra=function(e){var t,r=this.ca();return(t=!!r)&&r.invalidateObject(this,e),t},M.prototype.invalidate=M.prototype.ra,M.prototype.o=function(){this.Fa&&this.Fa.Ga(this),M.j.o.call(this)},M.prototype.setData=function(e){return this.data=e,this},M.prototype.setData=M.prototype.setData,M.prototype.Kc=function(e){var t;if(e&&!Da(e))throw new D(M.prototype.Kc,0,"opt_callback must be a function");return e=qh(this,e?e(this.data):this.data,!!e),t=this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?{type:"Feature",properties:e,geometry:this.ga().Kc()}:{type:"FeatureCollection",features:hf},this.i&&(t.id=this.i),t},M.prototype.toGeoJSON=M.prototype.Kc,M.prototype.Y=function(){return{id:this.ea,properties:{min:this.Bj(),max:this.zj(),zIdx:this.l,sIdx:this.Di,parent:this.Fa?this.Fa.cb():0,visible:this.wc(),volatile:this.Lf()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.Y,t("H.map.SpatialStyle",wh),wh.prototype.Ob=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineDashImage lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.Bn=hf,wh.prototype.lineDash=wh.prototype.Bn,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.Cn=B,wh.prototype.lineDashImage=wh.prototype.Cn,wh.prototype.Dn=B,wh.prototype.lineHeadCap=wh.prototype.Dn,wh.prototype.En=B,wh.prototype.lineTailCap=wh.prototype.En;var xh=yh.length;wh.prototype.ia=function(e){var t=this===e;if(!t&&e){for(t=0;t<xh;t++){var r=yh[t];if(this[r]!==e[r])break}t=t===xh}return t},wh.prototype.equals=wh.prototype.ia,wh.prototype.vj=function(e){if(e){var t={};Ya(t,this,e)}else t=this;return new wh(t)},wh.prototype.getCopy=wh.prototype.vj;var Ah=qc({}),zh=[function(e){return e?pc(e):Ah},function(e){return e?pc(e):Ah},function(e){return 0<=e&&100>=e?+e:Ah},function(e){return"butt"===(e=pc(e))||"square"===e||"round"===e||"arrow-head"===e||"arrow-tail"===e?e:Ah},function(e){return"round"===e||"bevel"===e||"miter"===e?e:Ah},function(e){return 0<e&&100>=e?+e:Ah},function(e){return e&&e.every&&e.every(Gc)?e:Ah},function(e){return E(+e)?Ah:+e},function(e){return e===B||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||Object.values(Bh).includes(e)?e:Ah},function(e){return vc(e)?zh[3](e):B},function(e){return vc(e)?zh[3](e):B}],Ch=new Image;Ch.src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="arrow"><path style="fill:#ff0000" d="M 0,0 32,64 2,128 128,64 Z"/></g></svg> ');var Dh=new Image;Dh.src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><circle style="fill:#ffffff" cx="64" cy="64" r="64" /></svg>');var Bh={ARROW:Ch,CIRCLE:Dh};wh.DashImage=Bh,wh.MAX_LINE_WIDTH=100;var Eh=new wh;wh.DEFAULT_STYLE=Eh;var Fh="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function Gh(e){var t;if(e){var r=C(e,Gh);for(t in e)if(t in this){var n=e[t];n!==this[t]&&("fillColor"===t||0<(n=+n))&&(this[t]=n)}(e=r?e.Ob:!!(Ze(this.fillColor)&&this.width&&this.width))||(this.Ob=e)}qc(this)}function Hh(e,t){var r;Hh.j.constructor.call(this,t),t&&this.gb(t.style),e&&(this.g=!0),t&&(r=t.arrows)&&this.Mk(r)}function Ih(e,t){var r,n=!1,i=!1;if(t.length){for(n=0;n<t.length;n++)if(t[n]!==Jh){i=!0;break}t=e.style,n=i?t.b||t.Ob&&e.g||(r=e.c||!1)&&t.a&&r.Ob:t.Ob}return n&&e.wc(!0)}function Kh(e,t){Kh.j.constructor.call(this,e,t)}function Lh(e,t,r,n){var i,o=[],a=t.length;for(i=0;i<a;i++){var s=t[i];s.length&&o.push(Mh(e,s,r,n))}return o}function Mh(e,t,r,n){var i,o=[],a=t.length,s=0;for(e.xa=0,i=i||0;s<a;)o.push(Nh(e,t[s++],t[s++],i,n));return r&&o.push(Nh(e,t[0],t[1],i,n)),o}function Nh(e,t,r,n,i){var o=e.xa;return o&&180<Dd(o-r)&&(r+=0>o?-360:360),e.xa=r,i.Ah(t,r+n)}function Oh(e,t,r){for(var n,i,o,a=t,s=e.length+t;a--;){for(i=(t=e[a]).length,n=Array(i);i--;)o=t[i],n[i]=new J(o.x+r,o.y);e[--s]=n}}function Ph(e,t,r){this.paths=this.a=e,t!==B&&(this.interiorsIndex=this.b=t),r!==B&&(this.outlinesIndex=this.c=r)}wh.prototype.Y=function(){for(var e,t={},r=Fh.length;r--;)t[e=Fh[r]]=this[e];return t},wh.prototype.forWorkerMessage=wh.prototype.Y,t("H.map.ArrowStyle",Gh),Gh.prototype.Ob=!0,Gh.prototype.fillColor="rgba(255,255,255,.75)",Gh.prototype.width=1.2,Gh.prototype.length=1.6,Gh.prototype.frequency=5,Gh.prototype.uj=function(){return new Gh(this)},Gh.prototype.ia=function(e){var t=this===e;return!t&&e&&(t=e.width===this.width&&e.fillColor===this.fillColor&&e.length===this.length&&e.frequency===this.frequency),t},Gh.prototype.equals=Gh.prototype.ia,u(Hh,M),t("H.map.Spatial",Hh),Hh.prototype.type=nh.SPATIAL,Hh.prototype.T=0,Hh.prototype.style=Eh,Hh.prototype.V=function(){return this.style},Hh.prototype.getStyle=Hh.prototype.V,Hh.prototype.gb=function(e){var t=!0;return e?this.style=C(e,wh)?e:new wh(e):this.style?delete this.style:t=!1,t&&this.invalidate(kh.VISUAL),this},Hh.prototype.setStyle=Hh.prototype.gb,Hh.prototype.Ml=function(){return this.c},Hh.prototype.getArrows=Hh.prototype.Ml,Hh.prototype.Mk=function(e){var t=this.c,r=!1;return!e&&t?(delete this.c,r=!0):!e||t&&t.ia(e)||(this.c=new Gh(e),r=!0),r&&"none"!==this.style.strokeColor&&this.ra(1),this},Hh.prototype.setArrows=Hh.prototype.Mk,Hh.prototype.g=!1,Hh.prototype.sn=function(){return this.g},Hh.prototype.isClosed=Hh.prototype.sn,Hh.prototype.getGeometriesForTile=Hh.prototype.Kd,Hh.prototype.gh=function(){return B},Hh.prototype.getLabels=Hh.prototype.gh,u(Kh,Hh),t("H.map.GeoShape",Kh),Kh.prototype.getBoundingBox=Kh.prototype.K,Ph.prototype.b=Wd,Ph.prototype.interiorsIndex=Ph.prototype.b,Ph.prototype.c=Wd,Ph.prototype.outlinesIndex=Ph.prototype.c;var Jh=rc(new Ph([])),Qh=qc([]),Th;function th(e,t){th.j.constructor.call(this,!1,t),this.da(e)}function Rh(e,t){if(!C(e,L)||2>e.Ie())throw new D(t,0)}function Sh(e,t,r,n){var i=eh(t,r.Hf());if(i.length&&(i=(e=Lh(e,i,!1,t=r.Jf())).length)){var o=r.Le();t=t.w,r.x||Oh(e,i,-t),r.x===(1<<r.z)-1&&Oh(e,i,t),(r=Uf(e,o.left,o.top,o.right,o.bottom,!1)).length&&n.push(new Ph(r))}}function Uh(e,t){if(x.URL)return new x.URL(e,t).toString();if(!e||!Vh(e))return e;if(!t||Vh(t))throw new TypeError("Failed to construct 'URL': Invalid base URL");Th||Ic(Th=document.createElement("a"));var r=Th;return r.href=t,"/"!==e[0]?e=r.href.replace(/\/[^\/]*$/,"/")+e:((t=r.origin)||(t=r.protocol+"//"+r.host),e=t+e),e}function Vh(e){var t=!1;return"string"===typeof e&&(t=!(-1<e.search(/^(http|https|data|blob):/)||"//"===e.substr(0,2))),t}function Wh(e,t){if(Wh.j.constructor.call(this),t&&Vh(t))throw new D(Wh,1,"Base URL must be absolute");this.C=Xh.INIT,this.Ca=null,this.Yb=t}u(th,Kh),t("H.map.Polyline",th),th.prototype.K=function(){return this.a.K()},th.prototype.getBoundingBox=th.prototype.K,th.prototype.da=function(e){var t,r,n=this.da;if(C(e,ih)){var i=e.la;if(!(t=i.length))throw new D(n,0);for(r=0;r<t;r++)Rh(i[r],n)}else Rh(e,n);return this.b=!!i,this.a=e,this.ra(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.da,th.prototype.ga=function(){return this.a},th.prototype.getGeometry=th.prototype.ga,th.prototype.clip=function(e){var t=this.a;return eh(this.b?t.la[0]:t,e)},th.prototype.clip=th.prototype.clip,th.prototype.Kd=function(e){var t,r=this.a,n=[];if(this.b)for(t=(r=r.la).length;t--;)Sh(this,r[t],e,n);else Sh(this,r,e,n);return n.length?n:B},th.prototype.getGeometriesForTile=th.prototype.Kd,th.prototype.Y=function(){var e=th.j.Y.call(this),t=e.properties;return e.geometry=this.ga().Y(),t.style=this.V().Y(),t.height=0,e},th.prototype.forWorkerMessage=th.prototype.Y,u(Wh,F),t("H.map.render.Style",Wh),Wh.prototype.load=Wh.prototype.load,Wh.prototype.getState=function(){return this.C},Wh.prototype.getState=Wh.prototype.getState,Wh.prototype.O=function(e){this.C=e},Wh.prototype.setState=Wh.prototype.O,Wh.prototype.Ib=function(){return this.Yb},Wh.prototype.getBaseUrl=Wh.prototype.Ib,Wh.prototype.qc=function(){return sc(this.Ca)},Wh.prototype.getConfig=Wh.prototype.qc,Wh.prototype.Tl=function(){return this.Ca},Wh.prototype.getConfigReference=Wh.prototype.Tl,Wh.prototype.vd=function(e){this.Ca=e},Wh.prototype.setConfig=Wh.prototype.vd,Wh.prototype.Gb=function(e){this.Ca=null,this.O(Xh.ERROR),this.sh(Yh)?this.dispatchEvent(new wd(Yh,e,this)):console.error(e)},Wh.prototype.dispatchError=Wh.prototype.Gb,Wh.prototype.o=function(){Wh.j.o.call(this),this.Ca=null};var Yh="error",Zh={ed:"change",Ni:Yh},Xh={ERROR:-1,INIT:0,LOADING:1,READY:2};function $h(e,t){var r,n,i,o=arguments.length;for(r=1;r<o;r++)if((n=arguments[r])&&n!==e&&n!==a){var a=n;for(i in n){var s=n[i];e[i]!==s&&(ai(s)?ai(e[i])?e[i]=$h(e[i],s):e[i]=sc(s):void 0!==s&&(e[i]=sc(s)))}}return e}Wh.State=Xh,t("H.util.webgl.mergeObjects",$h);var bi=oc();function ci(e,t,r){var n=r[e];return t&&n in t&&0>uc.indexOf(n)?(t=t[n],++e<r.length?ci(e,t,r):t):bi}var di=ci.bind(null,0),ei={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},fi={data:1,draw:1,enabled:1,filter:1,properties:1},gi=Object.keys(fi);function hi(e,t,r,n,i,o){var a=n[e],s=r[a];if(++e<n.length){var l=t[a]||{};for(r=gi.length;r--;){var c=gi[r];if("draw"!==c||!o){var u=s[c];u!==B&&(l[c]=sc(u))}}hi(e,l,s,n,i,o)}else i?l=sc(s):(l=s,delete r[a]);t[a]=t[a]?$h(t[a],l):l}var ii=hi.bind(null,0);function ji(e,t){e in ei&&(t[e]=1)}function ki(e,t,r){var n,i,o;for(n in e)if(fi[n]){if("draw"===n){var a=e[n];for(i in a){var s=a[i];(o=s.style)?(s.style=t+o,ji(o,r)):(delete a[i],a[t+i]=s,ji(i,r))}}}else ki(e[n],t,r)}function li(e,t){var r,n,i,o,a={};if(t+="_",r=(e=$h({},e)).styles)for(n in r){var s=r[n];if(delete r[n],r[t+n]=s,i=s.mix)for(Cc(i)&&(i=[i]),o=i.length;o--;)ji(i[o],a),i[o]=t+i[o];(o=s.base)&&(i||(i=s.mix=[]),i.unshift(t+o),delete s.base,ji(o,a)),ji(n,a)}else r=e.styles={};if(s=e.layers)for(n in s)i=s[n],delete s[n],(o=i.data)&&!o.layer&&(o.layer=n),s[t+n]=i,ki(i,t,a);for(n in a)r[t+n]={base:n};return e}function mi(e,t){var r,n=e.sources,i=Object.keys(n)[0],o=$h(n[i],{uid:t});for(r in n=e.layers,e.sources={},e.sources[t]=o,n)(e=n[r]).data?e.data.source===i&&(e.data.source=t):e.data={source:t}}function ni(e,t){var r,n=e.textures;for(r in e=e.fonts,n){var i=n[r];i.url&&(i.url=Uh(i.url,t))}for(r in e)if(Bc(i=e[r]))for(n=0;n<i.length;n++){var o=i[n];o.url=o.url&&Uh(o.url,t)}else(o=i).url=o.url&&Uh(o.url,t)}function oi(e,t){return"function(){return feature."+e+(t||"")+";}"}function pi(e){return oi("style."+e,void 0)}function qi(e,t,r,n){return e={base:e,blend:t,blend_order:r},n&&(e.clean_depth=!!n),e}function ri(e){var t={};return t["translucent-"+(e?"extruded-":"")+"polygons"]={color:pi("fillColor"),order:1,interactive:!0,extrude:e},t}function si(e,t,r,n){return e={data:{source:e,layer:t}},r&&(e.draw=r),n&&(e.filter=n),e}function ai(e){return Ea(e)&&!Bc(e)}function ti(e,t){if(ti.j.constructor.call(this,e,t),Cc(e))ui.test(e)&&-1===e.indexOf("import:")?(this.b=e,t||(this.g=Vh(this.b)?B:this.b)):this.c=e;else{if(!Ea(e))throw new D(ti,0,"invalid style configuration");this.vd(sc(e))}}function Ai(e){var t,r=e.Ca;if(Ea(r)){var n;if(n=e.f){for(var i in n=!1,r=r&&r.sources)if(r[i].type===e.f){n=!0;break}n=!(!r||n)}n&&(t="invalid source, the only valid type is "+e.f)}else t="invalid style configuration";return t&&e.Gb(t),!t}function yi(e){e.dispatchEvent(new ud("change",e))}function wi(e){if(e.getState()!==Xh.READY)throw new $c(e.Oe,"style is not ready yet")}function xi(e,t,r,n){var i,o,a=[],s=Bc(t)?t:[t];for(void 0===n&&(n=!0),s=s.sort().reverse();i=s.pop();){t=String(i).split(".");for(var l=e.Ca,c=t.length;c--&&!fi[t[c]];);if(l&&0>c&&ai(l=di(l.layers,t))||(l=bi),l===bi)throw new D(r,0,'Unresolvable layer ID "'+i+'"');if(a.push({id:t,eb:l}),n)for(o in l)!fi[o]&&ai(l[o])&&s.push(i+"."+o)}return a}function zi(e,t){var r,n=0;for(r=t.length;n!==r;){var i=t[n++],o=e;if(!(e=o[i]))break}return n===r?{node:e,parent:o,fg:i}:void 0}u(ti,Wh),t("H.map.render.webgl.Style",ti),ti.prototype.load=function(){var e=this,t=this.Ib();this.b?(this.O(Xh.LOADING),new tf("text/plain",this.b).then((function(e){var r={};return vi(e,t,!1,(r[t]=!0,r))})).then((function(t){return e.vd(t)}),(function(t){return e.Gb(t.message)})),delete this.b):this.c&&(this.O(Xh.LOADING),vi(this.c,t).then((function(t){return e.vd(t)}),(function(t){return e.Gb(t.message)})),delete this.c)},ti.prototype.load=ti.prototype.load,ti.prototype.Rk=function(e,t,r){var n;for(wi(this),e=xi(this,e,this.Rk,r),r=0;r<e.length;r++){var i=e[r].eb.draw;for(n in i){var o=i[n];ai(o)&&(o.interactive=!!t)}}yi(this)},ti.prototype.setInteractive=ti.prototype.Rk,ti.prototype.setProperty=function(e,t,r){var n,i=e.split("."),o=0,a=i.length;if(wi(this),!vc(t))throw new D(this.setProperty,1,"value");if(n=zi(this.Ca,i)){if(!(n.parent instanceof Object)||n.parent instanceof Array){if(!r)throw new D(this.setProperty,0,e+" property is not primitive type");i.pop(),i=zi(this.Ca,i),n.parent=i.parent[i.fg]={}}n.parent[n.fg]=t}else{for(n=this.Ca;o!==a-1;)n[i[o]]={},n=n[i[o++]];n[i[o]]=t}Ai(this)&&yi(this)},ti.prototype.setProperty=ti.prototype.setProperty,ti.prototype.kh=function(e){return wi(this),(e=zi(this.Ca,e.split(".")))?sc(e.node):void 0},ti.prototype.getProperty=ti.prototype.kh,ti.prototype.removeProperty=function(e){wi(this),(e=zi(this.Ca,e.split(".")))&&e.parent&&e.parent.hasOwnProperty(e.fg)&&(delete e.parent[e.fg],Ai(this)&&yi(this))},ti.prototype.removeProperty=ti.prototype.removeProperty,ti.prototype.xe=function(e,t,r){var n;wi(this);var i=this.Ca,o=i.layers,a=xi(this,e,this.xe,!1);for(e=a.length,n={};e--;)ii(n,o,a[e].id,!!t,!!r);for(r={},e=(a=Object.keys(i)).length;e--;){var s=a[e],l=i[s];r[s]=l===o?n:sc(l)}return t||yi(this),r},ti.prototype.extractConfig=ti.prototype.xe,ti.prototype.Oe=function(e){if(wi(this),!Ea(e))throw new D(this.Oe,0,"config");this.vd($h(this.Ca,e))},ti.prototype.mergeConfig=ti.prototype.Oe,ti.prototype.a=ba(2),ti.prototype.toString=function(){return this.getState()===Xh.READY?x.H.gl.yaml.safeDump(this.Ca,{lineWidth:120}):""},ti.prototype.o=function(){ti.j.o.call(this),delete this.c,delete this.b};var ui=/^(http[s]?)?.*\.ya?ml/i;function vi(e,t,r,n){r=void 0!==r&&r,n=void 0===n?{}:n;try{var i=x.H.gl.yaml.safeLoad(e,{json:!0})}catch(o){return Promise.reject(o)}return i&&(Cc(e=i.import)&&(e=[e]),r&&t&&Bi(i,t),delete i.import,Bc(e)&&e.length)?(r=e.reduce((function(e,r){var i=t?Uh(r,t):r;return n[i]||(n[i]=!0,e.push(new tf("text/plain",i).then((function(e){return vi(e,i,!0,n)})))),e}),[]),Promise.all(r).then((function(e){var t={};return e.forEach((function(e){return e&&$h(t,e)})),$h(t,i),t}))):Promise.resolve(i)}function Bi(e,t){function r(e){e.url&&(e.url=Uh(e.url,t))}var n=e&&e.fonts;if(n)for(var i in n)Bc(n[i])?n[i].forEach(r):r(n[i]);if(e=e&&e.textures)for(var o in e)r(e[o])}function O(e,t){var r;if(O.j.constructor.call(this),C(e,L,O,0),t!==B&&Bc(t,O,1)){for(r=0;r<t.length;r++)C(t[r],L,O,1,"index "+r);this.a=t}else this.a=[];this.b=e,this.c=[]}function Ci(e){var t=O,r=L,n=e.c,i=e.a,o=e.f,a=e.b;return i=[n,i,B,n,a,B,o,a,B,o,i,B],180<=e.Ab()&&(i.splice(9,0,o,e=e.bb().lng,B),i.splice(3,0,n,e,B)),new t(new r(i))}ti.normalize=Bi,ti.prototype.vd=function(e){ti.j.vd.call(this,e),Ai(this)&&(this.O(Xh.READY),yi(this))},ti.prototype.qc=function(){return ti.j.qc.call(this)},ti.prototype.getConfig=ti.prototype.qc,ti.prototype.Ib=function(){return this.g||ti.j.Ib.call(this)},ti.prototype.getBaseUrl=ti.prototype.Ib,t("H.map.Style",ti),ti.State=Xh,u(O,jg),t("H.geo.Polygon",O),O.fromRect=Ci;var Di={NORTH:90,SOUTH:-90};function Ei(e,t){var r,n,i;return(i=e.K())&&((r=e.eh(!0))&&(n=e.Ie())&&(i=i.ec(tg([e.ye(0),e.ye(n-1)],!0),!0)),360===i.Ab()&&1===r%2&&(i=i.Xc(t,0))),i}function Fi(e,t,r,n){n=void 0===n||n;var i=e.a,o=Gi.bind(null,t,r);return ee(t,r,e.b.$,0,!0,3)!==de.NONE&&(!n||!i.some(o))}function Gi(e,t,r){return ee(e,t,r.$,0,!0,3)===de.SURFACE}function Hi(e,t){t=t.$,e=e.b.$;var r,n,i=t.length-3,o=e.length-3,a={};for(r=0;r<i;r+=3){var s=t[r],l=t[r+1],c=t[r+3],u=t[r+4];for(n=0;n<o;n+=3){var p=e[n],f=e[n+1],h=e[n+3],d=e[n+4];if(ag(new Yf(l,s),new Yf(u,c),new Yf(f,p),new Yf(d,h),a,!0))return!0}}return!1}function Ii(e,t){var r=t.b,n=t.a,i=n.length,o=r.$,a=o.length,s=e.b.$,l=s.length;if(Hi(e,r))return!0;for(r=0;r<a;r+=3)if(Fi(e,o[r],o[r+1]))return!0;for(r=0;r<l;r+=3)if(Fi(t,s[r],s[r+1]))return!0;for(r=0;r<i;r++)if(Hi(e,n[r]))return!0;return!1}function Ji(e){Ji.j.constructor.call(this,e)}function uh(e,t){var r=t&&(+t.extrusion||+t.extrude)||0,n=t&&+t.elevation||0,i=0;if(uh.j.constructor.call(this,!0,t),0<n&&(i+=n,this.b=n),0<r&&(i+=r,this.f=r),2047<i)throw new ne(uh,i,[0,2047]);C(e,L)?this.da(new O(e)):this.da(e)}O.Direction=Di,O.prototype.pd=Di.NORTH,O.prototype.Sk=function(e){return this.pd!==e&&(this.f=z,this.c.length=0,this.pd=e),this},O.prototype.setPoleCovering=O.prototype.Sk,O.prototype.Km=function(){return this.pd},O.prototype.getPoleCovering=O.prototype.Km,O.prototype.fm=function(){return this.b},O.prototype.getExterior=O.prototype.fm,O.prototype.Pk=function(e){if(!C(e,L))throw new D(this.Pk,0,e);this.b=e,this.f=z},O.prototype.setExterior=O.prototype.Pk,O.prototype.rm=function(){return this.a},O.prototype.getInteriors=O.prototype.rm,O.prototype.xg=function(e,t,r){var n,i=arguments.length;for(n=2;n<i;n++)C(arguments[n],L,this.xg,n);var o=this.a.splice.apply(this.a,arguments);for(n=2;n<i;n++)arguments[n]=B;return this.c.splice.apply(this.c,arguments),o},O.prototype.spliceInteriors=O.prototype.xg,O.prototype.no=function(e){return this.xg(e,1)[0]},O.prototype.removeInteriorAt=O.prototype.no,O.prototype.mo=function(e){return 0>(e=this.a.indexOf(e))?B:this.xg(e,1)[0]},O.prototype.removeInterior=O.prototype.mo,O.prototype.Bk=function(e){if(!C(e,L))throw new D(this.Bk,0,e);this.a.push(e)},O.prototype.pushInterior=O.prototype.Bk,O.prototype.K=function(){var e=this.f;return e||(this.f=e=Ei(this.b,this.pd)),e},O.prototype.getBoundingBox=O.prototype.K,p=O.prototype,p.tj=function(e){var t=this.a.length;if(0>e||e>=t)throw new ne(this.tj,e,[0,t-1]);return(t=this.c[e])||(this.c[e]=t=Ei(this.a[e],this.pd)),t},p.rb="Polygon",p.cd=function(e){var t,r=this.a,n=r.length;if(this.b.Ie()){for(e.push("("),this.b.cd(e,!0),t=0;t<n;t++)r[t].Ie()&&(e.push(","),r[t].cd(e,!0));e.push(")")}else e.push("EMPTY");return e},p.Hb="Polygon",p.bd=function(){var e,t=[],r=this.a,n=this.b.bd();for(n[0].toString()!==n[n.length-1].toString()&&n.push(n[0]),t.push(n),e=0;e<r.length;e++)(n=r[e].bd())[0].toString()!==n[n.length-1].toString()&&n.push(n[0]),t.push(n);return t},p.Y=function(){var e=O.j.Y.call(this);return this.K().Bb()&&(e.type="Multi"+e.type),e},p.pc=function(){var e=[],t=this.a,r=t.length;for(e.push(this.b.pc());r--;)e[r+1]=t[r].pc();return this.K().Bb()?[e]:e},p.ia=function(e){var t=!1;if(C(e,O)){var r=e.a,n=this.a.length;t=r.length;var i=0;for(t=this.b.ia(e.b)&&n===t;t&&i<n;)t=t&&this.a[i].ia(r[i]),i++}return t},O.prototype.equals=O.prototype.ia,u(Ji,gh),t("H.geo.MultiPolygon",Ji),Ji.prototype.b=function(e){return C(e,O)},Ji.prototype.rb="Multi"+O.prototype.rb,Ji.prototype.Hb="Multi"+O.prototype.Hb,u(uh,Kh),t("H.map.Polygon",uh);var Ki=new O(new L([0,0,0,0,0,0,0,0,0]));function Li(e,t,r,n){var i,o,a=0,s=!0;if(i=Mi(e,t.b,r,n,t.K())){var l=new Ph(i),c=t.a;if(o=c.length)for(l.b=l.a.length;a<o;a++)(i=Mi(e,c[a],r,n,t.tj(a)))&&(l.a=l.a.concat(i));for(o=l.a.length,a=0;a<o;a++)if(l.a[a]!==Qh){s=!1;break}s&&(l=a%2?Jh:B)}return l}function Mi(e,t,r,n,i){var o,a=r.Le(),s=i,l=s.Ab(),c=[[]],u=t.$,p=[],f=u.length,h=!1;for(o=0;o<f;o+=3){var d=u[o],y=u[o+1];h||180!=Dd(y)||(p.push(d),p.push(y),p.push(d),p.push(-y),h=!0),p.push(d),p.push(y)}if(u=p,360>l&&-180==s.a&&(s=new K(s.c,180,s.f,s.b)),360>l&&180==s.b&&(s=new K(s.c,s.a,s.f,-180)),s.Bb()){for(d=(l=u).length,u=-1,p=0;p<d-2;p+=2)if(ig(l[p+1],l[p+3])){u=p+2;break}-1===u&&ig(l[d-1],l[1])&&(u=d),-1!==u&&(f=l[u-2],p=l[u-1],o=l[u%d],h=l[(u+1)%d],180!==Dd(f)&&180!==Dd(o)&&(y=Dd(o-f),d=Dd(h-p),d+=180<d?-360:0,h=Dd(180-h),h+=180<h?-360:0,d&&h&&(y/=Dd(d)/Dd(h),f=o+(o>f?-y:y),p=0<p?180:-180,l.splice(u,0,f,p,f,-p)))),u=l}if(c[0]=Ni(u.concat(),s.a),360>s.Ab()&&s.gd(new kg(s.c,180))&&(u=Ni(u.concat(),s.b),c.push(u)),e=Lh(e,c,!0,s=r.Jf()),360===i.Ab()&&1===t.eh(!0)%2){for(t=e,e=r.Le(),t[0][1].x>t[0][t[0].length-1].x&&(t[0]=t[0].reverse()),u=[],l=t[0].length-1,c=0;c<l;c++)p=t[0][c],u[c]=new J(p.x-2*s.w,p.y),u[c+l]=new J(p.x-s.w,p.y),u[c+2*l]=new J(p.x,p.y),u[c+3*l]=new J(p.x+s.w,p.y),u[c+4*l]=new J(p.x+2*s.w,p.y);t[0]=u,(c=s.Ah(n,0)).y=2*e[n===Di.NORTH?"top":"bottom"],n=c.clone(),c.x=t[0][t[0].length-1].x+1,n.x=t[0][0].x-1,t[0].push(c,n),e=t}if(Uf(e,n=a.left,t=a.top,c=a.right,a=a.bottom,!0).length){if(!r.Hf().Qg(i)){for(r=e,i=[new J(n,t),new J(c,t),new J(c,a),new J(n,a)],a=[],e=r.length;e--;)if(n=Wf(i,r[e]))for(t=Oi(n),a.push(t);n.Uh;)t=Oi(n=n.Uh),a.push(t);e=a}}else r=Pi(n,t,e[0]),e[1]&&(r=r!==Pi(n,t,e[1])),e=r?[Qh]:B;return e}function Pi(e,t,r){var n,i,o,a=n=r[0].x,s=i=r[0].y,l=1;for(o=r.length;l<o;l++){var c=r[l].x,u=r[l].y;c>n?n=c:c<a&&(a=c),u>i?i=u:u<s&&(s=u)}return a<=e&&e<=n&&s<=t&&t<=i&&fe({x:e,y:t},ge(r.concat(r[0])))}function Oi(e){var t=[],r=e;do{var n=Ad(100*(r.eo?r.eo:r.x))/100,i=Ad(100*(r.fo?r.fo:r.y))/100;if(!o||.01<Fd(Gd(o.x-n,2)+Gd(o.y-i,2))){var o=new J(n,i);t.push(o)}r=r.next}while(r&&r!==e);return t}function Ni(e,t){var r,n=Number.POSITIVE_INFINITY,i=-1,o=e.length;for(r=0;r<o;r+=2){var a=Dd(e[r+1]-t);(a+=180<a?360-a:a)<n&&(n=a,i=r)}return 0<r?(t=e.splice(i,e.length-i)).concat(e):e}function Qi(e,t,r){Qi.j.constructor.call(this,Ki,r),this.tg(e),this.zi(t),r&&"precision"in r&&this.yi(r.precision)}function Ri(e){e.a!==z&&Qi.j.da.call(e,Si(e))}function Si(e){var t=e.R,r=t.lat,n=e.wa,i=0,o=new L;if(90===Dd(r))for(r=t.zg(0,n,!0).lat;360>i;i+=120)o.gi(r,i-180,B);else for(e=360/(e=e.D);360>i;i+=e)o.qd(t.zg(i,n,!0));return t=new O(o),0>r&&t.Sk(Di.SOUTH),t}function Ti(e,t){if(!C(e,Element)){if(Ui.innerHTML=e,!(e=Ui.firstElementChild))throw new D(Ti,0,"No element data");Ui.removeChild(e);var r=!0;Ui.innerHTML=""}this.a=0!==kf(e).length,this.f=r?e:lf(e,x.document,this.a),t&&((r="onAttach")in t&&zc(e=t[r],"Function",Ti,1,r)&&(this.Vh=e),(r="onDetach")in t&&zc(e=t[r],"Function",Ti,1,r)&&(this.b=e))}uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Ki,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.pi=function(e){var t=+e;if(t!==e)throw new D(this.pi,0,e);if(0>t||2047<this.b+t)throw new ne(this.pi,this.b+t,[0,2047]);this.f=t,this.ra(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.pi,uh.prototype.gm=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.gm,uh.prototype.oi=function(e){var t=+e;if(t!==e)throw new D(this.oi,0,e);if(0>t||2047<this.f+t)throw new ne(this.oi,this.f+t,[0,2047]);this.b=t,this.ra(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.oi,uh.prototype.bm=function(){return this.b},uh.prototype.getElevation=uh.prototype.bm,uh.prototype.ga=function(){return this.a},uh.prototype.getGeometry=uh.prototype.ga,uh.prototype.da=function(e){if(C(e,O))var t=!1;else C(e,Ji,this.da,0),t=!0;return this.J=t,t=this.a,this.a=e,t!==Ki&&this.ra(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.da,uh.prototype.K=function(){return this.ga().K()},uh.prototype.getBoundingBox=uh.prototype.K,uh.prototype.Kd=function(e){var t,r,n,i=this.ga();if(this.J){var o=0;for(n=(i=i.la).length;o<n;o++)(r=Li(this,i[o],e,i[o].pd))&&(t||(t=[]),t.push(r))}else(r=this.ab)===B&&(r=this.J?Di.NORTH:this.ga().pd),(r=Li(this,i,e,r))&&(t=[r]);return t},uh.prototype.getGeometriesForTile=uh.prototype.Kd,uh.prototype.aa=z,uh.prototype.Y=function(){var e,t=uh.j.Y.call(this),r=this.ga(),n=this.J?r.la:[r],i=t.properties,o=t.geometry=r.Y();if(i.style=this.V().Y(),i.height=this.f+this.b,i.min_height=this.b,this.K().Bb()&&(o.type="MultiPolygon",this.J)){var a=[];n.forEach((function(t,r){e=o.coordinates[r],t.K().Bb()?a=a.concat(e):a.push(e)})),o.coordinates=a}return t},uh.prototype.forWorkerMessage=uh.prototype.Y,u(Qi,uh),t("H.map.Circle",Qi),Qi.prototype.tg=function(e){(e=ng(e)).ia(this.R)||(this.R=e,Ri(this))},Qi.prototype.setCenter=Qi.prototype.tg,Qi.prototype.bb=function(){return this.R},Qi.prototype.getCenter=Qi.prototype.bb,Qi.prototype.zi=function(e){if(E(e=ae(e,0,6371000.79*Pd/2)))throw new D(this.zi,0,e);this.wa!==e&&(this.wa=e,Ri(this))},Qi.prototype.setRadius=Qi.prototype.zi,Qi.prototype.Qm=function(){return this.wa},Qi.prototype.getRadius=Qi.prototype.Qm,Qi.prototype.D=60,Qi.prototype.yi=function(e){if(!Fc(e))throw new D(this.yi,0,e);this.D!==(e=ae(Ad(e),4,360))&&(this.D=e,Ri(this))},Qi.prototype.setPrecision=Qi.prototype.yi,Qi.prototype.Nm=function(){return this.D},Qi.prototype.getPrecision=Qi.prototype.Nm,Qi.prototype.da=function(){return this},Qi.prototype.setGeometry=Qi.prototype.da,Qi.prototype.ga=function(){return this.a===Ki&&Qi.j.da.call(this,Si(this)),this.a},Qi.prototype.getGeometry=Qi.prototype.ga,t("H.map.DomIcon",Ti);var Ui=document.createElement("DIV");function Vi(e){Vi.j.constructor.call(this,e)}function Wi(e,t){this.w=+e,this.h=+t}function Xi(e,t){var r,n=e,i=t||[];if(e!==Yi.NONE){if(t=r=i.length,-1===Zi.indexOf(n))throw new D(Xi,0,e);if(!i)throw new D(Xi,1,i);for(;r--;)if(E(i[r]))throw new D(Xi,1,i);if(n===Yi.RECT&&3<t&&(i=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]],n=Yi.POLYGON),n===Yi.CIRCLE&&2<t&&0<(e=i[2])){n=i[0];var o=i[1],a=360/(r=yd(2*Cd(e),40));for(i=[];r--;){var s=a*r*Ud;i.push(n+Id(s)*e,o+Kd(s)*e)}n=Yi.POLYGON}if(n!==Yi.POLYGON||!t||i.length%2)throw new D(Xi,1,i);this.a=i}}Ti.prototype.Vh=null,Ti.prototype.b=null,Ti.prototype.uj=function(e){return lf(this.f,e,this.a)},Ti.prototype.a=!1,u(Vi,gh),t("H.geo.MultiPoint",Vi),Vi.prototype.b=function(e){return lg(e)},Vi.prototype.c=function(e){return C(e,kg)?e:ng(e)},Vi.prototype.rb="Multi"+kg.prototype.rb,Vi.prototype.Hb="Multi"+kg.prototype.Hb,t("H.math.Size",Wi),t("H.map.HitArea",Xi);var Yi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Xi.ShapeType=Yi;var Zi=[Yi.RECT,Yi.CIRCLE,Yi.POLYGON];function rh(e,t){var r;xc(this,rh),rh.j.constructor.call(this,t),this.da(e),t&&"icon"in t&&(r=t.icon),this.Ic(r||$i(this))}function $i(e){var t=e.c;return t||(t=e.constructor.prototype.c=e.b(aj)),t}Xi.prototype.Of=function(e,t,r){return this.a?ee(e,t,this.a,r,!0):de.NONE},Xi.prototype.hitTest=Xi.prototype.Of,u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.ga=function(){return this.a},rh.prototype.getGeometry=rh.prototype.ga,rh.prototype.da=function(e){var t=this.a;return C(e,kg)||C(e,Vi)?this.a=e:(lg(e,this.da,0),this.a=ng(e)),t&&this.ra(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.da,rh.prototype.K=function(){return this.a.K()},rh.prototype.xb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.xb,rh.prototype.Ic=function(e){var t=this.icon,r=!t;if(t!==e){if(!this.Uj(e)){if(r)throw new D(this.constructor,1,e);throw new D(this.Ic,0,e)}this.icon=e,r||this.ra(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Ic;var aj={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Wi(38,47),anchor:new J(19,45),hitArea:new Xi(Yi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function bj(e,t){bj.j.constructor.call(this,e,t)}function cj(e,t,r){cj.j.constructor.call(this,e),this.oldValue=r,this.newValue=t}function dj(e,t,r,n){dj.j.constructor.call(this,e,t,r),this.modifiers=n}rh.prototype.Y=function(){var e=rh.j.Y.call(this),t=this.xb(),r=t.yb(),n=t.kd();return e.geometry=this.ga().Y(),r&&((t=e.properties.icon={id:t.uid}).size={w:r.w,h:r.h},t.offset=[r.w/2-(n?n.x:0),r.h/2-(n?n.y:0)]),e},rh.prototype.forWorkerMessage=rh.prototype.Y,u(bj,rh),t("H.map.DomMarker",bj),bj.prototype.type=nh.DOM_MARKER,bj.prototype.T=2,bj.prototype.b=function(e){var t=new Ti(e.svg,e);return e=e.anchor,t.f.style.margin=-e.y+"px 0 0 -"+e.x+"px",t},bj.prototype.Uj=function(e){return C(e,Ti)},u(cj,ud),t("H.util.ChangeEvent",cj),u(dj,cj),t("H.map.ChangeEvent",dj);var ej={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function fj(){this.a=[],fj.j.constructor.call(this)}function gj(e,t,r){if(e=e.a.length,r)var n=e;else if(E(n=0>(n=+t)?zd(0,e+n):yd(e,n)))throw new ne(fj,t,[0,e-1]);return n}function ij(e,t){var r=e.a.splice(t,1)[0];return e.dispatchEvent(new hj(e,e.A.je,t,null,r,null)),r}function hj(e,t,r,n,i,o){hj.j.constructor.call(this,t,e),this.idx=r,this.added=n,this.removed=i,this.moved=o}function jj(){}function kj(e){return yd(1,zd(0,.5-Ed(Ld(Rd+Qd*e/180))/Pd/2))}function lj(e){return 0>=e?90:1<=e?-90:Vd*(2*Md(Hd(Pd*(1-2*e)))-Qd)}dj.Type=ej,dj.prototype.ll=ej.SIZE,dj.prototype.SIZE=dj.prototype.ll,dj.prototype.Ui=ej.POSITION,dj.prototype.POSITION=dj.prototype.Ui,dj.prototype.Oi=ej.HEADING,dj.prototype.HEADING=dj.prototype.Oi,dj.prototype.Wi=ej.TILT,dj.prototype.TILT=dj.prototype.Wi,dj.prototype.Pi=ej.INCLINE,dj.prototype.INCLINE=dj.prototype.Pi,dj.prototype.Xi=ej.ZOOM,dj.prototype.ZOOM=dj.prototype.Xi,dj.prototype.Mi=ej.BOUNDS,dj.prototype.BOUNDS=dj.prototype.Mi,u(fj,F),t("H.util.OList",fj),fj.prototype.add=function(e,t){t=gj(this,t,E(t)),this.a.splice(t,0,e),this.dispatchEvent(new hj(this,this.A.he,t,e,null,null))},fj.prototype.add=fj.prototype.add,fj.prototype.hc=function(e){return this.get(e),ij(this,e)},fj.prototype.removeAt=fj.prototype.hc,fj.prototype.remove=function(e){return 0<=(e=this.indexOf(e))&&(ij(this,e),!0)},fj.prototype.remove=fj.prototype.remove,fj.prototype.set=function(e,t){if(0!==this.a.length||0!==e){this.get(e),e=gj(this,e,!1);var r=this.a[e]}return this.a[e]=t,this.dispatchEvent(new hj(this,this.A.ke,e,t,r,null)),r},fj.prototype.set=fj.prototype.set,fj.prototype.indexOf=function(e){return this.a.indexOf(e)},fj.prototype.indexOf=fj.prototype.indexOf,fj.prototype.get=function(e){var t=gj(this,e,!1),r=this.a;if(t>=r.length)throw new ne(this.get,e,[0,r.length-1]);return r[t]},fj.prototype.get=fj.prototype.get,fj.prototype.ym=function(){return this.a.length},fj.prototype.getLength=fj.prototype.ym,fj.prototype.La=function(){return this.a.concat()},fj.prototype.asArray=fj.prototype.La,fj.prototype.flush=function(){for(var e=this.a.length;e--;)ij(this,e)},fj.prototype.flush=fj.prototype.flush,fj.prototype.o=function(){this.flush(),fj.j.o.call(this)},fj.prototype.A={he:"add",je:"remove",ke:"set",Xo:"move"},u(hj,ud),fj.Event=hj,jj.prototype.Tf=function(e,t,r){return r?(r.x=t/360+.5,r.y=kj(e)):r=new J(t/360+.5,kj(e)),r},jj.prototype.latLngToPoint=jj.prototype.Tf,jj.prototype.Pc=function(e,t){return this.Tf(e.lat,e.lng,t)},jj.prototype.geoToPoint=jj.prototype.Pc,jj.prototype.Ra=function(e,t,r){return r?(r.lat=lj(t),r.lng=360*(1===e?1:Zd(e,1))-180):r=new kg(lj(t),360*(1===e?1:Zd(e,1))-180),r},jj.prototype.xyToGeo=jj.prototype.Ra,jj.prototype.dg=function(e,t){return this.Ra(e.x,e.y,t)},jj.prototype.pointToGeo=jj.prototype.dg;var mj=new jj;function nj(e,t){this.projection=e||mj,this.b=0,this.a=this.exp=Ed(t||256)/Od,oj(this),this.y=this.x=0}t("H.geo.mercator",mj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",nj);var pj=Dd(24)+Dd(-8);function oj(e){e.a>pj&&(e.a=pj),e.w=Gd(2,e.a),e.h=Gd(2,e.a)}function qj(e){e=e||{},qj.j.constructor.call(this),this.min=0,this.max=22,this.yl=this.dark=!!e.dark,e.min&&this.ui(e.min),e.max&&this.si(e.max),this.pixelProjection=new nj(e.projection,e.minWorldSize),e.provider&&(this.ma=e.provider,this.Va=A(this.Va,this),this.ma.addEventListener(P.prototype.A.za,this.Va,!1,this),this.hb=A(this.hb,this),this.ma.addEventListener(P.prototype.A.ie,this.hb,!1,this))}function rj(e,t,r){var n=e[t],i="min"===t,o=i?e.ui:e.si;if(r!==n){if(!(i?r<=e.max:r>=e.min))throw new D(o,0,"Invalid condition min <= max");e[t]=r,e.Va(),e.hb(),e.dispatchEvent(new cj(i?e.A.Ti:e.A.Si,r,n))}return e}function sj(e){var t;if(sj.j.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),e){var r=e.length;for(t=0;t<r;t++)this.add(e[t])}}function tj(e,t){var r=t.getProvider&&t.getProvider();r&&(uj[r.uid]=r),t.ka(e)}function vj(e){var t=e.getProvider&&e.getProvider();t&&delete uj[t.uid],e.ka(null)}nj.prototype.eg=mj,nj.prototype.projection=nj.prototype.eg,nj.prototype.x=0,nj.prototype.x=nj.prototype.x,nj.prototype.y=0,nj.prototype.y=nj.prototype.y,nj.prototype.Oo=Gd(2,pj),nj.prototype.w=nj.prototype.Oo,nj.prototype.ln=Gd(2,pj),nj.prototype.h=nj.prototype.ln,nj.prototype.Oa=function(e){if(E(e))throw new D(this.Oa,0,e);var t=this.x/this.w,r=this.y/this.h;this.b=e,this.a=this.exp+e,oj(this),this.x=t*this.w,this.y=r*this.h},nj.prototype.rescale=nj.prototype.Oa,nj.prototype.Jj=function(){return this.b||0},nj.prototype.getZoomScale=nj.prototype.Jj,nj.prototype.ib=function(e,t){return(e=this.projection.Tf(e.lat,e.lng,t)).x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},nj.prototype.geoToPixel=nj.prototype.ib,nj.prototype.Re=function(e,t){return this.projection.Ra((e.x+this.x)/this.w,(e.y+this.y)/this.h,t)},nj.prototype.pixelToGeo=nj.prototype.Re,nj.prototype.Ra=function(e,t,r){return this.projection.Ra((e+this.x)/this.w,(t+this.y)/this.h,r)},nj.prototype.xyToGeo=nj.prototype.Ra,nj.prototype.Ah=function(e,t,r){return(e=this.projection.Tf(e,t,r)).x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},nj.prototype.latLngToPixel=nj.prototype.Ah,nj.prototype.Zd=function(e){return new J(e.x*this.w-this.x,e.y*this.h-this.y)},nj.prototype.pointToPixel=nj.prototype.Zd,u(qj,F),t("H.map.layer.Layer",qj),qj.prototype.min=0,qj.prototype.min=qj.prototype.min,qj.prototype.max=22,qj.prototype.max=qj.prototype.max,qj.prototype.A={za:"update",ie:"configchange",Ti:"minchange",Si:"maxchange"},qj.prototype.ca=function(){return this.ma},qj.prototype.getProvider=qj.prototype.ca,qj.prototype.un=function(e){return this.min<=e&&e<=this.max},qj.prototype.isValid=qj.prototype.un,qj.prototype.ui=function(e){return rj(this,"min",+e)},qj.prototype.setMin=qj.prototype.ui,qj.prototype.si=function(e){return rj(this,"max",+e)},qj.prototype.setMax=qj.prototype.si,qj.prototype.Va=function(){this.dispatchEvent(this.A.za)},qj.prototype.hb=function(e){e=new cj(this.A.ie,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},qj.prototype.o=function(){qj.j.o.call(this)},qj.prototype.ba=function(){return null},qj.prototype.getCopyrights=qj.prototype.ba,u(sj,fj),t("H.map.DataModel",sj),sj.prototype.add=function(e,t){C(e,qj,this.add,0),tj(this,e),sj.j.add.call(this,e,t)},sj.prototype.add=sj.prototype.add,sj.prototype.set=function(e,t){return C(t,qj,this.set,0),tj(this,t),(e=sj.j.set.call(this,e,t))&&vj(e),e},sj.prototype.set=sj.prototype.set,sj.prototype.hc=function(e){var t;return(t=sj.j.hc.call(this,e))&&vj(t),t},sj.prototype.removeAt=sj.prototype.hc,sj.prototype.remove=function(e){var t;return(t=sj.j.remove.call(this,e))&&vj(e),t},sj.prototype.remove=sj.prototype.remove,sj.prototype.flush=function(){for(var e=this.a.length;e--;)this.hc(e);sj.j.flush.call(this)},sj.prototype.flush=sj.prototype.flush;var uj={};function wj(e,t,r){if(e=uj[e])return C(e[t],Function,wj,1,"invalid method"),e[t].apply(e,r)}function xj(e,t){Da(e)&&(this.i=e),Fc(t)&&(this.a=t)}Ic(uj),sj.invoke=wj,t("H.util.Request",xj),xj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var yj=[0,1,2,3,4],Ej;function zj(e,t){e.b<e.a&&(vc(t)||(t=2),0===t||1===t||0!==e.C&&1!==e.C||(e.b++,2!==t&&e.g++,e.O(e.b<e.a?1:2)))}function Aj(){}function Bj(e,t){var r=e.N(),n=r.ownerDocument;Bj.j.constructor.call(this),this.a=e,this.S=r=r.appendChild(Cj(n,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.qf=Cj(n,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),r.appendChild(this.qf),r=r.appendChild(Cj(n,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.i=r.appendChild(Cj(n,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.i.target="_blank",this.g=r.appendChild(Cj(n,"SPAN","margin:0px 8px")),this.c=r.appendChild(Cj(n,"SPAN")),this.s=Wa(Dj),this.vi(t),this.f=A(this.f,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ri,this.f),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}xj.prototype.C=0,xj.prototype.getState=function(){return this.C},xj.prototype.getState=xj.prototype.getState,xj.prototype.O=function(e){if(0>yj.indexOf(e))throw new D(this.O,0,e);(this.C!==e||1===e&&1<this.a)&&(this.C=e,this.i&&this.i(this))},xj.prototype.a=1,xj.prototype.cn=function(){return this.a},xj.prototype.getTotal=xj.prototype.cn,xj.prototype.b=0,xj.prototype.Om=function(){return this.b},xj.prototype.getProcessed=xj.prototype.Om,xj.prototype.g=0,xj.prototype.hm=function(){return this.g},xj.prototype.getFailed=xj.prototype.hm,xj.prototype.oe=function(){},xj.prototype.cancel=function(){3!==this.C&&(this.oe(),this.O(3))},xj.prototype.cancel=xj.prototype.cancel,t("H.util.ICapturable",Aj),Aj.prototype.capture=function(){},Aj.prototype.capture=Aj.prototype.capture,t("H.util.Disposable",qd),qd.prototype.tb=qd.prototype.tb,qd.prototype.addOnDisposeCallback=qd.prototype.tb,t("H.util.dispose",td),qd.prototype.F=qd.prototype.F,qd.prototype.dispose=qd.prototype.F,qd.prototype.o=qd.prototype.o,qd.prototype.disposeInternal=qd.prototype.o,u(Bj,qd),t("H.map.Imprint",Bj);var Dj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US",mark:""};function Cj(e,t,r,n,i){return e=e.createElement(t),r&&(e.style.cssText=r),n&&(e.innerHTML=n),i&&(e.className=i),e}Bj.prototype.vi=function(e){var t,r=this.qf.firstElementChild.firstElementChild.children;e||(this.s=Wa(Dj));var n=this.s;for(t in n)e&&t in e&&(n[t]=e[t]);e=(this.wh=e=n.invert)?Fj:Gj,r[0].style.fill=e.Wk,r[0].style.fillOpacity=""+e.Xk,r[1].style.fill=e.al,r[1].style.fillOpacity=""+e.bl,e=n.locale,Hj[e]||(e="en-US",n.locale=e),this.i.innerHTML=Hj[e],e=e.split("-"),this.i.href=n.href.replace("{LN}",e[0]).replace("{CN}",e[1].toLowerCase()),n.mark?(this.c.innerHTML=n.mark,this.c.style.margin="0px 8px"):(this.c.innerHTML="",this.c.style.margin="0px"),this.S.style.font=n.font},Bj.prototype.setOptions=Bj.prototype.vi,Bj.prototype.N=function(){return this.S},Bj.prototype.f=function(){this.g.innerHTML=this.l+" "+this.ba()},Bj.prototype.b=function(){this.f(),setTimeout(this.f,5e3)};var Gj={al:"#0F1621",bl:.3,Wk:"#fff",Xk:.6},Fj={al:"#fff",bl:1,Wk:"#0F1621",Xk:.7},Ij="1987&ndash;"+zd(2015,(new Date).getFullYear())+" HERE";function Jj(e,t,r,n){Kj(A((function(e){e?this.wh?r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):r("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((e=this.qf.cloneNode(!0)).firstChild.setAttribute("style","font:"+t),r(bf(e.innerHTML)))}),e),n)}function Kj(e,t){var r="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),n=Ej;vc(n)?e(n):new tf("image",r).then((function(t){Ye.drawImage(t,0,0);try{Ye.getImageData(0,0,1,1),n=!1}catch(r){n=18===r.code}finally{Ej=n,e(n)}}),t)}Bj.prototype.ba=function(){var e,t,r,n=this.a,i=n.pb(),o=n.c.jb().bounds,a=(n=n.a).a.length,s={},l=0,c=[Ij];if(o)for(;l<a;l++)if(t=n.get(l).getCopyrights(o.K(),i))for(e=0;e<t.length;e++)s[r=t[e].label]||(c.push(r),s[r]=1);return c.join(", ")},Bj.prototype.getCopyrights=Bj.prototype.ba,Bj.prototype.V=function(){return this.S.style},Bj.prototype.l=String.fromCharCode(169),Bj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ri,this.f),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.S.parentNode){var e=this.S;e.parentNode.removeChild(e)}},Bj.prototype.disposeInternal=Bj.prototype.o,Bj.prototype.capture=function(e,t,r,n){var i,o=e.getContext("2d"),a=window.getComputedStyle(this.g.parentElement),s=2*Dc(a.paddingLeft,10),l=(this.g.offsetWidth+2*s)*t,c=this.g.offsetHeight*t,u=0!==this.c.innerHTML.length?this.c.offsetWidth*t:0,p=Ec(a.getPropertyValue("font-size")),f=this.S.ownerDocument,h=+e.width,d=+e.height,y=16*t,m=this.qf.childNodes[0].getBoundingClientRect(),v=m.width*t,g=m.height*t,b=ld;Da(n)&&(b=function(){n("capture_error")}),o.fillStyle=a.backgroundColor,o.fillRect(h-l-u,d-c,l+u,c),l=this.c.innerHTML,l=this.l+" "+(i=this.ba(),(i=Cj(f,"div",null,i)).textContent||i.innerText||"")+(l?" "+l:""),o.font=p*t+"px "+a.getPropertyValue("font-family"),o.fillStyle=a.getPropertyValue("color"),o.textBaseline="bottom",o.textAlign="right",o.fillText(l,h-s*t,d),Jj(this,o.font,(function(t){new tf("image",t).then((function(t){o.drawImage(t,y,d-(g+y),v,g),r(e)}),b)}),b)},Bj.prototype.capture=Bj.prototype.capture,Bj.prototype.wh=!1,Bj.prototype.nl=function(e,t){Hj[e]=t},Bj.prototype.addL11NString=Bj.prototype.nl;var Hj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function R(e){var t={};this.f=t.previousSibling=t.nextSibling=t,this.g=new cf,R.j.constructor.call(this,e),e&&"objects"in e&&this.Xb(e.objects)}function Lj(e,t,r){e.ee(r.ma)}function Mj(e){e.Ye()}function Nj(e,t,r){e.ra(r.c)}function Oj(e){this.push(e)}function Pj(e,t){for(var r,n,i=0,o=t.length,a=[];i<o;i++)n=(r=t[i])instanceof R?{type:"GeometryCollection",geometries:Pj(e,r.Ua())}:r instanceof rh||r instanceof sh||r instanceof th||r instanceof uh?r.ga().Kc():{type:"FeatureCollection",features:hf},a.push(n);return a}u(R,M),t("H.map.Group",R),R.prototype.type=nh.GROUP,R.prototype.ee=function(e,t){return this.b=!0,e=R.j.ee.call(this,e,t),this.b=!1,e&&this.forEach(Lj,!0),e},R.prototype.setProvider=R.prototype.ee,R.prototype.contains=function(e){var t=this===e;if(!t&&this.a&&C(e,M))for(;!t&&e;)e===this?t=!0:e=e.Fa;return t},R.prototype.contains=R.prototype.contains,R.prototype.Ye=function(){this.L=B,this.forEach(Mj,!0)},R.prototype.resetZInfo=R.prototype.Ye,R.prototype.b=!1,R.prototype.ra=function(e){var t=R.j.ra.call(this,e);return t&&!this.b&&(this.c=e,this.forEach(Nj,!0),delete this.c),t},R.prototype.invalidate=R.prototype.ra,R.prototype.forEach=function(e,t,r){var n;if(this.a){var i=this.f,o=i.nextSibling;for(n=0;o!==i;){var a=o.nextSibling;e.call(r,o,n++,this),t&&C(o,R)&&o.forEach(e,t,r),o=a}}},R.prototype.forEach=R.prototype.forEach,R.prototype.Ua=function(e){var t=[];return this.forEach(Oj,e,t),t},R.prototype.getObjects=R.prototype.Ua,R.prototype.K=function(){var e=null;return this.a&&this.forEach((function(t){t.K&&(t=t.K())&&(e=e?e.ec(t):t)})),e},R.prototype.getBoundingBox=R.prototype.K,R.prototype.a=0,R.prototype.Rl=function(){return this.a},R.prototype.getChildCount=R.prototype.Rl,R.prototype.fa=function(e){var t=this.f,r=t.previousSibling;if(C(e,M,this.fa,0),e.contains(this))throw new $c(this.fa,"The new object contains the parent group");var n=e.Lf(!0),i=e.Fa;if(i!==this){if(i){i=e.previousSibling;var o=e.nextSibling;i.nextSibling=o,o.previousSibling=i}e.Fa=this,M.j.ka.call(e,this),r.nextSibling=e,e.previousSibling=r,e.nextSibling=t,t.previousSibling=e,this.a++}return e.Di=this.g.next(),e.Ye(),t=e.ee(this.ma,this.fa),e.Lf(!0)!==n&&e.ra(kh.VOLATILITY),t||e.ra(kh.Z_ORDER),e},R.prototype.addObject=R.prototype.fa,R.prototype.Xb=function(e){var t;Bc(e,this.Xb,0);var r=e.length;for(t=0;t<r;t++)this.fa(e[t])},R.prototype.addObjects=R.prototype.Xb,R.prototype.Ga=function(e){if(!e||e.Fa!==this)throw new $c(this.Ga,"object not found");var t=e.previousSibling,r=e.nextSibling;return t.nextSibling=r,r.previousSibling=t,e.Fa=null,M.j.ka.call(e,null),delete e.previousSibling,delete e.nextSibling,C(e.ma,N)&&e.ee(null,this.Ga),this.a--,e},R.prototype.removeObject=R.prototype.Ga,R.prototype.rd=function(e){var t;Bc(e,this.rd,0);var r=e.length;for(t=0;t<r;t++)this.Ga(e[t])},R.prototype.removeObjects=R.prototype.rd,R.prototype.na=function(){var e=this.Ua();this.rd(e)},R.prototype.removeAll=R.prototype.na,R.prototype.Kc=function(e){for(var t,r,n,i=this.Ua(),o=0,a=i.length,s=[];o<a;o++)(n=i[o])instanceof R?(r=qh(this,t=e?e(n.getData()):n.getData(),!!e),(t={type:"Feature"}).properties=r,n.i&&(t.id=n.i),t.geometry={},t.geometry.type="GeometryCollection",t.geometry.geometries=Pj(this,n.Ua()),s.push(t)):s.push(n.Kc(e));return{type:"FeatureCollection",features:s}},R.prototype.toGeoJSON=R.prototype.Kc,R.prototype.Y=function(){var e=R.j.Y.call(this);return e.type="Group",e},R.prototype.forWorkerMessage=R.prototype.Y;var Qj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Rj(e,t,r,n,i){switch(t&&(this.f=t),vc(r)&&(this.c=!!r),this.c&&n&&(this.Lg=new Wi(n.w,n.h)),vc(i)&&(this.g={crossOrigin:i}),Sj[Ac(e)]){case 2:this.a=e,Tj(this,1);break;case 1:if(nf(e)){this.a=e,Uj(this),Tj(this,1);break}e=e.src;case 0:if(e){e=bf(e),this.b=new tf("image",e,B,this.g),this.b.then(A(this.$n,this),A(this.Zn,this));break}default:throw Tj(this,-1),new D(Rj,0,"No image data")}}function Tj(e,t){e.C=t,delete e.b,e.f&&e.f(t,e)}function Uj(e){if(e.c){var t=e.a,r=Vj(e),n=r&&r.w||+t.width,i=r&&r.h||+t.height,o=Ue();if(C(t,x.HTMLCanvasElement))r=t;else{(r=t.ownerDocument.createElement("canvas")).width=Cd(n*o),r.height=Cd(i*o);var a=r.getContext("2d");a.scale(o,o),a.drawImage(t,0,0,n,i),cd&&(a.clearRect(0,0,n,i),a.drawImage(t,0,0,n,i))}e.a=r}}t("H.map.provider.Capabilities",Qj),Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Qj.PROVIDES_SPATIALS|Qj.PROVIDES_OVERLAYS|Qj.PROVIDES_MARKERS,Rj.prototype.C=0,Rj.prototype.getState=function(){return this.C},Rj.prototype.c=!0,Rj.prototype.getData=function(){return this.a||z};var Sj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Vj(e){var t,r=e.Lg;if(!r){var n=e.a;if(0===(r=n.naturalWidth||n.width)&&$e&&1===Sj[Ac(n)]){var i=!0;if(t=n.parentNode)var o=n.nextSibling;document.body.appendChild(n)}e.Lg=r=new Wi(n.naturalWidth||n.width,n.naturalHeight||n.height),i&&(t?t.insertBefore(n,o):document.body.removeChild(n))}return r}function Wj(e,t){var r,n="anonymous";if(this.uid=Xj.next(),Wj.j.constructor.call(this),t){var i="size";if(i in t){var o=t[i];if(!o||isNaN(o.w)||isNaN(o.h))throw new D(Wj,1,i);this.g=new Wi(o.w,o.h)}if((i="anchor")in t){if(!(o=t[i])||isNaN(o.x)||isNaN(o.y))throw new D(Wj,1,i);this.f=new J(o.x,o.y)}(i="hitArea")in t&&(C(o=t[i],Xi,Wj,1),this.c=t[i]),(i="asCanvas")in t&&(r=t[i]),(i="crossOrigin")in t&&(n=t[i]),(o=t.stickHeight)===+o&&0<o&&(this.Fo=o),o=t[i="stickColor"],i in t&&Cc(o)&&(this.Eo=o)}e=new Rj(e,A(this.i,this),r,this.g,n),0!==(t=this.C=e.getState())?this.i(t,e):this.b=e}p=Rj.prototype,p.Lg=z,p.yb=function(){return 1===this.C?Vj(this):z},p.$n=function(e){this.a=e,Uj(this),Tj(this,1)},p.Zn=function(){Tj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()},u(Wj,F),t("H.map.Icon",Wj);var Xj=new cf;function Yj(e,t,r,n,i,o){Yj.j.constructor.call(this,isNaN(e)?15:e,t,r,n,i,o)}function Zj(e,t,r,n,i){var o=t.entries;if(i)if(t.a)o=ak(e,t,r,n,i);else if(o){var a=Eg(t,+((o=o[0])[1]>=t[8])|+(o[0]>=t[9])<<1);a.entries=t.entries,delete t.entries,o.node=a,Bg(e,a),o=ak(e,t,r,n,i)}else Fg(t,o=new bk(r,n)),Bg(e,t),zg(e,o,!0);else o||Bg(e,t),Fg(t,o=new bk(r,n)),zg(e,o,!0);return o}function ak(e,t,r,n,i){return Zj(e,Eg(t,+(r>=t[8])|+(n>=t[9])<<1),r,n,i-1)}function bk(e,t){this.id=Dg++,this[0]=t,this[1]=e}function ck(){this.a=new Yj(10,180,90,0,0,!0)}function dk(e){this.a=e}function ek(e,t,r){this.c=e,this.a=t,this.g=r,this.f=this.c&Qj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function fk(e,t,r,n){this.a=e,this.b=t,this.c=r,this.kf=n}function gk(e,t,r,n){return e={type:t,uid:e.b,tiled:r,max_zoom:e.c},n&&Ya(e,n),e}function hk(e,t,r,n,i){this.a=e,this.b=t,this.c=r,this.f=n,this.kf=i}function ik(e){if(e.a&Qj.PROVIDES_DOM_MARKERS&&!(e.a&Qj.PROVIDES_MARKERS))return{};var t=new fk(e.a,e.b,e.c,e.kf),r=new dk(e.a);e=new ek(e.a,e.b,e.f);var n={},i=t.b;if(t=t.a&Qj.PROVIDES_BY_VIEWPORT?gk(t,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(t.a&Qj.HAS_VOLATILE_DATA)}):t.a&Qj.PROVIDES_RASTERS?gk(t,"RemoteRasterTileSource",!0,{url:""}):gk(t,"ObjectTileSource",!0,{tile_size:t.kf}),n[i]=t,t={},r.a&Qj.PROVIDES_RASTERS&&(t={"translucent-raster":qi("raster","inlay",1)}),r.a&Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){i=!!(r.a&Qj.CROP_LINES_BY_TILE);var o={"translucent-polygons":qi("polygons","inlay",2),"translucent-extruded-polygons":qi("polygons","translucent",3),"translucent-pattern-lines":qi("pattern-lines","translucent",4),"translucent-overlays":qi("overlays","inlay",5),markers:qi("custom_icons","overlay",6,!1)};o["translucent-polygons"].crop_by_tile=!!(r.a&Qj.CROP_POLYGONS_BY_TILE),o["translucent-pattern-lines"].crop_by_tile=i,o.markers.suppress_fade=!0,o.markers.stick=!0,Ya(t,o)}if(e.c&Qj.PROVIDES_RASTERS&&(e.b["tile_layer_"+e.a]=si(e.a,"_default",{"translucent-raster":{color:[1,1,1,e.g],order:0}})),e.c&Qj.PROVIDES_SPATIALS){r={"translucent-pattern-lines":{color:pi("strokeColor"),width:pi("lineWidth * $meters_per_pixel"),join:pi("lineJoin"),cap:pi("lineCap"),tail_cap:pi("lineTailCap"),head_cap:pi("lineHeadCap"),miter_limit:pi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:pi("lineDash"),extrude:!0,dash_phase:pi("lineDashOffset")}},i=e.b,o="polygon_layer_"+e.a;var a=si(e.a,"polygons",void 0,e.f);a.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:ri(!1)},a.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:ri(!0)},i[o]=a,e.b["outline_layer_"+e.a]=si(e.a,"outlines",r,e.f),e.b["polyline_layer_"+e.a]=si(e.a,"polylines",r,e.f)}return e.c&Qj.PROVIDES_OVERLAYS&&(e.b["overlay_layer_"+e.a]=si(e.a,"overlays",{"translucent-overlays":{color:[1,1,1,e.g],order:8190,interactive:!0}})),e.c&Qj.PROVIDES_MARKERS&&(e.b["marker_layer_"+e.a]=si(e.a,"markers",{markers:{sprite:oi("icon.id"),offset:oi("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:oi("icon.stick_color"),height:oi("icon.stick_height")}}},e.f)),{sources:n,styles:t,layers:e.b}}function P(e){var t,r=""+ef();if(P.j.constructor.call(this),e=e||{},this.min=e.min||0,this.max=e.max||22,t=e.uri){if(/_/.test(t))throw new D(P,0,"uri "+t)}else t=r;if(this.uri=t||r,this.uid=r,e.getCopyrights&&zc(e.getCopyrights,"Function",P)&&(this.getCopyrights=e.getCopyrights),this.hb=this.hb.bind(this),this.ta=!0,this.b=e.engineType||jk,this.b===kk.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function lk(e,t){t=ae(t,0,1),E(t)&&(t=1),e.g!==t&&(e.g=t,e.ta&&mk(e),e.hb(),e.Va())}function mk(e){if(e.b===kk.WEBGL){var t=new hk(e.getCapabilities(),e.uid,e.max,e.g,e.tileSize);e.a=new ti(ik(t))}else e.b===kk.HARP&&H.map.render.harp&&(e.a=new H.map.render.harp.Style({}));e.ta=!0}function ok(e){var t;for(t in xc(this,ok),ok.j.constructor.call(this,e),this.wa=e=[],nh)e[nh[t]]=new jh}function N(e){e=e||{},N.j.constructor.call(this,e),this.f=e=new R({min:e.min,max:e.max}),e.ma=this,e.ka(this),e.ra(kh.ADD),this.J=new Lg,this.i=new Lg,this.m=new ck,this.u=new Lg,this.P=new ck,this.T=new Lg}function pk(e,t,r,n,i,o,a){if(a=a||[],t.Rc())for(e=t!==e.m&&t!==e.u,i=!i,r=(t=t.Pf(r,o,o)).length,o=0;o<r;o++){var s,l=t[o].c;if(s=void 0!==n){for(var c=Bd(n),u=l;(s=u.m<=c&&u.s>=c)&&(u=u.Fa););s=!s}s||!i&&!l.wc(!0)||(e||1===l.xb().getState())&&a.push(l)}return a}function qk(e,t,r,n,i){var o=pk(e,e.m,t,r,n,i);return pk(e,e.u,t,r,n,i,o),o}function rk(e,t,r,n,i){var o=pk(e,e.P,t,r,n,i);return pk(e,e.T,t,r,n,i,o),o}function sk(e,t,r){var n,i=r.ga(),o=tk.bind(null,e);e=uk.bind(null,e),C(r,th)?n=C(i,L)?o(i):i.la.some(o):C(r,uh)?n=C(i,O)?e(i):i.la.some(e):C(r,sh)&&(n=e(Ci(i))),n&&t.push(r)}function tk(e,t){e:{var r=t.$,n=Hi(e,t);if(!n){t=t.$.length;for(var i=0;i<t;i+=3)if(Fi(e,r[i],r[i+1])){e=!0;break e}}e=n}return e}function uk(e,t){return Ii(e,t)}function vk(e,t,r){for(var n=e.length;n--;){var i=e[n],o=i.ga();if(C(o,Vi)){for(var a,s=(o=o.la).length;s--;)if(Fi(t,(a=o[s]).lat,a.lng)){r.push(i);break}}else Fi(t,o.lat,o.lng)&&r.push(i)}}Wj.State={ERROR:-1,LOADING:0,READY:1},Wj.prototype.getState=function(){return this.C},Wj.prototype.getState=Wj.prototype.getState,Wj.prototype.i=function(e,t){if(this.a=t.getData(),1===e){var r=this.g;r||(r=this.g=t.yb()),this.f||(this.f=new J(r.w/2|0,r.h))}this.b&&(this.C=e,delete this.b,this.dispatchEvent("statechange"))},Wj.prototype.a=z,Wj.prototype.Qc=function(){return this.a},Wj.prototype.getBitmap=Wj.prototype.Qc,Wj.prototype.yb=function(){return this.g||z},Wj.prototype.getSize=Wj.prototype.yb,Wj.prototype.f=z,Wj.prototype.kd=function(){return this.f},Wj.prototype.getAnchor=Wj.prototype.kd,Wj.prototype.c=z,Wj.prototype.nm=function(){return this.c},Wj.prototype.getHitArea=Wj.prototype.nm,Wj.prototype.o=function(){Wj.j.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)},u(Yj,wg),Yj.prototype.s=function(e){for(var t,r,n=this.head,i=e;i;){if(e=i.entries)if(t=e.length){if(2>t&&(r=i.parent)&&1===r.a){r.removeChild(i),n===i&&(n=r),r.entries=e,i=e[0].node=r;continue}}else if(delete i.entries,(r=i.parent)&&(r.removeChild(i),n===i&&(n=r),1===r.a)){i=r.a?r[0]||r[1]||r[2]||r[3]:null;continue}break}this.head!==n&&(this.head=n,Bg(this))},Yj.prototype.yc=function(e,t){if(Gg(this.a,e,t,e,t))return Zj(this,this.a,e,t,this.c);throw Error("Coordinates out of bounds")},bk.prototype.a=function(e){return this[e%2]},p=ck.prototype,p.Dh=0,p.Rc=function(){return this.Dh},p.Uf=null,p.K=function(){var e,t=this.Uf;return!t&&(e=xg(this.a))&&(this.Uf=t=new K(-e[0],e[3],-e[2],e[1])),t},p.yc=function(e){return++this.Dh,this.Uf=null,this.a.yc(e.lng,-e.lat)},p.remove=function(e){return(e=this.a.remove(e))&&(--this.Dh,this.Uf=null),e},p.Pf=function(e,t,r){var n=this.a,i=e.Nb(),o=e.Jb(),a=-i.lat;i=i.lng;var s=-o.lat;return o=o.lng,e.Bb()?n.Za(-180,a,o,s,r,t).concat(n.Za(i,a,180,s,r,t)):n.Za(i,a,o,s,r,t)},u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={ie:"configchange",za:"update"},p.Va=function(e,t){this.dispatchEvent(new vd(this.A.za,t,e))},p.hb=function(e){e=new cj(this.A.ie,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},p.o=function(){F.prototype.o.call(this),this.a&&(this.a.removeEventListener("change",this.hb),this.a.F(),delete this.a)},p.ba=function(){return null},P.prototype.getCopyrights=P.prototype.ba,P.prototype.getCapabilities=function(){var e=0;return this.di()&&(e|=Qj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(e|=Qj.PROVIDES_RASTERS),this.providesSpatials()&&(e|=Qj.PROVIDES_SPATIALS),this.providesOverlays()&&(e|=Qj.PROVIDES_OVERLAYS),this.providesMarkers()&&(e|=Qj.PROVIDES_MARKERS),this.providesDomMarkers()&&(e|=Qj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(e|=Qj.PROVIDES_GEOJSON),this.providesOMV()&&(e|=Qj.PROVIDES_OMV),e},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.di=gf,P.prototype.Ve=gf,P.prototype.providesRasters=P.prototype.Ve,P.prototype.Cc=gf,P.prototype.providesSpatials=P.prototype.Cc,P.prototype.fi=gf,P.prototype.providesOverlays=P.prototype.fi,P.prototype.Rb=gf,P.prototype.providesMarkers=P.prototype.Rb,P.prototype.Qb=gf,P.prototype.providesDomMarkers=P.prototype.Qb,P.prototype.ei=gf,P.prototype.providesGeoJSON=P.prototype.ei,P.prototype.Sb=gf,P.prototype.providesOMV=P.prototype.Sb,P.prototype.dm=function(){return this.b},P.prototype.getEngineType=P.prototype.dm,P.prototype.wo=function(e){this.b=e},P.prototype.setEngineType=P.prototype.wo,P.prototype.Ue=ld,P.prototype.preprocessData=P.prototype.Ue,P.prototype.g=1,P.prototype.Em=function(){return this.g},P.prototype.getOpacityInternal=P.prototype.Em,P.prototype.Qa=function(e,t){var r=this;if(this.b===kk.WEBGL&&!C(e,ti)||this.b===kk.HARP&&!C(e,H.map.render.harp.Style))throw e=Object.entries(kk).find((function(e){return e[1]===r.b})),new D(this.Qa,0,"Invalid style for engineType "+e);this.a&&(this.a.removeEventListener("change",this.hb),this.a.removeEventListener(Yh,this.hb),this.a.F()),this.a=e,this.a.addEventListener("change",this.hb),this.a.addEventListener(Yh,this.hb),t||this.hb(),this.ta=!1},P.prototype.setStyleInternal=P.prototype.Qa,P.prototype.Ya=function(){return this.a||mk(this),this.a},P.prototype.getStyleInternal=P.prototype.Ya,P.prototype.Ej=function(){var e=this.getCapabilities(),t=nk.FEATURE;return e&Qj.PROVIDES_BY_VIEWPORT?t=nk.SOURCE:e&Qj.PROVIDES_RASTERS?t=null:e&Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(t=nk.PROVIDER),t},P.prototype.getPickingMode=P.prototype.Ej,P.prototype.im=function(){return!1},P.prototype.getFeatureProxy=P.prototype.im,u(ok,P),t("H.map.provider.ObjectProvider",ok),ok.prototype.di=ff,ok.prototype.providesByViewport=ok.prototype.di,ok.prototype.Kb=function(e){return this.wa[e||nh.ANY]},ok.prototype.getInvalidations=ok.prototype.Kb,ok.prototype.Td=function(e,t){if(t!==kh.NONE){var r=this.wa[nh.ANY],n=r.a+1;r.update(n,t),(r=this.wa[e.type]).update(n,t),e.Kb().update(n,t),this.Va(e)}},ok.prototype.invalidateObject=ok.prototype.Td,ok.prototype.requestOverlays=ok.prototype.sd,ok.prototype.requestSpatials=ok.prototype.kg,ok.prototype.requestSpatialsByTile=ok.prototype.mg,ok.prototype.qa=!1,ok.prototype.requestMarkers=ok.prototype.Ec,ok.prototype.requestDomMarkers=ok.prototype.Dc,u(N,ok),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Qj.PROVIDES_BY_VIEWPORT|Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Qj.PROVIDES_DOM_MARKERS|Qj.CROP_LINES_BY_TILE},N.prototype.Ya=function(){if(!this.l&&(this.l=N.j.Ya.call(this),this.l instanceof ti)){var e=new hk(this.getCapabilities()|Qj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.g,this.tileSize);this.l.Oe(ik(e))}return this.l},N.prototype.getStyleInternal=N.prototype.Ya,N.prototype.Qa=function(e,t){N.j.Qa.call(this,e,t),this.l=null},N.prototype.setStyleInternal=N.prototype.Qa,N.prototype.bc=function(){return this.f},N.prototype.getRootGroup=N.prototype.bc,N.prototype.Td=function(e,t){t&kh.SPATIAL&&this.fa(e),N.j.Td.call(this,e,t)},N.prototype.invalidateObject=N.prototype.Td,N.prototype.fa=function(e){var t;if(C(e,M,this.fa,0),e.ma!==this)throw new $c(this.fa,"foreign object");this.Ga(e);var r=e.type;if(r===nh.MARKER)if((t=e.ga())instanceof kg){var n=!0;r=this.m}else r=this.u;else r===nh.DOM_MARKER?(t=e.ga())instanceof kg?(n=!0,r=this.P):r=this.T:r=r===nh.OVERLAY?this.J:this.i;(n=n?r.yc(t):r.Pj(e.K())).c=e,e.qa=n},N.prototype.Ga=function(e){var t;if(e)if(e.ma!==this){if(C(e,M))throw new $c(this.Ga,"foreign object")}else if(t=e.qa){var r=e.type;r===nh.MARKER?this.m.remove(t)||this.u.remove(t):r===nh.DOM_MARKER?this.P.remove(t)||this.T.remove(t):r===nh.OVERLAY?this.J.remove(t):this.i.remove(t),delete t.c,delete e.qa}},N.prototype.removeObject=N.prototype.Ga,N.prototype.fi=function(){return 0<this.J.Rc()},N.prototype.providesOverlays=N.prototype.fi,N.prototype.sd=function(e,t,r){return pk(this,this.J,e,t,r,!1).filter((function(e){return e.Qc()}))},N.prototype.requestOverlays=N.prototype.sd,N.prototype.Cc=function(){return 0<this.i.Rc()},N.prototype.providesSpatials=N.prototype.Cc,N.prototype.kg=function(e,t,r){return pk(this,this.i,e,t,r,!1)},N.prototype.requestSpatials=N.prototype.kg,N.prototype.mg=function(e,t){return pk(this,this.i,e.Hf(),e.zL,t,!1)},N.prototype.requestSpatialsByTile=N.prototype.mg,N.prototype.Rb=function(){return 0<this.m.Rc()+this.u.Rc()},N.prototype.providesMarkers=N.prototype.Rb,N.prototype.Ec=function(e,t,r){return qk(this,e,t,r,!1)},N.prototype.requestMarkers=N.prototype.Ec,N.prototype.Qb=function(){return 0<this.P.Rc()+this.T.Rc()},N.prototype.providesDomMarkers=N.prototype.Qb,N.prototype.Dc=function(e,t,r){return rk(this,e,t,r,!1)},N.prototype.requestDomMarkers=N.prototype.Dc,N.prototype.Ua=function(e,t,r,n,i){var o=this,a=e.K(),s=[],l=Zb(),c=1;if(a)for(;c&nh.ANY;){if(c&n)switch(c){case nh.MARKER:l=l.then((function(){return qk(o,a,r,t,!0)})).then((function(t){return vk(t,e,s)}));break;case nh.DOM_MARKER:l=l.then((function(){return rk(o,a,r,t,!0)})).then((function(t){return vk(t,e,s)}));break;case nh.SPATIAL:l=l.then((function(){return pk(o,o.i,a,r,t,!0)})).then((function(t){t.forEach(sk.bind(null,e,s))}));break;case nh.OVERLAY:l=l.then((function(){return pk(o,o.J,a,r,t,!0)})).then((function(t){t.forEach(sk.bind(null,e,s))}))}c<<=1}l.then((function(){return i(s)}))},N.prototype.ld=function(e,t,r){var n=(r=r||jf).zoom,i=r.visiblesOnly;r=r.types;var o=nh.ANY;C(e,O,this.ld,0,"area"),zc(t,"Function",this.ld,1,"callback"),zc(n,"Number",this.ld,2,"options"),this.Ua(e,!vc(i)||!!i,n,vc(r)?r&o:o,t)},N.prototype.getObjectsWithin=N.prototype.ld,N.prototype.o=function(){N.j.o.call(this),this.f.na()};var wk={PENDING:0,ACTIVE:1,DONE:2};function xk(e,t){var r;if(t=t||{},!C(e,Element))throw new D(xk,0,e);var n=e.ownerDocument.createElement("div");this.S=e,xk.j.constructor.call(this),this.padding=new yk(0,0,0,0),this.center=new J(0,0),this.margin=0,this.element=n,n.style.zIndex=0,n.style.height=n.style.width="100%",n.style.direction="ltr",n.style.position="relative"===e.style.position?"absolute":"relative",this.resize(),e.appendChild(n),(r=t.padding)!==B&&this.wi(r.top,r.right,r.bottom,r.left),this.ri((r=t.margin)!==B?r:0)}function zk(e){var t=e.padding;e.center.set((e.width+t.left-t.right)/2<<0,(e.height+t.top-t.bottom)/2<<0)}function Ak(e,t,r,n,i,o){var a;for(a=[];n<=i;n++)a=a.concat(Bk(e,r,n));for(e=a.length,xj.call(this,o,e),this.l=r=[],this.f=A(this.f,this),this.c=A(this.c,this),this.O(1);e--;)o=a[e],r.push(Ck(t,o[0],o[1],o[2],this.f,this.c))}function Dk(e,t){var r=this;if(!Da(t))throw new D(Ek,1,t);if(!Da(e.next||Da(e.cycle)))throw new D(Dk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=e,this.i=t,this.l=function(){Fk(r)},this.a=null,this.f=function(){r.a||(r.a=x.setTimeout(r.l,1))}}function Fk(e){var t=e.c,r=0,n=e.g;for(n.a(),e.a=null;r<t.length;){var i=t[r];i.Tj?t.splice(r,1):r++}for(;i=n.next(e.b,e.c);)i.cancelled?i.done(null,"cancelled"):(t.push(i),e.i(i,i.data))}function Hk(){Gk(this,null,null,null)}function Gk(e,t,r,n){return e.data=t,e.cancelled=!1,e.Tj=!1,e.b=r,e.c=n,e.a=null,e}function Ik(){}t("H.map.render.RenderState",wk),u(xk,F),t("H.map.ViewPort",xk),xk.prototype.A={za:"update",le:"sync"},xk.prototype.ri=function(e){if(this.margin!==+e){if(E(this.margin=+e))throw new D(this.ri,0,e);zk(this),this.dispatchEvent(this.A.za)}},xk.prototype.setMargin=xk.prototype.ri,xk.prototype.wi=function(e,t,r,n){var i=this.padding;if(i.top!==e||i.right!==t||i.bottom!==r||i.left!==n){if(E(e+t+r+n))throw new D(this.wi);i.top=e,i.right=t,i.bottom=r,i.left=n,zk(this),this.dispatchEvent(this.A.za)}},xk.prototype.setPadding=xk.prototype.wi,xk.prototype.resize=function(){var e=this.S.offsetWidth,t=this.S.offsetHeight;this.width===e&&this.height===t||(this.a=new Wi(this.width,this.height),this.width=e,this.height=t,zk(this),this.dispatchEvent(this.A.za))},xk.prototype.resize=xk.prototype.resize,xk.prototype.$a=function(e){this.dispatchEvent(new dj(this.A.le,this.a,e,ej.SIZE))},xk.prototype.synchronize=xk.prototype.$a,xk.prototype.o=function(){this.S.removeChild(this.element),delete this.S,delete this.element,xk.j.o.call(this)},xk.prototype.lc=Qc,xk.prototype.startInteraction=xk.prototype.lc,xk.prototype.cc=Qc,xk.prototype.interaction=xk.prototype.cc,xk.prototype.wb=Qc,xk.prototype.endInteraction=xk.prototype.wb,u(Ak,xj),Ak.prototype.f=function(){zj(this,2)},Ak.prototype.c=function(){zj(this,4)},Ak.prototype.oe=function(){for(var e=this.l,t=e.length;t--;)e[t].cancel();delete this.l},t("H.util.AsyncQueue",Dk),Dk.prototype.push=function(e,t){if(!Da(t))throw new D(this.push,1,t);return e=Gk(new Hk,e,this.f,t),this.b.push(e),this.f(),e},Dk.prototype.push=Dk.prototype.push,Dk.Task=Hk,Hk.prototype.done=function(e,t){this.Tj=!0,this.b(),this.c(this,e,t)},Hk.prototype.done=Hk.prototype.done,Hk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Hk.prototype.cancel=Hk.prototype.cancel,Hk.prototype.vo=function(e){return this.a=e,this},Hk.prototype.setCancelFn=Hk.prototype.vo,Dk.Mode=Ik,Ik.prototype.next=function(){},Ik.prototype.a=function(){};var Jk,Kk=function(){function e(){}for(var t,r,n,i=tc("o ms moz webkit "),o=5;o--&&!t;)t=i[o],t=(r=x[t+(t?"R":"r")+"equestAnimationFrame"])&&!E(r.call(window,e))&&(n=x[t+(t?"C":"c")+"ancelAnimationFrame"]);return Jk=t?function(e){return r.call(x,e)}:function(e){return x.setTimeout(e,25)},t?function(e){return n.call(x,e)}:function(e){return x.clearTimeout(e)}}(),Lk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Mk(e,t){Mk.j.constructor.call(this,new Nk(e),t)}function Nk(e){if(isNaN(e)||0>e)throw new D(Mk,1,'Argument "maxTime" must be a positive number');this.c=e,this.b=Lk()}function Ok(e){if(xc(this,Ok),Ok.j.constructor.call(this,e),e&&"tileSize"in e){var t=Ed(+e.tileSize)/Od;if(isNaN(t)||t%1||0>t||30<t)throw new D(Ok,0,"tileSize: "+e.tileSize);this.tileSize=+e.tileSize}}function Pk(e,t){return Yd(e)-8-Ad(Yd(t))}function Qk(){}function Rk(e,t,r){if(this.g=[],t&&this.$d(t),r&&!Da(r))throw new D(Rk,2,r);this.b=0,this.filter=r,this.a={},this.f=this.c=null,this.ti(e)}function Tk(e,t){return t&&(e.c=Uk(e,t,e.c)),t}function Vk(e){for(;e.b>e.i&&e.f;)Wk(e,e.f,!0)}function Uk(e,t,r){return r!==t&&((t.fc||t.Zc)&&Wk(e,t,!1),(t.fc=r)&&(t.Zc=r.Zc,r.Zc=t),t.Zc||(e.c=t),t.fc||(e.f=t),e.b+=t.size),t}function Wk(e,t,r){var n=t.Zc,i=t.fc;(n||i||t==e.c&&t==e.f)&&(n?n.fc=i:e.c=i,i?i.Zc=n:e.f=n,e.b-=t.size,r&&(delete e.a[t.id],Sk(e,t))),t.fc=t.Zc=null}function Sk(e,t){for(var r=e.g.length;r--;)e.g[r].call(e,t.id,t.data,t.size)}function Xk(e,t,r,n){this.key="",this.x=e,this.y=t,this.z=r,this.data=n,this.valid=!0}function Yk(e,t,r,n){return(e-=r)*e+(t-=n)*t}function Zk(e,t,r){return $k(e,t*t,r||0,0,e.length-1)}function $k(e,t,r,n,i){var o=0,a=n,s=e[n].x,l=e[n].y,c=e[i].x,u=e[i].y,p=n+1,f=Yk(s,l,c,u);if(f)for(;p<i;){var h=e[p++],d=h.x,y=((d-s)*(c-s)+((h=h.y)-l)*(u-l))/f;(d=0>y?Yk(d,h,s,l):1<y?Yk(d,h,c,u):Yk(d,h,s+y*(c-s),l+y*(u-l)))>o&&(o=d,a=p-1)}else for(;p<i;)(d=Yk(d=(h=e[p++]).x,h=h.y,s,l))>o&&(o=d,a=p-1);return o>=t||0<r&&a-n?(--r,1<a-n?(n=$k(e,t,r,n,a)).splice(n.length-1,1):n=[e[n]],n=1<i-a?n.concat($k(e,t,r,a,i)):n.concat(e.slice(a,i+1))):n=[e[n],e[i]],n}function al(e,t,r,n,i,o,a,s){al.j.constructor.call(this,t,r,n,null),this.key=e,this.U=s,this.a=i,this.g=o,this.i={},this.zL=a,this.m=Cd(wh.MAX_LINE_WIDTH/2*this.g+1)}function bl(e){return e.U.getInvalidations(nh.SPATIAL)}function cl(e){var t,r=bl(e),n=r.a,i=e.c,o=i===n;if(!(o||r.Rj(i)||r.yh(i))){o=e.f;var a=e.i;if(r.Sf(i))for(t=o.length;t--;){var s=o[t];if(s.Kb().Sf(i)){o.splice(t,1);var l=l||dl(e,s.cb())}}if(r.zh(i)){for(t=o.length;t--;)if((s=o[t]).Kb().zh(i)){var c=1;if((s=a[s.cb()])&&s.a){l=1;break}}c&&o.sort(el)}if(!l&&r.Vd(i))for(t=o.length;t--;)if(o[t].Kb().Vd(i)){var u=1;break}e.u!==i||u||(e.u=n,e.b!==i||l||(e.b=n)),e.c=n,o=!0}return o}function fl(e,t){this.b=e,this.a=t}function dl(e,t){var r=(e=e.i)[t];if(r)return delete e[t],r.a}function gl(e){var t,r=bl(e),n=e.c,i=e.f;if(!cl(e)){for(t=i.length;t--;){var o=i[t],a=o.Kb();(a.Sf(n)||a.yh(n))&&dl(e,o.cb())}e.f=e.U.requestSpatialsByTile(e,!1,!1).sort(el),e.c=r.a}}function el(e,t){return oh(e.Uc(),t.Uc(),!1)}u(Mk,Dk),t("H.util.SequentialQueue",Mk),Nk.prototype.next=function(e){return e.length&&Lk()-this.b<this.c?e=e.shift():null},Nk.prototype.a=function(){this.b=Lk()},u(Ok,P),t("H.map.provider.TileProvider",Ok),Ok.getZoomLevelOffset=Pk,Ok.prototype.requestTile=Ok.prototype.Ha,Ok.prototype.cancelTile=Ok.prototype.mc,Ok.prototype.cancelTileByKey=Ok.prototype.pe,Ok.prototype.createTileInternal=Ok.prototype.ac,Ok.prototype.uc=function(e,t,r){return this.uri.concat("_",e,"_",t,"_",r)},Ok.prototype.getTileKey=Ok.prototype.uc,Ok.prototype.kf=256,Ok.prototype.tileSize=Ok.prototype.kf,t("H.util.ICache",Qk),Qk.prototype.add=function(){},Qk.prototype.add=Qk.prototype.add,Qk.prototype.get=function(){},Qk.prototype.get=Qk.prototype.get,Qk.prototype.zf=function(){},Qk.prototype.drop=Qk.prototype.zf,Qk.prototype.forEach=function(){},Qk.prototype.forEach=Qk.prototype.forEach,Qk.prototype.na=function(){},Qk.prototype.removeAll=Qk.prototype.na,Qk.prototype.$d=function(){},Qk.prototype.registerOnDrop=Qk.prototype.$d,Qk.prototype.Ug=function(){},Qk.prototype.deRegisterOnDrop=Qk.prototype.Ug,t("H.util.Cache",Rk),Rk.prototype.add=function(e,t,r){var n,i;if(!Fc(r=+r)||0>r)throw new D(this.add,2,r);return e=String(e),(i=!this.filter||this.filter(e,t,r))&&((n=this.a[e])?(n.data!==t&&Sk(this,n),this.b+=r-n.size,n.size=r,n.data=t,Tk(this,n)):this.a[e]=Uk(this,{id:e,data:t,size:r,fc:null,Zc:null},this.c),Vk(this)),i},Rk.prototype.add=Rk.prototype.add,Rk.prototype.$d=function(e){if(!Da(e))throw new D(this.$d,0,e);this.g.push(e)},Rk.prototype.registerOnDrop=Rk.prototype.$d,Rk.prototype.Ug=function(e){this.g=this.g.filter((function(t){return t!==e}))},Rk.prototype.deRegisterOnDrop=Rk.prototype.Ug,Rk.prototype.get=function(e,t){return(e=t?this.a[e]:Tk(this,this.a[e]))&&e.data},Rk.prototype.get=Rk.prototype.get,Rk.prototype.zf=function(e){var t;(t=this.a[e])&&Wk(this,t,!0)},Rk.prototype.drop=Rk.prototype.zf,Rk.prototype.forEach=function(e,t,r){var n;for(n in this.a){var i=this.a[n];(!r||r(n,i.data,i.size))&&e.call(t,n,i.data,i.size)}},Rk.prototype.forEach=Rk.prototype.forEach,Rk.prototype.na=function(e){var t;for(t in this.a){var r=this.a[t];(!e||e(t,r.data,r.size))&&Wk(this,this.a[t],!0)}},Rk.prototype.removeAll=Rk.prototype.na,Rk.prototype.ti=function(e){if(!(0<+e))throw new D(Rk.prototype.ti,0,e);return this.i=+e,Vk(this),this},Rk.prototype.setMaxSize=Rk.prototype.ti,Rk.prototype.Cm=function(){return this.i},Rk.prototype.getMaxSize=Rk.prototype.Cm,Rk.prototype.Xl=function(){return this.b},Rk.prototype.getCurrentSize=Rk.prototype.Xl,t("H.map.provider.Tile",Xk),t("H.math.simplifyDP",Zk),u(al,Xk),t("H.map.provider.SpatialTile",al),al.prototype.c=Xd,al.prototype.u=Xd,al.prototype.b=Xd,al.prototype.Ud=function(){var e=bl(this),t=e.a,r=this.b,n=r===t;return n||(this.U.qa&&!e.Vd(r)?n=!0:cl(this)&&(n=this.b===t)),n},al.prototype.isCanvasValid=al.prototype.Ud,Object.defineProperty(al.prototype,"valid",{get:function(){return this.Ud()},set:ld,configurable:!0}),al.prototype.f=hf,al.prototype.Ua=function(){return this.f},al.prototype.getObjects=al.prototype.Ua,al.prototype.$m=function(){return this.a},al.prototype.getTileSize=al.prototype.$m;var hl={};function jl(e,t,r,n,i,o,a,s,l){var c=e.a,u=-a;if(a=o+a,s=s||0,l===B&&(l=c.length),i&&e===Jh)t.fillRect(0,0,o,o);else if(l>s){for(t.beginPath(),o=s;o<l;o++){var p=c[o],f=p.length;if(p===Qh)t.moveTo(u,u),t.lineTo(u,a),t.lineTo(a,a),t.lineTo(a,u);else{var h=p[0];for(t.moveTo(h.x,h.y),s=1;s<f;s++)h=p[s],t.lineTo(h.x,h.y)}r&&t.closePath()}r&&i&&t.fill(e.b!==Wd?"evenodd":"nonzero"),n&&t.stroke()}}function il(e,t,r){var n;e.strokeStyle=t.strokeColor,e.lineWidth=t.lineWidth*r,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.setLineDash&&(n=t.lineDash)!==hf&&(e.setLineDash(n),e.lineDashOffset=t.lineDashOffset)}function kl(e,t){e.fillStyle=t.fillColor}function ll(e,t,r,n,i,o){var a=i*n.width/2,s=(i=i*n.length/2)/2;n=2*i*n.frequency;var l=Fd(Gd(i,2)+Gd(a,2));e=new yk(l,l,e=e.a-l,e),r=r.a;var c,u,p,f,h,d,y,m=Pd/2;for(o=o||0,l=r.length;l-- >o;){var v=0,g=r[l];if(u=c=g.length){var b=g;for(u=b.length,p=0;--u;)p+=b[u].Wa(b[u-1]);u=(b=p)>=n}if(u)for(p=(u=b/((u=yd(Bd(b/n),1e3))+1))/2;--c;){for(f=(h=g[c]).Wa(d=g[c-1]);p<=v+f;){var _=h.x+(d.x-h.x)*(y=(p-v)/f);y=h.y+(d.y-h.y)*y,e.vf(_,y)&&(t.save(),t.translate(_,y),t.rotate(-Md((d.y-h.y)/(h.x-d.x))+(h.x<d.x?m:-m)),t.beginPath(),t.moveTo(-a,-i),t.lineTo(0,i),t.lineTo(a,-i),t.lineTo(0,-s),t.closePath(),t.fill(),t.restore()),p+=u}v+=f}}}al.prototype.Le=function(){var e=this.a+"_"+this.g,t=hl[e];if(!t){t=-this.m;var r=this.a-t;t=hl[e]=new yk(t,t,r,r)}return t},al.prototype.getPxClipRect=al.prototype.Le,al.prototype.Hf=function(){var e=this.mb;if(!e){var t=this.Jf();e=0;var r=this.a;this.z&&(r-=e+=this.Le().top),e=this.mb=sg(t.Re(new J(e,e)),t.Re(new J(r,r)))}return e},al.prototype.getGeoClipRect=al.prototype.Hf,al.prototype.Jf=function(){var e=this.J;if(!e){var t=this.a;(e=this.J=new nj(B,t)).Oa(this.z),e.x=this.x*t,e.y=this.y*t}return e},al.prototype.getPxProj=al.prototype.Jf,al.prototype.Xa=function(){return this.g},al.prototype.getPixelRatio=al.prototype.Xa,al.prototype.gg=function(){var e=this.data;return e&&(this.data=null,this.b=Xd),e},al.prototype.releaseCanvas=al.prototype.gg,al.prototype.hg=function(){this.i={},delete this.f,this.c=Xd},al.prototype.releaseData=al.prototype.hg,al.prototype.W=function(e){var t,r,n,i,o=e.getContext("2d"),a=0;if(gl(this),this.b<this.c){var s=this.f;if(t=s.length){e.width=e.height=this.a,o.clearRect(0,0,this.a,this.a);var l=this.i;for(r=0;r<t;r++){var c=s[r],u=c.cb();if(i=(n=l[u])?n.b:c.getGeometriesForTile(this)){if(n)c.Kb().Vd(this.b)&&(n.a=Ih(c,i)),n=n.a;else{var p;n=Ih(c,i);for(var f=i,h=c.g?2:0,d=f.length;d--;){var y=f[d];if(y!==Jh){var m=y.a;for(p=m.length;p--;)4<(y=m[p]).length&&(m[p]=Zk(y,.6,h))}}this.i[u]=new fl(i,n)}if(n){for(o.save(),f=c.g?this.D:this.P,u=0;u<i.length;u++)f.call(this,c,i[u],c.V(),o);if(i=c.getLabels(this))for(c=o,u=i.length;u--;)for(f=(h=i[u]).size,c.font=f+"px "+h.font,c.fillStyle=h.color,c.textAlign="center",c.translate(h.x,h.y),c.rotate(h.angle),f=h.lineHeight||1.375*f,h=(d=h.lines).length;h--;)c.fillText(d[h],0,h*f);o.restore()}a|=+n}}}this.data=a?e:null,this.u=this.b=this.c}else this.data&&(a=1);return 0<a},al.prototype.render=al.prototype.W,al.prototype.data=null,al.prototype.P=function(e,t,r,n){var i;r.b&&(il(n,r,this.g),jl(t,n,!1,!0,!1,this.a,this.m)),r.a&&(i=e.c)&&i.Ob&&(kl(n,i),ll(this,n,t,i,r.lineWidth))},al.prototype.D=function(e,t,r,n){var i,o=r.Ob,a=r.b,s=this.a,l=this.m;if(t===Jh)o&&(kl(n,r),n.fillRect(0,0,s,s));else{if(a&&il(n,r,this.g),r.a&&(i=e.c)){var c=r.lineWidth;i.Ob||(i=null)}(e=t.c)===Wd?((a||o)&&(kl(n,r),jl(t,n,!0,a,o,s,this.m)),i&&(kl(n,i),ll(this,n,t,i,c,0))):(o&&(kl(n,r),jl(t,n,!0,!1,o,s,l,0,e)),a&&jl(t,n,!1,a,!1,s,l,e),i&&(kl(n,i),ll(this,n,t,i,c,e)))}};var ml=[];function nl(e,t){var r;nl.j.constructor.call(this,t),this.D=e,this.P=e=t.pixelRatio,this.tileSize=r=1<<Ad(Yd((t.tileSize||256)*e)),this.L=Pk(r,e),this.Gh=A(this.Gh,this),this.Wh=A(this.Wh,this),this.Hh=A(this.Hh,this),this.Fh=A(this.Fh,this),this.m=A(this.m,this),this.D.addEventListener(P.prototype.A.za,this.m,!1,this),this.f=[],this.i=new Rk(t.tileCacheSize||256,this.Gh),this.l=new Rk(t.dataCacheSize||512,this.Wh),this.J=new Mk(20,this.Hh),this.c={},this.u=Lk()}function yk(e,t,r,n){this.left=+e,this.top=+t,this.right=+r,this.bottom=+n}function ol(e,t){return new yk(e.x,e.y,t.x,t.y)}function pl(e,t){if(t=t||{},!e)throw new D(pl,0,e);this.tileSize=e.tileSize,this.a={},qj.call(this,{min:void 0!==t.min?t.min:e.min,max:void 0!==t.max?t.max:e.max,minWorldSize:this.tileSize,projection:t.eg,dark:t.dark,provider:e})}function ql(e,t,r,n,i){n=Bd(n);var o=Gd(2,n),a=t.left,s=t.top,l=t.right;r=l+(r?o+(l===t.left?0:1):1);var c=t.bottom,u=[];if(i)var p=a+(1+l-a)/2+i.x/e.tileSize-.5,f=s+(1+c-s)/2+i.y/e.tileSize-.5;for(;a<r;){for(s=t.top;s<=c;)e=a%o,u.push([e,s,n,i?Dd(p-a)+Dd(f-s):0]),s++;a++}return u}function Bk(e,t,r){r=Bd(r),e.pixelProjection.Oa(r),t=e.Ae(t);var n=e.Sd(t,r);return ql(e,n,t.left>t.right,r)}function rl(e,t){return t[3]-e[3]}function sl(e,t){pl.call(this,e,t)}function tl(e,t){(t=t?Wa(t):{}).tileSize=t.tileSize||256,t.pixelRatio=t.pixelRatio||Ue(),t.max=24,this.a=new nl(e,t),this.b=new sl(this.a),t.minWorldSize=this.a.tileSize,t.provider=e,tl.j.constructor.call(this,t),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.za,this.c),e.addEventListener(e.A.za,this.c)}al.prototype.Ea=function(e,t,r){for(var n,i,o,a,s,l,c,u=this.f,p=u.length,f=hf,h=this.g;p--;)if((i=u[p]).wc(!0)&&(o=this.i[i.cb()])&&(a=o.b)){for(l="none"!==(n=i.V()).fillColor&&i.g,c="none"===n.strokeColor?0:n.lineWidth*h,n=a.length;n--;){var d;if(s=a[n],!(d=l&&s===Jh)&&(d=l||c)){var y;d=e;var m=t,v=l,g=c,b=s.b,_=s.c,w=_!==Wd,x=s.a,E=x.length,S=0,k=0,T=!1;for(s=0;s<E;s++){var O=x[s],A=s>=_,P=!A&&s>=b;if(O===Qh&&v)P?S++:k++;else{var C=O.length;for(ml.length=2*C,y=0;y<C;y++){var N=O[y];ml[2*y]=N.x,ml[2*y+1]=N.y}if(y=v&&!A,A=w&&!A?0:g,y||A){if((A=ee(d,m,ml,A,y))===de.EDGE||A===de.VERTEX){T=!0;break}if(A===de.SURFACE)if(P)S++;else if(k++,b===Wd)break}}}d=T||0<k&&!(S%2)}if(d){f===hf&&(f=[]),f.push(i);break}}if(r&&f.length)break}return f},u(nl,Ok),nl.prototype.m=function(e){(e=e.target).type===nh.SPATIAL&&this.Va(e)},nl.prototype.Ha=function(e,t,r,n){var i,o=this.getTileKey(e,t,r);if(i=this.i.get(o,n)){if(n||i.Ud())return i;n||this.i.zf(o)}if((i=this.l.get(o,n))&&(n||cl(i)))return e=this.f.pop()||document.createElement("canvas"),i.W(e)||this.f.push(e),this.i.add(o,i,1),i;n||((i=this.c[o])?i.count++:((i=this.J.push([o,e,t,r],this.Fh)).count=1,this.c[o]=i))},nl.prototype.requestTile=nl.prototype.Ha,nl.prototype.ac=function(){},nl.prototype.createTileInternal=nl.prototype.ac,nl.prototype.mc=function(e,t,r){this.pe(this.getTileKey(e,t,r))},nl.prototype.cancelTile=nl.prototype.mc,nl.prototype.pe=function(e){var t;(t=this.c[e])&&(t.count--,t.count||(t.cancel(),delete this.c[e]))},nl.prototype.cancelTileByKey=nl.prototype.pe,p=nl.prototype,p.Hh=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3];n=(r=this.i.get(r)||new al(r,n,i,o,this.tileSize,this.P,o+this.L,this.D)).data||this.f.pop()||document.createElement("canvas"),r.W(n)||this.f.push(n),t.push(r),e.done(r)},p.Fh=function(e,t){e=e.data[0],t&&this.i.add(e,t,1),delete this.c[e],this.Va()},p.Gh=function(e,t){t.data&&this.f.push(t.gg()),this.l.add(e,t,1)},p.Wh=function(e,t){t.hg()},p.o=function(){for(var e in this.c)this.c[e].cancel();this.i.na(),this.l.na(),this.f.length=0,nl.j.o.call(this)},t("H.math.Rect",yk),yk.prototype.set=yk,yk.prototype.set=yk.prototype.set,yk.prototype.Nb=function(){return this.b||(this.b=new J(this.left,this.top))},yk.prototype.getTopLeft=yk.prototype.Nb,yk.prototype.Jb=function(){return this.a||(this.a=new J(this.right,this.bottom))},yk.prototype.getBottomRight=yk.prototype.Jb,yk.prototype.vf=function(e,t){return this.left<=e&&this.right>=e&&this.top<=t&&this.bottom>=t},yk.prototype.containsXY=yk.prototype.vf,yk.fromPoints=ol,yk.prototype.clone=function(){return new yk(this.left,this.top,this.right,this.bottom)},yk.prototype.clone=yk.prototype.clone,u(pl,qj),t("H.map.layer.BaseTileLayer",pl),pl.prototype.Ae=function(e,t){var r=this.pixelProjection;if(!C(e,K))throw new D(this.Ae,0,e);if(!E(t)){var n=r.Jj();r.Oa(t)}return e=ol(r.ib(e.Nb()),r.ib(e.Jb())),!E(n)&&r.Oa(n),e},pl.prototype.geoRectToRect=pl.prototype.Ae,pl.prototype.Sd=function(e,t){var r=Gd(2,Bd(t)),n=this.tileSize;if(!C(e,yk))throw new D(this.Sd,0,e);if(E(t=+t))throw new D(this.Sd,1,t);(t=Bd(e.left/n))===r&&--t;var i=Bd(e.right/n);return i===r&&--i,new yk(t,ae(Bd(e.top/n),0,r-1),i,ae(Bd(e.bottom/n),0,r-1))},pl.prototype.getTileBounds=pl.prototype.Sd,pl.prototype.Ha=function(e,t,r,n){return this.ma.requestTile(e,t,r,n)},pl.prototype.requestTile=pl.prototype.Ha,pl.prototype.mc=function(e,t,r){this.ma.cancelTile(e,t,r)},pl.prototype.cancelTile=pl.prototype.mc,pl.prototype.ba=function(e,t){return this.ma.getCopyrights?this.ma.getCopyrights(e,t):null},pl.prototype.getCopyrights=pl.prototype.ba,pl.prototype.Ke=function(e,t,r,n,i,o){var a,s,l=[],c=this.ma;o=null!=o?o:"__default__";var u=c.requestTile;if(!C(e,yk))throw new D(this.Ke,0,e);if(E(r=+r))throw new D(this.Ke,1,r);if(n||(a={}),e=(t=ql(this,e,t,r,i)).length)for(n||t.sort(rl),r=e;r--;)i=t[r],n||(a[c.uc.apply(c,i)]=!0),i[3]=+n,(s=u.apply(c,i))&&l.push(s);if(!n){var p;for(p in n=a,a=this.a[o]||{})a.hasOwnProperty(p)&&a[p]&&!n[p]&&this.ma.cancelTileByKey(p);this.a[o]=n}return{total:e,tiles:l}},pl.prototype.getProviderTiles=pl.prototype.Ke,u(sl,pl),t("H.map.layer.TileLayer",sl),sl.prototype.td=function(e,t,r,n,i){if(!C(e,K))throw new D(this.td,0,e);if(E(t=+t))throw new D(this.td,1,t);t=Bd(t),this.pixelProjection.Oa(t),e=this.Ae(e);var o=this.Sd(e,t);return this.Ke(o,e.left>e.right,t,r,n,i)},sl.prototype.requestTiles=sl.prototype.td,u(tl,qj),t("H.map.layer.ObjectLayer",tl),tl.prototype.c=function(e){e.currentTarget!==this.a&&e.target.type===nh.SPATIAL||this.Va()};var ul={markers:hf,total:0};tl.prototype.Ec=function(e,t,r){var n,i=this.ma;return i.providesMarkers()&&(n=i.requestMarkers(e,t,!0,r)).length?{markers:n,total:n.length}:ul},tl.prototype.requestMarkers=tl.prototype.Ec,tl.prototype.Dc=function(e,t,r){var n,i=this.ma;return i.providesDomMarkers()&&(n=i.requestDomMarkers(e,t,!0,r)).length?{markers:n,total:n.length}:ul},tl.prototype.requestDomMarkers=tl.prototype.Dc;var vl={tiles:hf,total:0};tl.prototype.td=function(e,t,r,n){if(this.ma.providesSpatials()){var i=this.b.td(e,t,r,n);r||(r=this.a,33<(i=Lk())-r.u&&(Fk(r.J),r.u=i),i=this.b.td(e,t,!0,n))}else i=vl;return i},tl.prototype.requestTiles=tl.prototype.td,tl.prototype.Ha=function(e,t,r,n){return this.b.Ha(e,t,r,n)},tl.prototype.requestTile=tl.prototype.Ha,tl.prototype.mc=function(e,t,r){this.b.mc(e,t,r)},tl.prototype.cancelTile=tl.prototype.mc;var wl={overlays:hf,total:0};function S(e){xc(this,S),S.j.constructor.call(this,e),this.sb=new xl,this.ub=A(this.ub,this),this.P=yl,this.createTileInternal=this.ac.bind(this)}tl.prototype.sd=function(e,t,r){var n=this.ma,i=wl;return n.providesOverlays&&n.providesOverlays()&&(t=(e=n.requestOverlays(e,t,!0,r)).length)&&(i={overlays:e,total:t}),i},tl.prototype.requestOverlays=tl.prototype.sd,tl.prototype.o=function(){this.a.F(),this.b.F(),this.ma.dispose(),tl.j.o.call(this)},u(S,Ok),t("H.map.provider.RemoteTileProvider",S),S.prototype.em=function(){return 1},S.prototype.getEntryWeight=S.prototype.em;var yl,zl=screen.width,Al=screen.height,Bl=Ue();Bl=zd(Bl,1);var Cl=Cd(zl*Bl*Al*Bl/1e6);yl=new Rk(Gd(2,zd(8,yd(12,7+Cl))));var Dl={},El={};function Ck(e,t,r,n,i,o){return n=~~n,e.requestInternal(t,r,n,(function(a,s){e.c().put(e.uc(t,r,n),{raw:s&&s.raw||a,timestamp:x.Date.now()},i,o)}),o,0)}function Gl(e){delete Dl[e],delete El[e]}function Fl(e){for(var t in Dl)e.ub(t)&&e.cancelTileByKey(t)}S.prototype.nb=function(){return this.P},S.prototype.getCache=S.prototype.nb,S.prototype.J=ba(3),S.prototype.ub=function(e){var t=this.uri;return!e.indexOf(t)&&"_"===e.charAt(t.length)},S.prototype.cacheFilter=S.prototype.ub,S.prototype.wa=function(e,t){t.valid=!1},S.prototype.reload=function(e){var t=this.getCache();e?t.na(this.ub):t.forEach(this.wa,this,this.ub),Fl(this),this.Va(this,{isReload:!0})},S.prototype.reload=S.prototype.reload,S.prototype.l=function(){return!1},S.prototype.MAX_STORE_TIME=1/0,S.prototype.c=function(){return this.sb},S.prototype.ea=function(e,t){t(e)},S.prototype.requestInternal=S.prototype.B,S.prototype.Ha=function(e,t,r,n){var i=this,o=this.getCache();if(E(e=+e))throw new D(this.Ha,0,e);if(E(t=+t))throw new D(this.Ha,0,t);if(E(r=+r))throw new D(this.Ha,0,r);r=~~r;var a=this.getTileKey(e,t,r);return(o=o.get(a))&&o.valid||n||Dl[a]||(o=B,this.requestTileAsPromise(e,t,r,n).then((function(e){i.Va(e)}),ld)),o},S.prototype.requestTile=S.prototype.Ha,S.prototype.Gk=function(e,t,r,n){var i,o,a=this,s=this.getCache(),l=this.getTileKey(e,t,r),c=this.c();return El[l]?El[l]:(El[l]=i=new Rb((function(i,u){function p(o){var p,f=0,h=function(n,o){(p=a.createTileInternal(e,t,r,n,o)).key=l,s.add(l,p,1),i(p),Gl(l)};o&&(f=x.Date.now()-o.timestamp),o&&f<a.MAX_STORE_TIME?a.ea(o.raw,h):(0<f&&c.remove(l),(p=s.get(l))&&p.valid||n?i(p||null):Dl[l]=a.requestInternal(e,t,r,h,u))}o=c.get(l,p,p)})),Dl[l]||(Dl[l]=o),i.then((function(){Gl(l)}),(function(){Gl(l)})),i)},S.prototype.requestTileAsPromise=S.prototype.Gk,S.prototype.Fk=function(e,t){var r=this,n=e.id,i=e.tile.coords;return new Rb((function(e,o){r.Gk(i.x,i.y,i.z,t).then((function(t){for(var r,i=z,o=(t=t.Ua?t.Ua():t.data).length;o--;)if((r=t[o]).cb()===n){i=r;break}e(i)}),o)}))},S.prototype.requestObjectAsPromise=S.prototype.Fk;var Hl={cancel:ld};function xl(){}function Ek(e){var t;(Ek.j.constructor.call(this,e),e&&(this.u={crossOrigin:e.crossOrigin||"anonymous",headers:e.headers||{}},this.m=e.getURL),this.b===kk.HARP&&H.map.render.harp)&&(t=e&&e.style&&e.style instanceof H.map.render.harp.Style?e.style:new H.map.render.harp.Style({styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]}),this.Qa(t));if(!Da(this.m))throw new D(Ek,0,"getURL");if(lk(this,e.opacity),this.f=x.URL||x.webkitURL,!(e="anonymous"===(e=this.u.crossOrigin)||"use-credentials"===e)){e=this.m(0,0,0),t=window.location;var r=document.createElement("a");r.href=e,e=r.hostname===t.hostname&&r.port===t.port&&r.protocol===t.protocol}(this.T=e&&!!uf.arraybuffer&&!!this.f)&&this.nb().$d(A(this.aa,this))}S.prototype.ac=function(e,t,r,n){return new Xk(e,t,r,n)},S.prototype.createTileInternal=S.prototype.ac,S.prototype.pe=function(e){var t=Dl[e];t&&(t.cancel(),Gl(e))},S.prototype.cancelTileByKey=S.prototype.pe,S.prototype.mc=function(e,t,r){this.cancelTileByKey(this.getTileKey(e,t,r))},S.prototype.cancelTile=S.prototype.mc,S.prototype.o=function(){S.j.o.call(this),this.getCache().na(this.ub),Fl(this)},S.NullStorage=xl,xl.prototype.get=function(e,t){return t(),Hl},xl.prototype.get=xl.prototype.get,xl.prototype.put=function(e,t,r){r&&r()},xl.prototype.put=xl.prototype.put,xl.prototype.clear=function(e){e&&e()},xl.prototype.clear=xl.prototype.clear,xl.prototype.remove=function(e,t){t&&t()},xl.prototype.remove=xl.prototype.remove,u(Ek,S),t("H.map.provider.ImageTileProvider",Ek),Ek.prototype.ic=function(e){lk(this,e)},Ek.prototype.setOpacity=Ek.prototype.ic,Ek.prototype.Tc=function(){return this.g},Ek.prototype.getOpacity=Ek.prototype.Tc,Ek.prototype.Ve=ff,Ek.prototype.providesRasters=Ek.prototype.Ve,Ek.prototype.B=function(e,t,r,n,i,o){var a,s=this,l=this.m(e,t,r);if(e=Hl,l){var c=x.setTimeout((function(){s.T?(a=new tf("arraybuffer",l,o,s.u)).then((function(e){return e.blob()})).then((function(e){var t=new Image;t.onload=A(n,null,t,{raw:e}),t.onerror=A(i,null,"bad url");try{t.src=s.f.createObjectURL(e)}catch(r){}}),i):(a=new tf("image",l,o,s.u)).then(n,i)}),150);e={cancel:function(){a?a.cancel():x.clearTimeout(c)}}}else n(null);return e},Ek.prototype.requestInternal=Ek.prototype.B,Ek.prototype.ea=function(e,t){var r=new Image;r.onload=function(){t(this)},r.src=this.f.createObjectURL(e)},Ek.prototype.aa=function(e,t){(e=t.data)&&e instanceof HTMLImageElement&&this.f.revokeObjectURL(e.src)},Ek.prototype.V=function(){return this.Ya()},Ek.prototype.getStyle=Ek.prototype.V,Ek.prototype.gb=function(e){H.map.render.harp&&this.b===kk.HARP&&e instanceof H.map.render.harp.Style&&this.Qa(e)},Ek.prototype.setStyle=Ek.prototype.gb,t("H.util.events.listenOnce",Fe),t("H.util.events.dispatchEvent",(function(e,t){return e.dispatchEvent(t)})),t("H.util.events.fireListeners",(function(e,t,r,n){return pe(e)?e.jd(t,r,n):Oe(e,t,r,n)})),t("H.util.events.listen",Ee),t("H.util.events.unlisten",Me);var Il=Pe;function Jl(e,t,r,n){var i=new yk(0,0,0,0);if(Jl.j.constructor.call(this),!e)throw new D(Jl,0,e);if(!t)throw new D(Jl,1,t);if(!r)throw new D(Jl,2,r);if("object"!==typeof n)throw new D(Jl,3,n+" is not an object");if("number"!==typeof n.pixelRatio)throw new D(Jl,3,n.pixelRatio+" is not a number");this.oa=n.pixelRatio,this.zoom=0,this.fb=Ed(this.oa)/Od,this.b=new nj,this.wa={1:i.clone(),2:i.clone(),4:i.clone()},this.s=new J(.5,.5),this.f=e,Kl(this,this.oa),this.lc=A(this.lc,this),this.cc=A(this.cc,this),this.wb=A(this.wb,this),e.startInteraction=this.lc,e.interaction=this.cc,e.endInteraction=this.wb,e.addEventListener(e.A.za,this.T,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.xd,this.relaunch=this.ha,this.dispose=this.F,this.screenToGeo=this.Pa,this.geoToScreen=this.Da,this.screenToLookAtData=this.qg,this.J=t,this.kc=A(this.kc,this),this.control=A(this.control,this),this.vb=A(this.vb,this),t.startControl=this.kc,t.control=this.control,t.endControl=this.vb,t.addEventListener(t.A.za,this.Kg,!1,this),this.c=r,this.Zf=A(this.Zf,this),this.Me=A(this.Me,this),this.Ne=A(this.Ne,this),this.Yf=A(this.Yf,this),r.addEventListener(qj.prototype.A.za,this.Zf,!1,this),r.addEventListener(r.A.he,this.Me,!1,this),r.addEventListener(r.A.je,this.Ne,!1,this),r.addEventListener(r.A.ke,this.Yf,!1,this)}function Kl(e,t){var r=e.f,n=r.width,i=r.height,o=r.padding,a=o.top,s=o.left,l=o.bottom;o=o.right,r=r.margin;var c=-(n+s-o)/2<<0,u=-(i+a-l)/2<<0;n+=c,i+=u,(e=e.wa)[1].set((c-r)*t,(u-r)*t,(n+r)*t,(i+r)*t),e[2].set(c*t,u*t,n*t,i*t),e[4].set((c+s)*t,(u+a)*t,(n-o)*t,(i-l)*t)}function Ml(e,t){e.style.transition="opacity 1.5s",Fe(e,"transitionend",t,!1),e.style.opacity=0}Pe=function(e,t){var r,n,i=!0,o=t[t.currentTarget===t.target?"AT_TARGET":e.capture?"CAPTURING_PHASE":(r=!0,"BUBBLING_PHASE")];return(!r||"pointerenter"!==(n=t.type)&&"pointerleave"!==n)&&(t.eventPhase=o,i=Il(e,t),r&&e.src&&e.src.Mb&&null===e.src.Mb()&&delete t.eventPhase),i},u(Jl,F),t("H.map.render.RenderEngine",Jl),Jl.prototype.xd=function(){},Jl.prototype.T=function(){Kl(this,this.oa)},Jl.prototype.o=function(){var e=this.f,t=this.J,r=this.c;e.removeEventListener(e.A.za,this.T,!1,this),e.startInteraction===this.lc&&(e.startInteraction=xk.prototype.lc),e.interaction===this.cc&&(e.interaction=xk.prototype.cc),e.endInteraction===this.wb&&(e.endInteraction=xk.prototype.wb),t.removeEventListener(t.A.za,this.Kg,!1,this),t.startControl===this.kc&&(t.startControl=Ll.prototype.kc),t.control===this.control&&(t.control=Ll.prototype.control),t.endControl===this.vb&&(t.endControl=Ll.prototype.vb),r.removeEventListener(qj.prototype.A.za,this.Zf,!1,this),r.removeEventListener(r.A.he,this.Me,!1,this),r.removeEventListener(r.A.je,this.Ne,!1,this),r.removeEventListener(r.A.ke,this.Yf,!1,this)},Jl.prototype.mi=function(e){this.me=e},Jl.prototype.setAnimationCallback=Jl.prototype.mi,Jl.prototype.hi=function(){this.me=void 0},Jl.prototype.resetAnimationCallback=Jl.prototype.hi,Jl.prototype.control=function(){},Jl.prototype.capture=function(){return $b(Error("not implemented"))};var Nl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function Ql(e,t){return t.tilt=Rl(e,t.tilt),t.heading=Sl(e,t.heading),t.incline=e.getCapabilities().lookAt.incline.min,t}function Pl(e,t){var r=e.getCapabilities().lookAt.zoom;return ae(t,zd(r.min,e.Eg),yd(r.max,e.Dg))}function Rl(e,t){return ae(t,(e=e.getCapabilities().lookAt.tilt).min,e.max)}function Sl(e,t){return ae((t%360+360)%360,(e=e.getCapabilities().lookAt.heading).min,e.max)}function Ol(e,t,r){(r=r?t.addEventListener:t.removeEventListener).call(t,t.A.Ti,e.Yh,!1,e),r.call(t,t.A.Si,e.Yh,!1,e)}Jl.InteractionModifiers=Nl,p=Jl.prototype,p.A={Vi:"render"},p.Zf=function(e){this.nk(e),this.ha()},p.Me=function(e){this.Pe(e.idx,e.added)},p.Ne=function(e){this.Xh(e.idx,e.removed,e.type===this.c.A.ke)},p.Yf=function(e){e.removed&&this.Ne(e),this.Me(e)},p.nk=ld,p.Pe=function(e,t){this.th(e,t),0===e&&this.Eb(),C(t,qj)&&Ol(this,t,!0),this.ce(),this.ha()},p.Eb=function(){var e=this.c.La();if(0<e.length){var t=e[0].max;this.Eg=e[0].min,this.Dg=t}else t=(e=this.getCapabilities().lookAt.zoom).max,this.Eg=e.min,this.Dg=t;(e=Pl(this,this.zoom))!==this.zoom&&(this.zoom=e,this.b.Oa(e),this.$a())},p.$a=function(e){this.P=this.jb(),e&&(this.P.position=e),this.P.zoom=this.zoom-this.fb,this.P.position.alt=0},p.dl=0,p.heading=180,p.jb=function(){return Ql(this,{position:this.b.projection.dg(this.s),zoom:this.zoom,tilt:this.dl,heading:this.heading})},p.th=ld,p.Xh=ld,p.xo=function(e,t){this.D={before:e,after:t}},Jl.prototype.setOnRenderCallbacks=Jl.prototype.xo;var Tl={P2D:0,WEBGL:1,HARP:2};Jl.EngineType=Tl;var Ul={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Nl.ZOOM,COORD:Nl.COORD},capture:!0};function Vl(e){var t,r=this,n=x.H.gl;Vl.j.constructor.call(this),this.a=t=n.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Wl))),{viewport:e.viewport,container:e.Zb,disableRenderLoop:!0,devicePixelRatio:e.devicePixelRatio,logLevel:"error"}),e.ao&&t.subscribe({load:e.ao}),t.subscribe({view_complete:function(){r.ji=!0,e.qk()}});var i=t.requestRedraw;t.requestRedraw=function(){i.apply(t),e.qk()},this.ki=A(this.ki,this),this.jg=A(this.jg,this),this.f=0,this.c={},this.b={}}function Xl(e){var t;for(t in e=e.a.sources){var r=e[t];if(r.hasPendingCommands&&r.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Yl(e){e.ji=!1,e.a.resetViewComplete()}function Zl(e){return e.a.view}function $l(e,t){function r(){var r,i,o,a,s,l=t.La(),c={},u={},p=++e.f;for($h(u,Wl),i=0;i<l.length;i++){var f=l[i];if(r=f.ca()){var h=r.Ya();if(h.getState()===Xh.READY){var d=h.qc();if(!Va(d)){for(o in delete d.cameras,delete d.camera,c[i]=d=li(d,i),!C(f,tl)&&d.sources&&mi(d,r.uid),d.sources){var y=d.sources[o];y.max_zoom=yd(r.max,Ul.lookAt.zoom.max),y.max_display_zoom=f.max,y.min_display_zoom=f.min,(s=r.tileSize)&&(2<=n&&256<s&&r instanceof Ek&&(s/=2),y.tile_size=s)}(a=h.Ib())&&ni(d,a),$h(u,d)}}}}return $h(u.layers.skybox.draw.skybox.color,u.scene.sky),e.a.config=u,e.a.updateConfig().then((function(){var t,r,n={};if(p!==e.f)return!1;for(r in e.f=0,c){f=l[+r];var i=c[r].sources;for(t in i)(i=e.a.sources[t])&&(n[t]=i,i.initialize&&f.getProvider()&&i.initialize(f.getProvider(),e.ki,e.a.getWorkers().length,i.tiled?B:e.a.tile_manager.getWorkerForTile(z,i)))}for(t in e.c)!n[t]&&e.c[t].dispose&&e.c[t].dispose();return e.c=n,!0}))}var n=e.a.pixelRatio();e.a.initialized?r():e.a.load(z,{blocking:!1}).then(r)}function am(e,t){var r=e.a.tile_manager;r.removeTiles(e.jg),r.updateTilesForView(),t&&r.removeCachedTiles(e.jg),Yl(e),e.b={}}function bm(e,t,r,n){e.a.getFeatureAt(t,r,n),e.a.update()}function cm(e){return e.a.screenshot(void 0).then((function(e){return new Rb((function(t,r){new Rj(URL.createObjectURL(e.blob),(function(e,n){1===e?t(n.getData()):r()}),!1)}))}))}t("H.map.render.webgl.capabilities",Ul),u(Vl,qd),p=Vl.prototype,p.ji=!1,p.W=function(){var e=x.H.gl.Task;return this.a.immediateRedraw(),e.setState({user_moving_view:this.a.view.user_input_active}),e.processAll(),this.ji&&!this.a.dirty&&!this.a.building&&!Xl(this)&&!Object.keys(this.b).length},p.ki=function(e,t,r){var n=this,i=this.a.sources[e],o=r&&r.isReload;t?!0!==this.b[e]&&(this.b[e]||(this.b[e]={cl:{},aj:[]}),C(t,Xk)?this.b[e].cl[t.x+"/"+t.y+"/"+t.z]=!0:(t=t.boundingBox,this.b[e].aj.push(new K(t[0],t[1],t[2],t[3])))):this.b[e]=!0,i&&i.has_volatile_data?am(this,o):(x.clearTimeout(this.g),this.g=x.setTimeout((function(){return am(n,o)}),100))},p.jg=function(e){var t=!1,r=this.b[e.source.name],n=x.H.gl;if(r)if(!0===r)t=!0;else{var i=n.Tile.coord(n.Geo.wrapTile(e.coords));if(!(t=!!r.cl[i.key])){var o=n.Geo.getTileBoundingBox(i,e.source.tile_size,wh.MAX_LINE_WIDTH/2);o=sg(o.getTopLeft(),o.getBottomRight()),t=r.aj.some((function(e){return e.nd(o,!0)||o.gd(e.bb(),!0)}))}}return t},p.qc=function(){return this.a.config},p.Xa=function(){return this.a.pixelRatio()},p.o=function(){var e=this.c;Vl.j.o.call(this),this.a.destroy(),this.b={},e&&Object.keys(e).forEach((function(t){e[t].dispose()})),x.clearTimeout(this.g),delete this.c,delete this.a},Vl.prototype.disposeInternal=Vl.prototype.o;var Wl={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},nk={FEATURE:1,SOURCE:2,PROVIDER:3};function dm(e){return e}function em(e){return-e*(e-2)}function fm(e){return 1-Math.sqrt(1-e*e)}function gm(e){return Fd(2*e-e*e)}function hm(e){return 1-Math.cos(e*Math.PI/2)}function im(e){return Math.sin(e*Math.PI/2)}function jm(e,t){this.a={tilt:km(e.tilt,t.tilt),heading:km(e.heading,t.heading),zoom:t.zoom-e.zoom};var r=this.b=ng(e.position),n=t.position;e=n.lat*Ud;var i=r.lat*Ud;n=n.lng*Ud-r.lng*Ud,r=Id(n)*Kd(e),e=Kd(i)*Id(e)-Id(i)*Kd(e)*Kd(n),e=Math.atan2(r,e),this.i=(0<=e?e:Sd+e)*Vd,this.c=this.b.Wa(t.position),t=this.a.zoom,this.g=0===t?lm:Object.assign({},lm,{zoom:0>t?gm:fm,position:0>t?hm:im}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function km(e,t){return-180<(e=t-e)&&180>=e?e:180<e?e-360:e+360}t("H.map.provider.PickingMode",nk),t("H.util.animation.ease.LINEAR",dm),t("H.util.animation.ease.EASE_IN_QUAD",(function(e){return e*e})),t("H.util.animation.ease.EASE_OUT_QUAD",em),t("H.util.animation.ease.EASE_IN_OUT_QUINT",(function(e){return 1>(e*=2)?Gd(e,5)/2:Gd(e-=2,5)/2+1})),t("H.util.animation.ease.EASE_OUT_CIRC",gm);var lm={tilt:dm,heading:dm,zoom:dm,position:dm};function mm(e,t){if(E(this.x=+e))throw new D(mm,0,e);if(E(this.y=+t))throw new D(mm,1,t)}function nm(e){return Fd(e.a(e))}function om(e){e=e||jf,this.mb=vc(e.Wn)?e.Wn:3,this.U=vc(e.Un)?e.Un:300,this.u=vc(e.No)?e.No:3,this.J=vc(e.Io)?e.Io:50,this.c=[],this.clear()}function rm(e,t){e.g^=e.g&t}mm.prototype.add=function(e){return new mm(this.x+e.x,this.y+e.y)},mm.prototype.a=function(e){if(!C(e,mm))throw new D(this.a,0,e);return(e=this.b(e)).x+e.y},mm.prototype.b=function(e){if(!C(e,mm))throw new D(this.b,0,e);return new mm(this.x*e.x,this.y*e.y)},mm.prototype.Oa=function(e){return new mm(this.x*e,this.y*e)},t("H.map.render.InteractionUtils",om),om.prototype.tn=function(){return this.b},om.prototype.isGestureDetected=om.prototype.tn,om.prototype.start=function(e,t){var r=Nl.HEADING,n=Nl.TILT;this.s&&this.clear(),this.g=e,this.l=!!t,this.s=!0,this.b=!(e&(r|n))||e===r||e===n},om.prototype.start=om.prototype.start,om.prototype.store=function(e,t,r,n,i){var o=!1;if(this.s){if(o=(e=new pm(e,t,r,n,i)).c,this.m=this.a,this.a=e,this.f){if(this.i=!0,o){t=this.g;var a=this.b;if(!a&&this.i){i=Nl.HEADING;var s=Nl.TILT;r=Nl.COORD,n=Nl.ZOOM;var l=t&(r|s)?this.Nd(!0):qm,c=t&n?this.Cf(!0):1,u=t&i?Dd(this.bh(!0)):0,p=Dd(l.x),f=Dd(l.y);l=10<p||10<f,p=10<f&&f>3*p,c=.8>c||1.2<c,u=7<u,t&s&&(u||c||l&&!p?rm(this,s):p&&(rm(this,~s>>>0),a=!0)),!a&&t&i&&t&(r|n)&&(c||l?(rm(this,i),a=!0):u&&(rm(this,s),a=!0)),this.b=a}}}else this.f=e,o||(this.b=!0);this.l&&this.c.push(e)}return o},om.prototype.store=om.prototype.store,om.prototype.clear=function(){this.c.length=0,this.s=this.l=this.i=this.b=!1,this.f=this.m=this.a=void 0},om.prototype.clear=om.prototype.clear,om.prototype.Ac=function(e){return 0<(this.g&e)},om.prototype.isModifierEnabled=om.prototype.Ac,om.prototype.sa=function(){return this.s},om.prototype.isRunning=om.prototype.sa;var qm=qc(new mm(0,0));function pm(e,t,r,n,i){this.a=new J(e,t),r!==B&&(this.b=new J(r,n),this.c=!0),this.timestamp=i!==B?i:Lk()}function tm(e){var t=e.a;return(e=e.b)?new J(t.x-(t.x-e.x)/2,t.y-(t.y-e.y)/2):B}function vm(e,t){var r=e.a;return(e=e.b)&&e.Wa(t)<r.Wa(t)?e:r}function sm(e,t){var r=e.b,n=t.b;return n&&r?(t=tm(t),e=tm(e)):r?e=vm(e,t=t.a):n?t=vm(t,e=e.a):(t=t.a,e=e.a),new mm(t.x-e.x,t.y-e.y)}function um(e){var t=e.b;return t?e.a.Wa(t):0}function wm(){F.call(this),this.reset()}function ym(e){ym.j.constructor.call(this,wm.prototype.A.Cg),this.b=e}function zm(e){return x.Object.create(e.f)}function xm(e,t,r,n,i,o){this.a=e,this.b=t,this.c=r,this.f=n,this.g=i,this.i=o}function Am(e,t,r,n){Am.j.constructor.call(this),this.Zb=e,this.oa=n,this.a=e.appendChild(this.createElement(e.ownerDocument)),this.cf(t,r)}function Bm(e,t,r,n,i,o){var a=i||"2d";Bm.j.constructor.apply(this,arguments),this.b=this.a.getContext(a,o),this.c="2d"===a,this.g=a,this.In=o}function Cm(e){this.eb=e}function Dm(e){var t="dom";Dm.j.constructor.call(this,e),C(this.eb,Em)&&(t="2d"===e.Id()?"2d":"webgl"),this.a=t}function Fm(e,t,r,n,i){if(!Da(e.mi)||!Da(e.hi))throw new D(Fm,0,e);if(this.b=e,!Da(this.l=t))throw new D(Fm,1,t);if(E(this.i=+r))throw new D(Fm,2,r);if(!Da(this.g=n)&&null!=n)throw new D(Fm,3,n);if(!Da(this.c=i)&&null!=i)throw new D(Fm,4,i);this.id=(new cf).next(),this.a=!1}function Gm(e,t){Gm.j.constructor.call(this,e),this.oc=!(!t||!t.oc),this.f={}}om.prototype.rc=function(){var e;if(this.l){var t=this.c,r=t.length,n=0;for(e=new mm(0,0);--r&&n<this.u;)e=e.add(sm(t[r-1],t[r])),n++}else e=this.Nd();return 0!==(r=nm(t=e))?new mm(t.x/r,t.y/r):t},om.prototype.getDirection=om.prototype.rc,om.prototype.zb=function(e){var t,r;if(e=e||Lk(),this.l){var n=this.c,i=this.c.length,o=this.c[i-1];for(r=t=0;--i&&t<this.u;)r+=nm(sm(n[i],n[i-1])),t++;n=r/t}else o=this.a,n=nm(this.Nd());return n>=this.mb&&e-o.timestamp<=this.J?n>this.U?this.U:n:0},om.prototype.getSpeed=om.prototype.zb,om.prototype.Bf=function(){return this.a?tm(this.a):B},om.prototype.getBifocalCenter=om.prototype.Bf,om.prototype.Nd=function(e){return(e=e?this.f:this.m)?sm(e,this.a):new mm(0,0)},om.prototype.getMoveVector=om.prototype.Nd,om.prototype.Cf=function(e){var t=1;if(this.i){var r=this.a;(e=um(e=e?this.f:this.m))&&(r=um(r))&&(t=r/e)}return t},om.prototype.getBifocalScaling=om.prototype.Cf,om.prototype.bh=function(e){if(this.i){var t=e?this.f:this.m,r=this.a;e=t.b;var n=r.b,i=0;e&&n&&(t=t.a,r=r.a,i-=Nd(n.y-r.y,n.x-r.x)*Vd-Nd(e.y-t.y,e.x-t.x)*Vd),e=i}else e=0;return e},om.prototype.getBifocalRotation=om.prototype.bh,pm.prototype.c=!1,u(wm,F),wm.prototype.start=function(e,t){this.c&&this.reset(),E(e-t)||(this.a=+e,this.b=+t),this.c=!0},wm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new xm(0,0,0,0,0,0)},wm.prototype.sa=function(){return this.c},wm.prototype.A={Cg:"animationupdate"},u(ym,ud),wm.prototype.set=function(e,t,r,n,i,o){var a=this.f;this.c&&(e=new xm(e/1e3,t/1e3,r/1e3,n/1e3,i/1e3,o/1e3),a.ia(e)||(this.f=e,this.dispatchEvent(new ym(zm(this)))))},wm.prototype.zb=function(){return zm(this).zb()},wm.prototype.rc=function(){var e=zm(this),t=this.zb()||1;return new xm(e.a/t,e.b/t,e.c/t,e.f,e.g,e.i)},wm.prototype.o=function(){this.reset(),wm.j.o.call(this)},xm.prototype.zb=function(){return Fd(this.a*this.a+this.b*this.b+this.c*this.c)},xm.prototype.rc=function(){var e=this.zb()||1;return new xm(this.a/e,this.b/e,this.c/e,this.f,this.g,this.i)},xm.prototype.ia=function(e){var t=e===this;return!t&&(t=C(e,xm))&&(t=this.a===e.a&&this.b===e.b&&this.c===e.c&&this.f===e.f&&this.g===e.g&&this.i===e.i),t},u(Am,qd),Am.prototype.N=function(){return this.a},Am.prototype.cf=function(e,t){this.size?(this.size.w=e,this.size.h=t):this.size=new Wi(e,t),this.Uk(this.a,this.a.style,e,t,this.oa)},Am.prototype.setSize=Am.prototype.cf,p=Am.prototype,p.yb=function(){return this.size},p.Xa=function(){return this.oa},p.Vj=!0,p.qb=function(e){e!==this.Vj&&(this.a.style.display=e?"block":"none",this.Vj=e)},p.Ih=1,p.ic=function(e){this.Ih!==e&&(this.Yj(e),this.Ih=e)},p.Tc=function(){return this.Ih},p.fe=function(e){this.a.style.zIndex=e},Am.prototype.setZIndex=Am.prototype.fe,Am.prototype.Ij=function(){return+this.a.style.zIndex},Am.prototype.Oc=function(){},Am.prototype.clear=function(){},Am.prototype.o=function(){this.clear(),this.Zb.removeChild(this.a),this.cf(0,0),delete this.a,delete this.Zb,Am.j.o.call(this)},Am.prototype.disposeInternal=Am.prototype.o,Am.prototype.f=0,Am.prototype.pg=function(){++this.f},Am.prototype.release=function(){--this.f||this.F()},u(Bm,Am),p=Bm.prototype,p.createElement=function(e){var t=(e=e.createElement("canvas")).style;return t.position="absolute",t.top=t.left="0",e},p.Uk=function(e,t,r,n,i){e.width=zd(r,1),e.height=zd(n,1),t.width=Ad(r/i)+"px",t.height=Ad(n/i)+"px"},p.Yj=function(e){this.b.globalAlpha=e},p.Oc=function(e,t,r,n,i){this.c&&this.b.drawImage(e,t,r,n,i)},p.Id=function(){return this.g},p.clear=function(e){var t,r;this.c&&(e?this.b.clearRect(t=e.left,r=e.top,e.right-t,e.bottom-r):this.a.width=this.size.w)},p.o=function(){var e=this.a;e.width=e.height=0,delete this.b,Bm.j.o.call(this)},Bm.prototype.disposeInternal=Bm.prototype.o,u(Cm,qd),Cm.prototype.ob=function(){return this.eb},Cm.prototype.getLayer=Cm.prototype.ob,Cm.prototype.Ym=function(){return this.lb},Cm.prototype.getSurface=Cm.prototype.Ym,Cm.prototype.ad=function(e){var t=this.lb;e!==t&&(this.lb=e,e.pg(),t&&t.release())},Cm.prototype.setSurface=Cm.prototype.ad,Cm.prototype.o=function(){this.lb.release()},Cm.prototype.disposeInternal=Cm.prototype.o,Cm.prototype.Rd=function(){},Cm.prototype.render=Cm.prototype.W,u(Dm,Cm),Dm.prototype.W=function(e,t,r,n,i,o,a,s){a=this.eb;var l=this.lb,c=!(C(l,Bm)&&"2d"===l.Id());return n>=a.min&&n<=a.max?(c&&l.qb(!0),a.W(l.N(),{boundingBox:e,zoom:n,screenCenter:t,priorityCenter:o,projection:r,cacheOnly:i,size:l.yb(),pixelRatio:l.Xa(),cameraMatrix:s})):(c&&l.qb(!1),wk.DONE)},Dm.prototype.Rd=function(){return this.a},t("H.util.animation.Animation",Fm),Fm.prototype.start=function(){var e=this;this.f=Lk(),this.a=!0;var t=this.f;this.b.mi((function(){if(e.a){var r=Lk(),n=r-e.f,i=n/e.i,o=!1;1<=i&&(i=1,o=!0),e.l(e.c?e.c(i):i,n,r-t,r),t=r,o&&e.stop()}else e.stop()}))},Fm.prototype.start=Fm.prototype.start,Fm.prototype.stop=function(e){this.a=!1,this.b.hi(),e||this.g&&this.g(this)},Fm.prototype.stop=Fm.prototype.stop,Fm.prototype.sa=function(){return this.a},Fm.prototype.isRunning=Fm.prototype.sa,u(Gm,Cm),Gm.prototype.ad=function(e){Gm.j.ad.call(this,e),this.l=e.Zb.ownerDocument},Gm.prototype.setSurface=Gm.prototype.ad;var Hm=function(e,t){return C(t=t.ga(),gh)?t.la:(e[0]=t,e)}.bind(null,[]);function Im(e,t){var r=e[1].Uc(),n=t[1].Uc();return oh(r,n,!0)||e[5]-t[5]||oh(r,n,!1)}function Jm(e,t){Jm.j.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}Gm.prototype.W=function(e,t,r,n,i,o,a){var s,l,c,u,p=this.eb;if(this.s=t=this.f,this.f=r={},n>=p.min&&n<=p.max){var f=this.rj(e,n,i,o),h=f.markers;if(e=h.length){for(n=[],i=this.lb,o=0;o<e;o++){p=h[o];var d=Hm(p);for(s=d.length;s--;)(l=a(d[s]))&&((u=t[c=p.cb()+"_"+s])?delete t[c]:u={ik:p},r[c]=u,n.push([u,p,p.xb(),i,l.x,l.y]))}for(n.sort(Im),e=n.length,o=0;o<e;o++)this.Ek.apply(this,n[o])}}return!f||f.requested&&f.requested===f.total||!f.requested&&h.length===f.total?wk.DONE:wk.PENDING},Gm.prototype.render=Gm.prototype.W,Gm.prototype.Ea=function(){},Gm.prototype.getObjectsAt=Gm.prototype.Ea,u(Jm,Gm),t("H.map.render.dom.MarkerRenderer",Jm),Jm.prototype.rj=function(){return this.eb.Dc.apply(this.eb,arguments)},Jm.prototype.W=function(e,t,r,n,i,o,a){this.b(),this.i=0;var s,l=Jm.j.W.apply(this,arguments),c=this.lb,u=this.s;for(s in u)Km(this,c,u[s]);return 0===this.a.length&&l?wk.DONE:wk.PENDING},Jm.prototype.render=Jm.prototype.W,Jm.prototype.ad=function(e){Jm.j.ad.call(this,e),this.g=e.Xa()},Jm.prototype.setSurface=Jm.prototype.ad,Jm.prototype.b=function(){for(var e,t,r,n=this.a.length;n--;)(t=(e=(r=this.a[n]).Ag).xb()).Vh(r,t,e);this.a.length=0},Jm.prototype.Ek=function(e,t,r,n,i,o){var a,s=n.Xa(),l=t.Kb();i*=s,o*=s,this.oc||(i=Ad(i),o=Ad(o)),e.detail&&(l.Vd(e.qn)?Km(this,n,e):a=e.detail),a||(e.detail=a=r.uj(this.l),this.c++,Da(r.Vh)&&this.a.push(a)),e.qn=l.a,a.style.zIndex=this.i++,a.Ag=t,n.Oc(a,i,o,0,0)};var Lm,Mm="pointer-events",Nm,Om;$e&&($e&&bd!==z&&(bd=(Om=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Om[2]:z),Nm=bd,9===Nm?Mm="display":10===Nm&&(Mm="visibility"));function Km(e,t,r){t.clear(t=r.detail),delete t.Ag,e.c--,(r=(e=r.ik).xb()).b&&r.b(t,r,e)}function Em(e,t){var r=t||{},n=r.contextType;if(r=r.contextAttributes,Em.j.constructor.call(this,t),zc(e,"Function",Em,0,"invalid render callback"),n){if(-1===Pm.indexOf(n))throw new D(Em,1,"invalid context type");this.b=n}r&&(this.c=r),this.f=e}Lm=Mm,Jm.prototype.Ea=function(e,t,r){var n,i,o,a,s,l=this.g,c=hf;if(this.c){e/=l,t/=l;var u=(l=this.lb.Zb.getRootNode()).documentElement,p=this.lb.N(),f=p.getBoundingClientRect();for(e+=f.left,t+=f.top;(i=o=l.elementFromPoint(e,t))&&i!==p&&i!==u&&i!==l.host&&o!==h;){for(;(a=i.parentNode)&&(!Da(a.contains)||!a.contains(p));)i=a;if(a===p&&(i!==o||"svg"!==i.nodeName)&&0>c.indexOf(s=i.Ag)&&(c===hf&&(c=[]),c.push(s),r))break;n||(n=[]);var h=i.style;n.push({fj:h.getPropertyValue(Lm),pn:h.getPropertyPriority(Lm),style:h}),h.setProperty(Lm,"visibility"===Lm?"hidden":"none","important"),h=o}if(n)for(t=n.length;t--;)(e=n[t]).style.removeProperty(Lm),Cc(e.fj)&&e.style.setProperty(Lm,e.fj,e.pn)}return c},Jm.prototype.getObjectsAt=Jm.prototype.Ea,Jm.prototype.Rd=function(){return"dom"},Jm.prototype.o=function(){this.a.length=0;var e,t=this.lb,r=this.f;for(e in r)Km(this,t,r[e]);this.lb.F(),Jm.j.o.call(this)},Jm.prototype.disposeInternal=Jm.prototype.o,u(Em,qj),t("H.map.layer.CanvasLayer",Em);var Pm=["2d","webgl","webgl2","experimental-webgl"];function Qm(e,t){Qm.j.constructor.call(this,t),zc(e,"Function",Qm,0,"invalid render callback"),this.a=e}function Rm(e,t){if(E(this.b=+e))throw new D(Rm,0,e);this.a=0,t&&this.Qk(t)}function Sm(e,t,r,n){Sm.j.constructor.apply(this,arguments)}function Tm(e,t){this.a=e,this.b=t}function Um(e,t,r){var n=[],i={Zb:e.a,width:t.w,height:t.h,oa:e.b};for(e=0;e<r.length;e++){var o=(t=r[e]).Rd(),a={};Ya(a,i);var s=t.lb;switch(o){case"2d":if(C(t.ob(),Em)&&(a.Rg=t.ob().c),o=u&&"2d"===u.Id()){o=a.Rg;var l=u.In;o=l===o||(l&&!o?!l.alpha&&!l.willReadFrequently:o&&!l?!o.alpha&&!o.willReadFrequently:!o.alpha===!o.alpha&&!l.willReadFrequently===!o.willReadFrequently)}if(o)var c=!1;else if(s&&!c){var u=s;c=!1}else u=new Bm(a.Zb,a.width,a.height,a.oa,"2d",a.Rg),c=!0;break;case"dom":u=s||new Sm(a.Zb,a.width,a.height,a.oa),c=!s;break;default:u=s||new Bm(a.Zb,a.width,a.height,a.oa,t.ob().Id(),a.Rg),c=!s}n[n.length-1]!==u&&(u.fe(n.length),n.push(u)),t.ad(u)}return n}function Ll(){Ll.j.constructor.call(this),this.b={},this.a={position:new kg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}Em.prototype.b="2d",Em.prototype.Id=function(){return this.b},Em.prototype.W=function(e,t){return this.a&&this.a.canvas===e||(this.a=e.getContext(this.b,this.c)),this.f(this.a,t)},Em.prototype.o=function(){Em.j.o.call(this),delete this.a},u(Qm,qj),t("H.map.layer.DomLayer",Qm),Qm.prototype.W=function(e,t){return this.a(e,t)},t("H.util.kinetics.KineticMove",Rm),Rm.prototype.Qk=function(e){return this.a=e,this},Rm.prototype.setInitialSpeed=Rm.prototype.Qk,Rm.prototype.am=function(){return Math.abs(this.a/this.b)},Rm.prototype.getDuration=Rm.prototype.am,Rm.prototype.De=function(e){return this.a+this.b*e},Rm.prototype.getCurrentSpeed=Rm.prototype.De,Rm.prototype.Wl=function(e){return this.a*e+this.b*e*e/2},Rm.prototype.getCurrentPath=Rm.prototype.Wl,u(Sm,Am),t("H.map.render.dom.Surface",Sm),p=Sm.prototype,p.Id=function(){return"dom"},p.createElement=function(e){return(e=e.createElement("DIV")).style.position="absolute",e.style.pointerEvents="none",e},p.Uk=function(e,t,r,n){t.width=r+"px",t.height=n+"px"},p.Yj=function(e){this.a.style.opacity=e},p.Oc=function(e,t,r){var n=this.oa,i=e.style;i[Af("transform")]="matrix(1,0,0,1,"+t/n+","+r/n+")",e.parentNode!==this.a&&(i.position="absolute",this.a.appendChild(e),this.a.style.pointerEvents="auto","auto"===getComputedStyle(e).pointerEvents&&(e.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(e){e?this.a.removeChild(e):this.a.innerHTML=""},u(Ll,F),t("H.map.ViewModel",Ll),Ll.prototype.A={za:"update",le:"sync"},Ll.prototype.Wb=function(e,t){if(!e)throw new D(this.Wb,0,e);var r=e[Vm];if(vc(r)&&!lg(r))throw new D(this.Wb,0,Vm);if(vc(r=e[Wm])&&E(+r))throw new D(this.Wb,0,Wm);if(vc(r=e[Xm])&&!C(r,jg))throw new D(this.Wb,0,Xm);return r=Ym(e=x.Object.assign({},e),this.b,this.a),Zm(this,this.b,e),this.dispatchEvent(new $m(this.b,r,t)),this},Ll.prototype.setLookAtData=Ll.prototype.Wb,Ll.prototype.jb=function(){var e={};return e[Vm]=ng(this.a[Vm]),Zm(this,e,this.a,!0),e},Ll.prototype.getLookAtData=Ll.prototype.jb;var Vm="position",Wm="zoom",Xm="bounds",an={Ui:Vm,Xi:Wm,Oi:"heading",Wi:"tilt",Pi:"incline",Mi:Xm},bn=Object.keys(an).map((function(e){return an[e]}));function Zm(e,t,r,n){e.g={},e.f={},e.c=[];for(var i,o,a,s=e.l,l=e.i,c=bn.length;c--;)if(a=r[i=bn[c]],null==(o=t[i])||!n)if(null!=a){vc(s)&&s.call(e,i,o,a);var u,p=i;if((u="position"!==i)||(u=!(!(u=a)||E(u.lat)||E(u.lng))),t[p]=u?a:ng(a),vc(l)){switch(i){case"position":o=a&&o&&(a.lat!==o.lat||a.lng!==o.lng);break;case"bounds":o=a&&o&&!a.ia(o);break;default:o=a!==o}o&&l.call(e,i)}}else delete t[i]}Ll.prototype.l=function(e,t,r){this.g[e]=t,this.f[e]=r},Ll.prototype.i=function(e){this.c.push(cn[e])};var cn=bn.reduce((function(e,t){return e[t]=ej[t.toUpperCase()],e}),{});function Ym(e,t,r){var n=0;return["tilt","incline","heading",Wm].forEach((function(i){if(E(e[i])){var o=E(t[i])?r[i]:t[i];e[i]=o}else n|=cn[i]})),[Vm,Xm].forEach((function(i){e[i]?n|=cn[i]:e[i]=t[i]||r[i]})),n}function dn(e,t){return e|t}function $m(e,t,r){$m.j.constructor.call(this,Ll.prototype.A.za,e,null,t),this.b=this.animate=Fc(r)&&0<r&&1/0>r?r:!!r}function T(e,t,r,n){if(T.j.constructor.call(this,e,t,r,n),this.qa=new Rk(100),this.R=new J(0,0),this.Af=!!n.enableSubpixelRendering,this.ab=en,this.m=new om,this.g=n=new wm,this.sb=A(this.sb,this),n.addEventListener(n.A.Cg,this.sb),n=e.element,this.L=e=n.ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,n.insertBefore(e,n.firstChild),this.Ad=new Tm(this.L,this.oa),this.ta=t.jb().position,!(t=x.H.gl))throw new $c(T,'"H-webgl" module is missing');for(this.a=new Vl({viewport:this.f,Zb:this.L,devicePixelRatio:this.oa,qk:A(this.ha,this)}),t.WorkerBroker.addTarget("model",sj),e=0,n=(t=this.c.La()).length,this.l={Nc:[],ja:[]},this.xa=t;e<n;e++){var i=t[e];this.Pe(e,i),Ol(this,i,!0)}this.Eb(),this.fd=A(this.fd,this),this.Kh=A(this.Kh,this),this.Da=A(this.Da,this),r.addEventListener(qj.prototype.A.ie,this.fd),this.C=fn,this.zoom=Pl(this,this.J.pb()),this.Eb(),this.T()}Ll.prototype.$a=function(e){var t={},r={};Zm(this,this.a,e),this.b={},t.lookAt=this.f,r.lookAt=this.g,e=(e=this.c).length?e.reduce(dn):0,this.dispatchEvent(new dj(this.A.le,t,r,e))},Ll.prototype.synchronize=Ll.prototype.$a,Ll.prototype.df=function(e,t){if(E(e=+e))throw new D(this.df,0,Wm);this.Wb({zoom:e},t)},Ll.prototype.pb=function(){return this.a.zoom},Ll.prototype.kc=Qc,Ll.prototype.startControl=Ll.prototype.kc,Ll.prototype.control=Qc,Ll.prototype.control=Ll.prototype.control,Ll.prototype.vb=Qc,Ll.prototype.endControl=Ll.prototype.vb,u($m,dj),u(T,Jl),t("H.map.render.webgl.RenderEngine",T),T.prototype.jb=function(){var e=this.ta;return Ql(this,{position:{An:e.An,Fn:e.Fn},zoom:this.zoom,tilt:this.dl,heading:this.heading})},T.prototype.fd=function(e){((e=(e=e.target.ca())&&e.Ya())&&e.getState())===Xh.INIT?e.load():(Yl(this.a),$l(this.a,this.c),this.ha())},T.prototype.type=Tl.WEBGL;var fn=2;function gn(e,t,r){return(t=r-t)<(e=Gd(2,8+e.zoom))/2?t:t-e*r/Dd(r)}function hn(e,t,r){function n(e){return i[e]+km(i[e],t[e])/2}if(!(r&ej.POSITION||r&ej.BOUNDS))return null;var i=Zl(e.a).getLookAtData();r=i.position;var o=t.position,a=t.bounds;return Fi(i.bounds,o.lat,o.lng,!1)||a&&Fi(a,r.lat,r.lng,!1)?null:((r=jn(e,{tilt:n("tilt"),heading:n("heading"),incline:0,bounds:tg([r,o])})).zoom=Pl(e,r.zoom-.5),delete r.bounds,r)}function kn(e,t,r,n){return e=(e=e.getCapabilities().lookAt[n]).max-e.min,Dd("zoom"===n?r[n]-t[n]:km(t[n],r[n]))/e||0}function ln(e,t,r){return ae(3e3*(e=zd(8*kn(e,t,r,"zoom"),kn(e,t,r,"heading"),kn(e,t,r,"tilt")/2)),300,4e3)}function jn(e,t){return pn(t),Zl(e.a).getBestLookAtData(t)}function pn(e){var t=e.bounds;!t||t instanceof O||(e.bounds=Ci(t.K()))}function rn(e,t,r){Zl(e.a).setLookAtData(t),Yl(e.a),qn(e),e.ha(),r&&setTimeout(r,0)}function on(e,t,r,n){var i=Zl(e.a).getLookAtData(),o=new jm(i,t);0!==o.a.tilt+o.a.heading+o.a.zoom+o.c?sn(e,(function(t){for(var r in o.a)if(0!==o.a[r]){var n=o.g[r](t);i[r]+=o.a[r]*(n-o.f[r]),o.f[r]=n}return 0!==o.c&&(i.position=o.b.zg(o.i,o.c*o.g.position(t),!0)),rn(e,i)}),r,(function(){return rn(e,t,n)})):rn(e,t,n)}function tn(e,t){e.qa.na((function(e,r){return r.Mb()===t}))}function un(e){return!(C(e,Qm)||C(e,Em))}function nn(e,t){var r=t.position;return Ql(e,{zoom:Pl(e,t.zoom),position:new kg(r.lat,r.lng),tilt:t.tilt,heading:t.heading,bounds:t.bounds})}function qn(e){var t=Zl(e.a).getLookAtData();e.zoom=t.zoom,e.ta=t.position}function wn(e,t){return new J((e=Zl(e.a).geoToMeters(t)).x/40075016.68557849+.5,1-(e.y/40075016.68557849+.5))}function xn(e,t){return t.sub(wn(e,e.ta)).scale(Gd(2,8+e.zoom))}function yn(e,t,r,n,i,o,a,s){var l,c,u,p=0,f=function(){0===--p&&o(i)};if(s&&s.features)for(p=c=s.features.length,u=0;u<c;u++){var h=s.features[u],d=h.id;if(l=e.a.a.sources[h.source_name]){var y=l.provider,m=y.Ej();if(m===nk.SOURCE){var v=h.source_layer;if("overlays"===v)zn(e,t,r,n,i,l,h.properties.overlays_config);else if(l=l.getMapObjectById(d))if("markers"!==v)i.push(l);else if(An(e,t,r,l))i.push(l);else if(n&&!a){var g=!0;bm(e.a,{x:t,y:r},{radius:3.5,top_most_only:!1},(function(a){yn(e,t,r,n,i,o,!0,a)}))}p--}else m===nk.FEATURE?(v=h.tile.coords,(g=y.getFeatureProxy(h.properties,v,(function(e){e&&(e.Tk(y),i.push(e)),f()})))||((l=e.qa.get(d))||((l=new lh(h)).ka(y),e.qa.add(d,l,1)),i.push(l),p--)):m===nk.PROVIDER&&(g=!0,y.Fk(h,!1).then((function(e){e&&(!(e instanceof rh)||An(this,t,r,e))&&i.push(e),f()}),(function(){f()}),e))}}m&&(g||0!==p)||o(i)}function zn(e,t,r,n,i,o,a){var s;for(e=e.Pa(t,r),t=a.length;t--&&(!(s=o.getMapObjectById(a[t].id))||0<=i.indexOf(s)||!s.ga().gd(e)||(i.push(s),!n)););}function An(e,t,r,n){var i,o=n.xb(),a=o.c,s=!a;if(a)if(t+=(o=o.kd()).x,r+=o.y,C(o=n.ga(),Vi))for(i=(n=o.la).length;i--&&!s;)o=e.Da(n[i]),s=a.Of(t-o.x,r-o.y,0)!==de.NONE;else o=e.Da(o),s=a.Of(t-o.x,r-o.y,0)!==de.NONE;return s}function Bn(e,t,r,n,i){for(var o,a=t.length;a--&&!((o=t[a])&&o.Ea&&(e=e.concat(o.Ea(r,n,i)),e.length&&i)););return e}function vn(e){return{w:(e=e.wa[2]).right-e.left,h:e.bottom-e.top}}function Cn(e){e.i&&e.i.sa()||(Xl(e.a)||Lk()-e.ve<e.ab)&&!e.ea?e.Vf||(e.Vf=Jk(e.Kh)):(e.ea&&(e.ce(),Dn(e)),e.C=fn)}function Dn(e,t){e.dd||setTimeout(A(e.dispatchEvent,e,{type:e.A.Vi,target:t||e}),1)}function Fn(e,t,r){Zl(e.a).applyPxOffset([t,r]),qn(e),e.R.set(0,0),Yl(e.a),e.ha()}function Gn(e,t,r,n){Zl(e.a).setLookAtData({zoom:t},Fc(r)&&Fc(r)?[r,n]:B),qn(e),Yl(e.a),e.ha()}function mn(e){En(e),e.g.sa()&&e.vb(!0),e.m.sa()&&e.wb(!0)}function Hn(e,t){if(t){var r={};r.Te=t.power,r.we=t.ease,r.duration=t.duration,e.u=r}}function Jn(e,t){var r=xn(e,wn(e,t.position)),n=r.y;r=r.x;var i=t.zoom,o=xn(e,wn(e,e.ta));t=o.y;var a=o.x;o=e.zoom;var s=e.g.zb(),l=e.g.a,c=e.g.b,u=0;if(r=gn(e,a,r),t=Fd((r-=a)*r+(n-=t)*n+(o=i-o)*o),0!==s&&0!==t){var p=r/t,f=n/t,h=o/t,d=s*s/(2*t);sn(e,(function(t,r){var n;1!==t?((n=h*(r=(t=s*r-d*r*r/2)-u))&&(n=Pl(e,e.zoom+n),Gn(e,n,l,c)),Fn(e,Ad(p*r),Ad(f*r)),u=t):(Gn(e,Pl(e,i),l,c),e.ha())}),2*t/s)}}function In(e,t,r){r=r||0;var n=e.g,i=Zl(e.a),o=i.getLookAtData();t.c&&Gn(e,Pl(e,o.zoom+t.c*r),n.a,n.b),i.setLookAtData({heading:Sl(e,o.heading+t.g*r),tilt:Rl(e,o.tilt+t.f*r)}),qn(e),Fn(e,t.a*r,t.b*r)}function sn(e,t,r,n,i){e.i&&e.i.sa()&&e.i.stop(!0),e.i=new Fm(e,t,r,n,i),e.i.start()}function En(e){e.i&&e.i.sa()&&e.i.stop(!0)}T.prototype.getState=function(){return this.C},T.prototype.getState=T.prototype.getState,T.prototype.dd=!1,T.prototype.Kg=function(e){var t=this,r=e.newValue,n=e.modifiers,i=Zl(this.a);mn(this),this.R.set(0,0);var o=nn(this,r);if(bn.forEach((function(t){n&e[t.toUpperCase()]||delete o[t]})),e.b){i=Zl(this.a).getLookAtData();var a=jn(this,o);r=hn(this,a,n);var s=1;Fc(e.b)&&(s=1/e.b);var l=function(){return t.dd=!1};if(delete a.bounds,this.dd=!0,r){i=ln(this,i,r);var c=ln(this,r,a);on(this,r,i*s,(function(){return on(t,a,c*s,l)}))}else r=ln(this,i,a),on(this,a,r*s,l)}else pn(o),i.setLookAtData(o);qn(this),Yl(this.a),this.ha()},T.prototype.rg=function(){},T.prototype.setAnimationDuration=T.prototype.rg,T.prototype.$g=function(){},T.prototype.getAnimationDuration=T.prototype.$g,T.prototype.sg=function(){},T.prototype.setAnimationEase=T.prototype.sg,T.prototype.ah=function(){},T.prototype.getAnimationEase=T.prototype.ah,T.prototype.ng=function(){},T.prototype.resetAnimationDefaults=T.prototype.ng,p=T.prototype,p.nk=function(e){tn(this,e.target.ca()),Yl(this.a),this.ha()},p.Pe=function(e,t){T.j.Pe.call(this,e,t),un(t)&&(Yl(this.a),(e=(e=t.ca())&&e.Ya())&&e.getState()===Xh.INIT&&e.load())},p.Xh=function(e,t,r){var n;if(this.ve=Lk(),tn(this,t.ca()),t.requestDomMarkers||C(t,Em)||C(t,Qm)){var i=this.l.ja;for(n=i.length;n--;){var o=i[n];if(o.ob()===t){i.splice(n,1),o.F();break}}}un(t)&&$l(this.a,this.c),this.xa=this.c.La(),0===e&&(Ol(this,t,!1),this.Eb()),Um(this.Ad,vn(this),this.l.ja.filter(vc)),this.ce(),r||this.ha()},p.Yh=function(){this.Eb()},p.Eb=function(){T.j.Eb.call(this);var e=this.getCapabilities().lookAt.zoom;Zl(this.a).setZoomConstraints(zd(e.min,this.Eg),yd(e.max,this.Dg))},p.th=function(e,t){var r;if(t){if(e={oc:this.Af,fb:this.fb},t.W?(C(t,Em)||C(t,Qm))&&(r=new Dm(t)):t.requestDomMarkers&&(r=new Jm(t,e)),r){this.l.ja.push(r);var n=this.c.La();this.l.ja.sort((function(e,t){return n.indexOf(e.eb)-n.indexOf(t.eb)})),Um(this.Ad,vn(this),this.l.ja.filter(vc))}un(t)&&$l(this.a,this.c)}this.xa=this.c.La()},p.Da=function(e){return Zl(this.a).geoToPixel(e)},T.prototype.geoToScreen=T.prototype.Da,T.prototype.Pa=function(e,t){return Zl(this.a).xyToGeo(e,t)},T.prototype.screenToGeo=T.prototype.Pa,T.prototype.qg=function(e,t){return e=this.Pa(e,t),(t=this.J.jb()).position=e,t},T.prototype.Ea=function(e,t,r,n){var i=this,o=[];o=Bn(o,this.l.ja,e*this.oa,t*this.oa,r),r&&o.length?n(o):this.a.a.initialized?bm(this.a,{x:e,y:t},{radius:3.5,top_most_only:r},(function(a){yn(i,e,t,r,o,n,!1,a)})):n(o)},T.prototype.getObjectsAt=T.prototype.Ea,T.prototype.aa=z,T.prototype.T=function(){var e=this.l.ja.length;Kl(this,this.oa),this.R.set(0,0);var t=vn(this),r=t.w,n=t.h;for(this.a.a.handleViewportUpdate();e--;){var i=(t=this.l.ja[e].lb).yb();i.w===r&&i.h===n||t.cf(r,n)}this.aa=new Wi(r,n),Yl(this.a),this.ha()},T.prototype.getCapabilities=function(){return Ul},T.prototype.getCapabilities=T.prototype.getCapabilities,p=T.prototype,p.Vf=0,p.ce=function(){this.l.Nc.length=0},p.Kh=function(){this.Vf=0,this.D&&this.D.before();var e=Zl(this.a),t=e.getLookAtData(!1),r=e.getLookAtData(!0);e=this.f.center.clone(),r=r.bounds.K();var n=this.zoom,i=this.R,o=this.xa,a=o.length;for(this.ab=en;a--;){var s=o[a];C(s,qj)&&s.ca()&&s.ca().Ue(r,n)}this.ea=this.a.W(),this.J.$a(t),o=(t=this.l).ja.length;var l,c=!0;for(l=0;l<o;l++){a=t.ja[l];var u=t.Nc;a&&((s=a.W(r,e,void 0,n,!1,i,this.Da,this.a.a.getCameraMatrix()))===wk.ACTIVE&&(this.ab=1/0),s!==wk.DONE||u[l]||(Dn(this,a.ob()),u[l]=!0),u[l]||(c=!1))}this.ea=c&&this.ea,this.aa&&(this.f.$a(this.aa),this.aa=z),this.i&&this.i.sa()&&this.me(),this.D&&this.D.after(),Cn(this)},p.o=function(){var e=this.c.La()[0],t=this.f;Kk(this.Vf),En(this),e&&Ol(this,e,!1),this.l.ja.filter(vc).forEach((function(e){e.F()})),t.element&&t.element.removeChild(this.L),delete this.L,this.C=3,this.a.F(),T.j.o.call(this)},p.ha=function(){this.ve=Lk(),this.C===fn&&(this.ea=!1,this.C=1,Cn(this))},p.xd=function(e,t,r){Gn(this,e=Pl(this,Pl(this,e)),t,r)},T.prototype.zoomAt=T.prototype.xd,T.prototype.lc=function(e,t){var r=!!(t||e&(Nl.HEADING|Nl.TILT));mn(this),Hn(this,t),this.m.start(e,r),Zl(this.a).setPanning(!0)},T.prototype.startInteraction=T.prototype.lc,T.prototype.cc=function(e,t,r,n,i){var o=this.m,a=!1;if(o.sa()){var s=Zl(this.a),l=s.getLookAtData(),c=this.f.center;c=[c.x,c.y],t=o.store(e,t,r,n,i),r=o.Bf(),e=o.Nd(),i=this.m.Cf(),n=this.m.bh(),o.b&&(o.Ac(Nl.TILT)&&(s.setLookAtData({tilt:Rl(this,l.tilt+e.y/this.f.height*-180)},c),a=!0),t&&1!==i&&o.Ac(Nl.ZOOM)&&(a=o.Bf(),Gn(this,Pl(this,i=Ed(Gd(2,this.zoom)*i)/Od),a.x,a.y),a=!0),o.Ac(Nl.COORD)&&0<nm(e)&&(Fn(this,-e.x,-e.y),a=!0),o.Ac(Nl.HEADING)&&(t?s.setLookAtData({heading:l.heading+Sl(this,n)},[r.x,r.y]):e.x&&s.setLookAtData({heading:Sl(this,l.heading+e.x/this.f.width*360)},c),a=!0),a&&(Yl(this.a),this.ha()))}},T.prototype.interaction=T.prototype.cc,T.prototype.wb=function(e){var t=this;if(this.m.sa()&&!e){if(this.u){e=this.m.zb();var r=this.m.rc(),n=this.u.duration,i=(this.u.Te||1)*e,o=new Rm(-i/(0<n?n:1),i);!E(r.x)&&!E(r.y)&&0<i&&t.m.Ac(Nl.COORD)&&sn(this,(function(e){i=o.De(e*n),E(i)||Fn(t,Ad(-r.x*i),Ad(-r.y*i))}),n,void 0,this.u.we)}delete this.u,this.m.clear()}Zl(this.a).setPanning(!1),this.ha()},T.prototype.endInteraction=T.prototype.wb,T.prototype.kc=function(e,t,r){mn(this),this.g.start(t,r),Hn(this,e),Zl(this.a).setPanning(!0)},T.prototype.startControl=T.prototype.kc,T.prototype.control=function(e,t,r,n,i,o){for(var a,s=0;s<arguments.length;s++)if((a=+arguments[s])!==a)throw new D(this.control,s,a);this.g.sa()&&this.g.set(e,t,r,n,i,o)},T.prototype.control=T.prototype.control,T.prototype.vb=function(e,t){var r,n=this;if(this.g.sa()){En(this);var i=Lk(),o=i-this.Ed;if(1<=o)In(this,zm(this.g),o);if(!this.u||e||t)"function"===typeof t&&(t(e=(e=Zl(this.a)).getLookAtData()),Jn(this,e));else{t=this.g.zb();var a=this.g.rc(),s=this.u.duration,l=(this.u.Te||1)*t,c=new Rm(-l/(0<s?s:1),l);!E(a.a)&&!E(a.b)&&0<l&&sn(this,(function(e,t,o,u){i&&(o=u-i,i=0),l=c.De(e*s)*o,E(l)||((r=a.c*l)&&Gn(n,Pl(n,n.zoom+r),n.g.a,n.g.b),Fn(n,Ad(a.a*l),Ad(a.b*l)))}),s,void 0,this.u.we)}this.g.reset(),Zl(this.a).setPanning(!1),this.ha()}},T.prototype.endControl=T.prototype.vb,T.prototype.sb=function(e){var t=this,r=e.b;this.R.set(0,0),r.a||r.b||r.c||r.f||r.g||r.i?(this.Ed=Lk(),sn(this,(function(e,n,i,o){t.Ed=o,In(t,r,i)}),Wd),this.ha()):En(this)},T.prototype.Wg=function(){},T.prototype.enter=T.prototype.Wg,T.prototype.Xg=function(e){Ml(this.L,e)},T.prototype.exit=T.prototype.Xg,T.prototype.capture=function(e,t,r,n){var i=this;return cm(i.a).then((function(o){var a=i.L.ownerDocument.createElement("canvas"),s=i.oa,l=a.getContext("2d"),c=i.a.Xa()/s,u=(r-e)*s;return s*=n-t,a.width=u,a.height=s,l.drawImage(o,e*c,t*c,u*c,s*c,0,0,u,s),a}))},T.prototype.Il=function(e){return Zl(this.a).geoToMeters(e)},T.prototype.geoToMeters=T.prototype.Il,T.prototype.Vn=function(e){return Zl(this.a).metersToGeo(e)},T.prototype.metersToGeo=T.prototype.Vn;var en=5e3;function U(e,t,r){var n={};if(!(e instanceof HTMLElement))throw new D(U,0);if(U.j.constructor.call(this),this.i=Kn(r,U),this.c=r=new Ll,this.D=!1,r.addEventListener(r.A.le,this.R,!1,this),!C(e,Element))throw new D(U,0,e);var i=(r=this.S=e.ownerDocument.createElement("div")).style;if(i.position="relative",i.height=r.style.width="100%",i.overflow="hidden",i.webkitTapHighlightColor="transparent","transparent"!==i.webkitTapHighlightColor&&(i.webkitTapHighlightColor="rgba(0,0,0,0)"),e.appendChild(r),this.b=new xk(this.S,this.i),this.b.addEventListener(this.b.A.le,this.R,!1,this),(e=this.a=new sj(this.i.layers)).addEventListener(e.A.ke,this.P,!1,this),e.addEventListener(e.A.he,this.P,!1,this),e.addEventListener(e.A.je,this.P,!1,this),!this.l&&Ln(this),this.g=null,this.a.add(t,0),this.f=this.u(null!=this.i.engineType?this.i.engineType:jk,this.i),this.J=A(this.J,this),(t=this.i.imprint)!==B&&"object"!==typeof t)throw new D(U,1,"imprint");Mn&&(t||(t={}),t.mark=t.mark||"GS (2022) 5659"),this.s=null===t?t:new Bj(this,t),t=this.i.autoColor,this.L=t===B||!!t,Nn(this),(t=this.i.zoom)&&(n.zoom=t),(t=this.i.bounds)&&(n.bounds=t),(t=this.i.center)&&(n.position=t),this.c.Wb(n)}function Kn(e,t){if(e){var r=e.pixelRatio;if(r===B)e.pixelRatio=Ue();else if(!(0<r))throw new D(t,0,"pixelRatio: "+r)}else(e={}).pixelRatio=Ue();return e.renderBaseBackground||(e.renderBaseBackground={lower:3,higher:2}),e}function Nn(e){e.s&&e.L&&e.s.vi({invert:e.g&&e.g.yl})}function On(e,t,r){e.dispatchEvent(r?new dj(e.A.Qi,r.newValue,r.oldValue,r.modifiers):e.A.Qi+t)}function Pn(e){xj.call(this,e)}function Ln(e){e.m=new N({max:24,engineType:e.i.engineType}),e.l=new tl(e.m,e.i),e.a.add(e.l)}u(U,F),t("H.Map",U),U.prototype.draggable=!1,U.prototype.o=function(){this.L=!1,this.s&&this.s.F(),this.f.dispose(),this.c.F(),this.b.F(),this.l.F(),this.m.F(),this.a.F();var e=this.S;e.parentNode.removeChild(e),delete this.S,F.prototype.o.call(this)},U.prototype.N=function(){return this.S},U.prototype.getElement=U.prototype.N,U.prototype.Xa=function(){return this.i.pixelRatio},U.prototype.getPixelRatio=U.prototype.Xa,U.prototype.P=function(e){var t=e.added,r=e.removed;t&&t.ca()&&t.ca().ka(this),r&&r.ca()&&r.ca().ka(null),r===this.l&&(delete this.l,delete this.m),r===this.g&&(this.g=null),0===e.idx&&(this.dispatchEvent(new cj(this.A.lf,this.g=e.type!==this.a.A.je?t:0<this.a.a.length?this.a.get(0):z,e.type!==this.a.A.he?r:1<this.a.a.length?this.a.get(1):z)),Nn(this))},U.prototype.R=function(e){e.modifiers&&(this.D||(On(this,"start"),this.D=!0),On(this,"",e),this.T&&x.clearTimeout(this.T),this.T=x.setTimeout(this.J,333))},U.prototype.J=function(){On(this,"end"),this.D=!1},U.prototype.tg=function(e,t){return this.f.getCapabilities().lookAt&&this.c.Wb({position:e},!!t),this},U.prototype.setCenter=U.prototype.tg,U.prototype.bb=function(){var e=this.c.jb();return e?e.position:z},U.prototype.getCenter=U.prototype.bb,U.prototype.df=function(e,t){return this.c.df(e,!!t),this},U.prototype.setZoom=U.prototype.df,U.prototype.pb=function(){return this.c.pb()},U.prototype.getZoom=U.prototype.pb,U.prototype.xd=function(e,t,r){this.f.zoomAt(e,t,r)},U.prototype.zoomAt=U.prototype.xd,U.prototype.hn=function(){return this.b},U.prototype.getViewPort=U.prototype.hn,U.prototype.gn=function(){return this.c},U.prototype.getViewModel=U.prototype.gn,U.prototype.wm=function(){return this.a},U.prototype.getLayers=U.prototype.wm,U.prototype.qm=function(){return this.s},U.prototype.getImprint=U.prototype.qm,U.prototype.capture=function(e,t,r,n,i,o){function a(e,t){d?e.cancel():(c.save(),t.capture(l,f,(function(t){c.restore(),e.done(t)}),(function(t){e.done(null,t),s(null)})))}function s(t){d||(d=!0,e(t))}var l,c,u=this.f,p=u.getCapabilities(),f=this.i.pixelRatio,h=this.b,d=!1,y=this;if(!Da(e))throw new D(this.capture,0,e);r=r||0,n=n||0,i=i||h.width,o=o||h.height;var m=zd(0,yd(r,i)),v=zd(0,yd(n,o));r=yd(h.width,zd(r,i)),n=yd(h.height,zd(n,o)),p.capture?u.capture(m,v,r,n).then((function(e){var r=y.s,n=t||[];c=(l=e).getContext("2d"),l.style.width=l.width/f+"px",l.style.height=l.height/f+"px";var i=new Mk(10,a);(n=n.concat(r).filter((function(e){return Da(e&&e.capture)}))).length?(e=n.pop(),n.forEach((function(e){i.push(e,ld)})),i.push(e,A(s,y,l)),Fk(i)):s(l)}),(function(){s(z)})):e(null)},U.prototype.capture=U.prototype.capture,U.prototype.cm=function(){return this.f},U.prototype.getEngine=U.prototype.cm,U.prototype.u=function(e,t){if(t=t?Kn(t,this.u):this.i,Nn(this),e===kk.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,t);if(e===kk.WEBGL)return new T(this.b,this.c,this.a,t);if(e===kk.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,t);throw new D(this.u,0,e)},U.prototype.gf=function(e,t,r,n,i){if(t=vc(t)?C(t,K,this.gf,1,t)&&t:this.c.jb().bounds.K(),!C(i=i||this.g,pl))throw new D(this.gf,4);var o=i.ca(),a=this.Xa(),s=i.tileSize;if(2<=a&&256<s&&o instanceof Ek&&(s/=2),a=this.pb(),s=Math.log2(s)-8,!((r=vc(r)?+r:a)<=(n=vc(n)?+n:a)))throw new D(this.gf,B,"!(min <= max)");a=o.min;var l=o.max,c=this.f.type===kk.WEBGL?Bd:Ad;if(r=ae(c(r)-s,a,l),n=ae(c(n)-s,a,l),!(o&&C(o,S)&&od()&&o.l()))throw new $c(this.gf,"Storing is not supported");return new Ak(i,o,t,r,n,e)},U.prototype.storeContent=U.prototype.gf,u(Pn,xj),Pn.prototype.f=function(){zj(this,2)},Pn.prototype.c=function(){zj(this,4)},U.prototype.xl=function(e){return e=new Pn(e),nd().clear(A(e.f,e),A(e.c,e)),e},U.prototype.clearContent=U.prototype.xl,U.prototype.nf=function(e,t){var r=this.a,n=r.indexOf(e),i=t!==+t;return t=i?r.a.length-1:t,0>n?r.add(e,t):n-t&&(r.hc(n),r.add(e,i?t-1:t)),this},U.prototype.addLayer=U.prototype.nf,U.prototype.ae=function(e){var t=this.a.indexOf(e);return e!==this.g&&e!==this.l&&-1!==t&&this.a.hc(t),this},U.prototype.removeLayer=U.prototype.ae,U.prototype.ud=function(e){return this.g!==e&&(this.a.a.length&&this.a.get(0)!==this.l?this.a.set(0,e):this.a.add(e,0),this.g=e),this},U.prototype.setBaseLayer=U.prototype.ud,U.prototype.Ol=function(){return this.g},U.prototype.getBaseLayer=U.prototype.Ol,U.prototype.Da=function(e){if(!lg(e))throw new D(this.Da,0,e);return(e=this.f.geoToScreen(e))?zf(e):z},U.prototype.geoToScreen=U.prototype.Da,U.prototype.Pa=function(e,t){var r;if(r=+E(e)||2*+E(t))throw new D(this.Pa,r-1,arguments[r-1]);return(r=this.f.screenToGeo(e,t))?ng(r):z},U.prototype.screenToGeo=U.prototype.Pa,U.prototype.qg=function(e,t){return this.f.screenToLookAtData(e,t)},U.prototype.screenToLookAtData=U.prototype.qg,U.prototype.fa=function(e){if(!C(e,M))throw new D(this.fa,0,e);return!this.l&&Ln(this),this.m.bc().fa(e),e},U.prototype.addObject=U.prototype.fa,U.prototype.Ga=function(e){if(!C(e,M))throw new D(this.Ga,0,e);return!this.l&&Ln(this),this.m.bc().Ga(e),e},U.prototype.removeObject=U.prototype.Ga,U.prototype.Ua=function(e){return!this.l&&Ln(this),this.m.bc().Ua(e)},U.prototype.getObjects=U.prototype.Ua,U.prototype.Xb=function(e){var t;Bc(e,this.Xb,0,e),!this.l&&Ln(this);var r=e.length;for(t=0;t<r;t++)this.fa(e[t]);return this},U.prototype.addObjects=U.prototype.Xb,U.prototype.rd=function(e){var t;Bc(e,this.rd,0,e),!this.l&&Ln(this);var r=e.length;for(t=0;t<r;t++)this.Ga(e[t]);return this},U.prototype.removeObjects=U.prototype.rd,U.prototype.Od=function(e,t,r){var n;if(n=+E(e)||2*+E(t))throw new D(this.Od,n-1,arguments[n-1]);this.f.getObjectsAt(e,t,!0,(function(e){r(e[0])}))},U.prototype.getObjectAt=U.prototype.Od,U.prototype.Ea=function(e,t,r,n){var i;if(i=+E(e)||2*+E(t))throw new D(this.Od,i-1,arguments[i-1]);this.f.getObjectsAt(e,t,!1,r,!!n)},U.prototype.getObjectsAt=U.prototype.Ea,U.prototype.ld=function(e,t,r){var n=(r=r||{}).zoom;r.zoom=vc(n)?n:this.c.pb(),this.m.ld(e,t,r)},U.prototype.getObjectsWithin=U.prototype.ld;var Qn=Tl.HARP,kk={P2D:Tl.P2D,WEBGL:Tl.WEBGL,HARP:Qn};function Rn(e,t){Rn.j.constructor.call(this,e,t)}function sh(e,t,r){var n="anonymous",i=1;this.c=A(this.c,this),M.call(this,r),this.da(e),r&&((e="crossOrigin")in r&&(n=r[e]),(e="opacity")in r&&(i=r[e])),this.Ok(t,n),this.ic(i)}function Sn(e,t){Sn.j.constructor.call(this,e,t)}U.EngineType=kk,U.prototype.A={Wo:"mapviewchangestart",Qi:"mapviewchange",Ri:"mapviewchangeend",lf:"baselayerchange"},u(Rn,rh),t("H.map.Marker",Rn),Rn.prototype.type=nh.MARKER,Rn.prototype.T=1,Rn.prototype.ra=function(e){if(e!==kh.VISUAL||1===this.zk||1===this.icon.getState())var t=Rn.j.ra.call(this,e);return t||!1},Rn.prototype.invalidate=Rn.prototype.ra,p=Rn.prototype,p.zk=0,p.Uj=function(e){return C(e,Wj)},p.xh=!1,p.mk=function(){this.ra(kh.VISUAL)},p.Ic=function(e){var t=this.icon;return this.xh&&(t.removeEventListener("statechange",this.mk,!1,this),delete this.xh),t&&(this.zk=t.getState()),Rn.j.Ic.call(this,e),0===e.getState()&&(this.xh=!0,Fe(e,"statechange",this.mk,!1,this)),this},Rn.prototype.setIcon=Rn.prototype.Ic,Rn.prototype.b=function(e){return new Wj(e.svg,e)},Rn.prototype.Y=function(){var e=this.getIcon(),t=e.Fo||0,r=Rn.j.forWorkerMessage.call(this),n=r.properties.icon;return n&&0<t&&Ya(n,{stick_color:e.Eo,stick_height:t}),r},Rn.prototype.forWorkerMessage=Rn.prototype.Y,u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.K=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.K,sh.prototype.de=function(e){return C(e,K,this.de,0,e),this.da(e)},sh.prototype.setBoundingBox=sh.prototype.de,sh.prototype.ga=function(){return this.a},sh.prototype.getGeometry=sh.prototype.ga,sh.prototype.da=function(e){var t=this.a,r=!t;return C(e,K,this.da,0,e),!r&&t.ia(e)||(this.a=e,r||this.ra(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.da,sh.prototype.Qc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Qc,sh.prototype.Ok=function(e,t){var r=this.b;return r&&1!==r.getState()&&r.cancel(),this.b=new Rj(e,this.c,!0,B,t),this},sh.prototype.setBitmap=sh.prototype.Ok,sh.prototype.c=function(e,t){this.b=t,1===e&&this.ra(kh.VISUAL)},sh.prototype.Tc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Tc,sh.prototype.ic=function(e){var t=this.f,r=2>t;if(!(0<=e&&1>=e))throw new D(this.ic,0);return e!==t&&(this.f=e,r&&this.ra(kh.VISUAL)),this},sh.prototype.setOpacity=sh.prototype.ic,sh.prototype.Y=function(){var e=sh.j.Y.call(this);return e.geometry=Ci(this.a).Y(),e.properties.overlay=!0,e},sh.prototype.forWorkerMessage=sh.prototype.Y,u(Sn,pl),t("H.map.layer.MarkerTileLayer",Sn);var Tn={markers:[],total:0,requested:0};function Un(e,t,r,n,i){var o,a=Bd(r);for(e.pixelProjection.Oa(a),t=e.Sd(e.Ae(t),a),r=e.Ke(t,t.left>t.right,~~r,n,i),e=r.tiles,r=r.total,n=e.length,i=[],o=0;o<n;o++)for(a=(t=e[o]).data.length;a--;)i.push(t.data[a]);return{markers:i,total:e.length,requested:r}}function Vn(e,t,r){var n,i=6;if(t){for(n=' expected close to: "'+t;i--;)-1!==(t=e.a.next())&&(n+=String.fromCharCode(t));n+='"'}throw new D(Wn,0,"- Malformed WKT: "+(n?r+n:"unexpected end of stream"))}function Xn(e,t){var r=e.next();r!==(t=t?")":"(")&&Vn(e,r,'"'+t+'"')}function Yn(e){return","===Zn(e)&&(e.next(),!0)}function $n(e,t,r,n,i){var o,a,s=2+t+r;for(a=1;a<=s;a++)(r=e.next())?(o=+r)!==o?Vn(e,r,"number"):1===a?n[i+1]=o:2===a?n[i]=o:3===a&&(n[i+2]=o):Vn(e,r);t||(n[i+2]=0)}Sn.prototype.Ec=function(e,t,r,n){return this.ma.providesDomMarkers()?Tn:Un(this,e,t,r,n)},Sn.prototype.requestMarkers=Sn.prototype.Ec,Sn.prototype.Dc=function(e,t,r,n){return this.ma.providesDomMarkers()?Un(this,e,t,r,n):Tn},Sn.prototype.requestDomMarkers=Sn.prototype.Dc;var ao=[];function bo(e,t,r,n){return n||Xn(e,0),$n(e,t,r,ao,0),n||Xn(e,1),new kg(ao[0],ao[1],t?ao[2]:B)}function co(e,t,r){var n=[];Xn(e,0);do{$n(e,t,r,n,n.length)}while(Yn(e));return Xn(e,1),new L(n)}function eo(e,t,r){Xn(e,0);var n=co(e,t,r);if(Yn(e)){var i=[];do{i.push(co(e,t,r))}while(Yn(e))}return Xn(e,1),new O(n,i)}var fo=[],go=[eo],ho=[bo],io={POINT:ho,LINESTRING:[co],POLYGON:go,MULTIPOINT:[bo,Vi],MULTILINESTRING:[co,ih],MULTIPOLYGON:[eo,Ji],GEOMETRY:fo,GEOMETRYCOLLECTION:fo,CIRCULARSTRING:fo,COMPOUNDCURVE:fo,CURVEPOLYGON:fo,MULTICURVE:fo,MULTISURFACE:fo,CURVE:fo,SURFACE:fo,POLYHEDRALSURFACE:fo,TIN:fo,TRIANGLE:fo},jo={Z:1,M:2,ZM:3};function Wn(e){var t,r=(e=new ko(e)).next();if((t=io[r.toUpperCase()])||Vn(e,r,"type name"),t!==fo){r=Zn(e);var n=1&(r=jo[r.toUpperCase()]),i=r>>1;if(n|i&&e.next(),"EMPTY"===(r=Zn(e)))if(e.next(),n=t[1])var o=new n([]);else t!==ho&&(o=new L([]),t===go&&(o=new O(o)));else if("("===r){if(o=t[0],t=t[1]){var a=[];if(Xn(e,0),o===bo){var s="("!==Zn(e);do{a.push(o(e,n,i,s))}while(Yn(e))}else do{a.push(o(e,n,i))}while(Yn(e));Xn(e,1),n=new t(a)}else n=o(e,n,i);o=n}else Vn(e,r,'"Z", "M", "ZM", "(" or "EMPTY"');e.next()&&Vn(e,r,"end of stream")}return o||z}function ko(e){this.a=e}function Zn(e){var t=e.b;if(t===B){for(t=e.a;t.Pb()===lo;)t.next();if(mo[t.Pb()])t=(t=t.next())===no?"":String.fromCharCode(t);else{t.ge();do{t.next()}while(!mo[t.Pb()]);t=String.fromCharCode.apply(null,t.Gd())}e.b=t}return t}ko.prototype.next=function(){var e=Zn(this);return""!==e&&delete this.b,e};var lo=32,no=-1,oo={$o:lo,Uo:40,Zo:41,Ro:44,So:no},mo=Object.keys(oo).reduce((function(e,t){return e[oo[t]]=!0,e}),oc());function po(){}function qo(e){this.c=String(e),this.f=0,this.a=[],this.b=!1}function ro(e,t){ro.j.constructor.call(this,Ki,t),this.de(e)}function so(){return Hf("H-core","1.51.0","a104c13",{region:"row"})}t("H.util.ICharStream",po),po.prototype.next=function(){},po.prototype.ge=function(){},po.prototype.Gd=function(){},po.prototype.Pb=function(){},t("H.util.CharStream",qo),qo.prototype.next=function(){var e=this.c.charCodeAt(this.f++);return e=isNaN(e)?-1:e,this.b&&this.a.push(e),e},qo.prototype.ge=function(){this.b=!0,this.a=[]},qo.prototype.Gd=function(){var e=this.a.slice();return this.b=!1,this.a=[],e},qo.prototype.Pb=function(){var e=this.c.charCodeAt(this.f);return isNaN(e)?-1:e},t("H.util.wkt.toGeometry",(function(e){return Wn(new qo(e))})),u(ro,uh),t("H.map.Rect",ro),ro.prototype.de=function(e){if(!C(e,K))throw new D(this.de,0,e);e.ia(this.aa)||(this.aa=this.D=e,this.a!==z&&ro.j.da.call(this,Ci(e)))},ro.prototype.setBoundingBox=ro.prototype.de,ro.prototype.K=function(){return this.D},ro.prototype.getBoundingBox=ro.prototype.K,ro.prototype.da=function(){return this},ro.prototype.setGeometry=ro.prototype.da,ro.prototype.ga=function(){return this.a===Ki&&ro.j.da.call(this,Ci(this.aa)),this.a},ro.prototype.getGeometry=ro.prototype.ga,t("H.buildInfo",so);var Mn="cn"===so().region,jk=kk[Mn?"HARP":"WEBGL"],to,uo="maps".concat("js-"),vo,wo,xo,yo,zo;if(vo=x.document.querySelector('script[src*="'+uo+'"]'),!vo)for(wo=x.document.getElementsByTagName("script"),yo=new RegExp("^.*"+uo),zo=0,xo=wo.length;zo<xo;zo++)if(yo.test(wo[zo].src)){vo=wo[zo];break}function Ao(){var e=decodeURIComponent(to);if(e){e="/"===e[e.length-1]?e.substring(0,e.length-1):e;var t=x.document,r="";t?((t=t.createElement("a")).href=e,r=t.href):/[\w]+:\/\//.test(e)&&(r=e),(e=new URL(r)).pathname+="/"===e.pathname[e.pathname.length-1]?"styles":"/styles",e=e.toString()}else e="https://js.api.here.com/v3/3.1.51.0/styles";return e}function Bo(e){var t=e.ownerDocument;t=t.documentElement||t.body.parentNode||t.body;try{var r=e.getBoundingClientRect()}catch(n){r={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:r.left+("number"===typeof window.pageXOffset?window.pageXOffset:t.scrollLeft),y:r.top+("number"===typeof window.pageYOffset?window.pageYOffset:t.scrollTop)}}to=vo?vo.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",(function(){return to})),t("H.getStylePath",Ao);var Co=function(){return this}.apply(null);function Do(e,t,r,n,i,o){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(t))throw Error("y needs to be a number");if(isNaN(r))throw Error("pointer must have an id");this.viewportX=e,this.viewportY=t,this.target=null,this.id=r,this.type=n,this.dragTarget=null,this.button=vc(i)?i:-1,this.buttons=vc(o)?o:0,this.a=this.button}function Eo(e,t,r){if(isNaN(t))throw Error("x needs to be a number");if(isNaN(r))throw Error("y needs to be a number");e.viewportX=t,e.viewportY=r}function Fo(e,t){e.a=t,e.buttons|=Go[+t]||0}function Ho(e,t){e.a=t,e.buttons&=~(Go[+t]||0)}t("H.mapevents.Pointer",Do),Do.prototype.tm=function(){return this.a},Do.prototype.getLastChangedButton=Do.prototype.tm;var Go=[1,4,2],Io={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Jo(e,t,r,n,i,o,a){Jo.j.constructor.call(this,e),this.pointers=t,this.changedPointers=r,this.targetPointers=n,this.currentPointer=i,this.originalEvent=a,this.target=o}function Ko(e){this.a=e instanceof Array?e.slice(0):[]}function Lo(e,t){return-1!==(t=e.indexOf(t))?e.a[t]:null}function Mo(e,t){for(var r=e.a.length,n=[];r--;)e.a[r].type!==t&&n.push(e.a[r]);e.a=n}function No(e,t){for(var r=e.a.length;r--;)if(e.a[r].dragTarget===t)return!0;return!1}function Oo(e,t,r){if(r=r||{},!(e instanceof U))throw Error("events: map instance required");if(!(t instanceof Array))throw Error("events: map array required");qd.call(this),this.Tg=r.Tg||300,this.gj=r.gj||50,this.Zk=r.Zk||50,this.$k=r.$k||500,this.Ch=r.Ch||900,this.Bh=r.Bh||8,this.map=e,this.m=this.map.b,this.f=this.m.element,this.D=t,this.a=new Ko,this.b=new Ko,this.l={},this.c=null,this.u=!0,this.U={},this.g={},this.s=null,this.te=A(this.te,this),this.P={pointerdown:this.Bl,pointermove:this.Cl,pointerup:this.Dl,pointercancel:this.Al},Po(this)}function Po(e,t){var r,n=e.D.length;for(r=0;r<n;r++){var i=e.D[r],o=i.listener;"function"===typeof o&&(t?(i.target||e.f).removeEventListener(i.Sa,o):(i.target||e.f).addEventListener(i.Sa,o))}}function Qo(e,t,r){var n;if("function"===typeof e.P[t]){"pointermove"!==t&&(e.u=!0);var i=0;for(n=e.b.length();i<n;i++){var o=e.b.a[i]||null;e.f.contains(r.composedPath()[0])?Ro(e,o,e.nj.bind(e,r,t,o)):e.nj(r,t,o,null)}}e.b.clear()}function Ro(e,t,r){if(e.c===t)r(t.target);else{var n=e.m,i=t.viewportX;if(t=t.viewportY,0>i||0>t||i>=n.width||t>=n.height)r(z);else{var o=e.map;o.Od(i,t,(function(e){r(e||o)}))}}}function To(e,t,r){t===e.c&&(Uo(e,t.dragTarget,"dragend",r,t),e.c=null,So(t.id,e.U)),t.dragTarget=null}function So(e,t){t[e]&&(t[e].timeout?clearTimeout(t[e].timeout):clearTimeout(t[e]),delete t[e])}function Vo(e,t,r){var n=t.target,i=new J(t.viewportX,t.viewportY),o=t.id;So(o,e.g);var a=setTimeout((function(){n&&n===t.target&&i.Wa({x:t.viewportX,y:t.viewportY})<e.Bh&&(Uo(e,n,"longpress",r,t),delete e.l[t.id])}),e.Ch);e.g[o]={timeout:a,Se:i}}function Uo(e,t,r,n,i){if(t&&"function"===typeof t.dispatchEvent){var o,a=Jo,s=e.a.La(),l=e.b.La(),c=(e=e.a).a.length,u=[];for(o=0;o<c;o++)e.a[o].target===t&&u.push(e.a[o]);a=new a(r,s,l,u,i,t,n),i.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(r)?i.a:Io.NONE,t.dispatchEvent(a)}return a}function Wo(e){this.i=A(this.i,this),Oo.call(this,e,[{Sa:"touchstart",listener:this.i},{Sa:"touchmove",listener:this.i},{Sa:"touchend",listener:this.i},{Sa:"touchcancel",listener:this.i}]),this.L={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.J=(e=(e=e.s)?e.N():null)?Array.prototype.slice.call(e.querySelectorAll("a"),0):[]}function Xo(e){var t=Yo(this);(window.PointerEvent||window.MSPointerEvent)&&t.push({Sa:"MSHoldVisual",listener:"prevent"}),Oo.call(this,e,t)}function Yo(e){var t,r,n=!!window.PointerEvent,i=[];return e.i=A(e.i,e),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach((function(o){t=o.toLowerCase().replace(/ms/g,""),r=n?t:o,i.push({Sa:r,listener:e.i,target:/^pointer(up|move)$/.test(t)?window:null})})),i}Do.Button=Io,u(Jo,ud),t("H.mapevents.Event",Jo),p=Ko.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(e){for(var t=this.a.length;t--;)if(this.a[t].id===e)return t;return-1},p.remove=function(e){return-1!==(e=this.indexOf(e))?this.a.splice(e,1)[0]:null},p.push=function(e){if(e instanceof Do)return this.a.push(e);throw Error("list needs a pointer")},p.La=function(){return this.a},p.clone=function(){return new Ko(this.a)},u(Oo,qd),p=Oo.prototype,p.nj=function(e,t,r,n){So(r.id,this.U),this.P[t].call(this,r,n,e)},p.Dl=function(e,t,r){var n=e.id;e.target=t,To(this,e,r),Uo(this,t,"pointerup",r,e),"mouse"!==e.type&&Uo(this,t,"pointerleave",r,e),t=this.l[e.id];var i={x:e.viewportX,y:e.viewportY},o=r.timeStamp,a=e.target,s=this.s;t&&t.target===a&&t.Se.Wa(i)<this.Zk&&o-t.Hi<this.$k?(Uo(this,a,"tap",r,e),s&&s.target===a&&o-s.Hi<this.Tg?s.Se.Wa({x:e.viewportX,y:e.viewportY})<this.gj&&(Uo(this,a,"dbltap",r,e),this.s=null):this.s={target:a,Se:new J(e.viewportX,e.viewportY),Hi:r.timeStamp}):this.s=null,this.l={},So(n,this.g)},p.te=function(e,t){var r=this;Uo(this,e.dragTarget,"drag",t,e),So(e.id,this.U),this.U[e.id]=setTimeout((function(){r.te(e,t)}),150)},p.Cl=function(e,t,r){var n=e.dragTarget,i=e.id,o=e.target;e.target=t,o!==t&&(Uo(this,o,"pointerleave",r,e),Uo(this,t,"pointerenter",r,e)),n?this.c?(this.te(e,r),this.g[i]&&this.g[i].Se.Wa({x:e.viewportX,y:e.viewportY})>this.Bh&&So(i,this.g)):this.u?this.u=!1:(this.c=e,Uo(this,n,"dragstart",r,e),this.te(e,r),delete this.l[i],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==t&&this.c.dragTarget!==this.map)&&Uo(this,t,"pointermove",r,e)},p.Bl=function(e,t,r){var n=!(/^(?:mouse|pen)$/.test(e.type)&&0!==r.button);if(t){e.target=t,this.l[e.id]={Se:new J(e.viewportX,e.viewportY),target:e.target,Hi:r.timeStamp},"mouse"!==e.type&&Uo(this,t,"pointerenter",r,e);var i=Uo(this,t,"pointerdown",r,e);!this.c&&n&&(t.draggable&&!No(this.a,t)?e.dragTarget=t:!this.map.draggable||i.defaultPrevented||No(this.a,this.map)||(e.dragTarget=this.map)),Vo(this,e,r)}},p.Al=function(e,t,r){var n=e.id;e.target=null,t?(Uo(this,t,"pointerleave",r,e),Uo(this,t,"pointercancel",r,e)):Uo(this,this.map,"pointercancel",r,e),To(this,e,r),this.l={},So(n,this.g)},p.o=function(){Po(this,!0),this.a.clear(),this.b.clear();var e,t=this.U;for(e in t)So(e,t);for(var r in t=this.g)So(r,t);delete this.f,delete this.D,delete this.a,delete this.b,delete this.map,this.s=null,delete this.l,this.c=null,qd.prototype.o.call(this)},u(Wo,Oo),Wo.prototype.i=function(e){var t,r=e.touches,n=this.a.length();if("touchstart"===e.type&&n>=r.length){for(n=this.a.clone(),t=r.length;t--;)n.remove(r[t].identifier);for(t=n.length();t--;)this.a.remove((n.a[t]||null).id);this.b=n,Qo(this,"pointercancel",e),this.b.clear()}if(this.L[e.type]){r=Bo(this.m.element),n=e.type;var i,o=(t=e.changedTouches).length;for(this.b.clear(),i=0;i<o;i++){var a=t[i],s=Lo(this.a,a.identifier),l=a.pageX-r.x,c=a.pageY-r.y;if(s)if("touchmove"===n){a=Math.abs(s.viewportX-l);var u=Math.abs(s.viewportY-c);(1<a||1<u||1===a&&1===u)&&(Eo(s,l,c),this.b.push(s))}else"touchend"===n&&(this.a.remove(s.id),this.b.push(s),Ho(s,Io.LEFT));else s=new Do(l,c,a.identifier,"touch",Io.LEFT,1),this.a.push(s),this.b.push(s)}Qo(this,this.L[e.type],e),-1===this.J.indexOf(e.target)&&e.preventDefault()}},Wo.prototype.o=function(){this.J=null,Oo.prototype.o.call(this)},u(Xo,Oo);var Zo={2:"touch",3:"pen",4:"mouse"};function $o(e,t,r,n){$o.j.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=e,this.viewportY=t,this.target=r,this.originalEvent=n}function ap(e){this.ph=A(this.ph,this),this.rh=A(this.rh,this),this.qh=A(this.qh,this),this.J=!1,this.i=-1,this.L=0,ap.j.constructor.call(this,e,[{Sa:"contextmenu",listener:this.ph},{target:e,Sa:"longpress",listener:this.rh},{target:e,Sa:"dbltap",listener:this.qh}])}function bp(e,t,r,n,i){var o=e.map,a=Date.now()-e.L;i?!e.J&&a>e.Ch&&(e.J=!0,i.dispatchEvent(new $o(t,r,i,n)),Fe(o.N(),cp,e.mj,!1,e)):o.Od(t,r,e.Jn.bind(e,t,r,n))}Xo.prototype.i=function(e){var t=window.PointerEvent?e.type:e.type.toLowerCase().replace(/ms/g,""),r=Bo(this.f),n=Lo(this.a,e.pointerId),i=e.pageX-r.x;r=e.pageY-r.y;var o=Zo[e.pointerType]||e.pointerType;if(cd&&"rtl"===x.getComputedStyle(this.m.element).direction&&(i-=(x.devicePixelRatio-1)*this.m.width),!(n||/^pointer(up|out|cancel)$/.test(t)||"touch"===o&&"pointerdown"!==t)){n={x:i,y:r};var a=e.pointerType;"number"===typeof a&&(a=Zo[a]),n=new Do(n.x,n.y,e.pointerId,a,e.button,e.buttons),this.a.push(n)}n&&(/^pointer(up|cancel)$/.test(t)?("touch"===o&&this.a.remove(n.id),Ho(n,e.button)):"pointerdown"===t&&("touch"===e.pointerType&&(Mo(this.a,"mouse"),Mo(this.a,"pen")),Fo(n,e.button)),this.b.push(n),"pointermove"!==t?(Eo(n,i,r),Qo(this,/^pointer(over|out)$/.test(t)?"pointermove":t,e)):n.viewportX===i&&n.viewportY===r||(Eo(n,i,r),Qo(this,t,e))),this.b.clear()},u($o,ud),t("H.mapevents.ContextMenuEvent",$o),u(ap,Oo),p=ap.prototype,p.rh=function(e){var t=e.currentPointer;"touch"===t.type&&1===e.pointers.length&&bp(this,t.viewportX,t.viewportY,e.originalEvent,e.target)},p.qh=function(e){"touch"===e.currentPointer.type&&(this.L=Date.now())},p.ph=function(e){var t=this;-1===this.i?this.i=setTimeout((function(){var r=Bo(t.f),n=e.pageX-r.x;r=e.pageY-r.y,t.i=-1,bp(t,n,r,e)}),this.Tg):(clearInterval(this.i),this.i=-1),e.preventDefault()},p.Jn=function(e,t,r,n){bp(this,e,t,r,n=n&&Da(n.dispatchEvent)?n:this.map)},p.mj=function(){this.J&&(this.J=!1,this.map.dispatchEvent(new ud("contextmenuclose",this.map)))},p.o=function(){var e=this.map.N();clearInterval(this.i),e&&Me(e,cp,this.mj,!1,this),Oo.prototype.o.call(this)};var cp=["mousedown","touchstart","pointerdown","wheel"];function dp(e,t,r,n,i){dp.j.constructor.call(this,"wheel"),this.delta=e,this.viewportX=t,this.viewportY=r,this.target=n,this.originalEvent=i}function ep(e){var t="onwheel"in document;this.T=t,this.L=(t?"d":"wheelD")+"elta",this.i=A(this.i,this),ep.j.constructor.call(this,e,[{Sa:(t?"":"mouse")+"wheel",listener:this.i}]),this.J=this.map.b}function fp(e){this.i=A(this.i,this),Oo.call(this,e,[{Sa:"mousedown",listener:this.i},{Sa:"mousemove",listener:this.i,target:window},{Sa:"mouseup",listener:this.i,target:window},{Sa:"mouseover",listener:this.i},{Sa:"mouseout",listener:this.i},{Sa:"dragstart",listener:this.J}])}function gp(e){var t=e.b.element.style;if(-1!==hp.indexOf(e))throw Error("InvalidArgument: map is already in use");this.a=e,hp.push(e),t.msTouchAction=t.touchAction="none",dd||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Wo(this.a),this.b=new fp(this.a)):this.c=new Xo(this.a),this.g=new ep(this.a),this.f=new ap(this.a),this.a.tb(this.F,this),qd.call(this)}u(dp,ud),t("H.mapevents.WheelEvent",dp),u(ep,Oo),ep.prototype.i=function(e){if(!e.kl){var t=Bo(this.f),r=e.pageX-t.x;t=e.pageY-t.y;var n,i=this.L,o=e[i+(i+"Y"in e?"Y":"")];if(cd&&"rtl"===x.getComputedStyle(this.J.element).direction&&(r-=(x.devicePixelRatio-1)*this.J.width),o){var a=Math.abs,s=a(o);o=(!(n=e[i+"X"])||3<=s/a(n))&&(!(n=e[i+"Z"])||3<=s/a(n))?(+(0<o)-+(0>o))*(this.T?1:-1):0}(r=new dp(o,r,t,null,e)).delta&&(e.stopImmediatePropagation(),e.preventDefault(),this.map.Od(r.viewportX,r.viewportY,this.R.bind(this,r)))}},ep.prototype.R=function(e,t){var r,n,i=e.target=t||this.map;setTimeout((function(){i.dispatchEvent(e),e.c||(r=e.originalEvent,(n=new x.WheelEvent("wheel",r)).kl=!0,r.target.dispatchEvent(n))}),0)},u(fp,Oo),fp.prototype.i=function(e){var t,r=e.type,n=Bo(this.f);n={x:e.pageX-n.x,y:e.pageY-n.y},(t=this.a.a[0]||null)||(t=new Do(n.x,n.y,1,"mouse"),this.a.push(t)),this.b.push(t),Eo(t,n.x,n.y),/^mouse(?:move|over|out)$/.test(r)?Qo(this,"pointermove",e):(/^mouse(down|up)$/.test(r)&&(n=e.which-1,"up"===Co.RegExp.$1?Ho(t,n):Fo(t,n)),Qo(this,r.replace("mouse","pointer"),e)),this.b.clear()},fp.prototype.J=function(e){e.preventDefault()},u(gp,qd),t("H.mapevents.MapEvents",gp);var hp=[];function ip(e,t){var r;if(t=void 0===t?{}:t,ip.j.constructor.call(this),-1!==jp.indexOf(e))throw new D(ip,0,"events are already used");this.b=r=e.a,this.l=e,jp.push(e),r.draggable=!0,this.i=t.kinetics||{duration:600,ease:em},this.s=t.modifierKey||"Alt",this.enable(t.enabled),this.c=r.b,this.f=this.c.element,this.g=0,r.addEventListener("dragstart",this.Mh,!1,this),r.addEventListener("drag",this.bk,!1,this),r.addEventListener("dragend",this.Lh,!0,this),r.addEventListener("wheel",this.rk,!1,this),r.addEventListener("dbltap",this.lk,!1,this),r.addEventListener("pointermove",this.ck,!1,this),Ee(this.f,"contextmenu",this.ak,!1,this),e.tb(this.F,this)}Ic(hp),gp.prototype.F=function(){delete this.a,this.c.F(),this.g.F(),this.f.F(),this.b&&this.b.F(),hp.splice(hp.indexOf(this.a),1),qd.prototype.F.call(this)},gp.prototype.dispose=gp.prototype.F,gp.prototype.Nl=function(){return this.a},gp.prototype.getAttachedMap=gp.prototype.Nl,u(ip,qd),t("H.mapevents.Behavior",ip);var jp=[];Ic(jp),ip.prototype.a=0;var kp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};ip.Feature=kp;var lp=kp.PANNING,mp=kp.PINCH_ZOOM,np=kp.WHEEL_ZOOM,op=kp.DBL_TAP_ZOOM,pp=kp.FRACTIONAL_ZOOM,qp=kp.TILT,rp=kp.HEADING,sp=lp|mp|np|op|pp|qp|rp;function tp(e,t){if(e!==+e||e%1||0>e||2147483647<e)throw new D(t,0,"integer in range [0...0x7FFFFFFF] required")}function up(e,t,r){var n,i="touch"===t.currentPointer.type,o=0;if(n=!i){n=e.s;var a,s=t.originalEvent;a=s.getModifierState?s.getModifierState(n):!!s[n.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],n=a}return n?o|=qp|rp:(o|=lp,i&&(2===(t=t.pointers).length&&(o|=mp|rp,r?55>Dd(t[0].viewportY-t[1].viewportY)&&(o|=qp):e.uh&Nl.TILT&&(o|=qp)))),((o&=e.a)&qp?Nl.TILT:0)|(o&rp?Nl.HEADING:0)|(o&mp?Nl.ZOOM:0)|(o&lp?Nl.COORD:0)}function vp(e){var t=e.pointers;return e=t[0],t=t[1],e=[e.viewportX,e.viewportY],t&&e.push(t.viewportX,t.viewportY),e}function wp(e,t,r,n,i){var o=+r-+t;if(e=e.b.c,isNaN(+t))throw Error("start zoom needs to be a number");if(isNaN(+r))throw Error("to zoom needs to be a number");0!==o&&(e.startControl(null,n,i),e.control(0,0,6,0,0,0),e.endControl(!0,(function(e){e.zoom=r})))}function xp(e){return e=e.uc("_#-;,:","_#-;,:","_#-;,:"),new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function yp(e,t){return Ya.apply(null,arguments),e}function zp(e,t){var r=x.console;r&&r.warn&&(e=yc(e)+" is deprecated and will be removed soon. ",t&&(e+=t),r.warn(e))}ip.DRAGGING=lp,ip.WHEELZOOM=np,ip.DBLTAPZOOM=op,ip.FRACTIONALZOOM=pp,ip.prototype.disable=function(e){var t=this.a;e!==B?(tp(e,this.disable),t^=t&e):t=0,this.c.endInteraction(!0),this.a=t,this.b.draggable=0<(t&(lp|qp|rp|mp))},ip.prototype.disable=ip.prototype.disable,ip.prototype.enable=function(e){var t=this.a;e!==B?(tp(e,this.enable),t|=e&sp):t=sp,this.a=t,this.b.draggable=0<(t&(lp|qp|rp|mp))},ip.prototype.enable=ip.prototype.enable,ip.prototype.isEnabled=function(e){return tp(e,this.isEnabled),e===(this.a&e)},ip.prototype.isEnabled=ip.prototype.isEnabled,p=ip.prototype,p.uh=0,p.Mh=function(e){var t=up(this,e,!0);if(this.uh=t){var r=this.c;if(e=vp(e),r.startInteraction(t,this.i),r.interaction.apply(r,e),this.a&np&&!(this.a&pp)&&(t=e[0],r=e[1],this.g)){e=this.b.pb();var n=(0>this.g?Cd:Bd)(e);e!==n&&(this.g=0,wp(this,e,n,t,r))}}},p.bk=function(e){var t=up(this,e,!1);if(t!==this.uh)"pointerout"!==e.originalEvent.type&&"pointerover"!==e.originalEvent.type&&(this.Lh(e),this.Mh(e));else if(t){t=this.c;var r=vp(e);t.interaction.apply(t,r),e.originalEvent.preventDefault()}},p.Lh=function(e){up(this,e,!1)&&this.c.endInteraction(!this.i)},p.rk=function(e){if(!e.defaultPrevented&&this.a&np){var t=e.delta,r=this.b.pb(),n=this.b,i=n.f.type;n=this.a&pp?r-t:(0>-t?Cd:Bd)(r)-t,i!==kk.P2D&&i!==kk.WEBGL&&i!==kk.HARP||(wp(this,r,n,e.viewportX,e.viewportY),this.g=t),e.preventDefault()}},p.ck=function(){},p.lk=function(e){var t=e.currentPointer,r=this.b.pb(),n=e.currentPointer.type,i=this.b.f.type;(i===kk.P2D||i===kk.WEBGL||i===kk.HARP)&&this.a&op&&(e="mouse"===n?0===e.originalEvent.button?-1:1:0<e.pointers.length?1:-1,wp(this,r,e=this.a&pp?r-e:(0>-e?Cd:Bd)(r)-e,t.viewportX,t.viewportY))},p.ak=function(e){return!(this.a&op)||(e.preventDefault(),!1)},p.F=function(){var e=this.b;e&&(e.draggable=!1,e.removeEventListener("dragstart",this.Mh,!1,this),e.removeEventListener("drag",this.bk,!1,this),e.removeEventListener("dragend",this.Lh,!0,this),e.removeEventListener("wheel",this.rk,!1,this),e.removeEventListener("dbltap",this.lk,!1,this),e.removeEventListener("pointermove",this.ck,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Me(this.f,"contextmenu",this.ak,!1,this),delete this.f),delete this.c,delete this.i,jp.splice(jp.indexOf(this.l),1),delete this.l,qd.prototype.F.call(this)},ip.prototype.dispose=ip.prototype.F,t("H.mapevents.buildInfo",(function(){return Hf("H-mapevents","1.51.0","a104c13",{region:"row"})})),S.prototype.J=ca(3,(function(e){var t=this.getCache(),r=this;if(e!==z){C(e,Rk,S.prototype.J,0);var n=e}else n=yl;n!==t&&t.na((function(e,t,i){return!!r.ub(e)&&(n.add(e,t,i),!0)})),this.P=n})),ti.prototype.a=ca(2,(function(e){this.f=e,(e=this.getState())!==Xh.INIT&&e!==Xh.LOADING&&Ai(this)}));var Ap=globalThis;function Bp(){}tc("monospace serif"),Bp.prototype.pop=function(e){return this[e]||(this[e]=[]),this[e].pop()||document.createElement("canvas")},Bp.prototype.push=function(e,t){this[t]||(this[t]=[]),this[t].push(e)};var Cp=new Bp;function W(e,t,r,n,i,o){if(!e||!t)throw new D(W,B,'Parameters "scheme" and "host" must be specified');this.Bi(e),this.af(t),this.wd(r),this.xi(i),this.Lk(o),this.bf(n)}function Dp(e,t){var r,n,i,o=x.document,a="";if(o){if(a=o.createElement("a"),t){var s=(r=o.getElementsByTagName("base")[0])&&r.href,l=o.head,c=r||l.appendChild(o.createElement("base"));c.href=t}a.href=e,a=a.href,t&&(r?r.href=s:l.removeChild(c))}else/[\w]+:\/\//.test(e)&&(a=e);if(e=(s=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(a))[1],l=s[4],t=s[5],c=s[6],o=s[7],r=s[8],!s[2]&&l&&/@/.test(l)&&(l=l.split("@")[1]),s=W,c=c&&0<c.length?c.substr(1):"",a={},o)for(n=/([?&]?([^=&+]+))(=([^&]+))?/g;i=n.exec(o);)a[decodeURIComponent(i[2])]=i[4]?decodeURIComponent(i[4]):void 0;return new s(e,l,c,a,isNaN(+t)?void 0:+t,r&&0<r.length?r.substr(1):"")}function Gp(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}function Fp(e){var t,r=[],n=e.a,i={};for(t in n){if(n.hasOwnProperty(t)&&"function"!==typeof n[t]){var o=e.a[t];i.yd=Gp(t),C(o,Hp)?o.a.forEach(function(e){return function(t){r.push(e.yd+"="+Gp(t))}}(i)):C(o,Ip)?r.push(i.yd+"="+o.b.map((function(e){return Gp(e)})).join(o.a)):r.push(void 0===o?i.yd:i.yd+"="+Gp(o))}i={yd:i.yd}}return 0<r.length?"?"+r.join("&"):""}function Jp(e){var t=Hf("H-service","1.51.0","a104c13",{region:"row"});return e.a.xnlp="CL_JSMv3."+t.version,e}function Ep(e){var t,r=0;for(t in e.a)if(e.a.hasOwnProperty(t)&&"function"!==typeof e.a[t]&&0<++r)break;return!r}function Kp(e,t){if(Bc(e))for(var r=0;r<e.length;r++){var n=e[r];if(!Cc(n)&&!Fc(n)){var i="The Array does not contain only strings and numbers";break}}else i="Not an Array";if(i)throw new D(t,0,e);return e}function Hp(e){this.a=Kp(e,Hp)}function Ip(e,t){if(this.b=Kp(e,Ip),!/^[!\$\(\)\*\+,;]$/.test(t))throw new D(Ip,1,'Invalid delimiter "'+t+'"');this.a=t}function Lp(e,t){C(e,Mp,Lp,0);var r={};Object.assign(r,t),r.min=r.min||0,r.max=r.max||20,r.tileSize=r.tileSize||512,r.getURL=function(t,n,i){return e.v().clone().G(e.b.og+"/"+e.b.eg+"/"+i+"/"+t+"/"+n+"/"+e.b.format).I(e.f).clone().I({size:r.tileSize})},Ek.call(this,r),this.i=e}function X(e){var t=(e=yp({},this.b,e)).apikey||e.apiKey,r=e.baseUrl;if(r=t?r?0:"baseUrl":"apikey")throw new D(X,0,'"'+r+'" must be specified');this.Nk(e.baseUrl),this.a=t,this.Yb.I({apikey:t}),this.c=e.headers||{},this.f=Wa(e.servicesConfig||{})}function Op(e,t){if(t=void 0===t?{}:t,!e.Qf)throw new $c(e);Op.j.constructor.call(this);var r=Pp(this,t);if(!r.baseUrl&&!r.platformBaseUrl)throw new D(e,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.i=(r.baseUrl?r.baseUrl:r.platformBaseUrl).clone(),(e=r.baseUrl?t:r).host&&this.i.af(e.host),e.subDomain&&this.i.Ba(e.subDomain),e.path&&this.i.wd(e.path),Jp(this.i),this.g=r.headers||{}}function Pp(e,t){return e=e.Aa(),t?yp({},e,t):e}function Qp(e,t,r){return function(n){return"function"!==typeof n.json?Promise.reject(r(Rp(t,n))):n.json().then((function(t){return r(e.a(t))}),(function(){return r(Rp(t,n))}))}}function Rp(e,t){return Error((t.statusText?"["+t.statusText+"] ":"")+e+" request failed")}function Sp(e){Sp.j.constructor.call(this,Sp,e)}function Tp(e){if(!e||!Da(e.requestData))throw new D(Tp,0,"options.requestData");Tp.j.constructor.call(this,e),this.L=e.requestData,this.D=!!e.providesDomMarkers}function Up(){this.a={}}t("H.service.util.eval",(function(a){return eval(a)})),t("H.service.Url",W),W.parse=Dp,W.prototype.clone=function(){var e,t={};for(e in this.a)t[e]=this.a[e];return new W(this.i,this.c,this.b,t,this.g,this.f)},W.prototype.clone=W.prototype.clone,W.prototype.Bi=function(e){if(!e||"string"!==typeof e)throw new D(this.Bi,0,'The "scheme" parameter must be a non-empty string.');return this.i=e,this},W.prototype.setScheme=W.prototype.Bi,W.prototype.Vm=function(){return this.i},W.prototype.getScheme=W.prototype.Vm,W.prototype.af=function(e){if(!e||"string"!==typeof e||"-"===e.charAt(0)||"."===e.charAt(0)||"."===e.charAt(e.length-1))throw new D(this.af,0,'The "host" parameter is not a valid host name.');return this.c=e,this},W.prototype.setHost=W.prototype.af,W.prototype.om=function(){return this.c},W.prototype.getHost=W.prototype.om,W.prototype.wd=function(e){return this.b=e||void 0,this},W.prototype.setPath=W.prototype.wd,W.prototype.Hm=function(){return this.b},W.prototype.getPath=W.prototype.Hm,W.prototype.bf=function(e){if(e){if("object"!=typeof e)throw new D(this.bf,0,'Parameter "params" must be an object.');this.a=e}else this.a={};return this},W.prototype.setQuery=W.prototype.bf,W.prototype.Mj=function(){return!Ep(this)},W.prototype.hasQuery=W.prototype.Mj,W.prototype.getQuery=function(){return this.a},W.prototype.getQuery=W.prototype.getQuery,W.prototype.xi=function(e){if(void 0===e)this.g=e;else{var t=ae(+e<<0,0,65535);if(t!=e)throw new D(this.xi,0,'Parameter "port" must be an integer in range [0...65535]');this.g=t}return this},W.prototype.setPort=W.prototype.xi,W.prototype.Mm=function(){return this.g},W.prototype.getPort=W.prototype.Mm,W.prototype.Lk=function(e){return this.f=e||void 0,this},W.prototype.setAnchor=W.prototype.Lk,W.prototype.kd=function(){return this.f},W.prototype.getAnchor=W.prototype.kd,W.prototype.I=function(e){if("object"!==typeof e)throw new D(this.I,0,'Parameter "other" must be an object.');var t,r=this.a;for(t in e)e.hasOwnProperty(t)&&"function"!==typeof e[t]&&(r[t]=e[t]);return this},W.prototype.mergeQuery=W.prototype.I,W.prototype.Ba=function(e){if(!e||"string"!==typeof e)throw new D(this.Ba,0,'Parameter "subDomain" must be a non-empty string');return"."===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),this.af(e+"."+this.c)},W.prototype.addSubDomain=W.prototype.Ba,W.prototype.G=function(e){if(!e||"string"!==typeof e)throw new D(this.G,0,'Parameter "subPath" must be a non-empty string');return this.wd((this.b?this.b+"/":"")+e)},W.prototype.addSubPath=W.prototype.G,W.prototype.toString=function(){return[this.i+"://",this.c,this.g?":"+this.g:"",this.b||!Ep(this)||this.f?"/":"",this.b?encodeURI(this.b):"",Fp(this),this.f?"#"+encodeURIComponent(this.f):""].join("")},W.prototype.toString=W.prototype.toString,W.MultiValueQueryParameter=Hp,Hp.prototype.fn=function(){return this.a},Hp.prototype.getValues=Hp.prototype.fn,W.DelimitedQuerySubValues=Ip,u(Lp,Ek),t("H.service.rasterTile.Provider",Lp),Lp.prototype.ba=function(e,t){var r=this.i;return Np(r.ba(),r.b.og+"."+r.V(),t,e)},Lp.prototype.getCopyrights=Lp.prototype.ba,Lp.prototype.l=function(){return od()},Lp.prototype.c=function(){return od()?nd():Lp.j.c.call(this)},t("H.service.Platform",X),X.prototype.b={apikey:null,baseUrl:new W("https","hereapi"+(Mn?".cn":".com"))},X.prototype.Nk=function(e){this.Yb=Jp(e.clone()),this.a=e=this.a,this.Yb.I({apikey:e})},X.prototype.setBaseUrl=X.prototype.Nk,X.prototype.Ib=function(){return this.Yb},X.prototype.getBaseUrl=X.prototype.Ib,X.prototype.Ma=function(e,t){try{return e.Qf=!0,new e(yp({platformBaseUrl:this.Ib(),headers:this.c},this.f[e.CONFIG_KEY]||{},t||{}))}finally{e.Qf=!1}},X.prototype.createService=X.prototype.Ma,X.prototype.xf=function(e,t,r){var n=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!Ea(e)&&!Cc(e))throw new D(this.xf,0,"is invalid: must be either a configuration object or a URL");if(!Da(t))throw new D(this.xf,1,"is invalid: must be a Function");if(!Da(r))throw new D(this.xf,2,"is invalid: must be a Function");var i=new H.map.render.harp.Style(e);i.addEventListener("change",(function(){var e=i.getState();if(-1===e)r(Error("H.service.platform#createHybridLayers method failed to load style configuration"));else if(2===e){e={dark:!0};var o=n.lh({resource:"background",queryParams:{style:"satellite.day"}}),a=i.qc(),s={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};a.definitions&&(void 0!==a.definitions["Satellite.Texture.Gamma"]&&(s.styles[0].attr.gamma=a.definitions["Satellite.Texture.Gamma"]),void 0!==a.definitions["Satellite.Texture.Brightness"]&&(s.styles[0].attr.brightness=a.definitions["Satellite.Texture.Brightness"])),o=new Lp(o,{engineType:Qn,style:new H.map.render.harp.Style(s)}),t({raster:new sl(o,e),vector:n.He().$b(i,{engineType:Qn},e),traffic:n.oh().$b(i,{engineType:Qn},e)})}})),i.load()},X.prototype.createHybridLayers=X.prototype.xf,X.prototype.wf=function(e,t,r,n,i,o){function a(e,t,i){t=e.f(t),t=h?new ti(t):new H.map.render.harp.Style(t);var a,s={engineType:c};return p&&p.politicalView&&(s.politicalView=p.politicalView),r&&(s.lg=r),n&&(s.lg2=n),o&&(s.pois=o),i&&(a={dark:i}),e.$b(t,s,a)}function s(e,t,r,n,i){return e.nc(t,r,d,n,y,1,i,u)}var l=this,c=jk,u={crossOrigin:"anonymous"};if(Ea(e)){var p=e;"crossOrigin"in p&&(u.crossOrigin=p.crossOrigin),e=p.tileSize,t=p.ppi,r=p.lg,n=p.lg2,i=p.style,o=p.pois,void 0!==p.engineType&&(c=p.engineType,u.engineType=c)}var f=c===kk.HARP,h=c===kk.WEBGL,d=e||512,y={};if(0>[72,250,320,500].indexOf(+t)){if(t!==B)throw new D(this.wf,1,t)}else y.ppi=+t;if(r&&(y.lg=r),n&&(y.lg2=n),i&&(y.style=i),o&&(y.pois=!!o),f&&!H.map.render.harp)throw new D(this.wf,0,"HARP engine is not supported, module not found");if(e={},Mn)yp(e,{vector:{normal:{map:a(this.He(),"harp/oslo/normal.day.json")}}});else{i=this.ih();var m=this.ih({type:"aerial"}),v=this.nh(),g=v.ej(y.lg?{lg:y.lg,i18n:!0,engineType:c}:{engineType:c});if(yp(e,{raster:{normal:{xbase:s(i,"xbasetile","normal.day","png8",!1),xbasenight:s(i,"xbasetile","normal.night","png8",!0),base:s(i,"basetile","normal.day","png8",!1),basenight:s(i,"basetile","normal.night","png8",!0),map:s(i,"maptile","normal.day","png8",!1),mapnight:s(i,"maptile","normal.night","png8",!0),trafficincidents:g,transit:s(i,"maptile","normal.day.transit","png8",!1),labels:s(i,"labeltile","normal.day","png",!1)},satellite:{xbase:s(m,"xbasetile","hybrid.day","jpg",!0),base:s(m,"basetile","hybrid.day","jpg",!0),map:s(m,"maptile","hybrid.day","jpg",!0),labels:s(m,"labeltile","hybrid.day","png",!0)},terrain:{xbase:s(m,"xbasetile","terrain.day","jpg",!1),base:s(m,"basetile","terrain.day","jpg",!1),map:s(m,"maptile","terrain.day","jpg",!1),labels:s(m,"labeltile","terrain.day","png",!1)}}}),f||h){if(yp(e,{vector:{normal:{traffic:v.dj(void 0,c),trafficincidents:g}}}),i=this.He(),h?(e.vector.normal.map=a(i,"omv/miami/normal.day.yaml"),e.vector.normal.truck=a(i,"omv/miami/truck.day.yaml")):f&&(e.vector.normal.map=a(i,"harp/oslo/normal.day.json"),e.vector.normal.truck=a(i,"harp/oslo/normal.day.json")),i=this.oh(),f){var b={ppi:72<t?400:100,size:256<d?512:256,features:"pois:"+(!0===o||Cc(o)&&/[^0]/.test(o)?"all":"disabled")};r&&(b.lang=r),n&&(b.lang2=n),p&&p.politicalView&&(b.pview=p.politicalView),t={dark:!0},m=function(e,t,r,n,i){var o=yp({},b);return/^explore\./.test(r)||delete o.features,new sl(i=new Lp(e=l.lh({format:t,resource:e,queryParams:yp({style:r},o)}),{engineType:c,style:i}),n)},yp(e.raster.normal,{base:m("background","png8","explore.day"),basenight:m("background","png8","explore.night",t),map:m("base","png8","explore.day"),mapnight:m("base","png8","explore.night",t),labels:m("label","png","explore.day")}),yp(e.raster.satellite,{xbase:m("background","jpeg","satellite.day",t),base:m("background","jpeg","explore.satellite.day",t),map:m("base","jpeg","explore.satellite.day",t),labels:m("label","png","explore.satellite.day")}),v=this.He(),yp(e.vector.normal,{mapnight:a(v,"harp/oslo/normal.night.json",!0),lite:a(v,"harp/oslo/lite.day.json"),litenight:a(v,"harp/oslo/lite.night.json",!0),ism:a(v,"harp/oslo/road.network.day.json"),ismnight:a(v,"harp/oslo/road.network.night.json",!0),roadnetwork:a(v,"harp/oslo/road.network.day.json"),roadnetworknight:a(v,"harp/oslo/road.network.night.json",!0)}),g={styles:[{technique:"raster",attr:{gamma:["interpolate",["linear"],["zoom"],0,1,13,1.2,17,1.3],brightness:["interpolate",["linear"],["zoom"],0,.7,13,.9,17,1]}}]};for(var _=[],w=0;4>w;w++){var x=new H.map.render.harp.Style(JSON.parse(JSON.stringify(g)));x=m("background","jpeg","satellite.day",t,x),_.push(x)}e.hybrid={day:{raster:_[0],vector:a(v,"harp/oslo/hybrid.day.json",!0),traffic:a(i,"harp/oslo/hybrid.day.json",!0)},night:{raster:_[1],vector:a(v,"harp/oslo/hybrid.night.json",!0),traffic:a(i,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:_[2],vector:a(v,"harp/oslo/lite.hybrid.day.json",!0),traffic:a(i,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:_[3],vector:a(v,"harp/oslo/lite.hybrid.night.json",!0),traffic:a(i,"harp/oslo/lite.hybrid.night.json",!0)}}}(t={traffic:{}}).traffic.map=a(i,h?"traffic/vector.tile.yaml":"harp/oslo/normal.day.json"),f&&(t.traffic.mapnight=a(i,"harp/oslo/normal.night.json"),t.traffic.lite=a(i,"harp/oslo/lite.day.json"),t.traffic.litenight=a(i,"harp/oslo/lite.night.json")),yp(e.vector,t)}}return e},X.prototype.createDefaultLayers=X.prototype.wf,u(Op,F),t("H.service.Service",Op),Op.prototype.Aa=function(){return{}},Op.prototype.v=function(){return this.i},Op.prototype.getUrl=Op.prototype.v,Op.prototype.B=function(e,t,r,n){return(n=new tf(void 0===n?"application/json":n,e.toString(),je,{headers:this.g})).then(t,Qp(this,e,r)),n},Op.prototype.a=function(e){return Error(e.message)},u(Sp,Op),t("H.service.traffic.Service7",Sp),Sp.prototype.Aa=function(){return{subDomain:"data.traffic",path:"v7"}},Sp.CONFIG_KEY="traffic_v7",Sp.prototype.qo=function(e,t,r,n){return e=this.v().clone().G(["incidents",e].join("/")).I(t||{}),this.B(e,r,n)},Sp.prototype.requestIncidentById=Sp.prototype.qo,Sp.prototype.oo=function(e,t,r){return e=this.v().clone().G("flow").I(e||{}),this.B(e,t,r)},Sp.prototype.requestFlowByArea=Sp.prototype.oo,Sp.prototype.so=function(e,t,r){return e=this.v().clone().G("incidents").I(e||{}),this.B(e,t,r)},Sp.prototype.requestIncidentsByArea=Sp.prototype.so,u(Tp,S),t("H.map.provider.MarkerTileProvider",Tp),Tp.prototype.B=function(e,t,r,n,i){var o=this;return this.L(e,t,r,(function(i){for(var a,s,l=[],c=i.length;c--;)(s=i[c]).Ho=o.getTileKey(e,t,r),s.ka(o),a=s.xb(),(C(s,bj)||1===a.getState())&&l.push(i[c]);n(l)}),i)},Tp.prototype.requestInternal=Tp.prototype.B,Tp.prototype.Td=function(e,t){t===kh.VISUAL&&(e=this.nb().get(e.Ho))&&(e.valid=!1,this.Va(e))},Tp.prototype.invalidateObject=Tp.prototype.Td,Tp.prototype.Qb=function(){return this.D},Tp.prototype.providesDomMarkers=Tp.prototype.Qb,Tp.prototype.Rb=ff,Tp.prototype.providesMarkers=Tp.prototype.Rb,Up.prototype.xb=function(e,t){var r,n=e+t;return(r=this.a[n])?r:(e=(e=Vp.MARKER.replace("{{icon}}",Wp[e]||Wp.OTHER)).replace("{{color}}",Xp[t]||Xp.BLOCKING),t={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Xi(Yi.POLYGON,Yp.MARKER)},this.a[n]=new Wj(e,t))};var Vp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Wp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Xp={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Yp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Zp(e,t,r){(r=r||{}).criticality||(r.criticality="major,critical"),C(e,$p,Zp,0),Tp.call(this,{max:20,min:8,requestData:A(this.T,this),engineType:r.engineType}),this.f=new Up,this.u=e,this.i=r,this.reload=A(this.reload,this),this.m=setInterval(this.reload,t||18e4)}u(Zp,Tp),t("H.service.traffic.incidents.Provider",Zp);var aq={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Zp.prototype.T=function(e,t,r,n,i){var o=this,a=this.f;return this.u.requestIncidentsByTile(e,t,r,(function(e){var t,r=[];if(e=e.TRAFFIC_ITEMS)for(t=(e=e.TRAFFIC_ITEM).length;t--;){var i=e[t],s=i.TRAFFIC_ITEM_TYPE_DESC;switch(s){case"ACCIDENT":case"CONGESTION":var l=s;break;case"CONSTRUCTION":l="ROADWORKS";break;default:l="OTHER"}l=a.xb(l,aq[i.CRITICALITY.DESCRIPTION]),(s=new Rn({lat:(s=i.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:s.LONGITUDE},{provider:o,icon:l})).setData(i),r.push(s)}n(r)}),i,this.i)},Zp.prototype.F=function(){Tp.prototype.F.call(this),clearInterval(this.m)},Zp.prototype.dispose=Zp.prototype.F;var bq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function cq(e,t,r,n){cq.j.constructor.call(this,{min:10,max:21,engineType:n}),C(e,$p,cq,0),this.m=e,this.f=r||dq,this.f.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),t||18e4),this.b===kk.WEBGL?this.Qa(new ti(Ao()+"/traffic/flow.yaml"),!0):this.Qa(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(cq,S),t("H.service.traffic.flow.Provider",cq),cq.prototype.ei=ff,cq.prototype.providesGeoJSON=cq.prototype.ei,cq.prototype.V=function(){return this.Ya()},cq.prototype.getStyle=cq.prototype.V,cq.prototype.gb=function(e){e.a&&e.a("GeoJSONTileSource"),this.Qa(e)},cq.prototype.setStyle=cq.prototype.gb;var dq={locationreferences:"tmc,shp"};cq.prototype.o=function(){cq.j.o.call(this),clearInterval(this.i)},cq.prototype.B=function(e,t,r,n,i){return this.m.requestFlowByTile(e,t,r,(function(e){e.type&&-1!==e.type.indexOf("Error")?i(e.Details):n(e)}),i,this.f)},cq.prototype.requestInternal=cq.prototype.B,cq.prototype.ac=function(e,t,r,n,i){var o,a,s,l,c,u={type:"FeatureCollection",features:[]},p=n.RWS.length;for(o=0;o<p;o++){var f=n.RWS[o],h=f.RW,d=h.length,y=-1!==bq.indexOf(f.EXTENDED_COUNTRY_CODE+f.EBU_COUNTRY_CODE);for(f=0;f<d;f++){var m=h[f].FIS,v=m.length;for(m=0;m<v;m++){var g=h[f].FIS[m].FI,b=g.length;for(a=0;a<b;a++){var _=g[a],w=[],x=_.CF[0],E=!!x.SSS,S={type:"Feature",properties:x,geometry:{type:"MultiLineString",coordinates:w}};for(S.properties.LHT=y,_.SHP.length&&(S.properties.FC=_.SHP[0].FC),E&&(c=[]),x=0;x<_.SHP.length;x++){var k=_.SHP[x].value,T=k.length;for(s=0;s<T;s++){var O=E?c:void 0,A=new qo(k[s].trim()),P=[],C={};for(A.ge();-1!==(l=A.Pb());)l===eq?(C.lat=+String.fromCharCode.apply(cq,A.Gd()),A.next(),A.ge()):l===fq?(C.lng=+String.fromCharCode.apply(cq,A.Gd()),P.push([C.lng,C.lat]),O&&O.push(ng(C)),C=[],A.next(),A.ge()):A.next();C.lng=+String.fromCharCode.apply(cq,A.Gd()),P.push([C.lng,C.lat]),O&&O.push(ng(C)),l=P,w.push(l)}}u.features.push(S)}}}}return cq.j.ac.call(this,e,t,r,u,i)},cq.prototype.createTileInternal=cq.prototype.ac;var fq=32,eq=44;function gq(e){function t(t){n.contains(i)&&n.removeChild(i),c&&clearTimeout(c),delete gq.a[o],t&&e.pj&&e.pj.call(l,t)}if(!e.url||!e.Og)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!==typeof e.Og)throw Error("Parameters options.callback must be a function");var r=e.cp||document,n=r.getElementsByTagName("head")[0],i=r.createElement("script");r=e.url instanceof W?e.url:Dp(e.url,e.bp);var o=gq.b++,a=e.vl||"callback",s=e.Og,l={},c=null;return l.id=o,l.cancel=function(){t("cancelled")},0!==e.timeout&&(c=x.setTimeout((function(){t("timeout")}),e.timeout||3e4)),gq.a[o]=function(e){t(),s.call(l,e)},i.type="text/javascript",i.src=r.toString()+(r.Mj()?"&":"?")+a+"="+(e.ep?"H.service.jsonp.handleResponse("+o+")":encodeURI("H.service.jsonp.handleResponse("+o+")")),n.appendChild(i),l}function $p(e){$p.j.constructor.call(this,$p,e),this.c=Pp(this,e).callbackKey,this.b=!1}function hq(e,t,r,n){return e.b||(zp($p,"Use HERE Traffic API v7 instead."),e.b=!0),gq({url:t,Og:r,pj:function(e){n(Error("["+e+"] "+t+" request failed"))},vl:e.c})}function iq(e){iq.j.constructor.call(this,iq,e),this.b=Pp(this,e).reverseSubDomain,zp(iq,"Use HERE Geocoding and Search API v7 instead.")}function jq(e){zp(jq,"Use HERE Geocoding and Search API v7 instead."),jq.j.constructor.call(this,jq,e)}function kq(e,t,r,n,i){return t=e.v().clone().G(t).I(r||{}),e.B(t,n,i)}function lq(){this.a={}}function mq(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n,i=t[r],o=e.a[r]||(e.a[r]=[]),a=i.length;for(n=0;n<a;n++)o.push(new nq(i[n]))}}function Np(e,t,r,n){var i=(e=e.a[t])?e.length:0,o=[];for(t=0;t<i;t++)e[t].nd(r,n)&&o.push(e[t]);return o}function nq(e){var t,r=e.boxes;if(this.label=e.label,this.min=e.minLevel,this.max=e.maxLevel,this.b=[],r&&(t=r.length)){var n=r[0],i=new K(n[0],n[1],n[2],n[3]);for(this.b.push(i),this.a=new K(n[0],n[1],n[2],n[3]),e=1;e<t;e++)i=new K((n=r[e])[0],n[1],n[2],n[3]),this.b.push(i),this.a.ec(i,!1,this.a)}}function oq(e,t,r){var n=this,i=r||{},o=+i.min,a=+i.max;i.tileSize=i.tileSize||512,i.min=o?ae(o,1,17):1,i.min+=Pk(i.tileSize,1),i.max=a?ae(a,1,17):17,oq.j.constructor.call(this,i),C(e,pq,oq,0),C(t,Wh,oq,1),this.i=e,t.a&&t.a("OMV"),this.Qa(t,!0),this.m=!1,r&&(r.politicalView&&(this.u=r.politicalView),qq(this,r.lg,r.lg2),this.m=!!r.pois),this.aa=function(){n.T=xp(n),n.reload(!1)},e.addEventListener("versionupdate",this.aa),this.T=xp(this),oq.prototype.qa=function(){var t=/^v2\/vectortiles\/(.+)\/mc$/.exec(e.v().b);return t?t[1]:B+""}()}function qq(e,t,r){var n=Cc(t),i=Cc(r);n&&(e.R=t),i&&(e.L=r),(n||i)&&(e.f=[],(i=(n=/^([a-zA-Z]{2})(-|$)/).exec(t))&&("zh"===i[1]?e.f.push(t):e.f.push(i[1])),(i=n.exec(r))&&("zh"===i[1]?e.f.push(r):e.f.push(i[1])),e.D=!0)}t("H.service.jsonp",gq),gq.mn=function(e){return(e=gq.a[e])?e:function(){}},gq.handleResponse=gq.mn,gq.b=0,gq.a={},u($p,Op),t("H.service.traffic.Service",$p),$p.prototype.Aa=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},$p.CONFIG_KEY="traffic",$p.prototype.dj=function(e,t){return new sl(new cq(this,void 0,e,t),{max:22})},$p.prototype.createFlowLayer=$p.prototype.dj,$p.prototype.ej=function(e){return new Sn(new Zp(this,void 0,e))},$p.prototype.createIncidentsLayer=$p.prototype.ej,$p.prototype.ro=function(e,t,r){return hq(this,e=this.v().clone().G("incidents.json").I(e),t,r)},$p.prototype.requestIncidents=$p.prototype.ro,$p.prototype.po=function(e,t,r,n,i,o){return hq(this,e=this.v().clone().G(["flow/json",r,e,t].join("/")).I(o||{}),n,i)},$p.prototype.requestFlowByTile=$p.prototype.po,$p.prototype.to=function(e,t,r,n,i,o){return hq(this,e=this.v().clone().G(["incidents/json",r,e,t].join("/")).I(o||{}),n,i)},$p.prototype.requestIncidentsByTile=$p.prototype.to,X.prototype.nh=function(e,t){if(6===(t=t||6))t=$p;else{if(7!==t)throw new D(this.nh,1,"allowed values are 6 and 7");t=Sp}return this.Ma(t,e)},X.prototype.getTrafficService=X.prototype.nh,u(iq,Op),t("H.service.GeocodingService",iq),iq.prototype.Aa=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},iq.CONFIG_KEY="geocoding",iq.prototype.a=function(e){return Error(e.Details||e.message||e.error)},iq.prototype.Zg=function(e,t,r){return e=this.v().clone().G("geocode.json").I(e),this.B(e,t,r)},iq.prototype.geocode=iq.prototype.Zg,iq.prototype.ii=function(e,t,r){return e=this.v().clone().G("reversegeocode.json").I(e),this.b&&e.Ba(this.b),this.B(e,t,r)},iq.prototype.reverseGeocode=iq.prototype.ii,iq.prototype.search=function(e,t,r){return e=this.v().clone().G("search.json").I(e),this.B(e,t,r)},iq.prototype.search=iq.prototype.search,X.prototype.km=function(e){return this.Ma(iq,e)},X.prototype.getGeocodingService=X.prototype.km,u(jq,Op),t("H.service.PlacesService",jq),jq.prototype.Aa=function(){return{subDomain:"places.ls",path:"places/v1"}},jq.CONFIG_KEY="places",jq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},jq.prototype.request=function(e,t,r,n){return kq(this,e,t,r,n)},jq.prototype.request=jq.prototype.request,jq.prototype.search=function(e,t,r){return kq(this,"discover/search",e,t,r)},jq.prototype.search=jq.prototype.search,jq.prototype.Go=function(e,t,r){return kq(this,"suggest",e,t,r)},jq.prototype.suggest=jq.prototype.Go,jq.prototype.Fl=function(e,t,r){return kq(this,"discover/explore",e,t,r)},jq.prototype.explore=jq.prototype.Fl,jq.prototype.rl=function(e,t,r){return kq(this,"discover/around",e,t,r)},jq.prototype.around=jq.prototype.rl,jq.prototype.on=function(e,t,r){return kq(this,"discover/here",e,t,r)},jq.prototype.here=jq.prototype.on,jq.prototype.wl=function(e,t,r){return kq(this,"categories/places",e,t,r)},jq.prototype.categories=jq.prototype.wl,jq.prototype.Gl=function(e,t,r,n){return e=Dp(e).I(this.v().getQuery()).I(n||{}),this.B(e,t,r)},jq.prototype.follow=jq.prototype.Gl,X.prototype.Im=function(e){return this.Ma(jq,e)},X.prototype.getPlacesService=X.prototype.Im,nq.prototype.nd=function(e,t){if(e>=this.min&&e<=this.max){if(!(e=this.b.length)||!this.a)return!0;if(this.a.nd(t))for(;e--;)if(this.b[e].nd(t))return!0}return!1},u(oq,S),t("H.service.omv.Provider",oq),oq.prototype.Sb=ff,oq.prototype.providesOMV=oq.prototype.Sb,oq.prototype.ub=function(e){return this.T.test(e)},oq.prototype.cacheFilter=oq.prototype.ub,oq.prototype.uc=function(e,t,r){return rq(this.i,e,t,r).toString()},oq.prototype.getTileKey=oq.prototype.uc,oq.prototype.nb=function(){return this.xa},oq.prototype.getCache=oq.prototype.nb,oq.prototype.Lm=function(){return this.u},oq.prototype.getPoliticalView=oq.prototype.Lm,oq.prototype.yo=function(e){var t=this.u;this.u=e,this.dispatchEvent(new cj("politicalviewchange",this.u,t))},oq.prototype.setPoliticalView=oq.prototype.yo,oq.prototype.MAX_STORE_TIME=2592e6,oq.prototype.l=function(){return od()},oq.prototype.c=function(){return od()?nd():oq.j.c.call(this)},oq.prototype.s=function(){return this.i},oq.prototype.B=function(e,t,r,n,i){return this.i.Ha(e,t,r,n,i)},oq.prototype.requestInternal=oq.prototype.B,oq.prototype.gb=function(e){e.a&&e.a("OMV"),this.Qa(e)},oq.prototype.setStyle=oq.prototype.gb,oq.prototype.V=function(){return oq.j.Ya.apply(this)},oq.prototype.getStyle=oq.prototype.V,oq.prototype.Ya=function(){var e=oq.j.Ya.apply(this),t=e.getState()===Xh.READY,r=e.qc();return t&&r&&r.global&&(this.D&&(this.R&&(r.global.ux_language=this.R),this.L&&(r.global.ux_language_fallback=this.L)),this.m&&r.global.poi&&r.global.poi.default&&(r.global.poi.default.visible=this.m),this.D||this.m)&&(e=new ti(r,e.Ib())),e},oq.prototype.getStyleInternal=oq.prototype.Ya,oq.prototype.D=!1;var sq=["en"];function pq(e){pq.j.constructor.call(this,pq,e);var t=Pp(this,e).mapVersion;this.l=e.queryParams||{},this.b=vc(t)?t:tq[this.v().toString()],vc(this.b)||uq(this)}oq.prototype.hh=function(){return this.f||sq},oq.prototype.getLanguages=oq.prototype.hh,oq.prototype.o=function(){oq.j.o.call(this),this.i.removeEventListener("versionupdate",this.aa)},oq.prototype.xa=new Rk(256),oq.prototype.ba=function(e,t){return Np(this.i.ba(),this.qa,t,e)},oq.prototype.getCopyrights=oq.prototype.ba,u(pq,Op),t("H.service.omv.Service",pq),pq.prototype.Aa=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},pq.CONFIG_KEY="omv";var tq={};function uq(e){e.B(e.v().clone().G("../../info"),(function(t){t=t.mapVersion;var r=e.v().toString();e.b=t,t!==tq[r]&&(tq[r]=t,e.dispatchEvent("versionupdate"))}),(function(){}))}function rq(e,t,r,n){return t=e.v().clone().G(n+"/"+t+"/"+r+"/omv"),vc(e.b)&&t.I({mv:e.b}).I(e.l),t}function vq(e){vq.j.constructor.call(this,vq,e),this.b=e.getToken}function Fq(e,t,r,n){return e.v().clone().G(t+"/layers/"+r+"/features").I(n||{})}function Cq(e,t,r,n,i){return Fq(e,r,n,t=Object.assign({},i,{id:new Hp(t)}))}function Aq(e,t,r,n,i){return e.v().clone().G(r+"/layers/"+n+"/features/"+t).I(i||{})}function yq(e,t,r,n,i,o,a){return a=void 0===a?"application/json":a,r={method:r,headers:Object.assign({},o?{"Content-Type":"application/geo+json"}:void 0,"function"===typeof e.b?{Authorization:"Bearer "+e.b()}:void 0,e.g)},o&&(r.data=JSON.stringify(o)),(o=new tf(a,t.toString(),je,r)).then(n,Qp(e,t,i)),o}function wq(e,t,r,n){zc(r,"String",e,t,"must be a string"),zc(n,"String",e,t+1,"must be a string")}function zq(e,t){zc(t,"String",e,0,"must be a string")}function Bq(e,t){if(!Array.isArray(t)||0===t.length||t.some((function(e){return"string"!==typeof e})))throw new D(e,0,"must be a non-empty array of strings")}function Dq(e,t,r){if(!Ea(r))throw new D(e,t,"must be a GeoJSON object")}function xq(e,t,r,n){if(!Da(r))throw new D(e,t,"must be a function");if(!Da(n))throw new D(e,t+1,"must be a function")}function Gq(e,t,r,n){if(Gq.j.constructor.call(this,n?{min:n.min,max:n.max,engineType:n.engineType}:void 0),C(e,vq,Gq,0),!Cc(t))throw new D(Gq,1,'"catalogHrn" must be a string');if(!Cc(r))throw new D(Gq,2,'"layerId" must be a string');this.u=e,this.f=t,this.i=r,this.m=Ea(n)&&Ea(n.parameters)?n.parameters:{},this.Qa(this.b===kk.WEBGL?new ti({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.f+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function Mp(e){e=void 0===e?{}:e,Mp.j.constructor.call(this,Mp,e),this.b={og:e.resource||"base",eg:e.projection||"mc",format:e.format||"png8"},this.f=e.queryParams||{}}function Hq(e,t,r,n,i,o,a){var s=this;a=a||{},o=o||{};var l=e.v().clone().G(t+"/"+e.vc()+"/"+r).I(o),c=e.c;this.D=e,this.R=l,Ek.call(this,{tileSize:n,max:512===n?19:20,min:512===n?2:0,getURL:function(e,t,r){var o=s.R.clone();return c&&o.Ba(c[(r+t+e)%c.length]),o.G(r+"/"+e+"/"+t+"/"+n+"/"+i),o.toString()},crossOrigin:a.crossOrigin,headers:a.headers,uri:l.toString().replace(/_/g,"")+n,engineType:a.engineType}),this.me=t,this.ab=r,this.xa=o,this.qa=r.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.ba,this.L=!1,e.addEventListener("versionupdate",this.i)}function Iq(e){Iq.j.constructor.call(this,Iq,e),e=Pp(this,e),this.c=e.shards,(this.f=e.ignoreTypes?null:e.type)&&this.v().Ba(this.f),this.b=e.version,this.s=new lq,this.m={},this.l=0,"newest"===this.b&&Jq(this)}function Kq(e,t){for(var r={},n=e[t+"s"][t],i=n.length;i--;)r[n[i].id]=n[i];e[t+"s"]=r}function Jq(e){var t=e.v().clone().G("info").I({output:"json"});e.c&&t.Ba(e.c[0]),e.B(t,(function(t){var r;if(Kq(t=t.response,"map"),Kq(t,"scheme"),Kq(t,"tiletype"),Kq(t,"format"),Kq(t,"resolution"),Kq(t,"language"),"newest"===e.b&&"traffic"!==e.f)for(r in t.maps)t.maps[r].hash&&t.maps[r].newest&&(e.b=t.maps[r].hash,e.dispatchEvent("versionupdate"));e.u=t,e.dispatchEvent("infoupdate")}),(function(e){throw e}))}function Lq(e){var t=e.v().clone().G("copyright").G(e.vc()).I({output:"json"});e.c&&t.Ba(e.c[0]),e.l=1,e.B(t,(function(t){e.l=2,mq(e.s,t),e.dispatchEvent("copyrightupdate")}),(function(t){throw e.l=-1,t}))}function Mq(e){Mq.j.constructor.call(this,Mq,e)}function Nq(e){Nq.j.constructor.call(this,Nq,e),zp(Nq,"Use HERE Routing API v8 instead.")}function Oq(e){Oq.j.constructor.call(this,Oq,e)}function Pq(){}function Qq(){}function Rq(e,t){this.a=e,this.b=t}function Sq(){}function Tq(e,t){this.b=e,this.a=t}function Uq(e,t,r){var n;if(t=t||(e&&e.length?Object.keys(e[0]):B),this.Cb=e,t)for(this.Dd=t,this.Pg=e=oc(),n=t.length;n--;)e[t[n]]=!0;r!==B&&(this.Sh=r)}function Vq(e,t){return e.Cb?e.Cb.push(t):e.Cb=[t],e.Cb.length-1}function Wq(e){var t=Xq;if(!e||!Cc(af(e.layerId,e.layer))||!Fc(e.level)||vc(e.rowFilter)&&!Da(e.rowFilter)||vc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(t,1,vc("invalid layer config")?"invalid layer config":e)}function Yq(e,t,r,n){n=n||Zq,this.a={},n.provider=e,this.invalidate=gf,Yq.j.constructor.call(this,t,n),delete this.invalidate,r&&(this.b=r),this.ra(kh.ADD)}Ic(tq),pq.prototype.Am=function(){return this.b},pq.prototype.getMapVersion=pq.prototype.Am,pq.prototype.$b=function(e,t,r){t=t||{};var n={min:0,max:22};return Ea(r)&&yp(n,r),Mn&&(t.min=n.min=4),new sl(new oq(this,e,t),n)},pq.prototype.createLayer=pq.prototype.$b,pq.prototype.Ha=function(e,t,r,n,i){return this.B(rq(this,e,t,r),(function(e){return e.arrayBuffer().then(n,i)}),i,"arraybuffer")},pq.prototype.f=function(e){return Ao()+"/"+e},pq.prototype.Je=function(e,t){if(!Da(e))throw new D(this.Je,0,'"onResult" must be a function');if(!Da(t))throw new D(this.Je,1,'"onError" must be a function');return this.B(this.v().clone().wd("v2/vectortiles/pviews"),e,t)},pq.prototype.getPoliticalViews=pq.prototype.Je,X.prototype.He=function(e){return this.Ma(pq,e)},X.prototype.getOMVService=X.prototype.He,pq.prototype.s=function(e){mq(this.c,e),this.dispatchEvent("copyrightupdate")},pq.prototype.ba=function(){return this.c||(this.c=new lq,this.B(this.v().clone().G("../../copyrights"),A(this.s,this),ld)),this.c},pq.prototype.getCopyrights=pq.prototype.ba,u(vq,Op),t("H.service.iml.Service",vq),vq.prototype.Aa=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},vq.prototype.a=function(e){var t=[{keys:["code","title","cause","action"],format:function(){return e.code+": "+e.title+"; cause: "+e.cause+"; action: "+e.action}},{keys:["error","error_description"],format:function(){return e.error+": "+e.error_description}},{keys:["error","errorMessage"],format:function(){return e.error+": "+e.errorMessage}}];return Error(Ea(e)?function(){for(var r=ea(t),n=r.next();!n.done;n=r.next()){var i=(n=n.value).format;if(n.keys.every((function(t){return e[t]})))return i()}return JSON.stringify(e)}():e)},vq.prototype.Qd=function(e,t,r,n,i){var o=this.Qd;return wq(o,0,e,t),xq(o,2,r,n),yq(this,e=this.v().clone().G(e+"/layers/"+t+"/statistics").I(i||{}),"GET",r,n)},vq.prototype.getStatistics=vq.prototype.Qd,vq.prototype.Ff=function(e,t,r,n,i,o,a,s,l){var c=l?"":".mvtf";return yq(this,e=this.v().clone().G(n+"/layers/"+i+"/tile/web/"+r+"_"+e+"_"+t+c).I(Object.assign({clip:!0},s)),"GET",l?o:function(e){return e.arrayBuffer().then(o)},a,void 0,l?"application/json":"arraybuffer")},vq.prototype.getFeaturesByTile=vq.prototype.Ff,vq.prototype.wj=function(e,t,r,n,i,o){var a=this.wj;return zq(a,e),wq(a,1,t,r),xq(a,3,n,i),yq(this,e=Aq(this,e,t,r,o),"GET",n,i)},vq.prototype.getFeatureById=vq.prototype.wj,vq.prototype.Sc=function(e,t,r,n,i,o){var a=this.Sc;return Bq(a,e),wq(a,1,t,r),xq(a,3,n,i),yq(this,e=Cq(this,e,t,r,o),"GET",n,i)},vq.prototype.getFeaturesById=vq.prototype.Sc,vq.prototype.Jd=function(e,t,r,n,i){var o=this.Jd;if(!Ea(e)||!(e.bbox||e.north&&e.east&&e.south&&e.west))throw new D(o,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return wq(o,1,t,r),xq(o,3,n,i),yq(this,e=this.v().clone().G(t+"/layers/"+r+"/bbox").I(e),"GET",n,i)},vq.prototype.getFeaturesByBoundingBox=vq.prototype.Jd,vq.prototype.yj=function(e,t,r,n,i){var o=this.yj;if(!(Ea(e)&&e.radius&&(e.lat&&(e.lng||e.lon)||e.refCatalogHrn&&e.refLayerId&&e.refFeatureId)))throw new D(o,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return wq(o,1,t,r),xq(o,3,n,i),yq(this,e=this.v().clone().G(t+"/layers/"+r+"/spatial").I(e),"GET",n,i)},vq.prototype.getFeaturesByPointAndRadius=vq.prototype.yj,vq.prototype.xj=function(e,t,r,n,i,o){var a=this.xj;if(!Ea(e)||!e.radius)throw new D(a,0,'must be an object with "radius"');return Dq(a,1,t),wq(a,2,r,n),xq(a,4,i,o),yq(this,e=this.v().clone().G(r+"/layers/"+n+"/spatial").I(e),"POST",i,o,t)},vq.prototype.getFeaturesByGeometryAndRadius=vq.prototype.xj,vq.prototype.Jk=function(e,t,r,n,i){var o=this.Jk;return wq(o,0,e,t),xq(o,2,r,n),yq(this,e=this.v().clone().G(e+"/layers/"+t+"/search").I(i||{}),"GET",r,n)},vq.prototype.searchFeatures=vq.prototype.Jk,vq.prototype.Wj=function(e,t,r,n,i){var o=this.Wj;return wq(o,0,e,t),xq(o,2,r,n),yq(this,e=this.v().clone().G(e+"/layers/"+t+"/iterate").I(i||{}),"GET",r,n)},vq.prototype.iterateFeatures=vq.prototype.Wj,vq.prototype.$c=function(e,t,r,n,i,o){var a=this.$c;return Dq(a,0,e),wq(a,1,t,r),xq(a,3,n,i),yq(this,t=Fq(this,t,r,o),"PUT",n,i,e)},vq.prototype.putFeatures=vq.prototype.$c,vq.prototype.Yc=function(e,t,r,n,i,o){var a=this.Yc;return Dq(a,0,e),wq(a,1,t,r),xq(a,3,n,i),yq(this,t=Fq(this,t,r,o),"POST",n,i,e)},vq.prototype.postFeatures=vq.prototype.Yc,vq.prototype.hd=function(e,t,r,n,i){var o=this.hd;return Bq(o,e),wq(o,1,t,r),xq(o,3,n,i),yq(this,e=Cq(this,e,t,r),"DELETE",n,i)},vq.prototype.deleteFeatures=vq.prototype.hd,vq.prototype.Ck=function(e,t,r,n,i,o,a){var s=this.Ck;return zq(s,e),Dq(s,1,t),wq(s,2,r,n),xq(s,4,i,o),yq(this,e=Aq(this,e,r,n,a),"PUT",i,o,t)},vq.prototype.putFeature=vq.prototype.Ck,vq.prototype.wk=function(e,t,r,n,i,o,a){var s=this.wk;return zq(s,e),Dq(s,1,t),wq(s,2,r,n),xq(s,4,i,o),yq(this,e=Aq(this,e,r,n,a),"PATCH",i,o,t)},vq.prototype.patchFeature=vq.prototype.wk,vq.prototype.ij=function(e,t,r,n,i){var o=this.ij;return zq(o,e),wq(o,1,t,r),xq(o,3,n,i),yq(this,e=Aq(this,e,t,r),"DELETE",n,i,void 0,"text/plain")},vq.prototype.deleteFeature=vq.prototype.ij,vq.CONFIG_KEY="iml",X.prototype.pm=function(e){return this.Ma(vq,e)},X.prototype.getIMLService=X.prototype.pm,u(Gq,S),t("H.service.iml.Provider",Gq),Gq.prototype.B=function(e,t,r,n,i){return this.u.Ff(e,t,r,this.f,this.i,n,i,this.m)},Gq.prototype.requestInternal=Gq.prototype.B,Gq.prototype.Sb=ff,Gq.prototype.providesOMV=Gq.prototype.Sb,Gq.prototype.V=function(){return this.Ya()},Gq.prototype.getStyle=Gq.prototype.V,Gq.prototype.gb=function(e){C(e,ti)&&e.a("MVT"),this.Qa(e)},Gq.prototype.setStyle=Gq.prototype.gb,u(Mp,Op),t("H.service.rasterTile.Service",Mp),p=Mp.prototype,p.V=function(){return this.f.style||"explore.day"},p.Aa=function(){return{subDomain:"maps",path:"v3"}},p.ba=function(){return this.c||(this.c=new lq,this.B(this.v().clone().G("copyright"),A(this.Kn,this),ld)),this.c},p.Kn=function(e){var t=e.copyrights;e=e.resources;var r={},n=this.b.og+"."+this.V();r[n]=[],e[this.b.og].styles[this.V()].forEach((function(e){t[e].forEach((function(e){var t=[];e.boundingBoxes.forEach((function(e){t.push([e.north,e.west,e.south,e.east])})),r[n].push({boxes:t,label:e.label,alt:e.alt,minLevel:e.minLevel,maxLevel:e.maxLevel})}))})),mq(this.c,r)},p.Fe=function(e,t){return this.B(this.v().clone().G("info"),e,t)},Mp.prototype.getInfo=Mp.prototype.Fe,Mp.prototype.Je=function(e,t){return this.B(this.v().clone().G("politicalViews"),e,t)},Mp.prototype.getPoliticalViews=Mp.prototype.Je,Mp.prototype.jm=function(e,t){return this.B(this.v().clone().G("features"),e,t)},Mp.prototype.getFeatures=Mp.prototype.jm,Mp.prototype.hh=function(e,t){return this.B(this.v().clone().G("languages"),e,t)},Mp.prototype.getLanguages=Mp.prototype.hh,Mp.CONFIG_KEY="rasterTile",X.prototype.lh=function(e){return this.Ma(Mp,e)},X.prototype.getRasterTileService=X.prototype.lh,u(Hq,Ek),Hq.prototype.MAX_STORE_TIME=2592e6,Hq.prototype.B=function(e,t,r,n,i,o){return this.L||(zp(Iq,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.L=!0),Hq.j.B.call(this,e,t,r,n,i,o)},Hq.prototype.requestInternal=Hq.prototype.B,Hq.prototype.o=function(){Ek.prototype.o.call(this),this.D.removeEventListener("versionupdate",this.i)},Hq.prototype.ba=function(e,t){return Np(this.D.ba(),this.qa,t,e)},Hq.prototype.getCopyrights=Hq.prototype.ba,Hq.prototype.i=function(){var e=this.D;this.R=e.v().clone().G(this.me+"/"+e.vc()+"/"+this.ab).I(this.xa),this.reload(!1)},Hq.prototype.l=function(){return od()},Hq.prototype.c=function(){return od()?nd():Hq.j.c.call(this)},u(Iq,Op),t("H.service.MapTileService",Iq),Iq.prototype.Aa=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},Iq.CONFIG_KEY="maptile",Iq.prototype.Hj=function(){return this.f},Iq.prototype.getType=Iq.prototype.Hj,Iq.prototype.vc=function(){return this.b},Iq.prototype.getVersion=Iq.prototype.vc,Iq.prototype.ba=function(){return this.l||(this.b&&"newest"!==this.b||"traffic"===this.f)&&Lq(this),this.s},Iq.prototype.getCopyrights=Iq.prototype.ba,Iq.prototype.Fe=function(){return this.u},Iq.prototype.getInfo=Iq.prototype.Fe,Iq.prototype.ue=function(e,t,r,n,i,o){var a,s=this.v().clone().G(e+"/"+this.vc()+"/"+t+"/"+r+"/"+n).I(i||{}).toString(),l=0,c=s.length;if(0!==c)for(a=0;a<c;a++){l=(l<<5)-l+s.charCodeAt(a),l|=0}return s=l,(l=this.m[s])||(l=new Hq(this,e,t,r,n,i,yp({headers:this.g},o||{})),this.m[s]=l),l},Iq.prototype.createTileProvider=Iq.prototype.ue,Iq.prototype.nc=function(e,t,r,n,i,o,a,s){return new sl(e=this.ue(e,t,r,n,i,s),{opacity:o,dark:!!a})},Iq.prototype.createTileLayer=Iq.prototype.nc,X.prototype.ih=function(e){return this.Ma(Iq,e)},X.prototype.getMapTileService=X.prototype.ih,u(Mq,Op),t("H.service.publicTransit.Service",Mq),Mq.prototype.Aa=function(){return{subDomain:"transit.router",path:"v8"}},Mq.CONFIG_KEY="publicTransit",Mq.prototype.Tm=function(e,t,r){return e=this.v().clone().G("routes").I(e),this.B(e,t,r)},Mq.prototype.getRoutes=Mq.prototype.Tm,Mq.prototype.$l=function(e,t,r){return e=this.v().clone().G("departures").I(e),this.B(e,t,r)},Mq.prototype.getDepartures=Mq.prototype.$l,Mq.prototype.Xm=function(e,t,r){return e=this.v().clone().G("stations").I(e),this.B(e,t,r)},Mq.prototype.getStations=Mq.prototype.Xm,Mq.prototype.a=function(e){return Error(JSON.stringify(e))},X.prototype.Pm=function(e){return this.Ma(Mq,e)},X.prototype.getPublicTransitService=X.prototype.Pm,u(Nq,Op),t("H.service.RoutingService",Nq),Nq.prototype.Aa=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Nq.prototype.a=function(e){return Error(e.details)},Nq.CONFIG_KEY="routing",Nq.prototype.Cd=function(e,t,r){return e=this.v().clone().G("calculateroute.json").I(e),this.B(e,t,r)},Nq.prototype.calculateRoute=Nq.prototype.Cd,Nq.prototype.Ng=function(e,t,r){return e=this.v().clone().Ba("isoline").G("calculateisoline.json").I(e),this.B(e,t,r)},Nq.prototype.calculateIsoline=Nq.prototype.Ng,u(Oq,Op),t("H.service.RoutingService8",Oq),Oq.CONFIG_KEY="routing_v8",Oq.prototype.Aa=function(){return{subDomain:"router",path:"v8/routes"}},Oq.prototype.a=function(e){return Error(401===(e&&void 0===e.status?401:e.status)?e.error_description:e.title,{cause:e})},Oq.prototype.Cd=function(e,t,r){return e=this.v().clone().I(e),this.B(e,t,r)},Oq.prototype.calculateRoute=Oq.prototype.Cd,Oq.prototype.Ng=function(e,t,r){return e=this.v().clone().Ba("isoline").wd("v8/isolines").I(e),this.B(e,t,r)},Oq.prototype.calculateIsoline=Oq.prototype.Ng,X.prototype.Fj=function(e,t){if(7===(t=Mn?8:+t||7))t=Nq;else{if(8!==t)throw new D(this.Fj,1,"allowed values are 7 and 8");t=Oq}return this.Ma(t,e)},X.prototype.getRoutingService=X.prototype.Fj,t("H.service.extension.dataView.ITable",Pq),Pq.prototype.Md=function(){},Pq.prototype.getMeta=Pq.prototype.Md,Pq.prototype.Pd=function(){},Pq.prototype.getRowCount=Pq.prototype.Pd,Pq.prototype.tc=function(){},Pq.prototype.getRow=Pq.prototype.tc,Pq.prototype.Ta=function(){},Pq.prototype.getColumnNames=Pq.prototype.Ta,Pq.prototype.Be=function(){},Pq.prototype.getColumn=Pq.prototype.Be,Pq.prototype.ua=function(){},Pq.prototype.getCell=Pq.prototype.ua,Pq.prototype.concat=function(){},Pq.prototype.concat=Pq.prototype.concat,t("H.service.extension.dataView.IRow",Qq),Qq.prototype.Ta=function(){},Qq.prototype.getColumnNames=Qq.prototype.Ta,Qq.prototype.ua=function(){},Qq.prototype.getCell=Qq.prototype.ua,Qq.prototype.md=function(){},Qq.prototype.getTable=Qq.prototype.md,t("H.service.extension.dataView.ObjRow",Rq),Rq.prototype.Ta=function(){return this.a.Ta()},Rq.prototype.getColumnNames=Rq.prototype.Ta,Rq.prototype.ua=function(e){return this.a.ua(this.b,e)},Rq.prototype.getCell=Rq.prototype.ua,Rq.prototype.md=function(){return this.a},Rq.prototype.getTable=Rq.prototype.md,t("H.service.extension.dataView.IColumn",Sq),Sq.prototype.ua=function(){},Sq.prototype.getCell=Sq.prototype.ua,t("H.service.extension.dataView.ObjColumn",Tq),Tq.prototype.ua=function(e){return this.b.ua(e,this.a)},Tq.prototype.getCell=Tq.prototype.ua,t("H.service.extension.dataView.ObjTable",Uq),p=Uq.prototype,p.Sh=B,p.Cb=B,p.Dd=B,p.Pg=B,p.Md=function(){return this.Sh},Uq.prototype.getMeta=Uq.prototype.Md,Uq.prototype.Pd=function(){return this.Cb?this.Cb.length:0},Uq.prototype.getRowCount=Uq.prototype.Pd,Uq.prototype.tc=function(e){var t=this.Cb;return t&&t[e]?new Rq(this,e):B},Uq.prototype.getRow=Uq.prototype.tc,Uq.prototype.Ta=function(){return this.Dd||hf},Uq.prototype.getColumnNames=Uq.prototype.Ta,Uq.prototype.Be=function(e){return this.Pg[e]?new Tq(this,e):B},Uq.prototype.getColumn=Uq.prototype.Be,Uq.prototype.ua=function(e,t){var r=this.Cb;return(e=r&&this.Pg[t]&&r[e])&&e[t]},Uq.prototype.getCell=Uq.prototype.ua,Uq.prototype.concat=function(){var e,t=arguments.length,r=this.Dd,n=""+this.Dd,i=(this.Cb||[]).slice();for(e=0;e<t;e++){var o=arguments[e];if(!(o instanceof Uq))throw new D(this.concat,e);if(o.Cb){if(r&&""+o.Dd!==n)throw new D(this.concat,e,"Incompatible columns!");i=i.concat(o.Cb)}}return new Uq(i,this.Dd,this.Sh)},Uq.prototype.concat=Uq.prototype.concat,u(Yq,Hh),t("H.service.remote.Spatial",Yq);var Zq={};function $q(e,t){this.a=e,t&&(this.b=t)}Yq.prototype.cb=function(){return this.b||Hh.prototype.cb.call(this)},Yq.prototype.getId=Yq.prototype.cb,Yq.prototype.pg=ld,Yq.prototype.retain=Yq.prototype.pg,Yq.prototype.release=ff,Yq.prototype.release=Yq.prototype.release;var ar=new $q(hf);function br(e,t,r){e.a[t.key]=new $q(r,void 0)}function cr(e,t,r,n){if(!Da(r))throw new D(e,t,"has invalid type");if(!Da(n))throw new D(e,t+1,"has invalid type")}function dr(e,t,r){var n=8===e;this.b=t,this.c=r||ld,(this.a=4===e||n)?this.l=n:this.g=1===e,this.f=this.a?"$HProjGeometry":"geometry"}function er(e,t,r,n,i){var o=[],a=i.paths,s=a.length,l=0,c=e.b&&e.b(n);for(e=new Yq(t,e.l,B,{style:c||e.i,data:n});l!==s;)o.push(gr(a[l++]));return br(e,r,[new Ph(o,i.interiorsIndex,i.outlinesIndex)]),e}function fr(e,t,r,n){n=new kg(n[0],n[1]);var i=e.b&&e.b(r);return e.g?e=new Rn(n,e={icon:i,data:r,provider:t}):e=new bj(n,e={icon:i,data:r,provider:t}),e}function gr(e){for(var t=0,r=e.length,n=[];t<r;)n.push(new J(e[t++],e[t++]));return n}function hr(e,t){var r={};this.c=e,Ya(r,t||r),ok.call(this,r),this.ig={},(e=this.Kb(nh.SPATIAL)).update(e.a+1,kh.ADD)}function ir(e){return e.wc(!0)}function jr(e,t,r){var n,i=t.l&&t.l[r];return!i&&(n=t.s)&&(delete t.s,(t.l=e=e.c.parse(e,t,n))&&(i=e[r])),i||hf}Yq.prototype.Kd=function(e){return(this.a[e.key]||ar).a},Yq.prototype.getGeometriesForTile=Yq.prototype.Kd,Yq.prototype.gh=function(e){return(this.a[e.key]||ar).b},Yq.prototype.getLabels=Yq.prototype.gh,dr.prototype.parse=function(e,t,r){var n,i,o,a,s={},l=[],c=0;for(o=r.length;c<o;c++){var u=r[c],p=u.Rows;if(u=p.length){var f=Object.keys(p[0]).filter((function(e){return"geometry"!==e&&"$HProjGeometry"!==e}));for(f=new Uq(p,f),a=0;a<u;a++){var h=p[a];if(i=h[this.f]){if(delete h[this.f],h=f.tc(a))try{(n=this.a?er(this,e,t,h,i):fr(this,e,h,i.path)).ka(e),l.push(n)}catch(d){this.c(d.message)}}else this.c("Layer must contain geometries")}}}return s[this.a?"spatials":this.g?"markers":"domMarkers"]=l,s},u(hr,ok),t("H.service.remote.ObjectProvider",hr),hr.prototype.F=function(){ok.prototype.F.call(this)},hr.prototype.dispose=hr.prototype.F,hr.prototype.Ec=function(){return hf},hr.prototype.requestMarkers=hr.prototype.Ec,hr.prototype.Dc=function(){return hf},hr.prototype.requestDomMarkers=hr.prototype.Dc,hr.prototype.sd=function(){return hf},hr.prototype.requestOverlays=hr.prototype.sd,hr.prototype.Rb=ff,hr.prototype.providesMarkers=hr.prototype.Rb,hr.prototype.Qb=ff,hr.prototype.providesDomMarkers=hr.prototype.Qb,hr.prototype.Cc=ff,hr.prototype.providesSpatials=hr.prototype.Cc,hr.prototype.kg=function(){return hf},hr.prototype.requestSpatials=hr.prototype.kg,hr.prototype.mg=function(e,t){return e=jr(this,e,kr),t&&(e=e.filter(ir)),e},hr.prototype.requestSpatialsByTile=hr.prototype.mg,hr.prototype.fa=function(e){var t=e.cb();if(this.ig[t])throw new $c(this.fa,"Remote object "+t+" already added");return this.ig[t]=e},hr.prototype.Ga=function(e){delete this.ig[e.cb()]};var kr="spatials";function lr(e){var t=(e=e||{}).tileCacheSize||1024,r=e.resultType,n=e.styleCallback;if(vc(e.min)||(e.min=12),lr.j.constructor.call(this,e),-1===mr.indexOf(r))throw new D(lr,2,"invalid resultType");if(this.f=r,n&&!Da(n))throw new D(lr,2,"invalid style callback");this.aa=n,this.R=e.pixelRatio||Ue(),this.Gb=A(this.Gb,this),this.J(new Rk(t,A(this.ab,this))),this.createTileInternal=A(4===r||8===r?this.T:this.L,this)}function nr(e){var t=e.qa;return t||(e.u||(e.u=e.m(e.f,e.aa,e.Gb)),(t=e.qa=new hr(e.u)).ka(e),t.addEventListener(e.A.za,A(e.xa,e)),t.qa=!0),t}u(lr,S),t("H.service.extension.TileProvider",lr),lr.prototype.i=!1,lr.prototype.getCapabilities=function(){return lr.j.getCapabilities.call(this)|Qj.CROP_LINES_BY_TILE|Qj.CROP_POLYGONS_BY_TILE},lr.prototype.Ha=function(e,t,r,n){return this.i?lr.j.Ha.call(this,e,t,r,n):B},lr.prototype.requestTile=lr.prototype.Ha,lr.prototype.Gb=function(e){this.dispatchEvent(new wd("error",Cc(e)?e:e+"",this))},lr.prototype.Rb=function(){return 1===this.f},lr.prototype.providesMarkers=lr.prototype.Rb,lr.prototype.Qb=function(){return 2===this.f},lr.prototype.providesDomMarkers=lr.prototype.Qb,lr.prototype.Cc=function(){return 4===this.f||8===this.f},lr.prototype.providesSpatials=lr.prototype.Cc,lr.prototype.L=function(e,t,r,n){var i=this.getTileKey(e,t,r);i=this.nb().get(i);var o=2==this.f,a=[],s=nr(this);for(i?i.valid=!0:(delete(e=i=new Xk(e,t,r,z)).l,e.s=n),t=(n=jr(s,i,o?"domMarkers":"markers")).length;t--;)(e=n[t]).Ii=i,(o||1===e.xb().getState())&&a.push(e);return i.data=a,i},lr.prototype.xa=function(e){(e=e.target.Ii)&&(e.valid=!1)},lr.prototype.Ao=function(e){this.D=!!e},lr.prototype.setTileCanvasRendering=lr.prototype.Ao,lr.prototype.D=!0,lr.prototype.T=function(e,t,r,n){var i=nr(this),o=this.getTileKey(e,t,r),a=this.tileSize,s=this.nb().get(o);return s||(delete(e=s=new al(o,e,t,r,a,this.R,r,i)).l,e.s=n),this.D?(n=Cp.pop(a),s.W(n)||Cp.push(n,a)):gl(s),s},lr.prototype.ab=function(e,t){var r;if(4===this.f||8===this.f){for(r=(e=t.Ua()).length;r--;)delete e[r].a[t.key];(e=t.gg())&&(Cp.push(e,this.tileSize),t.hg())}else for(r=(e=t.data).length;r--;)delete e[r].Ii},lr.prototype.o=function(){lr.j.o.call(this),nr(this).F()};var or={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};lr.ResultType=or;var mr=[1,2,4,8];function Xq(e,t,r){var n=this,i=t&&t.rowFilter,o=r.resultType;Xq.j.constructor.call(this,r),C(e,pr,Xq,0),Wq(t),i?(r=Wa(t)).rowFilter=i.toString():r=Wa(t),delete r.layer,r.layerId=af(t.layerId,t.layer),(new Pf).a("pde","H.service.extension.worker.processor"),e=e.v().clone().G(qr+"."+rr).I({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===o,serverUrl:e.toString(),layerConfigs:[r],horizontalMargin:1}]}).then((function(){n.i=!0,n.Va()}),this.Gb)}u(Xq,lr),t("H.service.extension.platformData.TileProvider",Xq),Xq.prototype.m=function(e,t,r){return(e=new dr(e,t,r)).i=sr,e};var sr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function tr(e,t,r,n,i,o){cr(tr,1,t,r),cr(tr,2,n,i),(this.f=e.length)?(this.U=e,this.m=t,this.i=r,this.b=0,this.c=A(this.c,this),this.s=n,this.l=i,this.a=oc(),Ya(this.a,ur,o||{}),this.g={},x.setTimeout(this.c,0)):t(hf,!0)}Xq.prototype.B=function(e,t,r,n,i){var o,a=this,s=this.getTileKey(e,t,r);s=this.nb().get(s);var l={cancel:ld},c=!0,u=this.f;if(s&&(4===u||8===u?s.Ud()||(n(Cp.pop(this.tileSize),null),c=!1):(n(z),c=!1)),c){var p=Ap.setTimeout((function(){(o=new Sf("pde",{message:[a.uid,1,[e,t,r]]})).then(n,i)}),500);l.cancel=function(){o?o.cancel():Ap.clearTimeout(p)}}return l},Xq.prototype.requestInternal=Xq.prototype.B,Xq.prototype.o=function(){Xq.j.o.call(this),new Sf("pde",{message:[this.uid,3]})},Xq.ResultType=or;var ur={duration:100,Kl:"geometry",Jl:"WKT",uo:"searchAttributes",hj:B};function vr(e){this.a=e}function pr(e){pr.j.constructor.call(this,pr,e),zp(pr)}tr.prototype.c=function(){for(var e,t=[],r=!1,n=Lk();this.b<this.f;){var i=this.U[this.b];if(r=i.attributes,e=i.layerId||this.a.hj,i.distance&&(r[this.a.uo]={nearest:new kg(i.nearestLat,i.nearestLon),distance:i.distance}),i=i[this.a.Kl]){try{var o=Wn(new qo(i))}catch(a){this.i(new x.Error(a.message)),r=!0;break}r[this.a.Jl]=o}if((i=this.g[e])||(i=this.g[e]=this.s({layerId:e,columnNames:Object.keys(r)})),r=this.l(i,r),t.push(r),this.b++,(r=this.b===this.f)||Lk()-n>=this.a.duration){this.m(t,r);break}}r?this.g={}:this.u=x.setTimeout(this.c,0)},tr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},tr.prototype.cancel=tr.prototype.cancel,vr.prototype.cancel=function(){for(var e=this.a,t=e.length;t--;)e[t].cancel();e.length=0},vr.prototype.cancel=vr.prototype.cancel,u(pr,Op),t("H.service.extension.platformData.Service",pr),pr.prototype.Aa=function(){return{subDomain:"s.fleet.ls",path:"1"}},pr.CONFIG_KEY="platformData",pr.prototype.request=function(e,t,r,n,i){var o="text/plain";if(!e)throw new D(this.request,0,e);if(!t)throw new D(this.request,1,t);if(!n)throw new D(this.request,3,n);if(!i)throw new D(this.request,4,i);return e=this.v().clone().G(e+"."+t).I(r),t===wr.JSON&&(o="application/json"),this.B(e,n,i,o)},pr.prototype.request=pr.prototype.request;var qr="tiles";pr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:qr,FILE:"file",INDEX:"index"};var rr="json",wr={TXT:"txt",JSON:rr,HTML:"html",BIN:"bin"};function xr(e,t,r,n,i){var o,a=[],s=r.layer_id||r.layer_ids;return e=e.request(t,rr,r,(function(e){o=new tr(e.geometries,n,i,(function(e){return new Uq([],e.columnNames,e)}),(function(e,t){return e.tc(Vq(e,t))}),{hj:s}),a.push(o)}),(function(e){i(new x.Error(e))})),a.push(e),new vr(a)}function yr(e,t,r){if(!Bc(e))throw new D(r,0,"has invalid type");if(!Bc(t))throw new D(r,1,"has invalid type");if(e.length!==t.length||!e.length)throw new D(r,1,"specify one key attribute for each given layer id in the same order")}function zr(e){zr.j.constructor.call(this,zr,e),zp(zr)}function Ar(e){var t=Br;if(!e||!Cc(e.layerId)||vc(e.rowFilter)&&!Da(e.rowFilter)||vc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(t,1,vc("invalid layer config")?"invalid layer config":e)}function Cr(e){return Cc(e)&&/^[A-Z][A-Z0-9_]*$/.test(e)}function Dr(e){for(var t=e&&e.length,r=2<=t&&"WKT"===e[--t]&&"GEOMETRY_ID"===e[--t];r&&t--;)r=Cr(e[t]);return r}function Er(e,t){var r="",n=[];if(t){var i=e.geometries;if(i&&i.length){var o=Object.keys(i[0].attributes);for(r=r+"Meta:\t"+t+"\n"+o.join("\t"),r+="\tWKT\n",e=0;e<i.length;e++){var a=i[e].attributes,s=i[e].geometry;for(t=0;t<o.length;t++)n.push(a[o[t]]);r+=n.join("\t"),r+="\t"+s+"\n",n=[]}}}else{if(s={},n=[],e.geometries)for(i=0;i<e.geometries.length;i++)s[(t=e.geometries[i]).layerId]||(s[t.layerId]=[]),s[t.layerId].push(t);for(o in s)n.push({layerId:o,geometries:s[o]});for(e=0;e<n.length;e++)r+=Er(n[e],n[e].layerId)}return r}function Br(e,t,r){var n,i=this,o=t&&t.rowFilter;Br.j.constructor.call(this,r),C(e,Fr,Br,0);var a=r.resultType;if(Ar(t),o){var s=Wa(t);s.rowFilter=o.toString()}else s=t;(new Pf).a("cle","H.service.extension.worker.processor");var l=t.layerId;e.request(Gr,Hr,{detail_level:"all",layer_id:l},(function(t){var r;for(t=t.layers,r=0;r<t.length;r++)if(t[r].layerId===l){s.level=t[r].level;break}n=e.v().clone().G(Ir+"."+Hr).I({meta:1}),new Sf("cle",{message:[i.uid,0,{tileSize:i.tileSize,projected:!0,onlyOutline:4===a,serverUrl:n.toString(),layerConfigs:[s],batchTiles:!1,horizontalMargin:1}]}).then((function(){i.i=!0,i.Va()}),i.Gb)}),(function(e){i.Gb(e.message)}))}function Jr(){if(Kr)throw new $c(Jr)}pr.EntryPointType=wr,pr.prototype.nc=function(e,t){var r=t&&t.resultType;return e=new Xq(this,e,t),1==r||2===r?new Sn(e):new sl(e)},pr.prototype.createTileLayer=pr.prototype.nc,pr.prototype.Fc=function(e,t,r,n,i,o){function a(e,t){t&&s--,n(e,!s)}var s,l=[];for(yr(e,t,this.Fc),cr(this.Fc,3,n,i),C(r,K,this.Fc,2),r={bbox:r.c+","+r.a+";"+r.f+","+r.b},o&&Ya(r,o),e=r.layer_id?[r.layer_id]:e,o=0,s=e.length;o<s;o++)r.layer_id=e[o],r.key_attribute=t[o],l.push(xr(this,"search/bbox",r,a,i));return new vr(l)},pr.prototype.searchByBoundingBox=pr.prototype.Fc,pr.prototype.Ub=function(e,t,r,n,i,o,a){if(yr(e,t,this.Ub),C(r,kg,this.Ub,2,"has invalid type"),!Fc(n))throw new D(this.Ub,3,"has invalid type");return cr(this.Ub,4,i,o),e={layer_ids:e.join(","),key_attributes:t.join(","),proximity:r.lat+","+r.lng+","+n},a&&Ya(e,a),xr(this,"search/proximity",e,i,o)},pr.prototype.searchByProximity=pr.prototype.Ub,pr.prototype.Tb=function(e,t,r,n,i,o,a){var s="";if(yr(e,t,this.Tb),!Cc(r)&&!C(r,L))throw new D(this.Tb,1,"has invalid type");if(!Fc(n))throw new D(this.Tb,2,"has invalid type");if(cr(this.Tb,4,i,o),e={layer_ids:e.join(","),key_attributes:t.join(","),radius:n},Cc(r))e.route_id=r;else{for(n=r.$,r=0,t=n.length;r<t;r+=3)s+=n[r]+","+n[r+1],r<t-3&&(s+=";");e.corridor=s}return a&&Ya(e,a),xr(this,"search/corridor",e,i,o)},pr.prototype.searchByCorridor=pr.prototype.Tb,X.prototype.Jm=function(e){return this.Ma(pr,e)},X.prototype.getPlatformDataService=X.prototype.Jm,u(zr,Op),t("H.service.extension.geofencing.Service",zr),zr.prototype.Aa=function(){return{subDomain:"fleet.ls",path:"2"}},zr.CONFIG_KEY="geofencing",zr.prototype.request=function(e,t,r,n){if(!e)throw new D(this.request,0,e);if(!Da(r))throw new TypeError("onResult must be a function");if(!Da(n))throw new TypeError("onError must be a function");return e=this.v().clone().G(e+".json").I(t),this.B(e,r,n)},zr.prototype.request=zr.prototype.request,zr.prototype.a=function(e){return Error(e.issues&&e.issues.length?e.issues.map((function(e){return e.message})).join(". "):e.message||e.response_code)},zr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},X.prototype.lm=function(e){return this.Ma(zr,e)},X.prototype.getGeofencingService=X.prototype.lm,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(Br,lr),t("H.service.extension.customLocation.TileProvider",Br),Br.prototype.m=function(e,t,r){return new dr(e,t,r)},Br.prototype.B=function(e,t,r,n,i){var o,a=this,s=this.getTileKey(e,t,r);s=this.nb().get(s);var l={cancel:ld},c=!0,u=this.f;if(s&&(4===u||8===u?s.Ud()||(n(Cp.pop(this.tileSize),null),c=!1):(n(z),c=!1)),c){var p=Ap.setTimeout((function(){(o=new Sf("cle",{message:[a.uid,1,[e,t,r]]})).then(n,i)}),500);l.cancel=function(){o?o.cancel():Ap.clearTimeout(p)}}return l},Br.prototype.requestInternal=Br.prototype.B,Br.prototype.o=function(){Br.j.o.call(this),new Sf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",Jr);var Kr=!0;function Lr(e,t){var r;Kr=!1;var n=new Jr;Kr=!0,n.c=rc(x.JSON.parse(x.JSON.stringify(e))),e=e.columnNames;var i=oc();for(r=e.length;r--;)i[e[r]]=r;if(n.f=i,n.b=e.length,t){if(t.length%e.length)throw new D(Lr,1,"Invalid number of cells")}else t=[];return n.a=t,n}Jr.prototype.Md=function(){return this.c},Jr.prototype.getMeta=Jr.prototype.Md,Jr.prototype.Pd=function(){return this.a.length/this.b},Jr.prototype.getRowCount=Jr.prototype.Pd,Jr.prototype.tc=function(e){return e<this.a.length/this.b?new Mr(this,e):B},Jr.prototype.getRow=Jr.prototype.tc,Jr.prototype.Um=function(){var e,t=this.a.length/this.b,r=new x.Array(t);for(e=0;e<t;e++)r[e]=new Mr(this,e);return r},Jr.prototype.getRows=Jr.prototype.Um,Jr.prototype.Hg=function(e){var t=this.b,r=this.a,n=r.length/this.b;if(!e||e.length%t)throw new D(this.Hg,0,"Invalid number of cells");return this.a=r.concat(e),n},Jr.prototype.addCells=Jr.prototype.Hg,Jr.prototype.ol=function(){for(var e=this.b,t=this.a,r=this.a.length/this.b;e--;)t.push(z);return this.tc(r)},Jr.prototype.addRow=Jr.prototype.ol,Jr.prototype.Ta=function(){return this.c.columnNames},Jr.prototype.getColumnNames=Jr.prototype.Ta,Jr.prototype.Be=function(e){return this.f[e]===B?B:new Nr(this,e)},Jr.prototype.getColumn=Jr.prototype.Be,Jr.prototype.ua=function(e,t){return this.a[e*this.b+this.f[t]]},Jr.prototype.getCell=Jr.prototype.ua,Jr.prototype.Gc=function(e,t,r){if(t=this.f[t],e>=this.a.length/this.b)throw new D(this.Gc,0,"Row index out of bounds");if(t===B)throw new D(this.Gc,0,"Column unknown");this.a[e*this.b+t]=r},Jr.prototype.setCell=Jr.prototype.Gc,Jr.prototype.concat=function(e){var t,r=arguments.length,n=""+this.Ta(),i=this.a?this.a.slice():[];for(t=0;t<r;t++){var o=arguments[t];if(!(o instanceof Jr))throw new D(this.concat,t);if(""+o.Ta()!==n)throw new D(this.concat,t,"Incompatible columns!");o.a&&(i=i.concat(o.a))}return Lr(this.c,i)},Jr.prototype.concat=Jr.prototype.concat;var Or=/(\n|\t|\r|")/;function Pr(e,t,r,n,i,o,a,s){var l;for(l=0;l<a;l++){l&&t.push("\t");var c=r[n*i+o[l]];if(l!==s){if(c!==z){if(c=String(c),Or.test(c))throw new D(e.Gi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+n+" column "+e.c.columnNames[o[l]]);t.push(c)}}else t.push(c)}}function Nr(e,t){this.b=e,this.a=t}function Mr(e,t){this.a=e,this.Nh=t}function Qr(e){if(e===B)e="\t";else if(!/^[^"\r\n]$/.test(e))throw new D(Qr,0);this.b=String(e).charCodeAt(0),this.Oh=A(this.Oh,this),this.C=Rr}Jr.prototype.Gi=function(e,t){var r,n=this.b,i=this.Ta(),o=[],a=[],s=this.a,l=-1;for(r=0;r<n;r++)e&&!e.test(i[r])||("WKT"===i[r]&&(l=o.length),o.push(r));if(!(e=o.length))throw new D(this.Gi,1,"No columns filtered");if(Pr(this,a,i,0,n,o,e,l),t){var c=t.length;for(r=0;r<c;r++)a.push("\n"),Pr(this,a,s,i=t[r],n,o,e,l)}else for(c=this.Pd(),i=0;i<c;i++)a.push("\n"),Pr(this,a,s,i,n,o,e,l);return a.join("")},Jr.Column=Nr,Nr.prototype.ua=function(e){return this.b.ua(e,this.a)},Nr.prototype.getCell=Nr.prototype.ua,Nr.prototype.Gc=function(e,t){this.b.Gc(e,this.a,t)},Nr.prototype.setCell=Nr.prototype.Gc,Jr.Row=Mr,Mr.prototype.Ta=function(){return this.a.Ta()},Mr.prototype.getColumnNames=Mr.prototype.Ta,Mr.prototype.ua=function(e){return this.a.ua(this.Nh,e)},Mr.prototype.getCell=Mr.prototype.ua,Mr.prototype.Gc=function(e,t){this.a.Gc(this.Nh,e,t)},Mr.prototype.setCell=Mr.prototype.Gc,Mr.prototype.md=function(){return this.a},Mr.prototype.getTable=Mr.prototype.md;var Rr=0;function Sr(e,t,r){var n=e.C;if(n!==t)throw 1===n&&(e.C=Rr),new $c(r,"Requires state: "+["READY","PARSE","PAUSE"][t]+" but found "+["READY","PARSE","PAUSE"][n])}function Tr(e,t){var r=[];return e.parse(t,(function(e,t,n){return 1>e&&(r[t]=n),0<e})),e.C=Rr,r}function Ur(e,t,r){this.c=new qo(e),this.s=t,this.g=!0,this.tf=this.l=this.b=0,Vr(this),this.a=r,this.f=[],this.i=!1}function Vr(e){var t=e.c.Pb();e.m=!1,(e.U=34===t)&&e.c.next()}function Wr(e,t){var r=e.c;switch(e.m=!0,t){case e.s:e.b++;break;case 13:r.next(),10!==r.Pb()&&e.a("CR without LF");case 10:e.b=0,e.l++;break;case-1:e.g=!1;break;default:e.a("End of field expected")}return r.next(),-1}function Xr(e,t,r,n){if(n=n||{},!t)throw new D(Xr,1,"has to be a function");if(!r)throw new D(Xr,2,"has to be a function");for(this.s=t,this.u=r,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.l={},this.m={},this.U=n.duration||100,this.c=A(this.c,this),e=e.split("Meta:\t").slice(1),t=0;t<e.length;t++){r=(n=e[t].split("\n"))[0].split("\t")[0],n=n.slice(1).join("\n"),this.b[r]=new Qr,this.g[r]=Tr(this.b[r],n);var i={layerId:r,columnNames:this.g[r]};this.f.push(r),this.m[r]=Lr(i),this.i[r]=Lk(),Yr(this,n,r),this.c(r)}}function Yr(e,t,r){var n=[],i=e.g[r].length-1,o=e.m[r];try{e.b[r].parse(t,(function(t,a,s){var l=!1;return 0<t&&(n[a]=s,a===i&&(e.a.push(o.tc(o.Hg(n))),Lk()-e.i[r]>e.U&&(l=!0))),l}),(function(e,t,r){if(0<e&&t===i)return Wn(r)}))}catch(a){e.u(a)}}function Fr(e){Fr.j.constructor.call(this,Fr,e),zp(Fr)}function Zr(e,t,r,n){var i,o=t[e=e===$r?"changes":"file"],a=Cc(o),s=!a&&C(o,Blob);if(!a&&!s)throw new D(n,0,"Invalid "+e+" parameter");if(as)i=s?o:pf(o,"text/plain"),(n=new x.FormData).append(e,i,i.name||e+".wkt"),r.method="POST",r.data=n,delete t[e];else if(s)throw new D(n,0,"Sending Blob data is not supported by the browser")}p=Qr.prototype,p.getState=function(){return this.C},p.abort=function(){Sr(this,2,Qr.prototype.abort),this.C=Rr},p.Oh=function(e){throw this.C=Rr,new D(Qr.prototype.parse,0,"Malformed DSV at row "+this.a.l+" column "+this.a.b+": "+e)},p.parse=function(e,t,r){Sr(this,Rr,Qr.prototype.parse),e=e.trim(),this.a=new Ur(e,this.b,this.Oh),this.c=t,this.kk=r||gf,this.C=2,this.Ph()},p.kk=gf,p.Ph=function(){var e=this.a,t=[];Sr(this,2,Qr.prototype.Ph),this.C=1;do{if(!e.g){this.C=Rr;break}if(i>e.b){if(void 0!==r&&r!==i)return void this.a.a("The number of columns must be the same for all rows");var r=i}var n=e.l,i=e.b,o=e.tf,a=this.kk(n,i,e);if(e.tf>o)for(;-1!==e.next(););else{for(;-1!==(o=e.next());)t.push(o);a=String.fromCharCode.apply(z,t),t.length=0}Vr(e),this.c(n,i,a)&&(this.C=e.g?2:Rr)}while(1===this.C);2!=this.C&&void 0!==r&&0<i&&r!==i&&this.a.a("The number of columns must be the same for all rows")},p=Ur.prototype,p.tf=0,p.Pb=function(){if(this.m)var e=-1;else{var t=this.c;if(e=t.Pb(),this.U)switch(e){case 34:t.next(),34!==(e=t.Pb())&&(e=Wr(this,e));break;case-1:this.a("Closing quotation mark expected")}else switch(e){case 34:this.a("Unexpected quotation mark");case this.s:case 13:case 10:case-1:e=Wr(this,e)}}return e},p.ge=function(){this.i=!0,this.f=[]},p.Gd=function(){var e=this.f.slice();return this.i=!1,this.f=[],e},p.next=function(){var e=this.Pb();return-1!==e&&this.c.next(),this.i&&this.f.push(e),this.tf++,e},Xr.prototype.cancel=function(){for(var e in this.l)x.clearTimeout(this.l[e])},Xr.prototype.cancel=Xr.prototype.cancel,Xr.prototype.c=function(e){var t,r,n=this;this.l[e]=x.setTimeout((function(){if(2===n.b[e].getState())n.i[e]=Lk(),n.s(n.a,!1),n.a=[],n.b[e].Ph(),n.c(e);else{for(t=!0,r=0;r<n.f.length;r++)if(n.b[n.f[r]].getState()!==Rr){t=!1;break}t&&(0<n.a.length&&n.s(n.a,!0),n.a=[])}}),0)},u(Fr,Op),t("H.service.extension.customLocation.Service",Fr),Fr.prototype.Aa=function(){return{subDomain:"fleet.ls",path:"2"}},Fr.CONFIG_KEY="customLocation",Fr.prototype.nc=function(e,t){var r=t&&t.resultType;return e=new Br(this,e,t),1===r||2===r?new Sn(e):new sl(e)},Fr.prototype.createTileLayer=Fr.prototype.nc;var as=x.FormData&&!!x.FormData.prototype.append;function bs(e,t,r,n,i,o){var a="text/plain",s=t===cs.LAYERS_UPLOAD||t===cs.LAYERS_MODIFY||t===cs.LAYERS_IMPORT,l=n,c={data:B,method:"GET",headers:e.g};if(!t)throw new D(e.request,0,t);if(!r)throw new D(e.request,1,r);cr(e.request,3,i,o),s&&(C(n,Object,e.request,2,"Invalid request parameters"),Zr(t,l=Wa(n),c,e.request));var u=e.v().clone().G(t+"."+r).I(l);return r===ds.JSON&&(a="application/json"),(e=new tf(a,u.toString(),je,c)).then((function(e){var t=e.issues;t&&e.error_id&&e.response_code?o(Error(t[0].message)):i(e)}),(function(e){"error"===e.type||404===e.status?o(Error(e.statusText||"Unable to load data")):e.json().then((function(e){o(Error("["+e.issues[0].message+"] "+u+" request failed"))}),(function(){o(Error("["+e.statusText+"] "+u+" request failed"))}))})),e}Fr.prototype.request=function(e,t,r,n,i){return bs(this,e,t,r,n,i)},Fr.prototype.request=Fr.prototype.request;var Gr="layers/list",$r="layers/modify",Ir="tiled/tile",cs={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:Gr,LAYERS_MODIFY:$r,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Ir};Fr.EntryPoint=cs;var Hr="json",ds={TXT:"txt",JSON:Hr};function es(e,t,r,n,i){var o,a=[];return e=e.request(t,Hr,r,(function(e){e.geometries.length?(e=Er(e,r.layer_id),o=new Xr(e,n,i),a.push(o)):n(hf,!0)}),i),a.push(e),new vr(a)}Fr.EntryPointType=ds,Fr.prototype.ob=function(e,t,r){var n=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:e},(function(i){var o=String(i).replace(/[\r\n]+$/g,"").split("\t");n.request(Gr,Hr,{layer_id:e,detail_level:"all"},(function(e){(e=e.layers[0]).columnNames=o,t(Lr(e))}),r)}),r)},Fr.prototype.getLayer=Fr.prototype.ob,Fr.prototype.Kj=function(e,t,r,n){var i=t&&t.length,o=-1,a=this;return function s(){return++o<i?a.request("layers/access/grant",Hr,{layer_id:e,granted_app_id:t[o].grantedAppId,permissions:t[o].permissions.join(",")},s,n):a.ob(e,r,n)}()},Fr.prototype.grantAccess=Fr.prototype.Kj,Fr.prototype.jj=function(e,t,r){return this.request("layers/delete",Hr,{layer_ids:e},t,r)},Fr.prototype.deleteLayer=Fr.prototype.jj,Fr.prototype.$b=function(e,t,r){function n(){setTimeout((function(){l.ob(a,(function(e){setTimeout(i.bind(null,e),u)}),(function(){64e3>c?(c+=u,n()):r(x.Error("Timeout"))}))}),u),u*=2}function i(n){var i=JSON.stringify(n.Ta()),o=e.grants;if(i!==JSON.stringify(s)){var c="Results into different column names on the backend: "+i;setTimeout((function(){l.jj(a,(function(){r(x.Error(c))}),(function(e){r(x.Error(c+". "+e.message))}))}),u)}else o&&o.length?l.Kj(a,o,t,r):t(n)}var o,a,s,l=this,c=0,u=1e3,p=!e||!Cr(a=e.layerId)&&(o="layerId")||!Dr(s=e.columnNames)&&(o="columnNames")?0:Da(t)?Da(r)?-1:2:1;if(0<=p)throw new D(l.$b,p,o||arguments[p]);return l.ob(a,(function(){r(x.Error("Layer exists already"))}),(function(){var t={layer_id:a,file:s.join("\t")},i=e.level,o=e.storage;i!==B&&(t.level=i),o!==B&&(t.storage=o),l.request("layers/upload",Hr,t,n,r)}))},Fr.prototype.createLayer=Fr.prototype.$b,Fr.prototype.Ub=function(e,t,r,n,i,o){if(!Bc(e))throw new D(this.Ub,0,"has invalid type");if(C(t,kg,this.Ub,1,"has invalid type"),!Fc(r))throw new D(this.Ub,2,"has invalid type");return cr(this.Ub,3,n,i),e={layer_ids:e.join(","),proximity:t.lat+","+t.lng+","+r},o&&Ya(e,o),es(this,"search/proximity",e,n,i)},Fr.prototype.searchByProximity=Fr.prototype.Ub,Fr.prototype.Tb=function(e,t,r,n,i,o){var a="";if(!Bc(e))throw new D(this.Tb,0,"has invalid type");if(!Cc(t)&&!C(t,L))throw new D(this.Tb,1,"has invalid type");if(!Fc(r))throw new D(this.Tb,2,"has invalid type");if(cr(this.Tb,3,n,i),e={layer_ids:e.join(","),radius:r},Cc(t))e.route_id=t;else{var s=t.$;for(t=0,r=s.length;t<r;t+=3)a+=s[t]+","+s[t+1],t<r-3&&(a+=",");e.corridor=a}return o&&Ya(e,o),es(this,"search/corridor",e,n,i)},Fr.prototype.searchByCorridor=Fr.prototype.Tb,Fr.prototype.Fc=function(e,t,r,n,i){function o(e,t){t&&a--,r(e,!a)}var a,s=[];if(!Bc(e))throw new D(this.Fc,0,"has invalid type");for(C(t,K,this.Fc,1,"has invalid type"),cr(this.Fc,2,r,n),t={bbox:t.c+","+t.a+";"+t.f+","+t.b},i&&Ya(t,i),e=t.layer_id?[t.layer_id]:e,i=0,a=e.length;i<a;i++)t.layer_id=e[i],s.push(es(this,"search/bbox",t,o,n));return new vr(s)},Fr.prototype.searchByBoundingBox=Fr.prototype.Fc,Fr.prototype.li=function(e,t,r,n){var i,o=[];if(!Cc(e))throw new D(this.li,0,"has invalid type");cr(this.li,1,t,r);var a={layer_id:e};return n&&Ya(a,n),n=this.request("search/all",Hr,a,(function(n){n.geometries.length?(n=Er(n,e),i=new Xr(n,t,r),o.push(i)):t(hf,!0)}),r),o.push(n),new vr(o)},Fr.prototype.searchAll=Fr.prototype.li;var fs={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function gs(e,t,r,n,i,o){function a(){d++,n(this,d===f)}function s(e){d++,i(e,this,d===f)}var l,c="append"!==t,u={},p=oc(),f=0,h=[],d=0;if(!Bc(r))throw new D(o,0,r);for(cr(o,1,n,i),l=r.length;l--;){var y=r[l];if(C(y,Mr)){var m=y.md().Md().layerId,v=y.ua("GEOMETRY_ID");if(c){if(v===z||""===String(v))var g='GEOMETRY_ID must not be null or ""';u[v=m+"_"+v]&&(g="same GEOMETRY_ID for multiple rows"),u[v]=y}else v!==z&&""!==String(v)&&(g='GEOMETRY_ID must be null or ""')}else g="Invalid type";if(g)throw new D(o,0,"- Invalid row at index "+l+", "+g);(v=p[m])||(v=p[m]=[],f++),v.push(y)}for(m in p){for(r=[],l=(v=p[m]).length;l--;)r.push(v[l].Nh);h.push(e.request($r,Hr,{layer_id:m,action:t,changes:v[0].md().Gi(fs[t]||null,r)},A(a,v),A(s,v)))}return new vr(h)}function hs(e){jq.j.constructor.call(this,hs,e),zp(hs)}function is(e,t,r){var n=+(r=r||{}).min,i=+r.max;r.min=n?ae(n,1,17):1,r.max=i?ae(i,1,17):17,is.j.constructor.call(this,r),C(e,js,is,0),C(t,Wh,is,1),this.f=e,t.a&&t.a("OMV"),this.Qa(t,!0),this.i=xp(this)}function js(e){js.j.constructor.call(this,js,e),this.b=(e||jf).layer||"traffic"}function ks(e,t,r,n){return e.v().clone().G("traffictiles/"+e.b+"/mc/"+n+"/"+t+"/"+r+"/omv")}function ls(e){ls.j.constructor.call(this,ls,e)}function ms(e){if(this.c=!!e.toBypassToken,!this.c&&!e.token)throw new D(ms,0,'"token" must be specified');zp(ms,"Use HERE IML service instead."),ms.j.constructor.call(this,ms,e),this.l=e.token,this.f={},this.b={}}function rs(e,t,r,n,i,o,a){return i={method:i,headers:Object.assign(e.c?{}:{authorization:"Bearer "+e.l},{"Content-Type":"application/geo+json"},e.g)},o&&(i.data=JSON.stringify(o)),(o=new tf("application/json",(t=os(e.v().clone().G(t+"/features").I(a||{}))).toString(),je,i)).then(r,Qp(e,t,n)),o}function qs(e,t){e.b[t]=ss,e.Kf(t,(function(r){e.b[t]=ts,e.f[t]=r.copyright,e.dispatchEvent("copyrightupdate")}),(function(r){throw e.b[t]=us,r}))}function ps(e,t){return e.c?t:os(t).I({access_token:e.l})}function os(e){var t=Object.assign({},e.getQuery());return delete t.apikey,e.bf(t)}Fr.prototype.$i=function(e,t,r){return gs(this,"append",e,t,r,this.$i)},Fr.prototype.appendRows=Fr.prototype.$i,Fr.prototype.il=function(e,t,r){return gs(this,"update",e,t,r,this.il)},Fr.prototype.updateRows=Fr.prototype.il,Fr.prototype.kj=function(e,t,r){return gs(this,"delete",e,t,r,this.kj)},Fr.prototype.deleteRows=Fr.prototype.kj,X.prototype.Yl=function(e){return this.Ma(Fr,e)},X.prototype.getCustomLocationService=X.prototype.Yl,u(hs,Op),t("H.service.extension.customRoute.Service",hs),hs.prototype.Aa=function(){return{subDomain:"s.fleet.ls",path:"2"}},hs.CONFIG_KEY="customRoute",hs.prototype.a=function(e){return Error(e.issues&&e.issues.length?e.issues.map((function(e){return e.message})).join(". "):e)},hs.prototype.Cd=function(e,t,r){return cr(this.Cd,1,t,r),e=this.v().clone().G("calculateroute.json").I(e),this.B(e,t,r)},hs.prototype.calculateRoute=hs.prototype.Cd,X.prototype.Zl=function(e){return this.Ma(hs,e)},X.prototype.getCustomRoutingService=X.prototype.Zl,u(is,S),t("H.service.trafficVectorTile.Provider",is),is.prototype.Sb=ff,is.prototype.providesOMV=is.prototype.Sb,is.prototype.ub=function(e){return this.i.test(e)},is.prototype.cacheFilter=is.prototype.ub,is.prototype.uc=function(e,t,r){return ks(this.f,e,t,r).toString()},is.prototype.getTileKey=is.prototype.uc,is.prototype.nb=function(){return this.m},is.prototype.getCache=is.prototype.nb,is.prototype.MAX_STORE_TIME=2592e6,is.prototype.l=function(){return od()},is.prototype.c=function(){return od()?nd():is.j.c.call(this)},is.prototype.s=function(){return this.f},is.prototype.B=function(e,t,r,n,i){return this.f.Ha(e,t,r,n,i)},is.prototype.requestInternal=is.prototype.B,is.prototype.gb=function(e){e.a&&e.a("OMV"),this.Qa(e)},is.prototype.setStyle=is.prototype.gb,is.prototype.V=function(){return is.j.Ya.apply(this)},is.prototype.getStyle=is.prototype.V,is.prototype.m=new Rk(256),is.prototype.ba=function(){return null},is.prototype.getCopyrights=is.prototype.ba,u(js,Op),t("H.service.trafficVectorTile.Service",js),js.prototype.Aa=function(){return{subDomain:"traffic.vector",path:"v2"}},js.CONFIG_KEY="trafficVectorTile",js.prototype.$b=function(e,t,r){t=t||{};var n={min:0,max:22};return Ea(r)&&yp(n,r),new sl(new is(this,e,t),n)},js.prototype.createLayer=js.prototype.$b,js.prototype.Ha=function(e,t,r,n,i){return this.B(ks(this,e,t,r),(function(e){return e.arrayBuffer().then(n,i)}),i,"arraybuffer")},js.prototype.f=function(e){return Ao()+"/"+e},js.prototype.vm=function(){return this.b},js.prototype.getLayerName=js.prototype.vm,X.prototype.oh=function(e){return this.Ma(js,e)},X.prototype.getTrafficVectorTileService=X.prototype.oh,u(ls,Op),t("H.service.SearchService",ls),ls.CONFIG_KEY="search",ls.prototype.Aa=function(){return{subDomain:"search",path:"v1"}},ls.prototype.a=function(e){return e=[e.title,e.action,e.cause].filter((function(e){return e})),Error(e.join(". "))},ls.prototype.Zg=function(e,t,r){return e=this.v().clone().Ba("geocode").G("geocode").I(e),this.B(e,t,r)},ls.prototype.geocode=ls.prototype.Zg,ls.prototype.ii=function(e,t,r){return e=this.v().clone().Ba("revgeocode").G("revgeocode").I(e),this.B(e,t,r)},ls.prototype.reverseGeocode=ls.prototype.ii,ls.prototype.sl=function(e,t,r){return e=this.v().clone().Ba("autosuggest").G("autosuggest").I(e),this.B(e,t,r)},ls.prototype.autosuggest=ls.prototype.sl,ls.prototype.zl=function(e,t,r){return e=this.v().clone().Ba("discover").G("discover").I(e),this.B(e,t,r)},ls.prototype.discover=ls.prototype.zl,ls.prototype.Gn=function(e,t,r){return e=this.v().clone().Ba("lookup").G("lookup").I(e),this.B(e,t,r)},ls.prototype.lookup=ls.prototype.Gn,ls.prototype.ul=function(e,t,r){return e=this.v().clone().Ba("browse").G("browse").I(e),this.B(e,t,r)},ls.prototype.browse=ls.prototype.ul,X.prototype.Wm=function(e){return this.Ma(ls,e)},X.prototype.getSearchService=X.prototype.Wm,u(ms,Op),t("H.service.xyz.Service",ms),ms.prototype.Aa=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},ms.prototype.a=function(e){return Error(e.errorMessage||e.message)},ms.prototype.jh=function(e,t,r){return zc(e,"String",this.jh,0,'"projectId" must be a string'),ns(this.jh,1,t,r),e=os(this.v().clone().wd("project-api/projects/"+e)),this.B(e,t,r)},ms.prototype.getProject=ms.prototype.jh,ms.prototype.Gj=function(e,t,r){return ns(this.Gj,0,e,t),r=ps(this,this.v().clone().I(r||{})),this.B(r,e,t)},ms.prototype.getSpaces=ms.prototype.Gj,ms.prototype.Kf=function(e,t,r){return zc(e,"String",this.Kf,0,'"spaceId" must be a string'),ns(this.Kf,1,t,r),e=ps(this,this.v().clone().G(e)),this.B(e,t,r)},ms.prototype.getSpace=ms.prototype.Kf,ms.prototype.Qd=function(e,t,r){return zc(e,"String",this.Qd,0,'"spaceId" must be a string'),ns(this.Qd,1,t,r),e=ps(this,this.v().clone().G(e+"/statistics")),this.B(e,t,r)},ms.prototype.getStatistics=ms.prototype.Qd,ms.prototype.Ff=function(e,t,r,n,i,o,a){return e=ps(this,this.v().clone().G(n+"/tile/web/"+r+"_"+e+"_"+t+".mvtf").I(Object.assign({clip:!0},a))),this.B(e,(function(e){return e.arrayBuffer().then(i)}),o,"arraybuffer")},ms.prototype.search=function(e,t,r,n){return zc(e,"String",this.search,0,'"spaceId" must be a string'),ns(this.search,1,t,r),e=ps(this,this.v().clone().G(e+"/search").I(n||{})),this.B(e,t,r)},ms.prototype.search=ms.prototype.search,ms.prototype.Sc=function(e,t,r,n){if(zc(e,"String",this.Sc,0,'"spaceId" must be a string'),!Ea(t))throw new D(this.Sc,1,'"params" must be an object');return ns(this.Sc,2,r,n),e=ps(this,this.v().clone().G(e+"/features").I(t)),this.B(e,r,n)},ms.prototype.getFeaturesById=ms.prototype.Sc,ms.prototype.Jd=function(e,t,r,n){if(zc(e,"String",this.Jd,0,'"spaceId" must be a string'),!Ea(t))throw new D(this.Sc,1,'"params" must be an object');return ns(this.Jd,2,r,n),e=ps(this,this.v().clone().G(e+"/bbox").I(t)),this.B(e,r,n)},ms.prototype.getFeaturesByBoundingBox=ms.prototype.Jd,ms.prototype.ba=function(e){var t=this.f[e];return t||(this.b[e]||qs(this,e),null)},ms.prototype.$c=function(e,t,r,n,i){if(zc(e,"String",this.$c,0,'"spaceId" must be a string'),!Ea(t))throw new D(this.$c,1,'"geojsonObject" must be an object');if(ns(this.$c,2,r,n),i&&!Ea(i))throw new D(this.$c,4,'"opt_params" must be an object');return rs(this,e,r,n,"PUT",t,i)},ms.prototype.putFeatures=ms.prototype.$c,ms.prototype.Yc=function(e,t,r,n,i){if(zc(e,"String",this.Yc,0,'"spaceId" must be a string'),!Ea(t))throw new D(this.Yc,1,'"featureCollection" must be an object');if(ns(this.Yc,2,r,n),i&&!Ea(i))throw new D(this.Yc,4,'"opt_params" must be an object');return rs(this,e,r,n,"POST",t,i)},ms.prototype.postFeatures=ms.prototype.Yc,ms.prototype.hd=function(e,t,r,n){if(zc(e,"String",this.hd,0,'"spaceId" must be a string'),!Ea(t))throw new D(this.hd,1,'"params" must be an object');return ns(this.hd,2,r,n),rs(this,e,r,n,"DELETE",B,t)},ms.prototype.deleteFeatures=ms.prototype.hd,ms.CONFIG_KEY="xyz";var ss=1,ts=2,us=-1;function ns(e,t,r,n){if(!Da(r))throw new D(e,t,'"onResult" must be a function');if(!Da(n))throw new D(e,t+1,'"onError" must be a function')}function vs(e,t,r){var n;if(vs.j.constructor.call(this,r?{min:r.min,max:r.max,engineType:r.engineType}:void 0),C(e,ms,vs,0),!Cc(t))throw new D(vs,1,'"spaceId" must be a string');if(this.m=e,this.f=t,this.i={},r&&(["limit","simplificationLevel","tags"].forEach((function(e){e in r&&(this.i[e]=r[e])}),this),e=r.parameters))for(n in e)this.i[n]=e[n];this.Qa(this.b===kk.WEBGL?new ti({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.f},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.f,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.f,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.f,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.f,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function ws(e,t,r,n,i){1&i&&xs(e,e,t,r,n,0),2&i&&xs(e,e,t,r,n,1),4&i&&xs(e,e,t,r,n,2),8&i&&xs(e,e,t,r,n,3)}function xs(e,t,r,n,i,o){for(var a,s,l,c,u=(r+1)*(r+1),p=4*n,f=r+1,h=[{r:0,Hl:0,tl:0,Fg:0,next:null}],d=1,y=["r","g","b","a"][o],m=2*r+1;d<m;d++)h[d]={r:0,Hl:0,tl:0,Fg:0,next:null},h[d-1].next=h[d];h[2*r].next=h[0];var v=4*(n-1);for(a=0;a<i;a++){var g=a*p,b=e[g+o],_=b*f*(r+2)/2;for(m=b*f,d=0;d<=r;d++)h[d][y]=b;var w=0;for(d=1;d<=r;d++){var x=d<n?g+4*d:g+v;_+=(x=e[x+o])*(f-d),w+=x,h[r+d][y]=x}x=h[0],l=h[f],d=g,c=4*f;var E=g+v;for(b=0;b<n;b++){t[d+o]=_/u,_-=m;var S=b+f<n?d+c:E;if(_+=w+=S=e[S+o],m-=x[y],m+=l[y],w-=l[y],x[y]=S,x=x.next,l=l.next,d+=4,!_)for(;(s=4*(b+f))<p&&0===e[g+o+s];)b++,d+=4}}for(g=(i-1)*p,b=0;b<n;b++){for(_=(a=t[(e=4*b)+o])*f*(r+2)/2,m=a*f,d=0;d<=r;d++)h[d][y]=a;for(w=0,d=1;d<=r;d++)_+=(x=t[(x=d<i?e+d*p:e+g)+o])*(r-d+1),w+=x,h[r+d][y]=x;for(x=h[0],l=h[f],d=e,E=f*p,v=e+g,a=0;a<i;a++)if(t[d+o]=_/u,_-=m,_+=w+=S=t[(S=a+f<i?d+E:v)+o],m-=x[y],m+=l[y],w-=l[y],x[y]=S,x=x.next,l=l.next,d+=p,!_)for(;(s=a+f)<i&&0===t[s*p+o+e];)a++,d+=p}}function ys(e,t,r){this.f=t=e>>t,this.l=Math.log(t)*Math.LOG2E,this.i=e=document.createElement("CANVAS"),this.a=e.getContext("2d"),this.b=e.width=e.height=3*t;var n=document.createElement("canvas");e=r.a;var i,o=r.b;for(a in t=[],n.width=256,n.height=1,n=n.getContext("2d"),o)o.hasOwnProperty(a)&&t.push({stop:parseFloat(a),value:o[a]});o=t.length,t.sort(this.s),0<t[0].stop&&t.unshift({stop:0,value:t[0].value}),1>t[o-1].stop&&t.push({stop:1,value:t[o-1].value}),o=t.length;var a=n.createLinearGradient(0,0,256,0);for(i=0;i<o;i++){if(!e&&l){var s=l.stop+(t[i].stop-l.stop)/2;a.addColorStop(s,l.value),a.addColorStop(s,t[i].value)}a.addColorStop(t[i].stop,t[i].value);var l=t[i]}n.fillStyle=a,n.fillRect(0,0,256,1),this.c=n.getImageData(0,0,256,1).data,this.g=r.a}function zs(e,t){this.a=e,this.size=t}function As(e,t){var r,n=0;if(!Ea(e)||Va(e))throw new D(As,0,e);for(r in e){var i=+r;if(n++,!(Fc(i)&&0<=i&&1>=i&&Cc(e[r])))throw new D(As,0,e)}if(2>n)throw new D(As,0,"Specify at least 2 stops");this.b=e,this.a=!!t}X.prototype.jn=function(e){return this.Ma(ms,e)},X.prototype.getXYZService=X.prototype.jn,u(vs,S),t("H.service.xyz.Provider",vs),vs.prototype.B=function(e,t,r,n,i){return this.m.Ff(e,t,r,this.f,n,i,this.i)},vs.prototype.requestInternal=vs.prototype.B,vs.prototype.ba=function(){return this.m.ba(this.f)},vs.prototype.getCopyrights=vs.prototype.ba,vs.prototype.Sb=ff,vs.prototype.providesOMV=vs.prototype.Sb,vs.prototype.V=function(){return this.Ya()},vs.prototype.getStyle=vs.prototype.V,vs.prototype.gb=function(e){C(e,ti)&&e.a("MVT"),this.Qa(e)},vs.prototype.setStyle=vs.prototype.gb,t("H.service.buildInfo",(function(){return Hf("H-service","1.51.0","a104c13",{region:"row"})})),ys.prototype.s=function(e,t){return e.stop-t.stop},t("H.data.heatmap.Colors",As);var Bs=new As({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function Cs(e,t,r){this.a=e=ae(e,0,30),this.u=t,this.i=r,this.s=[],this.b=[];do{this.b[e]=[],this.s[e]=new Ds}while(e--);t===Es?(this.m=Fs,this.l=Gs):(this.m=Hs,this.l=Is),this.c=1/0,this.f=-1/0}As.DEFAULT=Bs;var Js=Math.log(.5);function Gs(e){return this.g?Math.round((e-this.c)/this.g*255):127}function Is(e){return void 0===this.U?127:Math.round(255*Math.pow(e,this.U))}function Ks(e,t,r,n,i){var o,a,s=1<<t;return n=$d(n,s),!(s=0<=r&&r<s&&(o=e.b[t])&&(a=o[r])&&(s=a[n])||null)&&i&&0<=t&&(s=Ks(e,t-1,r>>1,n>>1,i)),s}function Ls(e,t,r,n,i,o){for(var a,s=[];r<=n;r++)for(a=i;a<=o;a++)s.push(Ks(e,t,r,a,!1));return s}function Ms(e,t){var r,n=0,i=0,o=Ks(e,0,0,0,!1);return t.f||(t.z===e.a?t.c=t.a:(Ns(e,t,(function(t){var a=Os(e,t),s=4-a.length;if(t.z!==e.a){for(r=0;r<a.length;r++)n+=a[r].a,i++;n+=s*o.a,i+=s}})),t.c=n/i),t.f=!0),t.c}function Ns(e,t,r){t=[t];for(var n,i;0<t.length;)n=Os(e,i=t.shift()),r(i),t.push.apply(t,n)}function Os(e,t){var r,n,i,o=[];for(n=0;1>=n;n++)for(i=0;1>=i;i++)(r=Ks(e,t.z+1,2*t.x+n,2*t.y+i,!1))&&o.push(r);return o}function Hs(e,t,r){this.x=e,this.y=t,this.z=r,this.a=this.b=this.g=0,this.f=!1,this.c=0}function Fs(e,t,r){this.x=e,this.y=t,this.z=r,this.a=this.b=this.g=0,this.f=!1,this.c=0}function Ds(){this.f=this.c=1/0,this.a=this.b=-1/0}function Ps(e){var t=e||{},r=+t.sampleDepth,n=t.pointSize;e=+t.coarseness;var i=t.colors,o={min:t.min,max:t.max,engineType:t.engineType},a=t.tileSize,s=+t.dataMax;if(t.tileSize&&(o.tileSize=a),S.call(this,o),lk(this,t.opacity),this.i="value"===t.type?Es:Qs,this.sampleDepth_=Fc(r)?ae(Math.round(r),1,8):4,this.L=this.i===Qs?Fc(n)?ae(Math.round(7-n),0,6):2:1,this.D=!!t.assumeValues,t=this.max,this.T=Fc(s)?ae(Math.round(s),this.min,t+this.sampleDepth_):t,e=Fc(e)?ae(Math.round(e),0,3):1,i&&!C(i,As))throw new D(Ps,0,"colors");this.f=new Cs(t+this.sampleDepth_+this.L,this.i,this.T),this.aa=new ys(this.tileSize,e,i||Bs),this.u=A(this.u,this),this.m=A(this.m,this),this.R=new Mk(20,this.u)}function Rs(e,t,r,n){var i=document.createElement("canvas"),o=e.tileSize,a=i.getContext("2d");i.width=i.height=o;var s,l,c=e.aa,u=e.f,p=e.D,f=e.i,h=e.L,d=c.f,y=c.a,m=f===Qs?void 0===h?2:h:1;h=m,e=Math.min(e.sampleDepth_+m,c.l),m=c.b;var v=u.a;if(p&&f===Es){for(l=-1;1>=l;l++)for(p=-1;1>=p;p++){var g=(g=Ks(u,n,r+l,t+p,!0))?u.l(Ms(u,g)):128;y.fillStyle="rgba("+g+",128,0,1)",y.fillRect((p+1)*d,(l+1)*d,d,d)}p=d-Math.floor(d/10),l=3,ws((g=y.getImageData(0,0,m,m)).data,p,m,m,l),y.putImageData(g,0,0)}else y.fillStyle=p?"#080":"#000",y.fillRect(0,0,m,m);for(;h<=e&&n+h<=v;h++){l=d-(p=d>>h);var b=f===Qs?127+Math.floor(128/(1<<e-h)):255;g=2+(1<<h);var _=1<<h,w=t<<h,x=r<<h;for(w=(_=Ls(u,n+h,x-1,x+_,w-1,w+_)).length;w--;){x=w%g;var E=w/g<<0;(s=_[w])&&(s=u.l(s.a),y.fillStyle="rgba("+s+","+b+",0,1)",y.fillRect(x*p+l,E*p+l,p,p))}g=y,b=p,_=l,w=d+2*p,p=d+2*p,x=x=3,ws((E=y.getImageData(_,l,w,p)).data,b,w,p,x),g.putImageData(E,_,l)}for(t=y.getImageData(0,0,m,m),r=c.c,n=c.g,e=0,m=(u=t.data).length;e<m;e+=4)f=u[e],h=u[e+1],4===r.length&&(f=0),u[e]=r[4*f],u[e+1]=r[4*f+1],u[e+2]=r[4*f+2],u[e+3]=r[4*f+3]*(n?h/255:10>h?0:1);return y.putImageData(t,0,0),d=(c=new zs(c.i,d)).size,a.drawImage(c.a,d,d,d,d,0,0,o,o),i}Cs.prototype.Db=function(e){var t,r,n=e.value;void 0===n&&(n=1),n>this.f&&(this.f=n,this.g=this.f-this.c),n<this.c&&(this.c=n,this.g=this.f-this.c);var i=mj.Pc(e).scale(1073741823).floor();n=this.a;var o=i.x>>30-n;for(i=i.y>>30-n,r=this.m;-1<n;){this.b[n][i]||(this.b[n][i]=[]),(t=this.b[n][i][o])||(t=this.b[n][i][o]=new r(o,i,n)),t.Db(e,n);var a=this.s[n];a.f>t.b&&(a.f=t.b),a.a<t.b&&(a.a=t.b),a.c>t.a&&(a.c=t.a),a.b<t.a&&(a.b=t.a),n--,o>>=1,i>>=1}},Cs.prototype.clear=function(){Cs.call(this,this.a,this.u,this.i)},Hs.prototype.Db=function(e,t){this.g++,this.b+=e.value||1,this.a=this.b/Math.pow(2,2*(30-t))},Fs.prototype.Db=function(e){e=e.value,this.b+=void 0!==e?e:1,this.a=this.b/++this.g,this.f=!1},u(Ps,S),t("H.data.heatmap.Provider",Ps),Ps.prototype.ic=function(e){lk(this,e)},Ps.prototype.setOpacity=Ps.prototype.ic,Ps.prototype.Tc=function(){return this.g},Ps.prototype.getOpacity=Ps.prototype.Tc,Ps.prototype.Ve=ff,Ps.prototype.providesRasters=Ps.prototype.Ve,Ps.prototype.B=function(e,t,r,n,i){var o,a,s=this.D;if(Ks(this.f,0,0,0,!1)){if(!s){var l=Ls(this.f,r,t-1,t+1,e-1,e+1);for(o=l.length;o--&&!s;)if(null!==l[o]){s=!0;break}}s&&(a=this.R.push([e,t,r,n,i],this.m))}return s||n(null),a||Hl},Ps.prototype.requestInternal=Ps.prototype.B,Ps.prototype.u=function(e,t){e.done(Rs(this,t[0],t[1],t[2]))},Ps.prototype.m=function(e,t,r){var n=e.data;e=n[3],n=n[4],r?n():e(t)},Ps.prototype.Zi=function(e,t){var r;if(!Bc(e))throw new D(this.Zi,0,e);if(r=e.length){for(;r--;)this.f.Db(e[r]);var n;r=(e=this.f).s;var i=e.a,o=0;if(e.u===Qs){var a=r[e.a].a;for(n=e.a;0<=n&&r[n].a===a;n--)o=n;for(a=r[0].a,n=0;n<=o&&a===r[n].a;n++)i=n;o>e.i&&(o=e.i),a=Math.round(i+(o-i)/2),e.U=Js/Math.log(r[a].b)}this.reload(!!t)}},Ps.prototype.addData=Ps.prototype.Zi,Ps.prototype.clear=function(){this.f.clear(),this.reload(!0)},Ps.prototype.clear=Ps.prototype.clear;var Qs=0,Es=1;function Ss(){}function Ts(e){for(var t,r=(e=e.attributes).length;r--;)switch(t=e[r],t.name){case"x":this.x=parseFloat(t.value);break;case"y":this.y=parseFloat(t.value);break;case"xunits":this.Vc="fraction"===Ss.prototype.Na(t);break;case"yunits":this.zc="fraction"===Ss.prototype.Na(t)}}function Us(e){var t=e.childNodes,r=new Ss;for(e=t.length;e--;){var n=t[e];if("href"===n.nodeName)this.href=r.Na(n)}}function Vs(e){var t;if(e){var r=(e=e.childNodes).length;for(t=new Ss;r--;){var n=e[r];switch(n.nodeName){case"scale":this.scale=t.Gf(n);break;case"Icon":this.icon=n=new Us(n);break;case"hotSpot":this.a=n=new Ts(n)}}}}function Ws(){this.a={4:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),"ff"].join("")},5:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),e.charAt(4),e.charAt(4)].join("")},7:function(e){return e+"ff"},9:function(e){return e}},this.b={4:function(e){return[Xs(e.charAt(1)),Xs(e.charAt(2)),Xs(e.charAt(3)),255]},5:function(e){return[Xs(e.charAt(1)),Xs(e.charAt(2)),Xs(e.charAt(3)),Xs(e.charAt(4))]},7:function(e){return[(e=parseInt(e.substring(1),16))>>16&255,e>>8&255,255&e,255]},9:function(e){return[(e=parseInt(e.substring(1),16))>>24&255,e>>16&255,e>>8&255,255&e]}}}function Xs(e){return((e=parseInt(e,16))<<4)+e}function Ys(e){return 16>e?"0"+Math.round(e).toString(16):Math.round(e).toString(16)}function Zs(e,t,r){return/^(#|rgb).*/.test(t)?(r||(r="","#"===t.charAt(0)?r=e.a[t.length]?t:"":"rgb"===t.substr(0,3)&&(r=2<(r=(t=t.match(/\d+(\.\d+)?/g)).length)&&5>r?["#",Ys(+t[0]),Ys(+t[1]),Ys(+t[2]),3<r?Ys(255*+t[3]):"ff"].join(""):""),t=r),(e=e.b[t.length](t))[3]=Math.round(e[3]/255*100)/100,e):[0,0,0,255]}function $s(e){for(var t,r=(e=e.childNodes).length,n=new Ss,i=new Ws;r--;)switch(t=e[r],t.nodeName){case"color":this.a=n.Ef(t);break;case"colorMode":this.b=n.Na(t)}"random"===this.b&&(this.a="#"+i.el(this.a,!1))}function at(e){var t=e.childNodes,r=t.length,n=new Ss;for(this.a=this.fill=!0,this.b=new $s(e);r--;)switch(e=t[r],e.nodeName){case"fill":this.fill=n.Hd(e);break;case"outline":this.a=n.Hd(e)}}function bt(e){var t=e.childNodes,r=t.length,n=new Ss;for(this.a=new $s(e);r--;)"width"===(e=t[r]).nodeName&&(this.width=n.Gf(e))}function ct(e){for(var t,r=(e=e.childNodes).length,n=new Ss;r--;)switch(t=e[r],t.nodeName){case"bgColor":this.bgColor=n.Ef(t);break;case"textColor":this.textColor=n.Ef(t);break;case"text":this.text=n.Na(t);break;case"displayMode":this.displayMode=n.Na(t)}}function dt(e){var t=e.childNodes,r=t.length;for(this.id=e.getAttribute("id");r--;)switch(e=t[r],e.nodeName){case"IconStyle":this.Oj=e=new Vs(e);break;case"LineStyle":this.Wd=e=new bt(e);break;case"PolyStyle":this.yk=e=new at(e);break;case"BalloonStyle":this.pf=e=new ct(e)}}function et(e,t){var r=(e=e.childNodes).length,n=new Ss;for(this.b=t;r--;)switch(t=e[r],t.nodeName){case"key":this.key=n.Na(t);break;case"styleUrl":this.a=n.Na(t)}}function ft(e,t){var r=e.childNodes,n=r.length;for(this.b=t,this.id=e.getAttribute("id"),this.a=[];n--;)"Pair"===(e=r[n]).nodeName&&(e=new et(e,this.b),this.a.push(e))}function gt(){this.a={}}function ht(e){for(var t,r=(e=e.childNodes).length,n=null,i=new Ss;r--;)"coordinates"===(t=e[r]).nodeName&&(n=i.Na(t));this.a=null,n&&(this.a=i.$h(n)||null)}function it(e,t){var r=e&&e.childNodes||[],n=new Ss;if(!e||!t)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.f=e,e=r.length;e--;){var i=r[e];switch(i.nodeName){case"name":this.name=n.Na(i);break;case"description":this.description=n.Na(i);break;case"visibility":this.visibility=n.Hd(i);break;case"open":this.open=n.Hd(i);break;case"styleUrl":(this.b=n.Na(i))&&(i=this.b.substr(1),this.c=t.mh(i,!1));break;case"Style":this.a=i=new dt(i)}}}function jt(e){for(var t,r=(e=e.childNodes).length,n=new Ss;r--;)if("coordinates"===(t=e[r]).nodeName){var i=[],o=new Ss;try{i=o.vk(n.Na(t))}catch(a){i=[]}this.a=2>i.length?[]:i}}function kt(e){for(var t=new L,r=e.a?e.a.length:0;r--;)t.qd(e.a[r]);return t}function lt(){}function mt(e){var t=e.childNodes,r=t.length;for(this.a=new L,this.c=[];r--;){var n=t[r],i=n.nodeName;if("outerBoundaryIs"===i||"innerBoundaryIs"===i){var o=n.childNodes;for(n=o.length;n--;){var a=o[n];if("LinearRing"===a.nodeName){var s=new jt(a);if("outerBoundaryIs"===i){this.a=kt(s);var l=void 0,c=e,u=s.a;s=new Ss;var p=c.querySelector("altitudeMode");if(p&&p.parentNode===c&&!/^\s*clampTo/.test(s.Na(p))&&u){p=u.length;for(var f=0;f<p&&0!==l;f++){var h=u[f].alt;h?l?h!==l&&(l=0):l=h:l=0}(u=c.querySelector("*|altitudeOffset"))&&u.parentNode===a&&"http://www.google.com/kml/ext/2.2"===u.namespaceURI&&(a=s.Gf(u))&&(l+=a),l&&(l=yd(2047,l),(a=c.querySelector("extrude"))&&a.parentNode===c&&s.Hd(a)?this.b=l:this.f=l)}}else this.c.push(kt(s))}}}}}function nt(e,t){var r=document.createElement("CANVAS");r.width=1,r.height=1,this.g=e,this.b={},this.c={},this.f=new Wj(r),this.Yb=t||""}function ot(e,t,r){for(var n,i,o=(t=t.childNodes).length,a={};o--;){var s=t[o];switch(s.nodeName){case"Point":s=new ht(s),i=pt(e,"Marker"),(s=s.a)&&(n=new Rn(s,i),i.ai&&Fe(i.ai,"statechange",A(e.i,e,i.ai,n,i),!1));break;case"LineString":case"LinearRing":s=new jt(s),i=pt(e,"Polyline"),n=new th(kt(s),i);break;case"Polygon":s=new mt(s),(i=pt(e,"Polygon")).elevation=s.f,i.extrusion=s.b,n=new uh(new O(s.a,s.c),i);break;case"MultiGeometry":n=ot(e,s,new R)}n&&(e.a.name&&(a.name=e.a.name),e.a.description&&(a.description=e.a.description),i&&i.pf&&(a.balloonStyle=i.pf),a.kmlNode=e.a.f,n.setData(a),r&&r.fa(n))}return r||n}function pt(e,t){var r=e.a,n={visibility:r.visibility},i=new Ws,o=1,a={x:0,y:0,Vc:!1,zc:!1},s=qt(e,r.c);switch(r.a&&(s=qt(e,r.a,s)),t){case"Marker":if(s&&s.Oj){if((i=s.Oj).scale&&(o=i.scale),i.a){var l=i.a;a={x:l.x,y:l.y,Vc:l.Vc,zc:l.zc}}i.icon&&i.icon.href?(t=i.icon.href,rt.test(t)||(t=e.Yb+t),i=o+"_"+a.x+a.y+a.Vc+a.zc+"_"+t,(l=e.b[i]||e.c[i])||(l=new Wj(t),e.c[i]=l),0===l.getState()?(n.icon=e.f,n.ai=l,n.href=t,n.anchor=a,n.scale=o):1===l.getState()&&(n.icon=l)):1!==o&&(l||(a={x:14,y:4,Vc:!1,zc:!1}),o={size:new Wi((e={w:28*o,h:36*o}).w,e.h),anchor:new J(a.Vc?e.w*a.x:a.x*o,a.zc?e.h*(1-a.y):e.h-a.y*o),hitArea:new Xi(Yi.POLYGON,[0*o,16*o,0*o,7*o,8*o,0*o,18*o,0*o,26*o,7*o,26*o,16*o,18*o,34*o,8*o,34*o])},n.icon=new Wj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',o))}break;case"Polyline":n.style={},s&&s.Wd&&(o=s.Wd,n.style.strokeColor="rgba("+Zs(i,o.a.a,!0)+")",0<=o.width&&(n.style.lineWidth=o.width));break;case"Polygon":n.style={},s&&(s.Wd&&(o=s.Wd,n.style.strokeColor="rgba("+Zs(i,o.a.a,!0)+")",0<=o.width&&(n.style.lineWidth=o.width)),s.yk&&(o=s.yk,n.style.fillColor=o.fill?"rgba("+Zs(i,o.b.a,!0)+")":"rgba(0,0,0,0)",o.a||(n.style.lineWidth=0)))}return n.pf=s.pf,n}function qt(e,t,r){for(var n in r=r||{},t)t.hasOwnProperty(n)&&(r[n]="object"===typeof t[n]?qt(e,t[n],r[n]):t[n]);return r}t("H.data.utils.Dom",Ss),Ss.prototype.Hd=function(e){return!!e&&/^\s*(1|true)\s*$/i.test(this.Na(e))},Ss.prototype.getBoolean=Ss.prototype.Hd,Ss.prototype.Na=function(e){var t;try{if(e.nodeType===Node.ATTRIBUTE_NODE)return e.value;var r="",n=0,i=e.childNodes;for(t=i.length;n<t;n++)i[n].nodeType!==Node.COMMENT_NODE&&(r+=i[n].nodeValue.replace(/^\s+|\s+$/g,""))}catch(o){}return r||""},Ss.prototype.getString=Ss.prototype.Na,Ss.prototype.Gf=function(e){return parseFloat(this.Na(e))||0},Ss.prototype.getFloat=Ss.prototype.Gf,Ss.prototype.vk=function(e){var t,r=e.split(/\s+/),n=r.length,i=!(r&&1==n),o=i?1:3,a=[];for(i||(n=(r=e.split(",")).length),t=0;t<n;t+=o){if(!(e=this.$h(i?r[t]:t+3>r.length?null:r.slice(t,t+3))))return[];a.push(e)}return a},Ss.prototype.parseCoords=Ss.prototype.vk,Ss.prototype.$h=function(e){if(!e)return null;var t=e instanceof Array&&0<e.length&&4>e.length?e:e.split(",");e=parseFloat(t[0]);var r=parseFloat(t[1]);return t=parseFloat(t[2]),isNaN(r)||isNaN(e)?null:new kg(r,e,isNaN(t)?void 0:t)},Ss.prototype.parseCoord=Ss.prototype.$h,Ss.prototype.Ef=function(e){return e=this.Na(e),/^[0-9a-fA-F]{8}$/.test(e)?"#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2):"#000000ff"},Ss.prototype.getColor=Ss.prototype.Ef,t("H.data.kml.HotSpot",Ts),t("H.data.kml.Icon",Us),t("H.data.kml.IconStyle",Vs),t("H.data.utils.ColorHelper",Ws),Ws.prototype.el=function(e,t){var r="";if(!/^(#|rgb).*/.test(e)){var n;for(r="",n=0;6>n;n++)r+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return r+"ff"}for(e=Zs(this,e,t),t=0;4>t;t++)r+=Ys(n=3>t?Math.floor(Math.random()*(e[t]+1)):255*e[t]);return r},Ws.prototype.toRandomRGBA=Ws.prototype.el,t("H.data.kml.ColorStyle",$s),t("H.data.kml.PolyStyle",at),t("H.data.kml.LineStyle",bt),t("H.data.kml.BalloonStyle",ct),t("H.data.kml.Style",dt),t("H.data.kml.Pair",et),et.prototype.V=function(){if(this.a){var e="highlight"===this.key;e=this.b.mh(this.a.substr(1),e)}return e},et.prototype.getStyle=et.prototype.V,t("H.data.kml.StyleMap",ft),ft.prototype.V=function(e){var t=null;e=e?"highlight":"normal";for(var r=this.a.length;r--;)this.a[r].key===e&&(t=this.a[r].V());return t},ft.prototype.getStyle=ft.prototype.V,t("H.data.kml.StyleContainer",gt),gt.prototype.Ig=function(e){e&&e.id&&(this.a["style_"+e.id]=e)},gt.prototype.addStyle=gt.prototype.Ig,gt.prototype.mh=function(e,t){return(e=this.a["style_"+e])instanceof ft&&(e=e.V(t)),e},gt.prototype.getStyleById=gt.prototype.mh,t("H.data.kml.Point",ht),t("H.data.kml.Feature",it),t("H.data.kml.Line",jt),lt.prototype.f=0,lt.prototype.b=0,u(mt,lt),t("H.data.kml.Polygon",mt),nt.prototype.create=function(e){return this.a=new it(e,this.g),ot(this,e)},nt.prototype.i=function(e,t,r){var n=r.anchor,i=r.scale;r=i+"_"+n.x+n.y+n.Vc+n.zc+"_"+r.href;var o={};if(1===e.getState()){var a=this.b[r];if(!a){var s=n.x,l=n.y;(a=e.yb())&&(a={w:a.w*i,h:a.h*i},o.size=a),s=n.Vc&&a?a.w*s:s*i,l=n.zc&&a?a.h*(1-l):!n.zc&&a?a.h-l*i:l*i,o.anchor={x:s,y:l},a=new Wj(e.Qc(),o),this.b[r]=a}t.Ic(a)}delete this.c[r]};var rt=/^[^:\/]+:/;function st(e){xc(this,st),this.url=e,this.b=[],this.a=z,this.c=A(this.c,this),F.call(this)}u(st,F),t("H.data.AbstractReader",st);var tt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function ut(e,t,r,n){ut.j.constructor.call(this,t,e),this.state=r,this.message=n}function vt(e){var t=e?e.lastIndexOf("/"):-1;this.g=[],st.call(this,e),0<=t&&(this.i=e.substr(0,t)+"/")}function xt(e,t,r){r?r.fa(t):(e.a&&e.a.bc().fa(t),e.b.push(t),e.O(tt.VISIT,t))}function wt(e,t){for(var r,n=e.length,i=[];n--;)(r=e[n]).nodeName===t&&i.push(r);return i}function yt(e,t){this.b=e,this.a=t}function zt(e){return new kg(e[1],e[0])}function Bt(e){for(var t,r=At(e[0]),n=[],i=1,o=e.length;i<o;i++)t=At(e[i]),n.push(t);return new O(r,n)}function At(e){for(var t=0,r=e.length,n=new L;t<r;t++)n.qd(zt(e[t]));return n}function Ct(e,t){t=t||{},this.i=t.style||this.Fd,(this.g=!!t.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),st.call(this,e)}function Et(e){var t={};if(e.geometry){var r=e.geometry;t.type=r.type,t.properties=e.properties,r.coordinates&&(t.coordinates=r.coordinates),r.geometries&&(t.geometries=r.geometries),e.id&&(t.id=e.id)}return t}function Dt(e,t){e.a&&e.a.bc().fa(t),e.b.push(t),e.O(tt.VISIT,t)}function Ft(e,t){this.a=e,this.b=t}function Gt(e,t,r){this.g=this.b=r,this.bi=[],this.a=0,this.f=sg(e,t,!0)}function Ht(e){var t;qd.call(this),this.a=[],e?Ya(t={},It,e):t=It,this.g=t,qd.call(this)}st.State=tt,st.prototype.f=tt.READY,st.prototype.A={ml:"statechange"},st.prototype.ob=function(){this.a||(this.a=new N,this.a.bc().Xb(this.b));return new tl(this.a)},st.prototype.getLayer=st.prototype.ob,st.prototype.Gm=function(){return this.b.concat([])},st.prototype.getParsedObjects=st.prototype.Gm,st.prototype.v=function(){return this.url},st.prototype.getUrl=st.prototype.v,st.prototype.Co=function(e){if(this.f===tt.LOADING||this.f===tt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=z,this.url=e,this},st.prototype.setUrl=st.prototype.Co,st.prototype.getState=function(){return this.f},st.prototype.getState=st.prototype.getState,st.prototype.O=function(e,t,r){this.f=e,this.dispatchEvent(new ut(t||this,this.A.ml,e,r||""))},st.prototype.parse=function(){var e=this;vc(this.url)?(this.O(tt.LOADING),new tf("text/plain",this.url).then((function(t){try{e.c(t)}catch(r){e.O(tt.ERROR,z,r.message)}}),(function(){e.O(tt.ERROR,z,"Error loading file")}))):e.O(tt.ERROR,z,"File url was not set")},st.prototype.parse=st.prototype.parse,u(ut,ud),st.Event=ut,u(vt,st),t("H.data.kml.Reader",vt),vt.prototype.c=function(e){var t,r=null;if(Cc(e)&&""!=e.trim()){try{var n=(new DOMParser).parseFromString(e,"text/xml")}catch(s){return void this.O(tt.ERROR,z,"Error parsing KML document")}if(n.getElementsByTagName("parsererror").length)this.O(tt.ERROR,z,"Error parsing KML document");else if((e=n.childNodes&&"kml"===n.childNodes[0].nodeName?n.childNodes[0]:void 0)&&(t=wt(e.childNodes,"Document")[0]),t=t||e){n=new gt;for(var i=wt(t.childNodes,"Style"),o=wt(t.childNodes,"StyleMap"),a=i.length;a--;)e=new dt(i[a]),n.Ig(e);for(a=o.length;a--;)e=new ft(o[a],n),n.Ig(e);for(this.l=new nt(n,this.i),t=(e=t.childNodes).length;t--;)n=r,"Placemark"===(i=e[t]).nodeName?(i=this.l.create(i))&&xt(this,i,n):"Folder"===i.nodeName&&(xt(this,(i={group:new R,node:i}).group,n),this.g.push(i)),!t&&(n=this.g.shift())&&(e=n.node.childNodes,r=n.group,t=e.length);this.O(tt.READY)}else this.O(tt.ERROR,z,"Invalid KML document")}else this.O(tt.ERROR,z,"Unable to create objects from the empty data")},yt.prototype.create=function(e,t){var r=e.coordinates;switch(e.type){case"Point":var n=new Rn(zt(r));break;case"LineString":n=new th(At(r));break;case"Polygon":n=new uh(Bt(r));break;case"MultiPoint":var i=0,o=r.length;if(n=[],this.a){for(;i<o;i++)n.push(zt(r[i]));r=new Rn(new Vi(n))}else{for(;i<o;i++)n.push(new Rn(zt(r[i])));(r=new R).Xb(n)}n=r,o="multiPoint";break;case"MultiLineString":if(i=0,o=r.length,n=[],this.a){for(;i<o;i++)n.push(At(r[i]));r=new th(new ih(n))}else{for(;i<o;i++)n.push(new th(At(r[i])));(r=new R).Xb(n)}n=r,o="multiLineString";break;case"MultiPolygon":if(n=[],i=0,o=r.length,this.a){for(;i<o;i++)n.push(Bt(r[i]));r=new uh(new Ji(n))}else{for(;i<o;i++)n.push(new uh(Bt(r[i])));(r=new R).Xb(n)}n=r,o="multiPolygon";break;case"GeometryCollection":r=n=new R,o=0;for(var a=(i=e.geometries).length;o<a;o++)this.create(i[o],r);o="geometryCollection"}return n&&(r=n,i=e.properties,e=e.id,a={},i&&(this.a?a=i:a.properties=i),o&&!this.a&&(a[o]=!0),e&&r.Ai(e),r.setData(a),this.b(n)),t&&n&&t.fa(n),n},yt.prototype.create=yt.prototype.create,u(Ct,st),t("H.data.geojson.Reader",Ct),Ct.prototype.c=function(e){var t,r;try{var n="string"===typeof e?JSON.parse(e):e;if("object"===typeof n){var i=new yt(this.i,this.g);switch(n.type){case"FeatureCollection":if(t=n.features){var o=new R;for(Dt(this,o),r=0;r<t.length;r++){var a=Et(t[r]);(a=i.create(a))&&o.fa(a)}}break;case"Feature":a=Et(n),(a=i.create(a))&&Dt(this,a);break;default:(a=i.create(n))&&Dt(this,a)}this.O(tt.READY)}else this.O(tt.ERROR,z,"Invalid syntax")}catch(s){this.O(tt.ERROR,z,"Parse error. "+s.message)}},Ct.prototype.io=function(e){this.O(tt.LOADING),this.c(e)},Ct.prototype.parseData=Ct.prototype.io,Ct.prototype.Fd=function(){},t("H.data.buildInfo",(function(){return Hf("H-data","1.51.0","a104c13",{region:"row"})})),wg.prototype.Lc=ca(1,(function(e,t){this.a.Lc(e,Fc(t)?t:this.c)})),Ag.prototype.Lc=ca(0,(function(e,t){var r,n=0;if(!e(this)&&t--)for(;3>=n;n++)(r=this[n])&&r.Lc(e,t)})),t("H.clustering.grid.NoisePoint",Ft),Ft.prototype.ya=function(){return ng(this.a)},Ft.prototype.getPosition=Ft.prototype.ya,Ft.prototype.xc=function(){return this.a.wt},Ft.prototype.getWeight=Ft.prototype.xc,Ft.prototype.od=gf,Ft.prototype.isCluster=Ft.prototype.od,Ft.prototype.sc=function(){return this.b},Ft.prototype.getMinZoom=Ft.prototype.sc,Ft.prototype.getData=function(){return this.a.data},Ft.prototype.getData=Ft.prototype.getData,t("H.clustering.grid.Cluster",Gt),Gt.prototype.ne=function(e){this.c||(this.c=ng(e)),this.a+=e.wt||1,this.bi.push(e)},Gt.prototype.ya=function(){return this.c},Gt.prototype.getPosition=Gt.prototype.ya,Gt.prototype.xc=function(){return this.a},Gt.prototype.getWeight=Gt.prototype.xc,Gt.prototype.od=ff,Gt.prototype.isCluster=Gt.prototype.od,Gt.prototype.sc=function(){return this.b},Gt.prototype.getMinZoom=Gt.prototype.sc,Gt.prototype.If=function(){return this.g},Gt.prototype.getMaxZoom=Gt.prototype.If,Gt.prototype.K=function(){return this.f},Gt.prototype.getBoundingBox=Gt.prototype.K,Gt.prototype.Yg=function(e){this.ze(e)},Gt.prototype.forEachEntry=Gt.prototype.Yg,Gt.prototype.ze=function(e){var t=this;if(!Da(e))throw new D(this.ze,0,e);this.bi.forEach((function(r){e(new Ft(r,t.b+1))}))},Gt.prototype.forEachDataPoint=Gt.prototype.ze,u(Ht,qd);var Jt={clusters:[],noisePoints:[]},It={projection:mj,min:0,max:22,eps:32,minWeight:2};function Kt(e){Ht.call(this,e)}function Lt(e){this.a=e;var t=(e=document.createElement("canvas")).getContext("2d"),r=this.a,n=14*r;e.width=n,e.height=n,t.scale(r,r),t.beginPath(),t.strokeStyle="#FFFFFF",t.fillStyle="#1080DD",t.arc(7,7,6,0,2*Math.PI,!1),t.fill(),t.lineWidth=1,t.stroke(),this.f=new Wj(e,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function Mt(e,t,r){var n,i=document.createElement("canvas"),o=i.getContext("2d"),a=e.a,s=t*a;return i.width=s,i.height=s,o.scale(a,a),a=t+":"+r,(n=e.b[a])?o.putImageData(n,0,0):(t/=2,o.beginPath(),o.strokeStyle="rgba("+r+",0.2)",o.fillStyle="rgba("+r+",1)",o.arc(t,t,t/5*3,0,2*Math.PI,!1),o.fill(),o.lineWidth=t/5*4,o.stroke(),e.b[a]=o.getImageData(0,0,s,s)),i}function Nt(e){if(Ht.call(this,e),(e=this.g).projection!==mj)throw new D(Nt,0,"Other projection than mercator not supported yet");this.s=e.projection,this.f=e.eps,this.D=e.minWeight,this.m=new nj(this.s),(new Pf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.l=A(this.l,this)}p=Ht.prototype,p.Hc=function(e){this.a=e,this.b=!0},p.Db=function(e){this.a.push(e),this.b=!0},p.mf=function(e){this.a=this.a.concat(e),this.b=!0},p.We=function(e){this.a=this.a.filter((function(t){return t!==e})),this.b=!0},p.o=function(){Ht.j.o.call(this),delete this.a},Ht.prototype.disposeInternal=Ht.prototype.o,Ht.prototype.U=ld,u(Kt,Ht),Kt.prototype.Ei=function(e){var t,r=this.g,n=r.min,i=r.max,o=[],a=[];if(this.b){for(t=this.a;n<=i;n++){for(var s,l,c,u,p,f,h,d,y=void 0,m=n,v=t,g=o,b=a,_=r.eps,w=r.projection,x=r.minWeight,E=v.length,S=Math.pow(2,m+8),k=[];d=v[--E];)if(!d.Ki){for(h=S,f=(c=w.Pc(d).scale(S).floor()).x,p=c.y,l=k.length;l--;)u=(s=k[l]).ya(),s.Ji||(s.Ji=w.Pc(u).scale(S).floor()),(u=(u=s.Ji).Wa(c))<h&&(h=u,y=s);y&&y.K().gd(d)||(y=new Gt(w.dg({x:(f-_)/S,y:(p-_)/S}),w.dg({x:(f+_)/S,y:(p+_)/S}),m),k.push(y)),y.ne(d),y=null}for(E=k.length;E--;)if((l=(s=k[E]).xc())<x)for(l=(s=s.bi).length;d=s[--l];)b.push(new Ft(d,m)),d.Ki=!0;else g.push(s)}for(n=0,i=t.length;n<i;n++)delete t[n].Ki;this.b=!1,e({clusters:o,noisePoints:a})}},t("H.clustering.theme.Circular",Lt),Lt.prototype.Sl=function(e){var t=e.xc(),r=this.c[t];if(!r){if(10>t){r=Mt(this,28,"118,209,0");var n={x:11,y:18}}else 25>t?(r=Mt(this,38,"255,105,0"),n={x:13,y:23}):50>t?(r=Mt(this,38,"240,60,0"),n={x:13,y:23}):100>t?(r=Mt(this,38,"181,0,21"),n={x:13,y:23}):1e3>t?(r=Mt(this,48,"181,0,21"),n={x:15,y:28}):(r=Mt(this,66,"181,0,21"),n={x:20,y:38});var i=r.getContext("2d");i.fillStyle="#FFFFFF",i.font="bold 11px Arial",i.fillText(String(t),n.x,n.y),r=new Wj(r,{size:{w:n=r.width/this.a,h:n},anchor:{x:n/2,y:n/2}}),this.c[t]=r}return(t=new Rn(e.ya(),{icon:r,min:e.sc(),max:e.If()})).setData(e),t},Lt.prototype.getClusterPresentation=Lt.prototype.Sl,Lt.prototype.Dm=function(e){var t=new Rn(e.ya(),{icon:this.f,min:e.sc()});return t.setData(e),t},Lt.prototype.getNoisePresentation=Lt.prototype.Dm,u(Nt,Ht),Nt.prototype.U=function(e,t){this.u=e,this.J=Bd(t)},Nt.prototype.Ei=function(e,t){var r=this.c,n=this.u,i=this.J||0,o=!r||!(r.zoom===i&&r.b.ia(n));if(n&&(this.b||o)){if(r&&3>r.Yd&&r.cancel(),this.b=!1,(r=this.f)>=128*Gd(2,i))var a=Ot;else{(o=this.m).Oa(i);var s=o.ib(n.Nb());a=o.ib(n.Jb()),s.y-=r,a.y+=r,s=o.Re(s);var l=o.Re(a);a=new K(s.lat,s.lng,l.lat,l.lng),r=o.Ra(r,0).lng+180,a=a.Bc(s.lat,s.lng-r,l.lat,s.lng).Bc(s.lat,l.lng,l.lat,l.lng+r)}for(r=a,a=[],o=(s=this.a).length;o--;)r.gd(s[o])&&a.push(s[o]);0<a.length?(this.c=new Pt(n,i,a,this.f,this.D,this.s!==mj,e,t),this.c.then(this.i,this.l)):e(Jt)}},Nt.prototype.i=function(e){Ca(e)||(e=new x.Uint32Array(e)),this.c.g(Qt(this,e))},Nt.prototype.l=function(e){Cc(e)&&this.c.f(e)};var Ot=new K(90,-180,-90,180);function Qt(e,t){for(var r=0,n=t[r++],i=Array(n),o=0,a=[],s=t.length,l=e.c.a,c=e.c.zoom;n--;)i[o++]=new Ft(l[t[r++]],c);for(;r<s;){n=t[r++],o=l[t[r]];var u=e.m,p=e.f;u.Oa(e.c.zoom);var f=u.ib(o);for(o=u.Ra(f.x-p,f.y-p),u=u.Ra(f.x+p,f.y+p),o=new Gt((o=new K(o.lat,o.lng,u.lat,u.lng)).Nb(),o.Jb(),c);n--;)o.ne(l[t[r++]]);a.push(o)}return{clusters:a,noisePoints:i}}function Pt(e,t,r,n,i,o,a,s){this.b=e,this.zoom=t,this.a=r,this.g=a,this.f=s,a=3*(e=r.length),s=new(x.Float64Array||Array)(a);for(var l;e--;)l=r[e],s[--a]=l.lat,s[--a]=l.lng,s[--a]=l.wt;ie.call(this,"cluster",{message:[s,n,i,t,o]},void 0)}function Rt(e,t,r){this.b=e,this.a=t,this.f=r}function St(e,t,r,n){this.b=e,this.a=t,this.l=r,this.U=n,this.f=Ka(this.f,this),this.c=Ka(this.c,this)}function Tt(e,t,r,n,i,o){this.g=t,e&&(this.parent=e,1&t?(r=e[8],i=e[5]):(r=e[7],i=e[8]),2&t?(n=e[9],o=e[6]):(n=e[4],o=e[9])),this[7]=r,this[5]=i,this[8]=(r+i)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Ut(e,t){return e[t]||(++e.Xd,e[t]=new Tt(e,t))}function Vt(e,t,r,n){var i,o;if(!t(e,n)&&r--)for(++n,i=0;4>i;i++)(o=e[i])&&Vt(o,t,r,n)}function Wt(e){this.b=e||10,Xt(this)}function Xt(e){e.head=e.a=new Tt(null,NaN,0,0,4294967296,4294967296)}function Yt(e,t){var r,n;for(r=0;4>r;r++)(n=t[r])&&(Yt(e,n),delete t[r]);delete t.parent,delete t.entries}function Zt(e,t){var r,n=e.head;if(t){var i=t;if(i!==n)for(n=i;i=i.parent;)(i.entries||1<i.Xd)&&(n=i)}else for(;!n.entries&&2>(r=n.Xd)&&r;)n=i;e.head=n}function $t(e,t,r,n,i,o,a){var s=t.entries;return o?t.Xd?s=$t(e,Ut(t,+(r>=t[8])|+(n>=t[9])<<1),r,n,i,o-1,a):s?((s=Ut(t,+((s=s[0])[1]>=t[8])|+(s[0]>=t[9])<<1)).entries=t.entries,s.qe=t.qe,s.re=t.re,s.Fb=t.Fb,s.a=t.a,s.f=t.f,s.b=t.b,s.c=t.c,delete t.entries,Zt(e,s),s=$t(e,Ut(t,+(r>=t[8])|+(n>=t[9])<<1),r,n,i,o-1,a)):(o=s=new au(r,n,i,a),(t.entries||(t.entries=[])).push(o),Zt(e,t)):(s||Zt(e,t),e=s=new au(r,n,i,a),(t.entries||(t.entries=[])).push(e)),t.qe+=r*i,t.re+=n*i,t.Fb+=i,t.a===B?(t.a=t.b=r,t.f=t.c=n):(r<t.a?t.a=r:r>t.b&&(t.b=r),n<t.f?t.f=n:n>t.c&&(t.c=n)),s}function au(e,t,r,n){this[0]=t,this[1]=e,this.a=r,this.data=n}function bu(e){Ht.call(this,e),e=this.g,this.l=e.projection,this.m=e.min,this.f=e.max,this.s=e.minWeight,this.c=7-Ad(Ed(zd(1,e.eps))/Od),this.i=new Wt(zd(this.m,this.f+this.c))}function cu(e,t,r,n,i,o,a){var s,l=t.Fb;if(a&&(a.node.Fb!==l?(o.clusters.push(new St(e,a.node,a.depth,r-1)),a=null):i++),a||(l>=e.s?(a={node:t,depth:r},i=r):du(e,t,i+1,o)),t.Xd&&n--)for(r++,l=0;4>l;l++)(s=t[l])&&(cu(e,s,r,n,i,o,a),a=null);a&&o.clusters.push(new St(e,a.node,a.depth,e.f+e.c))}function du(e,t,r,n){var i;if(t=t.entries){var o=t.length;for(n=n.noisePoints,i=0;i<o;i++)n.push(new Rt(e,t[i],r))}else for(i=0;4>i;i++)(o=e[i])&&du(e,o,r,n)}function eu(e,t){var r={},n=(t=t||{}).min||0;switch(n={min:n,max:zd(n,t.max||22)},eu.j.constructor.call(this,n),this.xa=t.pixelRatio||Ue(),Ya(r,It,n,t.clusteringOptions||{}),r.minWeight=zd(It.minWeight,r.minWeight),r.strategy){case fu.DYNAMICGRID:if(r.projection!==mj)throw new D(eu,1,"Unsupported projection");this.c=new Nt(r);break;case fu.GRID:this.c=new Kt(r);break;default:this.c=new bu(r)}this.c.Hc(e),this.D=t.theme||new Lt(this.xa),this.R=A(this.R,this),this.aa=A(this.aa,this),gu(this)}Nt.prototype.o=function(){Nt.j.o.call(this)},Nt.prototype.disposeInternal=Nt.prototype.o,u(Pt,Sf),t("H.clustering.fastgrid.NoisePoint",Rt),Rt.prototype.ya=function(){return this.c||(this.c=this.b.Ra(this.a[1],this.a[0],1)),this.c},Rt.prototype.getPosition=Rt.prototype.ya,Rt.prototype.xc=function(){return this.a.a},Rt.prototype.getWeight=Rt.prototype.xc,Rt.prototype.od=gf,Rt.prototype.isCluster=Rt.prototype.od,Rt.prototype.sc=function(){return this.f-this.b.c},Rt.prototype.getMinZoom=Rt.prototype.sc,Rt.prototype.getData=function(){return this.a.data},Rt.prototype.getData=Rt.prototype.getData,t("H.clustering.fastgrid.Cluster",St),St.prototype.ya=function(){return this.s||(this.s=this.b.Ra(this.a.qe,this.a.re,this.a.Fb)),this.s},St.prototype.getPosition=St.prototype.ya,St.prototype.xc=function(){return this.a.Fb},St.prototype.getWeight=St.prototype.xc,St.prototype.od=ff,St.prototype.isCluster=St.prototype.od,St.prototype.sc=function(){return this.l?this.l-this.b.c:-1/0},St.prototype.getMinZoom=St.prototype.sc,St.prototype.If=function(){return this.U-this.b.c},St.prototype.getMaxZoom=St.prototype.If,St.prototype.K=function(){return this.i||(this.i=sg(this.b.Ra(this.a.a,this.a.f,1),this.b.Ra(this.a.b,this.a.c,1),!0)),this.i},St.prototype.getBoundingBox=St.prototype.K,St.prototype.Yg=function(e){this.g=e,this.a.Lc(this.f,Wd)},St.prototype.forEachEntry=St.prototype.Yg,St.prototype.f=function(e,t){var r,n,i=!1;if(e.Fb>=this.b.s&&e!==this.a&&e.Fb!==this.a.Fb&&(this.g(new St(this.b,e,0,t)),i=!0),!i&&(r=e.entries))for(e=r.length,n=0;n<e;n++)this.g(new Rt(this.b,r[n],t));return i},St.prototype.ze=function(e){this.m=e,this.a.Lc(this.c,Wd)},St.prototype.forEachDataPoint=St.prototype.ze,St.prototype.c=function(e,t){var r;if(e=e.entries){var n=e.length;for(r=0;r<n;r++)this.m(new Rt(this.b,e[r],t))}return!1},p=Tt.prototype,p.Xd=0,p.removeChild=function(e){var t=e.g;this[t]===e&&(delete this[t],delete e.parent,--this.Xd)},p.Lc=function(e,t){for(var r=0,n=this;n=n.parent;)++r;Vt(this,e,t,r)},p.qe=0,p.re=0,p.Fb=0,Wt.prototype.yc=function(e,t,r,n){var i=this.a;if(!(e>=i[7]&&t>=i[4]&&e<=i[5]&&t<=i[6]))throw Error("Coordinates out of bounds");return $t(this,this.a,e,t,r,this.b,n)},Wt.prototype.Lc=function(e,t){Vt(this.a,e,t===+t?t:this.b,0)},u(bu,Ht),p=bu.prototype,p.Hc=function(e){var t,r=0,n=e.length,i=new J(0,0),o=this.l,a=this.i;for(bu.j.Hc.call(this,e),Yt(a,a.a),Xt(a);r<n;r++)o.Pc(t=e[r],i).scale(4294967296).floor(),a.yc(i.x,i.y,t.wt,t.data);this.b=!0},p.Db=function(e){bu.j.Db.call(this,e),this.Hc(this.a)},p.mf=function(e){for(var t=e.length,r=bu.j.Db;t--;)r.call(this,e[t]);this.Hc(this.a)},p.We=function(e){bu.j.We.call(this,e),this.Hc(this.a)},p.Ra=function(e,t,r,n){return this.l.Ra(e/r/4294967296,t/r/4294967296,n)},p.Ei=function(e){if(this.b){var t={clusters:[],noisePoints:[]};cu(this,this.i.a,0,this.f+this.c,-1/0,t,null),this.b=!1,e(t)}},p.o=function(){bu.j.o.call(this),this.i=null},bu.prototype.disposeInternal=bu.prototype.o,t("H.clustering.DataPoint",(function(e,t,r,n){this.lat=e,this.lng=t,this.wt=r===+r?r:1,this.data=n})),u(eu,N),t("H.clustering.Provider",eu),eu.prototype.o=function(){eu.j.o.call(this),this.f.na(),this.c.F(),delete this.c,delete this.L,delete this.D,x.clearTimeout(this.ea)};var fu={FASTGRID:0,GRID:1,DYNAMICGRID:2};function gu(e,t,r){e.ea&&x.clearTimeout(e.ea),t&&e.c.U(t,r),e.ea=x.setTimeout(e.R,150)}function hu(e){var t=e.L.clusters,r=e.L.noisePoints,n=t.length,i=r.length,o=0<n+i;for(e.f.na();i--;){var a=r[i];e.f.fa(e.D.getNoisePresentation(a))}for(;n--;)r=t[n],e.f.fa(e.D.getClusterPresentation(r));o&&e.Va()}function iu(e,t){e:{for(var r=e.length,n="string"===typeof e?e.split(""):e,i=0;i<r;i++)if(i in n&&t.call(void 0,n[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}eu.Strategy=fu,eu.prototype.R=function(){this.dispatchEvent("start"),this.c.Ei(this.aa,ld)},eu.prototype.aa=function(e){this.L=e,hu(this),this.dispatchEvent("end")},eu.prototype.Hc=function(e){this.c.Hc(e),gu(this)},eu.prototype.setDataPoints=eu.prototype.Hc,eu.prototype.Db=function(e){this.c.Db(e),gu(this)},eu.prototype.addDataPoint=eu.prototype.Db,eu.prototype.mf=function(e){this.c.mf(e),gu(this)},eu.prototype.addDataPoints=eu.prototype.mf,eu.prototype.We=function(e){this.c.We(e),gu(this)},eu.prototype.removeDataPoint=eu.prototype.We,eu.prototype.Zm=function(){return this.D},eu.prototype.getTheme=eu.prototype.Zm,eu.prototype.zo=function(e){this.D=e,this.L&&(this.f.na(),hu(this))},eu.prototype.setTheme=eu.prototype.zo,eu.prototype.Qb=function(){return!0},eu.prototype.providesDomMarkers=eu.prototype.Qb,eu.prototype.Rb=function(){return!0},eu.prototype.providesMarkers=eu.prototype.Rb,eu.prototype.Cc=function(){return!0},eu.prototype.providesSpatials=eu.prototype.Cc,eu.prototype.Ue=function(e,t){gu(this,e,t)},eu.prototype.preprocessData=eu.prototype.Ue,t("H.clustering.buildInfo",(function(){return Hf("H-clustering","1.51.0","a104c13",{region:"row"})}));var ju={};function ku(e){var t=e.ownerDocument,r=t.documentElement;t=t.defaultView;var n=e.getBoundingClientRect();return e=n.left,n=n.top,isNaN(t.pageXOffset)?(e+=r.scrollLeft,n+=r.scrollTop):(e+=t.pageXOffset,n+=t.pageYOffset),new J(e,n)}function lu(e,t,r){t=Fc(t)?t+"px":t,r=Fc(r)?r+"px":r,e.style[Af("transform")]="translate("+t+","+r+")"}var mu,nu=navigator.userAgent,ou=-1<nu.indexOf("Android")&&-1<nu.indexOf("Mozilla/5.0")&&-1<nu.indexOf("AppleWebKit"),pu=/AppleWebKit\/([\d.]+)/,qu=null===pu.exec(nu)?null:parseFloat(pu.exec(nu)[1]);mu=ou&&null!==qu&&537>qu;var ru=globalThis,su=document.createElement("T");function tu(){this.a=this.lj()}tu.prototype.lj=function(){var e=navigator,t=[];return e&&(e.msPointerEnabled?t.push(uu):e.pointerEnabled&&t.push(vu)),1>t.length&&("TouchEvent"in ru&&t.push(wu),t.push(xu)),t},tu.prototype.detectEventSets=tu.prototype.lj,tu.prototype.addEventListener=function(e,t,r,n){for(var i,o=this.a,a=o.length,s=!1;a--;)(i=o[a][t])&&(s=!0,e.addEventListener(i,r,n||!1));s||e.addEventListener(t,r,n||!1)},tu.prototype.removeEventListener=function(e,t,r,n){for(var i,o=this.a,a=o.length,s=!1;a--;)(i=o[a][t])&&(s=!0,e.removeEventListener(i,r,n||!1));s||e.removeEventListener(t,r,n||!1)};var vu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},uu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},wu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},xu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function yu(e,t,r,n){return e=e.createElement(t),r&&(e.className=r),n&&(e.innerHTML=n),e}function zu(e,t){for(var r=1,n=arguments.length;r<n;r++)e.appendChild(arguments[r])}var Au=new tu;function Bu(e,t,r){Au.addEventListener(e,t,r,void 0)}function Cu(e,t,r){Au.removeEventListener(e,t,r,void 0)}function Y(e,t){F.call(this),this.ab=e||"div",this.f=t?t.split(" "):[],this.L=!1,this.f.push("H_el")}function Du(e){(e=e.N())&&e.parentNode&&e.parentNode.removeChild(e)}function Eu(e){e=e||{},Y.call(this,"div","H_btn"),this.Jc(e.label||" "),this.jc(e.tooltip||""),this.setData(e.data),this.va(!!e.disabled),this.O(Fu.UP,!0),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(Y,F),t("H.ui.base.Element",Y),Y.prototype.W=function(e){if(!e)throw Error("Wrong document object");return this.S=yu(e,this.ab,this.f.join(" ")),this.renderInternal(this.S,e),this.va(this.dc(),!0),this.jc(this.aa),this.qb(this.R),this.S},Y.prototype.ta=function(){},Y.prototype.T=function(){},Y.prototype.X=function(){},Y.prototype.renderInternal=Y.prototype.X,Y.prototype.dc=function(){return this.L},Y.prototype.isDisabled=Y.prototype.dc,Y.prototype.va=function(e,t){return((e=!!e)!==this.L||t)&&((this.L=e)?this.Ka("H_disabled"):this.kb("H_disabled")),this},Y.prototype.setDisabled=Y.prototype.va,Y.prototype.J=null,Y.prototype.getData=function(){return this.J},Y.prototype.getData=Y.prototype.getData,Y.prototype.setData=function(e){this.J=e},Y.prototype.setData=Y.prototype.setData,Y.prototype.jc=function(e){var t=this.N();this.aa=e,t&&(e?t.setAttribute("title",e):t.removeAttribute("title"))},Y.prototype.setTooltip=Y.prototype.jc,Y.prototype.S=null,Y.prototype.N=function(){return this.S},Y.prototype.getElement=Y.prototype.N,Y.prototype.R=!0,Y.prototype.qb=function(e){var t=this.N();this.R=e,t&&(t.style.display=e?"":"none")},Y.prototype.setVisibility=Y.prototype.qb,Y.prototype.wc=function(){return this.R},Y.prototype.getVisibility=Y.prototype.wc,Y.prototype.Ka=function(e){var t=this.N();return 0>this.f.indexOf(e)&&this.f.push(e),t&&(t.className=this.f.join(" ")),this},Y.prototype.addClass=Y.prototype.Ka,Y.prototype.kb=function(e){e=this.f.indexOf(e);var t=this.N();return-1<e&&this.f.splice(e,1),t&&(t.className=this.f.join(" ")),this},Y.prototype.removeClass=Y.prototype.kb,Y.prototype.o=function(){Y.j.o.call(this),Du(this),this.J=this.S=null,delete this.aa},u(Eu,Y),t("H.ui.base.Button",Eu),Eu.prototype.va=function(e,t){return e&&this.kb("H_active"),Eu.j.va.call(this,e,t)},Eu.prototype.setDisabled=Eu.prototype.va,Eu.prototype.X=function(e){Bu(e,"start",this.b),Bu(e,"end",this.a),Bu(e,"out",this.a),this.Jc(this.Ge(),!0)},Eu.prototype.renderInternal=Eu.prototype.X,Eu.prototype.getState=function(){return this.C},Eu.prototype.getState=Eu.prototype.getState,Eu.prototype.O=function(e,t){return e!==this.C&&(this.C=e,e===Fu.DOWN?this.Ka("H_active"):this.kb("H_active"),t||this.dispatchEvent("statechange")),this},Eu.prototype.setState=Eu.prototype.O,Eu.prototype.Ge=function(){return this.c},Eu.prototype.getLabel=Eu.prototype.Ge,Eu.prototype.Jc=function(e,t){return(t||e!==this.c)&&(this.c=e,(t=this.N())&&(t.innerHTML=e)),this},Eu.prototype.setLabel=Eu.prototype.Jc,Eu.prototype.b=function(e){this.dc()||this.O(Fu.DOWN),e.preventDefault()},Eu.prototype.a=function(e){this.dc()||this.O(Fu.UP),e.preventDefault()},Eu.prototype.o=function(){var e=this.N();e&&(Cu(e,"start",this.b),Cu(e,"end",this.a),Cu(e,"out",this.a)),Y.prototype.o.call(this)};var Fu={UP:"up",DOWN:"down"};Eu.State=Fu;var Gu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function Hu(e){var t;e=e||{},this.b=!!e.vertical,this.ea=e.length||"16em",this.a=Fc(t=e.min)?t:0,this.i=zd(this.a,Fc(t=e.max)?t:100),this.wa=E(t=e.step)?1:t,this.l=Iu(this,Fc(t=e.value)?t:(this.a+this.i)/2),this.ag=A(this.ag,this),this.Wf=A(this.Wf,this),this.cg=A(this.cg,this),this.bg=A(this.bg,this),this.s=e.pointerArea,Y.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}function Ju(e){if(!e.m){Bu(e.N(),"start",e.ag);var t=e.s;Bu(t,"move",e.Wf),Bu(t,"end",e.cg),Bu(t,"out",e.bg),e.m=!0}}function Ku(e){if(e.m){Cu(e.N(),"start",e.ag);var t=e.s;Cu(t,"move",e.Wf),Cu(t,"end",e.cg),Cu(t,"out",e.bg),e.m=!1}}function Iu(e,t){var r=e.wa;return t=ae(t,e.a,e.i),r?e.a+Ad((t-e.a)/r)*r:t}function Lu(e,t){var r=e.D,n=e.b;e.u||(e.u=r["offset"+(n?"Height":"Width")]),0>(t-=ku(r)[n?"y":"x"])&&(t=0),t=(e.i-e.a)*t/e.u,t=Iu(e,n?e.i-t:e.a+t),e.l!==t&&(e.wg(t,!0),e.dispatchEvent(new cj(e.A.ed,t,e.l)))}function Mu(e,t){return(t.touches?t.targetTouches[0]:t)["page"+(e.b?"Y":"X")]}function Nu(e){var t=!1,r=e.type;return-1!==r.indexOf("pointer")||-1!==r.indexOf("touch")?t=!0:C(e,MouseEvent)&&(t=1===e.which||1===e.buttons),t}function Ou(e){var t=e.touches;return t&&1===t.length||C(e,MouseEvent)}u(Hu,Y),t("H.ui.base.Slider",Hu),Hu.prototype.wg=function(e,t){var r=this.b,n=r?"top":"left";return this.c&&!t||(e=ae(e,this.a,this.i),this.g&&(r=(r?-1:1)*(t=100*(e-this.a)/(this.i-this.a)),this.g.style[n]=r+"%",this.qa.style[n]=100+r+"%"),this.l=Iu(this,e)),this.l},Hu.prototype.setValue=Hu.prototype.wg,Hu.prototype.en=function(){return this.l},Hu.prototype.getValue=Hu.prototype.en,p=Hu.prototype,p.ag=function(e){var t=this.b;if(Nu(e)&&Ou(e)){var r=Mu(this,e),n=e.target;n===this.g||n.parentElement===this.g?(this.P=r-ku(this.g)[t?"y":"x"]-this.g.offsetWidth/2,this.N().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.c=!0):Lu(this,r),e.preventDefault()}},p.cg=function(){this.c&&(this.N().className="H_slider "+(this.b?"":" H_l_horizontal"),this.c=!1)},p.bg=function(e){this.c&&e.target===this.s&&(this.c=!1)},p.Wf=function(e){this.c&&Ou(e)&&(Nu(e)?(Lu(this,Mu(this,e)-this.P),e.preventDefault()):this.c=!1)},p.A={ed:"change"},p.X=function(e,t){var r=yu(t,"div","H_slider_cont"),n=yu(t,"div","H_slider_knob_cont"),i=yu(t,"div","H_slider_knob"),o=yu(t,"div","H_slider_knob_halo"),a=yu(t,"div","H_slider_track");t=yu(t,"div","H_slider_track H_slider_track_active"),e.appendChild(r),r.appendChild(a),a.appendChild(t),r.appendChild(n),n.appendChild(i),n.appendChild(o),this.D=a,this.qa=t,this.g=n,this.s||(this.s=e.ownerDocument.body),r.style[this.b?"height":"width"]=this.ea,this.wg(this.l),Ju(this)},Hu.prototype.renderInternal=Hu.prototype.X,Hu.prototype.o=function(){Ku(this)},Hu.prototype.va=function(e,t){return e?Ku(this):this.D&&Ju(this),Y.prototype.va.call(this,e,t)},Hu.prototype.setDisabled=Hu.prototype.va;var Pu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function Qu(e,t,r){Y.call(this,e,t),this.a=r?r.concat():[]}function Ru(){Qu.call(this,"div","H_ctl"),this.map=null,this.Mc="top-left"}function Su(e){var t=(e=e||{}).slider;Ru.call(this),this.s=A(this.s,this),this.g=A(this.g,this),this.b=A(this.b,this),t&&(this.u=A(this.u,this),this.D=t,this.wa=e.sliderSnaps,this.Ka("H_zoom_slider")),this.i=new Eu({label:Gu.in,onStateChange:this.s}),this.m=new Eu({label:Gu.out,onStateChange:this.s}),this.Ka("H_zoom"),this.Ka("H_grp"),this.ea=!1!==e.fractionalZoom,this.setZoomSpeed(e.zoomSpeed||4),this.Vb(e.alignment||"right-middle")}function Tu(e){e.removeChild(e.c),e.c=null,e.l&&(e.l.removeEventListener("minchange",e.b),e.l.removeEventListener("maxchange",e.b),e.l=null)}function Uu(e,t){var r={},n={};r["top-left"]=yu(t,"div",[Vu,Wu].join(" ")),r["top-center"]=yu(t,"div",[Vu,Xu,Yu,Wu].join(" ")),r["top-right"]=yu(t,"div",[Vu,Wu].join(" ")),r["left-top"]=yu(t,"div",[Vu,Zu].join(" ")),r["left-middle"]=yu(t,"div",[Vu,$u,av,Zu].join(" ")),r["left-bottom"]=yu(t,"div",[Vu,Zu].join(" ")),r["right-top"]=yu(t,"div",[Vu,Zu].join(" ")),r["right-middle"]=yu(t,"div",[Vu,bv,av,Zu].join(" ")),r["right-bottom"]=yu(t,"div",[Vu,Zu].join(" ")),r["bottom-left"]=yu(t,"div",[Vu,Wu].join(" ")),r["bottom-center"]=yu(t,"div",[Vu,cv,Yu,Wu].join(" ")),r["bottom-right"]=yu(t,"div",[Vu,Wu].join(" ")),n["top-left"]=yu(t,"div",[Xu,$u].join(" ")),n["top-right"]=yu(t,"div",[Xu,bv].join(" ")),n["bottom-left"]=yu(t,"div",[cv,$u].join(" ")),n["bottom-right"]=yu(t,"div",[cv,bv].join(" ")),zu(n["top-left"],r["top-left"],r["left-top"]),zu(n["top-right"],r["top-right"],r["right-top"]),zu(n["bottom-left"],r["left-bottom"],r["bottom-left"]),zu(n["bottom-right"],r["right-bottom"],r["bottom-right"]),zu(e,n["top-left"],n["top-right"],n["bottom-left"],n["bottom-right"],r["top-center"],r["left-middle"],r["right-middle"],r["bottom-center"]),this.a=r}t("H.ui.LayoutAlignment",Pu),u(Qu,Y),t("H.ui.base.Container",Qu),Qu.prototype.va=function(e,t){var r=this.a?this.a.length:0;for(Y.prototype.va.call(this,e,t);r--;)this.a[r].va(e,t);return this},Qu.prototype.setDisabled=Qu.prototype.va,Qu.prototype.Ja=function(e){var t=this.N();return this.a.push(e),t&&(e.W(t.ownerDocument),t.appendChild(e.N())),this},Qu.prototype.addChild=Qu.prototype.Ja,Qu.prototype.dh=function(){return this.a.concat()},Qu.prototype.getChildren=Qu.prototype.dh,Qu.prototype.removeChild=function(e){var t=this.a.indexOf(e),r=this.N();0<=t&&(this.a.splice(t,1),r&&r.removeChild(e.N()))},Qu.prototype.removeChild=Qu.prototype.removeChild,Qu.prototype.na=function(){var e=this.N();e&&this.a.forEach((function(t){e.removeChild(t.N())})),this.a=[]},Qu.prototype.X=function(e,t){for(var r=0,n=this.a.length;r<n;r++)e.appendChild(this.a[r].W(t))},Qu.prototype.renderInternal=Qu.prototype.X,Qu.prototype.o=function(){this.na(),this.a.forEach(this.qa,this),Y.prototype.o.call(this)},Qu.prototype.qa=function(e){e.F()},u(Ru,Qu),t("H.ui.Control",Ru),Ru.prototype.Ia=function(e){this.map=e},Ru.prototype.W=function(e){return Qu.prototype.W.call(this,e)},Ru.prototype.X=function(e,t){Qu.prototype.renderInternal.call(this,e,t),this.Vb(this.Mc)},Ru.prototype.renderInternal=Ru.prototype.X,Ru.prototype.Qe=function(){},Ru.prototype.onUnitSystemChange=Ru.prototype.Qe,Ru.prototype.Lb=function(){return this.map},Ru.prototype.getMap=Ru.prototype.Lb,Ru.prototype.pa=function(){return this.xa},Ru.prototype.getLocalization=Ru.prototype.pa,Ru.prototype.Ll=function(){return this.Mc},Ru.prototype.getAlignment=Ru.prototype.Ll,Ru.prototype.Vb=function(e){return"string"===typeof e&&Pu[e.replace("-","_").toUpperCase()]===e&&(this.Mc=e,this.dispatchEvent("alignmentchange")),this},Ru.prototype.setAlignment=Ru.prototype.Vb,u(Su,Ru),t("H.ui.ZoomControl",Su),Su.prototype.kn=function(){return this.P},Su.prototype.getZoomSpeed=Su.prototype.kn,Su.prototype.Do=function(e){this.P=e},Su.prototype.setZoomSpeed=Su.prototype.Do,Su.prototype.Ia=function(e){this.map!==e&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Tu(this)),Ru.prototype.Ia.apply(this,arguments),this.map&&(this.b(),e.addEventListener("mapviewchange",this.g),e.addEventListener("baselayerchange",this.b))},Su.prototype.setMap=Su.prototype.Ia,Su.prototype.o=function(){Ru.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Tu(this)},Su.prototype.X=function(e,t){Ru.prototype.renderInternal.call(this,e,t),this.i.jc(this.pa().translate("zoom.in")),this.m.jc(this.pa().translate("zoom.out"))},Su.prototype.renderInternal=Su.prototype.X,Su.prototype.Vb=function(e){var t=this.Mc;return Ru.prototype.Vb.call(this,e),t!==e&&this.b(),this},Su.prototype.setAlignment=Su.prototype.Vb,Su.prototype.g=function(){var e=this.map,t=e.pb(),r=e.Xa()-1;e=e.g||e.f.getCapabilities().lookAt.zoom,this.D&&this.c.wg(t),this.dc()||(this.i.va(t+r>=e.max),this.m.va(t<=e.min))},Su.prototype.va=function(e,t){return Su.j.va.call(this,e,t),this.g(),this},Su.prototype.setDisabled=Su.prototype.va,Su.prototype.s=function(e){var t,r=(e=e.target)===this.i?1:-1,n=0<r?Math.ceil:Math.floor,i=this.map,o=this;i&&("down"===e.getState()?(i.c.startControl(),i.c.control(0,0,r*this.P,0,0,0)):i.c.endControl(!0,(function(e){t=o.ea?e.zoom:n(e.zoom),e.zoom=t})))},Su.prototype.u=function(e){this.map&&this.map.df(e.newValue)},Su.prototype.b=function(){var e=this.Mc,t=this.Lb();if(/^top/g.test(e)||/^bottom/g.test(e)){var r=this.m;e=this.i;var n=!1}else r=this.i,e=this.m,n=!0;if(this.removeChild(r),this.removeChild(e),this.Ja(r),this.D&&t){Tu(this),t=n;var i=(n=(r=this.map)&&r.g)||r.f.getCapabilities().lookAt.zoom;(this.l=n)&&(n.addEventListener("minchange",this.b),n.addEventListener("maxchange",this.b)),this.c=new Hu({step:this.wa?1:0,vertical:t,min:i.min,max:i.max,value:r.pb(),pointerArea:r.N()}),this.c.addEventListener(this.c.A.ed,this.u),this.Ja(this.c)}this.Ja(e)};var Xu="H_l_top",cv="H_l_bottom",$u="H_l_left",bv="H_l_right",Yu="H_l_center",av="H_l_middle",Wu="H_l_horizontal",Zu="H_l_vertical",Vu="H_l_anchor";function dv(e,t){t?(t=e.offsetWidth,e.style.marginLeft=-Math.round(.5*t)+"px"):(t=e.offsetHeight,e.style.marginTop=-Math.round(.5*t)+"px")}Uu.prototype.update=function(){var e=this.a;dv(e["top-center"],!0),dv(e["bottom-center"],!0),dv(e["left-middle"],!1),dv(e["right-middle"],!1)},Uu.prototype.put=function(e,t){e=e?e.N():null;var r=t?this.a[t]:null;e&&r&&(e.parentElement&&e.parentElement.removeChild(e),r.insertBefore(e,/(bottom|right)$/.test(t)||/(center|middle)/.test(t)&&r.childNodes.length%2?r.firstChild:null)),this.update()};var ev={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",ev);var fv={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function gv(e){Eu.call(this,e),this.i=function(e){e.preventDefault()},this.g=A((function(e){this.dc()||this.toggleState(),e.preventDefault()}),this)}function hv(e,t,r){bj.call(this,e,{icon:iv,visibility:r}),jv(this,t)}function jv(e,t){e.zn=t,e.S&&(e.S.textContent=t)}u(gv,Eu),t("H.ui.base.PushButton",gv),gv.prototype.X=function(e){Bu(e,"start",this.g),Bu(e,"end",this.i),this.Jc(this.Ge(),!0)},gv.prototype.renderInternal=gv.prototype.X,gv.prototype.Lo=function(){var e=Fu.DOWN;return this.O(this.getState()===e?Fu.UP:e),this},gv.prototype.toggleState=gv.prototype.Lo,gv.prototype.o=function(){var e=this.N();e&&Cu(e,"start",this.g),Eu.prototype.o.call(this)},u(hv,bj);var iv=new Ti(yu(ru.document,"span","H_dm_label"),{onAttach:function(e,t,r){r.S=e,jv(r,r.zn)},onDetach:function(e,t,r){delete r.S}});function kv(e,t){F.call(this),this.b=e,this.f=new hv(this.Jo,""),t.push(this.f),this.a=new R({objects:t,data:this}),this.ug=this.ug.bind(this)}function lv(e,t){t&&(e.nextSibling=t,t.previousSibling=e)}function mv(e,t,r,n){var i=new L,o=[];lv(e,this),lv(this,t),i.qd(e.ya()),i.qd(t.ya()),this.c=new th(i,{style:r.Wd}),this.i=new th(i,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.V().lineWidth+2*(n||5))}}),r.c&&(this.g=new th(i,{style:r.c}),o.push(this.g)),o.push(this.c,this.i),kv.call(this,r,o),this.s=this.l=-1,(e=this.a).addEventListener("pointermove",this.J,!0,this),e.addEventListener("pointerleave",this.u,!0,this)}function nv(e,t,r){var n=e.c.ga();n.ff(3*+r,3,[t.lat,t.lng,0]),e.g&&e.g.da(n),e.i.da(n),e.c.da(n)}function ov(e,t,r){r=t.b(r||0),this.c=new Rn(e,{icon:r,zIndex:0}),this.c.draggable=!0,kv.call(this,t,[this.c]),(e=this.a).addEventListener("dragstart",this.Qn,!0,this),e.addEventListener("drag",this.Rn,!0,this),e.addEventListener("dragend",this.Pn,!0,this)}function pv(e){var t=0;e.nextSibling&&e.previousSibling&&(e.nextSibling.Wc||e.previousSibling.Wc?e.nextSibling.Wc&&!e.previousSibling.Wc&&(t=2):t=1),t=e.b.b(t),e.c.Ic(t)}function qv(e,t){this.Ca=t,this.b=e,this.a={Wc:!0},rv(this,this.a),this.$f=A(this.$f,this)}function sv(e,t){for(var r=(e=e.a).nextSibling;r!==e;){var n=r,i=r.previousSibling!==e&&t;(n.m=i)?n.ug():(n.Rh&&x.clearTimeout(n.Rh),n.Rh=x.setTimeout(n.ug,100)),r=r.nextSibling}}function tv(e,t){var r=t||e.a.nextSibling,n=0,i=0;if(t&&!uv(e,t))throw new D(e.Xe,0,t);for(r instanceof ov?n=r.Ee():r instanceof mv&&(n=r.previousSibling.Ee()),t=r;t&&t!==e.a;t=t.nextSibling,i++)t.ni(n),1===i%2&&(n+=t.Ee())}function uv(e,t){for(var r=e.a.nextSibling,n=!1;r!==e.a;){if(r===t){n=!0;break}r=r.nextSibling}return n}function vv(e,t,r){t=new mv(t,r,e.Ca),e.b.fa(t.a)}function rv(e,t){e.a.nextSibling=t,t.previousSibling=e.a}function wv(e){var t,r=(e=e||{}).lineStyle;Ru.call(this),this.s=new gv({label:fv.btn,onStateChange:A(this.Nn,this)}),this.Ja(this.s),(t=e.distanceFormatter)&&(this.oj=t),r&&(this.Xj=r,this.sk=B),this.Vb(e.alignment||"right-bottom"),this.g={},this.g[0]=e.startIcon,this.g[2]=e.endIcon,this.g[1]=e.stopoverIcon,this.g[3]=e.splitIcon}function xv(e){var t,r=e.map,n={};e.c||(e.l=new N,e.m=new tl(e.l,{pixelRatio:e.map.Xa()}),e.u=t=e.l.bc(),e.u.Vk(!0),t.addEventListener("dragstart",e.Ln,!0,e),t.addEventListener("dragend",e.ef,!0,e),t.addEventListener("pointerenter",e.ef,!0,e),t.addEventListener("pointerleave",e.Mn,!0,e),t.addEventListener("tap",e.co,!0,e),e.i=yv(e),n.a=A(e.oj,e),n.b=A(e.dk,e),n.g=A(e.Dj,e),n.map=e.map,n.f=e.i,n.Wd=e.Xj,n.c=e.sk,e.b=new qv(e.u,n),e.c=!0),e.i&&e.u.fa(e.i),r.addEventListener("tap",e.pk,!0,e),r.a.add(e.m)}function zv(e){var t=e.map;e.c&&(t.removeEventListener("tap",e.pk,!0,e),t.ae(e.m),e.b.na())}function yv(e){function t(){var e=n.yb();return e={anchor:n.kd().clone().scale(o).floor(),size:new Wi(Bd(e.w*o),Bd(e.h*o)),hitArea:i},new Wj(n.Qc(),e)}var r,n=e.dk(3),i=new Xi(Yi.NONE,[]),o=n===e.D?.5:1;if(1===n.getState())var a=t();else a=new Wj("<svg/>",{hitArea:i}),n.addEventListener("statechange",(function(){1===n.getState()&&r.Ic(t())}));return r=new Rn(e.map.bb(),{visibility:!1,icon:a})}function Av(){this.C=Bv.CLOSED,Qu.call(this,"div","H_overlay")}u(kv,F),p=kv.prototype,p.Wc=!1,p.Jo={lat:0,lng:0},p.Jc=function(e,t){jv(this.f,e),this.f.da(t)},p.Rh=0,p.ug=function(){this.f.qb(this.m)},u(mv,kv),mv.prototype.Ee=function(){var e=this.c.ga();return e.ye(0).Wa(e.ye(1))},mv.prototype.J=function(e){var t=e.currentPointer;e=this.previousSibling.ya();var r=this.nextSibling.ya(),n=this.b.f,i=t.viewportX;t=t.viewportY,this.l===i&&this.s===t||(this.l=i,this.s=t,n.da(this.b.g(e,r,{x:i,y:t})),n.qb(!0))},mv.prototype.u=function(){this.b.f.qb()},mv.prototype.ni=function(){this.Jc(this.b.a(this.Ee()),this.c.K().bb())},u(ov,kv),p=ov.prototype,p.hk=0,p.A={ed:"change"},p.Ee=function(){return this.hk},p.ya=function(){return this.c.ga()},p.Rn=function(e){var t=e.currentPointer;e=t.viewportX,t=t.viewportY,this.i===e&&this.l===t||(this.i=e,this.l=t,this.c.da(this.b.map.Pa(e-this.g.x,t-this.g.y)),this.dispatchEvent(new ud(this.A.ed,this)))},p.Qn=function(e){var t=e.currentPointer,r=t.viewportX;t=t.viewportY;var n=this.b.map.Da(this.ya());this.c.fe(1),this.g={x:r-n.x,y:t-n.y},e.stopPropagation()},p.Pn=function(){this.c.fe(0)},p.ni=function(e){this.hk=e,this.Jc(this.b.a(e),this.ya())},t("H.ui.distanceMeasurement.Model",qv),p=qv.prototype,p.Rf=function(){return this.a.nextSibling===this.a},p.ne=function(e){var t=this.a.previousSibling,r=this.Rf();return e=new ov(e,this.Ca,r?0:2),this.b.fa(e.a),lv(e,this.a),e.addEventListener(e.A.ed,this.$f),r?rv(this,e):(vv(this,t,e),pv(t),tv(this,t)),e},p.insertBefore=function(e,t){var r,n=1;if(t){if(!uv(this,t))throw new D(this.insertBefore,1,t);(r=t.previousSibling.Wc)&&(n=0),(e=new ov(e,this.Ca,n)).addEventListener(e.A.ed,this.$f),this.b.fa(e.a),r?(vv(this,e,r=this.a.nextSibling),rv(this,e),t=e,pv(r)):(t=(r=t.previousSibling).previousSibling,n=r.nextSibling,this.b.Ga(r.a),vv(this,t,e),vv(this,e,n)),tv(this,t)}else e=this.ne(e);return e},p.na=function(){rv(this,this.a),this.b.na()},p.Xe=function(e){var t=this.a,r=e.previousSibling,n=e.nextSibling;if(!uv(this,e))throw new D(this.Xe,0,e);if(this.b.Ga(e.a),r===t){var i=n;i!==t?(rv(this,e=i.nextSibling),e.ni(0),pv(e),tv(this,e)):rv(this,this.a)}else n===t?(lv(e=(i=r).previousSibling,t),pv(e)):r&&n&&(vv(this,r.previousSibling,n.nextSibling),this.b.rd([n.a,r.a]),tv(this,r.previousSibling));i&&i!==t&&this.b.Ga(i.a)},p.$f=function(e){var t=(e=e.target).previousSibling,r=e.nextSibling,n=e.ya();if(!r.Wc){nv(r,n,!1);var i=e}t.Wc||(nv(t,n,!0),i=t.previousSibling),tv(this,i)},u(wv,Ru),t("H.ui.DistanceMeasurement",wv),p=wv.prototype,p.Qh=ev.METRIC,p.Xj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.sk={strokeColor:"white",lineWidth:7},p.oj=function(e){var t="m",r=0;return"metric"===this.Qh?1e3<=e&&(e/=1e3,t="km",r=1):(t="ft",5280<=(e/=.3048)&&(e/=5280,t="mi",r=1)),e.toFixed(r)+" "+this.pa().translate("scale."+t)},p.Dj=function(e,t,r){var n=this.map.Da(e);return t=this.map.Da(t),r=new J(r.x,r.y).Cj(n,t),this.map.Pa(r.x,r.y)||ng(e)},p.X=function(e,t){var r=22*(this.map.f.type===kk.P2D?this.map.Xa():1),n=r/2;Ru.prototype.renderInternal.call(this,e,t),this.Qh=ev.METRIC,this.D=new Wj(fv.point,{anchor:{x:n,y:n},size:{w:r,h:r},hitArea:new Xi(Yi.CIRCLE,[n,n,n])}),this.s.jc(this.pa().translate("distance.measurement"))},wv.prototype.renderInternal=wv.prototype.X,p=wv.prototype,p.dk=function(e){return this.g[e]||this.D},p.ef=function(){sv(this.b,!0)},p.Ln=function(){sv(this.b)},p.Mn=function(e){"touch"!==e.currentPointer.type&&sv(this.b)},p.co=function(e){var t,r=e.currentPointer,n=e.target.Fa;n&&(n=n.getData())instanceof kv&&(t=n),n=t,e=(e=e.originalEvent).metaKey||e.altKey,n&&(e&&n instanceof ov?this.b.Xe(n):n instanceof mv&&(e=n.previousSibling.ya(),t=n.nextSibling.ya(),r={x:r.viewportX,y:r.viewportY},this.b.insertBefore(this.Dj(e,t,r),n.nextSibling),this.i.qb()),this.ef())},p.pk=function(e){var t=e.currentPointer;(e=e.target)!==this.map&&e.getProvider&&e.getProvider()===this.l||(this.b.ne(this.map.Pa(t.viewportX,t.viewportY)),this.i.qb(),this.ef())},p.Nn=function(e){"down"===e.target.getState()?xv(this):zv(this)},p.Qe=function(e){this.Qh=e,this.c&&(tv(this.b),this.ef())},wv.prototype.onUnitSystemChange=wv.prototype.Qe,wv.prototype.o=function(){zv(this),this.c&&(this.l.F(),this.m.F()),wv.j.o.call(this)},wv.prototype.Ia=function(e){e?this.s.getState()===Fu.DOWN&&(this.map=e,xv(this)):(zv(this),this.c=!1),Ru.prototype.Ia.apply(this,arguments)},wv.prototype.setMap=wv.prototype.Ia,u(Av,Qu),t("H.ui.base.OverlayPanel",Av),Av.prototype.O=function(e,t){return(e!==this.C||t)&&(this.C=e,e===Bv.OPEN?this.Ka("H_open"):this.kb("H_open")),this},Av.prototype.setState=Av.prototype.O,Av.prototype.getState=function(){return this.C},Av.prototype.getState=Av.prototype.getState,Av.prototype.xk=function(e){var t=e.Mc;e=e.N();var r=this.N(),n=r.style;if(this.kb("H_top"),this.kb("H_middle"),this.kb("H_bottom"),this.kb("H_left"),this.kb("H_center"),this.kb("H_right"),n.bottom=n.top=n.left=n.right=n.margin="",/top/g.test(t)){this.Ka("H_top"),n.top="0",n.margin="0 12px";var i=-1}else/bottom/g.test(t)?(this.Ka("H_bottom"),n.bottom="0",n.margin="0 12px",i=1):(this.Ka("H_middle"),n.top="50%",n.margin="0 12px",n.marginTop=-Math.round(.5*r.offsetHeight)+"px",i=0);/left/g.test(t)?(this.Ka("H_left"),n.left=e.offsetWidth+"px",n.marginLeft="12px"):/right/g.test(t)?(this.Ka("H_right"),n.right=e.offsetWidth+"px",n.marginRight="12px"):(this.Ka("H_center"),n.left="50%",0>i?(n.top=e.offsetHeight+"px",n.marginTop="12px"):0<i&&(n.bottom=e.offsetHeight+"px",n.marginBottom="12px"),n.marginLeft=-Math.round(.5*r.offsetWidth)+"px",e.appendChild(r))},Av.prototype.pointToControl=Av.prototype.xk;var Bv={OPEN:"open",CLOSED:"closed"};function Cv(e){e=e||{},Qu.call(this,"div","H_rdo"),this.g=new Y("div","H_rdo_title"),this.b=new Qu("div","H_rdo_buttons"),this.Ja(this.g),this.Ja(this.b),this.i=A((function(e){e.target.getState()===Fu.DOWN?(this.Kk(e.target,!0),this.dispatchEvent(Dv)):e.target.O(Fu.DOWN,!0)}),this),this.addEventListener("statechange",this.i),this.Ci(e.title||""),e.onActiveButtonChange&&this.addEventListener(Dv,e.onActiveButtonChange),e.buttonsOptions&&e.buttonsOptions.forEach((function(e){this.Gg(new gv(e))}),this)}Av.State=Bv,u(Cv,Qu),t("H.ui.base.RadioGroup",Cv);var Dv="activebuttonchange";function Ev(e){e=e||{},Ru.call(this),this.i=new Av,this.b=this.b.bind(this),this.s=this.s.bind(this),this.m=this.m.bind(this),this.Vb(e.alignment||"bottom-right"),Fv(this,e.baseLayers,e.layers)}function Gv(e,t){var r=[];return e.concat(t).forEach((function(e){r=r.concat(e.layer)})),r}function Hv(e,t,r){var n=e.Lb();if(n){e=Gv(e.c,e.g);var i=Gv(t,r);e.forEach((function(e){i.includes(e)||n.ae(e)}))}}function Fv(e,t,r){Hv(e,t,r),e.D=NaN,e.c=Bc(t)?t:[],e.g=Bc(r)?r:[],e.l&&(e.l.na(),e.u.na(),Iv(e))}function Iv(e){var t=e.pa();e.c.forEach((function(e,r){var n=e.layer;this.l.Gg(new gv({label:Jv(t,e.label),data:r,disabled:!n||Bc(n)&&!n.length}))}),e),e.g.forEach((function(e,r){var n=e.layer;this.u.Ja(new gv({label:Jv(t,e.label),onStateChange:this.sb.bind(this,e.layer),data:r,disabled:!n||Bc(n)&&!n.length}))}),e),e.ea.qb(!(!e.g.length||!e.c.length)),x.setTimeout(function(){this.map&&(this.b(),this.P.va(!(this.c&&this.c.length||this.g&&this.g.length)))}.bind(e))}function Mv(e,t){var r=window.H.service&&window.H.service.omv.Provider,n=t.ca();if(r&&t.ca()instanceof r&&n.V().xe){var i=n.V(),o=function(){var e=Nv.ground.filter((function(e){return!!i.kh("layers."+e)})),r=Nv.water.filter((function(e){return!!i.kh("layers."+e)}));if(e.concat(r).length){var a={};$h(a,i.xe(e)),$h(a,i.xe(r,!1,!0)),delete a.global,e=new ti(a,i.Ib()),(e=n.s().$b(e)).Bg=t,this.map.nf(e)}i.removeEventListener(Zh.CHANGE,o)}.bind(e);i.getState()!==Xh.READY?i.addEventListener(Zh.CHANGE,o):o()}}function Kv(e){return iu(e.map.a.La(),(function(e){return!!e.Bg}))}function Lv(e){e=e.map.a.La();var t=window.H.service&&window.H.service.traffic.flow.Provider;return!!t&&e.some((function(e){return e.ca()instanceof t}))}Cv.prototype.X=function(e,t){Qu.prototype.renderInternal.call(this,e,t),this.Ci(this.c,!0)},Cv.prototype.renderInternal=Cv.prototype.X,Cv.prototype.na=function(){this.b.na()},Cv.prototype.Ci=function(e,t){return(e!==this.c||t)&&(this.c=e,this.g.N()&&(this.g.N().innerHTML=this.c)),this},Cv.prototype.setTitle=Cv.prototype.Ci,Cv.prototype.an=function(){return this.c},Cv.prototype.getTitle=Cv.prototype.an,Cv.prototype.Gg=function(e){if(!(e instanceof gv))throw Error("PushButton expected");return e.ka(this),this.b.Ja(e),this},Cv.prototype.addButton=Cv.prototype.Gg,Cv.prototype.ko=function(e){return this.b.removeChild(e),e.ka(null),this},Cv.prototype.removeButton=Cv.prototype.ko,Cv.prototype.Df=function(){return this.b.dh()},Cv.prototype.getButtons=Cv.prototype.Df,Cv.prototype.Kk=function(e,t){for(var r=this.Df(),n=r.length;n--;)r[n].O(r[n]===e?Fu.DOWN:Fu.UP,t)},Cv.prototype.setActiveButton=Cv.prototype.Kk,Cv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.na(),Qu.prototype.o.call(this)},u(Ev,Ru),t("H.ui.MapSettingsControl",Ev),Ev.prototype.ta=function(){var e=this.Lb();e&&(e.addEventListener("tap",this.s),(e=e.a).addEventListener("add",this.b),e.addEventListener("remove",this.b),e.addEventListener("set",this.b))},Ev.prototype.T=function(){var e=this.Lb();e&&(e.removeEventListener("tap",this.s),(e=e.a).removeEventListener("add",this.b),e.removeEventListener("remove",this.b),e.removeEventListener("set",this.b))},Ev.prototype.X=function(e,t){var r=this.pa().translate("layers.choose");Ru.prototype.renderInternal.call(this,e,t),this.ta(),this.P=new gv({tooltip:r,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A((function(e){e.target.getState()===Fu.DOWN?(this.i.O(Bv.OPEN),this.i.xk(this)):this.i.O(Bv.CLOSED)}),this)}),Ev.prototype.wa=function(e){if(this.map.f.type===Qn){var t=H.map.render.harp.Style;e=[].concat(e);for(var r=0;!i&&r<e.length;r++){var n=e[r].ca();if(n.Sb()&&n.V)var i=(n=n.V()).getConfig()||n.getUrl()}if(i){var o=function(e){(e=e.ca()).Sb()&&e.V&&e.V()instanceof t&&e.gb(new t(i))};this.g.forEach((function(e){Bc(e=e.layer)?e.forEach(o):e&&o(e)}))}}},this.l=new Cv({title:r,onActiveButtonChange:function(){var e=this.D;e:{for(var t=this.l.Df(),r=t.length;r--;)if(t[r].getState()===Fu.DOWN){t=t[r];break e}t=null}if(t=t.getData(),r=Bc(t=this.c[t].layer),this.map.ud(r?t[0]:t),(e=this.c[e])&&Bc(e=e.layer))for(var n=e.length;1<n--;)this.map.ae(e[n]);if(r)for(e=t.length;1<e--;)this.map.nf(t[e],1);this.wa(t),this.m()}.bind(this)}),this.u=new Qu("div","H_grp"),this.ea=new Y("div","H_separator"),this.Ja(this.P),this.Ja(this.i),this.i.Ja(this.l),this.i.Ja(this.ea),this.i.Ja(this.u),Iv(this)},Ev.prototype.renderInternal=Ev.prototype.X,Ev.prototype.b=function(){var e=this.map.g,t=this.map.a;this.D=NaN,this.c.forEach((function(t,r){t=t.layer,t=e===(Bc(t)?t[0]:t),this.l.Df()[r].O(Fu[t?"DOWN":"UP"],!0),t&&(this.D=r)}),this),this.g.forEach((function(e,r){var n=Bc(e=e.layer);r=this.u.dh()[r],!e||n&&!e.length?r.va(!0):r.O(Fu[-1!==t.indexOf(n?e[0]:e)?"DOWN":"UP"],!0)}),this)},Ev.prototype.sb=function(e,t){e=Bc(e)?e:[e],t=t.target.getState()===Fu.DOWN;for(var r=0;r<e.length;r++)t?this.map.nf(e[r]):this.map.ae(e[r]);this.m()},Ev.prototype.m=function(){var e=Kv(this);e&&(e.Bg.ca().V().Oe(e.ca().V().qc()),this.map.ae(e),e.F(),delete e.Bg),Lv(this)&&Mv(this,this.map.g)};var Nv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function Jv(e,t){return/^layers?/.test(t)&&e.Nf(t)?e.translate(t):t}Ev.prototype.s=function(){this.P.O(Fu.UP)},Ev.prototype.o=function(){Ev.j.o.call(this),this.T()};var Ov=[];t("H.ui.i18n.defaultLocales",Ov);var Pv={},Qv=[];function Rv(e,t){Pv[e]=t,-1===Ov.indexOf(e)&&Ov.push(e),Qv.length?Sv(e,t):Qv=Object.keys(t)}function Sv(e,t){for(var r,n=Qv,i=n.length;i--;)if(!t[r=n[i]])throw Error("'"+r+"' key missing in translation map for "+e)}function Tv(e){e=e||{},Ru.call(this),this.c=new gv({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.On,this)}),this.Ja(this.c),this.Vb(e.alignment||"right-bottom")}function Uv(e,t){if(!Cc(e))throw new TypeError("string locale code required");if(Ea(t))Sv(e,t);else{if(-1===Ov.indexOf(e))throw Error("Default locale '"+e+"' does nto exist.");t=Pv[e]}this.b=t||{},this.a=e}function Vv(e){e=e||{},Ru.call(this),this.Ka("H_scalebar"),this.Vb(e.alignment||"right-bottom"),this.m=150,this.update=A(this.update,this),this.i=this.g=this.b=this.c=null}function Wv(e){C(e,Re,Wv,1),Y.call(this,"div","H_context_menu_item"),this.b=e,this.c=A(this.c,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Xv(e){C(e,Array,Xv,1),Qu.call(this,"div","H_context_menu"),this.c=e,this.b=null}function Yv(e,t){t=t||{};var r=this;Y.call(this,"div","H_ib H_ib_top"),this.u=A((function(e){r.dc()||(r.close(),e.preventDefault())}),this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(e),this.$e(t.content),t.onStateChange&&this.addEventListener("statechange",t.onStateChange),this.O(Zv.OPEN)}u(Tv,Ru),t("H.ui.ZoomRectangle",Tv),p=Tv.prototype,p.On=function(e){var t=this.map,r=t.b.element;e.target.getState()===Fu.DOWN?(t.addEventListener("dragstart",this.fk,!0,this),t.addEventListener("drag",this.gk,!0,this),t.addEventListener("dragend",this.ek,!0,this),(e=r.ownerDocument.createElement("div")).className="H_zoom_lasso",r.appendChild(e),this.b=e):(t.removeEventListener("dragstart",this.fk,!0,this),t.removeEventListener("drag",this.gk,!0,this),t.removeEventListener("dragend",this.ek,!0,this),r.removeChild(this.b))},p.fk=function(e){var t=this.b.style,r=e.currentPointer,n=r.viewportX;r=r.viewportY,e.target===this.map&&(e.stopPropagation(),t.width="0px",t.height="0px",t.top=r+"px",t.left=n+"px",t.display="block",this.i=r,this.g=n)},p.gk=function(e){var t=e.currentPointer,r=t.viewportX,n=t.viewportY;t=this.g;var i=this.i,o=this.b.style;e.target===this.map&&(e.stopPropagation(),e=r-t,r=n-i,o.left=t+(0>e?e:0)+"px",o.top=i+(0>r?r:0)+"px",o.width=Math.abs(e)+"px",o.height=Math.abs(r)+"px")},p.ek=function(e){var t=this.map,r=e.currentPointer;e.target===this.map&&(e.stopPropagation(),this.b.style.display="none",t.c.Wb({bounds:tg([t.Pa(this.g,this.i),t.Pa(r.viewportX,r.viewportY)])},!0))},p.X=function(e,t){Ru.prototype.renderInternal.call(this,e,t),this.c.jc(this.pa().translate("zoom.rectangle"))},Tv.prototype.renderInternal=Tv.prototype.X,Rv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.OTHER":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.LANE_RESTRICTION":"Rijstrookbeperking","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Rv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.OTHER":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.LANE_RESTRICTION":"Limita\xe7\xe3o da faixa de rodagem","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Rv("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.OTHER":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.ROAD_CLOSURE":"\u0414\u043e\u0440\u043e\u0433\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0430","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.LANE_RESTRICTION":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u043e\u0441\u044b \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),Rv("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.OTHER":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.LANE_RESTRICTION":"Kaista rajoitus","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),Rv("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.OTHER":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.LANE_RESTRICTION":"Restri\xe7\xe3o de pista","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Rv("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.OTHER":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8def\u5df2\u5173\u95ed","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.LANE_RESTRICTION":"\u8f66\u9053\u9650\u5236","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),Rv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.OTHER":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.LANE_RESTRICTION":"Restricci\xf3n de carril","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),Rv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.OTHER":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xe9e ferm\xe9e","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.LANE_RESTRICTION":"Restriction de voie","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),Rv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.OTHER":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.LANE_RESTRICTION":"Ograniczenie pasa ruchu","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),Rv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.OTHER":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.LANE_RESTRICTION":"Fahrstreifensperrung","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Rv("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.OTHER":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.LANE_RESTRICTION":"\u015eerit k\u0131s\u0131tlamas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),Rv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.OTHER":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.LANE_RESTRICTION":"Restrizione di corsia","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Rv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.OTHER":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.LANE_RESTRICTION":"Lane restriction","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Uv),Uv.prototype.zm=function(){return this.a},Uv.prototype.getLocale=Uv.prototype.zm,Uv.prototype.sm=function(){return Object.keys(this.b)},Uv.prototype.getKeys=Uv.prototype.sm,Uv.prototype.Nf=function(e){return!(!this.b||!this.b[e])},Uv.prototype.hasKey=Uv.prototype.Nf,Uv.prototype.translate=function(e){var t=this.b[e];if(!Cc(t))throw Error("Translation missing for key '"+e+"'.");return t},Uv.prototype.translate=Uv.prototype.translate,u(Vv,Ru),t("H.ui.ScaleBar",Vv),Vv.prototype.X=function(e,t){Ru.prototype.renderInternal.call(this,e,t),e.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',e.style.direction="ltr",this.c=e.firstChild,t=this.c.childNodes,this.b=t[0],this.g=t[1],this.i=e.lastChild,this.l=ev.METRIC,this.s=A((function(e){this.dc()||(this.dispatchEvent("toggleunitsystem"),e.preventDefault())}),this),this.u=A((function(e){e.preventDefault()}),this),Bu(e,"start",this.u),Bu(e,"end",this.s),this.jc(this.pa().translate("scale.switchToImperial")),this.update()},Vv.prototype.renderInternal=Vv.prototype.X,Vv.prototype.Ia=function(e){this.map&&this.map.removeEventListener("mapviewchange",this.update),e&&e.addEventListener("mapviewchange",this.update),Ru.prototype.Ia.apply(this,arguments)},Vv.prototype.setMap=Vv.prototype.Ia,Vv.prototype.capture=function(e,t,r){var n=this.N(),i=n.ownerDocument,o=i.createElement("canvas"),a=o.getContext("2d"),s=i.createElementNS("http://www.w3.org/2000/svg","svg"),l=i.createElementNS("http://www.w3.org/2000/svg","foreignObject"),c=lf(n,i,!1);i=parseFloat(n.offsetWidth)+1;var u=parseFloat(n.offsetHeight),p=i*e;e*=u,o.width=p,o.height=e,s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("width",p),s.setAttribute("height",e),s.setAttribute("viewBox","0 0 "+i+" "+u),l.setAttribute("width","100%"),l.setAttribute("height","100%"),s.appendChild(l),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var f=window.getComputedStyle(n);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach((function(e){c.style.setProperty(e,f.getPropertyValue(e))})),l.appendChild(c),new tf("image",n=bf(s.outerHTML)).then((function(e){a.drawImage(e,0,0),t(o)}),r)},Vv.prototype.capture=Vv.prototype.capture,Vv.prototype.Qe=function(e){this.l=e,this.jc("imperial"===e?this.pa().translate("scale.switchToMetric"):this.pa().translate("scale.switchToImperial")),this.update()},Vv.prototype.onUnitSystemChange=Vv.prototype.Qe,Vv.prototype.update=function(){var e;if(this.N()){this.c=this.c,this.b=this.b;var t=this.m,r=0,n=this.map;if(n){var i=Math.round(.5*n.b.width),o=Math.round(.5*n.b.height);(e=n.Pa(i,o))&&(n=n.Pa(i+1,o))&&(r=100*e.Wa(n))}r&&(this.l===ev.IMPERIAL?1609.344>r?(n=r/.3048006,e=this.pa().translate("scale.ft")):(n=r/1609.344,e=this.pa().translate("scale.mi")):1e3>r?(n=r,e=this.pa().translate("scale.m")):(n=r/1e3,e=this.pa().translate("scale.km")),(n=(r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)))/n*100)<t/5?(r*=5,n*=5):n<t/2?(r*=2,n*=2):n>t&&(r/=2,n/=2),n=Math.round(n),this.c.setAttribute("width",n),this.i.textContent=r+" "+e,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=n-2)}},u(Wv,Y),t("H.ui.context.Item",Wv),Wv.prototype.c=function(e){var t=this.b,r=t.callback;r&&!t.isDisabled()&&(this.dispatchEvent("click"),r(e))},Wv.prototype.X=function(){var e=this,t=this.N();Ee(t,"click",this.c),t.addEventListener("keyup",(function(t){13==t.keyCode&&e.c(t)})),this.a()},Wv.prototype.renderInternal=Wv.prototype.X,Wv.prototype.a=function(){var e=this.N(),t=this.b;t.callback?(this.Ka("clickable"),e.setAttribute("tabindex","0")):(this.kb("clickable"),e.removeAttribute("tabindex")),t.isDisabled()?this.Ka("disabled"):this.kb("disabled"),t=t.getLabel(),su.textContent=t,e.innerHTML=su.innerHTML.split("\n").join("<br/>")},Wv.prototype.o=function(){Y.prototype.o.call(this),this.b.removeEventListener("update",this.a)},u(Xv,Qu),t("H.ui.context.Menu",Xv),Xv.prototype.X=function(){Qu.prototype.X.apply(this,arguments),this.c.forEach((function(e){e===Se?e=new Y("div","H_context_menu_item_separator"):(e=new Wv(e)).addEventListener("click",this.g.bind(this)),this.Ja(e)}),this),Ee(this.N(),["mousedown","touchstart","pointerdown","wheel"],(function(e){e.stopPropagation()}))},Xv.prototype.renderInternal=Xv.prototype.X,Xv.prototype.setPosition=function(e,t){if(this.b){var r=this.N(),n=r.offsetWidth,i=r.offsetHeight,o=this.b,a=o.b.width;e+n>a&&e>a/2&&(e-=n),t+i>(o=o.b.height)&&t>o/2&&(t-=i),lu(r,e,t)}},Xv.prototype.setPosition=Xv.prototype.setPosition,Xv.prototype.g=function(){this.b&&this.b.dispatchEvent(new ud("contextmenuclose",this.b))},Xv.prototype.Ia=function(e){this.b=e},Xv.prototype.setMap=Xv.prototype.Ia,u(Yv,Y),t("H.ui.InfoBubble",Yv),Yv.prototype.a=null,Yv.prototype.ya=function(){return this.m},Yv.prototype.setPosition=function(e){this.m=ng(e),this.update()},Yv.prototype.setPosition=Yv.prototype.setPosition,Yv.prototype.Ia=function(e){this.a=e},Yv.prototype.X=function(e,t){this.l=yu(t,"div","H_ib_body"),this.tailEl_=yu(t,"div","H_ib_tail"),this.c=yu(t,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=yu(t,"div","H_ib_content","&nbsp;"),this.l.appendChild(this.c),this.l.appendChild(this.b),Bu(this.c,"start",this.u),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),e.appendChild(this.l),e.appendChild(this.tailEl_),this.$e(this.g)},Yv.prototype.renderInternal=Yv.prototype.X,Yv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Yv.prototype.update=function(){var e,t=this.N(),r=this.a,n="none";if(this.s=0,r&&t&&this.getState()===Zv.OPEN){if(e=r.Da(this.m)){var i=e.x;e=e.y,(i>=-(r=r.b.width)||i<=2*r||e>=-r||e<=2*r)&&(n="",mu?(t.style.left=i-r+"px",t.style.top=e+"px"):lu(t,i,e))}t.style.display=n,""===n&&(t.style.visibility="visible")}};var Zv={OPEN:"open",CLOSED:"closed"};function $v(e,t){this.a=e,this.b=null,this.f=0,this.c=22,this.i=t,this.Xf=A(this.Xf,this),this.Sg=A(this.Sg,this),(e=this.a.Lb()).addEventListener("mapviewchange",this.bo,!1,this),this.g=e.f.type,(e=e.a).addEventListener("add",this.Sn,!1,this),e.addEventListener("remove",this.Tn,!1,this)}function aw(e,t,r){var n=t.ca();n&&void 0!==r&&r&&n.removeEventListener("tap",e.Xf),t?(n.addEventListener("tap",e.Xf),e.f=n.min,e.c=n.max):(e.f=0,e.c=22)}function bw(e){return window.H.service&&(e.ca()instanceof window.H.service.traffic.incidents.Provider||e.ca()instanceof window.H.service.trafficVectorTile.Provider&&"incident"===e.ca().s().b)}function cw(e,t){try{return e.Qf=!0,new e(t)}finally{e.Qf=!1}}function dw(e,t){var r=e.N(),n=this;F.call(this),this.c=e,this.i=r.ownerDocument,this.f={},this.b=[],this.S=yu(this.i,"div","H_ui"),this.setDirection(),this.P=A((function(e){this.m.put(e.target,e.target.Mc)}),this),this.addEventListener("alignmentchange",this.P),this.L=A((function(){this.fl()}),this),this.addEventListener("toggleunitsystem",this.L),this.S.addEventListener("contextmenu",this.J,!1),this.S.addEventListener("MSHoldVisual",this.J,!1),this.c.addEventListener("contextmenu",this.D,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.tb(this.F.bind(this)),this.a=null,this.s=-1,this.m=new Uu(this.S,this.i),this.g=ev.METRIC,ew(this,"en-US"),t&&fw(this,t),r.appendChild(this.S),x.setTimeout((function(){n.m.update()}),1)}function ew(e,t){if(Cc(t))var r=t;else{if(!(t instanceof Uv))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");r=t.a;var n=t}if(!r)throw Error("No locale was defined.");if(n)e.l=n;else{if(!(0<=Ov.indexOf(r)))throw Error("Locale ["+r+"] is not supported.");e.l=new Uv(r)}}function fw(e,t){var r,n;t.unitSystem&&e.vg(t.unitSystem),(n=t.locale)&&ew(e,n),(r=t.zoom)&&e.Bd("zoom",new Su(Ea(r)?r:null)),(r=t.zoomrectangle)&&e.Bd("zoomrectangle",new Tv(Ea(r)?r:null)),(r=t.mapsettings)&&e.Bd("mapsettings",new Ev(Ea(r)?r:null)),(r=t.scalebar)&&e.Bd("scalebar",new Vv(Ea(r)?r:null)),(r=t.distancemeasurement)&&e.Bd("distancemeasurement",new wv(Ea(r)?r:null))}function hw(e,t,r,n){for(var i=e,o=0;i&&o<t.length;o++)i=i[t[o]];if(i&&i!==e)return e={label:r,layer:i},n.push(e),e}function gw(e,t,r){var n=[],i=[],o=t.raster;if(e===kk.P2D&&o){if(hw(t,["raster","normal","map"],"layers.normal",n),hw(t,["raster","satellite","map"],"layers.satellite",n),hw(t,["raster","terrain","map"],"layers.terrain",n),r)for(var a in o)if(o[a]&&o[a].map===r){var s=a;break}hw(t,["raster","normal","trafficincidents"],"layer.incidents",i),hw(t,["raster",s,"transit"],"layer.transit",i)}else hw(t,["vector","normal","map"],"layers.normal",n),e===kk.WEBGL?(hw(t,["raster","satellite","map"],"layers.satellite",n),hw(t,["vector","normal","traffic"],"layer.traffic",i),hw(t,["vector","normal","trafficincidents"],"layer.incidents",i)):(r=hw(t,["hybrid","day","vector"],"",[]),(o=hw(t,["hybrid","day","raster"],"layers.satellite",n)).layer=[o.layer,r.layer],window.H.service&&(r=t.vector.traffic.map.ca().s().v(),t=cw(window.H.service.trafficVectorTile.Service,{baseUrl:r,layer:"flow"}),r=cw(window.H.service.trafficVectorTile.Service,{baseUrl:r,layer:"incident"}),s=Ao()+"/harp/oslo/normal.day.json",o=new H.map.render.harp.Style(s),s=new H.map.render.harp.Style(s),t=t.createLayer(o,{engineType:e}),e=r.createLayer(s,{engineType:e}),i.push({label:"layer.traffic",layer:t},{label:"layer.incidents",layer:e})));return{alignment:"bottom-right",baseLayers:n,layers:i}}function iw(e,t){if(t=t||{},!(e&&e instanceof sl))throw Error("Base layer is mandatory for overview UI element");Ru.call(this),this.c=new gv({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Ja(this.c),this.b=new jw(e,t.zoomDelta,t.scaleX,t.scaleY),this.Vb(t.alignment||"right-bottom"),this.Ja(this.b)}function jw(e,t,r,n){this.l=e,"number"===typeof t&&(this.jl=t),"number"===typeof r&&(this.tk=r),"number"===typeof n&&(this.uk=n),Qu.call(this,"div","H_overview")}function lw(e){!e.zd&&kw(e),e.kb("H_overview_active"),e.b.removeEventListener("mapviewchange",e.Fi,!1,e)}function kw(e,t){var r=e.b.b.element,n=e.N().style,i=r.offsetWidth/e.tk/10;r=r.offsetHeight/e.uk/10;var o=e.g.style;t?(n.width=i+"em",n.height=r+"em",o.width=i+"em",o.height=r+"em"):n.width=n.height="0em",e.c.b.resize()}function mw(e,t){if(!e)throw new D(mw,0,e);mw.j.constructor.call(this,e),this.b={},this.c=!(!t||!t.oc),this.f=nw++}Yv.State=Zv,Yv.prototype.C=Zv.OPEN,Yv.prototype.getState=function(){return this.C},Yv.prototype.getState=Yv.prototype.getState,Yv.prototype.O=function(e){e!==this.C&&(this.C=e,this.dispatchEvent("statechange")),(e=this.N())&&(this.C===Zv.OPEN?(e.style.display="block",e.style.visibility="hidden",this.i()):e.style.display="none")},Yv.prototype.setState=Yv.prototype.O,Yv.prototype.close=function(){this.O(Zv.CLOSED)},Yv.prototype.close=Yv.prototype.close,Yv.prototype.open=function(){this.O(Zv.OPEN)},Yv.prototype.open=Yv.prototype.open,Yv.prototype.Ul=function(){return this.b||null},Yv.prototype.getContentElement=Yv.prototype.Ul,Yv.prototype.$e=function(e){if(e){if("string"!==typeof e&&("number"!==typeof e.nodeType||"string"!==typeof e.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.g=e}else this.g="";this.N()&&(this.g?(this.b.innerHTML="","string"===typeof this.g?this.b.innerHTML=e:"number"===typeof e.nodeType&&"string"===typeof e.nodeName&&this.b.appendChild(e)):this.b.innerHTML="&nbsp;",this.i())},Yv.prototype.setContent=Yv.prototype.$e,Yv.prototype.o=function(){this.close(),this.$e(""),this.c&&Cu(this.c,"end",this.u),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),Y.prototype.o.call(this)},p=$v.prototype,p.bo=function(e){var t=e.newValue.zoom;this.b&&e.modifiers&e.ZOOM&&(t<this.f||t>this.c)&&this.b.close()},p.Sn=function(e){bw(e=e.added)&&aw(this,e)},p.Tn=function(e){bw(e=e.removed)&&(this.b&&this.b.close(),aw(this,e,!0))},p.Xf=function(e){var t,r=this.g===kk.HARP;e.target&&(t=e.target.getData())&&0===e.currentPointer.button&&(r?(t=this.a.Lb().Pa(e.currentPointer.viewportX,e.currentPointer.viewportY),(r=e.target.getData()?e.target.getData().properties.id:null)&&this.i.requestIncidentById(r,{locationReferencing:"none",lang:this.a.pa().a,units:this.a.g===ev.METRIC?"metric":"imperial"},this.hl.bind(this,t),console.error)):(r=e.target.ga(),this.hl(r,t)),e.stopPropagation())},p.hl=function(e,t){if(this.g===kk.HARP){t=t.incidentDetails;var r=this.a.pa().a,n=t.type,i=n.split(/(?=[A-Z])/).join("_").toUpperCase();this.a.pa().Nf("traffic."+i)&&(n=this.a.pa().translate("traffic."+i)),e={position:e,title:n,description:t.description.value,startTime:new Date(t.startTime).toLocaleString(r).split(",").join(" "),endTime:new Date(t.endTime).toLocaleString(r).split(",").join(" ")}}else r=t.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),e={position:e,title:r=this.a.pa().Nf("traffic."+r)?this.a.pa().translate("traffic."+r):t.TRAFFIC_ITEM_DESCRIPTION[t.TRAFFIC_ITEM_DESCRIPTION.length-1].value,description:t.TRAFFIC_ITEM_DESCRIPTION[0].value,startTime:t.START_TIME,endTime:t.END_TIME};this.Sg(e)},p.Sg=function(e){var t=e.position,r=e.title,n=e.description,i=e.startTime;e=e.endTime,this.b||(this.b=new Yv(t),this.b.Ka("H_tib"),this.a.Yi(this.b)),this.b.setPosition(t),this.b.$e('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",r).replace("{{desc}}",n).replace("{{traffic.from}}",this.a.pa().translate("traffic.from")).replace("{{traffic.until}}",this.a.pa().translate("traffic.until")).replace("{{from}}",i).replace("{{until}}",e)),this.b.open()},u(dw,F),t("H.ui.UI",dw),dw.prototype.J=function(e){for(var t=e.target;t&&!/\bH_ib_content\b/.test(t.className);)t=t.parentNode;t||e.preventDefault()},dw.prototype.N=function(){return this.S},dw.prototype.getElement=dw.prototype.N,dw.prototype.Lb=function(){return this.c},dw.prototype.getMap=dw.prototype.Lb,dw.prototype.dn=function(){return this.g},dw.prototype.getUnitSystem=dw.prototype.dn,dw.prototype.vg=function(e){var t,r=this.f;if(e!==this.g)for(t in this.g=e,r)r[t]instanceof Ru&&r[t].onUnitSystemChange(this.g)},dw.prototype.setUnitSystem=dw.prototype.vg,dw.prototype.setDirection=function(e){this.S.setAttribute("dir",e||getComputedStyle(this.Lb().N()).direction)},dw.prototype.setDirection=dw.prototype.setDirection,dw.prototype.pa=function(){return this.l},dw.prototype.fl=function(){this.g===ev.METRIC?this.vg(ev.IMPERIAL):this.vg(ev.METRIC)},dw.prototype.toggleUnitSystem=dw.prototype.fl,dw.prototype.Yi=function(e){var t=this.b.length,r=this.S;if(0>this.b.indexOf(e)){e.ka(this),e.Ia(this.c);var n=e.W(this.i);t=0<t?this.b[t-1].N().nextSibling:this.S.firstChild,r.insertBefore(n,t),this.b.push(e)}},dw.prototype.addBubble=dw.prototype.Yi,dw.prototype.D=function(e){var t=e.items;this.a&&this.u(),clearTimeout(this.s),this.s=x.setTimeout(function(){t.length&&(this.a=new Xv(t),this.S.insertBefore(this.a.W(this.i),this.S.firstChild),this.a.ka(this),this.a.Ia(this.c),this.a.setPosition(e.viewportX,e.viewportY))}.bind(this),0)},dw.prototype.u=function(){this.a&&(this.a.F(),this.a=null)},dw.prototype.jo=function(e){var t=this.b.indexOf(e);-1<t&&(e.ka(null),e.Ia(null),this.b.splice(t,1),this.S.removeChild(e.N()))},dw.prototype.removeBubble=dw.prototype.jo,dw.prototype.Ql=function(){return this.b},dw.prototype.getBubbles=dw.prototype.Ql,dw.prototype.Bd=function(e,t){if(this.Ce(e))throw Error("A control with name ["+e+"] is already registered.");t.ka(this),t.Ia(this.c),t.xa=this.l,t.W(this.i),t.onUnitSystemChange(this.g),this.f[e]=t},dw.prototype.addControl=dw.prototype.Bd,dw.prototype.lo=function(e){var t=this.Ce(e);if(!t)throw Error("Control ["+e+"] not found in this UI's controls.");return t.T(),t.ka(null),t.Ia(null),Du(t),delete this.f[e],t},dw.prototype.removeControl=dw.prototype.lo,dw.prototype.Ce=function(e){return this.f[e]},dw.prototype.getControl=dw.prototype.Ce,dw.prototype.o=function(){for(var e in this.f)ju.hasOwnProperty.call(this.f,e)&&this.f[e].F();this.b.forEach((function(e){e.F()})),(e=this.S.parentNode)&&e.removeChild(this.S),F.prototype.o.call(this),delete this.S},dw.prototype.capture=function(e,t,r,n){var i=this.Ce("scalebar"),o=e.getContext("2d"),a=e.width,s=e.height,l=this.c.s,c=5+(l?l.N().childNodes[1].offsetHeight:0);i&&i.wc()?i.capture(t,(function(n){o.drawImage(n,a-n.width-5*t,s-n.height-c*t),r(e)}),n):r(e)},dw.prototype.capture=dw.prototype.capture,dw.createDefault=function(e,t,r){var n=e.f.type;if(r=new dw(e,{unitSystem:ev.METRIC,zoom:{alignment:"right-bottom"},mapsettings:gw(n,t,e.g),scalebar:{alignment:"bottom-right"},locale:r||"en-US"}),n===kk.P2D){var i=r.Ce("mapsettings"),o=function(){if(i.Lb()){var r=gw(n,t,e.g);Fv(i,r.baseLayers,r.layers)}};e.addEventListener(e.A.lf,o),r.tb((function(){e.removeEventListener(e.A.lf,o)})),i.tb((function(){e.removeEventListener(e.A.lf,o)}))}if(n===kk.HARP){if(window.H.service){var a=t.vector.traffic.map.ca().s().v(),s=new window.H.service.Url(a.i,a.c.split(".").slice(-2).join(".")),l=(s=cw(window.H.service.traffic.Service7,{platformBaseUrl:s})).v().getQuery();l.apikey=a.getQuery().apikey,s.v().bf(l),new $v(r,s)}}else new $v(r);return r},dw.prototype.Bo=function(){},dw.prototype.setTrafficIncidentsHandle=dw.prototype.Bo,u(iw,Ru),t("H.ui.Overview",iw),iw.prototype.ud=function(e){return this.b.ud(e),this},iw.prototype.setBaseLayer=iw.prototype.ud,iw.prototype.g=function(e){e.target.getState()===Fu.DOWN?(kw(e=this.b,!0),e.Fi(),e.Ka("H_overview_active"),e.b.addEventListener("mapviewchange",e.Fi,!1,e)):lw(this.b)},iw.prototype.X=function(e,t){Ru.prototype.renderInternal.call(this,e,t),this.c.N().style.float=this.Mc.match("right")?"right":"left",this.b.Ia(this.map),this.c.jc(this.pa().translate("minimap"))},iw.prototype.renderInternal=iw.prototype.X,iw.prototype.o=function(){this.b.F(),Y.prototype.o.call(this)},u(jw,Ru),jw.prototype.ud=function(e){this.c.ud(e)},jw.prototype.X=function(e,t){zu(e,t=yu(t,"div","H_overview_map")),this.g=t},jw.prototype.renderInternal=jw.prototype.X,jw.prototype.renderInternal=jw.prototype.X,p=jw.prototype,p.jl=3,p.tk=5,p.uk=5,p.Ia=function(e){this.b=e,this.c=new U(this.g,this.l,{pixelRatio:this.b.Xa(),engineType:this.b.f.type}),this.c.s.N().style.display="none",this.s=this.c.c,this.i=this.b.c},p.Fi=function(e){e&&e.modifiers&e.SIZE&&kw(this,!0),(e=this.i.jb()).zoom-=this.jl,this.s.Wb(e)},p.o=function(){jw.j.o.call(this),lw(this),this.c.F(),this.c=this.s=this.i=this.b=this.l=this.g=null},t("H.ui.buildInfo",(function(){return Hf("H-ui","1.51.0","a104c13",{region:"row"})})),u(mw,Cm);var nw=0;function ow(e,t){t=t||{},C(e,tl,ow,0),ow.j.constructor.call(this,e),this.oc=!!t.oc,this.c=t.fb||0,this.a=[],this.b={}}mw.prototype.W=function(e,t,r,n,i,o){var a=Ad(n),s=this.eb,l=a+(r.exp-s.pixelProjection.exp),c=s.min,u=s.max;n=s.tileSize;var p=s.ca().g,f=this.lb,h=f.Tc(),d=f.yb().w,y=r.w,m=r.x,v=r.y,g={};if(a<c||a>u)return wk.DONE;for(e=(i=s.requestTiles(e,l,i,o,this.f)).total,o=(i=i.tiles).length,this.g=r,this.l=t,this.a=l,h!==p&&f.ic(p),r=n=n*y/(Gd(2,l)*n),this.c||(n%1&&(m/=y=r/(n=Bd(n)),v/=y,y=Gd(2,l)*n),m=Bd(m),v=Bd(v)),this.i=r,l=-n,a=d+n,s=0;s<o;s++){if((c=(d=i[s]).data)&&c.tagName){for(r=t.x-(m-d.x*n),p=t.y-(v-d.y*n),f.Oc(c,r,p,n,n),h=r;(h-=y)>l;)f.Oc(c,h,p,n,n);for(h=r;(h+=y)<a;)f.Oc(c,h,p,n,n)}g[this.a+"_"+d.x+"_"+d.y]=d}return this.b=g,o===e?wk.DONE:wk.PENDING},mw.prototype.Ea=function(e,t,r){var n,i=this.i,o=i/this.eb.tileSize,a=this.g,s=this.l;if(vc(this.a)&&a){e=a.x+(e-s.x),t=a.y+(t-s.y);var l=Bd(a.w/i),c=a=Bd(e/i);s=Bd(t/i),Dd(c)>=l&&(c%=l),0>c&&(c=l+c),(l=this.b[this.a+"_"+c+"_"+s])&&l.Ea&&(n=l.Ea((e-i*a)/o,(t-i*s)/o,r))}return n||hf},mw.prototype.Rd=function(){return"2d"},u(ow,Cm),ow.prototype.W=function(e,t,r,n,i,o){var a,s,l=this.eb;n-=this.c,this.a.length=0;var c=this.b;if(this.b=a={},n>=l.min&&n<=l.max){var u=l.sd(e,n,i,o),p=u.overlays;if(e=p.length)for(p.sort(ph),n=this.lb,i=this.oc,o=0;o<e;o++){var f=(l=p[o]).K(),h=r.ib(f.Nb()),d=r.ib(f.Jb());f=r.w,h.x>=d.x&&(h.x-=f),f=-((h.x+d.x)/f>>1)*f,h.x+=f,h.add(t),d.x+=f,d.add(t),i||(h.round(),d.round()),(f=c[s=l.cb()])?delete c[s]:f={ho:l},a[s]=f;var y=h.x;h=h.y;var m=d.x,v=m-y,g=(d=d.y)-h;n.ic(l.Tc()),n.Oc(l.Qc(),y,h,v,g),f.Vg?f.Vg.set(y,h,m,d):f.Vg=new yk(y,h,m,d),this.a.push(f)}}return!u||u.requested&&u.requested===u.total||!u.requested&&p.length===u.total?wk.DONE:wk.PENDING},ow.prototype.Ea=function(e,t,r){for(var n,i,o=this.a,a=o.length;a--;)if((n=o[a]).Vg.vf(e,t))if(n=n.ho,i)i.push(n);else if(i=[n],r)break;return i||hf},ow.prototype.Rd=function(){return"2d"},ow.prototype.o=function(){delete this.a,ow.j.o.call(this)},ow.prototype.disposeInternal=ow.prototype.o;var pw={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Nl.ZOOM,COORD:Nl.COORD},capture:!0};function qw(e,t){this.a=[],qw.j.constructor.apply(this,arguments)}function Z(e,t,r,n){Z.j.constructor.call(this,e,t,r,n),this.L=new J(0,0),(r=n.renderBaseBackground)&&(this.Xn=r.lower,this.Hn=r.higher),this.yn=!!n.enableSubpixelRendering,this.fd=rw,this.Af=0,this.Ed=this.ve=!1,this.g=new om,this.a=n=new wm,this.dd=A(this.dd,this),n.addEventListener(n.A.Cg,this.dd),this.Da=A(this.Da,this),n=e.element,this.aa=e=n.ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,n.insertBefore(e,n.firstChild),this.sj=new Tm(this.aa,this.oa),this.m=[],sw(this),this.Jh=A(Z.prototype.Jh,this),this.C=tw,this.ng(),this.zoom=uw(this,this.J.pb()+this.fb),this.Eb(),vw(this,t.jb().position,this.zoom),this.$a(),this.T()}t("H.map.render.p2d.capabilities",pw),u(qw,Gm),p=qw.prototype,p.rj=function(){return this.eb.Ec.apply(this.eb,arguments)},p.W=function(e,t,r,n,i,o,a){return this.a=[],qw.j.W.apply(this,arguments)},p.$j=1,p.Ek=function(e,t,r,n,i,o){var a=this.$j=n.Xa();i*=a,o*=a;var s=r.yb();t=s.w*a,s=s.h*a;var l=r.kd();this.oc?(i-=l.x*a,o-=l.y*a):(i=Ad(i-l.x*a),o=Ad(o-l.y*a)),n.Oc(r.Qc(),i,o,t,s),e.detail?e.detail.set(i,o,i+t,o+s):e.detail=new yk(i,o,i+t,o+s),this.a.push(e)},p.Ea=function(e,t,r){for(var n,i,o,a=this.a,s=a.length,l=hf,c=this.$j;s--&&!((i=(n=a[s]).detail).vf(e,t)&&(n=n.ik,(!(o=n.xb().c)||o.Of((e-i.left)/c,(t-i.top)/c,0))&&0>l.indexOf(n)&&(l===hf&&(l=[]),l.push(n),r))););return l},p.Rd=function(){return"2d"},p.o=function(){this.a=[],qw.j.o.call(this)},qw.prototype.disposeInternal=qw.prototype.o,u(Z,Jl),t("H.map.render.p2d.RenderEngine",Z),Z.prototype.type=Tl.P2D;var tw=2;function ww(e,t,r){return Dd(t=r-t)<e.b.w/2?t:t-e.b.w*r/Dd(r)}function sw(e){var t=e.c.La(),r=0,n=t.length;for([e.R={},e.u={},e.ta={},e.ea={}].forEach((function(e){e.Nc=[],e.ja=[]})),e.ab=e.c.La();r<n;r++)e.Pe(r,t[r]);e.Eb()}function Fw(e){var t=[];return(t=(t=(t=(t=t.concat(e.u.ja)).concat(e.R.ja)).concat(e.ta.ja)).concat(e.ea.ja)).filter(vc)}function zw(e,t){var r=Pl(e,Pl(e,t.zoom)+e.fb);return(e=Ql(e,t)).zoom=r,e}function vw(e,t,r){var n=e.b;n.Oa(r),e.s=n.projection.Pc(t),n.x=n.w*e.s.x,n.y=n.h*e.s.y}function Ew(e){return{w:(e=e.wa[2]).right-e.left,h:e.bottom-e.top}}function Gw(e){e.i&&e.i.sa()||Lk()-e.Nj<e.fd&&!e.Ad?e.Yn=Jk(e.Jh):(e.Ad&&(e.ce(),Hw(e)),e.C=tw)}function Hw(e,t){e.dispatchEvent({type:e.A.Vi,target:t||e})}function Lw(e,t,r){Bw(e,t*e.oa,r*e.oa),e.L.set(0,0),e.$a(),e.ha()}function Bw(e,t,r){var n=e.b;e=e.s,n.x=Zd(n.x+t,n.w),n.y=zd(0,yd(n.w,n.y+r)),e.x=n.x/n.w,e.y=n.y/n.h}function Cw(e,t,r,n){var i=e.oa,o=e.f.center;r===+r&&n===+n?(r=(r-o.x)*i,n=(n-o.y)*i,e.L.set(r,n),Bw(e,r,n),e.b.Oa(t),Bw(e,-r,-n)):(e.L.set(0,0),e.b.Oa(t)),e.zoom=t,e.$a(),e.ha()}function xw(e,t,r,n){var i=e.getCapabilities().lookAt.zoom.max,o=t.bb(),a=n||o;if(t.Rf()||r&&n)r=r===B?i:r;else{var s=new nj(e.b.projection);s.Oa(i);var l=s.ib(t.Nb()).round(),c=s.ib(t.Jb()).round();i=s.w,t.Bb()&&(l.x-=i),n?(o=s.ib(a),t=2*zd(o.x-l.x,c.x-o.x),l=2*zd(o.y-l.y,c.y-o.y)):(t=c.x-l.x,l=c.y-l.y,a=o),r===B&&(r=(o=e.wa[4]).right-o.left,o=o.bottom-o.top,r=Pl(e,r=-8+yd(Ed(r/t*i)/Od,Ed(o/l*i)/Od)-e.fb))}return{zoom:Bd(r),position:a}}function yw(e){Dw(e,!0),e.a.sa()&&e.vb(!0),e.g.sa()&&e.wb(!0),Dw(e,!0)}function Mw(e,t){if(t){var r={};r.Te=t.power,r.we=t.ease,r.duration=t.duration,e.l=r}}function uw(e,t){return Pl(e,Pl(e,t-e.fb)+e.fb)}function Ow(e,t){var r=e.s,n=e.b.projection.Pc(t.position),i=e.b.Zd(n),o=i.y;i=i.x;var a=t.zoom;t=(r=e.b.Zd(r)).y;var s=r.x;r=e.zoom;var l=e.a.zb(),c=e.a.a,u=e.a.b,p=0;if(i=ww(e,s,i),t=Fd((i-=s)*i+(o-=t)*o+(r=a-r)*r),0!==l&&0!==t){var f=i/t,h=o/t,d=r/t,y=l*l/(2*t);Aw(e,(function(t,r){var i;1!==t?((i=d*(r=(t=l*r-y*r*r/2)-p))&&(i=uw(e,e.zoom+i),Cw(e,uw(e,i),c,u)),Lw(e,Ad(f*r),Ad(h*r)),p=t):(e.s=n,Cw(e,uw(e,a),c,u),e.$a(),e.ha())}),2*t/l)}}function Nw(e,t,r){r=r||0,t.c&&Cw(e,uw(e,e.zoom+t.c*r),e.a.atX,e.a.atY),Lw(e,t.a*r,t.b*r)}function Aw(e,t,r,n,i){e.i&&e.i.sa()&&e.i.stop(!0),e.i=new Fm(e,t,r,n,i),e.i.start()}function Dw(e,t){e.i&&e.i.sa()&&e.i.stop(t)}Z.prototype.getState=function(){return this.C},Z.prototype.getState=Z.prototype.getState,Z.prototype.Kg=function(e){var t=this,r=e.b,n=e.newValue,i=e.modifiers;e=n.position;var o,a=n.bounds,s=this.zoom,l=this.s,c=0;if(i&ej.POSITION&&(o=t.b.ib(e)),i&ej.BOUNDS)n=xw(this,a.K(),i&ej.ZOOM?n.zoom:B,i&ej.POSITION?e:B),this.J.Wb(n,r);else{i&ej.POSITION||(o=t.b.ib(n.position));var u=o.x,p=o.y;yw(this),this.L.set(0,0);var f=(n=zw(this,n)).zoom,h=n.position;if(r){var d=f-s,y={x:l.x,y:l.y};r=this.b.Zd(y).x;var m=this.b.projection.Pc(e);m.x===this.s.x&&m.y===this.s.y&&f===this.zoom||(u=ww(this,r,u),Aw(this,(function(e){var r=e-c;if(f!==s){o=t.b.Zd(m);var n=t.b.Zd(y);u=ww(t,n.x,o.x),p=o.y-n.y}c=e,Bw(t,u*r,p*r),Cw(t,s+=d*r),t.$a(),t.ha()}),this.qa,(function(){vw(t,h,f),Cw(t,f),t.$a(h),t.ha()}),this.xa))}else Dw(this),vw(this,h,f),Cw(this,f),this.$a(h);this.ha()}},Z.prototype.qa=300,Z.prototype.rg=function(e){var t=Fc(e);if(!t||t&&0>e)throw new D(this.rg,1,"positive number required");this.qa=e},Z.prototype.setAnimationDuration=Z.prototype.rg,Z.prototype.$g=function(){return this.qa},Z.prototype.getAnimationDuration=Z.prototype.$g,Z.prototype.xa=em,Z.prototype.sg=function(e){if(!Da(e))throw new D(this.sg,1,"function required");this.xa=e},Z.prototype.setAnimationEase=Z.prototype.sg,Z.prototype.ah=function(){return this.xa},Z.prototype.getAnimationEase=Z.prototype.ah,Z.prototype.ng=function(){this.xa=em,this.qa=300},Z.prototype.resetAnimationDefaults=Z.prototype.ng,Z.prototype.Xh=function(e,t,r){var n;this.Nj=Lk(),(n=this.R.ja.splice(e,1)[0])&&n.F&&n.F(),(n=this.u.ja.splice(e,1)[0])&&n.F&&n.F(),(n=this.ta.ja.splice(e,1)[0])&&n.F&&n.F(),(n=this.ea.ja.splice(e,1)[0])&&n.F&&n.F(),this.ab=this.c.La(),0===e&&(Ol(this,t,!1),this.Eb()),this.m=Um(this.sj,Ew(this),Fw(this)),this.ce(),r||this.ha()},Z.prototype.Yh=function(){this.Eb(),this.ha()},Z.prototype.th=function(e,t,r){var n,i,o,a;if(t){var s={oc:this.yn,fb:this.fb};t.W?C(t,Em)?i=new Dm(t):C(t,Qm)&&(a=new Dm(t)):(t.requestOverlays&&(n=new ow(t,s)),t.requestTiles&&(i=new mw(t,s)),t.requestMarkers&&(o=new qw(t,s)),t.requestDomMarkers&&(a=new Jm(t,s)))}r=r||0,this.R.ja.splice(e,r,n),this.u.ja.splice(e,r,i),this.ta.ja.splice(e,r,o),this.ea.ja.splice(e,r,a),this.ab=this.c.La(),this.m=Um(this.sj,Ew(this),Fw(this))},Z.prototype.Pa=function(e,t){var r=this.f.center,n=this.oa;return this.b.Ra((e-r.x)*n,(t-r.y)*n)},Z.prototype.screenToGeo=Z.prototype.Pa,Z.prototype.qg=function(e,t){return e=this.Pa(e,t),(t=this.J.jb()).position=e,t},Z.prototype.Da=function(e){var t=this.oa,r=this.f.center,n=r.x*t;r=r.y*t,e=this.b.ib(e);var i=this.b.w;return new J(Ad((e.x-Ad(e.x/i)*i+n)/t),Ad((e.y+r)/t))},Z.prototype.geoToScreen=Z.prototype.Da,Z.prototype.K=function(e,t){var r=this.wa[e||4];e=this.b;var n=r.left-t,i=e.Ra(n,r.top-t),o=r.right+t;return t=e.Ra(o,r.bottom+t),o-n>=e.w&&(i.lng=-(t.lng=180)),sg(i,t)},Z.prototype.Ea=function(e,t,r,n){var i,o=[],a=this.oa;for(e*=a,t*=a,i=(a=[this.R,this.u,this.ta,this.ea]).length;i--&&(!r||!o.length);){for(var s=o,l=a[i].ja,c=e,u=t,p=r,f=l.length;f--&&!((o=l[f])&&o.Ea&&(s=s.concat(o.Ea(c,u,p)),s.length&&p)););o=s}n(o)},Z.prototype.getObjectsAt=Z.prototype.Ea,Z.prototype.sb=z,Z.prototype.T=function(){var e,t=this.m.length;Z.j.T.call(this);var r=Ew(this);this.L.set(0,0);var n=r.w;for(e=r.h;t--;){var i=(r=this.m[t]).yb();i.w===n&&i.h===e||r.cf(n,e)}this.sb=new Wi(n,e),this.ha()},Z.prototype.getCapabilities=function(){return pw},Z.prototype.getCapabilities=Z.prototype.getCapabilities,p=Z.prototype,p.ce=function(){this.R.Nc.length=0,this.u.Nc.length=0,this.ta.Nc.length=0,this.ea.Nc.length=0},p.Jh=function(){var e;this.D&&this.D.before();var t=this.u.ja,r=this.f.center.clone().scale(this.oa).round(),n=this.K(1,0),i=this.K(1,Iw),o=this.zoom,a=o-this.fb,s=this.b,l=this.Xn,c=this.Hn,u=t[0];t=this.L;var p=this.m.length,f=this.ab;for(e=f.length;p--;){var h=this.m[p];C(h,Bm)&&h.clear()}if(u){if(l)for(;l;)p=o-l,u.W(n,r,s,p,!0,t),--l;if(c&&this.Ed)for(h=1;h<=c&&(p=o+h,s.Oa(p),l=this.K(2,0),s.Oa(o),!u.W(l,r,s,p,!0,t));h++);}for(this.fd=rw;e--;)C(s=f[e],qj)&&s.ca()&&s.ca().Ue(i,a);n=this.Zj(n,r,o,!1,t,Jw,this.u,this.R),r=this.Zj(i,r,a,!1,t,Kw,this.ta,this.ea),this.Ad=n&&r,this.i&&this.i.sa()&&this.me(),this.P||(this.P=this.J.jb()),this.P.bounds=this.K(4,0),this.J.$a(this.P),this.P=null,this.sb&&(this.f.$a(this.sb),this.sb=z),o<this.Af?this.Ed=!0:this.ve&&(this.Ed=!1),this.Af=o,this.ve=n,this.D&&this.D.after(),Gw(this)},p.Zj=function(e,t,r,n,i,o,a){var s,l=Array.prototype.slice.call(arguments,6),c=l.length,u=l[0].ja.length,p=c*u,f=!!p;for(s=0;s<p;s++){if(o===Jw)var h=s%c,d=Math.floor(s/c);else h=Math.floor(s/u),d=s%u;var y=l[h].ja[d];h=l[h].Nc,y&&((y=y.W(e,t,this.b,r,n,i,this.Da))===wk.ACTIVE&&(this.fd=1/0),y!==wk.DONE||h[d]||(Hw(this,this.ab[d]),h[d]=!0),h[d]||(f=!1))}return f},p.o=function(){var e=this.c.La()[0],t=this.f;Kk(this.Yn),Dw(this,!0),e&&Ol(this,e,!1),Fw(this).forEach((function(e){e.F()})),t.element&&t.element.removeChild(this.aa),this.aa=null,this.C=3,Z.j.o.call(this)},p.ha=function(){this.Nj=Lk(),this.C===tw&&(this.Ad=!1,this.C=1,Gw(this))},p.xd=function(e,t,r){Cw(this,e=Pl(this,Pl(this,e)+this.fb),t,r)},Z.prototype.zoomAt=Z.prototype.xd,Z.prototype.lc=function(e,t){yw(this),Mw(this,t),this.g.start(e,!!t)},Z.prototype.startInteraction=Z.prototype.lc,Z.prototype.cc=function(e,t,r,n,i){var o=!1;this.g.sa()&&(t=this.g.store(e,t,r,n,i),this.g.Ac(Nl.COORD)&&(0<nm(e=this.g.Nd())&&(Lw(this,-e.x,-e.y),o=!0)),t&&this.g.Ac(Nl.ZOOM)&&(e=this.g.Bf(),t=this.g.Cf(),(t=Ed(Gd(2,this.zoom)*t)/Od)!==this.zoom&&(Cw(this,t=uw(this,t),e.x,e.y),o=!0)),o&&this.ha())},Z.prototype.interaction=Z.prototype.cc,Z.prototype.wb=function(e){var t=this;if(this.g.sa()&&!e){if(this.l){e=this.g.zb();var r=this.g.rc(),n=this.l.duration,i=(this.l.Te||1)*e,o=new Rm(-i/(0<n?n:1),i);!E(r.x)&&!E(r.y)&&0<i&&t.g.Ac(Nl.COORD)&&Aw(this,(function(e){i=o.De(e*n),E(i)||Lw(t,Ad(-r.x*i),Ad(-r.y*i))}),n,void 0,this.l.we)}this.l=null,this.g.clear()}},Z.prototype.endInteraction=Z.prototype.wb,Z.prototype.kc=function(e,t,r){yw(this),this.a.start(t,r),Mw(this,e)},Z.prototype.startControl=Z.prototype.kc,Z.prototype.control=function(e,t,r){if(E(+r))throw new D(this.control,2,r);if(E(e))throw new D(this.control,0,e);if(E(t))throw new D(this.control,1,t);this.a.sa()&&this.a.set(e,t,r,0,0,0)},Z.prototype.control=Z.prototype.control,Z.prototype.vb=function(e,t){var r,n=this;if(this.a.sa()){Dw(this,!0);var i=Lk(),o=i-this.Lj;if(1<=o)Nw(this,zm(this.a),o);if(!this.l||e||t)"function"===typeof t&&((e=this.jb()).zoom=this.zoom-this.fb,t(e),e.zoom+=this.fb,Ow(this,e));else{t=this.a.zb();var a=this.a.rc(),s=this.l.duration,l=(this.l.Te||1)*t,c=new Rm(-l/(0<s?s:1),l);!E(a.a)&&!E(a.b)&&0<l&&Aw(this,(function(e,t,o,u){i&&(o=u-i,i=0),l=c.De(e*s)*o,E(l)||((r=a.c*l)&&Cw(n,uw(n,n.zoom+r),n.a.a,n.a.b),Lw(n,Ad(a.a*l),Ad(a.b*l)))}),s,void 0,this.l.we)}this.a.reset()}},Z.prototype.endControl=Z.prototype.vb,Z.prototype.dd=function(e){var t=this,r=e.b;this.L.set(0,0),r.a||r.b||r.c?(this.Lj=Lk(),Aw(this,(function(e,n,i,o){t.Lj=o,Nw(t,r,i)}),Number.POSITIVE_INFINITY),this.ha()):Dw(this,!0)},Z.prototype.Wg=function(){},Z.prototype.enter=Z.prototype.Wg,Z.prototype.Xg=function(e){Ml(this.aa,e)},Z.prototype.exit=Z.prototype.Xg,Z.prototype.capture=function(e,t,r,n){var i=this.aa.ownerDocument.createElement("canvas"),o=i.getContext("2d"),a=this.oa;for(i.width=(r-e)*a,i.height=(n-t)*a,r=0;r<this.m.length;r++)C(n=this.m[r],Bm)&&o.drawImage(n.N(),-e*a,-t*a);return Zb(i)};var Kw=0,Jw=1,rw=1e3,Iw=256;function Pw(e){var t;if(e)for(Qw={},t=e.length;t--;)Qw[e[t]]=!0;this.Yk={}}var Rw,Qw={};Pw.prototype.parse=function(e,t,r){var n,i,o,a,s;Rw=!1;try{r=JSON.parse(r)}catch(u){Rw=!0}if(r&&(n=r.metadata)){var l={spatials:[]};for(i in n)if((r=!Qw[i]&&(o=Sw[i]))&&((a=n[i])||(Rw=!0,a=void 0),r=a),r)for(r=a.length;r--;){var c;(c=a[r])||(Rw=!0,c=void 0),(s=c)&&o(t,e,this,i,s,l)}}else Rw=!0;return Rw?void 0:l},Pw.prototype.parse=Pw.prototype.parse;var Sw={"street labels":function(e,t,r,n,i,o){var a;if((a=i.vertices)||(Rw=!0,a=void 0),a){var s,l,c=a.length;if((l=0<c)||(Rw=!0,l=void 0),l)for(s=Array(c/2);c;){var u=a[--c];l=a[--c],s[c/2]=new J(l,u)}s=s?{a:[s]}:B,c=+i["font size"]/e.Xa(),(a=r.Yk[c])||(Tw.lineWidth=c,a=r.Yk[c]=r.Fd.vj(Tw)),Uw(e,t,s,!1,a,i,n,o)}delete i.vertices},"city center labels":function(e,t,r,n,i,o){Uw(e,t,Vw(i,new Ph([])),!0,r.Fd,i,n,o)},labels:function(e,t,r,n,i,o){var a;if((a=i["bounding boxes"])||(Rw=!0,a=void 0),a){for(var s,l=a.length,c=new Ph([]);l--;){var u;(u=a[l])||(Rw=!0,u=void 0),(s=u)&&Vw(s,c)}Uw(e,t,c,!0,r.Fd,i,n,o)}delete i["bounding boxes"]},buildings:function(e,t,r,n,i,o){var a,s,l,c,u=i.id,p=t.ig[u],f=[],h=[];((a=i)||(Rw=!0,a=void 0),a&&((s=a.vertices)||(Rw=!0,s=void 0),s))&&((c=a.polygons)||(Rw=!0,c=void 0),(l=c)&&f.push.apply(f,Ww(s,l)),(a=a.outlines)||(Rw=!0,a=void 0),(l=a)&&h.push.apply(h,Ww(s,l)));l=f.length,f.push.apply(f,h),h=new Ph(f,Wd,l),(f=f.length)||(Rw=!0,f=void 0),f&&(p?(br(p,e,[h]),o.spatials.push(p)):(p=Uw(e,t,h,!0,r.Fd,i,n,o,u),t.fa(p)))}};Sw["transit stops"]=Sw.POIs=Sw.labels;var Xw=["box 2","box 1","annotation box","icon box"];function Vw(e,t){for(var r,n,i=Xw.length;i--;)if(n=e[r=Xw[i]]){var o=n[0],a=n[1],s=n[2];n=n[3],t.a.push([new J(o,a),new J(o+s,a),new J(o+s,a+n),new J(o,a+n)]),delete e[r]}return t}function Ww(e,t){var r,n,i,o=t.length;if(0<o)for(n=Array(o);o--;)if((r=t[o])||(Rw=!0,r=void 0),r){var a=r.length;if(0<a)for(n[o]=i=Array(a);a--;){var s=2*r[a];i[a]=new J(e[s],e[s+1])}}return n||[]}var Yw={};function Uw(e,t,r,n,i,o,a,s,l){return Yw.style=i,n=new Yq(t,n,l,Yw),r&&br(n,e,[r]),Zw(o),o.category=a,n.setData(o),s.spatials.push(n),n.ka(t),n}Pw.prototype.Fd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Tw={};function Zw(e){var t,r=!1;switch(typeof e){case"object":if(e instanceof Array)for(t=e.length;t--;)Zw(e[t])?r=!0:delete e[t];else if(e)for(t in e)Zw(e[t])?r=!0:delete e[t];break;case"number":r=!0;break;default:r=!!e}return r}function $w(e,t,r){t=t||{};var n=(r=r||{}).tileType||"maptile",i=r.scheme||"normal.day";if(S.call(this,{min:0,max:20}),!0===t.pois&&(t.pois="!F"),this.L=t,!(e&&e instanceof ax))throw Error("InvalidArgument: service required");this.m=e,this.i=A(this.i,this),this.m.addEventListener("versionupdate",this.i),this.Yb=e.v().clone().G(n+"/"+e.vc()+"/"+i).I(bx).I(t),this.R=e.f||null,this.T=r.pixelRatio||r.pixelratio||Ue(),this.tileSize=r.tileSize||256,this.tileType=n,this.scheme=i,this.f=new hr(new Pw(r.categoryFilter)),this.f.ka(this),this.u=A(this.u,this),this.f.addEventListener("update",this.u),this.D=!1,S.call(this,{min:0,max:20}),this.J(new Rk(r.tileCacheSize||256,A(this.aa,this)))}u($w,S),t("H.service.metaInfo.TileProvider",$w),$w.prototype.aa=function(e,t){for(var r,n=(e=t.Ua()).length;n--;)delete(r=e[n]).a[t.key],r.release();t.data&&(Cp.push(t.gg(),this.tileSize),t.hg())},$w.prototype.u=function(){this.dispatchEvent("update")},$w.prototype.B=function(e,t,r,n,i){var o,a=this.Yb.clone(),s=this.R,l=this.tileSize,c=this.getTileKey(e,t,r);if((c=this.nb().get(c))&&!c.Ud()){n(Cp.pop(this.tileSize),null);var u={cancel:function(){}}}else{s&&a.Ba(s[(r+t+e)%s.length]),a.G(r+"/"+e+"/"+t+"/"+l+"/png8");var p=Ap.setTimeout((function(){(o=new tf("text/plain",a.toString())).then((function(e){n(null,e)}),i)}),500)}return this.D||(zp($w,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.D=!0),u||{cancel:function(){o?o.cancel():Ap.clearTimeout(p)}}},$w.prototype.requestInternal=$w.prototype.B,$w.prototype.ac=function(e,t,r,n,i){var o=this.f,a=n||Cp.pop(this.tileSize);if(n)(e=this.nb().get(this.getTileKey(e,t,r))).W(n);else if(delete(n=e=new al(this.uc(e,t,r),e,t,r,this.tileSize,this.T,r,o)).l,n.s=i,e.W(a))for(a=(i=e.Ua()).length;a--;)i[a].pg();else Cp.push(a,this.tileSize);return e},$w.prototype.createTileInternal=$w.prototype.ac,$w.prototype.F=function(){this.f.F(),this.m.removeEventListener("versionupdate",this.i),S.prototype.F.call(this)},$w.prototype.dispose=$w.prototype.F,$w.prototype.i=function(){var e=this.m;this.Yb=e.v().clone().G(this.tileType+"/"+e.vc()+"/"+this.scheme).I(bx).I(this.L),this.reload(!1)};var bx={metadata:"metaonly",mgen:"2"};function ax(e){ax.j.constructor.call(this,ax,e),e=Pp(this,e),this.f=e.shards,(this.b=e.ignoreTypes?null:e.type)&&this.v().Ba(this.b),this.c=e.version,this.l=new lq,"newest"===this.c&&cx(this)}function dx(e,t){for(var r={},n=e[t+"s"][t],i=n.length;i--;)r[n[i].id]=n[i];e[t+"s"]=r}function cx(e){var t=e.v().clone().G("info").I({output:"json"});e.f&&t.Ba(e.f[0]),e.B(t,(function(t){var r;if(dx(t=t.response,"map"),dx(t,"scheme"),dx(t,"tiletype"),dx(t,"format"),dx(t,"resolution"),dx(t,"language"),"newest"===e.c&&"traffic"!==e.b)for(r in t.maps)t.maps[r].hash&&t.maps[r].newest&&(e.c=t.maps[r].hash,e.dispatchEvent("versionupdate"));e.s=t,e.dispatchEvent("infoupdate")}),(function(e){throw e}))}u(ax,Op),t("H.service.metaInfo.Service",ax),ax.prototype.Aa=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},ax.CONFIG_KEY="metaInfo",ax.prototype.Hj=function(){return this.b},ax.prototype.vc=function(){return this.c},ax.prototype.getVersion=ax.prototype.vc,ax.prototype.ba=function(){return this.l},ax.prototype.getCopyrights=ax.prototype.ba,ax.prototype.Fe=function(){return this.s},ax.prototype.getInfo=ax.prototype.Fe,ax.prototype.ue=function(e,t,r,n,i,o){return new $w(this,n,{tileSize:e,pixelRatio:t,categoryFilter:r,tileType:i,scheme:o})},ax.prototype.createTileProvider=ax.prototype.ue,ax.prototype.nc=function(e,t,r,n,i,o){return new sl(this.ue(e,t,r,n,i,o))},ax.prototype.createTileLayer=ax.prototype.nc,X.prototype.Aj=function(e){return this.Ma(ax,e)},X.prototype.getMetaInfoService=X.prototype.Aj,function(){var e=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(t,r,n,i,o,a){var s=e.call(this,t,r,n,i,o,a),l={},c=this.Aj();"object"===typeof t&&(t=(a=t).tileSize,r=a.ppi,n=a.lg,i=a.lg2,o=a.style,a=a.pois),t=t||256;var u=320===r?2:1;if(0>[72,250,320,500].indexOf(+r)){if(r!==B)throw new D(this.wf,1,r)}else l.ppi=+r;return n&&(l.lg=n),i&&(l.lg2=i),o&&(l.style=o),a&&(l.pois=a),s.raster.normal.metaInfo=c.nc(t,u,["buildings"],l),s}}(),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;\nif("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={lb:!0},ja={};try{ja.__proto__=ha;fa=ja.lb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;\nfunction la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}\nfunction na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}\nfunction va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.sa=function(){};v.prototype.drop=v.prototype.sa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.S=function(){};v.prototype.removeAll=v.prototype.S;v.prototype.aa=function(){};v.prototype.registerOnDrop=v.prototype.aa;v.prototype.qa=function(){};v.prototype.deRegisterOnDrop=v.prototype.qa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new y(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new y(b,c,d!==x?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.aa(b);if(c&&!r(c))throw new y(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ha(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new y(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,C:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;\nA.prototype.aa=function(a){if(!r(a))throw new y(this.aa,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.aa;A.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.qa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.sa;\nA.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.S=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.S;A.prototype.Ha=function(a){if(!(0<+a))throw new y(A.prototype.Ha,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Ha;A.prototype.Bb=function(){return this.i};\nA.prototype.getMaxSize=A.prototype.Bb;A.prototype.xb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.C)&&hb(a,b,!1);if(b.m=c)b.C=c.C,c.C=b;b.C||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.C,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.C=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.C=null}\nfunction ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.xa=function(){};B.prototype.getMeta=B.prototype.xa;B.prototype.ya=function(){};B.prototype.getRowCount=B.prototype.ya;B.prototype.ga=function(){};B.prototype.getRow=B.prototype.ga;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.wa=function(){};B.prototype.getColumn=B.prototype.wa;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.za=function(){};ib.prototype.getTable=ib.prototype.za;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.za=function(){return this.a};jb.prototype.getTable=jb.prototype.za;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function y(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,y.prototype);return d}wa(y,Error);t("H.lang.InvalidArgumentError",y);y.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.D=a;if(b)for(this.M=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Ca=x;l.D=x;l.M=x;l.pa=x;l.xa=function(){return this.Ca};C.prototype.getMeta=C.prototype.xa;C.prototype.ya=function(){return this.D?this.D.length:0};C.prototype.getRowCount=C.prototype.ya;C.prototype.ga=function(a){var b=this.D;return b&&b[a]?new jb(this,a):x};\nC.prototype.getRow=C.prototype.ga;C.prototype.A=function(){return this.M||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.wa=function(a){return this.pa[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.wa;C.prototype.l=function(a,b){var c=this.D;return(a=c&&this.pa[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;\nC.prototype.concat=function(){var a=arguments.length,b,c=this.M,d=""+this.M,e=(this.D||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new y(this.concat,b);if(f.D){if(c&&""+f.M!==d)throw new y(this.concat,b,"Incompatible columns!");e=e.concat(f.D)}}return new C(e,this.M,this.Ca)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Hb=3*E,Ib=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nF.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.F=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.F;\nF.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Cb;F.prototype.ra=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.ra;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.F(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.W=new Yb(b.x,b.y,null,Zb(b));a.W=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.mb;var n=f.nb;var q=f.ec;var u=f.fc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=\nSb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.Aa=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.Aa=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.Aa;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Wa;a.na=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.na=1;break}}if(!a)break}c.Za=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Za=e||null;this.Da=f||null;this.u=!!g;this.Aa=!!h;this.na=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Wa=!1;this.W=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.na))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.W&&(f.W.x=f.x,f.W.y=f.y),ac(a,b,c,d,e);e.ec=a.x+k*g;e.fc=a.y+k*h;e.mb=k;e.nb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Wa=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new y(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new y(this.get,0);if(!r(b))throw new y(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};\na.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}\nt("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nJ.prototype.L=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.ab=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.ab=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.U.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.U.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Dc=p.navigator;if(Dc){var Ec=Dc.userAgent;if(Ec){Cc=Ec;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pa;c.Pa=null;e()}};return function(e){d.next={Pa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.P,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.P=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Xa=Fa(this.Xa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={hc:0,ic:Od,gc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Xa=function(a){this.Z=3;this.a.b(a)};l.reject=function(a){this.Z=5;this.a.reject(a)};l.Z=0;\nl.cancel=function(){if(3>this.Z){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Ma&&a.ca.qb(this.Ma);this.Z=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ca=a;this.ca.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ca.jc(b))!==Ia){var d=Fa(this.ca.qb,this.ca,c,b);b.Ma=c;b.then(d,d);b.Z=b.kc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ha=e;this.key=++Ud;this.T=this.da=!1}function Wd(a){a.T=!0;a.listener=null;a.proxy=null;a.src=null;a.ha=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.da=!1)):(b=new Vd(b,this.src,f,!!d,e),b.da=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.S=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.T&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.U.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.T){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.T&&(f=Ee(f,d),e=e&&!1!==f)}return e}function Ee(a,b){var c=a.listener,d=a.ha||a.src;a.da&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.T)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Ee(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Fe="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Fe]||(a[Fe]=function(b){return a.handleEvent(b)});return a[Fe]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.B=function(){return this.i};l.la=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.B();if(c)for(b=[];c;c=c.B())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.N(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.N(d,!0,a)&&e,a.a||(e=g.N(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.N(d,!1,a)&&e;return e};\nl.v=function(){N.U.v.call(this);this.b&&this.b.S(void 0);this.i=null};l.N=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.T&&f.capture==b){var g=f.listener,h=f.ha||f.src;f.da&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.ab};t("H.util.EventTarget",N);N.prototype.la=N.prototype.la;N.prototype.setParentEventTarget=N.prototype.la;N.prototype.B=N.prototype.B;N.prototype.getParentEventTarget=N.prototype.B;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.L=N.prototype.L;N.prototype.addOnDisposeCallback=N.prototype.L;N.prototype.P=N.prototype.N;\nN.prototype.N=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.P.apply(this,arguments),d&&this.B&&null===this.B()&&delete c.eventPhase;return f};N.prototype.Yb=function(a){for(var b,c=this;c&&(b=c.B())&&b!==a;)c=b;b||c.la(a)};N.prototype.setRootParentEventTarget=N.prototype.Yb;function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.U.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.zb=function(){return this.g};Q.prototype.getLabel=Q.prototype.zb;Q.prototype.Xb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Xb;Q.prototype.Ob=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Ob;\nQ.prototype.Wb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Wb;var Ge=new Q;Q.SEPARATOR=Ge;function Ie(a){if(Ca.document){var b=document.createElement("canvas");b.width=b.height=1;b.getContext("2d",{lc:a})}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}\nJe.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie(!0);Ie(!1);function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new y(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new y(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new y(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.X;R.prototype.equals=R.prototype.F;R.prototype.oa="";R.prototype.va="";R.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.$b=function(){return{type:this.va,coordinates:this.cb()}};R.prototype.toGeoJSON=R.prototype.$b;\nR.prototype.ta=function(){return{type:this.oa,coordinates:this.ua(),boundingBox:this.X().ta()}};R.prototype.forWorkerMessage=R.prototype.ta;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.F=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.F;S.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Ib;var c=a.lat*Ib;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Ib-a.lng*Ib)/2),2))))}return a};\nS.prototype.distance=S.prototype.ra;\nS.prototype.dc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Ib;a=Ib*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Ib*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Ib))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Ib,e=this.lat*Ib,c=this.lng*Ib,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?\nzb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Hb+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.dc;S.prototype.X=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.X;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new y(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new y(Pe,0,a);return new S(a.lat,a.lng,a.alt)}\nS.fromIPoint=Pe;l=S.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.va="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.ua=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ia=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ia;Qe.prototype.tb=function(a,b){return this.ia(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.tb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.V=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};\nQe.prototype.xyToGeo=Qe.prototype.V;Qe.prototype.Tb=function(a,b){return this.V(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Tb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Vb=Te;W.prototype.projection=W.prototype.Vb;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.cc=vb(2,Ve);W.prototype.w=W.prototype.cc;W.prototype.Jb=vb(2,Ve);W.prototype.h=W.prototype.Jb;\nW.prototype.ba=function(a){if(Ra(a))throw new y(this.ba,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.ba;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Ta=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Ta;W.prototype.sb=function(a,b){a=this.projection.ia(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.sb;\nW.prototype.Fa=function(a,b){return this.projection.V((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Fa;W.prototype.V=function(a,b,c){return this.projection.V((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.V;W.prototype.Ba=function(a,b,c){a=this.projection.ia(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.Ba;W.prototype.Ub=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};\nW.prototype.pointToPixel=W.prototype.Ub;t("H.util.Disposable",J);J.prototype.L=J.prototype.L;J.prototype.addOnDisposeCallback=J.prototype.L;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new y(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new y(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ka(a),this.ka(b),this.Ia(c),this.Ja(e),this.bb(f),this.ma(d);else throw new y(Y,x,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Y);\nfunction Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):\n"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;\nY.prototype.Ka=function(a){if(!a||"string"!==typeof a)throw new y(this.Ka,0,\'The "scheme" parameter must be a non-empty string.\');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ka;Y.prototype.Gb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Gb;Y.prototype.ka=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new y(this.ka,0,\'The "host" parameter is not a valid host name.\');this.g=a;return this};\nY.prototype.setHost=Y.prototype.ka;Y.prototype.yb=function(){return this.g};Y.prototype.getHost=Y.prototype.yb;Y.prototype.Ia=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ia;Y.prototype.Db=function(){return this.b};Y.prototype.getPath=Y.prototype.Db;Y.prototype.ma=function(a){if(a)if("object"==typeof a)this.a=a;else throw new y(this.ma,0,\'Parameter "params" must be an object.\');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ma;Y.prototype.Kb=function(){return!$e(this)};\nY.prototype.hasQuery=Y.prototype.Kb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ja=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new y(this.Ja,0,\'Parameter "port" must be an integer in range [0...65535]\');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ja;Y.prototype.Eb=function(){return this.f};Y.prototype.getPort=Y.prototype.Eb;Y.prototype.bb=function(a){this.c=a||void 0;return this};\nY.prototype.setAnchor=Y.prototype.bb;Y.prototype.ub=function(){return this.c};Y.prototype.getAnchor=Y.prototype.ub;Y.prototype.R=function(a){if("object"!==typeof a)throw new y(this.R,0,\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.R;\nY.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new y(this.Na,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ka(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Na;Y.prototype.Oa=function(a){if(!a||"string"!==typeof a)throw new y(this.Oa,0,\'Parameter "subPath" must be a non-empty string\');return this.Ia((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Oa;\nY.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;function bf(a){return encodeURIComponent(a).replace(/[!\'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}\nfunction af(a){var b=[],c=a.a,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.a[e];d.K=bf(e);Na(f,cf)?f.a.forEach(function(g){return function(h){b.push(g.K+"="+bf(h))}}(d)):Na(f,df)?b.push(d.K+"="+f.b.map(function(g){return bf(g)}).join(f.a)):b.push(void 0===f?d.K:d.K+"="+bf(f))}d={K:d.K}}return 0<b.length?"?"+b.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction ef(a,b){if(Oa(a,void 0,void 0,void 0))for(var c=0;c<a.length;c++){var d=a[c];if(!Qa(d)&&!Sa(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new y(b,0,a);return a}function cf(a){this.a=ef(a,cf)}Y.MultiValueQueryParameter=cf;cf.prototype.Ib=function(){return this.a};cf.prototype.getValues=cf.prototype.Ib;function df(a,b){this.b=ef(a,df);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new y(df,1,\'Invalid delimiter "\'+b+\'"\');this.a=b}\nY.DelimitedQuerySubValues=df;var ff={};function gf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function hf(a){delete ff[a];this.postMessage(a)}function jf(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(ff[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function kf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}kf.prototype.postError=function(a){this.postMessage(a,x,0)};\nkf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function lf(a,b,c){if(!Qa(a))throw new y(lf,0,"InvalidArgument");if(!r(b))throw new y(lf,1,"InvalidArgument");var d=mf++;nf[d]={mimeType:c||of,ob:b};(new kf(["3",d,[]])).postMessage(a,[],2)}var nf={},mf=0;\nfunction pf(a,b){var c=a;if(nf[this.a]){var d=nf[this.a];var e=d.ob;delete nf[this.a];if(b)e(null,b);else{if(d.mimeType===qf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var of=0,qf=1;function V(a,b,c,d){rf(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.oa="Polygon";V.prototype.eb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.F=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.F;\nV.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function rf(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Sa=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Sa;V.prototype.Ra=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Ra;V.prototype.Hb=function(){return this.f};V.prototype.getTop=V.prototype.Hb;\nV.prototype.vb=function(){return this.c};V.prototype.getBottom=V.prototype.vb;V.prototype.Ab=function(){return this.a};V.prototype.getLeft=V.prototype.Ab;V.prototype.Fb=function(){return this.b};V.prototype.getRight=V.prototype.Fb;V.prototype.G=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,sf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.G;V.prototype.I=function(){return tf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;\nV.prototype.O=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.O;V.prototype.Nb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Nb;V.prototype.Pb=function(){return!this.I()&&!this.O()};V.prototype.isEmpty=V.prototype.Pb;V.prototype.X=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.X;\nV.prototype.ea=function(a,b,c){var d=this.G();c||(a=Le(a,this.ea,0),b=Me(b,this.ea,1));b=this.J(a,b,c);a=b.G();return a.lat===d.lat&&a.lng===d.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.ea;V.prototype.fa=function(a,b){b||Oe(a,this.fa,0);return this.ea(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.fa;\nV.prototype.Qa=function(a,b){var c=this.G();if(!b&&!Na(a,V))throw new y(this.Qa,0,a);b=this.ja(a,b);a=b.G();return a.lat===c.lat&&a.lng===c.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Qa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new y(this.J,0,a);if(Ra(b=Me(b)))throw new y(this.J,1,b);}return uf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;\nV.prototype.Ya=function(a,b,c){b||Oe(a,this.Ya,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Ya;V.prototype.ja=function(a,b,c){if(!b&&!Na(a,V))throw new y(this.ja,0,a);return uf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ja;V.prototype.$=function(a,b,c,d,e,f){e||(a=Le(a,this.$,0),b=Me(b,this.$,1),c=Le(c,this.$,2),d=Me(d,this.$,3));return uf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.$;\nV.prototype.Va=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new y(this.Va,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Va;function tf(a,b){a=b-a;return a+(0>a?360:0)}function sf(a,b){a+=b/2;return a-(180<a?360:0)}\nfunction uf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=tf(b,d);var m=sf(b,e);g=tf(f,h);var n=sf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?rf(k,a,m,c,q):new V(a,m,c,q)}V.merge=uf;function vf(a,b,c){c||(Oe(a,vf,0),Oe(b,vf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=vf;\nfunction wf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new y(wf,0,a);if(0<d)for(f=a[0],e=vf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=wf;function xf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new y(xf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=xf;\nfunction yf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new y(yf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ja(a[c],b,e);return e}V.coverRects=yf;\nV.prototype.$a=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.G().lng;Oe(a,this.$a,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?rf(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.$a;V.prototype.va="Polygon";\nV.prototype.cb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ta=function(){return this.ua()};V.prototype.ua=function(){return[this.f,this.a,this.c,this.b]};function zf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Y=d;this.a=Ad()}zf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};zf.prototype.reject=function(a){this.a.reject(a)};zf.prototype.cancel=function(){this.a.a.cancel()};zf.prototype.cancel=zf.prototype.cancel;function Af(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);Bf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var Bf=/^-?0\\d/;\nfunction Cf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function Df(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Ef=1/Math.pow(10,10);function Ff(a,b){var c=[],d=a.Sa();a=a.Ra();var e;180==a.lng&&(a.lng-=Ef);d=Df(d,b);a=Df(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Gf(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.fb=a.layerConfigs||[];this.i=a.projected;this.P=c;this.Ea=!1!==a.batchTiles;this.bc=a.horizontalMargin||0;this.gb=a.onlyOutline;this.ib=new W(x,c);this.f=new W(x,c);this.f.ba(22-Math.log(c)/Math.LN2+8)}wa(Gf,J);\nGf.prototype.kb=function(a,b,c){var d=this.P,e=this.bc,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.ib;e.ba(c);f=e.Fa(f);d=e.Fa(d);return Hf(this,new V(f.lat,f.lng,d.lat,d.lng),this.fb,{x:a,y:b,z:c})};Gf.prototype.jb=function(a,b,c,d,e){return Hf(this,new V(a,b,c,d),e)};\nfunction Hf(a,b,c,d){var e=If(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Ff(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new zf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Jf(a,n):Kf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ga,this,X.Y,Lf(e))).then(Fa(this.hb,this,X,d||Mf)).then(Fa(this.ac,this,g[X.Y]))},a))}var Mf={x:0,y:0,z:0};\nGf.prototype.Ga=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ga(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Kf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Nf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().R({tilex:g.x}).R({tiley:g.y}).R({level:g.b}).R({layer:g.Y});new lf(h.toString(),Fa(c,null,g),qf)}}\nfunction Jf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Of(a,e)}}function Of(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Y)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ma(g),new lf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Nf(a,b,h)},qf))}\nfunction Nf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Pf(a,b[e],h)}}else Pf(a,b,c)}function Pf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction Lf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Qf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}\nGf.prototype.hb=function(a,b,c){var d=this.f.Ta()-b.z,e=this.P<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.Y),X=this.f,qa=this.gb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var z=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(z[T]){var P=Af(z[T],z[U],z[da],O);z.geometry=P;delete z[T];delete z[U];delete z[da];if(z.INNER_LAT)for(T=z.INNER_LAT.split(";"),P=z.INNER_LON.split(";"),delete z.INNER_LAT,\ndelete z.INNER_LON,z.interiors=da=[],U=T.length,z=0;z<U;z++)da.push(Af(T[z],P[z],"",O))}if(this.i){U=w;z=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=Cf(Z.path,z);w=[O];U.$$projected$$=P={Sb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Rf(w,O,Z.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)Z=da[q],O=Cf(Z.path,z),w[1+q]=O,T|=+Rf(w,O,Z.outlineIndices);T&&(P.Qb=1+U)}z=P;O=z.Sb;w=z.Lb;var Fc=z.Qb;P=[];T=U=Lb;var db=da=x;z=O[0];if(1===z.length){var Gc=Gc||(Gc=Qf(g,b,h,e,!1));w=z[0];Rb(w.x,w.y,\nGc)&&P.push(Sf(z,g,b,d))}else{var He=O.length;for(Z=qa?Fc:0;Z<He&&(qa||!Z||P.length);Z++)if(z=O[Z],Z>=Fc){Z===Fc&&(T=P.length);var ia=Ub([z],k,m,n,f,!1);Tf(ia,g,b,d,P)}else{var Jb=Jb||(Jb=Qf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Uf(db[q],z),u=ia.length){for(da=da||[];u--;)da.push(q);Tf(ia,g,b,d,P)}}else ia=Uf(Jb,z),Tf(ia,g,b,d,P);else if(ia=Uf(Jb,z),Tf(ia,g,b,d,P),1<ia.length&&w<He)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=\nT)}}return{Zb:c,pb:bb,Mb:Ka,rb:La,Rb:cb}};function Rf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Uf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Za)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Tf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Sf(a[f],b,c,d))}\nfunction Sf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nGf.prototype.ac=function(a,b){var c=b.Zb,d=b.pb,e=b.Mb,f=b.Rb;b=b.rb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var z={};for(m in X)z[m]=X[m]}else z=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=\n0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);z.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(z)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Gf.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Gf.prototype.disposeInternal=Gf.prototype.v;\nfunction If(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Gf(c,Vf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.kb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Vf.S();break;default:e.postError("Unsupported command")}});\nvar Vf=new A(26214400),ya=Object.create(Ia,void 0);function Wf(a,b,c){var d=a[b];a=a[b+1];this.Ua=[];this.La=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Wf.prototype.fa=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Wf.prototype.G=function(){return this.b};var Xf=new F(0,0);function Yf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Zf=new W;function $f(a,b,c,d,e){Zf.Ba(a,b,Xf);d[e]=Xf.x;d[e+1]=Xf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Yf:$f,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Zf.ba(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.fa(q,u)){var G=L;break}G||(G=new Wf(q,u,b),a.push(G));w=u/2;G.La+=I||1;G.Ua.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.La>=c,f=L.Ua,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new kf(a.data);var b=ff[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new kf;var b=function(c,d){jf.apply(a,[c,d,!0])};b("0",gf);b("1",jf);b("2",hf);b("3",pf)})();\n',function(){var f=function(){var target=("undefined"==typeof self||!("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope))&&(module.exports||"undefined"!=typeof window),__worker_src__,__worker_src_map__,__worker_src_origin__;target&&(__worker_src__=f.toString(),__worker_src_map__="",__worker_src_origin__="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){var toString={}.toString,classofRaw=function(e){return toString.call(e).slice(8,-1)},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var commonjsHelpers=Object.freeze({commonjsGlobal:commonjsGlobal,commonjsRequire:commonjsRequire,unwrapExports:unwrapExports,createCommonjsModule:createCommonjsModule,getCjsExportFromNamespace:getCjsExportFromNamespace}),O="object",check=function(e){return e&&e.Math==Math&&e},global_1=check(typeof globalThis==O&&globalThis)||check(typeof window==O&&window)||check(typeof self==O&&self)||check(typeof commonjsGlobal==O&&commonjsGlobal)||Function("return this")(),fails=function(e){try{return!!e()}catch(e){return!0}},descriptors=!fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),isObject=function(e){return"object"==typeof e?null!==e:"function"==typeof e},document$1=global_1.document,exist=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(e){return exist?document$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),anObject=function(e){if(!isObject(e))throw TypeError(String(e)+" is not an object");return e},toPrimitive=function(e,t){if(!isObject(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},nativeDefineProperty=Object.defineProperty,f=descriptors?nativeDefineProperty:function(e,t,r){if(anObject(e),t=toPrimitive(t,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},objectDefineProperty={f:f},createPropertyDescriptor=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},hide=descriptors?function(e,t,r){return objectDefineProperty.f(e,t,createPropertyDescriptor(1,r))}:function(e,t,r){return e[t]=r,e},setGlobal=function(e,t){try{hide(global_1,e,t)}catch(r){global_1[e]=t}return t},isPure=!1,shared=createCommonjsModule((function(e){var t="__core-js_shared__",r=global_1[t]||setGlobal(t,{});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),id=0,postfix=Math.random(),uid=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++id+postfix).toString(36))},nativeSymbol=!fails((function(){return!String(Symbol())})),store=shared("wks"),Symbol$1=global_1.Symbol,wellKnownSymbol=function(e){return store[e]||(store[e]=nativeSymbol&&Symbol$1[e]||(nativeSymbol?Symbol$1:uid)("Symbol."+e))},TO_STRING_TAG=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=Object(e),TO_STRING_TAG))?r:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(n=classofRaw(t))&&"function"==typeof t.callee?"Arguments":n},TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG$1]="z";var objectToString="[object z]"!==String(test)?function(){return"[object "+classof(this)+"]"}:test.toString,hasOwnProperty={}.hasOwnProperty,has=function(e,t){return hasOwnProperty.call(e,t)},functionToString=shared("native-function-to-string",Function.toString),WeakMap=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap&&/native code/.test(functionToString.call(WeakMap)),shared$1=shared("keys"),sharedKey=function(e){return shared$1[e]||(shared$1[e]=uid(e))},hiddenKeys={},WeakMap$1=global_1.WeakMap,set,get,has$1,enforce=function(e){return has$1(e)?get(e):set(e,{})},getterFor=function(e){return function(t){var r;if(!isObject(t)||(r=get(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}},store$1,wmget,wmhas,wmset,set,get,has$1,STATE;has$1=nativeWeakMap?(store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set,set=function(e,t){return wmset.call(store$1,e,t),t},get=function(e){return wmget.call(store$1,e)||{}},function(e){return wmhas.call(store$1,e)}):(STATE=sharedKey("state"),hiddenKeys[STATE]=!0,set=function(e,t){return hide(e,STATE,t),t},get=function(e){return has(e,STATE)?e[STATE]:{}},function(e){return has(e,STATE)});var internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor},redefine=createCommonjsModule((function(e){var t=internalState.get,r=internalState.enforce,n=String(functionToString).split("toString");shared("inspectSource",(function(e){return functionToString.call(e)})),(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||has(i,"name")||hide(i,"name",t),r(i).source=n.join("string"==typeof t?t:"")),e!==global_1?(a?!l&&e[t]&&(s=!0):delete e[t],s?e[t]=i:hide(e,t,i)):s?e[t]=i:setGlobal(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||functionToString.call(this)}))})),ObjectPrototype=Object.prototype;objectToString!==ObjectPrototype.toString&&redefine(ObjectPrototype,"toString",objectToString,{unsafe:!0});var ceil=Math.ceil,floor=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(0<e?floor:ceil)(e)},requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},stringAt=function(e,t,r){var n,i,o=String(requireObjectCoercible(e)),a=toInteger(t),s=o.length;return a<0||s<=a?r?"":void 0:(n=o.charCodeAt(a))<55296||56319<n||a+1===s||(i=o.charCodeAt(a+1))<56320||57343<i?r?o.charAt(a):n:r?o.slice(a,a+2):i-56320+(n-55296<<10)+65536},nativePropertyIsEnumerable={}.propertyIsEnumerable,nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=nativeGetOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f$1=NASHORN_BUG?function(e){var t=nativeGetOwnPropertyDescriptor(this,e);return!!t&&t.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f$1},split="".split,indexedObject=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},nativeGetOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,f$2=descriptors?nativeGetOwnPropertyDescriptor$1:function(e,t){if(e=toIndexedObject(e),t=toPrimitive(t,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor$1(e,t)}catch(e){}if(has(e,t))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor={f:f$2},min=Math.min,toLength=function(e){return 0<e?min(toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(e,t){var r=toInteger(e);return r<0?max(r+t,0):min$1(r,t)},arrayIncludes=function(e){return function(t,r,n){var i,o=toIndexedObject(t),a=toLength(o.length),s=toAbsoluteIndex(n,a);if(e&&r!=r){for(;s<a;)if((i=o[s++])!=i)return!0}else for(;s<a;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},arrayIndexOf=arrayIncludes(!1),objectKeysInternal=function(e,t){var r,n=toIndexedObject(e),i=0,o=[];for(r in n)!has(hiddenKeys,r)&&has(n,r)&&o.push(r);for(;t.length>i;)has(n,r=t[i++])&&(~arrayIndexOf(o,r)||o.push(r));return o},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},Reflect$1=global_1.Reflect,ownKeys=Reflect$1&&Reflect$1.ownKeys||function(e){var t=objectGetOwnPropertyNames.f(anObject(e)),r=objectGetOwnPropertySymbols.f;return r?t.concat(r(e)):t},copyConstructorProperties=function(e,t){for(var r=ownKeys(t),n=objectDefineProperty.f,i=objectGetOwnPropertyDescriptor.f,o=0;o<r.length;o++){var a=r[o];has(e,a)||n(e,a,i(t,a))}},replacement=/#|\.prototype\./,isForced=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof t?fails(t):!!t)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,_export=function(e,t){var r,n,i,o,a=e.target,s=e.global,l=e.stat,c=s?global_1:l?global_1[a]||setGlobal(a,{}):(global_1[a]||{}).prototype;if(c)for(r in t){if(i=t[r],n=e.noTargetGet?(o=getOwnPropertyDescriptor(c,r))&&o.value:c[r],!isForced_1(s?r:a+(l?".":"#")+r,e.forced)&&void 0!==n){if(typeof i==typeof n)continue;copyConstructorProperties(i,n)}(e.sham||n&&n.sham)&&hide(i,"sham",!0),redefine(c,r,i,e)}},toObject=function(e){return Object(requireObjectCoercible(e))},correctPrototypeGetter=!fails((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype$1=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(e){return e=toObject(e),has(e,IE_PROTO)?e[IE_PROTO]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype$1:null},ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,returnThis=function(){return this},IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis);var iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS},objectKeys=Object.keys||function(e){return objectKeysInternal(e,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(e,t){anObject(e);for(var r,n=objectKeys(t),i=n.length,o=0;o<i;)objectDefineProperty.f(e,r=n[o++],t[r]);return e},document$2=global_1.document,html=document$2&&document$2.documentElement,IE_PROTO$1=sharedKey("IE_PROTO"),PROTOTYPE="prototype",Empty=function(){},createDict=function(){var e,t=documentCreateElement("iframe"),r=enumBugKeys.length;for(t.style.display="none",html.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),createDict=e.F;r--;)delete createDict[PROTOTYPE][enumBugKeys[r]];return createDict()},objectCreate=Object.create||function(e,t){var r;return null!==e?(Empty[PROTOTYPE]=anObject(e),r=new Empty,Empty[PROTOTYPE]=null,r[IE_PROTO$1]=e):r=createDict(),void 0===t?r:objectDefineProperties(r,t)};hiddenKeys[IE_PROTO$1]=!0;var defineProperty=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(e,t,r){e&&!has(e=r?e:e.prototype,TO_STRING_TAG$2)&&defineProperty(e,TO_STRING_TAG$2,{configurable:!0,value:t})},iterators={},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis$1=function(){return this},createIteratorConstructor=function(e,t,r){var n=t+" Iterator";return e.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,r)}),setToStringTag(e,n,!1,!0),iterators[n]=returnThis$1,e},validateSetPrototypeOfArguments=function(e,t){if(anObject(e),!isObject(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(r){}return function(r,n){return validateSetPrototypeOfArguments(r,n),t?e.call(r,n):r.__proto__=n,r}}():void 0),ITERATOR$1=wellKnownSymbol("iterator"),IteratorPrototype$2=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS,KEYS="keys",VALUES="values",ENTRIES="entries",returnThis$2=function(){return this},defineIterator=function(e,t,r,n,i,o,a){function s(e){if(e===i&&y)return y;if(!BUGGY_SAFARI_ITERATORS$1&&e in h)return h[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,e)}}return function(){return new r(this)}}createIteratorConstructor(r,t,n);var l,c,u,p=t+" Iterator",f=!1,h=e.prototype,d=h[ITERATOR$1]||h["@@iterator"]||i&&h[i],y=!BUGGY_SAFARI_ITERATORS$1&&d||s(i),m="Array"==t&&h.entries||d;if(m&&(l=objectGetPrototypeOf(m.call(new e)),IteratorPrototype$2!==Object.prototype&&l.next&&(objectGetPrototypeOf(l)!==IteratorPrototype$2&&(objectSetPrototypeOf?objectSetPrototypeOf(l,IteratorPrototype$2):"function"!=typeof l[ITERATOR$1]&&hide(l,ITERATOR$1,returnThis$2)),setToStringTag(l,p,!0,!0))),i==VALUES&&d&&d.name!==VALUES&&(f=!0,y=function(){return d.call(this)}),h[ITERATOR$1]!==y&&hide(h,ITERATOR$1,y),iterators[t]=y,i)if(c={values:s(VALUES),keys:o?y:s(KEYS),entries:s(ENTRIES)},a)for(u in c)!BUGGY_SAFARI_ITERATORS$1&&!f&&u in h||redefine(h,u,c[u]);else _export({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1||f},c);return c},STRING_ITERATOR="String Iterator",setInternalState=internalState.set,getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",(function(e){setInternalState(this,{type:STRING_ITERATOR,string:String(e),index:0})}),(function(){var e,t=getInternalState(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=stringAt(r,n,!0),t.index+=e.length,{value:e,done:!1})}));var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&hide(ArrayPrototype,UNSCOPABLES,objectCreate(null));var addToUnscopables=function(e){ArrayPrototype[UNSCOPABLES][e]=!0},ARRAY_ITERATOR="Array Iterator",setInternalState$1=internalState.set,getInternalState$1=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",(function(e,t){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:t})}),(function(){var e=getInternalState$1(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");iterators.Arguments=iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var ITERATOR$2=wellKnownSymbol("iterator"),TO_STRING_TAG$3=wellKnownSymbol("toStringTag"),ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$2]!==ArrayValues)try{hide(CollectionPrototype,ITERATOR$2,ArrayValues)}catch(e){CollectionPrototype[ITERATOR$2]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG$3]||hide(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME),domIterables[COLLECTION_NAME])for(var METHOD_NAME in es_array_iterator)if(CollectionPrototype[METHOD_NAME]!==es_array_iterator[METHOD_NAME])try{hide(CollectionPrototype,METHOD_NAME,es_array_iterator[METHOD_NAME])}catch(e){CollectionPrototype[METHOD_NAME]=es_array_iterator[METHOD_NAME]}}}var aFunction=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},anInstance=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},ITERATOR$3=wellKnownSymbol("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod=function(e){return void 0!==e&&(iterators.Array===e||ArrayPrototype$1[ITERATOR$3]===e)},bindContext=function(e,t,r){if(aFunction(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},ITERATOR$4=wellKnownSymbol("iterator"),getIteratorMethod=function(e){if(null!=e)return e[ITERATOR$4]||e["@@iterator"]||iterators[classof(e)]},callWithSafeIterationClosing=function(e,t,r,n){try{return n?t(anObject(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&anObject(i.call(e)),t}},iterate=createCommonjsModule((function(e){var t={};(e.exports=function(e,r,n,i,o){var a,s,l,c,u,p=bindContext(r,n,i?2:1);if(o)a=e;else{if("function"!=typeof(s=getIteratorMethod(e)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(s)){for(l=0,c=toLength(e.length);l<c;l++)if((i?p(anObject(u=e[l])[0],u[1]):p(e[l]))===t)return t;return}a=s.call(e)}for(;!(u=a.next()).done;)if(callWithSafeIterationClosing(a,p,u.value,i)===t)return t}).BREAK=t})),ITERATOR$5=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$5]=function(){return this}}catch(e){}var checkCorrectnessOfIteration=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$5]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},SPECIES=wellKnownSymbol("species"),speciesConstructor=function(e,t){var r,n=anObject(e).constructor;return void 0===n||null==(r=anObject(n)[SPECIES])?t:aFunction(r)},location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){var t;queue.hasOwnProperty(e)&&(t=queue[e],delete queue[e],t())},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global_1.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},defer(counter),counter},clear=function(e){delete queue[e]},"process"==classofRaw(process)?defer=function(e){process.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bindContext(port.postMessage,port,1)):!global_1.addEventListener||"function"!=typeof postMessage||global_1.importScripts||fails(post)?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var task={set:set$1,clear:clear},navigator$1=global_1.navigator,userAgent=navigator$1&&navigator$1.userAgent||"",getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,macrotask=task.set,MutationObserver=global_1.MutationObserver||global_1.WebKitMutationObserver,process$1=global_1.process,Promise$1=global_1.Promise,IS_NODE="process"==classofRaw(process$1),queueMicrotaskDescriptor=getOwnPropertyDescriptor$1(global_1,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify,toggle,node,promise;queueMicrotask||(flush=function(){var e,t;for(IS_NODE&&(e=process$1.domain)&&e.exit();head;){t=head.fn,head=head.next;try{t()}catch(e){throw head?notify():last=void 0,e}}last=void 0,e&&e.enter()},notify=IS_NODE?function(){process$1.nextTick(flush)}:MutationObserver&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),function(){node.data=toggle=!toggle}):Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),function(){promise.then(flush)}):function(){macrotask.call(global_1,flush)});var microtask=queueMicrotask||function(e){var t={fn:e,next:void 0};last&&(last.next=t),head||(head=t,notify()),last=t},PromiseCapability=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=aFunction(t),this.reject=aFunction(r)},f$5=function(e){return new PromiseCapability(e)},newPromiseCapability={f:f$5},promiseResolve=function(e,t){if(anObject(e),isObject(t)&&t.constructor===e)return t;var r=newPromiseCapability.f(e);return(0,r.resolve)(t),r.promise},hostReportErrors=function(e,t){var r=global_1.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))},perform=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},redefineAll=function(e,t,r){for(var n in t)redefine(e,n,t[n],r);return e},path=global_1,aFunction$1=function(e){return"function"==typeof e?e:void 0},getBuiltIn=function(e,t){return arguments.length<2?aFunction$1(path[e])||aFunction$1(global_1[e]):path[e]&&path[e][t]||global_1[e]&&global_1[e][t]},SPECIES$1=wellKnownSymbol("species"),setSpecies=function(e){var t=getBuiltIn(e),r=objectDefineProperty.f;descriptors&&t&&!t[SPECIES$1]&&r(t,SPECIES$1,{configurable:!0,get:function(){return this}})},PROMISE="Promise",task$1=task.set,SPECIES$2=wellKnownSymbol("species"),getInternalState$2=internalState.get,setInternalState$2=internalState.set,getInternalPromiseState=internalState.getterFor(PROMISE),PromiseConstructor=global_1[PROMISE],TypeError$1=global_1.TypeError,document$3=global_1.document,process$2=global_1.process,$fetch=global_1.fetch,versions=process$2&&process$2.versions,v8=versions&&versions.v8||"",newPromiseCapability$1=newPromiseCapability.f,newGenericPromiseCapability=newPromiseCapability$1,IS_NODE$1="process"==classofRaw(process$2),DISPATCH_EVENT=!!(document$3&&document$3.createEvent&&global_1.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,FORCED=isForced_1(PROMISE,(function(){function e(){}var t=PromiseConstructor.resolve(1),r=(t.constructor={})[SPECIES$2]=function(t){t(e,e)};return!((IS_NODE$1||"function"==typeof PromiseRejectionEvent)&&(!isPure||t.finally)&&t.then(e)instanceof r&&0!==v8.indexOf("6.6")&&-1===userAgent.indexOf("Chrome/66"))})),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration((function(e){PromiseConstructor.all(e).catch((function(){}))})),isThenable=function(e){var t;return!(!isObject(e)||"function"!=typeof(t=e.then))&&t},notify$1=function(e,t,r){var n;t.notified||(t.notified=!0,n=t.reactions,microtask((function(){for(var i=t.value,o=t.state==FULFILLED,a=0;n.length>a;)!function(r){var n,a,s,l=o?r.ok:r.fail,c=r.resolve,u=r.reject,p=r.domain;try{l?(o||(t.rejection===UNHANDLED&&onHandleUnhandled(e,t),t.rejection=HANDLED),!0===l?n=i:(p&&p.enter(),n=l(i),p&&(p.exit(),s=!0)),n===r.promise?u(TypeError$1("Promise-chain cycle")):(a=isThenable(n))?a.call(n,c,u):c(n)):u(i)}catch(r){p&&!s&&p.exit(),u(r)}}(n[a++]);t.reactions=[],t.notified=!1,r&&!t.rejection&&onUnhandled(e,t)})))},dispatchEvent=function(e,t,r){var n,i;DISPATCH_EVENT?((n=document$3.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),global_1.dispatchEvent(n)):n={promise:t,reason:r},(i=global_1["on"+e])?i(n):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(e,t){task$1.call(global_1,(function(){var r,n=t.value;if(isUnhandled(t)&&(r=perform((function(){IS_NODE$1?process$2.emit("unhandledRejection",n,e):dispatchEvent(UNHANDLED_REJECTION,e,n)})),t.rejection=IS_NODE$1||isUnhandled(t)?UNHANDLED:HANDLED,r.error))throw r.value}))},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e,t){task$1.call(global_1,(function(){IS_NODE$1?process$2.emit("rejectionHandled",e):dispatchEvent(REJECTION_HANDLED,e,t.value)}))},bind=function(e,t,r,n){return function(i){e(t,r,i,n)}},internalReject=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=REJECTED,notify$1(e,t,!0))},internalResolve=function(e,t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===r)throw TypeError$1("Promise can't be resolved itself");var i=isThenable(r);i?microtask((function(){var n={done:!1};try{i.call(r,bind(internalResolve,e,n,t),bind(internalReject,e,n,t))}catch(r){internalReject(e,n,r,t)}})):(t.value=r,t.state=FULFILLED,notify$1(e,t,!1))}catch(r){internalReject(e,{done:!1},r,t)}}};FORCED&&(PromiseConstructor=function(e){anInstance(this,PromiseConstructor,PROMISE),aFunction(e),Internal.call(this);var t=getInternalState$2(this);try{e(bind(internalResolve,this,t),bind(internalReject,this,t))}catch(e){internalReject(this,t,e)}},Internal=function(){setInternalState$2(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function(e,t){var r=getInternalPromiseState(this),n=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=IS_NODE$1?process$2.domain:void 0,r.parent=!0,r.reactions.push(n),r.state!=PENDING&&notify$1(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,t=getInternalState$2(e);this.promise=e,this.resolve=bind(internalResolve,e,t),this.reject=bind(internalReject,e,t)},newPromiseCapability.f=newPromiseCapability$1=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},"function"==typeof $fetch&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return promiseResolve(PromiseConstructor,$fetch.apply(global_1,arguments))}})),_export({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=path[PROMISE],_export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(e){var t=newPromiseCapability$1(this);return t.reject.call(void 0,e),t.promise}}),_export({target:PROMISE,stat:!0,forced:FORCED},{resolve:function(e){return promiseResolve(this,e)}}),_export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var t=this,r=newPromiseCapability$1(t),n=r.resolve,i=r.reject,o=perform((function(){var r=aFunction(t.resolve),o=[],a=0,s=1;iterate(e,(function(e){var l=a++,c=!1;o.push(void 0),s++,r.call(t,e).then((function(e){c||(c=!0,o[l]=e,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=newPromiseCapability$1(t),n=r.reject,i=perform((function(){var i=aFunction(t.resolve);iterate(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}}),_export({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=speciesConstructor(this,getBuiltIn("Promise")),r="function"==typeof e;return this.then(r?function(r){return promiseResolve(t,e()).then((function(){return r}))}:e,r?function(r){return promiseResolve(t,e()).then((function(){throw r}))}:e)}});var promise$1=path.Promise,perf,start;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(i,r.prototype),i}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);return _possibleConstructorReturn(this,t?(r=_getPrototypeOf(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments))}}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}),"function"!=typeof Object.values&&(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),Math.hypot=Math.hypot||function(){for(var e=0,t=arguments.length,r=0;r<t;r++){if(arguments[r]===1/0||arguments[r]===-1/0)return 1/0;e+=arguments[r]*arguments[r]}return Math.sqrt(e)},Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},"undefined"!=typeof window?("performance"in window==0&&(window.performance={}),perf=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&("performance"in self==0&&(self.performance={}),perf=self.performance),perf&&"function"!=typeof perf.now&&(start=+new Date,perf.now=function(){return new Date-start});var global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},ns={},MathUtils;(function(){var e,t,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},n="undefined"!=typeof window&&window===this||void 0===global$1||null==global$1?this:global$1;if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{e:{var i={};try{i.__proto__={ea:!0},t=i.ea;break e}catch(e){}t=!1}e=t?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var o=e;!function(e,t){if(t){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(t=t(o=i[e=e[e.length-1]]))!=o&&null!=t&&r(i,e,{configurable:!0,writable:!0,value:t})}}("Object.setPrototypeOf",(function(e){return e||o}));var a=this||self;function s(e){var t=_typeof(e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function l(e){return"function"==s(e)}function c(e){var t=_typeof(e);return"object"==t&&null!=e||"function"==t}function u(e,t){e=e.split(".");var r,n=a;e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(;e.length&&(r=e.shift());)e.length||void 0===t?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=t}function p(e,t){function r(){}r.prototype=t.prototype,e.ua=t.prototype,e.prototype=new r,e.prototype.constructor=e}var f=Math,h=f.min,d=f.max,y=f.round,m=f.floor,v=f.ceil,g=f.abs,b=f.log,_=f.sqrt,w=f.pow,x=f.sin,E=f.asin,S=f.cos,k=f.tan,T=f.atan2,O=f.PI,A=O/2,P=O/4,C=2*O,N=3*O,R=O/180,j=180/O;function M(e,t,r){return r<e?r:e<t?t:e}function I(e,t,r){return t<r?t<=e&&e<=r:r<=e&&e<=t}function D(e,t,r,n,i,o){return _(w((e-i)*(n-o)-(t-o)*(r-i),2)/(w(r-i,2)+w(n-o,2)))}u("H.math.normalize",(function(e,t,r){return t-=r=r||0,(e-=r)-m(e/t)*t+r})),u("H.math.clamp",M);var L={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function F(e,t){var r=e.x;e=e.y;for(var n,i,o,a,s=t.length,l=s,c=t[0],u=0,p=0,f=0;1!=u&&1<l;)i=t[--l],n=t[--l],a=t[l?l-1:(s+(l-1))%s],o=t[l?l-2:(s+(l-2))%s],r<=n&&n<=r&&e<=i&&i<=e||r<=o&&o<=r&&e<=a&&a<=e?u=1:u||n!==r?!u&&I(r,n,o)&&((n<r&&r<o||r<n&&o<r)&&(p+=e<(c=i+(r-n)/(o-n)*(a-i)),f+=c<e),u=I(e,i,a)&&D(r,e,n,i,o,a)<=0?2:0):(o===r&&(i<e&&e<a||e<i&&a<e)||(c<=r&&r<o||r<=c&&o<r)&&(e<=i?++p:++f),u=I(e,i,a)&&D(r,e,n,i,o,a)<=0?2:0),c=n;return u||0===f||0==p%2||(u=3),u!==L.NONE}function B(e,t){this.x=+e,this.y=+t}function z(e,t,r,n,i,o,a,s,l,c){return e={x:e,y:t,next:r||null,s:n||null,ta:i||null,X:o||null,o:!!a,T:s||0,O:l||0,alpha:c||0},n&&(e.s.next=e),r&&(e.next.s=e),e}function $(e){for(;e&&e.o;)e=e.next;return e}function U(e){if(e)for(;e.next;)e=e.next;return e}function H(e){var t=U(e);(t.s.next=e).s=t.s}function V(e){for(var t=[];e;)t.push(e.x,e.y),e=e.next;return t}function G(e,t,r){for(t=t.next;t!==r&&t.alpha<=e.alpha;)t=t.next;e.next=t,e.s=t.s,(e.next.s=e).s.next=e}function q(e,t){for(var r,n=null,i=0,o=e.length;i<o;i++)(r=z(e[i].x,e[i].y,n)).qa=t,(r.next=n)&&(n.s=r),n=r;return n}function W(e,t,r,n){return(e-=r)*e+(t-=n)*t}u("H.math.CoverType",L),u("H.math.isPointInsidePolygon",F),u("H.math.flatten",(function(e){for(var t=e.length,r=new Float64Array(2*t),n=t&&e[0].x!==X;t--;){var i=e[t],o=t<<1;r[o]=n?i.x:i[0],r[1+o]=n?i.y:i[1]}return r})),u("H.math.Point",B),(B.prototype.set=B).prototype.clone=function(e){return e?(e.x=this.x,e.y=this.y):e=new B(this.x,this.y),e},B.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},B.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},B.prototype.scale=function(e,t){return this.x*=e,this.y*=void 0===t?e:t,this},B.prototype.round=function(){return this.x=y(this.x),this.y=y(this.y),this},B.prototype.floor=function(){return this.x=m(this.x),this.y=m(this.y),this},B.prototype.ceil=function(){return this.x=v(this.x),this.y=v(this.y),this},B.prototype.equals=B.prototype.w=function(e){return!(!e||this.x!==e.x||this.y!==e.y)},B.prototype.getNearest=B.prototype.la=function(e,t){var r,n=t.x-e.x,i=t.y-e.y,o=e;return(n||i)&&(o=(r=((this.x-e.x)*n+(this.y-e.y)*i)/(n*n+i*i))<=0?e:1<=r?t:new B(e.x+r*n,e.y+r*i)),o},B.prototype.distance=B.prototype.R=function(e){return _(w(this.x-e.x,2)+w(this.y-e.y,2))},B.fromIPoint=function(e){if(!e)throw Error("invalid argument");return e instanceof B?e:new B(e.x,e.y)},u("H.math.clipping.clipStrips",(function(e,t,r,n,i,o){var a,s,l,c=e.length;if(c)for(a=[];c--;)for(var u,p,f=e[c],h=f.length,d=0,y=1;y<h;y++)(l=function(e,t,r,n,i,o){var a=e.x;e=-e.y;var s=t.x;if(t=-t.y,r=-r,o=-o,s<a){if(i<s||a<n)return;var l=a,c=e;a=s,e=t,s=l,t=c,l=1}else if(i<a||s<n)return;if(t<e){if(r<t||e<o)return;var u=1;e=-e,t=-t,c=o,o=-r,r=-c}else if(r<e||t<o)return;if(a<n){if((e+=(n-a)*(t-e)/(s-a))>r)return;a=n}if(e<o){if((a+=(o-e)*(s-a)/(t-e))>i)return;e=o}return i<s&&(t=e+(i-a)*(t-e)/(s-a),s=i),r<t&&(s=a+(r-e)*(s-a)/(t-e),t=r),u&&(e=-e,t=-t),l?[new B(s,-t),new B(a,-e)]:[new B(a,-e),new B(s,-t)]}(f[y-1],f[y],r,t,n,i))&&(u=l[0],p=l[1],d&&d.w(u)?s.push(p):a.push(s=l),d=p,o&&(y=h,c=0));else a=e;return a})),u("H.math.clipping.clipPolygon",(function(e,t,r){var n;e=q(e,!0),t=q(t,!1);var i={},o=n=1;switch(~~(r||0)){case 1:o=n=0;break;case 2:n=0,o=1;break;case 3:n=1,o=0}r=n;var a,s,l,c,u,p,f=o;if(t&&e){for(t.M=z(t.x,t.y,null,U(t)),e.M=z(e.x,e.y,null,U(e)),o=t;o.next;o=o.next)if(!o.o)for(n=e;n.next;n=n.next)n.o||(p=function e(t,r,n,i,o){var a,s=r.x-t.x,l=r.y-t.y,c=i.x-n.x,u=i.y-n.y,p=s*u-l*c;return p?(c=((n.x-t.x)*u-(n.y-t.y)*c)/p,p=(l*(n.x-t.x)-s*(n.y-t.y))/p,c<0||1<c||p<0||1<p?0:(0===c?a=t:1===c?a=r:0===p?a=n:1===p&&(a=i),a?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.M&&(a.M.x=a.x,a.M.y=a.y),e(t,r,n,i,o)):(o.xa=t.x+c*s,o.ya=t.y+c*l,o.fa=c,o.ga=p,1))):0}(o,a=$(o.next),n,s=$(n.next),i))&&(p=i.fa,l=i.ga,G(p=z(c=i.xa,u=i.ya,null,null,null,null,!0,0,0,p),o,a),G(a=z(c,u,null,null,null,null,!0,0,0,l),n,s),(p.X=a).X=p);for(i=F(t,V(e)),r&&(i=!i),o=t;o;o=o.next)o.o&&(i=!(o.T=i));for(i=F(e,V(t)),f&&(i=!i),n=e;n.next;n=n.next)n.o&&(i=!(n.T=i));for(H(t),H(e);(e=function(e){var t=e;if(t)for(;(t=t.next)!=e&&(!t.o||t.o&&t.O););return t}(t))!=t;){for(r=null;!e.O;e=e.X){for(i=e.T;(r=z(e.x,e.y,r)).artificial=e.o||e.qa,e.O=1,e=i?e.next:e.s;)if(e.o){e.O=1;break}if(!e)break}r.ta=h;var h=r}return h}})),u("H.math.simplifyDP",(function(e,t,r){return function e(t,r,n,i,o){var a=0,s=i,l=t[i].x,c=t[i].y,u=t[o].x,p=t[o].y,f=i+1,h=W(l,c,u,p);if(h)for(;f<o;){var d=t[f++],y=d.x,m=((y-l)*(u-l)+((d=d.y)-c)*(p-c))/h;a<(y=m<0?W(y,d,l,c):1<m?W(y,d,u,p):W(y,d,l+m*(u-l),c+m*(p-c)))&&(a=y,s=f-1)}else for(;f<o;)a<(y=W(y=(d=t[f++]).x,d=d.y,l,c))&&(a=y,s=f-1);return i=r<=a||0<n&&s-i?(--n,1<s-i?(i=e(t,r,n,i,s)).splice(i.length-1,1):i=[t[i]],1<o-s?i.concat(e(t,r,n,s,o)):i.concat(t.slice(s,o+1))):[t[i],t[o]]}(e,t*t,r||0,0,e.length-1)}));var Y=this,K=String,X=[].pop(),Z=/x/.exec(""),J="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(e,t){if(1==(e instanceof t&&e.constructor===t))throw new TypeError("Illegal constructor "+ie(t))}u("H.lang.isArray",(function(e,t,r,n){var i;if(!(i="Array"===re(e))&&t)throw new ce(t,r,n!==X?n:e);return i})),u("H.lang.isString",(function(e){return"string"==typeof e}));var ee=isNaN;function te(e){return e===+e}function re(e){var t=Object[J[0]][J[6]].call(e).match(/^\[object (\w+)\]$/);return t?t[1]:_typeof(e)}u("H.lang.isNumber",te),u("H.lang.isInteger",Number.isInteger?Number.isInteger:function(e){return"number"==typeof e&&0==e%1});var ne=[];function ie(e,t,r,n){var i,o,a="",s=arguments.length<2;return s&&(t={H:Y.H},r="",n=ne.slice()),se(t,!0,(function(t,o){try{if(i=t[o],s=i,se(t,!(u=[]),(function(e,t){e[t]===s&&u.push(t)})),o=u.sort(oe)[0],!(c(i)&&i.window===i&&i.self===i||c(i)&&0<i.nodeType&&l(i.cloneNode))&&c(i)){if(i===e)return a=r+"."+o,1;if(n.indexOf(i)<0&&(n.push(i),a=ie(e,i,r+"."+o,n)))return 1}}catch(t){}var s,u})),s&&(a=a?a.substr(1).replace("."+J[0]+".","#"):"~"+(l(e)?((o=/^\s*function ([^\( ]+)/.exec(o=e))?o[1]:"anonymous")+"()":re(e))),a}function oe(e,t){return t.length-e.length}ne.indexOf(ne)<0&&ne.push(ne);var ae=Object[J[0]][J[2]];function se(e,t,r){var n;if(e){for(i in e)if((!t||ae.call(e,i))&&r(e,i,!0))return;for(n=J.length;n--;){var i=J[n];if((!t||ae.call(e,i))&&r(e,i,!1))break}}}function le(e,t,r){r[t]="#"+t}function ce(e,t,r){var n,i,o=arguments.length;return(t=t!==X?+t:t)!==X&&((i=n=(i=/^.*?\(([^\)]+)/.exec((""+e).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?K(i[1].replace(/\s+/g,"")).split(","!==X?",":" "):[]).forEach(le),i=i[t]||"#"+t),n=e?ie(e):"",o=2<o?K(r):"",(i||o)&&(n+=" (Argument "+(i||"")+(o?" "+o:"")+")"),o=Error(n),Object.setPrototypeOf(o,ce.prototype),o}function ue(e,t,r){var n=M(+e,-90,90);if(t&&ee(n))throw new ce(t,r,e);return n}function pe(e,t,r){var n,i=+e;if((i<-180||180<i)&&(i=(0==(n=(i+180)%360)<0?n:360+n)-180),t&&ee(i))throw new ce(t,r,e);return i}function fe(e,t,r){var n;if(e!==X&&ee(n=+e)&&t)throw new ce(t,r,e);return n}function he(){Q(this,he)}function de(e,t,r){this.lat=ue(e,de,0),this.lng=pe(t,de,1),r!==X&&(this.alt=fe(r,de,2))}function ye(e,t,r){var n=c(e)&&!(ee(e.lat=ue(e.lat))||ee(e.lng=pe(e.lng))||e.alt!==X&&ee(e.alt=fe(e.alt)));if(!n&&t)throw new ce(t,r,e);return n}function me(e,t,r,n){ve(this,ue(e,me,0),pe(t,me,1),ue(r,me,2),pe(n,me,3))}function ve(e,t,r,n,i){return e.f=r,e.g=i,t<n&&(r=t,t=n,n=r),e.i=t,e.h=n,e.m=e.b=e.c=null,e}function ge(e,t){return(e=t-e)+(e<0?360:0)}function be(e,t){return(e+=t/2)-(180<e?360:0)}function _e(e,t,r,n,i,o,a,s,l){r=h(r,a),e=d(e,i);var c=be(t,i=ge(t,n)),u=be(o,a=ge(o,s))-c,p=(u+=u-1e-6<0?360:0)-1e-6<180?(c=t,s):(u=360-u,c=o,n);return 360<=(u=u+i/2+a/2)+5e-7?(c=-180,p=180):u-5e-7<i?(c=t,p=n):u-5e-7<a&&(c=o,p=s),l?ve(l,e,c,r,p):new me(e,c,r,p)}function we(e,t,r){return r||(ye(e,we,0),ye(t,we,1)),new me(e.lat,e.lng,t.lat,t.lng)}function xe(e,t,r,n,i,o){Q(this,xe),this.sa=e||10,this.c=this.b=null,this.j=n||0,this.l=i||0,this.m=t||1,this.u=r||1,this.I=!!o,this.flush()}function Ee(e,t,r){var n,i;if(e.I&&(n=e.c))for(i=3;0<=i;i--){var o=t[i];if(i%3?o>=n[i]:o<=n[i]){if(!r){e.c=null;break}n[i]=o}}}function Se(e,t){var r,n=e.a;if(t){var i=t;if(i!==n)for(n=i;i=i.c;)(i.entries||1<i.a)&&(n=i)}else for(;!n.entries&&(r=n.a)<2&&r;)n=i;e.a=n}p(ce,Error),u("H.lang.InvalidArgumentError",ce),ce.prototype.name="InvalidArgumentError",u("H.geo.isDBC",(function(e,t){return 0!=(e<0^t<0)&&180<g(t-e)})),u("H.geo.AbstractGeometry",he),he.prototype.getBoundingBox=he.prototype.D,he.prototype.equals=he.prototype.w,he.prototype.a="",he.prototype.l="",he.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},he.prototype.toGeoJSON=he.prototype.va=function(){return{type:this.l,coordinates:this.u()}},he.prototype.forWorkerMessage=he.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},p(de,he),u("H.geo.Point",de),de.prototype.equals=de.prototype.w=function(e){return this===e||!!e&&this.lat===e.lat&&this.lng===e.lng&&(this.alt||0)===(e.alt||0)},de.prototype.distance=de.prototype.R=function(e){var t,r;return this===e||this.lat===e.lat&&this.lng===e.lng?0:(t=this.lat*R,r=e.lat*R,12742001.58*E(h(1,_(w(x((t-r)/2),2)+S(t)*S(r)*w(x((this.lng*R-e.lng*R)/2),2)))))},de.prototype.walk=de.prototype.wa=function(e,t,r){var n,i,o,a,s,l,c;return r?((t/=6371000.79)&&(e*=R,s=R*this.lat,n=x(s),i=x(t),o=S(t),a=R*this.lng,l=S(s),s=E(l*S(e)*i+n*o),l=(e=(a+(e=T(x(e)*l*i,o-n*x(s)))+O)%(2*O)-O)*j),t?new de(s*j,(l+540)%360-180):this):0==(90+(e=(e%360+360)%360))%180?(s=this.lng+t/(6371000.79*C*S(this.lat*R))*(270===e?-360:360),new de(this.lat,(s+540)%360-180)):((t/=6371000.79)&&(e*=R,a=this.lat*R,n=this.lng*R,o=(i=a+t*S(e))-a,s=b(k(i/2+P)/k(a/2+P)),s=ee(o/s)?S(a):o/s,c=t*x(e)/s,g(i)>A&&(i=0<i?O-i:-(O+i))),t?new de(i*j,((n+c+N+(g(a+o)>A?O:0))%C-O)*j):this)},de.prototype.getBoundingBox=de.prototype.D=function(){return new me(this.lat,this.lng,this.lat,this.lng)},de.validate=ye,de.fromIPoint=function e(t){if(!t)throw new ce(e,0,t);return new de(t.lat,t.lng,t.alt)},de.prototype.a="Point",de.prototype.I=function(e){return e.push("(",this.lng," ",this.lat,")"),e},de.prototype.l="Point",de.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},de.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},p(me,he),u("H.geo.Rect",me),me.prototype.a="Polygon",me.prototype.I=function(e){var t=this.i,r=this.f,n=this.h,i=this.g;return e.push("(","(",r," ",t,",",i," ",t,",",i," ",n,",",r," ",n,",",r," ",t,")",")"),e},me.prototype.equals=me.prototype.w=function(e){return this===e||!!e&&this.i===e.i&&this.f===e.f&&this.h===e.h&&this.g===e.g},me.prototype.clone=function(){return new me(this.i,this.f,this.h,this.g)},me.prototype.getTopLeft=me.prototype.W=function(){return this.m||(this.m=new de(this.i,this.f)),this.m},me.prototype.getBottomRight=me.prototype.V=function(){return this.b||(this.b=new de(this.h,this.g)),this.b},me.prototype.getTop=me.prototype.na=function(){return this.i},me.prototype.getBottom=me.prototype.ha=function(){return this.h},me.prototype.getLeft=me.prototype.ja=function(){return this.f},me.prototype.getRight=me.prototype.ma=function(){return this.g},me.prototype.getCenter=me.prototype.F=function(){return this.c||(this.c=new de(this.h+(this.i-this.h)/2,be(this.f,this.A()))),this.c},me.prototype.getWidth=me.prototype.A=function(){return ge(this.f,this.g)},me.prototype.getHeight=me.prototype.G=function(){return this.i-this.h},me.prototype.isCDB=me.prototype.N=function(){return this.f>this.g},me.prototype.isEmpty=me.prototype.ra=function(){return!this.A()&&!this.G()},me.prototype.getBoundingBox=me.prototype.D=function(){return new me(this.i,this.f,this.h,this.g)},me.prototype.containsLatLng=me.prototype.L=function(e,t,r){var n=this.F();return r||(e=ue(e,this.L,0),t=pe(t,this.L,1)),(e=(t=this.B(e,t,r)).F()).lat===n.lat&&e.lng===n.lng&&this.G()===t.G()&&this.A()===t.A()},me.prototype.containsPoint=me.prototype.$=function(e,t){return t||ye(e,this.$,0),this.L(e.lat,e.lng,t)},me.prototype.containsRect=me.prototype.aa=function(e,t){var r=this.F();if(!(t||e instanceof me))throw new ce(this.aa,0,e);return(e=(t=this.J(e,t)).F()).lat===r.lat&&e.lng===r.lng&&this.G()===t.G()&&this.A()===t.A()},me.prototype.mergeLatLng=me.prototype.B=function(e,t,r,n){if(!r){if(ee(e=ue(e)))throw new ce(this.B,0,e);if(ee(t=pe(t)))throw new ce(this.B,1,t)}return _e(this.i,this.f,this.h,this.g,e,t,e,t,n)},me.prototype.mergePoint=me.prototype.ca=function(e,t,r){return t||ye(e,this.ca,0),this.B(e.lat,e.lng,t,r)},me.prototype.mergeRect=me.prototype.J=function(e,t,r){if(!(t||e instanceof me))throw new ce(this.J,0,e);return _e(this.i,this.f,this.h,this.g,e.i,e.f,e.h,e.g,r)},me.prototype.mergeTopLeftBottomRight=me.prototype.C=function(e,t,r,n,i,o){return i||(e=ue(e,this.C,0),t=pe(t,this.C,1),r=ue(r,this.C,2),n=pe(n,this.C,3)),_e(this.i,this.f,this.h,this.g,e,t,r,n,o)},me.prototype.intersects=me.prototype.ba=function(e,t){var r=this.f<=this.g,n=e.f<=e.g,i=this.f<e.g,o=e.f<this.g;if(!(t||e instanceof me))throw new ce(this.ba,0,e);return this.h<=e.i&&e.h<=this.i&&(!r&&(!n||i||o)||!n&&(i||o)||i&&o)},me.merge=_e,me.fromPoints=we,me.coverPoints=function e(t,r){var n=1,i=t.length,o=null,a=s(t);if("array"!=a&&("object"!=a||"number"!=typeof t.length))throw new ce(e,0,t);if(0<i)for(o=we(a=t[0],a,r);n<i;n++)a=t[n],o.B(a.lat,a.lng,r,o);return o},me.coverLatLngAlts=function e(t,r){var n,i=3,o=t.length;if(!(r||t&&null!=t.length))throw new ce(e,0,t);if(0<o)for(n=new me(t[0],t[1],t[0],t[1]);i<o;i+=3)n.B(t[i],t[i+1],r,n);return n},me.coverRects=function e(t,r){var n,i=1,o=t.length;if(r&&(!t||null==t.length))throw new ce(e,0,t);if(0<o)for(n=new me(t[0].i,t[0].f,t[0].h,t[0].g);i<o;i++)n.J(t[i],r,n);return n},me.prototype.resizeToCenter=me.prototype.da=function(e,t){var r=this.f,n=this.i,i=this.g,o=this.h,a=this.F().lng;ye(e,this.da,0);var s=e.lat-o-(n-o)/2,l=e.lng-a;return e=(e=r+((l=180<l||l<-180?-(a+e.lng):l)<0?2*l:0))<-180?360+e:e,i=180<(i+=0<l?2*l:0)?i-360:i,90<=(n=0<s?n+2*s:n)&&(n=90),(o=s<0?o+2*s:o)<=-90&&(o=-90),t?ve(t,n,e,o,i):new me(n,e,o,i)},me.prototype.l="Polygon",me.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},me.prototype.U=function(){return this.j()},me.prototype.j=function(){return[this.i,this.f,this.h,this.g]},xe.prototype.remove=function(e){var t,r,n,i,o,a,s=!1;if(e&&(t=e.a)&&t.b===this&&(r=t.entries)&&0<=(n=r.indexOf(e))){for(r.splice(n,1),r=this.a;t;)(i=t.entries)&&i.length||(i&&delete t.entries,t.a||!(o=t.c))?t=Z:((n=o)[a=(s=t).j]===s&&(delete n[a],delete s.c,--n.a),r===t&&(r=o),t=o);this.a!==r&&(this.a=r,Se(this)),Ee(this,e,!1),s=!0}return s},xe.prototype.flush=function(){var e=new Te(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(e.b=this).a=this.b=e,this.c=null},xe.prototype.o=function(e,t,r,n,i,o){var a=[],s=this.a,l=this.b;return e<=s[5]&&t<=s[6]&&(i?r>=s[7]:r>s[7])&&(o?n>=s[4]:n>s[4])&&function e(t,r,n,i,o,a,s,l,c){var u,p=r.entries,f=r[7],h=r[4],d=r[5],y=r[6],m=r[8],v=r[9];if(p){var g=p.length;if(h<o||f<i||s<y||a<d)for(;g--;){h=(f=p[g])[3],d=f[0],y=f[1],o<=f[2]&&i<=y&&(d<s||l&&d==s)&&(h<a||c&&h==a)&&n.push(f)}else for(;g--;)n.push(p[g])}(m<a||c&&a==m)&&(o<v&&(u=r[1])&&e(t,u,n,i,o,a,s,l,c),(v<s||l&&s==v)&&(u=r[3])&&e(t,u,n,i,o,a,s,l,c)),i<m&&(o<v&&(u=r[0])&&e(t,u,n,i,o,a,s,l,c),(v<s||l&&s==v)&&(u=r[2])&&e(t,u,n,i,o,a,s,l,c))}(this,s,a,e,t,r,n,o||n>=l[6],i||r>=l[5]),a};var ke=0;function Te(e,t,r,n,i,o){this.j=t,e&&(this.c=e,this.b=e.b,i=1&t?(r=e[8],e[5]):(r=e[7],e[8]),o=2&t?(n=e[9],e[6]):(n=e[4],e[9])),this[7]=r,this[5]=i,this[8]=(r+i)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Oe(e,t,r,n,i,o){Oe.ua.constructor.apply(this,arguments)}function Ae(e,t,r,n,i,o,a){var s,l,c=t[8],u=t[9];return a&&(i<c||(s=c<=r))&&(o<u||(l=u<=n))?r=(c=Ae)(e,t=t[s|=l<<1]||(++t.a,t[s]=new Te(t,s)),r,n,i,o,a-1):(n=r=new Pe(r,n,i,o),(t.entries||(t.entries=[])).push(n),n.a=t,Ee(e,r,!0),Se(e,t)),r}function Pe(e,t,r,n){this.id=ke++,this[0]=t,this[1]=r,this[2]=n,this[3]=e}function Ce(e){this.l=new Oe(+e||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function Ne(e,t,r,n,i,o){if(o)o=new Pe(i,-t,r+360,-n),e.j.push(o),e.m=!0,e.a&&e.a.C(t,r,n,i,!0,e.a);else{var a=-t,s=-n,l=(o=e.l).b,c=l[5],u=l[6];if(!(l[7]<=r&&l[4]<=a&&(i<c||c===i&&c===l.b.b[5])&&(s<u||u===s&&u===l.b.b[6])))throw Error("Coordinates out of bounds");o=Ae(o,o.b,r,a,i,s,o.sa),e.b&&e.b.C(t,r,n,i,!0,e.b)}return e.c=null,o}function Re(e,t,r,n,i,o,a){var s=(e=e.j).length,l=[];if(s)for(var c=r+360,u=i+360;s--;){var p=e[s];(je(p,t,r,n,i,o,a)||je(p,t,c,n,u,o,a))&&l.push(p)}return l}function je(e,t,r,n,i,o,a){var s=e[3],l=e[0],c=e[1];return e=e[2],(o?l<=n:l<n)&&(a?s<=i:s<i)&&t<=e&&r<=c}function Me(e,t){var r,n;if(r=t.length){for(var i=e.length,o={};i--;)o[e[i].id]=1;for(;r--;)(n=t[r]).id in o||e.push(n)}}function Ie(){}function De(e,t,r){if(this.l=[],t&&this.K(t),r&&!l(r))throw new ce(De,2,r);this.b=0,this.m=r,this.a={},this.j=this.c=null,this.Z(e)}function Le(e,t){return t&&(e.c=Be(e,t,e.c)),t}function Fe(e){for(;e.b>e.u&&e.j;)ze(e,e.j,!0)}function Be(e,t,r){return r!==t&&((t.H||t.v)&&ze(e,t,!1),(t.H=r)&&(t.v=r.v,r.v=t),t.v||(e.c=t),t.H||(e.j=t),e.b+=t.size),t}function ze(e,t,r){var n=t.v,i=t.H;(n||i||t==e.c&&t==e.j)&&(n?n.H=i:e.c=i,i?i.v=n:e.j=n,e.b-=t.size,r&&(delete e.a[t.id],$e(e,t))),t.H=t.v=null}function $e(e,t){for(var r=e.l.length;r--;)e.l[r].call(e,t.id,t.data,t.size)}Te.prototype.a=0,p(Oe,xe),u("H.geo.QuadTree",Ce),Ce.prototype.N=function(){return this.m},Ce.prototype.D=function(){var e;if(!this.c){var t,r,n=[];if((a=!this.b)&&(s=(o=this.l).c,o.I&&!s&&((a=o.a).entries||a[0]||a[1]||a[2]||a[3])&&(s=function e(t,r){for(var n,i,o=0,a=3;0<=a;a--){for(var s=a+4,l=0<a%3,c=[],u=r[a],p=t[a],f=p.length;f--;){var h=p[f];if(n=h.entries)for(i=n.length;i--;){var d=n[i][a];(l?u<d:d<u)&&(u=d)}for(i=4;i--;)(n=h[i])&&(l?n[s]>u:n[s]<u)&&c.push(n)}o+=c.length,r[a]=u,t[a]=c}return o&&(r=e(t,r)),r}([s=[a],s,s,s],[a[6],a[7],a[4],a[5]]),o.c=s),a=o=s),a&&(this.b=new me(-o[0],o[3],-o[2],o[1])),(e=this.b)&&n.push(e),!this.a&&(r=(t=this.j).length)){for(a=360,s=-(o=90),l=0;r--;)var i=t[r],o=h(o,i[0]),a=h(a,i[3]),s=d(s,i[2]),l=d(l,i[1]);this.a=new me(-o,a,-s,l-360)}(e=this.a)&&n.push(e),(e=n[0])&&(n[1]&&(e=e.J(n[1],!0)),this.c=e)}return this.c},Ce.prototype.insertBoundingBox=Ce.prototype.oa=function(e){var t=e.W(),r=e.V();return(e=e.N())?Ne(this,t.lat,r.lng,r.lat,t.lng,e):Ne(this,t.lat,t.lng,r.lat,r.lng,e)},Ce.prototype.remove=function(e){var t,r;return e.a?(r=this.l.remove(e),this.b=null):(r=0<=(e=(t=this.j).indexOf(e)))&&(t.splice(e,1),this.m=0<t.length,this.a=null),r&&(this.c=null),r},Ce.prototype.intersectBoundingBox=Ce.prototype.pa=function(e,t,r){var n=this.l,i=e.W(),o=e.V(),a=-i.lat,s=(i=i.lng,-o.lat);o=o.lng;return!t&&a==s||!r&&i===o?e=[]:e.N()?(Me(e=n.o(-180,a,o,s,r,t),n.o(i,a,180,s,!1,t)),Me(e,Re(this,a,o,s,i+360,t,r))):Me(e=n.o(i,a,o,s,r,t),Re(this,a,i,s,o,t,r)),e},u("H.util.ICache",Ie),Ie.prototype.add=function(){},Ie.prototype.get=function(){},Ie.prototype.drop=Ie.prototype.S=function(){},Ie.prototype.forEach=function(){},Ie.prototype.removeAll=Ie.prototype.Y=function(){},Ie.prototype.registerOnDrop=Ie.prototype.K=function(){},Ie.prototype.deRegisterOnDrop=Ie.prototype.P=function(){},u("H.util.Cache",De),De.prototype.add=function(e,t,r){var n,i;if(!te(r=+r)||r<0)throw new ce(this.add,2,r);return e=String(e),(i=!this.m||this.m(e,t,r))&&((n=this.a[e])?(n.data!==t&&$e(this,n),this.b+=r-n.size,n.size=r,n.data=t,Le(this,n)):this.a[e]=Be(this,{id:e,data:t,size:r,H:null,v:null},this.c),Fe(this)),i},De.prototype.registerOnDrop=De.prototype.K=function(e){if(!l(e))throw new ce(this.K,0,e);this.l.push(e)},De.prototype.deRegisterOnDrop=De.prototype.P=function(e){this.l=this.l.filter((function(t){return t!==e}))},De.prototype.get=function(e,t){return(e=t?this.a[e]:Le(this,this.a[e]))&&e.data},De.prototype.drop=De.prototype.S=function(e){var t;(t=this.a[e])&&ze(this,t,!0)},De.prototype.forEach=function(e,t,r){var n;for(n in this.a){var i=this.a[n];r&&!r(n,i.data,i.size)||e.call(t,n,i.data,i.size)}},De.prototype.removeAll=De.prototype.Y=function(e){var t;for(t in this.a){var r=this.a[t];e&&!e(t,r.data,r.size)||ze(this,this.a[t],!0)}},De.prototype.setMaxSize=De.prototype.Z=function(e){if(!(0<+e))throw new ce(De.prototype.Z,0,e);return this.u=+e,Fe(this),this},De.prototype.getMaxSize=De.prototype.ka=function(){return this.u},De.prototype.getCurrentSize=De.prototype.ia=function(){return this.b}}).call(ns);var MathUtils$1=MathUtils={},Geo;function _xyToArr(e){return[e.x,e.y]}function _arrToXy(e){return _construct(ns.H.math.Point,_toConsumableArray(e))}MathUtils.clipPolygon=function(e,t){var r,n,i=[],o=ns.H.math.clipping.clipPolygon(e.map(_arrToXy),t.map(_arrToXy));if(o)do{for(r=[],n=o;r.push(_xyToArr(n)),n=n.next;);i.push(r)}while(o=o.nextPoly);else MathUtils.isPointInsidePolygon(t[0],e)?i.push(t):MathUtils.isPointInsidePolygon(e[0],t)&&i.push(e);return i},MathUtils.isPointInsidePolygon=function(e,t){return ns.H.math.isPointInsidePolygon({x:e[0],y:e[1]},ns.H.math.flatten(t))},MathUtils.clamp=function(e,t,r){return(e-=0)>r?r:e<t?t:e},MathUtils.splitLegs=function(e,t){var r=[];e.push(e[0]);for(var n=0;n<e.length-1;n++){var i,o=e[n],a=e[n+1];r.push(o),Math.abs(a[0]-o[0])>=t&&(i=[(o[0]+a[0])/2,(o[1]+a[1])/2],r.push(i))}return r.length!==e.length-1?MathUtils.splitLegs(r,t):r},MathUtils.getBBox=function(e){var t=1/0,r=1/0,n=-1/0,i=-1/0;return e.forEach((function(e){e[0]<t&&(t=e[0]),e[1]<r&&(r=e[1]),e[0]>n&&(n=e[0]),e[1]>i&&(i=e[1])})),[t,r,n,i]},MathUtils.getBBoxCenter=function(e){var t=_slicedToArray(e,4),r=t[0],n=t[1];return[r+(t[2]-r)/2,n+(t[3]-n)/2]},MathUtils.getLineLength=function(e,t,r,n){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-n,2))},MathUtils.modulo=function(e,t){var r;return(r=e%t)<0==t<0?r:r+t};var Geo$1=Geo={};Geo.default_source_max_zoom=18,Geo.default_view_max_zoom=20,Geo.tile_size=256,Geo.half_circumference_meters=20037508.342789244,Geo.circumference_meters=2*Geo.half_circumference_meters,Geo.min_zoom_meters_per_pixel=Geo.circumference_meters/Geo.tile_size;var meters_per_pixel=[];Geo.metersPerPixel=function(e){return meters_per_pixel[e]=meters_per_pixel[e]||Geo.min_zoom_meters_per_pixel/Math.pow(2,e),meters_per_pixel[e]};var meters_per_tile=[];Geo.metersPerTile=function(e){return meters_per_tile[e]=meters_per_tile[e]||Geo.circumference_meters/Math.pow(2,e),meters_per_tile[e]},Geo.tile_scale=4096,Geo.units_per_pixel=Geo.tile_scale/Geo.tile_size,Geo.height_scale=16;var units_per_meter=[];Geo.unitsPerMeter=function(e){return units_per_meter[e]=units_per_meter[e]||Geo.tile_scale/(Geo.tile_size*Geo.metersPerPixel(e)),units_per_meter[e]},Geo.metersForTile=function(e){return{x:e.x*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters,y:-(e.y*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters)}},Geo.tileForMeters=function(e,t){var r=_slicedToArray(e,2),n=r[0],i=r[1];return{x:Math.floor((n+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,t))),y:Math.floor((-i+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,t))),z:t}},Geo.metersToExactTileCoords=function(e,t){var r=_slicedToArray(e,2),n=r[0],i=r[1];return{x:Math.pow(2,t-1)*(1+n/Geo.half_circumference_meters),y:Math.pow(2,t-1)*(1-i/Geo.half_circumference_meters),z:t}},Geo.wrapTile=function(e){var t=e.x,r=e.y,n=e.z,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},o=(1<<n)-1;return i.x&&(t&=o),i.y&&(r&=o),{x:t,y:r,z:n}},Geo.wrapMeters=function(e){var t=e.x,r=e.y;return{x:MathUtils$1.modulo(t+Geo.half_circumference_meters,Geo.circumference_meters)-Geo.half_circumference_meters,y:r}},Geo.metersToLatLng=function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];return r/=Geo.half_circumference_meters,n/=Geo.half_circumference_meters,n=(2*Math.atan(Math.exp(n*Math.PI))-Math.PI/2)/Math.PI,[r*=180,n*=180]},Geo.latLngToMeters=function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];n=Math.log(Math.tan(n*Math.PI/360+Math.PI/4))/Math.PI;return n*=Geo.half_circumference_meters,n=Math.min(Math.max(n,-Geo.half_circumference_meters),Geo.half_circumference_meters),[r*=Geo.half_circumference_meters/180,n]},Geo.tileSpaceToMeters=function(e,t,r){var n=_slicedToArray(e,2),i=n[0],o=n[1],a=Geo.unitsPerMeter(t);return[i/a+r.x,o/a+r.y]},Geo.tileSpaceToLatlng=function(e,t,r){var n=Geo.unitsPerMeter(t);return Geo.transformGeometry(e,(function(e){e[0]=e[0]/n+r.x,e[1]=e[1]/n+r.y;var t=_slicedToArray(Geo.metersToLatLng(e),2),i=t[0],o=t[1];e[0]=i,e[1]=o})),e},Geo.copyGeometry=function(e){if(null!=e){var t={type:e.type};return"Point"===e.type?t.coordinates=[e.coordinates[0],e.coordinates[1]]:"LineString"===e.type||"MultiPoint"===e.type?t.coordinates=e.coordinates.map((function(e){return[e[0],e[1]]})):"Polygon"===e.type||"MultiLineString"===e.type?t.coordinates=e.coordinates.map((function(e){return e.map((function(e){return[e[0],e[1]]}))})):"MultiPolygon"===e.type&&(t.coordinates=e.coordinates.map((function(e){return e.map((function(e){return e.map((function(e){return[e[0],e[1]]}))}))}))),t}},Geo.transformGeometry=function(e,t){null!=e&&("Point"===e.type?t(e.coordinates):"LineString"===e.type||"MultiPoint"===e.type?e.coordinates.forEach(t):"Polygon"===e.type||"MultiLineString"===e.type?e.coordinates.forEach((function(e){return e.forEach(t)})):"MultiPolygon"===e.type&&e.coordinates.forEach((function(e){e.forEach((function(e){return e.forEach(t)}))})))},Geo.boxIntersect=function(e,t){return!(t.sw.x>e.ne.x||t.ne.x<e.sw.x||t.sw.y>e.ne.y||t.ne.y<e.sw.y)},Geo.findBoundingBox=function(e){for(var t=1/0,r=-1/0,n=1/0,i=-1/0,o=e[0].length,a=0;a<o;a++){var s=e[0][a];s[0]<t&&(t=s[0]),s[1]<n&&(n=s[1]),s[0]>r&&(r=s[0]),s[1]>i&&(i=s[1])}return[t,n,r,i]},Geo.geometryType=function(e){return"Polygon"===e||"MultiPolygon"===e?"polygon":"LineString"===e||"MultiLineString"===e?"line":"Point"===e||"MultiPoint"===e?"point":void 0},Geo.centroid=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e&&0!==e.length){var r,n=0,i=0,o=0,a=e[0],s=a.length;t&&(r=a[0],a=a.map((function(e){return[e[0]-r[0],e[1]-r[1]]})));for(var l=0,c=s-1;l<s;c=l,l++){var u=a[l],p=a[c],f=u[1]*p[0]-p[1]*u[0];n+=(u[0]+p[0])*f,i+=(u[1]+p[1])*f,o+=3*f}var h=[n/o,i/o];return t&&(h[0]+=r[0],h[1]+=r[1]),h}},Geo.multiCentroid=function(e){for(var t=e.length,r=[0,0],n=0;n<e.length;n++){var i=Geo.centroid(e[n]);r[0]+=i[0],r[1]+=i[1]}return r[0]/=t,r[1]/=t,r},Geo.signedPolygonRingAreaSum=function(e){for(var t=0,r=e.length,n=0;n<r-1;n++){var i=e[n],o=e[n+1];t+=i[0]*o[1]-o[0]*i[1]}return t+(e[r-1][0]*e[0][1]-e[0][0]*e[r-1][1])},Geo.polygonRingArea=function(e){return Math.abs(Geo.signedPolygonRingAreaSum(e))/2},Geo.polygonArea=function(e){if(e)return Geo.polygonRingArea(e[0])},Geo.multiPolygonArea=function(e){for(var t=0,r=0;r<e.length;r++)t+=Geo.polygonArea(e[r]);return t},Geo.ringWinding=function(e){var t=Geo.signedPolygonRingAreaSum(e);return 0<t?"CW":t<0?"CCW":void 0},Geo.getTileBoundingBox=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=Geo.wrapTile(e,{x:!0}),i=Geo.metersForTile(n),o=Geo.metersPerPixel(n.z),a=Geo.metersToLatLng([i.x-r*o,i.y+r*o]),s=Geo.metersToLatLng([i.x+(t+r)*o,i.y-(t+r)*o]),l=Geo.isLastTile(n);return new ns.H.geo.Rect(0===e.y?90:MathUtils$1.clamp(a[1],-90,90),MathUtils$1.clamp(a[0],-180,180),l.row?-90:MathUtils$1.clamp(s[1],-90,90),l.column?180:MathUtils$1.clamp(s[0],-180,180))},Geo.isLastTile=function(e){var t=e.x,r=e.y,n=e.z;return{row:r===Math.pow(2,n)-1,column:t===Math.pow(2,n)-1}};var MethodNotImplemented=function(){_inherits(t,_wrapNativeSuper(Error));var e=_createSuper(t);function t(r){var n;return _classCallCheck(this,t),(n=e.call(this)).name="MethodNotImplemented",n.message="Method "+r+" must be implemented in subclass",n}return t}(),is_worker=!1,is_main=!1,force_main,force_worker;try{window.document!==HTMLDocument&&(is_main=!0)}catch(e){void 0!==self&&(is_worker=!0,self.window={document:{}},self.document=self.window.document)}var Thread={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==force_worker?force_worker:is_worker||self.is_fake_worker},set is_worker(e){force_worker=e},get is_main(){return void 0!==force_main?force_main:is_main&&!self.is_fake_worker},set is_main(e){force_main=e},is_native_worker:is_worker},WorkerBroker={},message_id=0,messages={},targets={},main_worker_targets={};function findTarget(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:targets,n=[];if("string"==typeof e&&(e=(n=e.split(".")).pop()),Thread.is_main&&t&&1===n.length&&"self"===n[0])r=t;else for(var i=0;i<n.length;i++){if(!r[n[i]])return[];r=r[n[i]]}return[e,r]}WorkerBroker.addTarget=function(e,t){Thread.is_fake_worker?main_worker_targets[e]=t:targets[e]=t},WorkerBroker.removeTarget=function(e){delete targets[e],delete main_worker_targets[e]};var ERROR_NO_TARGET=" No object with that name is registered on main thread.",ERROR_NO_METHOD=" Object has no method with that name.",ERROR_NOT_SET="_worker_broker_error_not_set_";function setupMainThread(){WorkerBroker.postMessage=function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(Array.isArray(e))return Promise.all(e.map((function(e){return WorkerBroker.postMessage.apply(WorkerBroker,[e,t].concat(_toConsumableArray(n)))})));var o,a={};"object"===_typeof(t)&&(t=(a=t).method);var s="main_send";"string"==typeof e?(t=e,n=Array.prototype.slice.call(arguments,1),o=!0,s="worker_send"):e.init&&(o=!0);var l,c=[];if(n&&1===n.length&&n[0]instanceof WorkerBroker.withTransferables&&(c=n[0].transferables,n=n[0].value),l={type:s,message_id:++message_id,method:t,message:n},o)return function(e,t){var r=e.type,n=_slicedToArray(findTarget(e.method,t,"main_send"===r?main_worker_targets:targets),2),i=n[0],o=n[1],a="Worker broker could not dispatch message type ".concat(e.method," on target ").concat(e.target,".");if(!o)throw Error(a+ERROR_NO_TARGET);var s="function"==typeof o[i]&&o[i];if(!s)throw Error(a+ERROR_NO_METHOD);return new Promise((function(t,r){var n;try{n=s.apply(o,e.message)}catch(n){return void r(n)}n instanceof Promise?n.then((function(e){e instanceof WorkerBroker.withTransferables&&(e=e.value[0]),t(e)}),(function(e){r(e instanceof Error?"".concat(e.message,": ").concat(e.stack):e)})):(n instanceof WorkerBroker.withTransferables&&(n=n.value[0]),t(n))}))}(l,e&&e.init?e:void 0);var u=new Promise((function(e,r){messages[message_id]={method:t,message:n,resolve:e,reject:r}}));return a.stringify&&(l=JSON.stringify(l)),e.postMessage(l,c.map((function(e){return e.object}))),freeTransferables(c),u},WorkerBroker.addWorker=function(e){if(!(e instanceof Worker))throw Error("Worker broker could not add non-Worker object",e);e.addEventListener("message",(function(t){var r="string"==typeof t.data?JSON.parse(t.data):t.data,n=r.message_id;if("worker_reply"===r.type)messages[n]&&(r.error?messages[n].reject(r.error):messages[n].resolve(r.message),delete messages[n]);else if("worker_send"===r.type&&null!=n){var i=_slicedToArray(findTarget(r.method),2),o=i[0],a=i[1],s="Worker broker could not dispatch message type ".concat(r.method," on target ").concat(r.target,".");if(!a)throw Error(s+ERROR_NO_TARGET);var l="function"==typeof a[o]&&a[o];if(!l)throw Error(s+ERROR_NO_METHOD);var c,u=ERROR_NOT_SET;try{c=l.apply(a,r.message)}catch(t){u=t}var p,f=[];c&&"function"==typeof c.then?c.then((function(t){t instanceof WorkerBroker.withTransferables&&(f=t.transferables,t=t.value[0]),p={type:"main_reply",message_id:n,message:t},e.postMessage(p,f.map((function(e){return e.object}))),freeTransferables(f)}),(function(t){e.postMessage({type:"main_reply",message_id:n,error:t instanceof Error?"".concat(t.message,": ").concat(t.stack):t})})):(c instanceof WorkerBroker.withTransferables&&(f=c.transferables,c=c.value[0]),p={type:"main_reply",message_id:n,message:c,error:u instanceof Error?"".concat(u.message,": ").concat(u.stack):u},e.postMessage(p,f.map((function(e){return e.object}))),freeTransferables(f))}}))},WorkerBroker.getMessages=function(){return messages},WorkerBroker.getMessageId=function(){return message_id}}function setupWorkerThread(){WorkerBroker.postMessage=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i={};"object"===_typeof(e)&&(e=(i=e).method);var o,a=new Promise((function(t,n){messages[message_id]={method:e,message:r,resolve:t,reject:n}})),s=[];return r&&1===r.length&&r[0]instanceof WorkerBroker.withTransferables&&(s=r[0].transferables,r=r[0].value),o={type:"worker_send",message_id:message_id,method:e,message:r},i.stringify&&(o=JSON.stringify(o)),self.postMessage(o,s.map((function(e){return e.object}))),freeTransferables(s),message_id++,a},self.addEventListener("message",(function(e){var t="string"==typeof e.data?JSON.parse(e.data):e.data,r=t.message_id;if("main_reply"===t.type)messages[r]&&(t.hasOwnProperty("error")&&t.error!==ERROR_NOT_SET?messages[r].reject(t.error):messages[r].resolve(t.message),delete messages[r]);else if("main_send"===t.type&&null!=r){var n=_slicedToArray(findTarget(t.method),2),i=n[0],o=n[1],a="Worker broker could not dispatch message type ".concat(t.method," on target ").concat(t.target,".");if(!o)throw Error(a+ERROR_NO_TARGET);var s,l,c="function"==typeof o[i]&&o[i];if(!c)throw Error(a+ERROR_NO_METHOD);try{s=c.apply(o,t.message)}catch(e){l=e}var u,p=[];s instanceof Promise?s.then((function(e){e instanceof WorkerBroker.withTransferables&&(p=e.transferables,e=e.value[0]),u={type:"worker_reply",message_id:r,message:e},self.postMessage(u,p.map((function(e){return e.object}))),freeTransferables(p)}),(function(e){self.postMessage({type:"worker_reply",message_id:r,error:e instanceof Error?"".concat(e.message,": ").concat(e.stack):e})})):(s instanceof WorkerBroker.withTransferables&&(p=s.transferables,s=s.value[0]),u={type:"worker_reply",message_id:r,message:s,error:l instanceof Error?"".concat(l.message,": ").concat(l.stack):l},self.postMessage(u,p.map((function(e){return e.object}))),freeTransferables(p))}}))}function findTransferables(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return n;if(Array.isArray(e))e.forEach((function(t,r){return findTransferables(t,e,r,n)}));else if("object"===_typeof(e))if(e instanceof ArrayBuffer)n.push({object:e,parent:t,property:r});else if(e.buffer instanceof ArrayBuffer)n.push({object:e.buffer,parent:t,property:r});else for(var i in e)findTransferables(e[i],e,i,n);return n}function freeTransferables(e){Array.isArray(e)&&e.filter((function(e){return e.parent&&e.property})).forEach((function(e){return delete e.parent[e.property]}))}WorkerBroker.withTransferables=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!(this instanceof WorkerBroker.withTransferables))return _construct(WorkerBroker.withTransferables,t);this.value=t,this.transferables=findTransferables(this.value)},Thread.is_main&&setupMainThread(),Thread.is_worker&&setupWorkerThread();var LEVELS={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},methods={},logged_once={},Utils;function methodForLevel(e){return methods[e]=methods[e]||(console[e]?console[e]:console.log).bind(console),methods[e]}function log(e){var t="object"===_typeof(e)?e.level:e;if(LEVELS[t]<=LEVELS[log.level]){for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(Thread.is_native_worker)WorkerBroker.postMessage.apply(WorkerBroker,[{method:"_logProxy",stringify:!0},e].concat(n));else{if("object"===_typeof(e)&&!0===e.once){if(logged_once[JSON.stringify(n)])return;logged_once[JSON.stringify(n)]=!0}var o=methodForLevel(t);1<n.length?o.apply(void 0,["Tangram [".concat(t,"]: ").concat(n[0])].concat(_toConsumableArray(n.slice(1)))):o("Tangram [".concat(t,"]: ").concat(n[0]))}}}function debounce(e,t,r){var n,i;return r=r||0,function(){var o=this,a=arguments;function s(){i=0,e.apply(o,a)}clearTimeout(n),i&&r&&Date.now()-i>=r?s():(i=i||Date.now(),n=setTimeout((function(){s()}),t))}}log.level="info",log.workers=null,log.setLevel=function(e){log.level=e,Thread.is_main&&Array.isArray(log.workers)&&WorkerBroker.postMessage(log.workers,"_logSetLevelProxy",e)},Thread.is_main&&(log.setWorkers=function(e){log.workers=e},log.reset=function(){logged_once={}}),WorkerBroker.addTarget("_logProxy",log),WorkerBroker.addTarget("_logSetLevelProxy",log.setLevel);var Utils$1=Utils={};WorkerBroker.addTarget("Utils",Utils),Utils.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},Utils.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},Utils._requests={},Utils._proxy_requests={},Utils.io=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(Thread.is_worker&&Utils.isMicrosoft())return log("debug","Proxying request for URL to worker",e),o&&(Utils._proxy_requests[o]=!0),WorkerBroker.postMessage("Utils.io",e,t,r,n,i,o,!0);var s=new XMLHttpRequest,l=(l=new Promise((function(i,o){s.open(n,e,!0),s.timeout=t,s.responseType=r,s.onload=function(){200===s.status?-1<["text","json"].indexOf(s.responseType)?i(s.responseText):i(s.response):o(Error("Request error with a status of "+s.statusText))},s.onerror=function(e){o(Error("There was a network error"+e.toString()))},s.ontimeout=function(e){o(Error("timeout "+e.toString()))},s.send()}))).then((function(e){return o&&delete Utils._requests[o],a?WorkerBroker.withTransferables(e):e}));return o&&(Utils._requests[o]=s),l},Utils.cancelRequest=function(e){if(Thread.is_worker&&Utils._proxy_requests[e])return WorkerBroker.postMessage("Utils.cancelRequest",e);Utils._requests[e]?(log("trace","Cancelling network request key '".concat(e,"'")),Utils._requests[e].abort(),delete Utils._requests[e]):log("trace","Could not find network request key '".concat(e,"'"))},Utils.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)})},Utils.serializeWithFunctions=function(e){return"function"==typeof e?e.toString():JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t}))},Utils.stringsToFunctions=function(e,t){if("string"==typeof e)e=Utils.stringToFunction(e,t);else if(null!=e&&"object"===_typeof(e))for(var r in e)e[r]=Utils.stringsToFunctions(e[r],t);return e},Utils._use_count=0,Utils._function_cache={};var _clear_function_cache=debounce((function(){log("trace","Cleared cached ".concat(Object.keys(Utils._function_cache).length," functions (reused ").concat(Utils._use_count," times)")),Utils._use_count=0,Utils._function_cache={}}),1e4),FUNCTION_MATCH_RGX=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m,_createObjectURL,_revokeObjectURL;function addBaseURL(e,t){if(!e||!isRelativeURL(e))return e;var r,n="/"!==e[0];return t?(r=document.createElement("a")).href=t:r=window.location,n?pathForURL(r.href)+e:(r.origin||r.protocol+"//"+r.host)+e}function pathForURL(e){if("string"!=typeof e||-1!==e.search(/^(data|blob):/))return"";var t=e.indexOf("?");-1<t&&(e=e.substr(0,t));var r=e.indexOf("#");return-1<r&&(e=e.substr(0,r)),e.substr(0,e.lastIndexOf("/")+1)||""}function extensionForURL(e){var t=(e=e.split("/").pop()).lastIndexOf(".");if(-1<t)return e.substring(t+1)}function isRelativeURL(e){return"string"==typeof e&&!(-1<e.search(/^(http|https|data|blob):/)||"//"===e.substr(0,2))}function addParamsToURL(e,t){if(!t||0===Object.keys(t).length)return[e,[]];var r=e.indexOf("?"),n=e.indexOf("#"),i="";-1<n&&(i=e.slice(n),e=e.slice(0,n)),-1===r&&(r=e.length,e+="?"),r++;var o="",a=[];for(var s in t)""===getURLParameter(s,e)?o+="".concat(s,"=").concat(t[s],"&"):a.push([s,t[s]]);return[e=e.slice(0,r)+o+e.slice(r)+i,a]}function createObjectURL(e){return void 0===_createObjectURL&&"function"!=typeof(_createObjectURL=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(_createObjectURL=null,log("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_createObjectURL?_createObjectURL(e):e}function revokeObjectURL(e){return void 0===_revokeObjectURL&&"function"!=typeof(_revokeObjectURL=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(_revokeObjectURL=null,log("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_revokeObjectURL?_revokeObjectURL(e):e}function getURLParameter(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}Utils.stringToFunction=function(e,t){var r=e;t&&(r+=t.toString());var n=Utils._function_cache[r];if(_clear_function_cache(),n)return Utils._use_count++,n;var i="string"==typeof e&&e.match(FUNCTION_MATCH_RGX);if(i&&2<i.length)try{var o=i[2],a=0<(a=0<i[1].length&&i[1].split(",").map((function(e){return e.trim()})).filter((function(e){return e}))).length?a:["context"],s=new Function(a.toString(),"function"==typeof t?t(o):o);return Utils._function_cache[r]=s}catch(t){return e}return e},Utils.device_pixel_ratio=1,Utils.isPowerOf2=function(e){return 0==(e&e-1)},Utils.interpolate=function(e,t,r){if(!Array.isArray(t)||!Array.isArray(t[0]))return t;if(t.length<1)return t;var n,i,o,a,s;if(e<=t[0][0])a=t[0][1],"function"==typeof r&&(a=r(a));else if(e>=t[t.length-1][0])a=t[t.length-1][1],"function"==typeof r&&(a=r(a));else for(var l=0;l<t.length-1;l++)if(e>=t[l][0]&&e<t[l+1][0]){if(n=t[l][0],i=t[l+1][0],Array.isArray(t[l][1])){a=[];for(var c=0;c<t[l][1].length;c++)"function"==typeof r?(s=r(t[l][1][c]),o=r(t[l+1][1][c])-s,a[c]=o*(e-n)/(i-n)+s):(o=t[l+1][1][c]-t[l][1][c],a[c]=o*(e-n)/(i-n)+t[l][1][c])}else a="function"==typeof r?(s=r(t[l][1]),(o=r(t[l+1][1])-s)*(e-n)/(i-n)+s):(o=t[l+1][1]-t[l][1])*(e-n)/(i-n)+t[l][1];break}return a},Utils.toCSSColor=function(e){return 1===e[3]?"rgb(".concat(e.slice(0,3).map((function(e){return Math.round(255*e)})).join(", "),")"):"rgba(".concat(e.map((function(e,t){return t<3&&Math.round(255*e)||e})).join(", "),")")},Utils.pointInTile=function(e){return 0<=e[0]&&e[1]>-Geo$1.tile_scale&&e[0]<Geo$1.tile_scale&&e[1]<=0},Utils.zoomToTileLevel=function(e){return Math.floor(e)};var DataSource=function(){function e(t,r){var n=this;if(_classCallCheck(this,e),this.config=t,this.sources=r,this.id=t.id,this.name=t.name,this.pad_scale=t.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(t.rasters)&&t.rasters.forEach((function(e){-1===n.rasters.indexOf(e)&&n.rasters.push(e)})),this.preprocess=t.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=t.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===_typeof(this.transform))for(var i in this.transform)"function"==typeof this.transform[i]&&(this.transform[i]=this.transform[i].bind(this));this.extra_data=t.extra_data,this.scripts=t.scripts,this.max_zoom=null!=t.max_zoom?t.max_zoom:Geo$1.default_source_max_zoom,this.setTileSize(t.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=t.min_display_zoom?t.min_display_zoom:0,this.max_display_zoom=null!=t.max_display_zoom?t.max_display_zoom:null,this._has_volatile_data=!!t.has_volatile_data}return _createClass(e,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(e){if(e.source_data.layers){var t={coords:e.coords},r=[];if("function"==typeof this.transform)r.push(this.transform);else if("object"===_typeof(this.transform))for(var n=Object.keys(this.transform).sort(),i=0;i<n.length;i++)r.push(this.transform[n[i]]);for(var o=1===Object.keys(e.source_data.layers).length&&e.source_data.layers._default,a=0;a<r.length;a++)o?e.source_data.layers._default=r[a](e.source_data.layers._default,this.extra_data,t):e.source_data.layers=r[a](e.source_data.layers,this.extra_data,t)}}},{key:"_postProcessTile",value:function(e){var t=this;for(var r in this._transformTile(e),e.source_data.layers){var n=e.source_data.layers[r];n&&n.features&&n.features.forEach((function(e){Geo$1.transformGeometry(e.geometry,(function(e){e[1]=-e[1],t.pad_scale&&(e[0]=Math.round(e[0]*(1+t.pad_scale)-Geo$1.tile_scale*t.pad_scale/2),e[1]=Math.round(e[1]*(1+t.pad_scale)-Geo$1.tile_scale*t.pad_scale/2))})),t.updateDefaultWinding(e.geometry)}))}e.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(e){return e.source_data={},e.source_data.layers={},e.pad_scale=this.pad_scale,e.rasters=_toConsumableArray(this.rasters),this._load(e)}},{key:"_load",value:function(){throw new MethodNotImplemented("_load")}},{key:"setTileSize",value:function(e){this.tile_size=e||256,("number"!=typeof this.tile_size||this.tile_size<256||!Utils$1.isPowerOf2(this.tile_size))&&(log({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(e,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(e){return null==this.default_winding&&("Polygon"===e.type?this.default_winding=Geo$1.ringWinding(e.coordinates[0]):"MultiPolygon"===e.type&&(this.default_winding=Geo$1.ringWinding(e.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(e,t){if(e.z<this.min_display_zoom||null!=this.max_display_zoom&&t>this.max_display_zoom)return!1;for(var r=0;r<this.rasters.length;r++){var n=this.rasters[r];if(this.sources[n]&&this.sources[n]!==this&&!this.sources[n].includesTile(e,e.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(e){var t=0<arguments.length&&void 0!==e&&e;this._has_volatile_data=t}}],[{key:"create",value:function(t,r){for(var n in r)if(r[n].config.name===t.name&&e.sameConfig(r[n],{config:t}))return r[n];if(e.types[t.type])return new e.types[t.type](t,r)}},{key:"sameConfig",value:function(e,t){if(!e||!t)return!1;var r=Object.assign({},e.config,{id:null,tiled:null,url:null}),n=Object.assign({},t.config,{id:null,tiled:null,url:null});return JSON.stringify(r)===JSON.stringify(n)}},{key:"coordsToMeters",value:function(e){var t=_slicedToArray(Geo$1.latLngToMeters(e),2),r=t[0],n=t[1];e[0]=r,e[1]=n}},{key:"projectData",value:function(t){for(var r in t.layers)for(var n=t.layers[r].features.length,i=0;i<n;i++){var o=t.layers[r].features[i];Geo$1.transformGeometry(o.geometry,e.coordsToMeters)}}},{key:"metersToTileUnits",value:function(e,t,r){r[0]=Math.round((r[0]-t.x)*e),r[1]=-1*Math.round((r[1]-t.y)*e)}},{key:"scaleData",value:function(t,r){var n=r.coords.z,i=r.min,o=(r.max,e.metersToTileUnits.bind(this,Geo$1.unitsPerMeter(n),i));for(var a in t.layers)for(var s=t.layers[a].features.length,l=0;l<s;l++){var c=t.layers[a].features[l];Geo$1.transformGeometry(c.geometry,o)}}},{key:"register",value:function(t,r){t&&r&&(e.types[r]=t)}}]),e}();DataSource.types={};var network_request_id=0,NetworkSource=function(){_inherits(t,DataSource);var e=_createSuper(t);function t(r,n){var i;_classCallCheck(this,t),(i=e.call(this,r,n)).response_type="";var o=_slicedToArray(addParamsToURL(r.url,r.url_params),2),a=o[0],s=o[1];if(i.url=a,s.forEach((function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1];log({level:"warn",once:!0},"Data source '".concat(i.name,"': parameter '").concat(n,"' already present in URL '").concat(r.url,"', ")+"skipping value '".concat(n,"=").concat(o,"' specified in 'url_params'"))})),"string"!=typeof i.url)throw Error("Network data source must provide a string `url` property");return i}return _createClass(t,[{key:"_load",value:function(e){var t=this,r=this.formatUrl(this.url,e),n=e.source_data;return n.url=r,new Promise((function(i,o){n.error=null;var a=network_request_id+++"-"+r,s=Utils$1.io(r,6e4,t.response_type,"GET",{},a);n.request_id=a,s.then((function(r){"function"==typeof t.preprocess&&(r=t.preprocess(r)),(r=r instanceof Promise?r:Promise.resolve(r)).then((function(r){t.parseSourceData(e,n,r),t._postProcessTile(e),i(e)}))}),(function(r){n.error=r.stack,t._postProcessTile(e),i(e)}))}))}},{key:"formatUrl",value:function(){throw new MethodNotImplemented("formatUrl")}},{key:"parseSourceData",value:function(){throw new MethodNotImplemented("parseSourceData")}}]),t}(),NetworkTileSource=function(){_inherits(t,NetworkSource);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),(i=e.call(this,r,n)).tiled=!0,i.parseBounds(r),i.builds_geometry_tiles=!1,i.tms=!0===r.tms,-1<i.url.search("{s}")&&(Array.isArray(r.url_subdomains)&&0<r.url_subdomains.length?(i.url_subdomains=r.url_subdomains,i.next_url_subdomain=0):log({level:"warn",once:!0},"Data source '".concat(i.name,"': source URL includes '{s}' subdomain marker ('").concat(i.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),i}return _createClass(t,[{key:"parseBounds",value:function(e){var t,r,n,i,o;Array.isArray(e.bounds)&&4===e.bounds.length&&(this.bounds=e.bounds,r=(t=_slicedToArray(this.bounds,4))[0],n=t[1],i=t[2],o=t[3],this.bounds_meters={min:Geo$1.latLngToMeters([r,o]),max:Geo$1.latLngToMeters([i,n])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(e){if(this.bounds){e=Geo$1.wrapTile(e,{x:!0});var t=(t=this.bounds_tiles.min[e.z])||(this.bounds_tiles.min[e.z]=Geo$1.tileForMeters(this.bounds_meters.min,e.z)),r=(r=this.bounds_tiles.max[e.z])||(this.bounds_tiles.max[e.z]=Geo$1.tileForMeters(this.bounds_meters.max,e.z));if(e.x<t.x||e.x>r.x||e.y<t.y||e.y>r.y)return!1}return!0}},{key:"includesTile",value:function(e,r){return!!_get(_getPrototypeOf(t.prototype),"includesTile",this).call(this,e,r)&&!!this.checkBounds(e)}},{key:"formatUrl",value:function(e,t){var r=Geo$1.wrapTile(t.coords,{x:!0});this.tms&&(r.y=Math.pow(2,r.z)-1-r.y);var n=e.replace("{x}",r.x).replace("{y}",r.y).replace("{z}",r.z);return null!=this.url_subdomains&&(n=n.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),n}},{key:"urlHasTilePattern",value:function(e){return e&&-1<e.search("{x}")&&-1<e.search("{y}")&&-1<e.search("{z}")}}]),t}(),MapsJsSource=function(){_inherits(t,DataSource);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),(i=e.call(this,r,n)).target_name="MapsJsSource"+r.uid,i.tiled=!!r.tiled,WorkerBroker.addTarget(i.target_name,_assertThisInitialized(i)),Thread.is_worker&&WorkerBroker.postMessage(i.target_name+".onWorkerInitialized"),Thread.is_main&&(i._workers_left=0),i}return _createClass(t,[{key:"initialize",value:function(e,t,r,n){this._main_initialized||(this.provider=e,this.worker=n,this._workers_left+=r,this._on_update=t,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),e.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(e){this._isReady()&&this.onProviderUpdate(e)}},{key:"onProviderUpdate",value:function(e){this.dispatchUpdate(void 0,e.data)}},{key:"dispatchUpdate",value:function(e,t){this._on_update(this.name,e,t)}},{key:"dispose",value:function(){WorkerBroker.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),t}(),read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,p=r?i-1:0,f=r?-1:1,h=e[t+p];for(p+=f,o=h&(1<<-u)-1,h>>=-u,u+=s;0<u;o=256*o+e[t+p],p+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;0<u;a=256*a+e[t+p],p+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)},write=function(e,t,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+p?f/l:f*Math.pow(2,1-p))*l&&(a++,l/=2),u<=a+p?(s=0,a=u):1<=a+p?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));8<=i;e[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;e[r+h]=255&a,h+=d,a/=256,c-=8);e[r+h-d]|=128*y},ieee754={read:read,write:write},pbf=Pbf;function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32;function readVarintRemainder(e,t,r){var n=r.buf,i=n[r.pos++],o=(112&i)>>4;if(i<128)return toNum(e,o,t);if(o|=(127&(i=n[r.pos++]))<<3,i<128)return toNum(e,o,t);if(o|=(127&(i=n[r.pos++]))<<10,i<128)return toNum(e,o,t);if(o|=(127&(i=n[r.pos++]))<<17,i<128)return toNum(e,o,t);if(o|=(127&(i=n[r.pos++]))<<24,i<128)return toNum(e,o,t);if(o|=(1&(i=n[r.pos++]))<<31,i<128)return toNum(e,o,t);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function writeBigVarint(e,t){var r,n;if(0<=e?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:n=n+1|(r=0)),0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),writeBigVarintLow(r,n,t),writeBigVarintHigh(n,t)}function writeBigVarintLow(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}function writeBigVarintHigh(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function makeRoomForExtraLength(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;e<=i;i--)r.buf[i+n]=r.buf[i]}function writePackedVarint(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function writePackedSVarint(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function writePackedFloat(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function writePackedDouble(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function writePackedBoolean(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function writePackedFixed32(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function writePackedSFixed32(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function writePackedFixed64(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function writePackedSFixed64(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function readUInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function writeInt32(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function readInt32(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function readUtf8(e,t,r){for(var n="",i=t;i<r;){var o,a,s,l=e[i],c=null,u=239<l?4:223<l?3:191<l?2:1;if(r<i+u)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=c&&c<=57343)&&(c=null)):4===u&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=c)&&(c=null)),null===c?(c=65533,u=1):65535<c&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=u}return n}function writeUtf8(e,t,r){for(var n,i,o=0;o<t.length;o++){if(55295<(n=t.charCodeAt(o))&&n<57344){if(!i){56319<n||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readFloat:function(){var e=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r=t[this.pos++],n=127&r;return r<128?n:(n|=(127&(r=t[this.pos++]))<<7,r<128?n:(n|=(127&(r=t[this.pos++]))<<14,r<128?n:(n|=(127&(r=t[this.pos++]))<<21,r<128?n:readVarintRemainder(n|=(15&(r=t[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=readUtf8(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var r=readPackedEnd(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=readPackedEnd(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Pbf.Varint)for(;127<this.buf[this.pos++];);else if(t===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Pbf.Fixed32)this.pos+=4;else{if(t!==Pbf.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t,r=this.length||16;r<this.pos+e;)r*=2;r!==this.length&&((t=new Uint8Array(r)).set(this.buf),this.buf=t,this.length=r)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?writeBigVarint(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);var r=this.pos-t;128<=r&&makeRoomForExtraLength(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;128<=n&&makeRoomForExtraLength(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){this.writeMessage(e,writePackedVarint,t)},writePackedSVarint:function(e,t){this.writeMessage(e,writePackedSVarint,t)},writePackedBoolean:function(e,t){this.writeMessage(e,writePackedBoolean,t)},writePackedFloat:function(e,t){this.writeMessage(e,writePackedFloat,t)},writePackedDouble:function(e,t){this.writeMessage(e,writePackedDouble,t)},writePackedFixed32:function(e,t){this.writeMessage(e,writePackedFixed32,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,writePackedSFixed32,t)},writePackedFixed64:function(e,t){this.writeMessage(e,writePackedFixed64,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,writePackedSFixed64,t)},writeBytesField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Pbf.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Pbf.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Pbf.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Pbf.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var pointGeometry=Point;function Point(e,t){this.x=e,this.y=t}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,i=r*this.x+t*this.y;return this.x=n,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.x+r*(this.x-t.x)-n*(this.y-t.y),o=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(e){return e instanceof Point||!Array.isArray(e)?e:new Point(e[0],e[1])};var vectortilefeature=VectorTileFeature;function VectorTileFeature(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(readFeature,this,t)}function readFeature(e,t,r){1==e?t.id=r.readVarint():2==e?readTag(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function readTag(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}function classifyRings(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],o=0;o<t;o++){var a=signedArea(e[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}return r&&i.push(r),i}function signedArea(e){for(var t,r,n=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],n+=((r=e[a]).x-t.x)*(t.y+r.y);return n}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,l=[];e.pos<n;)if(o||(i=7&(r=e.readVarint()),o=r>>3),o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&l.push(t),t=[]),t.push(new pointGeometry(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}return t&&l.push(t),l},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,o=0,a=0,s=1/0,l=-1/0,c=1/0,u=-1/0;e.pos<r;)if(i||(n=7&(t=e.readVarint()),i=t>>3),i--,1===n||2===n)(o+=e.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=e.readSVarint())<c&&(c=a),u<a&&(u=a);else if(7!==n)throw new Error("unknown command "+n);return[s,c,l,u]},VectorTileFeature.prototype.toGeoJSON=function(e,t,r){var n,i=this.extent*Math.pow(2,r),o=this.extent*e,a=this.extent*t,s=this.loadGeometry(),l=VectorTileFeature.types[this.type];function c(e){for(var t=0;t<e.length;t++){var r=e[t],n=180-360*(r.y+a)/i;e[t]=[360*(r.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:for(var u=[],p=0;p<s.length;p++)u[p]=s[p][0];c(s=u);break;case 2:for(p=0;p<s.length;p++)c(s[p]);break;case 3:for(s=classifyRings(s),p=0;p<s.length;p++)for(n=0;n<s[p].length;n++)c(s[p][n])}1===s.length?s=s[0]:l="Multi"+l;var f={type:"Feature",geometry:{type:l,coordinates:s},properties:this.properties};return"id"in this&&(f.id=this.id),f};var VectorTileFeature$1=vectortilefeature,long_1=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=UINT_CACHE[e])?n:(r=fromBits(e,(0|e)<0?-1:0,!0),i&&(UINT_CACHE[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=INT_CACHE[e])?n:(r=fromBits(e,e<0?-1:0,!1),i&&(INT_CACHE[e]=r),r)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(TWO_PWR_64_DBL<=e)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(TWO_PWR_63_DBL<=e+1)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,r){return new Long(e,t,r)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if(t="number"==typeof t?(r=t,!1):!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return fromString(e.substring(1),t,r).neg();for(var i=fromNumber(pow_dbl(r,8)),o=ZERO,a=0;a<e.length;a+=8){var s,l=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+l),r);o=l<8?(s=fromNumber(pow_dbl(r,l)),o.mul(s).add(fromNumber(c))):(o=o.mul(i)).add(fromNumber(c))}return o.unsigned=t,o}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=fromNumber(pow_dbl(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),l=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||0<=this.high},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return 0<this.comp(e)},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return 0<=this.comp(e)},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,l=0,c=0,u=0,p=0;return u+=(p+=i+(65535&e.low))>>>16,c+=(u+=n+s)>>>16,l+=(c+=r+a)>>>16,l+=t+o,fromBits((u&=65535)<<16|(p&=65535),(l&=65535)<<16|(c&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,l=65535&e.low,c=0,u=0,p=0,f=0;return p+=(f+=i*l)>>>16,u+=(p+=n*l)>>>16,p&=65535,u+=(p+=i*s)>>>16,c+=(u+=r*l)>>>16,u&=65535,c+=(u+=n*s)>>>16,u&=65535,c+=(u+=i*a)>>>16,c+=t*l+r*s+n*a+i*o,fromBits((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var t,r,n;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(n=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(t=this.sub(e.mul(n)),r=n.add(t.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=ZERO}for(t=this;t.gte(e);){n=Math.max(1,Math.floor(t.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),o=i<=48?1:pow_dbl(2,i-48),a=fromNumber(n),s=a.mul(e);s.isNegative()||s.gt(t);)s=(a=fromNumber(n-=o,this.unsigned)).mul(e);a.isZero()&&(a=ONE),r=r.add(a),t=t.sub(s)}return r},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}}))}var base64_1=createCommonjsModule((function(e,t){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var i,o=null,a=[],s=0,l=0;t<r;){var c=e[t++];switch(l){case 0:a[s++]=n[c>>2],i=(3&c)<<4,l=1;break;case 1:a[s++]=n[i|c>>4],i=(15&c)<<2,l=2;break;case 2:a[s++]=n[i|c>>6],a[s++]=n[63&c],l=0}8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=n[i],a[s++]=61,1===l&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,o=r,s=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&1<s)break;if(void 0===(c=i[c]))throw Error(a);switch(s){case 0:n=c,s=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(a);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float_1=factory(factory);function factory(e){function t(e,t,r,n){var i,o=t<0?1:0;o&&(t=-t),0===t?e(0<1/t?0:2147483648,r,n):isNaN(t)?e(2143289344,r,n):e(34028234663852886e22<t?(o<<31|2139095040)>>>0:t<11754943508222875e-54?(o<<31|Math.round(t/1401298464324817e-60))>>>0:(o<<31|(i=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255==o?a?NaN:1/0*i:0==o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(8388608+a)}function n(e,t,r){s[0]=e,t[r]=l[0],t[r+1]=l[1],t[r+2]=l[2],t[r+3]=l[3]}function i(e,t,r){s[0]=e,t[r]=l[3],t[r+1]=l[2],t[r+2]=l[1],t[r+3]=l[0]}function o(e,t){return l[0]=e[t],l[1]=e[t+1],l[2]=e[t+2],l[3]=e[t+3],s[0]}function a(e,t){return l[3]=e[t],l[2]=e[t+1],l[1]=e[t+2],l[0]=e[t+3],s[0]}var s,l,c,u,p,f;function h(e,t,r,n,i,o){var a,s,l=n<0?1:0;l&&(n=-n),0===n?(e(0,i,o+t),e(0<1/n?0:2147483648,i,o+r)):isNaN(n)?(e(0,i,o+t),e(2146959360,i,o+r)):17976931348623157e292<n?(e(0,i,o+t),e((l<<31|2146435072)>>>0,i,o+r)):n<22250738585072014e-324?(e((a=n/5e-324)>>>0,i,o+t),e((l<<31|a/4294967296)>>>0,i,o+r)):(1024===(s=Math.floor(Math.log(n)/Math.LN2))&&(s=1023),e(4503599627370496*(a=n*Math.pow(2,-s))>>>0,i,o+t),e((l<<31|s+1023<<20|1048576*a&1048575)>>>0,i,o+r))}function d(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,l=a>>>20&2047,c=4294967296*(1048575&a)+o;return 2047==l?c?NaN:1/0*s:0==l?5e-324*s*c:s*Math.pow(2,l-1075)*(c+4503599627370496)}function y(e,t,r){u[0]=e,t[r]=p[0],t[r+1]=p[1],t[r+2]=p[2],t[r+3]=p[3],t[r+4]=p[4],t[r+5]=p[5],t[r+6]=p[6],t[r+7]=p[7]}function m(e,t,r){u[0]=e,t[r]=p[7],t[r+1]=p[6],t[r+2]=p[5],t[r+3]=p[4],t[r+4]=p[3],t[r+5]=p[2],t[r+6]=p[1],t[r+7]=p[0]}function v(e,t){return p[0]=e[t],p[1]=e[t+1],p[2]=e[t+2],p[3]=e[t+3],p[4]=e[t+4],p[5]=e[t+5],p[6]=e[t+6],p[7]=e[t+7],u[0]}function g(e,t){return p[7]=e[t],p[6]=e[t+1],p[5]=e[t+2],p[4]=e[t+3],p[3]=e[t+4],p[2]=e[t+5],p[1]=e[t+6],p[0]=e[t+7],u[0]}return"undefined"!=typeof Float32Array?(s=new Float32Array([-0]),c=128===(l=new Uint8Array(s.buffer))[3],e.writeFloatLE=c?n:i,e.writeFloatBE=c?i:n,e.readFloatLE=c?o:a,e.readFloatBE=c?a:o):(e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)),"undefined"!=typeof Float64Array?(u=new Float64Array([-0]),f=128===(p=new Uint8Array(u.buffer))[7],e.writeDoubleLE=f?y:m,e.writeDoubleBE=f?m:y,e.readDoubleLE=f?v:g,e.readDoubleBE=f?g:v):(e.writeDoubleLE=h.bind(null,writeUintLE,0,4),e.writeDoubleBE=h.bind(null,writeUintBE,4,0),e.readDoubleLE=d.bind(null,readUintLE,0,4),e.readDoubleBE=d.bind(null,readUintBE,4,0)),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule((function(e,t){var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:191<n&&n<224?o[a++]=(31&n)<<6|63&e[t++]:239<n&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((i=i||[]).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-o}})),pool_1=pool;function pool(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||i<r)return e(r);n<a+r&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++n&&(n=0))),new LongBits(r,n)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule((function(e,t){var r=t;function n(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=aspromise,r.base64=base64_1,r.EventEmitter=eventemitter,r.float=float_1,r.inquire=inquire_1,r.utf8=utf8_1,r.pool=pool_1,r.LongBits=longbits,r.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||0<(Array.isArray(r)?r.length:Object.keys(r).length))},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;-1<r;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},r.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}})),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;127<e;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function(e){var t,r=e.length>>>0;return r?(minimal.isString(e)&&(t=Writer.alloc(r=base64.length(e)),base64.decode(e,t,0),e=t),this.uint32(r)._push(writeBytes,r,e)):this._push(writeByte,1,0)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?minimal.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&"set"===minimal.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter$1.writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=minimal.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array},fU;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(fU=4294967295,function(){if(fU=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return fU;if(fU=(fU|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return fU;if(fU=(fU|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return fU;if(fU=(fU|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return fU;if(fU=(fU|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return fU;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return fU}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return minimal.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule((function(e,t){t.Service=service})),roots={},indexMinimal=createCommonjsModule((function(e,t){var r=t;r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,(r.configure=function(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)})()})),minimal$1=indexMinimal;minimal$1.util.Long=long_1,minimal$1.configure(),VectorTileFeature$1.prototype.loadGeometry=function(e){var t=this._pbf;t.pos=this._geometry;for(var r,n,i=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,c=[];t.pos<i;)if(a<=0&&(o=7&(n=t.readVarint()),a=n>>3),a--,1===o||2===o)s+=t.readSVarint(),l+=t.readSVarint(),1===o&&(r&&c.push(r),r=[]),r.push([s*e,l*e]);else{if(7!==o)throw new Error("unknown command "+o);r&&r.push(r[0].slice())}return r&&c.push(r),c};var MAX_SAFE_INTEGER=long_1.fromNumber(Number.MAX_SAFE_INTEGER,!0),MIN_SAFE_INTEGER=long_1.fromNumber(Number.MIN_SAFE_INTEGER,!1);function readLong(e,t,r){t.pos=e.pos;var n=r.call(t);return e.pos=t.pos,long_1.isLong(n)?0<n.comp(MAX_SAFE_INTEGER)||n.comp(MIN_SAFE_INTEGER)<0?n.toString():n.toNumber():n}var VectorTileLayer=function(){function e(t,r){_classCallCheck(this,e),this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],this._protobufjsReader=minimal$1.Reader.create(t.buf),t.readFields(readLayer,this,r),this.length=this._features.length}return _createClass(e,[{key:"feature",value:function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature$1(this._pbf,t,this.extent,this._keys,this._values)}}]),e}();function readLayer(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(readValueMessage(r,t._protobufjsReader))}function readValueMessage(e,t){for(var r=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;r=1==i?e.readString():2==i?e.readFloat():3==i?e.readDouble():4==i?readLong(e,t,t.int64):5==i?readLong(e,t,t.uint64):6==i?readLong(e,t,t.sint64):7==i?e.readBoolean():null}return r}var VectorTile=function e(t,r){_classCallCheck(this,e),this.layers=t.readFields(readTile,{},r)};function readTile(e,t,r){var n;3!==e||(n=new VectorTileLayer(r,r.readVarint()+r.pos)).length&&(t[n.name]=n)}function getLayersFromMVT(e){var t={};for(var r in e.layers){for(var n=e.layers[r],i=[],o=Geo$1.tile_scale/n.extent,a=0,s=n.length;a<s;a++){var l=n.feature(a),c=VectorTileFeature$1.types[l.type],u=l.loadGeometry(o),p=null;switch(c){case"Point":p=decodePoint({coordinates:u});break;case"LineString":p=1===u.length?{type:c,coordinates:u[0]}:{type:"MultiLineString",coordinates:u};break;case"Polygon":p=decodeMultiPolygon({coordinates:u})}p&&p.coordinates&&i.push({type:"Feature",geometry:p,properties:l.properties})}t[r]={type:"FeatureCollection",features:i}}return t}var GeomType={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function parseGeoJSONVectorTile(e){var t=[],r=e&&e.features;if(r)for(var n=0,i=r.length;n<i;n++){var o=r[n],a=o.type,s=void 0;switch(a){case GeomType.POINT:s={type:"MultiPoint",coordinates:o.geometry.map((function(e){return e.slice()}))};break;case GeomType.LINESTRING:case GeomType.POLYGON:if(s={type:"MultiLineString",coordinates:o.geometry.map((function(e){return e.map((function(e){return e.slice()}))}))},a===GeomType.POLYGON&&null==(s=decodeMultiPolygon(s)))continue;break;default:continue}t.push({id:o.id,type:"Feature",geometry:s,properties:o.tags})}return{type:"FeatureCollection",features:t}}function decodeMultiPolygon(e){for(var t,r=[],n=[],i=0,o=e.coordinates.length;i<o;i++){var a=e.coordinates[i],s=Geo$1.ringWinding(a);null!=s&&(s===(t=t||s)&&n.length&&(r.push(n),n=[]),n.push(a))}return 0<n.length&&r.push(n),1===r.length?(e.type="Polygon",e.coordinates=r[0]):1<r.length?(e.type="MultiPolygon",e.coordinates=r):e=null,e}function decodePoint(e){var t=e.coordinates.length;if(1<t){e.type="MultiPoint";for(var r=[],n=0;n<t;n++)r.push(e.coordinates[n][0]);e.coordinates=r}else e.type="Point",e.coordinates=e.coordinates[0][0];return e}var EMPTY_FEATURE_COLLECTION={type:"FeatureCollection",features:[]},MVTSource=function(){_inherits(t,MapsJsSource);var e=_createSuper(t);function t(r,n){return _classCallCheck(this,t),r.tiled=!0,e.call(this,r,n)}return _createClass(t,[{key:"fetchTile",value:function(e,t,r){return this.provider?this.provider.requestTileAsPromise(e,t,r).then((function(e){return e.data})):Promise.resolve()}},{key:"_load",value:function(e){var t=this,r=Geo$1.wrapTile(e.coords,{x:!0,y:!0}),n=r.x,i=r.y,o=r.z;return WorkerBroker.postMessage(this.target_name+".fetchTile",n,i,o).then((function(r){var n;return r instanceof ArrayBuffer?(n=new pbf(new Uint8Array(r)),e.source_data.layers=getLayersFromMVT(new VectorTile(n))):r?e.source_data.error=r:e.source_data.layers={_default:EMPTY_FEATURE_COLLECTION},t._postProcessTile(e),e}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),t}();DataSource.register(MVTSource,"MVT"),DataSource.register(MVTSource,"OMV");var csscolorparser=createCommonjsModule((function(e,t){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:255<e?255:e}function i(e){return e<0?0:1<e?1:e}function o(e){return"%"===e[e.length-1]?n(parseFloat(e)/100*255):n(parseInt(e))}function a(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,r){return r<0?r+=1:1<r&&--r,6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in r)return r[i].slice();if("#"===i[0])return 4===i.length?0<=(t=parseInt(i.substr(1),16))&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&0<=(t=parseInt(i.substr(1),16))&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=i.indexOf("("),c=i.indexOf(")");if(-1!==l&&c+1===i.length){var u=i.substr(0,l),p=i.substr(l+1,c-(l+1)).split(","),f=1;switch(u){case"rgba":if(4!==p.length)return null;f=a(p.pop());case"rgb":return 3!==p.length?null:[o(p[0]),o(p[1]),o(p[2]),f];case"hsla":if(4!==p.length)return null;f=a(p.pop());case"hsl":if(3!==p.length)return null;var h=(parseFloat(p[0])%360+360)%360/360,d=a(p[1]),y=a(p[2]),m=y<=.5?y*(d+1):y+d-y*d,v=2*y-m;return[n(255*s(v,m,h+1/3)),n(255*s(v,m,h)),n(255*s(v,m,h-1/3)),f];default:return null}}return null}}catch(e){}})),csscolorparser_1=csscolorparser.parseCSSColor,StyleParser={},clampPositive=function(e){return Math.max(e,0)},noNaN=function(e){return isNaN(e)?0:e},parseNumber=function(e){return Array.isArray(e)?e.map(parseFloat).map(noNaN):noNaN(parseFloat(e))},parsePositiveNumber=function(e){return Array.isArray(e)?e.map(parseNumber).map(clampPositive):clampPositive(parseNumber(e))};Object.assign(StyleParser,{clampPositive:clampPositive,noNaN:noNaN,parseNumber:parseNumber,parsePositiveNumber:parsePositiveNumber}),StyleParser.wrapFunction=function(e){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(e," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},StyleParser.zeroPair=Object.freeze([0,0]),StyleParser.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},StyleParser.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},StyleParser.getFeatureParseContext=function(e,t,r,n){return{feature:e,tile:t,global:r,sources:n,zoom:t.style_zoom,geometry:Geo$1.geometryType(e.geometry.type),meters_per_pixel:t.meters_per_pixel,meters_per_pixel_sq:t.meters_per_pixel_sq,units_per_meter_overzoom:t.units_per_meter_overzoom}};var CACHE_TYPE={STATIC:0,DYNAMIC:1,ZOOM:2};StyleParser.CACHE_TYPE=CACHE_TYPE,StyleParser.createPropertyCache=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=e){if(e.value)return{value:e.value,zoom:e.zoom?{}:null,type:e.type};var r={value:e,type:CACHE_TYPE.STATIC};return Array.isArray(r.value)&&Array.isArray(r.value[0])?(r.zoom={},r.type=CACHE_TYPE.ZOOM):"function"==typeof r.value&&(r.type=CACHE_TYPE.DYNAMIC),"function"==typeof t&&(r.zoom?r.value=r.value.map((function(e,r){return[e[0],t(e[1],r)]})):"function"!=typeof r.value&&(r.value=t(r.value,0))),r}},StyleParser.createColorPropertyCache=function(e){return StyleParser.createPropertyCache(e,(function(e){return"Style.color.pseudoRandomColor"===e?Utils$1.stringToFunction(StyleParser.wrapFunction(StyleParser.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===e?StyleParser.macros["Style.color.randomColor"]:e}))};var isPercent=function(e){return"string"==typeof e&&"%"===e[e.length-1]},isRatio=function(e){return"auto"===e},isComputed=function(e){return isPercent(e)||isRatio(e)},dualRatioError="'size' can specify either width or height as derived from aspect ratio, but not both";StyleParser.createPointSizePropertyCache=function(e){var t=null,r=null;if(isPercent(e))t=[!0];else if(Array.isArray(e))if(Array.isArray(e[0])){if(e.some((function(e){return Array.isArray(e[1])?e[1].some((function(e){return isComputed(e)})):isPercent(e[1])}))&&(t=e.map((function(e){return Array.isArray(e[1])?e[1].map((function(e){return isPercent(e)})):isPercent(e[1])})),(r=e.map((function(e){return Array.isArray(e[1])&&e[1].map((function(e){return isRatio(e)}))}))).some((function(e){return Array.isArray(e)&&e.every((function(e){return e}))}))))throw dualRatioError}else if(e.some(isComputed)&&(t=[e.map(isPercent)],(r=[e.map(isRatio)])[0].every((function(e){return e}))))throw dualRatioError;return t?((e={value:e}).has_pct=t,e.has_ratio=r,e.sprites={}):e=StyleParser.createPropertyCache(e,parsePositiveNumber),e},StyleParser.evalCachedPointSizeProperty=function(e,t,r){return e.has_pct||e.has_ratio?t?(e.sprites[t.sprite]||(e.sprites[t.sprite]=StyleParser.createPropertyCache(e.value,(function(r,n){return Array.isArray(r)?(r=r.map((function(t,r){return e.has_ratio[n][r]?t:parsePositiveNumber(t)})).map((function(r,i){return e.has_pct[n][i]?t.css_size[i]*r/100:r})),e.has_ratio[n][0]?r[0]=r[1]*t.aspect:e.has_ratio[n][1]&&(r[1]=r[0]/t.aspect)):(r=parsePositiveNumber(r),r=e.has_pct[n]?t.css_size.map((function(e){return e*r/100})):[r,r]),r}))),StyleParser.evalCachedProperty(e.sprites[t.sprite],r)):void 0:StyleParser.evalCachedProperty(e,r)},StyleParser.evalCachedProperty=function(e,t){if(null!=e)return e.dynamic?e.dynamic(t):e.static?e.static:e.zoom&&e.zoom[t.zoom]?e.zoom[t.zoom]:"function"!=typeof e.value?Array.isArray(e.value)&&Array.isArray(e.value[0])?(e.zoom=e.zoom||{},e.zoom[t.zoom]=Utils$1.interpolate(t.zoom,e.value),e.zoom[t.zoom]):(e.static=e.value,e.static):(e.dynamic=e.value,e.dynamic(t))},StyleParser.convertUnits=function(e,t){if(null!=e.val)return"px"===e.units?e.val*Geo$1.metersPerPixel(t.zoom):e.val;if("string"==typeof e)"px"===e.trim().slice(-2)?(e=parseNumber(e),e*=Geo$1.metersPerPixel(t.zoom)):e=parseNumber(e);else if(Array.isArray(e))return Array.isArray(e[0])?e.map((function(e){return[e[0],StyleParser.convertUnits(e[1],t)]})):e.map((function(e){return StyleParser.convertUnits(e,t)}));return e},StyleParser.parseUnits=function(e){var t={val:parseNumber(e)};return 0!==t.val&&"string"==typeof e&&"px"===e.trim().slice(-2)&&(t.units="px"),t},StyleParser.evalCachedDistanceProperty=function(e,t){return e.dynamic?e.dynamic(t):e.zoom&&e.zoom[t.zoom]?e.zoom[t.zoom]:"function"!=typeof e.value?e.zoom?(e.zoom[t.zoom]=Utils$1.interpolate(t.zoom,e.value,(function(e){return StyleParser.convertUnits(e,t)})),e.zoom[t.zoom]):StyleParser.convertUnits(e.value,t):(e.dynamic=e.value,e.dynamic(t))},StyleParser.string_colors={},StyleParser.colorForString=function(e){if(StyleParser.string_colors[e])return StyleParser.string_colors[e];var t=null;return"none"!==e&&((t=csscolorparser.parseCSSColor(e))&&4===t.length?(t[0]/=255,t[1]/=255,t[2]/=255):t=StyleParser.defaults.color),StyleParser.string_colors[e]=t},StyleParser.evalCachedColorProperty=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e.dynamic){var r=e.dynamic(t);return"string"==typeof r&&(r=StyleParser.colorForString(r)),r&&null==r[3]&&(r[3]=1),r}if(e.static)return e.static;if(e.zoom&&e.zoom[t.zoom])return e.zoom[t.zoom];if("function"==typeof e.value){e.dynamic=e.value;var n=e.dynamic(t);return"string"==typeof n&&(n=StyleParser.colorForString(n)),n&&null==n[3]&&(n[3]=1),n}if("string"==typeof e.value)return e.static=StyleParser.colorForString(e.value),e.static;if(e.zoom){if(!e.zoom_preprocessed){for(var i=0;i<e.value.length;i++){var o=e.value[i];o&&"string"==typeof o[1]&&(o[1]=StyleParser.colorForString(o[1]))}e.zoom_preprocessed=!0}return e.zoom[t.zoom]=Utils$1.interpolate(t.zoom,e.value),e.zoom[t.zoom][3]=e.zoom[t.zoom][3]||1,e.zoom[t.zoom]}return e.static=e.value.map((function(e){return e})),e.static&&null==e.static[3]&&(e.static[3]=1),e.static},StyleParser.parseColor=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e&&(e=e(t)),"string"==typeof e)e=StyleParser.colorForString(e);else if(Array.isArray(e)&&Array.isArray(e[0])){for(var r=0;r<e.length;r++){var n=e[r];"string"==typeof n[1]&&(n[1]=StyleParser.colorForString(n[1]))}t.zoom&&(e=Utils$1.interpolate(t.zoom,e))}return Array.isArray(e)?null==(e=e.map((function(e){return e})))[3]&&(e[3]=1):e=[0,0,0,1],e},StyleParser.calculateOrder=function(e,t){return"function"==typeof e?e=e(t):"string"==typeof e&&(e=t.feature.properties[e]?t.feature.properties[e]:parsePositiveNumber(e)),e},StyleParser.evalProperty=function(e,t){return"function"==typeof e?e(t):e};var RepeatGroup=function(){function e(t,r){_classCallCheck(this,e),this.key=t,this.repeat_dist=r,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _createClass(e,[{key:"check",value:function(e){for(var t=e.position,r=0;r<this.positions.length;r++){var n=this.positions[r],i=t[0]-n[0],o=t[1]-n[1],a=i*i+o*o;if(a<this.repeat_dist_sq)return{dist_sq:a,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(e){e&&e.position&&this.positions.push(e.position)}}],[{key:"clear",value:function(e){this.groups[e]={}}},{key:"check",value:function(e,t,r){if(t.repeat_distance&&t.repeat_group&&this.groups[r][t.repeat_group])return this.groups[r][t.repeat_group].check(e)}},{key:"add",value:function(t,r,n){r.repeat_distance&&r.repeat_group&&(null==this.groups[n][r.repeat_group]&&(this.groups[n][r.repeat_group]=new e(r.repeat_group,r.repeat_distance*r.repeat_scale)),this.groups[n][r.repeat_group].add(t))}}]),e}();RepeatGroup.groups={};var GridIndex=function(){function e(t,r,n){_classCallCheck(this,e);var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(r/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=r,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}return _createClass(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}},{key:"insertCircleList",value:function(e,t){for(var r=0;r<t.length-2;r+=3)this.insertCircle("".concat(e,"/").concat(r),t[r],t[r+1],t[r+2])}},{key:"_insertBoxCell",value:function(e,t,r,n,i,o){this.boxCells[i].push(o)}},{key:"_insertCircleCell",value:function(e,t,r,n,i,o){this.circleCells[i].push(o)}},{key:"_query",value:function(e,t,r,n,i,o){if(r<0||e>this.width||n<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:c-p,y1:u-p,x2:c+p,y2:u+p})}return o?a.filter(o):a}var f={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,r,n,this._queryCell,a,f,o),i?0<a.length:a}},{key:"_queryCircle",value:function(e,t,r,n,i){var o=e-r,a=e+r,s=t-r,l=t+r;if(a<0||o>this.width||l<0||s>this.height)return!n&&[];var c=[],u={hitTest:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,c,u,i),n?0<c.length:c}},{key:"query",value:function(e,t,r,n,i){return this._query(e,t,r,n,!1,i)}},{key:"hitTest",value:function(e,t,r,n,i){return this._query(e,t,r,n,!0,i)}},{key:"hitTestCircle",value:function(e,t,r,n){return this._queryCircle(e,t,r,!0,n)}},{key:"hitTestCircleList",value:function(e,t){for(var r=0;r<e.length-2;r+=3)if(this.hitTestCircle(e[r],e[r+1],e[r+2],t))return!0;return!1}},{key:"_queryCell",value:function(e,t,r,n,i,o,a,s){var l=a.seenUids,c=this.boxCells[i];if(null!==c){var u,p=this.bboxes,f=_createForOfIteratorHelper(c);try{for(f.s();!(u=f.n()).done;){var h=u.value;if(!l.box[h]){l.box[h]=!0;var d=4*h;if(e<=p[2+d]&&t<=p[3+d]&&r>=p[0+d]&&n>=p[1+d]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:p[d],y1:p[1+d],x2:p[2+d],y2:p[3+d]})}}}}catch(e){f.e(e)}finally{f.f()}}var y=this.circleCells[i];if(null!==y){var m,v=this.circles,g=_createForOfIteratorHelper(y);try{for(g.s();!(m=g.n()).done;){var b=m.value;if(!l.circle[b]){l.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(v[_],v[1+_],v[2+_],e,t,r,n)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var w=v[_],x=v[1+_],E=v[2+_];o.push({key:this.circleKeys[b],x1:w-E,y1:x-E,x2:w+E,y2:x+E})}}}}catch(e){g.e(e)}finally{g.f()}}}},{key:"_queryCellCircle",value:function(e,t,r,n,i,o,a,s){var l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){var p,f=this.bboxes,h=_createForOfIteratorHelper(u);try{for(h.s();!(p=h.n()).done;){var d=p.value;if(!c.box[d]){c.box[d]=!0;var y=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,f[0+y],f[1+y],f[2+y],f[3+y])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}}catch(e){h.e(e)}finally{h.f()}}var m=this.circleCells[i];if(null!==m){var v,g=this.circles,b=_createForOfIteratorHelper(m);try{for(b.s();!(v=b.n()).done;){var _=v.value;if(!c.circle[_]){c.circle[_]=!0;var w=3*_;if(this._circlesCollide(g[w],g[1+w],g[2+w],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}}catch(e){b.e(e)}finally{b.f()}}}},{key:"_forEachCell",value:function(e,t,r,n,i,o,a,s){for(var l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),p=this._convertToYCellCoord(n),f=l;f<=u;f++)for(var h=c;h<=p;h++){var d=this.xCellCount*h+f;if(i.call(this,e,t,r,n,d,o,a,s))return}}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,r,n,i,o){var a=n-e,s=i-t,l=r+o;return a*a+s*s<l*l}},{key:"_circleAndRectCollide",value:function(e,t,r,n,i,o,a){var s=(o-n)/2,l=Math.abs(e-(n+s));if(s+r<l)return!1;var c=(a-i)/2,u=Math.abs(t-(i+c));if(c+r<u)return!1;if(l<=s||u<=c)return!0;var p=l-s,f=u-c;return p*p+f*f<=r*r}}]),e}(),CollisionUtils={toDiscardLabel:function(e,t,r,n){var i;if(n&&(i=function(e){return e!==n.id}),!t){if("point"===e.type&&!e.angle){var o=e.getAABB(),a=o.left,s=o.top,l=o.right,c=o.bottom;if(r.hitTest(a,-s,l,-c,i)){if(Array.isArray(e.layout.anchor))for(var u=1;u<e.layout.anchor.length;u++){e.setAnchor(e.layout.anchor[u]);var p=e.getAABB(),f=p.left,h=p.top,d=p.right,y=p.bottom;if(!r.hitTest(f,-h,d,-y,i))return!1}return!0}return!1}var m=e.getBoundingCircles();return r.hitTestCircleList(m,i)}if(t){if("point"===e.type&&!e.isFlat()){var v=e.getScreenSpaceBoundingBox(),g=v.left,b=v.top,_=v.right,w=v.bottom;return r.hitTest(g,b,_,w,i)}var x=e.getBoundingCircles();return r.hitTestCircleList(x,i)}return!1},addLabel:function(e,t,r){var n,i,o,a,s,l,c,u,p,f,h,d,y=e.id;e.placed=!0,t||("point"!==e.type||e.angle?(n=e.getBoundingCircles(),r.insertCircleList(y,n)):(o=(i=e.getAABB()).left,a=i.top,s=i.right,l=i.bottom,r.insert(y,o,-a,s,-l))),t&&("point"!==e.type||e.isFlat()?(c=e.getBoundingCircles(),r.insertCircleList(y,c)):(p=(u=e.getScreenSpaceBoundingBox()).left,f=u.top,h=u.right,d=u.bottom,r.insert(y,p,f,h,d)))}},Collision={tiles:{},startTile:function(e,t){var r=1<arguments.length&&void 0!==t?t:{},n=r.apply_repeat_groups,i=void 0===n||n,o=r.return_hidden,a=void 0!==o&&o,s=r.grid_index,l=void 0===s?null:s,c=this.tiles[e]={grid_index:l||new GridIndex(Geo$1.tile_scale,Geo$1.tile_scale,240),objects:{},labels:{},styles:{},repeat:i,return_hidden:a};null==c.complete&&(c.complete=new Promise((function(e,t){c.resolve=e,c.reject=t})))},resetTile:function(e){delete this.tiles[e]},abortTile:function(e){this.tiles[e]&&this.tiles[e].resolve&&this.tiles[e].resolve([]),this.resetTile(e)},addStyle:function(e,t){this.tiles[t].styles[e]=!0},collide:function(e,t,r){var n=this.tiles[r];if(!n)return Promise.resolve([]);for(var i=n.objects,o=0;o<e.length;o++){var a=e[o],s=a.label.layout.priority;i[s]=i[s]||{},i[s][t]=i[s][t]||[],i[s][t].push(a)}return delete n.styles[t],0===Object.keys(n.styles).length&&this.endTile(r),n.complete.then((function(){return n.resolve=null,n.labels[t]||[]}))},endTile:function(e){var t=this.tiles[e],r=t.labels;t.repeat&&RepeatGroup.clear(e);for(var n=Object.keys(t.objects).sort((function(e,t){return e-t})),i=0;i<n.length;i++){var o=t.objects[n[i]];if(o)for(var a in o){var s=o[a];r[a]=r[a]||[];for(var l=0;l<s.length;l++){var c=s[l];this.canBePlaced(c,e,c.linked,t)?c.linked?this.canBePlaced(c.linked,e,c,t)?(c.show=!0,(c.label.breach||c.linked.label.breach)&&(c.label.breach=!0,c.linked.label.breach=!0),r[a].push(c),this.place(c,e,t),this.place(c.linked,e,t)):t.return_hidden&&(c.show=!1,r[a].push(c)):(c.show=!0,r[a].push(c),this.place(c,e,t)):t.return_hidden&&(c.show=!1,r[a].push(c))}}}delete this.tiles[e],t.resolve()},canBePlaced:function(e,t,r,n){var i=2<arguments.length&&void 0!==r?r:null,o=(3<arguments.length&&void 0!==n?n:{}).repeat,a=void 0===o||o,s=e.label,l=e.label.layout;if(null!==s.placed)return s.placed;var c=this.tiles[t].grid_index;if(l.collide&&CollisionUtils.toDiscardLabel(s,"main"===t,c,i&&i.label))l.collide&&(s.placed=!1);else{if(!a||!RepeatGroup.check(s,l,t))return!0;s.placed=!1}return s.placed},place:function(e,t,r){var n=e.label,i=r.repeat,o=void 0===i||i;null===n.placed&&(o&&RepeatGroup.add(n,n.layout,t),CollisionUtils.addLabel(n,"main"===t,this.tiles[t].grid_index))}},Task={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:debounce((function(){Task.ignore_user_moving_view=!0}),0,500),add:function(e){e.id=Task.id++,e.max_time=e.max_time||Task.max_time,e.pause_factor=e.pause_factor||1;var t=new Promise((function(t,r){e.resolve=t,e.reject=r}));return e.promise=t,e.total_elapsed=0,e.stats={calls:0},this.queue.push(e),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Task.max_time&&this.process(e),e.promise},remove:function(e){var t=this.queue.indexOf(e);-1<t&&this.queue.splice(t,1)},process:function(e){if(!this.state.user_moving_view||!1!==e.user_moving_view||this.ignore_user_moving_view)return e.pause?(e.pause--,!0):(e.stats.calls++,e.start_time=performance.now(),e.run(e));Task._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var e=0;e<this.queue.length;e++){var t=this.queue[e];if(!0!==this.process(t)&&(t.pause||(t.pause=t.elapsed>t.max_time?t.pause_factor:0),t.total_elapsed+=t.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Task.max_time){this.start_time=null;break}}},finish:function(e,t){return e.elapsed=performance.now()-e.start_time,e.total_elapsed+=e.elapsed,this.remove(e),e.resolve(t),e.promise},cancel:function(e){var t;e.cancel instanceof Function&&(t=e.cancel(e)),e.resolve(t||{})},shouldContinue:function(e){return e.elapsed=performance.now()-e.start_time,this.elapsed=performance.now()-this.start_time,e.elapsed<e.max_time&&this.elapsed<Task.max_time},removeForTile:function(e){for(var t=this.queue.length-1;0<=t;t--)this.queue[t].tile_id===e&&(this.cancel(this.queue[t]),this.queue.splice(t,1))},setState:function(e){this.state=e},hasPendingTasks:function(){return!!this.queue.length}};function sliceOptions(e){return{coords:e.coords,uid:e.uid,filtering:e.filtering,sprites:e.sprites,url:e.url,element:e.element,data:e.data,width:e.width,height:e.height,density:e.density,repeat:e.repeat,TEXTURE_WRAP_S:e.TEXTURE_WRAP_S,TEXTURE_WRAP_T:e.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:e.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:e.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Texture=function(){function e(t,r,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,e),i=sliceOptions(i),this.gl=t,this.texture=t.createTexture(),this.texture&&(this.valid=!0),this.manager=n,this.bind(),this.name=r,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=i.filtering,this.density=i.density||1,this.sprites=i.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:r},i)),this.load(i),log("trace","creating Texture ".concat(this.name))}return _createClass(e,[{key:"destroy",value:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).force;0<this.retain_count&&!t?log("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,log("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&log("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.valid&&(this.manager.activeUnit!==t&&(this.gl.activeTexture(this.gl.TEXTURE0+t),this.manager.activeUnit=t,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(e){var t=this;return e?(this.loading=null,"string"==typeof e.url?(this.config_type="url",this.setUrl(e.url,e)):e.element?(this.config_type="element",this.setElement(e.element,e)):e.data&&e.width&&e.height&&(this.config_type="data",this.setData(e.width,e.height,e.data,e)),this.loading=this.loading&&this.loading.then((function(){return t.calculateSprites(),t}))||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(e,t){var r=this,n=1<arguments.length&&void 0!==t?t:{};if(this.valid)return this.url=e,this.loading=new Promise((function(e,t){var i=new Image;i.onload=function(){try{r.setElement(i,n)}catch(t){r.loaded=!1,log("warn","Texture '".concat(r.name,"': failed to load url: '").concat(r.url,"'"),t,n),r.manager.trigger("warning",{message:"Failed to load texture from ".concat(r.url),error:t,texture:n})}r.loaded=!0,e(r)},i.onerror=function(t){r.loaded=!1,log("warn","Texture '".concat(r.name,"': failed to load url: '").concat(r.url,"'"),t,n),r.manager.trigger("warning",{message:"Failed to load texture from ".concat(r.url),error:t,texture:n}),e(r)},Utils$1.isSafari()&&"data:"===r.url.slice(0,5)||(i.crossOrigin="anonymous"),i.src=r.url})),this.loading}},{key:"setData",value:function(e,t,r,n){var i=3<arguments.length&&void 0!==n?n:{};return this.width=e,this.height=t,Array.isArray(r)&&(r=new Uint8Array(r)),this.update(r,i),this.setFiltering(i),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(e,t){var r,n=e;return"string"==typeof e&&(e=document.querySelector(e)),e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement?(this.update(e,t),this.setFiltering(t)):(this.loaded=!1,r="the 'element' parameter (`element: ".concat(JSON.stringify(n),"`) must be a CSS "),r+="selector string, or a <canvas>, <image> or <video> object",log("warn","Texture '".concat(this.name,"': ").concat(r),t),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(r),texture:t})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:{};this.valid&&(this.bind(),e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof HTMLImageElement&&e.complete?(this.width=e.width,this.height=e.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==r.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)):(this._byte_length=e?e.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(e){var t,r=0<arguments.length&&void 0!==e?e:{};this.valid&&(r.filtering=r.filtering||"linear",t=this.gl,this.bind(),Utils$1.isPowerOf2(this.width)&&Utils$1.isPowerOf2(this.height)?(this.power_of_2=!0,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r.TEXTURE_WRAP_S||r.repeat&&t.REPEAT||t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,r.TEXTURE_WRAP_T||r.repeat&&t.REPEAT||t.CLAMP_TO_EDGE),"mipmap"===r.filtering?(this.filtering="mipmap",t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.generateMipmap(t.TEXTURE_2D)):"linear"===r.filtering?(this.filtering="linear",t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):"nearest"===r.filtering&&(this.filtering="nearest",t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST))):(this.power_of_2=!1,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),"nearest"===r.filtering?(this.filtering="nearest",t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)):(this.filtering="linear",t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var e in this.sprites){var t=this.sprites[e];this.texcoords[e]=this.manager.getTexcoordsForSprite([t[0],t[1]],[t[2],t[3]],[this.width,this.height]),this.sizes[e]=[t[2],t[3]],this.css_sizes[e]=[t[2]/this.density,t[3]/this.density],this.aspects[e]=t[2]/t[3]}}}]),e}();function subscribeMixin(e){var t=[];return Object.assign(e,{subscribe:function(e){-1===t.indexOf(e)&&t.push(e)},unsubscribe:function(e){var r=t.indexOf(e);-1<r&&t.splice(r,1)},unsubscribeAll:function(){t=[]},trigger:function(e){for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.forEach((function(t){if("function"==typeof t[e])try{t[e].apply(t,n)}catch(t){log("warn","Caught exception in listener for event '".concat(e,"':"),t)}}))},hasSubscribersFor:function(e){var r=!1;return t.forEach((function(t){"function"==typeof t[e]&&(r=!0)})),r}})}var TextureManager=function(){function e(t){_classCallCheck(this,e),this.default=e.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=t,WorkerBroker.addTarget("Texture"+this.scene_id,this),subscribeMixin(this)}return _createClass(e,[{key:"create",value:function(t,r,n){for(var i=e.matchers_,o=0;o<i.length;o++){var a=i[o][0],s=i[o][1];if(s&&s(n))return new a(t,r,this,n)}return new Texture(t,r,this,n)}},{key:"retain",value:function(e){this.textures[e]&&this.textures[e].retain()}},{key:"release",value:function(e){this.textures[e]&&this.textures[e].release()}},{key:"getRetainCount",value:function(e){if(this.textures[e])return this.textures[e].retain_count}},{key:"getByteLength",value:function(e){if(this.textures[e])return this.textures[e].getByteLength()}},{key:"destroy",value:function(e){var t=this;Object.keys(this.textures).forEach((function(r){var n=t.textures[r];r!==t.default&&n.gl===e&&n.destroy({force:!0})}))}},{key:"getSpriteInfo",value:function(e,t){var r=this.textures[e];return r&&{size:r.sizes[t],css_size:r.css_sizes[t],aspect:r.aspects[t],texcoords:r.texcoords[t]}}},{key:"getTexcoordsForSprite",value:function(e,t,r){var n=r[1]-e[1]-t[1];return[e[0]/r[0],n/r[1],(t[0]+e[0])/r[0],(t[1]+n)/r[1]]}},{key:"createFromObject",value:function(e,t){var r=[];if(t)for(var n in t){var i,o=t[n];this.changed(n,o)&&(i=this.create(e,n,o),r.push(i.loading))}return Promise.all(r)}},{key:"createDefault",value:function(e){return this.create(e,this.default)}},{key:"changed",value:function(e,t){var r=this.textures[e];if(r){if("element"===r.config_type||null!=t.element)return!0;if(t=sliceOptions(t),this.texture_configs[e]===JSON.stringify(Object.assign({name:e},t)))return!1}return!0}},{key:"getInfo",value:function(e){var t=this;if(e=e||Object.keys(this.textures),Array.isArray(e))return Promise.all(e.map((function(e){return t.getInfo(e)})));var r=this.textures[e];return r?(r.loading||Promise.resolve(r)).then((function(){return{name:r.name,width:r.width,height:r.height,density:r.density,sprites:r.sprites,texcoords:r.texcoords,sizes:r.sizes,css_sizes:r.css_sizes,aspects:r.aspects,filtering:r.filtering,power_of_2:r.power_of_2,valid:r.valid}})):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(e){var t=this;return Thread.is_main?Promise.all(e.map((function(e){var r=t.textures[e];return r&&r.loading||Promise.resolve()}))).then((function(){return t.textures})):WorkerBroker.postMessage("Texture"+this.scene_id+".getInfo",e).then((function(e){return e.forEach((function(e){t.textures[e.name]=e})),t.textures}))}},{key:"getMaxTextureSize",value:function(e){return e.getParameter(e.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(t,r){var n=e.matchers_;if(!(t instanceof Function&&r instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(t),n.push([t,r])}},{key:"deRegister",value:function(t){for(var r=e.matchers_,n=0;n<r.length;n++)r[n][0]===t&&r.splice(n,1)}}]),e}();TextureManager.DEFAULT_TEXTURE_NAME="__default",TextureManager.matchers_=[];var Registry={};function getTextureManager(e){return Registry[e]||(Registry[e]=new TextureManager(e)),Registry[e]}var transformMat4_1=transformMat4;function transformMat4(e,t,r){var n=t[0],i=t[1],o=t[2],a=(a=r[3]*n+r[7]*i+r[11]*o+r[15])||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}var normalFromMat4_1=normalFromMat4;function normalFromMat4(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],p=t[9],f=t[10],h=t[11],d=t[12],y=t[13],m=t[14],v=t[15],g=r*s-n*a,b=r*l-i*a,_=r*c-o*a,w=n*l-i*s,x=n*c-o*s,E=i*c-o*l,S=u*y-p*d,k=u*m-f*d,T=u*v-h*d,O=p*m-f*y,A=p*v-h*y,P=f*v-h*m,C=g*P-b*A+_*O+w*T-x*k+E*S;return C?(C=1/C,e[0]=(s*P-l*A+c*O)*C,e[1]=(l*T-a*P-c*k)*C,e[2]=(a*A-s*T+c*S)*C,e[3]=(i*A-n*P-o*O)*C,e[4]=(r*P-i*T+o*k)*C,e[5]=(n*T-r*A-o*S)*C,e[6]=(y*E-m*x+v*w)*C,e[7]=(m*_-d*E-v*b)*C,e[8]=(d*x-y*_+v*g)*C,e):null}var invert_1=invert;function invert(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],p=u*a-s*c,f=-u*o+s*l,h=c*o-a*l,d=r*p+n*f+i*h;return d?(d=1/d,e[0]=p*d,e[1]=(-u*n+i*c)*d,e[2]=(s*n-i*a)*d,e[3]=f*d,e[4]=(u*r-i*l)*d,e[5]=(-s*r+i*o)*d,e[6]=h*d,e[7]=(-c*r+n*l)*d,e[8]=(a*r-n*o)*d,e):null}var identity_1=identity;function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}var multiply_1=multiply;function multiply(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],p=t[8],f=t[9],h=t[10],d=t[11],y=t[12],m=t[13],v=t[14],g=t[15],b=r[0],_=r[1],w=r[2],x=r[3];return e[0]=b*n+_*s+w*p+x*y,e[1]=b*i+_*l+w*f+x*m,e[2]=b*o+_*c+w*h+x*v,e[3]=b*a+_*u+w*d+x*g,b=r[4],_=r[5],w=r[6],x=r[7],e[4]=b*n+_*s+w*p+x*y,e[5]=b*i+_*l+w*f+x*m,e[6]=b*o+_*c+w*h+x*v,e[7]=b*a+_*u+w*d+x*g,b=r[8],_=r[9],w=r[10],x=r[11],e[8]=b*n+_*s+w*p+x*y,e[9]=b*i+_*l+w*f+x*m,e[10]=b*o+_*c+w*h+x*v,e[11]=b*a+_*u+w*d+x*g,b=r[12],_=r[13],w=r[14],x=r[15],e[12]=b*n+_*s+w*p+x*y,e[13]=b*i+_*l+w*f+x*m,e[14]=b*o+_*c+w*h+x*v,e[15]=b*a+_*u+w*d+x*g,e}var translate_1=translate;function translate(e,t,r){var n,i,o,a,s,l,c,u,p,f,h,d,y=r[0],m=r[1],v=r[2];return t===e?(e[12]=t[0]*y+t[4]*m+t[8]*v+t[12],e[13]=t[1]*y+t[5]*m+t[9]*v+t[13],e[14]=t[2]*y+t[6]*m+t[10]*v+t[14],e[15]=t[3]*y+t[7]*m+t[11]*v+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],p=t[8],f=t[9],h=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=p,e[9]=f,e[10]=h,e[11]=d,e[12]=n*y+s*m+p*v+t[12],e[13]=i*y+l*m+f*v+t[13],e[14]=o*y+c*m+h*v+t[14],e[15]=a*y+u*m+d*v+t[15]),e}var scale_1=scale;function scale(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var perspective_1=perspective;function perspective(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e}var identity_1$1=identity$1;function identity$1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var lookAt_1=lookAt;function lookAt(e,t,r,n){var i,o,a,s,l,c,u,p,f,h,d=t[0],y=t[1],m=t[2],v=n[0],g=n[1],b=n[2],_=r[0],w=r[1],x=r[2];return Math.abs(d-_)<1e-6&&Math.abs(y-w)<1e-6&&Math.abs(m-x)<1e-6?identity_1$1(e):(u=d-_,p=y-w,f=m-x,i=g*(f*=h=1/Math.sqrt(u*u+p*p+f*f))-b*(p*=h),o=b*(u*=h)-v*f,a=v*p-g*u,(h=Math.sqrt(i*i+o*o+a*a))?(i*=h=1/h,o*=h,a*=h):a=o=i=0,s=p*a-f*o,l=f*i-u*a,c=u*o-p*i,(h=Math.sqrt(s*s+l*l+c*c))?(s*=h=1/h,l*=h,c*=h):c=l=s=0,e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=p,e[7]=0,e[8]=a,e[9]=c,e[10]=f,e[11]=0,e[12]=-(i*d+o*y+a*m),e[13]=-(s*d+l*y+c*m),e[14]=-(u*d+p*y+f*m),e[15]=1,e)}var copy_1=copy;function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var invert_1$1=invert$1;function invert$1(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],p=t[9],f=t[10],h=t[11],d=t[12],y=t[13],m=t[14],v=t[15],g=r*s-n*a,b=r*l-i*a,_=r*c-o*a,w=n*l-i*s,x=n*c-o*s,E=i*c-o*l,S=u*y-p*d,k=u*m-f*d,T=u*v-h*d,O=p*m-f*y,A=p*v-h*y,P=f*v-h*m,C=g*P-b*A+_*O+w*T-x*k+E*S;return C?(C=1/C,e[0]=(s*P-l*A+c*O)*C,e[1]=(i*A-n*P-o*O)*C,e[2]=(y*E-m*x+v*w)*C,e[3]=(f*x-p*E-h*w)*C,e[4]=(l*T-a*P-c*k)*C,e[5]=(r*P-i*T+o*k)*C,e[6]=(m*_-d*E-v*b)*C,e[7]=(u*E-f*_+h*b)*C,e[8]=(a*A-s*T+c*S)*C,e[9]=(n*T-r*A-o*S)*C,e[10]=(d*x-y*_+v*g)*C,e[11]=(p*_-u*x-h*g)*C,e[12]=(s*k-a*O-l*S)*C,e[13]=(r*O-n*k+i*S)*C,e[14]=(y*b-d*w-m*g)*C,e[15]=(u*w-p*b+f*g)*C,e):null}var transformMat4_1$1=transformMat4$1;function transformMat4$1(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}var normalize_1=normalize$1;function normalize$1(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return 0<a&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a),e}var scale_1$1=scale$1;function scale$1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}var vec3={fromValues:function(e,t,r){var n=new Float64Array(3);return n[0]=e,n[1]=t,n[2]=r,n},transformMat4:transformMat4_1},mat3={normalFromMat4:normalFromMat4_1,invert:invert_1,identity:identity_1},mat4={multiply:multiply_1,translate:translate_1,scale:scale_1,perspective:perspective_1,lookAt:lookAt_1,identity:identity_1$1,copy:copy_1,invert:invert_1$1},vec4={transformMat4:transformMat4_1$1,normalize:normalize_1,scale:scale_1$1},FeatureSelection=function(){function e(t,r){_classCallCheck(this,e),this._gl=t,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var n=getTextureManager(r).create(this._gl,"selection_fbo",{filtering:"nearest"});n.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,n.texture,0);var i=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,i),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,i),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _createClass(e,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var t;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(t=this._gl).clearColor.apply(t,_toConsumableArray(e.defaultColor))}},{key:"getFeatureAt",value:function(t,r,n){var i=r.radius,o=r.top_most_only,a=void 0===o||o;!t||t.x<0||t.y<0||1<t.x||1<t.y?n({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:t,radius:i,top_most_only:a,ttl:a?1:e.MAX_PICKING_TRIES,callback:n})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var e in this._requests)this._requests[e].callback(new Error("cleared")),delete this._requests[e];this._pending_deep_request=null}},{key:"read",value:function(e){if(this.hasPendingRequests()){var t=this._gl;for(var r in t.bindFramebuffer(t.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,e),this._requests)if(this.processRequest(this._requests[r],e))break;t.bindFramebuffer(t.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(t,r){var n,i,o,a=this._gl,s=255,l=t.point,c=t.radius,u=(o=c?(i=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*c.x*this._fbo_size.width),i),y:Math.min(Math.ceil(2*c.y*this._fbo_size.height),i)}):(c={x:0,y:0},{x:1,y:1})).x*o.y*4;if(null==this._pixels||this._pixels.byteLength<u)this._pixels=new Uint8Array(u);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,u);else for(var p=0;p<u;p++)this._pixels[p]=0;a.readPixels(Math.round((l.x-c.x)*this._fbo_size.width),Math.round((1-l.y-c.y)*this._fbo_size.height),o.x,o.y,a.RGBA,a.UNSIGNED_BYTE,this._pixels),t.ttl--;var f=Math.floor(o.x/2),h=Math.floor(o.y/2),d=4*(h*o.x+f),y=this._pixels.slice(d,d+4),m=y[0]+(y[1]<<8)+(y[2]<<16);if(0<m)n=m+(y[3]<<24)>>>0,s=y[3];else if(4<u)for(var v=1/0,g=(d=0,0);g<o.y;g++)for(var b,_=0;_<o.x;_++,d+=4)0<(m=(y=this._pixels.slice(d,d+4))[0]+(y[1]<<8)+(y[2]<<16))&&(b=Math.pow(_-f,2)+Math.pow(g-h,2))<v&&(n=m+(y[3]<<24)>>>0,s=y[3],v=b);if(255!==s){var w=this._getFeatureByKey(n,r);if(t.features||(t.features=[]),!w)return void this._finishRead(t);if(t.features.every((function(e){return e.id!==w.id}))&&t.features.push(w),t.ttl)return this._pending_deep_request=t,e._discardColor(y),this._has_dirty_buffer=!0;this._finishRead(t)}else this._finishRead(t)}},{key:"_finishRead",value:function(t){var r=t.features||e.EMPTY_ARRAY;t.top_most_only||(this._pending_deep_request=null,e._resetDiscardedColors()),delete this._requests[t.id],t.callback({features:r})}},{key:"_getFeatureByKey",value:function(e,t){for(var r=null,n=0;n<t.length;n++){var i=t[n];if(i.selection_data&&(r=i.selection_data[e])){r.tile={coords:i.coords};break}}return r}},{key:"setupDiscards",value:function(t){for(var r=e.MAX_PICKING_TRIES;r--;)t.uniform("4fv","u_selection_discard".concat(r),e._discarded_colors[r]||e.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var e=255&this.map_entry,t=this.map_entry>>8&255,r=this.map_entry>>16&255,n=this.map_prefix;return{key:e+(t<<8)+(r<<16)+(n<<24)>>>0,color:[e/255,t/255,r/255,n/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(e){this.map_prefix=e}},{key:"_discardColor",value:function(e){this._discarded_colors.push([e[0]/255,e[1]/255,e[2]/255,e[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),e}();FeatureSelection._discarded_colors=[],FeatureSelection.map_entry=0,FeatureSelection.map_prefix=0,FeatureSelection.defaultColor=[0,0,0,1],FeatureSelection.MAX_PICKING_TRIES=10,FeatureSelection.EMPTY_ARRAY=Object.freeze([]);var GLSL={parseUniforms:function(e){var t=[];for(var r in e){var n,i=r,o=e[r];if("number"==typeof o)t.push({type:"float",method:"1f",name:r,value:o,key:i,uniforms:e});else if(Array.isArray(o)){if("number"==typeof o[0])2<=o.length&&o.length<=4?t.push({type:"vec"+o.length,method:o.length+"fv",name:r,value:o,key:i,uniforms:e}):4<o.length&&t.push({type:"float[]",method:"1fv",name:r+"[0]",value:o,key:i,uniforms:e});else if("string"==typeof o[0])for(n=0;n<o.length;n++)t.push({type:"sampler2D",method:"1i",name:r+"["+n+"]",value:o[n],key:n,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&2<=o[0].length&&o[0].length<=4)for(n=0;n<o.length;n++)t.push({type:"vec"+o[0].length,method:o[n].length+"fv",name:r+"["+n+"]",value:o[n],key:n,uniforms:o})}else"boolean"==typeof o?t.push({type:"bool",method:"1i",name:r,value:o,key:i,uniforms:e}):"string"==typeof o&&t.push({type:"sampler2D",method:"1i",name:r,value:o,key:i,uniforms:e})}return t},defineVariable:function(e,t){var r,n;if("number"==typeof t)r="float";else if(Array.isArray(t))"number"==typeof t[0]?2<=t.length&&t.length<=4?r="vec"+t.length:(r="float",n=t.length):"string"==typeof t[0]&&(r="sampler2D",n=t.length);else if("boolean"==typeof t)r="bool";else{if("string"!=typeof t)return;r="sampler2D"}var i="";return i+="".concat(r," ").concat(e),n&&(i+="[".concat(n,"]")),i+";\n"},defineUniform:function(e,t){var r=GLSL.defineVariable(e,t);if(r)return"uniform "+r},isUniformDefined:function(e,t){var r=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+e+"\\b","g");return!!t.match(r)},isSymbolReferenced:function(e,t){var r=new RegExp("\\b"+e+"\\b","g");return 0<=t.search(r)},expandVec3:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(e)){if(2!==e.length)return e;t=[].concat(_toConsumableArray(e),[r]).map(parseFloat)}else t=[e,e,e].map(parseFloat);if(t&&t.every((function(e){return"number"==typeof e&&!isNaN(e)})))return t},expandVec4:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(e)){if(3!==e.length)return e;t=[].concat(_toConsumableArray(e),[r]).map(parseFloat)}else t=[e,e,e,r].map(parseFloat);if(t&&t.every((function(e){return"number"==typeof e&&!isNaN(e)})))return t}},extensions=[];function getExtension(e,t){var r=extensions.filter((function(t){return t[0]===e}))[0];return(r=r&&r[1])||(extensions.push([e,{}]),r=extensions[extensions.length-1][1]),r[t]||(r[t]=e.getExtension(t)),r[t]}function hashString(e){var t,r,n=0;if(0===e.length)return n;for(t=0,r=e.length;t<r;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}var stripComments=createCommonjsModule((function(e){var t="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",r=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,n=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,i=e.exports=function(e,t){return e?i.block(i.line(e,t),t):""};i.block=function(e,r){r=r||{};var n=new RegExp("\\/\\*"+t,"gm");return r.safe&&(n=new RegExp("\\/\\*(?!\\*?\\!)"+t,"gm")),e?e.replace(n,""):""},i.line=function(e,t){var i=r;return(t=t||{}).safe&&(i=n),e?e.replace(i,""):""}})),glShaderErrors=parseErrors;function parseErrors(e){e=String(e);for(var t,r=[];t=e.match(/ERROR\:([^\n]+)/);){e=e.slice(t.index+1);var n=(a=t[1].trim()).split(":"),i=n.slice(2).join(":").trim(),o=parseInt(n[0],10),a=parseInt(n[1],10);r.push({message:i,file:o,line:a})}return r}var re_pragma=/^\s*#pragma.*$/gm,re_continue_line=/\\\s*\n/gm,ShaderProgram=function(){function e(t,r,n,i,o){if(_classCallCheck(this,e),o=o||{},this.textureManager=getTextureManager(i),this.gl=t,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!e.polyfills[i]){e.polyfills[i]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(t){e.polyfills[i].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(t,r,n){e.polyfills[i].uniformMatrix3fv.call(this,t,r,new Float32Array(n))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(t){e.polyfills[i].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(t,r,n){e.polyfills[i].uniformMatrix4fv.call(this,t,r,new Float32Array(n))}}}this.defines=Object.assign({},o.defines||{}),this.blocks=Object.assign({},o.blocks||{}),this.block_scopes=Object.assign({},o.block_scopes||{}),this.extensions=o.extensions||[],this.dependent_uniforms=o.uniforms,this.uniforms={},this.attribs={},this.vertex_source=r,this.fragment_source=n,this.id=e.id++,this.name=o.name}return _createClass(e,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(e.current!==this&&this.gl.useProgram(this.program),e.current=this)}},{key:"compile",value:function(){var t=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var r,n=this.checkExtensions(),i=this.buildDefineList(),o=this.buildShaderBlockList();for(var a in o){var s,l,c,u=o[a];!u||Array.isArray(u)&&0===u.length||(r=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+a+"\\s*$","m"),s=this.computed_vertex_source.match(r),l=this.computed_fragment_source.match(r),null==s&&null==l||(c="",u.forEach((function(e){var t="".concat(e.scope,", ").concat(e.key,", ").concat(e.num);c+="\n// tangram-block-start: ".concat(t,"\n"),c+=e.source,c+="\n// tangram-block-end: ".concat(t,"\n")})),null!=s&&(this.computed_vertex_source=this.computed_vertex_source.replace(r,c)),null!=l&&(this.computed_fragment_source=this.computed_fragment_source.replace(r,c)),i["TANGRAM_BLOCK_"+a.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(re_pragma,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_pragma,""),this.ensureUniforms(this.dependent_uniforms);var p=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),f=p&&0<p.precision?"precision highp float;\n":"precision mediump float;\n";i.TANGRAM_VERTEX_SHADER=!0,i.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=f+e.buildDefineString(i)+this.computed_vertex_source,i.TANGRAM_VERTEX_SHADER=!1,i.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=e.buildExtensionString(n)+f+e.buildDefineString(i)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(re_continue_line,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_continue_line,"");try{this.program=e.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(n){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=n).type&&"fragment"!==n.type||(this.shader_errors=n.errors,this.shader_errors.forEach((function(e){e.type=n.type,e.block=t.block(n.type,e.line)}))),n}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var t,r={};for(t in e.defines)r[t]=e.defines[t];for(t in this.defines)r[t]=this.defines[t];return r}},{key:"buildShaderBlockList",value:function(){var t,r,n={};for(t in e.blocks)n[t]=[],Array.isArray(e.blocks[t])?(r=n[t]).push.apply(r,_toConsumableArray(e.blocks[t].map((function(e,r){return{key:t,source:e,num:r,scope:"ShaderProgram"}})))):n[t]=[{key:t,source:e.blocks[t],num:0,scope:"ShaderProgram"}];for(t in this.blocks)if(n[t]=n[t]||[],Array.isArray(this.blocks[t]))for(var i=this.block_scopes&&this.block_scopes[t]||[],o=null,a=0,s=0;s<this.blocks[t].length;s++)i[s]!==o&&(o=i[s],a=0),n[t].push({key:t,source:this.blocks[t][s],num:a,scope:o||this.name}),a++;else n[t].push({key:t,source:this.blocks[t],num:0,scope:this.name});return n}},{key:"ensureUniforms",value:function(e){if(e){var t,r=stripComments(this.computed_vertex_source),n=stripComments(this.computed_fragment_source),i=[],o=[];for(var a in e){var s=GLSL.isUniformDefined(a,r),l=GLSL.isUniformDefined(a,n);if(!s||!l){if(!(t=GLSL.defineUniform(a,e[a])))continue;s||(log("trace","Program ".concat(this.name,": ").concat(a," not defined in vertex shader, injecting: '").concat(t,"'")),i.push(t)),l||(log("trace","Program ".concat(this.name,": ").concat(a," not defined in fragment shader, injecting: '").concat(t,"'")),o.push(t))}}0<i.length&&(this.computed_vertex_source=i.join("\n")+this.computed_vertex_source),0<o.length&&(this.computed_fragment_source=o.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(e,t){var r=!(1<arguments.length&&void 0!==t)||t;if(this.compiled){r&&(this.texture_unit=0);for(var n=GLSL.parseUniforms(e),i=0;i<n.length;i++){var o=n[i];"sampler2D"===o.type?this.setTextureUniform(o.name,o.value):this.uniform(o.method,o.name,o.value)}}}},{key:"saveUniforms",value:function(e){var t=e||this.uniforms;for(var r in t){var n=this.uniforms[r];n&&(n.saved_value=n.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(e){var t=e||this.uniforms;for(var r in t){var n=this.uniforms[r];n&&n.saved_value&&(n.value=n.saved_value,this.updateUniform(n))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(e,t){var r=this.textureManager.textures[t];null!=r?(r.bind(this.texture_unit),this.uniform("1i",e,this.texture_unit),this.texture_unit++):log("warn","Cannot find texture '".concat(t,"'"))}},{key:"uniform",value:function(e,t,r){var n;this.compiled&&(this.uniforms[t]=this.uniforms[t]||{},(n=this.uniforms[t]).name=t,void 0===n.location&&(n.location=this.gl.getUniformLocation(this.program,t)),n.method=e,n.value=r,this.updateUniform(n))}},{key:"updateUniform",value:function(e){this.compiled&&e&&null!=e.location&&(this.use(),this.commitUniform(e))}},{key:"commitUniform",value:function(e){var t=e.location,r=e.value;switch(e.method){case"1i":this.gl.uniform1i(t,r);break;case"1f":this.gl.uniform1f(t,r);break;case"2f":this.gl.uniform2f(t,r[0],r[1]);break;case"3f":this.gl.uniform3f(t,r[0],r[1],r[2]);break;case"4f":this.gl.uniform4f(t,r[0],r[1],r[2],r[3]);break;case"1iv":this.gl.uniform1iv(t,r);break;case"3iv":this.gl.uniform3iv(t,r);break;case"1fv":this.gl.uniform1fv(t,r);break;case"2fv":this.gl.uniform2fv(t,r);break;case"3fv":this.gl.uniform3fv(t,r);break;case"4fv":this.gl.uniform4fv(t,r);break;case"Matrix3fv":this.gl.uniformMatrix3fv(t,!1,r);break;case"Matrix4fv":this.gl.uniformMatrix4fv(t,!1,r)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var e in this.uniforms){var t=this.uniforms[e];t.location=this.gl.getUniformLocation(this.program,e),this.updateUniform(t)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(e){if(this.compiled){var t=this.attribs[e]=this.attribs[e]||{};return null!=t.location||(t.name=e,t.location=this.gl.getAttribLocation(this.program,e)),t}}},{key:"source",value:function(e){return"vertex"===e?this.computed_vertex_source:"fragment"===e?this.computed_fragment_source:void 0}},{key:"lines",value:function(e){var t=this.source(e);return t?t.split("\n"):[]}},{key:"line",value:function(e,t){var r=this.lines(e);if(r)return r[t]}},{key:"block",value:function(e,t){for(var r,n=this.lines(e),i=0;i<t&&i<n.length;i++){var o=n[i],a=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);a&&1<a.length?r={scope:a[1],name:a[2],num:a[3]}:(a=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<a.length&&(r=null),r&&(r.line=null==r.line?-1:r.line+1,r.source=o)}return r}},{key:"checkExtensions",value:function(){var e=this,t=[];return this.extensions.forEach((function(r){var n=getExtension(e.gl,r),i="TANGRAM_EXTENSION_".concat(r);e.defines[i]=null!=n,n?t.push(r):log("debug","Could not enable extension '".concat(r,"'"))})),t}}]),e}();ShaderProgram.polyfills={},ShaderProgram.id=0,ShaderProgram.current=null,ShaderProgram.defines={},ShaderProgram.blocks={},ShaderProgram.reset=function(){ShaderProgram.programs_by_source={},ShaderProgram.shaders_by_source={}},ShaderProgram.reset(),ShaderProgram.buildDefineString=function(e){var t="";for(var r in e)null!=e[r]&&!1!==e[r]&&("boolean"==typeof e[r]&&!0===e[r]?t+="#define "+r+"\n":"number"==typeof e[r]&&Math.floor(e[r])===e[r]?t+="#define "+r+" "+e[r].toFixed(1)+"\n":t+="#define "+r+" "+e[r]+"\n");return t},ShaderProgram.buildExtensionString=function(e){var t="";return(e=e||[]).forEach((function(e){t+="#ifdef GL_".concat(e,"\n#extension GL_").concat(e," : enable\n#endif\n")})),t},ShaderProgram.addBlock=function(e){var t;ShaderProgram.blocks[e]=ShaderProgram.blocks[e]||[];for(var r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=ShaderProgram.blocks[e]).push.apply(t,n)},ShaderProgram.removeBlock=function(e){ShaderProgram.blocks[e]=[]},ShaderProgram.replaceBlock=function(e){ShaderProgram.removeBlock(e);for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];ShaderProgram.addBlock.apply(ShaderProgram,[e].concat(r))},ShaderProgram.updateProgram=function(e,t,r,n){var i=hashString(e._tangram_id+"::"+r+"::"+n);if(ShaderProgram.programs_by_source[i])return log("trace","Reusing identical source GL program object"),ShaderProgram.programs_by_source[i];var o=ShaderProgram.createShader(e,r,e.VERTEX_SHADER),a=ShaderProgram.createShader(e,n,e.FRAGMENT_SHADER);if(e.useProgram(null),null!=t)for(var s=e.getAttachedShaders(t),l=0;l<s.length;l++)e.detachShader(t,s[l]);else t=e.createProgram();if(null==o||null==a)return t;if(e.attachShader(t,o),e.attachShader(t,a),e.linkProgram(t),e.getProgramParameter(t,e.LINK_STATUS))return ShaderProgram.programs_by_source[i]=t;var c=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(e.getProgramParameter(t,e.VALIDATE_STATUS),"\n            ERROR: ").concat(e.getError(),"\n            --- Vertex Shader ---\n            ").concat(r,"\n            --- Fragment Shader ---\n            ").concat(n));throw Object.assign(new Error(c),{type:"program"})},ShaderProgram.createShader=function(e,t,r){var n=hashString(e._tangram_id+"::"+t);if(ShaderProgram.shaders_by_source[n])return log("trace","Reusing identical source GL shader object"),ShaderProgram.shaders_by_source[n];var i=e.createShader(r);if(e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return ShaderProgram.shaders_by_source[n]=i;var o=r===e.VERTEX_SHADER?"vertex":"fragment",a=e.getShaderInfoLog(i),s=glShaderErrors(a);throw Object.assign(new Error(a),{type:o,errors:s})};var VertexArrayObject={disabled:!1,bound_vao:[],init:function(e){var t;!0!==this.disabled&&(t=getExtension(e,"OES_vertex_array_object")),null!=t?log("info","Vertex Array Object extension available"):!0!==this.disabled?log("warn","Vertex Array Object extension NOT available"):log("warn","Vertex Array Object extension force disabled")},create:function(e,t,r){var n={};n.setup=t,n.teardown=r;var i=getExtension(e,"OES_vertex_array_object");return null!=i&&(n._vao=i.createVertexArrayOES(),i.bindVertexArrayOES(n._vao)),n.setup(!0),n},getCurrentBinding:function(e){var t=this.bound_vao.filter((function(t){return t[0]===e}))[0];return t&&t[1]},setCurrentBinding:function(e,t){var r=this.bound_vao,n=r.filter((function(t){return t[0]===e}))[0];null==n?r.push([e,t]):n[1]=t},bind:function(e,t){var r,n=getExtension(e,"OES_vertex_array_object");null!=t?null!=n&&null!=t._vao?(n.bindVertexArrayOES(t._vao),this.setCurrentBinding(e,t)):t.setup(!1):(r=this.getCurrentBinding(e),null!=n?n.bindVertexArrayOES(null):null!=r&&"function"==typeof r.teardown&&r.teardown(),this.setCurrentBinding(e,null))},destroy:function(e,t){var r=getExtension(e,"OES_vertex_array_object");null!=r&&null!=t&&null!=t._vao&&(r.deleteVertexArrayOES(t._vao),t._vao=null)}},VBOMesh=function(){function e(t,r,n,i,o,a){_classCallCheck(this,e),a=a||{},this.textureManager=getTextureManager(o),this.gl=t,this.vertex_data=r,this.element_data=n,this.vertex_layout=i,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=a.draw_mode||this.gl.TRIANGLES,this.data_usage=a.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=a.uniforms,this.textures=a.textures,this.retain=a.retain||!1,this.created_at=+new Date,this.fade_in_time=a.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return _createClass(e,[{key:"render",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(!this.valid)return!1;var r=t.program||ShaderProgram.current;r.use(),this.uniforms&&(r.saveUniforms(this.uniforms),r.setUniforms(this.uniforms,!1));var n=(new Date-this.created_at)/1e3;return r.uniform("1f","u_visible_time",n),this.bind(r),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),VertexArrayObject.bind(this.gl,null),this.uniforms&&r.restoreUniforms(this.uniforms),n<this.fade_in_time}},{key:"bind",value:function(e){var t=this,r=this.vaos[e.id];r?VertexArrayObject.bind(this.gl,r):this.vaos[e.id]=VertexArrayObject.create(this.gl,(function(r){t.gl.bindBuffer(t.gl.ARRAY_BUFFER,t.vertex_buffer),t.toggle_element_array&&t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,t.element_buffer),t.vertex_layout.enable(t.gl,e,r)}))}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var e=this;if(!this.valid)return!1;for(var t in this.valid=!1,this.vaos)VertexArrayObject.destroy(this.gl,this.vaos[t]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach((function(t){return e.textureManager.release(t)})),!0}}]),e}(),shaderSrc_material="/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}",material_props=["emission","ambient","diffuse","specular"],Material=function(){function e(t){var r=this;_classCallCheck(this,e),t=t||{},material_props.forEach((function(e){var n=t[e];null!=n&&(n.texture?r[e]={texture:n.texture,mapping:n.mapping||"spheremap",scale:GLSL.expandVec3(null!=n.scale?n.scale:1),amount:GLSL.expandVec4(null!=n.amount?n.amount:1)}:"number"==typeof n||Array.isArray(n)?r[e]={amount:GLSL.expandVec4(n)}:r[e]="string"==typeof n?{amount:StyleParser.parseColor(n)}:n)})),this.specular&&(this.specular.shininess=t.shininess?parseFloat(t.shininess):.2),null!=t.normal&&(this.normal={texture:t.normal.texture,mapping:t.normal.mapping||"triplanar",scale:GLSL.expandVec3(null!=t.normal.scale?t.normal.scale:1),amount:null!=t.normal.amount?t.normal.amount:1})}return _createClass(e,[{key:"inject",value:function(t){var r=this;material_props.forEach((function(e){var n="TANGRAM_MATERIAL_".concat(e.toUpperCase()),i=n+"_TEXTURE";t.defines[n]=null!=r[e],r[e]&&r[e].texture&&(t.defines[i]=!0,t.defines[i+"_"+r[e].mapping.toUpperCase()]=!0,t.defines["TANGRAM_MATERIAL_TEXTURE_".concat(r[e].mapping.toUpperCase())]=!0,t.texcoords=t.texcoords||"uv"===r[e].mapping)})),this.normal&&this.normal.texture&&(t.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,t.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,t.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,t.texcoords=t.texcoords||"uv"===this.normal.mapping),t.replaceShaderBlock(e.block,shaderSrc_material,"Material"),t.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(e){var t=this;material_props.forEach((function(r){t[r]&&(t[r].texture?(e.setTextureUniform("u_material_".concat(r,"_texture"),t[r].texture),e.uniform("3fv","u_material.".concat(r,"Scale"),t[r].scale),e.uniform("4fv","u_material.".concat(r),t[r].amount)):t[r].amount&&e.uniform("4fv","u_material.".concat(r),t[r].amount))})),this.specular&&e.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(e.setTextureUniform("u_material_normal_texture",this.normal.texture),e.uniform("3fv","u_material.normalScale",this.normal.scale),e.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(e){return null!=e&&(null!=e.emission||null!=e.ambient||null!=e.diffuse||null!=e.specular)}}]),e}(),Vector;Material.block="material";var Vector$1=Vector={};Vector.copy=function(e){for(var t=[],r=e.length,n=0;n<r;n++)t[n]=e[n];return t},Vector.neg=function(e){for(var t=[],r=e.length,n=0;n<r;n++)t[n]=-e[n];return t},Vector.add=function(e,t){for(var r=[],n=Math.min(e.length,t.length),i=0;i<n;i++)r[i]=e[i]+t[i];return r},Vector.sub=function(e,t){for(var r=[],n=Math.min(e.length,t.length),i=0;i<n;i++)r[i]=e[i]-t[i];return r},Vector.signed_area=function(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])},Vector.mult=function(e,t){var r,n=[],i=e.length;if("number"==typeof t)for(r=0;r<i;r++)n[r]=e[r]*t;else for(i=Math.min(e.length,t.length),r=0;r<i;r++)n[r]=e[r]*t[r];return n},Vector.multMatrix=function(e,t){return[e[0][0]*t[0]+e[0][1]*t[1],e[1][0]*t[0]+e[1][1]*t[1]]},Vector.div=function(e,t){var r=[];if("number"==typeof t)for(i=0;i<e.length;i++)r[i]=e[i]/t;else for(var n=Math.min(e.length,t.length),i=0;i<n;i++)r[i]=e[i]/t[i];return r},Vector.perp=function(e,t){return[t[1]-e[1],e[0]-t[0]]},Vector.rot=function(e,t){var r=Math.cos(t),n=Math.sin(t);return[e[0]*r-e[1]*n,e[0]*n+e[1]*r]},Vector.angle=function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1];return Math.atan2(n,r)},Vector.angleBetween=function(e,t){var r=Vector.dot(Vector.normalize(Vector.copy(e)),Vector.normalize(Vector.copy(t)));return 1<r&&(r=1),Math.acos(r)},Vector.signedAngleBetween=function(e,t){return Math.atan2(e[0]*t[1]-e[1]*t[0],e[0]*t[0]+e[1]*t[1])},Vector.isEqual=function(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0},Vector.lengthSq=function(e){return 2===e.length?e[0]*e[0]+e[1]*e[1]:3<=e.length?e[0]*e[0]+e[1]*e[1]+e[2]*e[2]:0},Vector.length=function(e){return Math.sqrt(Vector.lengthSq(e))},Vector.normalize=function(e){var t;if(2===e.length){if(1===(t=e[0]*e[0]+e[1]*e[1]))return e;0!==(t=Math.sqrt(t))?(e[0]/=t,e[1]/=t):(e[0]=0,e[1]=0)}else if(3<=e.length){if(1===(t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2]))return e;0!==(t=Math.sqrt(t))?(e[0]/=t,e[1]/=t,e[2]/=t):(e[0]=0,e[1]=0,e[2]=0)}return e},Vector.cross=function(e,t){return 2===e.length?e[0]*t[1]-e[1]*t[0]:3===e.length?[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]:void 0},Vector.dot=function(e,t){for(var r=0,n=Math.min(e.length,t.length),i=0;i<n;i++)r+=e[i]*t[i];return r};var shaderSrc_ambientLight="/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}",shaderSrc_directionalLight="/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}",shaderSrc_pointLight="/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}",shaderSrc_spotLight="/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}",Light=function(){function e(t,r){_classCallCheck(this,e),this.name=r.name,this.view=t,null==r.ambient||"number"==typeof r.ambient?this.ambient=GLSL.expandVec3(r.ambient||0):this.ambient=StyleParser.parseColor(r.ambient).slice(0,3),null==r.diffuse||"number"==typeof r.diffuse?this.diffuse=GLSL.expandVec3(null!=r.diffuse?r.diffuse:1):this.diffuse=StyleParser.parseColor(r.diffuse).slice(0,3),null==r.specular||"number"==typeof r.specular?this.specular=GLSL.expandVec3(r.specular||0):this.specular=StyleParser.parseColor(r.specular).slice(0,3)}return _createClass(e,[{key:"inject",value:function(){var t="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),r="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");ShaderProgram.addBlock(e.block,t),ShaderProgram.addBlock("setup",r)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(e){e.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),e.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),e.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(t,r){if(e.types[r.type])return new e.types[r.type](t,r)}},{key:"setMode",value:function(t,r){!0===t&&(t="fragment"),t=e.enabled&&(null!=t?t:"fragment"),r.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===t,r.defines.TANGRAM_LIGHTING_VERTEX="vertex"===t}},{key:"inject",value:function(t){if(ShaderProgram.removeBlock(e.block),e.enabled){var r="";if(t&&0<Object.keys(t).length){var n={};for(var i in t)n[t[i].type]=!0;for(var o in n)e.types[o].inject();for(var a in t)t[a].inject(),r+="calculateLight(".concat(a,", _eyeToPoint, _normal);\n")}var s="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(r,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");ShaderProgram.addBlock(e.block,s)}}}]),e}();Light.types={},Light.block="lighting",Light.enabled=!0;var AmbientLight=function(){_inherits(t,Light);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),(i=e.call(this,r,n)).type="ambient",i.struct_name="AmbientLight",i}return _createClass(t,[{key:"setupProgram",value:function(e){e.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_ambientLight)}}]),t}();Light.types.ambient=AmbientLight;var DirectionalLight=function(){_inherits(t,Light);var e=_createSuper(t);function t(r,n){var i,o;return _classCallCheck(this,t),(i=e.call(this,r,n)).type="directional",i.struct_name="DirectionalLight",n.direction?i._direction=n.direction:(o=Math.sin(60*Math.PI/180),i._direction=[Math.cos(135*Math.PI/180)*o,Math.sin(135*Math.PI/180)*o,-.5]),null==n.ambient&&(i.ambient=GLSL.expandVec3(.5)),i.direction=i._direction.map(parseFloat),i._initial_direction=[i.direction[0],i.direction[1],i.direction[2]],i}return _createClass(t,[{key:"update",value:function(){vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(e){_get(_getPrototypeOf(t.prototype),"setupProgram",this).call(this,e),e.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction=Vector$1.normalize(Vector$1.copy(e))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_directionalLight)}}]),t}();Light.types.directional=DirectionalLight;var PointLight=function(){_inherits(t,Light);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),(i=e.call(this,r,n)).type="point",i.struct_name="PointLight",i.position=n.position||[0,0,"100px"],i.position_eye=[],i.origin=n.origin||"ground",i.attenuation=isNaN(parseFloat(n.attenuation))?0:parseFloat(n.attenuation),n.radius?Array.isArray(n.radius)&&2===n.radius.length?i.radius=n.radius:i.radius=[null,n.radius]:i.radius=null,i}return _createClass(t,[{key:"inject",value:function(){_get(_getPrototypeOf(t.prototype),"inject",this).call(this),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var e,t,r,n=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(t=(e=_slicedToArray(Geo$1.latLngToMeters(this.position),2))[0],r=e[1],this.position_eye[0]=t-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=r-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=StyleParser.convertUnits(this.position[2],{zoom:n,meters_per_pixel:Geo$1.metersPerPixel(n)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=StyleParser.convertUnits(this.position,{zoom:n,meters_per_pixel:Geo$1.metersPerPixel(n)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(e){_get(_getPrototypeOf(t.prototype),"setupProgram",this).call(this,e),e.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&e.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var r=this.view.lookAtManipulator.getLookAtData().zoom;ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&e.uniform("1f","u_".concat(this.name,".innerRadius"),StyleParser.convertUnits(this.radius[0],{zoom:r,meters_per_pixel:Geo$1.metersPerPixel(r)})),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&e.uniform("1f","u_".concat(this.name,".outerRadius"),StyleParser.convertUnits(this.radius[1],{zoom:r,meters_per_pixel:Geo$1.metersPerPixel(r)}))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_pointLight)}}]),t}();Light.types.point=PointLight;var SpotLight=function(){_inherits(t,PointLight);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),(i=e.call(this,r,n)).type="spotlight",i.struct_name="SpotLight",i.direction=i._direction=(n.direction||[0,0,-1]).map(parseFloat),i._initial_direction=[i.direction[0],i.direction[1],i.direction[2]],i.exponent=n.exponent?parseFloat(n.exponent):.2,i.angle=n.angle?parseFloat(n.angle):20,i}return _createClass(t,[{key:"setupProgram",value:function(e){_get(_getPrototypeOf(t.prototype),"setupProgram",this).call(this,e),e.uniform("3fv","u_".concat(this.name,".direction"),this.direction),e.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),e.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){_get(_getPrototypeOf(t.prototype),"update",this).call(this),vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction=Vector$1.normalize(Vector$1.copy(e))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_spotLight)}}]),t}();function mergeObjects(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];if(r)for(var n in r){var i=r[n];null===i||"object"!==_typeof(i)||Array.isArray(i)?void 0!==i&&(e[n]=i):null===e[n]||"object"!==_typeof(e[n])||Array.isArray(e[n])?e[n]=mergeObjects({},i):e[n]=mergeObjects(e[n],i)}}return e}Light.types.spotlight=SpotLight;var shaderSrc_selectionFragment="\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",shaderSrc_selectionCropFragment="\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",shaderSrc_rasters="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",Style={init:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.generation,n=t.styles,i=t.sources,o=void 0===i?{}:i,a=t.introspection,s=t.id,l=void 0!==s?s+"/":"";this.scene_id=s,this.textureManager=getTextureManager(s),this.main_thread_target="".concat(l,"Style/").concat(this.name),this.setGeneration(r),this.styles=n,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=a||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof Material||(Material.isValid(this.material)||(this.material=StyleParser.defaults.material),this.material=new Material(this.material)),this.material.inject(this),Light.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),WorkerBroker.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(e){this.generation=e,Thread.is_main&&WorkerBroker.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(e,t,r,n){var i=n.size,o=void 0===(o=n.offset)?0:o,a=e.index[t];if(void 0!==a)for(var s=0;s<i;++s){var l=r.length>s?r[s]:r;this.vertex_template[a+s+o]=l}else log("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(t,"'"))},startData:function(e){this.tile_data[e.id]=this.tile_data[e.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(e){var t=this.tile_data[e.id];if(this.tile_data[e.id]=null,t&&0<Object.keys(t.meshes).length){for(var r in t.meshes){var n=t.meshes[r];0!==n.vertex_data.vertex_count?(n.vertex_data.end(),n.vertex_elements=n.vertex_data.element_buffer,n.vertex_data=n.vertex_data.vertex_buffer):delete t.meshes[r]}return e.mesh_data[this.name]=t,this.buildRasterTextures(e,t).then((function(e){return e}))}return Promise.resolve(null)},hasDataForTile:function(e){return null!=this.tile_data[e.id]},getTileMesh:function(e,t){var r=this.tile_data[e.id].meshes;return null==r[t.key]&&(r[t.key]={variant:t,vertex_data:this.vertexLayoutForMeshVariant(t).createVertexData()}),r[t.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(e,t){this.style_mesh_variants[e]||(this.style_mesh_variants[e]={variants:{}});var r=this.computeVariantForDraw(t);return this.style_mesh_variants[e].variants[r.key]={variant:r,times_unref:0},this.style_mesh_variants[e].variants[r.key].variant},getMeshVariantTypeForDraw:function(e){return this.getMeshVariantType(this.base,e)},getMeshVariantType:function(e,t){void 0===e&&(e="default");var r=this.style_mesh_variants[e];if(void 0===t.variantKey||!r||!r.variants[t.variantKey])return this.addMeshVariantForDraw(e,t);var n=t.variantKey,i=r.variants[n];return i.times_unref=0,i.variant},updateMeshVariantTypeCache:function(e){for(var t in this.style_mesh_variants){var r=this.style_mesh_variants[t].variants;for(var n in r){var i=r[n];i.times_unref++,i.times_unref>e&&("default"!==t||0!=+n)&&(delete r[n],0===Object.keys(r).length&&delete this.style_mesh_variants[t])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(e,t,r){var n=r.tile;this.tile_data[n.id]||this.startData(n);var i,o,a,s,l=this.parseFeature(e,t,r);l&&(i="lines"===this.base?this.getMeshVariantTypeForDraw(t):this.getMeshVariantTypeForDraw(l),a=(o=this.getTileMesh(n,i)).vertex_data.offset,s=o.vertex_data.vertex_count,0<this.buildGeometry(e.geometry,l,o,r)?e.generation=this.generation:o.vertex_data.vertex_count>s&&(o.vertex_data.vertex_buffer.fill(0,a,o.vertex_data.offset),o.vertex_data.vertex_count=s,o.vertex_data.offset=a))},buildGeometry:function(e,t,r,n){var i;return"Polygon"===e.type?i=this.buildPolygons([e.coordinates],t,r,n):"MultiPolygon"===e.type?i=this.buildPolygons(e.coordinates,t,r,n):"LineString"===e.type?i=this.buildLines([e.coordinates],t,r,n):"MultiLineString"===e.type?i=this.buildLines(e.coordinates,t,r,n):"Point"===e.type?i=this.buildPoints([e.coordinates],t,r,n):"MultiPoint"===e.type&&(i=this.buildPoints(e.coordinates,t,r,n)),i},parseFeature:function(e,t,r){try{var n,i,o,a=this.feature_style;if(a.order=this.parseOrder(t.order,r),null==a.order&&"overlay"!==this.blend){var s="Layer '".concat(t.layers.join(", "),"', draw group '").concat(t.group,"': ");return s+="'order' parameter is required unless blend mode is 'overlay'",null!=t.order&&(s+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",s+="or JS function), but evaluated to null for one or more features"),void log({level:"warn",once:!0},s)}if(!(a=this._parseFeature(e,t,r)))return;return this.selection?a.interactive=StyleParser.evalProperty(this.introspection||t.interactive,r):a.interactive=!1,!0===a.interactive?(i=(n=FeatureSelection.makeEntry()).color,o=n.key,a.selection_color=i,r.tile.selection_data||(r.tile.selection_data={}),r.tile.selection_data[o]={id:e.id||o,properties:e.properties,source_name:r.source,source_layer:r.layer,layers:r.layers}):a.selection_color=FeatureSelection.defaultColor,a}catch(t){log("error","Style.parseFeature: style parsing error",e,a,t.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(e,t){if(!e.preprocessed){if(this.draw)for(var r in this.draw){var n=this.draw[r];"object"!==_typeof(n)||Array.isArray(n)?null==e[r]&&(e[r]=n):e[r]=mergeObjects({},n,e[r])}var i=t||"";if(!(e=this._preprocess(e,i)))return;e.preprocessed=!0}return e},_preprocess:function(e){return e},parseOrder:function(e,t){return"number"!=typeof e?StyleParser.calculateOrder(e,t):e},scaleOrder:function(e){return 2*e},parseColor:function(e,t){return e?StyleParser.evalCachedColorProperty(e,t):this.shaders.blocks.color||this.shaders.blocks.filter?StyleParser.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(e){this.gl=e,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:{},i=this.vertexLayoutForMeshVariant(n.variant);return new VBOMesh(this.gl,e,t,i,this.scene_id,n)},render:function(e){return e.render()},getProgram:function(e){var t=0<arguments.length&&void 0!==e?e:"program";this.compileSetup();var r=this[t];if(r&&!r.error){if(!r.compiled)try{r.compile()}catch(e){log("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(t,"')"),this,e.stack)}return r}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var e,t=this.buildDefineList();this.selection&&((e=Object.assign({},t)).TANGRAM_FEATURE_SELECTION=!0);var r=this.shaders&&this.shaders.blocks,n=this.shaders&&this.shaders.block_scopes,i=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in i)null==i[o]&&log({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(o,"': uniform values must be non-null"));var a=this.shaders&&this.shaders.extensions;"string"==typeof a&&(a=[a]),this.program=new ShaderProgram(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:t,uniforms:i,blocks:r,block_scopes:n,extensions:a}),this.selection?this.selection_program=new ShaderProgram(this.gl,this.vertex_shader_src,this.crop_by_tile?shaderSrc_selectionCropFragment:shaderSrc_selectionFragment,this.scene_id,{name:this.name+" (selection)",defines:e,uniforms:i,blocks:r,block_scopes:n,extensions:a}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[e]=this.shaders.blocks[e]||[],this.shaders.blocks[e].push(t),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[e]=this.shaders.block_scopes[e]||[],this.shaders.block_scopes[e].push(n)},removeShaderBlock:function(e){this.shaders.blocks&&(this.shaders.blocks[e]=null)},replaceShaderBlock:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:null;this.removeShaderBlock(e),this.addShaderBlock(e,t,n)},buildDefineList:function(){var e={};if(null!=this.defines)for(var t in this.defines)e[t]=this.defines[t];if(null!=this.shaders&&null!=this.shaders.defines)for(t in this.shaders.defines)e[t]=this.shaders.defines[t];return e},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!Thread.is_main)return!1;if(!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var e=!1;for(var t in this.sources)if(this.sources[t]instanceof RasterTileSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},buildRasterTextures:function(e,t){var r=this;if(!this.hasRasters())return Promise.resolve(t);var n={};return e.rasters.map((function(e){return r.sources[e]})).filter((function(e){return e})).forEach((function(t,r){var i;t instanceof RasterTileSource&&(i=t.tileTexture(e),n[i.url]=i)})),0===Object.keys(n).length?Promise.resolve(t):WorkerBroker.postMessage(this.main_thread_target+".loadTextures",n).then((function(r){if(!r||r.length<1)return log("trace","Missing texture info for tile ".concat(e.key)),null;if(r.some((function(e){return!e.loaded})))return null;t.uniforms=t.uniforms||{},t.textures=t.textures||[];var i,o,a=r[0].name,s=n[a].coords;return t.uniforms.u_raster=a,t.textures.push(a),e.coords.z>s.z?(i=e.coords.z-s.z,o=Math.pow(2,i),t.uniforms.u_raster_offset=[(e.coords.x%o+o)%o/o,(o-1-e.coords.y%o)/o,1/o]):t.uniforms.u_raster_offset=[0,0,1],t}))},loadTextures:function(e){var t=this;return this.textureManager.createFromObject(this.gl,e).then((function(){return Promise.all(Object.keys(e).map((function(e){return t.textureManager.textures[e]&&t.textureManager.textures[e].load()})).filter((function(e){return e})))})).then((function(e){return e.forEach((function(e){return e.retain()})),e.map((function(e){return{name:e.name,width:e.width,height:e.height,loaded:e.loaded}}))}))},setup:function(){this.setUniforms(),this.material.setupProgram(ShaderProgram.current)},setUniforms:function(){var e=ShaderProgram.current;e&&e.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(e){var t=[],r={};for(var n in e.forEach((function(e){var t=parseInt(e.name,10)||0;r[t]||(r[t]=[]),r[t].push(e)})),r)t.push.apply(t,_toConsumableArray(r[n].sort(Style.blendOrderSort)));return t},blendOrderSort:function(e,t){return"opaque"===e.blend||"opaque"===t.blend?"opaque"===e.blend&&"opaque"===t.blend?e.name<t.name?-1:1:"opaque"===e.blend?-1:1:e.blend_order<t.blend_order||!(e.blend_order>t.blend_order)&&(Style.default_blend_orders[e.blend]<Style.default_blend_orders[t.blend]||!(Style.default_blend_orders[e.blend]>Style.default_blend_orders[t.blend])&&e.name<t.name)?-1:1}},id$1=0,build_id=0,Tile=function(){function e(t){var r=t.coords,n=t.style_zoom,i=t.source,o=t.worker,a=t.view,s=t.sceneId;_classCallCheck(this,e),this.textureManager=getTextureManager(s),this.id=id$1++,this.worker=o,this.view=a,this.source=i,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=n,this.coords=e.normalizedCoordinate(r,this.source,this.style_zoom),this.key=e.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Geo$1.metersForTile(this.coords),this.max=Geo$1.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Geo$1.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Geo$1.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Geo$1.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _createClass(e,[{key:"freeResources",value:function(){for(var e in this.meshes)this.meshes[e].forEach((function(e){return e.destroy()}));this.meshes={}}},{key:"destroy",value:function(){Task.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return WorkerBroker.postMessage.apply(WorkerBroker,[this.worker].concat(t))}},{key:"build",value:function(e,t){var r=(1<arguments.length&&void 0!==t?t:{}).fade_in,n=void 0===r||r;return this.generation=e,this.fade_in=n,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(e,t){if(!this.error){this.build_id=build_id++;var r={},n=this.mesh_data;if(n)for(var i in n){for(var o in n[i].meshes){var a=n[i].meshes[o];if(a.vertex_data){if(!e[i]){log("warn","Could not create mesh because style '".concat(i,"' not found, for tile ").concat(this.key,", aborting tile"));break}var s=Object.assign({},n[i]);s.uniforms=Object.assign({},s.uniforms,a.uniforms),s.variant=a.variant,a.textures&&(s.textures=a.textures),a.labels&&(s.retain=!0);var l=e[i].makeMesh(a.vertex_data,a.vertex_elements,s);l.variant=s.variant,l.labels=a.labels,r[i]=r[i]||[],r[i].push(l),null==l.variant.order&&(l.variant.order=r[i].length-1)}}r[i]&&r[i].sort((function(e,t){var r=e.variant.order,n=t.variant.order;return null!=r&&(null==n||r<n)?-1:1}))}for(var c in delete this.mesh_data,r)this.meshes[c]&&this.meshes[c].forEach((function(e){return e.destroy()})),this.meshes[c]=r[c],this.new_mesh_styles.push(c);if(t.done){for(var u in this.meshes)-1===this.new_mesh_styles.indexOf(u)&&(this.meshes[u].forEach((function(e){return e.destroy()})),delete this.meshes[u]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(e){e?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(e),this.proxy_depth=1,e.proxied_as=e.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(e){return!this.proxy_for||this.proxy_for.some((function(t){return null==t.meshes[e]}))}},{key:"setupProgram",value:function(e,t){var r=e.model,n=e.model32;t.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),t.uniform("1f","u_tile_proxy_depth",this.proxy_depth),mat4.identity(r),mat4.translate(r,r,vec3.fromValues(this.min.x,this.min.y,0)),mat4.scale(r,r,vec3.fromValues(this.span.x/Geo$1.tile_scale,-1*this.span.y/Geo$1.tile_scale,1)),mat4.copy(n,r),t.uniform("Matrix4fv","u_model",n),t.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(e){return this.loading=e.loading,this.loaded=e.loaded,this.generation=e.generation,this.error=e.error,this.mesh_data=e.mesh_data,this.selection_data?Object.assign(this.selection_data,e.selection_data):this.selection_data=e.selection_data,this}}],[{key:"coord",value:function(t){return{x:t.x,y:t.y,z:t.z,key:e.coordKey(t)}}},{key:"coordKey",value:function(e){return e.x+"/"+e.y+"/"+e.z}},{key:"key",value:function(e,t,r){if(!(e.y<0||e.y>=1<<e.z||e.z<0))return[t.name,r,e.x,e.y,e.z].join("/")}},{key:"normalizedKey",value:function(t,r,n){return e.key(e.normalizedCoordinate(t,r,n),r,n)}},{key:"normalizedCoordinate",value:function(t,r){return r.zoom_bias&&(t=e.coordinateAtZoom(t,Math.max(0,t.z-r.zoom_bias))),e.coordinateWithMaxZoom(t,r.max_zoom)}},{key:"coordinateAtZoom",value:function(t,r){var n,i=t.x,o=t.y,a=t.z;return a!==r&&(n=Math.pow(2,a-r),i=Math.floor(i/n),o=Math.floor(o/n),a=r),e.coord({x:i,y:o,z:a})}},{key:"coordinateWithMaxZoom",value:function(t,r){var n=t.x,i=t.y,o=t.z;return void 0!==r&&r<o?e.coordinateAtZoom({x:n,y:i,z:o},r):e.coord({x:n,y:i,z:o})}},{key:"childrenForCoordinate",value:function(t){var r=t.x,n=t.y,i=t.z,o=t.key;return e.coord_children[o]||(i++,r*=2,n*=2,e.coord_children[o]=[e.coord({x:r,y:n,z:i}),e.coord({x:r+1,y:n,z:i}),e.coord({x:r,y:n+1,z:i}),e.coord({x:r+1,y:n+1,z:i})]),e.coord_children[o]}},{key:"isDescendant",value:function(t,r){if(r.z>t.z){var n=e.coordinateAtZoom(r,t.z),i=n.x,o=n.y;return t.x===i&&t.y===o}return!1}},{key:"cancel",value:function(t){t&&(t.canceled=!0,t.source_data&&t.source_data.request_id&&(Utils$1.cancelRequest(t.source_data.request_id),t.source_data.request_id=null),e.abortBuild(t))}},{key:"buildGeometry",value:function(t,r){var n=r.scene_id,i=r.layers,o=r.styles,a=r.global,s=r.sources,l=r.meshVariantMaxLife,c=t.source_data;for(var u in Collision.startTile(t.id,{apply_repeat_groups:!0}),i){var p=i[u];if(p&&p.config_data){if(p.config_data.source===t.source)for(var f=e._getDataForSource(c,p.config_data,u),h=0;h<f.length;h++){var d=f[h],y=d.geom;if(y)for(var m=0;m<y.features.length;m++){var v=y.features[m];if(null!=v.geometry){var g=StyleParser.getFeatureParseContext(v,t,a,s);g.winding=t.default_winding,g.source=t.source,g.layer=d.layer;var b=p.buildDrawGroups(g,!0);if(b)for(var _ in b){var w=b[_],x=w.style||_,E=o[x];E?null!=(w=E.preprocess(w,t.source))&&!1!==w.visible&&(g.layers=w.layers,E.addFeature(v,w,g)):log("warn","Style '".concat(x,"' not found, skipping layer '").concat(u,"':"),w,v)}}}}}else log("warn","Layer ".concat(u," was defined without a geometry data source and will not be rendered."))}var S=e._stylesForTile(t,o);e._sendStyleGroups(t,S,{scene_id:n,meshVariantMaxLife:l},(function(e){return e.collision?"collision":"non-collision"}))}},{key:"_stylesForTile",value:function(e,t){var r=[];for(var n in t)t[n].hasDataForTile(e)&&r.push(t[n]);return r}},{key:"_sendStyleGroups",value:function(t,r,n,i){var o=n.scene_id,a=n.meshVariantMaxLife,s={};r.forEach((function(e){var t=i(e);s[t]=s[t]||[],s[t].push(e)})),0<Object.keys(s).length?function(){var r={start:!0};for(var n in t.mesh_data={},s)!function(n){var i=s[n];Promise.all(i.map((function(e){return e.endData(t)}))).then((function(){log("trace","Finished style group '".concat(n,"' for tile ").concat(t.key)),s[n]=[],Object.keys(s).every((function(e){return 0===s[e].length}))&&(r.done=!0),WorkerBroker.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(t,["mesh_data","selection_data"]),progress:r})),r.start=null,t.mesh_data={},t.selection_data={},r.done&&Collision.resetTile(t.id)}),(function(e){log("error","Error for style group '".concat(n,"' for tile ").concat(t.key),e)}))}(n);Style.updateMeshVariantTypeCache(a)}():(WorkerBroker.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(t),progress:{start:!0,done:!0}})),Collision.resetTile(t.id))}},{key:"_getDataForSource",value:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:null,i=[];return null!=t&&null!=e&&null!=e.layers&&(!t.layer&&e.layers._default||"string"==typeof t.layer&&!e.layers[t.layer]&&new RegExp("^\\d+_"+t.layer+"$").test(n)&&e.layers._default?i.push({geom:e.layers._default}):!t.layer&&n?i.push({layer:n,geom:e.layers[n]}):"string"==typeof t.layer?i.push({layer:t.layer,geom:e.layers[t.layer]}):Array.isArray(t.layer)&&t.layer.forEach((function(t){e.layers[t]&&e.layers[t].features&&i.push({layer:t,geom:e.layers[t]})}))),i}},{key:"abortBuild",value:function(e,t){if(Task.removeForTile(e.id),Collision.abortTile(e.id),e.mesh_data)for(var r in e.mesh_data){var n=e.mesh_data[r].textures;n&&n.forEach((function(r){var n=getTextureManager(t).textures[r];n&&(log("trace","releasing texture ".concat(r," for tile ").concat(e.key)),n.release())}))}}},{key:"slice",value:function(e,t){var r=["id","key","loading","loaded","generation","error","debug"];Array.isArray(t)&&r.push.apply(r,_toConsumableArray(t));for(var n={},i=0;i<r.length;i++){var o=r[i];n[o]=e[o]}return n}}]),e}();Tile.coord_children={};var RasterTileSource=function(){_inherits(t,NetworkTileSource);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),-1===(i=e.call(this,r,n)).rasters.indexOf(i.name)&&i.rasters.unshift(i.name),i.filtering=r.filtering,i.textures={},i}return _createClass(t,[{key:"load",value:function(e){e.source_data={},e.source_data.layers={},e.pad_scale=this.pad_scale,e.rasters=_toConsumableArray(this.rasters);var t=Geo$1.tile_scale;return e.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[t,0],[t,-t],[0,-t],[0,0]]]},properties:{}}]}},e.default_winding="CW",Promise.resolve(e)}},{key:"tileTexture",value:function(e){var t,r,n=e.coords.key;return this.textures[n]||(t=Tile.coordinateWithMaxZoom(e.coords,this.max_zoom),r=this.formatUrl(this.url,{coords:t}),this.textures[n]={url:r,filtering:this.filtering,coords:t}),this.textures[n]}}]),t}(),ArrayUtils;DataSource.register(RasterTileSource,"Raster");var ArrayUtils$1=ArrayUtils={};function simplify(e,t,r,n){for(var i,o=n,a=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],p=e[r+1],f=t+3;f<r;f+=3){var h,d=getSqSegDist(e[f],e[f+1],l,c,u,p);o<d?(i=f,o=d):d!==o||(h=Math.abs(f-a))<s&&(i=f,s=h)}n<o&&(3<i-t&&simplify(e,t,i,n),e[i+2]=o,3<r-i&&simplify(e,i,r,n))}function getSqSegDist(e,t,r,n,i,o){var a,s=i-r,l=o-n;return 0===s&&0===l||(1<(a=((e-r)*s+(t-n)*l)/(s*s+l*l))?(r=i,n=o):0<a&&(r+=s*a,n+=l*a)),(s=e-r)*s+(l=t-n)*l}function createFeature(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return calcBBox(i),i}function calcBBox(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)calcLineBBox(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)calcLineBBox(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)calcLineBBox(e,t[n][i])}function calcLineBBox(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function convert(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)convertFeature(r,e.features[n],t,n);else"Feature"===e.type?convertFeature(r,e,t):convertFeature(r,{geometry:e},t);return r}function convertFeature(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)convertPoint(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)convertPoint(i[c],s);else if("LineString"===o)convertLine(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(c=0;c<i.length;c++)s=[],convertLine(i[c],s,a,!1),e.push(createFeature(l,"LineString",s,t.properties));return}convertLines(i,s,a,!1)}else if("Polygon"===o)convertLines(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(c=0;c<t.geometry.geometries.length;c++)convertFeature(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}for(c=0;c<i.length;c++){var u=[];convertLines(i[c],u,a,!0),s.push(u)}}e.push(createFeature(l,o,s,t.properties))}}function convertPoint(e,t){t.push(projectX(e[0])),t.push(projectY(e[1])),t.push(0)}function convertLine(e,t,r,n){for(var i,o,a=0,s=0;s<e.length;s++){var l=projectX(e[s][0]),c=projectY(e[s][1]);t.push(l),t.push(c),t.push(0),0<s&&(a+=n?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,simplify(t,0,u,r),t[2+u]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function convertLines(e,t,r,n){for(var i=0;i<e.length;i++){var o=[];convertLine(e[i],o,r,n),t.push(o)}}function projectX(e){return e/360+.5}function projectY(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:1<r?1:r}function clip(e,t,r,n,i,o,a,s){if(n/=t,(r/=t)<=o&&a<n)return e;if(a<r||n<=o)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],p=u.geometry,f=u.type,h=0===i?u.minX:u.minY,d=0===i?u.maxX:u.maxY;if(r<=h&&d<n)l.push(u);else if(!(d<r||n<=h)){var y=[];if("Point"===f||"MultiPoint"===f)clipPoints(p,y,r,n,i);else if("LineString"===f)clipLine(p,y,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===f)clipLines(p,y,r,n,i,!1);else if("Polygon"===f)clipLines(p,y,r,n,i,!0);else if("MultiPolygon"===f)for(var m=0;m<p.length;m++){var v=[];clipLines(p[m],v,r,n,i,!0),v.length&&y.push(v)}if(y.length){if(s.lineMetrics&&"LineString"===f){for(m=0;m<y.length;m++)l.push(createFeature(u.id,f,y[m],u.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===y.length?(f="LineString",y=y[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===y.length?"Point":"MultiPoint"),l.push(createFeature(u.id,f,y,u.tags))}}}return l.length?l:null}function clipPoints(e,t,r,n,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];r<=a&&a<=n&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function clipLine(e,t,r,n,i,o,a){for(var s,l,c=newSlice(e),u=0===i?intersectX:intersectY,p=e.start,f=0;f<e.length-3;f+=3){var h=e[f],d=e[f+1],y=e[f+2],m=e[f+3],v=e[f+4],g=0===i?h:d,b=0===i?m:v,_=!1;a&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(d-v,2))),g<r?r<b&&(l=u(c,h,d,m,v,r),a&&(c.start=p+s*l)):n<g?b<n&&(l=u(c,h,d,m,v,n),a&&(c.start=p+s*l)):addPoint(c,h,d,y),b<r&&r<=g&&(l=u(c,h,d,m,v,r),_=!0),n<b&&g<=n&&(l=u(c,h,d,m,v,n),_=!0),!o&&_&&(a&&(c.end=p+s*l),t.push(c),c=newSlice(e)),a&&(p+=s)}var w=e.length-3;h=e[w],d=e[w+1],y=e[w+2];r<=(g=0===i?h:d)&&g<=n&&addPoint(c,h,d,y),w=c.length-3,o&&3<=w&&(c[w]!==c[0]||c[w+1]!==c[1])&&addPoint(c,c[0],c[1],c[2]),c.length&&t.push(c)}function newSlice(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function clipLines(e,t,r,n,i,o){for(var a=0;a<e.length;a++)clipLine(e[a],t,r,n,i,o,!1)}function addPoint(e,t,r,n){e.push(t),e.push(r),e.push(n)}function intersectX(e,t,r,n,i,o){var a=(o-t)/(n-t);return e.push(o),e.push(r+(i-r)*a),e.push(1),a}function intersectY(e,t,r,n,i,o){var a=(o-r)/(i-r);return e.push(t+(n-t)*a),e.push(o),e.push(1),a}function wrap(e,t){var r=t.buffer/t.extent,n=e,i=clip(e,1,-1-r,r,0,-1,2,t),o=clip(e,1,1-r,2+r,0,-1,2,t);return(i||o)&&(n=clip(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=shiftFeatureCoords(i,1).concat(n)),o&&(n=n.concat(shiftFeatureCoords(o,-1)))),n}function shiftFeatureCoords(e,t){for(var r=[],n=0;n<e.length;n++){var i,o=e[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=shiftCoords(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(shiftCoords(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(shiftCoords(o.geometry[s][c],t));i.push(l)}r.push(createFeature(o.id,a,i,o.tags))}return r}function shiftCoords(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function transformTile(e,t){if(e.transformed)return e;for(var r,n=1<<e.z,i=e.x,o=e.y,a=0;a<e.features.length;a++){var s=e.features[a],l=s.geometry,c=s.type;if(s.geometry=[],1===c)for(r=0;r<l.length;r+=2)s.geometry.push(transformPoint(l[r],l[r+1],t,n,i,o));else for(r=0;r<l.length;r++){for(var u=[],p=0;p<l[r].length;p+=2)u.push(transformPoint(l[r][p],l[r][p+1],t,n,i,o));s.geometry.push(u)}}return e.transformed=!0,e}function transformPoint(e,t,r,n,i,o){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-o))]}function createTile(e,t,r,n,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,addFeature(a,e[s],o,i);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,p=e[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),p>a.maxY&&(a.maxY=p)}return a}function addFeature(e,t,r,n){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)addLine(a,i,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)addLine(a,i[s],e,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)addLine(a,c[s],e,r,!0,0===s)}if(a.length){var u=t.tags||null;if("LineString"===o&&n.lineMetrics){for(var p in u={},t.tags)u[p]=t.tags[p];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==t.id&&(f.id=t.id),e.features.push(f)}}function addLine(e,t,r,n,i,o){var a=n*n;if(0<n&&t.size<(i?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&rewind(s,o),e.push(s)}}function rewind(e,t){for(var r=0,n=0,i=e.length,o=i-2;n<i;o=n,n+=2)r+=(e[n]-e[o])*(e[n+1]+e[o+1]);if(0<r===t)for(n=0,i=e.length;n<i/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=a,e[i-1-n]=s}}ArrayUtils.deepClone=function(e){return Array.isArray(e)?e.map(ArrayUtils.deepClone):e};var defaults={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1};function createGeoJsonTile(e,t,r,n,i){var o=Object.assign({},defaults,i),a=convert(e,o),s=getBBox(a=wrap(a,o)),l=s.minX,c=s.minY,u=s.maxX,p=s.maxY,f=1<<t,h=o.buffer/o.extent,d=1+h;return a=clip(a,f,r-h,r+d,0,l,u,o)||[],transformTile(createTile(a=clip(a,f,n-h,n+d,1,c,p,o)||[],t,r,n,o),o.extent)}function getBBox(e){var t,r=2,n=-1,i=1,o=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.minX<r&&(r=s.minX),s.maxX>n&&(n=s.maxX),s.minY<i&&(i=s.minY),s.maxY>o&&(o=s.maxY)}}catch(e){a.e(e)}finally{a.f()}return{minX:r,maxX:n,minY:i,maxY:o}}function PackingSmith(e,t){this.items=[],this.algorithm=e;var r=void 0===(t=t||{}).sort||t.sort;this.sort=r}PackingSmith.prototype={addItem:function(e){this.items.push(e)},normalizeCoordinates:function(){var e=this.items,t=1/0,r=1/0;e.forEach((function(e){var n=e;t=Math.min(t,n.x),r=Math.min(r,n.y)})),e.forEach((function(e){var n=e;n.x-=t,n.y-=r}))},getStats:function(){var e=this.items.map((function(e){return e})),t=e.map((function(e){return e.x})),r=e.map((function(e){return e.y})),n=e.map((function(e){return e.x+e.width})),i=e.map((function(e){return e.y+e.height}));return{minX:Math.max.apply(Math,t),minY:Math.max.apply(Math,r),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,i)}},getItems:function(){return this.items},processItems:function(){var e=this.items;return this.sort&&(e=this.algorithm.sort(e)),e=this.algorithm.placeItems(e),this.items=e},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var e=this.exportItems(),t=this.getStats();return{height:t.maxY,width:t.maxX,items:e}}};var packing_smith=PackingSmith,lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var t,r,n,i;inited||init();var o=e.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");n="="===e[o-2]?2:"="===e[o-1]?1:0,i=new Arr(3*o/4-n),t=0<n?o-4:o;for(var a=0,s=0;s<t;s+=4,0)r=revLookup[e.charCodeAt(s)]<<18|revLookup[e.charCodeAt(s+1)]<<12|revLookup[e.charCodeAt(s+2)]<<6|revLookup[e.charCodeAt(s+3)],i[a++]=r>>16&255,i[a++]=r>>8&255,i[a++]=255&r;return 2==n?(r=revLookup[e.charCodeAt(s)]<<2|revLookup[e.charCodeAt(s+1)]>>4,i[a++]=255&r):1==n&&(r=revLookup[e.charCodeAt(s)]<<10|revLookup[e.charCodeAt(s+1)]<<4|revLookup[e.charCodeAt(s+2)]>>2,i[a++]=r>>8&255,i[a++]=255&r),i}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(tripletToBase64(n));return i.join("")}function fromByteArray(e){var t;inited||init();for(var r=e.length,n=r%3,i="",o=[],a=0,s=r-n;a<s;a+=16383)o.push(encodeChunk(e,a,s<a+16383?s:a+16383));return 1==n?(t=e[r-1],i+=lookup[t>>2],i+=lookup[t<<4&63],i+="=="):2==n&&(t=(e[r-2]<<8)+e[r-1],i+=lookup[t>>10],i+=lookup[t>>4&63],i+=lookup[t<<2&63],i+="="),o.push(i),o.join("")}var base64$1=Object.freeze({toByteArray:toByteArray,fromByteArray:fromByteArray});function read$1(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,p=r?i-1:0,f=r?-1:1,h=e[t+p];for(p+=f,o=h&(1<<-u)-1,h>>=-u,u+=s;0<u;o=256*o+e[t+p],p+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;0<u;a=256*a+e[t+p],p+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)}function write$1(e,t,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+p?f/l:f*Math.pow(2,1-p))*l&&(a++,l/=2),u<=a+p?(s=0,a=u):1<=a+p?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));8<=i;e[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;e[r+h]=255&a,h+=d,a/=256,c-=8);e[r+h-d]|=128*y}var toString$1={}.toString,isArray=Array.isArray||function(e){return"[object Array]"==toString$1.call(e)},INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=void 0===global$1.TYPED_ARRAY_SUPPORT||global$1.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"!=typeof e)return from(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}function from(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,n):"string"==typeof t?fromString$1(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,r,n){return assertSize(t),t<=0||void 0===r?createBuffer(e,t):"string"==typeof n?createBuffer(e,t).fill(r,n):createBuffer(e,t).fill(r)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString$1(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(t,r),i=(e=createBuffer(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function fromArrayBuffer(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function internalIsBuffer(e){return null!=e&&e._isBuffer}function byteLength(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),n=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf$1(e,t,r,n,i);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf$1(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf$1(e,t,r,n,i){var o=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,u=r;u<a;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===s)return c*o}else-1!==c&&(u-=u-c),c=-1;else for(a<r+s&&(r=a-s),u=r;0<=u;u--){for(var p=!0,f=0;f<s;f++)if(l(e,u+f)!==l(t,f)){p=!1;break}if(p)return u}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;(!n||i<(n=Number(n)))&&(n=i);var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?fromByteArray(e):fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,c=e[i],u=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=r)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,p=1):65535<u&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=p}return decodeCodePointsArray(n)}Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array),Buffer.alloc=function(e,t,r){return alloc(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=isBuffer,Buffer.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=Buffer.allocUnsafe(t),n=0,i=0;i<e.length;++i){var o=e[i];if(!internalIsBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,n,i){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=e.slice(t,r),u=0;u<s;++u)if(l[u]!==c[u]){o=l[u],a=c[u];break}return o<a?-1:a<o?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=t;o<r;++o)i+=toHex(e[o]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,i,o){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function checkIEEE754(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,i){return i||checkIEEE754(e,t,r,4,34028234663852886e22,-34028234663852886e22),write$1(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){return i||checkIEEE754(e,t,r,8,17976931348623157e292,-17976931348623157e292),write$1(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Buffer.prototype;else for(var n=t-e,i=new Buffer(n,void 0),o=0;o<n;++o)i[o]=this[o+e];return i},Buffer.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},Buffer.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},Buffer.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read$1(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read$1(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read$1(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read$1(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function(e,t,r,n){var i;e=+e,t|=0,n||checkInt(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){var i;e=+e,t|=0,n||checkInt(this,e,t,r,(i=Math.pow(2,8*r-1))-1,-i);var o=r-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t=t||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;0<=i;--i)e[i+t]=this[i+r];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){var i;if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(s=t;s<r;++s)this[s]=e;else for(var o=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,n).toString()),a=o.length,s=0;s<r-t;++s)this[s+t]=o[s%a];return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if(--t<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer:Buffer,SlowBuffer:SlowBuffer,isBuffer:isBuffer});global$1.setTimeout,global$1.clearTimeout;var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return(new Date).getTime()},inherits,inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){function r(){}e.super_=t,r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},inherits$1=inherits;function inspect(e,t){var r={seen:[],stylize:stylizeNoColor};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),isBoolean(t)?r.showHidden=t:t&&_extend(r,t),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var r=inspect.styles[t];return r?"\x1b["+inspect.colors[r][0]+"m"+e+"\x1b["+inspect.colors[r][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function formatValue(e,t,r){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return isString(n)||(n=formatValue(e,n,r)),n}var i=formatPrimitive(e,t);if(i)return i;var o=Object.keys(t),a=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),isError(t)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return formatError(t);if(0===o.length){if(isFunction(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var l,c="",u=!1,p=["{","}"];return isArray$1(t)&&(u=!0,p=["[","]"]),isFunction(t)&&(c=" [Function"+(t.name?": "+t.name:"")+"]"),isRegExp(t)&&(c=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(c=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(c=" "+formatError(t)),0!==o.length||u&&0!=t.length?r<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=u?formatArray(e,t,r,a,o):o.map((function(n){return formatProperty(e,t,r,a,n,u)})),e.seen.pop(),reduceToSingleString(l,c,p)):p[0]+c+p[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty$1(t,String(a))?o.push(formatProperty(e,t,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,r,n,i,!0))})),o}function formatProperty(e,t,r,n,i,o){var a,s,l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty$1(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?-1<(s=isNull(r)?formatValue(e,l.value,null):formatValue(e,l.value,r-1)).indexOf("\n")&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,r){return 60<e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject$1(e)&&"[object RegExp]"===objectToString$1(e)}function isObject$1(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject$1(e)&&"[object Date]"===objectToString$1(e)}function isError(e){return isObject$1(e)&&("[object Error]"===objectToString$1(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString$1(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject$1(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function compare(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var hasOwn=Object.prototype.hasOwnProperty,objectKeys$1=Object.keys||function(e){var t=[];for(var r in e)hasOwn.call(e,r)&&t.push(r);return t},pSlice=Array.prototype.slice,_functionsHaveNames;function functionsHaveNames(){return void 0!==_functionsHaveNames?_functionsHaveNames:_functionsHaveNames="foo"===function(){}.name}function pToString(e){return Object.prototype.toString.call(e)}function isView(e){if(!isBuffer(e)&&"function"==typeof global$1.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(e);if(e)return e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)}}function assert(e,t){e||fail(e,!0,t,"==",ok)}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(isFunction(e)){if(functionsHaveNames())return e.name;var t=e.toString().match(regex);return t&&t[1]}}function AssertionError(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var t,r,n,i,o,a=e.stackStartFunction||fail;Error.captureStackTrace?Error.captureStackTrace(this,a):(t=new Error).stack&&(o=t.stack,r=getName(a),0<=(n=o.indexOf("\n"+r))&&(i=o.indexOf("\n",n+1),o=o.substring(i+1)),this.stack=o)}function truncate(e,t){return"string"!=typeof e||e.length<t?e:e.slice(0,t)}function inspect$1(e){if(functionsHaveNames()||!isFunction(e))return inspect(e);var t=getName(e);return"[Function"+(t?": "+t:"")+"]"}function getMessage(e){return truncate(inspect$1(e.actual),128)+" "+e.operator+" "+truncate(inspect$1(e.expected),128)}function fail(e,t,r,n,i){throw new AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function ok(e,t){e||fail(e,!0,t,"==",ok)}function equal(e,t,r){e!=t&&fail(e,t,r,"==",equal)}function notEqual(e,t,r){e==t&&fail(e,t,r,"!=",notEqual)}function deepEqual(e,t,r){_deepEqual(e,t,!1)||fail(e,t,r,"deepEqual",deepEqual)}function deepStrictEqual(e,t,r){_deepEqual(e,t,!0)||fail(e,t,r,"deepStrictEqual",deepStrictEqual)}function _deepEqual(e,t,r,n){if(e===t)return!0;if(isBuffer(e)&&isBuffer(t))return 0===compare(e,t);if(isDate(e)&&isDate(t))return e.getTime()===t.getTime();if(isRegExp(e)&&isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(isView(e)&&isView(t)&&pToString(e)===pToString(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(isBuffer(e)!==isBuffer(t))return!1;var i=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),objEquiv(e,t,r,n))}return r?e===t:e==t}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,t,r,n){if(null==e||null==t)return!1;if(isPrimitive(e)||isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=isArguments(e),o=isArguments(t);if(i&&!o||!i&&o)return!1;if(i)return _deepEqual(e=pSlice.call(e),t=pSlice.call(t),r);var a,s,l=objectKeys$1(e),c=objectKeys$1(t);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;0<=s;s--)if(l[s]!==c[s])return!1;for(s=l.length-1;0<=s;s--)if(!_deepEqual(e[a=l[s]],t[a],r,n))return!1;return!0}function notDeepEqual(e,t,r){_deepEqual(e,t,!1)&&fail(e,t,r,"notDeepEqual",notDeepEqual)}function notDeepStrictEqual(e,t,r){_deepEqual(e,t,!0)&&fail(e,t,r,"notDeepStrictEqual",notDeepStrictEqual)}function strictEqual(e,t,r){e!==t&&fail(e,t,r,"===",strictEqual)}function notStrictEqual(e,t,r){e===t&&fail(e,t,r,"!==",notStrictEqual)}function expectedException(e,t){if(e&&t){if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return 1}catch(e){}if(!Error.isPrototypeOf(t))return!0===t.call({},e)}}function _tryBlock(e){var t;try{e()}catch(e){t=e}return t}function _throws(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=_tryBlock(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&fail(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!e&&i&&!r;if((!e&&isError(i)&&o&&expectedException(i,r)||a)&&fail(i,r,"Got unwanted exception"+n),e&&i&&r&&!expectedException(i,r)||!e&&i)throw i}function throws(e,t,r){_throws(!0,e,t,r)}function doesNotThrow(e,t,r){_throws(!1,e,t,r)}function ifError(e){if(e)throw e}assert.AssertionError=AssertionError,inherits$1(AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=equal,assert.notEqual=notEqual,assert.deepEqual=deepEqual,assert.deepStrictEqual=deepStrictEqual,assert.notDeepEqual=notDeepEqual,assert.notDeepStrictEqual=notDeepStrictEqual,assert.strictEqual=strictEqual,assert.notStrictEqual=notStrictEqual,assert.throws=throws,assert.doesNotThrow=doesNotThrow,assert.ifError=ifError;var sort=function(e){return e.sort((function(e,t){return e.height-t.height})),e},placeItems=function(e){var t=0;return e.forEach((function(e){e.x=0,e.y=t,t+=e.height})),e},topDown_algorithm={sort:sort,placeItems:placeItems},sort$1=function(e){return e.sort((function(e,t){return e.width-t.width})),e},placeItems$1=function(e){var t=0;return e.forEach((function(e){e.x=t,e.y=0,t+=e.width})),e},leftRight_algorithm={sort:sort$1,placeItems:placeItems$1},sort$2=function(e){return e.sort((function(e,t){return Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))-Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))})),e},placeItems$2=function(e){var t=0,r=0;return e.forEach((function(e){e.x=t,e.y=r,t+=e.width,r+=e.height})),e},diagonal_algorithm={sort:sort$2,placeItems:placeItems$2},sort$3=function(e){return e.sort((function(e,t){return Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))-Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))})),e},placeItems$3=function(e){var t=0,r=0;return e.forEach((function(e){var n=e.width;e.x=t-n,e.y=r,t-=n,r+=e.height})),e},altDiagonal_algorithm={sort:sort$3,placeItems:placeItems$3},GrowingPacker=function(){};GrowingPacker.prototype={fit:function(e){var t,r,n,i,o=e.length,a=0<o?e[0].width:0,s=0<o?e[0].height:0;for(this.root={x:0,y:0,width:a,height:s},t=0;t<o;t++)n=e[t],i=(r=this.findNode(this.root,n.width,n.height))?this.splitNode(r,n.width,n.height):this.growNode(n.width,n.height),n.x=i.x,n.y=i.y},findNode:function(e,t,r){return e.used?this.findNode(e.right,t,r)||this.findNode(e.down,t,r):t<=e.width&&r<=e.height?e:null},splitNode:function(e,t,r){return e.used=!0,e.down={x:e.x,y:e.y+r,width:e.width,height:e.height-r},e.right={x:e.x+t,y:e.y,width:e.width-t,height:r},e},growNode:function(e,t){var r=e<=this.root.width,n=t<=this.root.height,i=n&&this.root.height>=this.root.width+e,o=r&&this.root.width>=this.root.height+t;return i?this.growRight(e,t):o?this.growDown(e,t):n?this.growRight(e,t):r?this.growDown(e,t):null},growRight:function(e,t){var r;return this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}},(r=this.findNode(this.root,e,t))?this.splitNode(r,e,t):null},growDown:function(e,t){var r;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+t,down:{x:0,y:this.root.height,width:this.root.width,height:t},right:this.root},(r=this.findNode(this.root,e,t))?this.splitNode(r,e,t):null}};var packer_growing=GrowingPacker,binPack=function(e,t){t=t||{};var r=new packer_growing,n=t.inPlace||!1,i=(i=e.map((function(e){return n?e:{width:e.width,height:e.height,item:e}}))).sort((function(e,t){return t.width*t.height-e.width*e.height}));r.fit(i);var o={width:i.reduce((function(e,t){return Math.max(e,t.x+t.width)}),0),height:i.reduce((function(e,t){return Math.max(e,t.y+t.height)}),0)};return n||(o.items=i),o},sort$4=function(e){return e},placeItems$4=function(e){return binPack(e,{inPlace:!0}),e},binaryTree_algorithm={sort:sort$4,placeItems:placeItems$4},algorithms={};function Layout(e,t){var r=e||"top-down";return"string"==typeof r&&assert(r=algorithms[e],"Sorry, the '"+e+"' algorithm could not be loaded."),new packing_smith(r,t)}function addAlgorithm(e,t){algorithms[e]=t}Layout.PackingSmith=packing_smith,Layout.addAlgorithm=addAlgorithm,Layout.algorithms=algorithms,addAlgorithm("top-down",topDown_algorithm),addAlgorithm("left-right",leftRight_algorithm),addAlgorithm("diagonal",diagonal_algorithm),addAlgorithm("alt-diagonal",altDiagonal_algorithm),addAlgorithm("binary-tree",binaryTree_algorithm);var layout=Layout;function isTainting(e){var t;try{e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1)}catch(e){t=e.message}return t}function bitmapToCanvas(e,t,r){var n;return e instanceof HTMLImageElement&&((n=e.ownerDocument.createElement("canvas")).width=t,n.height=r,n.getContext("2d").drawImage(e,0,0,t,r),e=n),e}var MAX_LNG_LAT=Geo$1.metersToLatLng([Geo$1.half_circumference_meters,Geo$1.half_circumference_meters]),TILE_EXPONENT=Math.log(Geo$1.tile_size)/Math.LN2,ICON_READY=1,DOM_MARKER_TYPE=8,GROUP_TYPE=16,TILE_MARGIN=100,AFFECTED_BBOX_CALC_THRESHOLD=10,ObjectSource=function(){_inherits(t,MapsJsSource);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),i=e.call(this,r,n),Thread.is_worker&&(i._quad_tree=new ns.H.geo.QuadTree,i._marker_quad_tree=new ns.H.geo.QuadTree,i._tree_entries_by_object_id={},i._groups_by_id={},i._layersCache=new ns.H.util.Cache(100)),Thread.is_main&&(i._objects_by_id={},i._commands=[],i._sendCommands=debounce(i._sendCommands,100,200),i.dispatchUpdate=i.dispatchUpdate.bind(_assertThisInitialized(i))),i}return _createClass(t,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var e,t,r=this.provider.getRootGroup(),n=r.getObjects(!0),i=[];for(n.push(r),e=n.length;e--;)t=n[e],this._isObjectSupported(t)&&this._shouldBeStored(t)&&(this._objects_by_id[t.getId()]=t,i.push(t.forWorkerMessage()));var o=[{method_name:"addObjects",arguments:[i]}];this._sendImmediateCommands(o)}},{key:"onProviderUpdate",value:function(e){var t,r,n,i,o=e.target,a=e.currentTarget.getInvalidations(o.type);this._isObjectSupported(o)&&(t=this._synced_at,r=o.getId(),a.isRemove(t)?(delete this._objects_by_id[r],this._commands.push({method_name:"removeObjectsByIds",arguments:[[r],!0]})):a.isAdd(t)?this._shouldBeStored(o)&&(this._objects_by_id[r]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]})):a.isSpatial(t)||a.isZOrder(t)?this._shouldBeStored(o)&&(n=[{method_name:"removeObjectsByIds",arguments:[[r],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[r]=o).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(n):this._commands.push(n[0],n[1])):a.isVisual(t)?this._shouldBeStored(o)&&(i={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[r]=o).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([i]):this._commands.push(i)):a.isVolatility(t)&&(delete this._objects_by_id[r],this._commands.push({method_name:"removeObjectsByIds",arguments:[[r],!0]}),this._shouldBeStored(o)&&(this._objects_by_id[r]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=a.getMark()}},{key:"_shouldBeStored",value:function(e){return e.type===GROUP_TYPE||(!e.getIcon||e.getIcon().getState()===ICON_READY)&&this._hasSameVolatility(e)}},{key:"_hasSameVolatility",value:function(e){return e.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(e){e.length&&WorkerBroker.postMessage(this.worker,this.target_name+".executeCommands",e).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(e){return e.forWorkerMessage&&e.type!==DOM_MARKER_TYPE}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(e){return this._objects_by_id[e]}},{key:"getIconBitmapByObjectId",value:function(e,t){var r=this.getMapObjectById(e);if(r){var n=r.getIcon();if(n.uid===t&&n.getState()===ICON_READY){var i=n.getSize();return bitmapToCanvas(n.getBitmap(),i.w,i.h)}}}},{key:"_getRastersForMarkers",value:function(e){for(var t={},r=layout("binary-tree"),n=0;n<e.length;n++){var i=e[n],o=i.properties.icon;t[o.id]||(r.addItem({width:o.size.w,height:o.size.h,meta:{objectId:i.id,id:o.id}}),t[o.id]=!0)}return r.export()}},{key:"fetchFeaturesForTile",value:function(e){var r=[],n=[],i=[],o=[],a=[],s=this._marker_quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(e.coords,this.tile_size));e.source_data.error=null;for(var l=0;l<s.length;l++){var c={id:s[l].$feature$.id,properties:Object.assign({},s[l].$feature$.properties),geometry:{type:s[l].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(s[l].$feature$.geometry.coordinates)}};r.push(c)}s=this._quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(e.coords,this.tile_size,TILE_MARGIN));for(var u=0;u<s.length;u++){var p,f={id:s[u].$feature$.id,properties:Object.assign({},s[u].$feature$.properties),geometry:{type:s[u].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(s[u].$feature$.geometry.coordinates)}};f.properties.overlay?n.push(f):f.geometry.type.includes("LineString")?i.push(f):f.geometry.type.includes("Polygon")&&(o.push(f),p={id:f.id,properties:f.properties,geometry:{type:f.geometry.type,coordinates:ArrayUtils$1.deepClone(f.geometry.coordinates)}},a.push(p))}r.sort(t._compareZInfo),o.sort(t._compareZInfo),n.sort(t._compareZInfo);var h=this.has_volatile_data?4096:0;a.sort(t._compareZInfo);for(var d=0;d<a.length;d++)a[d].properties.effectiveZIdx=h++;i.sort(t._compareZInfo);for(var y=0;y<i.length;y++)i[y].properties.effectiveZIdx=h++;e.source_data.layers.markers={type:"FeatureCollection",features:r},e.source_data.layers.polylines={type:"FeatureCollection",features:i},e.source_data.layers.polygons={type:"FeatureCollection",features:o},e.source_data.layers.outlines={type:"FeatureCollection",features:a},e.source_data.layers.overlays={type:"FeatureCollection",features:n}}},{key:"tileTexture",value:function(e){var t=e.source_data.layers.overlays;if(t){var r=this.name+"_"+e.coords.key,n=Tile.coordinateWithMaxZoom(e.coords,this.max_zoom),i=t.features[0].properties.overlays_config;return{name:r,filtering:this.filtering,coords:n,width:Geo$1.tile_size,height:Geo$1.tile_size,overlays_config:i,source:this.name}}}},{key:"_load",value:function(e){var t=Geo$1.wrapTile(e.coords,{x:!0}),r=t.z,n=t.x,i=t.y,o="".concat(r,"_").concat(n,"_").concat(i),a=this._layersCache.get(o),s=!1;if(a)e.source_data.layers=a;else{this.fetchFeaturesForTile(e);var l={maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale},c=e.source_data.layers.overlays;c.features.length&&delete e.source_data.layers.overlays;var u=e.source_data.layers.markers;for(var p in u.features.length&&delete e.source_data.layers.markers,e.source_data.layers){var f,h=e.source_data.layers[p];h.features.length&&(l.buffer=p.includes("lines")?TILE_MARGIN*Geo$1.units_per_pixel:0,f=createGeoJsonTile(h,r,n,i,l),e.source_data.layers[p]=parseGeoJSONVectorTile(f))}e.source_data.layers.overlays=this._processOverlays(e,c);for(var d=e.source_data.layers.overlays.features.length;d--;)if(!e.source_data.layers.overlays.features[d].id){s=!0,this._layersCache.drop(o);break}e.source_data.layers.markers=this._processMarkers(e,u),this._postProcessTile(e),s||this._layersCache.add(o,e.source_data.layers,1)}return e.rasters=this._getRastersForMarkers(e.source_data.layers.markers.features),Promise.resolve(e)}},{key:"_processMarkers",value:function(e,t){var r=t.features.length;if(r){for(var n=Geo$1.unitsPerMeter(e.coords.z),i=Geo$1.wrapTile(e.coords,{x:!0}),o=Geo$1.metersForTile(i),a=Geo$1.isLastTile(i),s=Geo$1.wrapMeters(e.min),l=Geo$1.wrapMeters(e.max),c=function(t){DataSource.coordsToMeters(t);var r=_slicedToArray(t,2),i=r[0],c=r[1],u=i>=s.x&&(a.column||i<l.x)&&c>=l.y&&(a.row||!e.coords.y||c<s.y);return DataSource.metersToTileUnits(n,o,t),u},u=[],p=0;p<r;p++){var f,h=t.features[p].geometry,d=!1;"Point"===h.type?c(f=h.coordinates)?h.coordinates=f:d=!0:"MultiPoint"===h.type&&(h.coordinates=h.coordinates.filter(c),0===h.coordinates.length&&(d=!0)),d||u.push(t.features[p])}t.features=u}return t}},{key:"_processOverlays",value:function(e,t){var r=this;if(!t.features.length)return t;var n={coords:e.coords,min:Geo$1.metersForTile(Geo$1.wrapTile(e.coords,{x:!0}))},i={coords:e.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:t.features}}}},o=Math.pow(2,e.coords.z+TILE_EXPONENT);MapsJsSource.projectData(i.source_data),MapsJsSource.scaleData(i.source_data,n);var a=t.features.map((function(e){var t=e.geometry.coordinates[0],r=t[0],n=t[5===t.length?2:3],i=Math.floor(r[0]/Geo$1.tile_scale*Geo$1.tile_size),a=Math.floor(r[1]/Geo$1.tile_scale*Geo$1.tile_size),s=Math.floor(n[0]/Geo$1.tile_scale*Geo$1.tile_size),l=Math.floor(n[1]/Geo$1.tile_scale*Geo$1.tile_size)-a,c=s<=i,u=c?o-(i-s):s-i,p=[];return i<=Geo$1.tile_size&&p.push([i,a,u,l]),c&&0<s&&p.push([i-o,a,u,l]),{id:e.id,properties:e.properties,texcoords:p}})).filter((function(t){return r._isVisible(t.properties)&&r.isInMinMaxRange(t.properties,e.style_zoom)})),s=Geo$1.tile_scale;return e.pad_scale=this.pad_scale,e.default_winding="CW",t.features=a.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[s,0],[s,s],[0,s],[0,0]]]},properties:{overlays_config:a}}]:a,t}},{key:"executeCommands",value:function(e){for(var t,r=e.length<AFFECTED_BBOX_CALC_THRESHOLD,n=0;n<e.length;n++){var i=e[n];i.arguments.push(r);var o=this[i.method_name].apply(this,i.arguments);r&&(o&&t?t.mergeRect(o,!0,t):o&&(t=o))}return t?t.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(e){var t=e.geometry.boundingBox;return new ns.H.geo.Rect(MathUtils$1.clamp(t[0],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),t[1],MathUtils$1.clamp(t[2],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),t[3])}},{key:"addObjects",value:function(e,r){for(var n,i=1<arguments.length&&void 0!==r&&r,o=0;o<e.length;o++){var a,s,l,c=e[o];"Group"===c.type?(c.$children_ids$={},this._groups_by_id[c.id]=c):(t._preprocessGeometry(c.geometry),a=this._getClampedGeoRectForFeature(c),i&&(n?n.mergeRect(a,!0,n):n=a),(l=(s=-1!==c.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(a)).$tree=s,l.$feature$=c,this._tree_entries_by_object_id[c.id]=l)}for(var u=0;u<e.length;u++){var p=e[u];p.properties.parent&&(this._groups_by_id[p.properties.parent].$children_ids$[p.id]=p.id),p.properties.ref={effectiveVisibility:this._isVisible(p.properties),zInfo:this._getZInfo([],p)}}return this._layersCache.removeAll(),n}},{key:"removeObjectsByIds",value:function(e,t,r){for(var n,i=2<arguments.length&&void 0!==r&&r,o=0;o<e.length;o++){var a,s=e[o],l=void 0,c=void 0;(l=this._tree_entries_by_object_id[s])?(i&&(a=this._getClampedGeoRectForFeature(l.$feature$),n?n.mergeRect(a,!0,n):n=a),delete this._groups_by_id[l.$feature$.properties.parent].$children_ids$[s],l.$tree.remove(l),delete this._tree_entries_by_object_id[s]):(c=this._groups_by_id[s])&&(c.properties.parent&&delete this._groups_by_id[c.properties.parent].$children_ids$[s],t&&this.removeObjectsByIds(Object.keys(c.$children_ids$),!0),delete this._groups_by_id[s])}return this._layersCache.removeAll(),n}},{key:"updateObjectProperties",value:function(e,t){var r,n=1<arguments.length&&void 0!==t&&t;return"Group"===e.type?(mergeObjects(this._groups_by_id[e.id].properties,e.properties),this._groups_by_id[e.id].properties.ref.effectiveVisibility=this._isVisible(e.properties)):(this._tree_entries_by_object_id[e.id]||this.addObjects([e]),mergeObjects(this._tree_entries_by_object_id[e.id].$feature$.properties,e.properties),this._tree_entries_by_object_id[e.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(e.properties),n&&(r=this._getClampedGeoRectForFeature(e))),r}},{key:"_getZInfo",value:function(e,t){var r=t.properties.zIdx,n=t.properties.sIdx;return e[0]|=void 0!==r,e.splice(1,0,r||0,n<0?t.id:n),0===t.properties.parent?e:this._getZInfo(e,this._groups_by_id[t.properties.parent])}},{key:"_isVisible",value:function(e){var t=e.visible,r=!e.parent||this._isVisible(this._groups_by_id[e.parent].properties);return t&&r}},{key:"isInMinMaxRange",value:function(e,t){var r=e.min<=t&&e.max>=t,n=!e.parent||this.isInMinMaxRange(this._groups_by_id[e.parent].properties,t);return r&&n}},{key:"dispose",value:function(){this._commands=[],_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(e,t){for(var r,n=e.properties.ref.zInfo,i=t.properties.ref.zInfo,o=n.length,a=i.length,s=Math.min(o,a),l=1;l<s;l++)if(r=n[l]-i[l])return r;return o-a}},{key:"_preprocessGeometry",value:function(e){var r=e.type;e.coordinates="Point"===r?t._processPointCoordinates(e.coordinates):"MultiPoint"===r?e.coordinates.map(t._processPointCoordinates):"LineString"===r?t._processLineStringCoordinates(e.coordinates):"MultiLineString"===r?e.coordinates.map(t._processLineStringCoordinates):"Polygon"===r?e.coordinates.map(t._processPolygonCoordinates):"MultiPolygon"===r?e.coordinates.map(t._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(e){return[e[1],e[0],e[2]]}},{key:"_processLineStringCoordinates",value:function(e){return t._latLngAltArrayToLineString(e,!1)}},{key:"_processPolygonCoordinates",value:function(e){return t._latLngAltArrayToLineString(e,!0)}},{key:"_processMultiPolygonCoordinates",value:function(e){return e.map(t._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(e,t){for(var r=[],n=e.length,i=0;i<n;i+=3)r.push([e[i+1],e[i]]);return t&&r.push([e[1],e[0]]),r}}]),t}();MapsJsSource.register(ObjectSource,"ObjectSource");var GEOMETRY_TYPE={POLYGON:1,POLYLINE:2,OUTLINE:3},IconMap=function(){function e(){_classCallCheck(this,e),this._map={}}return _createClass(e,[{key:"set",value:function(e,t,r){var n;this._map[e]?this._map[e].accumulator.add(r):((n=new Set).add(r),this._map[e]={value:t,accumulator:n})}},{key:"get",value:function(e){return this._map[e]&&this._map[e].value}},{key:"delete",value:function(e,t){var r=this._map[e];r&&r.accumulator&&(r.accumulator.delete(t),0===r.accumulator.size&&delete this._map[e])}}]),e}(),ObjectTileSource=function(){_inherits(t,MapsJsSource);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),i=e.call(this,r,n),Thread.is_worker||(i._icons=new IconMap),i}return _createClass(t,[{key:"onProviderUpdate",value:function(e){e.target instanceof H.map.provider.Tile?this.dispatchUpdate(e.target,e.data):this.dispatchUpdate(void 0,e.data)}},{key:"onReady",value:function(){var e=this.provider;e.setTileCanvasRendering&&e.setTileCanvasRendering(!1),e.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),e.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){_get(_getPrototypeOf(t.prototype),"dispose",this).call(this);var e=this.provider;e.providesMarkers()&&e.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(e,t){this.provider.cacheFilter(e)&&this._deleteIcons(e,t.data)}},{key:"_deleteIcons",value:function(e,t){for(var r=0,n=t.length;r<n;r++){var i=t[r].getIcon();this._icons.delete(i.uid,e)}}},{key:"getIconBitmapByObjectId",value:function(e,t){var r=this._icons.get(t);return r&&r.getBitmap()}},{key:"requestMarkerTile",value:function(e){var t=this;return new Promise((function(r,n){t.provider?t.provider.requestTileAsPromise(e.x,e.y,e.z,!1).then((function(e){var n,i,o=[];if(e.data)for(i=(n=e.data).length;i--;){var a=n[i],s=a.getIcon();t._icons.set(s.uid,s,e.key),o.push(a.forWorkerMessage())}r(o)})):r([])}))}},{key:"requestSpatialTile",value:function(e){var t=this;return new Promise((function(r,n){t.provider?t.provider.requestTileAsPromise(e.x,e.y,e.z,!1).then((function(e){var t,n=[];if(e.getObjects){t=e.getObjects();for(var i=0;i<t.length;i++){var o=t[i];n.push({id:o.getId(),geometries:o.getGeometriesForTile(e),isClosed:o.isClosed(),style:o.getStyle().forWorkerMessage()})}}r(n)})):r([])}))}},{key:"_pointToArray",value:function(e){var t=Geo$1.tile_scale/this.tile_size;return[e.x*t,e.y*t]}},{key:"_getGeoJsonMultiPolygon",value:function(e){for(var t=e.geometries,r=t.length,n=[],i={coordinates:n,type:"MultiPolygon"},o=0;o<r;o++){var a=t[o],s=a.paths,l=s.length,c=a.interiorsIndex,u=a.outlinesIndex,p=Math.min(c,u,l),f=void 0,h=void 0;for(h=0;h<p;h++)f=[s[h].map(this._pointToArray,this)],n.push(f);if(1===p)for(p=Math.min(u,l),h=c;h<p;h++)f.push(s[h].map(this._pointToArray,this))}return i}},{key:"_getGeoJsonMultiLineString",value:function(e,t){for(var r=1<arguments.length&&void 0!==t&&t,n={coordinates:[],type:"MultiLineString"},i=e.geometries,o=0;o<i.length;o++)for(var a=i[o],s=r?a.outlinesIndex:0,l=r?a.paths.length:Math.min(a.interiorsIndex,a.outlinesIndex,a.paths.length),c=s;c<l;c++){var u=a.paths[c].map(this._pointToArray,this);n.coordinates.push(u)}return n}},{key:"_getGeoJsonGeometry",value:function(e,t){var r=t===GEOMETRY_TYPE.POLYGON?this._getGeoJsonMultiPolygon(e):this._getGeoJsonMultiLineString(e,t===GEOMETRY_TYPE.OUTLINE);return r.coordinates.length?r:null}},{key:"_load",value:function(e){var t=this;return new Promise((function(r,n){var i=WorkerBroker.postMessage(t.target_name+".requestMarkerTile",e.coords).then(t._prepareTileData.bind(t,e)),o=new Promise((function(r,n){WorkerBroker.postMessage(t.target_name+".requestSpatialTile",e.coords).then((function(n){for(var i=[],o=[],a=[],s=0;s<n.length;s++){var l,c=n[s],u=void 0,p=c.isClosed?(u=o,GEOMETRY_TYPE.POLYGON):(u=i,GEOMETRY_TYPE.POLYLINE),f=t._getGeoJsonGeometry(c,p);f&&(l={id:c.id,type:"Feature",properties:{height:0,style:c.style},geometry:f},p===GEOMETRY_TYPE.POLYLINE&&(l.properties.effectiveZIdx=i.length),u.push(l));var h=t._getGeoJsonGeometry(c,GEOMETRY_TYPE.OUTLINE);h&&a.push({id:c.id,type:"Feature",properties:{height:0,style:c.style,effectiveZIdx:a.length},geometry:h})}e.source_data.layers.polylines={type:"FeatureCollection",features:i},e.source_data.layers.polygons={type:"FeatureCollection",features:o},e.source_data.layers.outlines={type:"FeatureCollection",features:a},r(e)}))}));Promise.all([i,o]).then((function(n){t._postProcessTile(e),r(e)}))}))}},{key:"_prepareTileData",value:function(e,t){var r=Geo$1.wrapTile(e.coords,{x:!0,y:!0}),n=Geo$1.metersForTile(r);e.source_data.layers={markers:{features:t,type:"FeatureCollection"}};var i={coords:r,min:n},o=e.source_data,a=layout("binary-tree"),s={};for(var l in o.layers)for(var c=o.layers[l].features.length,u=0;u<c;u++){var p=o.layers[l].features[u],f=p.properties.icon;s[f.id]||(a.addItem({width:f.size.w,height:f.size.h,meta:{objectId:p.id,id:f.id}}),s[f.id]=!0),Geo$1.transformGeometry(p.geometry,(function(e){var t=e[0];e[0]=e[1],e[1]=t}))}return e.rasters=a.export(),MapsJsSource.projectData(e.source_data),MapsJsSource.scaleData(e.source_data,i),e}}]),t}();MapsJsSource.register(ObjectTileSource,"ObjectTileSource");var RemoteRasterTileSource=function(){_inherits(t,RasterTileSource);var e=_createSuper(t);function t(r,n){var i;return _classCallCheck(this,t),(i=e.call(this,r,n)).uid_=r.uid,i}return _createClass(t,[{key:"initialize",value:function(e,t){this.provider=e,this._on_update=t,this._onProviderUpdate=this._onProviderUpdate.bind(this),e.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(e){return Object.assign(_get(_getPrototypeOf(t.prototype),"tileTexture",this).call(this,e),{uid:this.uid_,url:this.uid_+"_"+e.coords.key,coords:e.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),t}();function geojsonvt(e,t){return new GeoJSONVT(e,t)}function GeoJSONVT(e,t){var r=(t=this.options=extend(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||24<t.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=convert(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=wrap(n,t)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,t,r){return 32*((1<<e)*r+t)+e}function extend(e,t){for(var r in t)e[r]=t[r];return e}DataSource.register(RemoteRasterTileSource,"RemoteRasterTileSource"),GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},GeoJSONVT.prototype.splitTile=function(e,t,r,n,i,o,a){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u,p,f,h,d,y,m,v,g,b,_,w=1<<t,x=toID(t,r,n),E=this.tiles[x];if(E||(1<c&&console.time("creation"),E=this.tiles[x]=createTile(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c&&(1<c&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,E.numFeatures,E.numPoints,E.numSimplified),console.timeEnd("creation")),u="z"+t,this.stats[u]=(this.stats[u]||0)+1,this.total++)),E.source=e,i){if(t===l.maxZoom||t===i)continue;var S=1<<i-t;if(r!==Math.floor(o/S)||n!==Math.floor(a/S))continue}else if(t===l.indexMaxZoom||E.numPoints<=l.indexMaxPoints)continue;E.source=null,0!==e.length&&(1<c&&console.time("clipping"),f=.5-(p=.5*l.buffer/l.extent),d=1+p,g=y=m=v=null,b=clip(e,w,r-p,r+(h=.5+p),0,E.minX,E.maxX,l),_=clip(e,w,r+f,r+d,0,E.minX,E.maxX,l),e=null,b&&(g=clip(b,w,n-p,n+h,1,E.minY,E.maxY,l),y=clip(b,w,n+f,n+d,1,E.minY,E.maxY,l),b=null),_&&(m=clip(_,w,n-p,n+h,1,E.minY,E.maxY,l),v=clip(_,w,n+f,n+d,1,E.minY,E.maxY,l),_=null),1<c&&console.timeEnd("clipping"),s.push(g||[],t+1,2*r,2*n),s.push(y||[],t+1,2*r,2*n+1),s.push(m||[],t+1,2*r+1,2*n),s.push(v||[],t+1,2*r+1,2*n+1))}},GeoJSONVT.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,o=n.debug;if(e<0||24<e)return null;var a=1<<e,s=toID(e,t=(t%a+a)%a,r);if(this.tiles[s])return transformTile(this.tiles[s],i);1<o&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,c=e,u=t,p=r;!l&&0<c;)c--,u=Math.floor(u/2),p=Math.floor(p/2),l=this.tiles[toID(c,u,p)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",c,u,p),1<o&&console.time("drilling down"),this.splitTile(l.source,c,u,p,e,t,r),1<o&&console.timeEnd("drilling down"),this.tiles[s]?transformTile(this.tiles[s],i):null):null};var EMPTY_FEATURE_COLLECTION$1={type:"FeatureCollection",features:[]},GeoJSONTileSource=function(){_inherits(t,MapsJsSource);var e=_createSuper(t);function t(r,n){return _classCallCheck(this,t),r.tiled=!0,r.url="",e.call(this,r,n)}return _createClass(t,[{key:"fetchTile",value:function(e,t,r){return this.provider?this.provider.requestTileAsPromise(e,t,r).then((function(e){return e.data})):Promise.resolve(EMPTY_FEATURE_COLLECTION$1)}},{key:"_load",value:function(e){var t=this,r=Geo$1.wrapTile(e.coords,{x:!0,y:!0}),n={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale};return WorkerBroker.postMessage(this.target_name+".fetchTile",r.x,r.y,r.z).then((function(i){for(var o in e.source_data.layers="FeatureCollection"===i.type?{_default:i}:i,e.source_data.layers){var a=geojsonvt(e.source_data.layers[o],n).getTile(r.z,r.x,r.y);e.source_data.layers[o]=parseGeoJSONVectorTile(a)}return t._postProcessTile(e),e}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),t}();DataSource.register(GeoJSONTileSource,"GeoJSONTileSource");var DEFAULT_RESPONSE={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},SkyBoxSource=function(){_inherits(t,DataSource);var e=_createSuper(t);function t(r,n){return _classCallCheck(this,t),r.max_zoom=0,e.call(this,r,n)}return _createClass(t,[{key:"load",value:function(e){return e.source_data="0/0/0"===e.coords.key?DEFAULT_RESPONSE:void 0,Promise.resolve(e)}}]),t}(),debugSettings;DataSource.register(SkyBoxSource,"SkyBox");var debugSettings$1=debugSettings={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function mergeDebugSettings(e){Object.assign(debugSettings,e)}var WorkerType={NATIVE:0,FAKE:1},Context;function sliceObject(e,t){var r={};return t.forEach((function(t){return r[t]=e[t]})),r}var Context$1=Context={},context_id=0,gl;Context.getContext=function(e,t){var r=!1;null==e&&((e=document.createElement("canvas")).style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-1,document.body.appendChild(e),r=!0);var n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!n)throw new Error("Couldn't create WebGL context.");return n._tangram_id=context_id++,r?(Context.resize(n,window.innerWidth,window.innerHeight,t.device_pixel_ratio),window.addEventListener("resize",(function(){Context.resize(n,window.innerWidth,window.innerHeight,t.device_pixel_ratio)}))):Context.resize(n,parseFloat(e.style.width),parseFloat(e.style.height),t.device_pixel_ratio),n},Context.resize=function(e,t,r,n){e.canvas.style.width=t+"px",e.canvas.style.height=r+"px",e.canvas.width=Math.round(t*n),e.canvas.height=Math.round(r*n),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)};var gl$1=gl={};gl.BYTE=5120,gl.UNSIGNED_BYTE=5121,gl.SHORT=5122,gl.UNSIGNED_SHORT=5123,gl.INT=5124,gl.UNSIGNED_INT=5125,gl.FLOAT=5126;var MAX_VALUE$1=Math.pow(2,16)-1,DEFAULT_SIZE=1024,HAS_ELEMENT_INDEX_UINT=!1,VertexElements=function(){function e(t){_classCallCheck(this,e),this.size_=t||DEFAULT_SIZE,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return _createClass(e,[{key:"push",value:function(e){if(!this.overflows_||HAS_ELEMENT_INDEX_UINT){if(MAX_VALUE$1<e){if(this.overflows_=!0,!HAS_ELEMENT_INDEX_UINT)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=e,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var e=this.buffer_,t=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,e.subarray(0,t)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var e=new this.ArrayType_(this.size_);e.set(this.buffer_),this.buffer_=e}}]),e}(),_array_types;VertexElements.setElementIndexUint=function(e){HAS_ELEMENT_INDEX_UINT=e};var array_types=(_array_types={},_defineProperty(_array_types,gl$1.FLOAT,Float32Array),_defineProperty(_array_types,gl$1.BYTE,Int8Array),_defineProperty(_array_types,gl$1.UNSIGNED_BYTE,Uint8Array),_defineProperty(_array_types,gl$1.INT,Int32Array),_defineProperty(_array_types,gl$1.UNSIGNED_INT,Uint32Array),_defineProperty(_array_types,gl$1.SHORT,Int16Array),_defineProperty(_array_types,gl$1.UNSIGNED_SHORT,Uint16Array),_array_types),VertexData=function(){function e(t){var r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,n=void 0===r?500:r;_classCallCheck(this,e),this.vertex_layout=t,this.vertex_elements=new VertexElements,this.stride=this.vertex_layout.stride,0<e.array_pool.length?(this.vertex_buffer=e.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),log("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=n,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _createClass(e,[{key:"setBufferViews",value:function(){var e=this;this.views={},this.views[gl$1.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach((function(t){var r;null==e.views[t.type]&&(r=array_types[t.type],e.views[t.type]=new r(e.vertex_buffer.buffer))}))}},{key:"checkBufferSize",value:function(){var t;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(t=new Uint8Array(this.byte_length)).set(this.vertex_buffer),e.array_pool.push(this.vertex_buffer),this.vertex_buffer=t,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(e){this.checkBufferSize(),this.vertexLayoutAddVertex(e,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),log("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),e}();VertexData.array_pool=[];var VertexLayout=function(){function e(t){_classCallCheck(this,e),this.attribs=t,this.dynamic_attribs=this.attribs.filter((function(e){return!e.static})),this.components=[],this.index={},this.offset={};for(var r=this.stride=0,n=0,i=0;i<this.attribs.length;i++){var o=this.attribs[i];if(null==o.static){o.offset=this.stride,o.byte_size=o.size;var a=0;switch(o.type){case gl$1.FLOAT:case gl$1.INT:case gl$1.UNSIGNED_INT:o.byte_size*=4,a=2;break;case gl$1.SHORT:case gl$1.UNSIGNED_SHORT:o.byte_size*=2,a=1}3&o.byte_size&&(o.byte_size+=4-(3&o.byte_size)),this.stride+=o.byte_size;for(var s=o.offset>>a,l=0;l<o.size;l++)this.components.push({type:o.type,shift:a,offset:s++,index:n++});this.index[o.name]=r,r+=o.size,this.offset[o.name]=o.offset}else o.static=Array.isArray(o.static)?o.static:[o.static],o.method="vertexAttrib".concat(o.static.length,"fv")}}return _createClass(e,[{key:"enable",value:function(t,r,n){for(var i,o,a=0;a<this.attribs.length;a++)i=this.attribs[a],-1!==(o=r.attribute(i.name).location)&&(null==i.static?(e.enabled_attribs[o]&&!n||t.enableVertexAttribArray(o),t.vertexAttribPointer(o,i.size,i.type,i.normalized,this.stride,i.offset),e.enabled_attribs[o]=r):t[i.method]instanceof Function&&(t.enableVertexAttribArray(o),t[i.method](o,i.static),t.disableVertexAttribArray(o),delete e.enabled_attribs[o]));for(o in e.enabled_attribs)this.disableUnusedAttribute(t,o,r)}},{key:"disableUnusedAttribute",value:function(t,r,n){e.enabled_attribs[r]!==n&&(t.disableVertexAttribArray(r),delete e.enabled_attribs[r])}},{key:"createVertexData",value:function(){return new VertexData(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var t=hashString(JSON.stringify(this.attribs));if(null==e.add_vertex_funcs[t]){var r,n=["var t, o;"],i=_toConsumableArray(this.components);i.sort((function(e,t){return e.type!==t.type?e.type-t.type:e.index-t.index}));for(var o=0;o<i.length;o++){var a=i[o];r!==a.type&&(n.push("t = vs[".concat(a.type,"];")),n.push("o = off".concat(a.shift?" >> "+a.shift:"",";")),r=a.type),n.push("t[o + ".concat(a.offset,"] = v[").concat(a.index,"];"))}n=n.join("\n");var s=new Function("v","vs","off",n);e.add_vertex_funcs[t]=s}this.addVertex=e.add_vertex_funcs[t]}}]),e}();VertexLayout.enabled_attribs={},VertexLayout.add_vertex_funcs={};var tile_bounds=[{x:0,y:0},{x:Geo$1.tile_scale,y:-Geo$1.tile_scale}],default_uvs=[0,0,1,1];function outsideTile(e,t,r){var n=tile_bounds[0],i=tile_bounds[1];return e[0]<=n.x+r&&t[0]<=n.x+r||e[0]>=i.x-r&&t[0]>=i.x-r||e[1]>=n.y-r&&t[1]>=n.y-r||e[1]<=i.y+r&&t[1]<=i.y+r}function isCoordOutsideTile(e,t){t=t||0;var r=tile_bounds[0],n=tile_bounds[1];return e[0]<=r.x+t||e[0]>=n.x-t||e[1]>=r.y-t||e[1]<=n.y+t}var earcut_1=earcut;function earcut(e,t,r){r=r||2;var n,i,o,a,s,l,c,u=t&&t.length,p=u?t[0]*r:e.length,f=linkedList(e,0,p,r,!0),h=[];if(!f)return h;if(u&&(f=eliminateHoles(e,t,f,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var d=r;d<p;d+=r)(s=e[d])<n&&(n=s),(l=e[d+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);c=Math.max(o-n,a-i)}return earcutLinked(f,h,r,n,i,c),h}function linkedList(e,t,r,n,i){var o,a;if(i===0<signedArea$1(e,t,r,n))for(o=t;o<r;o+=n)a=insertNode(o,e[o],e[o+1],a);else for(o=r-n;t<=o;o-=n)a=insertNode(o,e[o],e[o+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,t){if(!e)return e;t=t||e;var r,n=e;do{if(r=!1,n.steiner||!equals(n,n.next)&&0!==area(n.prev,n,n.next))n=n.next;else{if(removeNode(n),(n=t=n.prev)===n.next)return null;r=!0}}while(r||n!==t);return t}function earcutLinked(e,t,r,n,i,o,a){if(e){!a&&o&&indexCurve(e,n,i,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?isEarHashed(e,n,i,o):isEar(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),removeNode(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?earcutLinked(e=cureLocalIntersections(e,t,r),t,r,n,i,o,2):2===a&&splitEarcut(e,t,r,n,i,o):earcutLinked(filterPoints(e),t,r,n,i,o,1);break}}}function isEar(e){var t=e.prev,r=e,n=e.next;if(!(0<=area(t,r,n))){for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&0<=area(i.prev,i,i.next))return;i=i.next}return 1}}function isEarHashed(e,t,r,n){var i=e.prev,o=e,a=e.next;if(!(0<=area(i,o,a))){for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=zOrder(s,l,t,r,n),f=zOrder(c,u,t,r,n),h=e.nextZ;h&&h.z<=f;){if(h!==e.prev&&h!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=area(h.prev,h,h.next))return;h=h.nextZ}for(h=e.prevZ;h&&h.z>=p;){if(h!==e.prev&&h!==e.next&&pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&0<=area(h.prev,h,h.next))return;h=h.prevZ}return 1}}function cureLocalIntersections(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!equals(i,o)&&intersects(i,n,n.next,o)&&locallyInside(i,o)&&locallyInside(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),removeNode(n),removeNode(n.next),n=e=o),n=n.next}while(n!==e);return n}function splitEarcut(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&isValidDiagonal(a,s)){var l=splitPolygon(a,s);a=filterPoints(a,a.next),l=filterPoints(l,l.next);return earcutLinked(a,t,r,n,i,o),void earcutLinked(l,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function eliminateHoles(e,t,r,n){for(var i,o=[],a=0,s=t.length;a<s;a++)(i=linkedList(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n,!1))===i.next&&(i.steiner=!0),o.push(getLeftmost(i));for(o.sort(compareX),a=0;a<o.length;a++)eliminateHole(o[a],r),r=filterPoints(r,r.next);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){var r;(t=findHoleBridge(e,t))&&filterPoints(r=splitPolygon(t,e),r.next)}function findHoleBridge(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&a<s){if((a=s)===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var l,c=r,u=r.x,p=r.y,f=1/0;for(n=r.next;n!==c;)i>=n.x&&n.x>=u&&pointInTriangle(o<p?i:a,o,u,p,o<p?a:i,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(i-n.x))<f||l===f&&n.x>r.x)&&locallyInside(n,e)&&(r=n,f=l),n=n.next;return r}function indexCurve(e,t,r,n){for(var i=e;null===i.z&&(i.z=zOrder(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==e;);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var t,r,n,i,o,a,s,l,c=1;do{for(r=e,o=e=null,a=0;r;){for(a++,n=r,t=s=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;0<s||0<l&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(r=(i=r).nextZ,s--):(n=(i=n).nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(1<a);return e}function zOrder(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function getLeftmost(e){for(var t=e,r=e;t.x<r.x&&(r=t),(t=t.next)!==e;);return r}function pointInTriangle(e,t,r,n,i,o,a,s){return 0<=(i-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(r-a)*(t-s)&&0<=(r-a)*(o-s)-(i-a)*(n-s)}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,n){return equals(e,t)&&equals(r,n)||equals(e,n)&&equals(r,t)||0<area(e,t,r)!=0<area(e,t,n)&&0<area(r,n,e)!=0<area(r,n,t)}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return 1;r=r.next}while(r!==e)}function locallyInside(e,t){return area(e.prev,e,e.next)<0?0<=area(e,t,e.next)&&0<=area(e,e.prev,t):area(e,t,e.prev)<0||area(e,e.next,t)<0}function middleInside(e,t){for(var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),(r=r.next)!==e;);return n}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),n=new Node(t.i,t.x,t.y),i=e.next,o=t.prev;return(e.next=t).prev=e,(r.next=i).prev=r,(n.next=r).prev=n,(o.next=n).prev=o,n}function insertNode(e,t,r,n){var i=new Node(e,t,r);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea$1(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}earcut.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(signedArea$1(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var c=t[s]*r,u=s<l-1?t[s+1]*r:e.length;a-=Math.abs(signedArea$1(e,c,u,r))}var p=0;for(s=0;s<n.length;s+=3){var f=n[s]*r,h=n[s+1]*r,d=n[s+2]*r;p+=Math.abs((e[f]-e[d])*(e[1+h]-e[1+f])-(e[f]-e[h])*(e[1+d]-e[1+f]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);0<i&&(n+=e[i-1].length,r.holes.push(n))}return r};var up_vec3=[0,0,1];function buildPolygons(e,t,r,n){var i,o,a,s,l,c=n.texcoord_index,u=n.texcoord_scale,p=n.texcoord_normalize,f=t.vertex_elements;c&&(p=p||1,o=(i=_slicedToArray(u||default_uvs,4))[0],a=i[1],s=i[2],l=i[3]);for(var h=0,d=e.length,y=0;y<d;y++){var m,v,g,b,_,w=t.vertex_count,x=e[y];c&&(v=(m=_slicedToArray(Geo$1.findBoundingBox(x),4))[0],g=m[1],b=(s-o)/(m[2]-v),_=(l-a)/(m[3]-g));for(var E=0;E<x.length;E++)for(var S=x[E],k=0;k<S.length;k++){var T=S[k];r[0]=T[0],r[1]=T[1],c&&(r[c+0]=((T[0]-v)*b+o)*p,r[c+1]=((T[1]-g)*_+a)*p),t.addVertex(r)}for(var O=triangulatePolygon(earcut_1.flatten(x)),A=0;A<O.length;A++)f.push(w+O[A]);h+=O.length/3}return h}function buildExtrudedPolygons(e,t,r,n,i,o,a,s,l){var c=l.remove_tile_edges,u=l.tile_edge_tolerance,p=l.texcoord_index,f=l.texcoord_scale,h=l.texcoord_normalize,d=l.winding,y=t+(n||0),m=t+r;o[2]=m;var v,g,b,_,w,x,E=buildPolygons(e,i,o,{texcoord_index:p,texcoord_scale:f,texcoord_normalize:h}),S=i.vertex_elements,k=i.vertex_count;p&&(h=h||1,g=(v=_slicedToArray(f||default_uvs,4))[0],b=v[1],_=v[2],x=[[g,w=v[3]],[g,b],[_,b],[_,w]]);for(var T=e.length,O=0;O<T;O++)for(var A=e[O],P=0;P<A.length;P++)for(var C=A[P],N=0;N<C.length-1;N++)if(!c||!outsideTile(C[N],C[N+1],u)){var R,j=void 0,M=[[C[R="CCW"===d?(j=N)+1:(j=N+1,N)][0],C[R][1],m],[C[R][0],C[R][1],y],[C[j][0],C[j][1],y],[C[j][0],C[j][1],m]],I=Vector$1.normalize([C[R][0]-C[j][0],C[R][1]-C[j][1],0]),D=Vector$1.cross(up_vec3,I);o[a+0]=D[0]*s,o[a+1]=D[1]*s,o[a+2]=D[2]*s;for(var L=0;L<M.length;L++)o[0]=M[L][0],o[1]=M[L][1],o[2]=M[L][2],p&&(o[p+0]=x[L][0]*h,o[p+1]=x[L][1]*h),i.addVertex(o);S.push(k+0),S.push(k+1),S.push(k+2),S.push(k+2),S.push(k+3),S.push(k+0),k+=4,E+=2}return E}function triangulatePolygon(e){return earcut_1(e.vertices,e.holes,e.dimensions)}var shaderSrc_polygonsVertex="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",shaderSrc_polygonsFragment="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",Polygons=Object.create(Style);Object.assign(Polygons,{name:"polygons",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_normal",size:3,type:gl$1.BYTE,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&e.push({name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new VertexLayout(e)),this.vertex_layout},_parseFeature:function(e,t,r){var n=this.feature_style;return n.color=this.parseColor(t.color,r),n.color?(n.z=t.z&&StyleParser.evalCachedDistanceProperty(t.z,r)||StyleParser.defaults.z,n.z*=Geo$1.height_scale,n.extrude=StyleParser.evalProperty(t.extrude,r),n.extrude&&(!0===n.extrude?(n.height=void 0!==e.properties.height?e.properties.height:StyleParser.defaults.height,n.min_height=void 0!==e.properties.min_height?e.properties.min_height:StyleParser.defaults.min_height):"number"==typeof n.extrude?(n.height=n.extrude,n.min_height=0):Array.isArray(n.extrude)&&(n.min_height=n.extrude[0],n.height=n.extrude[1]),n.height*=Geo$1.height_scale,n.min_height*=Geo$1.height_scale),n.tile_edges=t.tile_edges,n):null},_preprocess:function(e){return e.color=StyleParser.createColorPropertyCache(e.color),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e},makeVertexTemplate:function(e){var t=0;return this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=e.z||0,this.vertex_template[t++]=this.scaleOrder(e.order),this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=127,this.vertex_template[t++]=255*e.color[0],this.vertex_template[t++]=255*e.color[1],this.vertex_template[t++]=255*e.color[2],this.vertex_template[t++]=255*e.color[3],this.selection&&(this.vertex_template[t++]=255*e.selection_color[0],this.vertex_template[t++]=255*e.selection_color[1],this.vertex_template[t++]=255*e.selection_color[2],this.vertex_template[t++]=255*e.selection_color[3]),this.texcoords&&(this.vertex_template[t++]=0,this.vertex_template[t++]=0),this.vertex_template},buildPolygons:function(e,t,r,n){var i=this.makeVertexTemplate(t),o={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!t.tile_edges,tile_edge_tolerance:Geo$1.tile_scale*n.tile.pad_scale*4,winding:n.winding};return t.extrude&&t.height?buildExtrudedPolygons(e,t.z,t.height,t.min_height,r.vertex_data,i,this.vertex_layout.index.a_normal,127,o):buildPolygons(e,r.vertex_data,i,o)}});var zero_vec2=[0,0],CAP_TYPE={butt:0,square:1,round:2},JOIN_TYPE={miter:0,bevel:1,round:2},DEFAULT={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},v_scale_adjust=Geo$1.tile_scale,zero_v=[0,0],one_v=[1,0],mid_v=[.5,0];function buildPolylines(e,t,r,n,i){var o,a,s=i.closed_polygon,l=i.remove_tile_edges,c=i.tile_edge_tolerance,u=i.texcoord_index,p=(i.texcoord_scale,i.texcoord_width),f=i.texcoord_ratio,h=i.texcoord_normalize,d=i.extrude_index,y=i.offset_index,m=i.join,v=i.cap,g=i.miter_limit,b=i.offset,_=i.crop_by_tile,w=v?CAP_TYPE[v]:CAP_TYPE.butt,x=m?JOIN_TYPE[m]:JOIN_TYPE.miter;x===JOIN_TYPE.miter&&(o=(g=g||DEFAULT.MITER_LIMIT)*g),u&&(h=h||DEFAULT.TEXCOORD_NORMALIZE,a=1/(p*(f=f||DEFAULT.TEXCOORD_RATIO)*v_scale_adjust));for(var E={closed_polygon:s,remove_tile_edges:l,tile_edge_tolerance:c,miter_len_sq:o,join_type:x,cap_type:w,vertex_data:r,vertex_template:n,half_width:t/2,extrude_index:d,offset_index:y,v_scale:a,texcoord_index:u,texcoord_width:p,texcoord_normalize:h,offset:b,geom_count:0,crop_by_tile:_},S=0;S<e.length;S++)buildPolyline(e[S],E);if(E.extra_lines)for(var k=0;k<E.extra_lines.length;k++)buildPolyline(E.extra_lines[k],E);return E.geom_count}function buildPolyline(e,t){if(!(e.length<2)){var r,n,i=t.join_type,o=t.cap_type,a=t.closed_polygon,s=t.remove_tile_edges,l=t.tile_edge_tolerance,c=t.v_scale,u=t.miter_len_sq,p=t.crop_by_tile,f=null!=t.texcoord_index,h=0;if(a&&i===JOIN_TYPE.miter){var d=getTileBoundaryIndex(e);if(0!==d){var y=permuteLine(e,d);return t.extra_lines=t.extra_lines||[],void t.extra_lines.push(y)}}var m=0,v=e.length-1,g=0;for(E=e[m],S=e[m+1];Vector$1.isEqual(E,S);)if(E=S,S=e[1+ ++m],g++,m===e.length-1)return;for(;Vector$1.isEqual(e[v],e[v-1]);)if(g++,0===--v)return;if(!(e.length<2+g))if(n=Vector$1.normalize(Vector$1.perp(E,S)),s&&outsideTile(E,S,l)){var b=getNextNonBoundarySegment(e,m,l);b&&(t.extra_lines=t.extra_lines||[],t.extra_lines.push(b))}else{a?startPolygon(E,r=Vector$1.normalize(Vector$1.perp(e[v-1],E)),n,i,t):(!p&&isCoordOutsideTile(E)||(addCap(E,h,n,o,!0,t),f&&o!==CAP_TYPE.butt&&(h+=.5*c*t.texcoord_width)),addVertex(E,n,n,1,h,t,1),addVertex(E,n,n,0,h,t,-1)),f&&(h+=c*Vector$1.length(Vector$1.sub(S,E)));for(var _=m+1;_<v;_++){var w=_,x=_+1,E=e[w],S=e[x];if(!Vector$1.isEqual(E,S)){if(s&&outsideTile(E,S,l)){addVertex(E,n,n,1,h,t,1),addVertex(E,n,n,0,h,t,-1),indexPairs(1,t);var k=getNextNonBoundarySegment(e,w+1,l);return void(k&&(t.extra_lines=t.extra_lines||[],t.extra_lines.push(k)))}r=n,n=Vector$1.normalize(Vector$1.perp(E,S)),i===JOIN_TYPE.miter?addMiter(h,E,r,n,u,!1,t):addJoin(i,h,E,r,n,!1,t),f&&(h+=c*Vector$1.length(Vector$1.sub(S,E)))}}E=S,r=n,a?endPolygon(E,r,n=Vector$1.normalize(Vector$1.perp(E,e[1])),i,h,t):(addVertex(E,r,n,1,h,t,1),addVertex(E,r,n,0,h,t,-1),indexPairs(1,t),!p&&isCoordOutsideTile(E)||addCap(E,h,r,o,!1,t))}}}function getTileBoundaryIndex(e){if(isCoordOutsideTile(e[0]))return 0;for(var t=0;t<e.length;t++)if(isCoordOutsideTile(e[e.length-1-t]))return e.length-1-t;return 0}function getNextNonBoundarySegment(e,t,r){for(var n=t;e[n+1]&&outsideTile(e[n],e[n+1],r);)n++;return 2<=e.length-n&&e.slice(n)}function startPolygon(e,t,r,n,i){void 0===n||isCoordOutsideTile(e)&&!i.crop_by_tile?(addVertex(e,r,r,1,0,i,1),addVertex(e,r,r,0,0,i,-1)):n===JOIN_TYPE.miter?addMiter(0,e,t,r,i.miter_len_sq,!0,i):addJoin(n,0,e,t,r,!0,i)}function endPolygon(e,t,r,n,i,o){var a;isCoordOutsideTile(e)&&!o.crop_by_tile?(addVertex(e,t,t,1,i,o,1),addVertex(e,t,t,0,i,o,-1)):(a=createMiterVec(t,r),n===JOIN_TYPE.miter&&Vector$1.lengthSq(a)>o.miter_len_sq&&(n=JOIN_TYPE.bevel),n===JOIN_TYPE.miter?(addVertex(e,a,t,1,i,o,1),addVertex(e,a,t,0,i,o,-1)):(addVertex(e,t,t,1,i,o,1),addVertex(e,t,t,0,i,o,-1))),indexPairs(1,o)}function createMiterVec(e,t){var r=Vector$1.normalize(Vector$1.add(e,t)),n=2/(1+Math.abs(Vector$1.dot(e,r)));return Vector$1.mult(r,n*n)}function addMiter(e,t,r,n,i,o,a){var s=createMiterVec(r,n);Vector$1.lengthSq(s)>i?addJoin(JOIN_TYPE.bevel,e,t,r,n,o,a):(addVertex(t,s,s,1,e,a,1),addVertex(t,s,s,0,e,a,-1),o||indexPairs(1,a))}function addJoin(e,t,r,n,i,o,a){var s=createMiterVec(n,i),l=0<i[0]*n[1]-i[1]*n[0];null!=a.texcoord_index&&(zero_v[1]=t,one_v[1]=t),l?(addVertex(r,s,s,1,t,a,1),addVertex(r,n,s,0,t,a,-1),o||indexPairs(1,a),addFan(r,Vector$1.neg(n),s,Vector$1.neg(i),s,zero_v,one_v,zero_v,!1,e===JOIN_TYPE.bevel,a),addVertex(r,s,s,1,t,a,1),addVertex(r,i,s,0,t,a,-1)):(addVertex(r,n,s,1,t,a,1),addVertex(r,s,s,0,t,a,-1),o||indexPairs(1,a),addFan(r,n,Vector$1.neg(s),i,s,one_v,zero_v,one_v,!1,e===JOIN_TYPE.bevel,a),addVertex(r,i,s,1,t,a,1),addVertex(r,s,s,0,t,a,-1))}function indexPairs(e,t){for(var r=t.vertex_data.vertex_elements,n=t.vertex_data.vertex_count-2*e-2,i=0;i<e;i++)r.push(n+2*i+2),r.push(n+2*i+1),r.push(n+2*i),r.push(n+2*i+2),r.push(n+2*i+3),r.push(n+2*i+1),t.geom_count+=2}function addVertex(e,t,r,n,i,o,a){var s=o.vertex_template,l=o.vertex_data;s[0]=e[0],s[1]=e[1];var c=o.half_width*a;s[o.extrude_index+0]=t[0]*c,s[o.extrude_index+1]=t[1]*c,o.offset&&(s[o.offset_index+0]=r[0]*o.offset,s[o.offset_index+1]=r[1]*o.offset),null!=o.texcoord_index&&(s[o.texcoord_index+0]=n*o.texcoord_normalize,s[o.texcoord_index+1]=i*o.texcoord_normalize),l.addVertex(s)}var uvCurr=[0,0];function addFan(e,t,r,n,i,o,a,s,l,c,u){for(var p=t[0]*n[1]-t[1]*n[0],f=Vector$1.dot(t,n),h=Math.atan2(p,f);h>=Math.PI;)h-=2*Math.PI;if(c)d=1;else{var d=trianglesPerArc(h,u.half_width);if(d<1)return}var y=u.vertex_data.vertex_count,m=u.vertex_data.vertex_elements;addVertex(e,r,i,a[0],a[1],u,1),addVertex(e,t,i,o[0],o[1],u,1);var v,g,b=t,_=null!=u.texcoord_index;_&&(l?v=Vector$1.sub(o,a):(uvCurr=Vector$1.copy(o),g=Vector$1.div(Vector$1.sub(s,o),d)));for(var w,x=h/d,E=h<0?-1:1,S=0<p?(w=2,1):(w=1,2),k=0;k<d;k++)0===k&&h<0&&(b=Vector$1.neg(b)),b=Vector$1.rot(b,x),_&&(l?(v=Vector$1.rot(v,x),uvCurr[0]=v[0]+a[0],uvCurr[1]=v[1]*u.texcoord_width*u.v_scale+a[1]):uvCurr=Vector$1.add(uvCurr,g)),addVertex(e,b,i,uvCurr[0],uvCurr[1],u,E),m.push(y+k+w),m.push(y),m.push(y+k+S)}function addCap(e,t,r,n,i,o){var a,s=Vector$1.neg(r),l=null!=o.texcoord_index;switch(n){case CAP_TYPE.square:i?(a=[r[1],-r[0]],addVertex(e,Vector$1.add(r,a),r,1,t,o,1),addVertex(e,Vector$1.add(s,a),r,0,t,o,1),l&&(t+=.5*o.texcoord_width*o.v_scale),addVertex(e,r,r,1,t,o,1),addVertex(e,s,r,0,t,o,1)):(a=[-r[1],r[0]],addVertex(e,r,r,1,t,o,1),addVertex(e,s,r,0,t,o,1),l&&(t+=.5*o.texcoord_width*o.v_scale),addVertex(e,Vector$1.add(r,a),r,1,t,o,1),addVertex(e,Vector$1.add(s,a),r,0,t,o,1)),indexPairs(1,o);break;case CAP_TYPE.round:var c,u,p=zero_v,f=one_v,h=mid_v;i?(c=r,u=s,l&&(t+=.5*o.texcoord_width*o.v_scale,p=one_v,f=zero_v,h=mid_v)):(c=s,u=r),l&&(zero_v[1]=t,one_v[1]=t,mid_v[1]=t),addFan(e,c,zero_vec2,u,r,p,h,f,!0,!1,o);break;case CAP_TYPE.butt:return}}function trianglesPerArc(e,t){e<0&&(e=-e);var r=t>2*DEFAULT.MIN_FAN_WIDTH?Math.log2(t/DEFAULT.MIN_FAN_WIDTH):1;return Math.ceil(e/Math.PI*r)}function permuteLine(e,t){for(var r=[],n=0;n<e.length;n++){var i=(n+t)%e.length;0!=i&&r.push(e[i])}return r.push(r[0]),r}var default_dash_color=[255,255,255,255],default_background_color=[0,0,0,0];function renderDashArray(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.dash_color||default_dash_color,n=t.background_color||default_background_color,i=e,o=t.scale||1;i.length%2==1&&Array.prototype.push.apply(i,i);for(var a=!0,s=[],l=0;l<i.length;l++){for(var c=Math.floor(i[l]*o),u=0;u<c;u++)Array.prototype.push.apply(s,a?r:n);a=!a}return{pixels:s=new Uint8Array(s),length:s.length/4}}var Lines=Object.create(Style);Lines.vertex_layouts=[[],[]],Lines.dash_textures={};var DASH_SCALE=20;function buildPolylines$1(e,t,r,n,i,o){for(var a={closed:o,vertex_data:r,vertex_template:n,half_width:t/2,vertex_layout_index:i,geom_count:0},s=0,l=e.length;s<l;s++)buildPolyline$1(e[s],a);return a.geom_count}function buildPolyline$1(e,t){if(!(e.length<2)){for(var r,n,i=[e[0]],o=0,a=[],s=[],l=1,c=e.length;l<c;l++)e[l][0]===e[l-1][0]&&e[l][1]===e[l-1][1]||(i.push(e[l]),r=Vector$1.sub(e[l],e[l-1]),n=Vector$1.length(r),a.push(r),s.push([o,o+n]),o+=n);if(!(i.length<2)){var u=0,p=a[a.length-1],f=a[0],h=a[1],d=[0,0];2<i.length&&(t.closed&&(d[0]=Vector$1.signedAngleBetween(p,f)),d[1]=Vector$1.signedAngleBetween(f,h));var y=i[0],m=s[0];t.closed?(addVertex$1(y,t,u++,m,o,d,[p,f]),addVertex$1(y,t,u++,m,o,d,[p,f])):(addVertex$1(y,t,u++,m,o,d,[f,f]),addVertex$1(y,t,u++,m,o,d,[f,f]));for(var v=1,g=i.length-1;v<g;v++)y=i[v],p=a[v-1],f=a[v],h=a[v+1],addVertex$1(y,t,u++,m=s[v-1],o,d,[p,f]),addVertex$1(y,t,u++,m,o,d,[p,f]),triangulate(t),m=s[v],d[0]=d[1],d[1]=v!==g-1?Vector$1.signedAngleBetween(f,h):t.closed?Vector$1.signedAngleBetween(f,a[0]):0,addVertex$1(y,t,u++,m,o,d,[p,f]),addVertex$1(y,t,u++,m,o,d,[p,f]);y=i[i.length-1],m=s[s.length-1],f=a[a.length-1],t.closed?(addVertex$1(y,t,u++,m,o,d,[f,a[0]]),addVertex$1(y,t,u++,m,o,d,[f,a[0]])):(addVertex$1(y,t,u++,m,o,d,[f,f]),addVertex$1(y,t,u++,m,o,d,[f,f])),triangulate(t)}}}function triangulate(e){var t=e.vertex_data.vertex_elements,r=e.vertex_data.vertex_count-4;t.push(2+r),t.push(1+r),t.push(r),t.push(2+r),t.push(3+r),t.push(1+r),e.geom_count+=2}Object.assign(Lines,{name:"lines",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(e,t){return e&&StyleParser.evalCachedDistanceProperty(e,t)||0},calcDistanceNextZoom:function(e,t){t.zoom++;var r=this.calcDistance(e,t);return t.zoom--,r},calcWidth:function(e,t,r){var n=this.calcDistance(e.width,r);if(!(n<0)){var i,o=e.next_width?this.calcDistanceNextZoom(e.next_width,r):n/2;return!(0===n&&0===o||o<0)&&(t.width_unscaled=n,t.next_width_unscaled=o,e.next_width?(i=.5*(n+(o*=2)),t.width=i*r.units_per_meter_overzoom,t.width_scale=1-o/i):(t.width=n*r.units_per_meter_overzoom,t.width_scale=0),e.texcoords&&(e.inline_texcoord_width?t.texcoord_width=e.inline_texcoord_width:t.texcoord_width=(t.width_unscaled||t.next_width_unscaled)*r.units_per_meter_overzoom/r.tile.overzoom2),!0)}},calcOffset:function(e,t,r){var n,i;e.offset_precalc?(t.offset=e.offset_precalc,t.offset_scale=e.offset_scale_precalc):e.offset?(n=this.calcDistance(e.offset,r),e.next_offset?(i=2*this.calcDistanceNextZoom(e.next_offset,r),Math.abs(n)>=Math.abs(i)?(t.offset=n*r.units_per_meter_overzoom,t.offset_scale=0!==n?1-i/n:0):(t.offset=i*r.units_per_meter_overzoom,t.offset_scale=0!=i?-1*(1-n/i):0)):(t.offset=n*r.units_per_meter_overzoom,t.offset_scale=0)):(t.offset=0,t.offset_scale=0),StyleParser.evalProperty(e.offset_reverse,r)&&(t.offset*=-1)},_parseFeature:function(e,t,r){var n,i,o=this.feature_style;if(!1!==this.calcWidth(t,o,r)&&(this.calcOffset(t,o,r),o.color=this.parseColor(t.color,r),o.color))return o.variantKey=t.variantKey,o.z=t.z&&StyleParser.evalCachedDistanceProperty(t.z||0,r)||StyleParser.defaults.z,o.height=e.properties.height||StyleParser.defaults.height,o.extrude=StyleParser.evalProperty(t.extrude,r),o.extrude&&("number"==typeof o.extrude?o.height=o.extrude:Array.isArray(o.extrude)&&(o.height=o.extrude[1])),o.extrude&&o.height&&(o.z+=o.height),o.z*=Geo$1.height_scale,o.height*=Geo$1.height_scale,o.cap=StyleParser.evalProperty(t.cap,r),o.join=StyleParser.evalProperty(t.join,r),o.miter_limit=StyleParser.evalProperty(t.miter_limit,r),o.tile_edges=t.tile_edges,o.outline=o.outline||{width:{},next_width:{},preprocessed:!0},t.outline&&!1!==t.outline.visible&&t.outline.color&&t.outline.width?(n=2*this.calcDistance(t.outline.width,r),i=2*this.calcDistanceNextZoom(t.outline.next_width,r),0==n&&0==i||n<0||i<0?(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null,o.outline.texcoords=!1):(o.outline.width.value=n+o.width_unscaled,o.outline.next_width.value=i+o.next_width_unscaled,o.outline.inline_texcoord_width=o.texcoord_width,o.outline.offset_precalc=o.offset,o.outline.offset_scale_precalc=o.offset_scale,o.outline.color=t.outline.color,o.outline.cap=t.outline.cap,o.outline.join=t.outline.join,o.outline.miter_limit=t.outline.miter_limit,o.outline.texcoords=t.outline.texcoords,o.outline.style=t.outline.style,o.outline.variantKey=t.outline.variantKey,t.outline.order?o.outline.order=this.parseOrder(t.outline.order,r):o.outline.order=o.order,o.outline.order>o.order&&(o.outline.order=o.order),o.outline.order-=.5,o.outline.variant_order=0)):(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null),o},_preprocess:function(e,t){var r,n=this.sources[t]?this.sources[t].config.uid:"";return e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.offset=e.offset&&StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits),e.offset&&e.offset.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_offset=StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e.dash=void 0!==e.dash?e.dash:this.dash,e.dash_key=e.dash&&this.dashTextureKey(e.dash,n),e.dash_background_color=void 0!==e.dash_background_color?e.dash_background_color:this.dash_background_color,e.dash_background_color=e.dash_background_color&&StyleParser.parseColor(e.dash_background_color),e.texture_merged=e.dash_key||(void 0!==e.texture?e.texture:this.texture),e.texcoords=this.texcoords||e.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e),e.outline&&(e.outline.style=e.outline.style||this.name,e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.next_width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.cap=e.outline.cap||e.cap,e.outline.join=e.outline.join||e.join,e.outline.miter_limit=e.outline.miter_limit||e.miter_limit,e.outline.offset=e.offset,(r=this.styles[e.outline.style])?(e.outline.dash=void 0!==e.outline.dash?e.outline.dash:r.dash,e.outline.texture=void 0!==e.outline.texture?e.outline.texture:r.texture,null!=e.outline.dash?(e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,n),e.outline.texture_merged=e.outline.dash_key):null===e.outline.dash||null!=e.outline.texture?(e.outline.dash_key=null,e.outline.texture_merged=e.outline.texture):(e.outline.dash=e.dash,e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,n),e.outline.texture_merged=e.outline.dash_key),e.outline.dash_background_color=void 0!==e.outline.dash_background_color?e.outline.dash_background_color:r.dash_background_color,e.outline.dash_background_color=void 0!==e.outline.dash_background_color?e.outline.dash_background_color:e.dash_background_color,e.outline.dash_background_color=e.outline.dash_background_color&&StyleParser.parseColor(e.outline.dash_background_color),e.outline.texcoords=r.texcoords||e.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e.outline)):(log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(e.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),e.outline=null)),e},dashTextureKey:function(e,t){return"__dash_"+t+"_"+this.scene_id+"_"+JSON.stringify(e)},getDashTexture:function(e,t){var r,n=this.dashTextureKey(e,this.sources[t].config.uid);null==Lines.dash_textures[n]&&(Lines.dash_textures[n]=!0,r=renderDashArray(e,{scale:DASH_SCALE}),this.textureManager.create(this.gl,n,{data:r.pixels,height:r.length,width:1,filtering:"nearest"}))},endData:function(e){var t=this;return Style.endData.call(this,e).then((function(r){if(r){r.uniforms.u_has_line_texture=!1,r.uniforms.u_texture=t.textureManager.default,r.uniforms.u_v_scale_adjust=Geo$1.tile_scale;var n=[];for(var i in r.meshes)!function(i){var o,a,s=r.meshes[i].variant;s.texture&&((o=r.meshes[i].uniforms=r.meshes[i].uniforms||{}).u_has_line_texture=!0,o.u_texture=s.texture,o.u_texture_ratio=1,s.dash&&(o.u_v_scale_adjust=Geo$1.tile_scale*DASH_SCALE,o.u_dash_background_color=s.dash_background_color||[0,0,0,0]),s.dash_key&&null==Lines.dash_textures[s.dash_key]&&(Lines.dash_textures[s.dash_key]=!0,WorkerBroker.postMessage(t.main_thread_target+".getDashTexture",s.dash,e.source)),null==t.textureManager.textures[s.texture]?n.push(t.textureManager.syncTexturesToWorker([s.texture]).then((function(e){var t=e[s.texture];t&&(o.u_texture_ratio=t.height/t.width)}))):(a=t.textureManager.textures[s.texture],o.u_texture_ratio=a.height/a.width))}(i);return e.mesh_data[t.name]=r,Promise.all(n).then((function(){return r}))}return r}))},computeVariantForDraw:function(e){var t=e.offset?1:0;return e.dash_key&&(t+=e.dash_key,e.dash_background_color&&(t+=e.dash_background_color)),e.texture_merged&&(t+=e.texture_merged),t=hashString(t+="/"+e.texcoords),{key:e.variantKey=t,order:e.variant_order,offset:e.offset?1:0,texcoords:e.texcoords,texture:e.texture_merged,dash:e.dash,dash_key:e.dash_key,dash_background_color:e.dash_background_color}},vertexLayoutForMeshVariant:function(e){var t;return null==Lines.vertex_layouts[e.key]&&(t=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_extrude",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1,static:e.offset?null:[0,0]},{name:"a_scaling",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0,static:e.texcoords?null:[0,0]},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],Lines.vertex_layouts[e.key]=new VertexLayout(t)),Lines.vertex_layouts[e.key]},makeVertexTemplate:function(e,t){var r=0;return this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=e.z||0,this.vertex_template[r++]=this.scaleOrder(e.order),this.vertex_template[r++]=0,this.vertex_template[r++]=0,t.variant.offset&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=1024*e.width_scale,this.vertex_template[r++]=1024*e.offset_scale,t.variant.texcoords&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=255*e.color[0],this.vertex_template[r++]=255*e.color[1],this.vertex_template[r++]=255*e.color[2],this.vertex_template[r++]=255*e.color[3],this.selection&&(this.vertex_template[r++]=255*e.selection_color[0],this.vertex_template[r++]=255*e.selection_color[1],this.vertex_template[r++]=255*e.selection_color[2],this.vertex_template[r++]=255*e.selection_color[3]),this.vertex_template},buildLines:function(e,t,r,n,i){var o;this.feature_style=this.outline_feature_style,!t.outline||null==t.outline.color||null==t.outline.width.value||(o=this.styles[t.outline.style])&&o.addFeature(n.feature,t.outline,n),this.feature_style=this.inline_feature_style;var a=r.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(t,r);return buildPolylines(e,t.width,a,l,{cap:t.cap,join:t.join,miter_limit:t.miter_limit,extrude_index:s.index.a_extrude,offset_index:s.index.a_offset,texcoord_index:s.index.a_texcoord,texcoord_width:t.texcoord_width,texcoord_normalize:65535,closed_polygon:i&&i.closed_polygon,remove_tile_edges:!t.tile_edges&&i&&i.remove_tile_edges,tile_edge_tolerance:Geo$1.tile_scale*n.tile.pad_scale*2,offset:t.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(e,t,r,n){for(var i=0,o=0;o<e.length;o++)i+=this.buildLines(e[o],t,r,n,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return i}});var TEX_COORDS=[[1,1],[1,-1],[-1,1],[-1,-1]];function addVertex$1(e,t,r,n,i,o,a){var s,l=t.vertex_template,c=t.vertex_data;setAttribute(t,"a_position",e),setAttribute(t,"a_width",t.half_width),t.vertex_layout_index.a_barycentric&&((s=[0,0,0])[r%3]=1,setAttribute(t,"a_barycentric",s)),setAttribute(t,"a_tangents",a[0].concat(a[1])),setAttribute(t,"a_segment",n),setAttribute(t,"a_texcoord",TEX_COORDS[r%4]),setAttribute(t,"a_length",i),setAttribute(t,"a_closed",t.closed?1:0),setAttribute(t,"a_angles",o),c.addVertex(l)}function setAttribute(e,t,r){var n=r.length,i=e.vertex_template,o=e.vertex_layout_index[t],a=0;if(n)for(;a!==n;)i[o+a]=r[a],a++;else i[o+a]=r}function buildPatternBuffer(e,t){for(var r=e.reduce((function(e,t){return e+t})),n=0,i=[],o=0,a=e.length;o<=a;o+=2){var s=Math.max(1e-4,e[o%a]),l=Math.max(1e-4,e[(o+1)%a]);i.push(n,n+s),n+=s+l}for(var c=new Uint8Array(4*t),u=0,p=0;p<t;p++)!function(e){var n=r*e/(t-1),o=minIdx(i.map((function(e){return Math.abs(e-n)}))),a=void 0,s=void 0,l=o%2==0?(a=n<=i[o]?1:0,s=i[o],i[o+1]):(a=n>i[o]?2:0,s=i[o-1],i[o]);c[u++]=i[o],c[u++]=a,c[u++]=s,c[u++]=l}(p);return c}function minIdx(e){for(var t=e[0],r=0,n=1,i=e.length;n<i;n++)e[n]<t&&(t=e[r=n]);return r}var vertex_shader_src="uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src="uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",PatternLines=Object.create(Style),CAP_TYPE$1={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},JOIN_TYPE$1={miter:0,round:1,bevel:2},PATTERN_MAX_WIDTH=1024,DEFAULT_LINE_CAP=CAP_TYPE$1.round,DEFAULT_JOIN_TYPE=JOIN_TYPE$1.miter,DEFAULT_DASH_PATTERN=[0,0],VARIANT_UNIQUE_PROP_NAMES="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");function getHashForStyle(e){for(var t=[],r=0,n=VARIANT_UNIQUE_PROP_NAMES.length;r<n;r++){var i=e[VARIANT_UNIQUE_PROP_NAMES[r]];Array.isArray(i)?t.push(i.join("_")):"boolean"==typeof i?t.push(i?1:0):i&&t.push(i.toString())}return t.join("/")}Object.assign(PatternLines,{name:"pattern-lines",built_in:!0,vertex_shader_src:vertex_shader_src,fragment_shader_src:fragment_shader_src,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},PatternLines.vertex_layouts=[]},calcDistance:function(e,t){return e&&StyleParser.evalCachedDistanceProperty(e,t)||0},calcDash:function(e,t){var r=StyleParser.evalProperty(e.dash,t),n=0;return r&&((r=Array.isArray(r)&&r.length?r:DEFAULT_DASH_PATTERN).length%2==1&&(r=r.concat(r)),n=+(n=r.reduce((function(e,t){return e+t})))||0),{dash:r,dash_period:n}},calcWidth:function(e,t,r){var n=this.calcDistance(e.width,r);return!(n<0)&&(t.width=n*r.units_per_meter_overzoom,!0)},getCapType:function(e,t,r){var n=StyleParser.evalProperty(e,t);return void 0!==CAP_TYPE$1[n]?CAP_TYPE$1[n]:r},_parseFeature:function(e,t,r){if(!1!==this.calcWidth(t,this.feature_style,r)){var n=this.parseColor(t.color,r);if(n&&0!==n[3]){var i=this.getCapType(t.cap,r,DEFAULT_LINE_CAP),o=StyleParser.evalProperty(t.join,r),a=+StyleParser.evalProperty(t.miter_limit,r),s=this.calcDash(t,r),l=s.dash,c=s.dash_period,u=Object.assign({color:n,antialias:t.antialias,linecaps:[this.getCapType(t.tail_cap,r,i),this.getCapType(t.head_cap,r,i)],join:void 0!==JOIN_TYPE$1[o]?JOIN_TYPE$1[o]:DEFAULT_JOIN_TYPE,miter_limit:0<=a?a:3,dash_index:0===c?0:1,dash:l,dash_caps:[this.getCapType(t.tail_cap,r,i),this.getCapType(t.head_cap,r,i)],dash_phase:+StyleParser.evalProperty(t.dash_phase,r)||0,dash_period:c},this.feature_style);return u.z=t.z&&StyleParser.evalCachedDistanceProperty(t.z||0,r)||StyleParser.defaults.z,u.z*=Geo$1.height_scale,u.extrude=StyleParser.evalProperty(t.extrude,r),u.extrude&&(!0===u.extrude?(u.height=void 0!==e.properties.height?e.properties.height:StyleParser.defaults.height,u.min_height=void 0!==e.properties.min_height?e.properties.min_height:StyleParser.defaults.min_height):"number"==typeof u.extrude?(u.height=u.extrude,u.min_height=0):Array.isArray(u.extrude)&&(u.min_height=u.extrude[0],u.height=u.extrude[1]),u.height*=Geo$1.height_scale,u.min_height*=Geo$1.height_scale),this.addMeshVariantForDraw(this.base,u),u}}},_preprocess:function(e){e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);var t=+e.antialias;return e.antialias=isNaN(t)?0:t,e},buildRasterTextures:function(e,t){var r=[];for(var n in t.meshes){var i,o=this.getMeshVariantTypeForDraw({variantKey:n}),a=o.uniforms,s=o.pattern;a.u_dash_index&&(i="__dash_"+s.join("_")+"_"+e.key+"_"+e.id,r.push({name:i,data:buildPatternBuffer(s,PATTERN_MAX_WIDTH)}),a.u_dash_atlas=i,t.meshes[n].textures=[i]),t.meshes[n].uniforms=a}return t.uniforms=t.uniforms||{},r.length?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",r).then((function(e){return t})):Promise.resolve(t)},loadTextures:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=(i=this.textureManager.textures[n.name])||this.textureManager.create(this.gl,n.name,{filtering:"nearest",repeat:!0,width:PATTERN_MAX_WIDTH,height:1,data:n.data});t.push(i.loading)}return Promise.all(t).then((function(e){return e.map((function(e){return e.retain(),e.name}))}))},computeVariantForDraw:function(e){var t=getHashForStyle(e);return{key:e.variantKey=t,order:e.variant_order,uniforms:{u_antialias:e.antialias,u_linecaps:e.linecaps,u_linejoin:e.join,u_miter_limit:e.miter_limit,u_dash_index:e.dash_index,u_dash_caps:e.dash_caps,u_dash_phase:e.dash_phase,u_dash_period:e.dash_period},pattern:e.dash}},vertexLayoutForMeshVariant:function(e){var t;return null==PatternLines.vertex_layouts[e.key]&&(t=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:gl$1.FLOAT,normalized:!1},{name:"a_segment",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_angles",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.FLOAT,normalized:!0},{name:"a_length",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_closed",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&t.push({name:"a_barycentric",size:3,type:gl$1.SHORT,normalized:!1}),PatternLines.vertex_layouts[e.key]=new VertexLayout(t)),PatternLines.vertex_layouts[e.key]},makeVertexTemplate:function(e){var t=0;return this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=e.z+e.height||0,this.vertex_template[t++]=this.scaleOrder(e.order),this.vertex_template[t++]=255*e.color[0],this.vertex_template[t++]=255*e.color[1],this.vertex_template[t++]=255*e.color[2],this.vertex_template[t++]=255*e.color[3],this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.selection&&(this.vertex_template[t++]=255*e.selection_color[0],this.vertex_template[t++]=255*e.selection_color[1],this.vertex_template[t++]=255*e.selection_color[2],this.vertex_template[t++]=255*e.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[t++]=0,this.vertex_template[t++]=0,this.vertex_template[t++]=0),this.vertex_template},buildLines:function(e,t,r,n,i){var o=4<arguments.length&&void 0!==i&&i,a=r.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(t,r);return buildPolylines$1(e,t.width,a,l,s.index,o)},buildPolygons:function(e,t,r,n){for(var i=0,o=0,a=e.length;o<a;o++)i+=this.buildLines(e[o],t,r,n,!0);return i}});var STICK_WIDTH=1;function buildQuadsForPoints(e,t,r,n){var i,o,a,s,l,c,u=n.quad,p=n.quad_normalize,f=n.offset,h=n.offsets,d=n.offsets_alt,y=n.pre_angles,m=n.pre_angles_alt,v=n.angle,g=n.angles,b=n.angles_alt,_=n.is_flat,w=n.elevate_by_altitude,x=n.build_stick_points,E=n.color,S=n.stick_color,k=n.curve,T=n.texcoord_scale,O=n.texcoord_normalize,A=n.pre_angles_normalize,P=n.angles_normalize,C=n.offsets_normalize,N=(p=p||1,u[0]/2*p),R=u[1]/2*p,j=[[-N,-R],[N,-R],[N,R],[-N,R]],M=t.vertex_elements,I=t.vertex_count,D=t.vertex_layout.index,L=D.a_texcoord,F=D.a_position,B=D.a_shape,z=D.a_offset,$=D.a_offsets,U=D.a_offsets_alt,H=D.a_pre_angles,V=D.a_pre_angles_alt,G=D.a_angles,q=D.a_angles_alt,W=D.a_is_flat,Y=D.a_is_stick,K=D.a_color;L&&(O=O||1,c=[[o=(i=_slicedToArray(T||default_uvs,4))[0],a=i[1]],[s=i[2],a],[s,l=i[3]],[o,l]]);for(var X=0,Z=e.length,J=0;J<Z;J++){var Q=e[J];if(x){for(var ee=STICK_WIDTH/2*p,te=+p,re=[[-ee,0],[+ee,0],[+ee,te],[-ee,te]],ne=0;ne<4;ne++)L&&(r[L+0]=c[ne][0]*O,r[L+1]=c[ne][1]*O),r[F+0]=Q[0],r[F+1]=Q[1],w&&(r[F+2]=MathUtils$1.clamp(Q[2],0,32767)),r[B+0]=re[ne][0],r[B+1]=re[ne][1],r[B+2]=0,r[K+0]=S[0],r[K+1]=S[1],r[K+2]=S[2],r[K+3]=S[3],r[Y+0]=255,t.addVertex(r);M.push(I+0),M.push(I+1),M.push(I+2),M.push(I+2),M.push(I+3),M.push(I+0),I+=4,X+=2}for(var ie=0;ie<4;ie++)L&&(r[L+0]=c[ie][0]*O,r[L+1]=c[ie][1]*O),r[F+0]=Q[0],r[F+1]=Q[1],w&&(r[F+2]=MathUtils$1.clamp(Q[2],0,32767)),r[B+0]=j[ie][0],r[B+1]=j[ie][1],r[B+2]=v,r[K+0]=E[0],r[K+1]=E[1],r[K+2]=E[2],r[K+3]=E[3],r[z+0]=f[0],r[z+1]=f[1],r[W+0]=_?255:0,x&&(r[Y+0]=0),k&&(r[H+0]=A*y[0],r[H+1]=A*y[1],r[H+2]=A*y[2],r[H+3]=A*y[3],r[G+0]=P*g[0],r[G+1]=P*g[1],r[G+2]=P*g[2],r[G+3]=P*g[3],r[$+0]=C*h[0],r[$+1]=C*h[1],r[$+2]=C*h[2],r[$+3]=C*h[3],d&&(r[U+0]=C*d[0],r[U+1]=C*d[1],r[U+2]=C*d[2],r[U+3]=C*d[3],r[V+0]=A*m[0],r[V+1]=A*m[1],r[V+2]=A*m[2],r[V+3]=A*m[3],r[q+0]=P*b[0],r[q+1]=P*b[1],r[q+2]=P*b[2],r[q+3]=P*b[3])),t.addVertex(r);M.push(I+0),M.push(I+1),M.push(I+2),M.push(I+2),M.push(I+3),M.push(I+0),I+=4,X+=2}return X}var id$2=0,Label={id_prefix:"",nextLabelId:function(){return"".concat(Label.id_prefix,"/").concat(id$2++)}};function textLayoutToJSON(e){return{priority:e.priority,collide:e.collide,repeat_distance:e.repeat_distance,repeat_group:e.repeat_group,buffer:e.buffer,italic:e.italic}}var lefts=["left","top-left","bottom-left"],rights=["right","top-right","bottom-right"],tops=["top","top-left","top-right"],bottoms=["bottom","bottom-left","bottom-right"],PointAnchor,PointAnchor$1=PointAnchor={computeOffset:function(e,t,r,n){var i=3<arguments.length&&void 0!==n?n:null;if(!r||"center"===r)return e;var o=[e[0],e[1]];i=i||this.default_buffer;return this.isLeftAnchor(r)?(o[0]-=t[0]/2,"left"===r&&(o[0]-=i[0])):this.isRightAnchor(r)&&(o[0]+=t[0]/2,"right"===r&&(o[0]+=i[1])),this.isTopAnchor(r)?(o[1]-=t[1]/2,"top"===r&&(o[1]-=i[2])):this.isBottomAnchor(r)&&(o[1]+=t[1]/2,"bottom"===r&&(o[1]+=i[3])),o},alignForAnchor:function(e){if(e&&"center"!==e){if(this.isLeftAnchor(e))return"right";if(this.isRightAnchor(e))return"left"}return"center"},isLeftAnchor:function(e){return-1<lefts.indexOf(e)},isRightAnchor:function(e){return-1<rights.indexOf(e)},isTopAnchor:function(e){return-1<tops.indexOf(e)},isBottomAnchor:function(e){return-1<bottoms.indexOf(e)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function encircleLine(e,t,r,n,i){var o=[],a=r-e,s=n-t,l=MathUtils$1.getLineLength(e,t,r,n),c=2*i;if((u=l/c)<=1)o.push(e+a/2,t+s/2,i);else{var u,p=c/l,f=a*p,h=s*p;(u=l/i/2)%1&&o.push(r-f/2,n-h/2,i),u|=0;for(var d=e+f/2,y=t+h/2;u--;)o.push(d,y,i),d+=f,y+=h}return o}var LabelPoint=function(){function e(t,r,n,i){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.position=[t[0],t[1]],void 0!==t[2]&&this.position.push(t[2]),this.size=r,this.layout=i,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||PointAnchor$1.alignForAnchor(this.anchor),this._is_flat=n}return _createClass(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:textLayoutToJSON(this.layout)}}},{key:"inTileBounds",value:function(){var e=this.getAABB(),t=e.left,r=e.top,n=e.right,i=e.bottom;return Utils$1.pointInTile([t,r])&&Utils$1.pointInTile([n,i])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(e){this._circles=void 0,this._aabb=void 0,this.anchor=e,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var e,t=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(e=this.parent,t=PointAnchor$1.computeOffset(t,e.size,e.anchor,PointAnchor$1.zero_buffer),t=PointAnchor$1.computeOffset(t,e.size,this.anchor,PointAnchor$1.zero_buffer),e.offset!==StyleParser.zeroPair&&(t===StyleParser.zeroPair?t=e.offset:(t[0]+=e.offset[0],t[1]+=e.offset[1]))),PointAnchor$1.computeOffset(t,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(e=this.layout.units_per_pixel,i=-(r=(t=this.size[0]/2*e)*Math.cos(this.angle)),o=-(n=t*Math.sin(this.angle)),s=(a=_slicedToArray(this.position,2))[0],l=a[1],r+=s,n+=l*=-1,i+=s,o+=l,c=this.size[1]/2*e,this._circles=encircleLine(r,n,i,o,c)),this._circles):[];var e,t,r,n,i,o,a,s,l,c}},{key:"getAABB",value:function(){var e,t,r,n,i;return this._aabb||(e=this.layout.units_per_pixel,t=(this.size[0]/2+this.layout.buffer[0])*e,r=(this.size[1]/2+this.layout.buffer[1])*e,n=this.position[0]+this.offset[0]*e,i=this.position[1]-this.offset[1]*e,this._aabb={left:n-t,top:i+r,right:n+t,bottom:i-r}),this._aabb}},{key:"getSides",value:function(){var e=this.getAABB(),t=e.left,r=e.top,n=e.right,i=(r+e.bottom)/2;return[t,i,n,i]}}]),e}();LabelPoint.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var PLACEMENT=LabelPoint.PLACEMENT,default_spacing=80,TextSettings;function placePointsOnLine(e,t,r,n){var i=[],o=n.placement,a=Math.max(t[0],t[1])*n.placement_min_length_ratio*n.units_per_pixel;switch(o){case PLACEMENT.SPACED:var s=getPositionsAndAngles(e,a,n);if(!s)return[];for(var l=s.positions,c=s.angles,u=0;u<l.length;u++){var p,f=l[u],h=c[u];!0!==n.tile_edges&&isCoordOutsideTile(f)||((p=new LabelPoint(f,t,r,n)).angle=h,i.push(p))}break;case PLACEMENT.VERTEX:for(var d,y,m,v=0;v<e.length-1;v++)d=e[v],y=e[v+1],!0!==n.tile_edges&&isCoordOutsideTile(d)||((m=new LabelPoint(d,t,r,n)).angle=getAngle(d,y,n.angle),i.push(m));(m=new LabelPoint(y,t,r,n)).angle=getAngle(d,y,n.angle),i.push(m);break;case PLACEMENT.MIDPOINT:for(var g=0;g<e.length-1;g++){var b,_=e[g],w=e[g+1],x=[.5*(_[0]+w[0]),.5*(_[1]+w[1])];!0!==n.tile_edges&&isCoordOutsideTile(x)||(!a||norm(_,w)>a)&&((b=new LabelPoint(x,t,r,n)).angle=getAngle(_,w,n.angle),i.push(b))}}return i}function getPositionsAndAngles(e,t,r){var n=r.units_per_pixel,i=(r.placement_spacing||default_spacing)*n,o=getLineLength(e);if(o<=t)return!1;for(var a=Math.max(Math.floor(o/i),1),s=[],l=[],c=.5*(o-(a-1)*i),u=0;u<a;u++){var p=interpolateLine(e,c,t,r),f=p.position,h=p.angle;null!=f&&null!=h&&(s.push(f),l.push(h)),c+=i}return{positions:s,angles:l}}function getAngle(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return"auto"===r?Math.atan2(t[0]-e[0],t[1]-e[1]):r}function getLineLength(e){for(var t=0,r=0;r<e.length-1;r++)t+=norm(e[r],e[r+1]);return t}function norm(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function interpolateLine(e,t,r,n){for(var i,o,a=0,s=0;s<e.length-1;s++){var l=e[s],c=e[s+1],u=norm(l,c);if(!(u<=r)&&t<(a+=u)){i=interpolateSegment(l,c,a-t),o=getAngle(l,c,n.angle);break}}return{position:i,angle:o}}function interpolateSegment(e,t,r){var n=r/norm(e,t);return[n*e[0]+(1-n)*t[0],n*e[1]+(1-n)*t[1]]}var TextSettings$1=TextSettings={key:function(e){return[e.style,e.weight,e.family,e.px_size,e.fill,e.stroke,e.stroke_width,e.transform,e.text_wrap,e.max_lines,e.supersample,e.background_color,e.outline_color,e.outline_width,e.padding,Utils$1.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(e,t,r){var n={};if(t.font=t.font||this.defaults,n.can_articulate=t.can_articulate,n.fill=t.font.fill&&Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(t.font.fill,r))||this.defaults.fill,n.style=t.font.style||this.defaults.style,n.weight=t.font.weight||this.defaults.weight,t.font.family?(n.family=t.font.family,n.family!==this.defaults.family&&(n.family+=", "+this.defaults.family)):n.family=this.defaults.family,n.transform=t.font.transform,n.size=t.font.size||this.defaults.size,n.supersample=t.supersample_text?1.5:1,n.px_size=StyleParser.evalCachedProperty(t.font.px_size,r)*n.supersample,0!==n.px_size){t.font.stroke&&t.font.stroke.color&&(n.stroke=Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(t.font.stroke.color,r)||this.defaults.stroke),n.stroke_width=StyleParser.evalCachedProperty(t.font.stroke.width,r)||this.defaults.stroke_width),n.font_css=this.fontCSS(n);var i=t.text_wrap;return null==i&&"line"!==Geo$1.geometryType(e.geometry.type)&&(i=!0),!0===i&&(i=this.defaults.text_wrap),n.text_wrap=i,n.max_lines=t.max_lines||this.defaults.max_lines,n.background_color=t.background&&t.background.color&&!t.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(t.background.color,r)):this.defaults.background_color,n.outline_color=t.outline&&t.outline.color&&!t.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(t.outline.color,r)):this.defaults.outline_color,n.outline_width=t.outline&&t.outline.width&&!t.can_articulate?StyleParser.evalCachedProperty(t.outline.width,r):this.defaults.outline_width,n.padding=t.padding&&!t.can_articulate?StyleParser.evalCachedProperty(t.padding,r):this.defaults.padding,n}},fontCSS:function(e){return[e.style,e.weight,e.px_size+"px",e.family].filter((function(e){return e})).join(" ")}},fontfaceobserver_standalone=createCommonjsModule((function(e){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function r(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+t+";"}function i(e){var t=e.a.offsetWidth,r=t+100;return e.f.style.width=r+"px",e.c.scrollLeft=r,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,1)}function o(e,r){function n(){var e=o;i(e)&&e.a.parentNode&&r(e.g)}var o=e;t(e.b,n),t(e.c,n),i(e)}function a(e,t){var r=t||{};this.family=e,this.style=r.style||"normal",this.weight=r.weight||"normal",this.stretch=r.stretch||"normal"}function s(e,t){return[e.style,e.weight,function(){if(null===u){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}u=""!==e.style.font}return u}()?e.stretch:"","100px",t].join(" ")}var l,c,u,p;p=u=c=l=null,a.prototype.load=function(e,t){var i=this,a=e||"BESbswy",u=0,f=t||3e3,h=(new Date).getTime();return new Promise((function(e,t){var d,y,m;null===p&&(p=!!document.fonts),(d=p)&&(null===c&&(c=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),d=!c),d?(d=new Promise((function(e,t){!function r(){(new Date).getTime()-h>=f?t():document.fonts.load(s(i,'"'+i.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(r,25)}),(function(){t()}))}()})),y=new Promise((function(e,t){u=setTimeout(t,f)})),Promise.race([y,d]).then((function(){clearTimeout(u),e(i)}),(function(){t(i)}))):(m=function(){function c(){var t;(t=-1!=m&&-1!=v||-1!=m&&-1!=g||-1!=v&&-1!=g)&&((t=m!=v&&m!=g&&v!=g)||(null===l&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),t=l&&(m==b&&v==b&&g==b||m==_&&v==_&&g==_||m==w&&v==w&&g==w)),t=!t),t&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(u),e(i))}var p=new r(a),d=new r(a),y=new r(a),m=-1,v=-1,g=-1,b=-1,_=-1,w=-1,x=document.createElement("div");x.dir="ltr",n(p,s(i,"sans-serif")),n(d,s(i,"serif")),n(y,s(i,"monospace")),x.appendChild(p.a),x.appendChild(d.a),x.appendChild(y.a),document.body.appendChild(x),b=p.a.offsetWidth,_=d.a.offsetWidth,w=y.a.offsetWidth,function e(){var r;(new Date).getTime()-h>=f?(x.parentNode&&x.parentNode.removeChild(x),t(i)):(!0!==(r=document.hidden)&&void 0!==r||(m=p.a.offsetWidth,v=d.a.offsetWidth,g=y.a.offsetWidth,c()),u=setTimeout(e,50))}(),o(p,(function(e){m=e,c()})),n(p,s(i,'"'+i.family+'",sans-serif')),o(d,(function(e){v=e,c()})),n(d,s(i,'"'+i.family+'",serif')),o(y,(function(e){g=e,c()})),n(y,s(i,'"'+i.family+'",monospace'))},document.body?m():document.addEventListener?document.addEventListener("DOMContentLoaded",(function e(){document.removeEventListener("DOMContentLoaded",e),m()})):document.attachEvent("onreadystatechange",(function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),m())})))}))},e.exports=a})),FontManager={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(e){var t=this,r=JSON.stringify(e)===this.last_loaded;return e&&!r&&function(){var r=[];for(var n in e)!function(n){Array.isArray(e[n])?e[n].forEach((function(e){return r.push(t.loadFontFace(n,e))})):r.push(t.loadFontFace(n,e[n]))}(n);t.last_loaded=JSON.stringify(e),t.fonts_loaded=Promise.all(r.filter((function(e){return e})))}(),this.fonts_loaded},loadFontFace:function(e,t){if(null!=t&&("object"===_typeof(t)||"external"===t)){var r={family:e},n=Promise.resolve();"object"===_typeof(t)&&(Object.assign(r,t),"string"==typeof t.url&&(n=this.injectFontFace(r)));var i=new fontfaceobserver_standalone(e,r);return n.then((function(){return i.load()})).then((function(){log("debug","Font face '".concat(e,"' is available"),r)}),(function(){log("debug","Font face '".concat(e,"' is NOT available"),r)}))}},injectFontFace:function(e){var t=this,r=e.family,n=e.url,i=e.weight,o=e.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var a=Promise.resolve(n);return"blob:"===n.slice(0,5)&&(a=Utils$1.io(n,6e4,"arraybuffer").then((function(e){var r=new Uint8Array(e);if(t.supports_native_font_loading)return r;for(var n="",i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return"data:font/opentype;base64,"+btoa(n)}))),a.then((function(e){var n,a,s;t.supports_native_font_loading?("string"==typeof e?n=new FontFace(r,"url(".concat(encodeURI(e),")"),{weight:i,style:o}):e instanceof Uint8Array&&(n=new FontFace(r,e,{weight:i,style:o})),document.fonts.add(n),log("trace","Adding FontFace to document.fonts:",n)):(a="\n                    @font-face {\n                        font-family: '".concat(r,"';\n                        font-weight: ").concat(i||"normal",";\n                        font-style: ").concat(o||"normal",";\n                        src: url(").concat(encodeURI(e),");\n                    }\n                "),(s=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(s),s.sheet.insertRule(a,0),log("trace","Injecting CSS font face:",a))}))}},CanvasText=function(){function e(){_classCallCheck(this,e),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=layout("binary-tree")}return _createClass(e,[{key:"createCanvas",value:function(e,t){var r=document.createElement("canvas");return e&&t&&(r.width=e,r.height=t),r.style.backgroundColor="transparent",r}},{key:"setFont",value:function(e,t){var r=t.font_css,n=t.fill,i=t.stroke,o=t.stroke_width,a=t.px_size,s=t.supersample;this.px_size=a;var l=Utils$1.device_pixel_ratio*s;i&&0<o&&(e.strokeStyle=i,e.lineWidth=o*l),e.fillStyle=n,e.textBaseline="bottom",e.font=r,e.miterLimit=2}},{key:"textSizes",value:function(e,t,r){var n=this;return FontManager.loadFonts().then((function(){return Task.add({type:"textSizes",run:n.processTextSizesTask.bind(n),texts:t,tile_id:e,cursor:{ctx:r,styles:Object.keys(t),texts:null,style_idx:null,text_idx:null}})}))}},{key:"processTextSizesTask",value:function(e){var t=e.cursor,r=e.texts,n=t.ctx;for(t.style_idx=t.style_idx||0;t.style_idx<t.styles.length;){var i=t.styles[t.style_idx];null==t.text_idx&&(t.text_idx=0,t.texts=Object.keys(r[i]));for(var o=r[i],a=!0;t.text_idx<t.texts.length;){var s=t.texts[t.text_idx],l=o[s],c=l.text_settings;if(a&&(this.setFont(n,c),a=!1),l.size=this.textSize(n,i,s,c).size,c.can_articulate){var u=!1,p=!1;if(isTextRTL(s)&&(isTextNeutral(s)?u=!0:p=!0),l.isRTL=u,l.no_curving=p||isTextCurveBlacklisted(s),l.vertical_buffer=this.vertical_text_buffer+c.outline_width+(c.padding[0]+c.padding[2])/2,l.segment_sizes=[],!l.no_curving){var f=splitLabelText(s,u);l.segments=f;for(var h=0;h<f.length;h++)l.segment_sizes.push(this.textSize(n,i,f[h],c).size)}}if(t.text_idx++,!Task.shouldContinue(e))return!1}t.text_idx=null,t.style_idx++}return Task.finish(e,{texts:r}),!0}},{key:"textSize",value:function(t,r,n,i){var o=i.transform,a=i.text_wrap,s=i.max_lines,l=i.stroke_width,c=void 0===l?0:l,u=i.supersample,p=i.padding,f=i.outline_width,h=i.can_articulate;if(e.cache.text[r]=e.cache.text[r]||{},e.cache.text[r][n])return e.cache.stats.text_hits++,e.cache.text[r][n];e.cache.stats.text_misses++,e.cache.text_count++;var d=Utils$1.device_pixel_ratio*u,y=this.applyTextTransform(n,o),m=d*(this.vertical_text_buffer+f+(p[0]+p[2])/2),v=d*(this.horizontal_text_buffer+f+c+(p[1]+p[3])/2),g=2*d,b=this.px_size+g,_=MultiLine.parse(y,a,s,b,t),w=_.height,x=_.width,E=_.lines,S=[x/d,w/d];h||(S[0]+=2*v/d,S[1]+=2*m/d);var k=[x+2*v,w+2*m],T=[k[0]/d,k[1]/d];return e.cache.text[r][n]={lines:E,size:{collision_size:S,texture_size:k,logical_size:T,line_height:b}},e.cache.text[r][n]}},{key:"drawTextMultiLine",value:function(e,t,r,n,i,o){var a=_slicedToArray(r,2),s=a[0],l=a[1],c=Utils$1.device_pixel_ratio*i.supersample,u=i.stroke_width||0,p=i.stroke;i.background_color&&(e.fillStyle=i.background_color,e.fillRect(s,l,n.texture_size[0],n.texture_size[1]));var f=i.outline_width*c,h=i.outline_color;f&&h&&(e.strokeStyle=h,e.lineWidth=f,e.strokeRect(s+f/2,l+f/2,n.texture_size[0]-f,n.texture_size[1]-f)),(i.background_color||f&&h)&&this.setFont(e,i);for(var d,y,m,v,g=n.line_height,b=l,_=0;_<t.length;_++){var w=t[_];this.drawTextLine(e,w,[s,b],n,i,o),b+=g}debugSettings$1.draw_label_collision_boxes&&(e.save(),d=c*(this.horizontal_text_buffer+i.outline_width+u+(i.padding[1]+i.padding[3])/2),y=c*(this.vertical_text_buffer+i.outline_width+(i.padding[0]+i.padding[2])/2),m=n.collision_size,e.strokeStyle="blue",e.lineWidth=2,e.strokeRect(s+d,l+y,c*m[0],c*m[1]),"curved"===o&&p&&0<u&&e.strokeRect(s+n.texture_size[0]+d,l+y,c*m[0],c*m[1]),e.restore()),debugSettings$1.draw_label_texture_boxes&&(e.save(),v=n.texture_size,e.strokeStyle="green",e.lineWidth=2,e.strokeRect(s+2,l+2,v[0]-4,v[1]-4),"curved"===o&&p&&0<u&&e.strokeRect(s+2+n.texture_size[0],l+2,v[0]-4,v[1]-4),e.restore())}},{key:"drawTextLine",value:function(e,t,r,n,i,o){var a,s=_slicedToArray(r,2),l=s[0],c=s[1],u=i.stroke,p=i.stroke_width,f=void 0===p?0:p,h=i.transform,d=i.align,y=i.supersample,m=i.padding,v=i.outline_width,g=Utils$1.device_pixel_ratio*y,b=(d=d||"center",n.texture_size),_=n.line_height,w=g*(this.vertical_text_buffer+v),x=g*(this.horizontal_text_buffer+v+f),E=this.applyTextTransform(t.text,h);"left"===d?a=l+x+m[3]*g:"center"===d?a=l+b[0]/2-t.width/2-(m[1]-m[3])*g/2:"right"===d&&(a=l+b[0]-t.width-x-m[1]*g);var S,k=c+w+_+m[0]*g;u&&0<f&&(S="curved"===o?b[0]:0,e.strokeText(E,a+S,k)),e.fillText(E,a,k)}},{key:"rasterize",value:function(t,r,n,i,o,a){return Task.removeForTile(n),Task.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:e.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:t,textures:r,texture_prefix:i,gl:o,tile_id:n,texture_manager:a,cursor:{styles:Object.keys(t),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(e){if(!Task.shouldContinue(e))return!1;for(var t=e.cursor,r=e.texts,n=e.textures;t.texture_idx<e.textures.length;){for(var i=!1,o=n[t.texture_idx],a=this.createCanvas.apply(this,_toConsumableArray(o.texture_size)),s=a.getContext("2d");t.style_idx<t.styles.length;){var l=t.styles[t.style_idx];null==t.text_idx&&(t.text_idx=0,t.texts=Object.keys(r[l]));for(var c=r[l],u=!0;t.text_idx<t.texts.length;){var p=t.texts[t.text_idx],f=c[p],h=f.text_settings;if(u&&(this.setFont(s,h),u=!1),h.can_articulate){f.texcoords=f.texcoords||{};for(var d=0;d<f.type.length;d++){var y=f.type[d];switch(y){case"straight":if(f.textures[d]!==t.texture_idx)continue;var m,v,g,b,_=f.isRTL?p.split().reverse().join():p,w=o.texcoord_cache[l][_],x=void 0;w.texcoord?x=w.texcoord:(m=w.texture_position,g=(v=this.textSize(s,l,_,h)).size,b=v.lines,this.drawTextMultiLine(s,b,m,g,h,y),x=e.texture_manager.getTexcoordsForSprite(m,g.texture_size,o.texture_size),w.texcoord=x),f.texcoords[y]={texcoord:x,texture_id:w.texture_id};break;case"curved":var E=f.segments;f.texcoords.curved=[],f.texcoords_stroke=[];for(var S,k,T,O,A,P,C,N,R=0;R<E.length;R++)f.textures[d][R]===t.texture_idx&&(S=E[R],O=T=void 0,(k=o.texcoord_cache[l][S]).texcoord&&k.texcoord_stroke?(T=k.texcoord,O=k.texcoord_stroke):(A=k.texture_position,C=(P=this.textSize(s,l,S,h)).size,N=P.lines,this.drawTextMultiLine(s,N,A,C,h,y),T=e.texture_manager.getTexcoordsForSprite(A,C.texture_size,o.texture_size),O=h.stroke&&0<h.stroke_width?e.texture_manager.getTexcoordsForSprite([A[0]+C.texture_size[0],A[1]],C.texture_size,o.texture_size):(i=!0,e.texture_manager.getTexcoordsForSprite([o.texture_size[0],o.texture_size[1]],[0,0],o.texture_size)),k.texcoord=T,k.texcoord_stroke=O),f.texcoords_stroke.push(O),f.texcoords.curved.push({texcoord:T,texture_id:k.texture_id}))}}}else{var j=this.textSize(s,l,p,h).lines;for(var M in f.align)f.align[M].texture_id===t.texture_idx&&(this.drawTextMultiLine(s,j,f.align[M].texture_position,f.size,{stroke:h.stroke,stroke_width:h.stroke_width,transform:h.transform,supersample:h.supersample,align:M,background_color:h.background_color,outline_width:h.outline_width,outline_color:h.outline_color,padding:h.padding,fill:h.fill,font_css:h.font_css,px_size:h.px_size}),f.align[M].texcoords=e.texture_manager.getTexcoordsForSprite(f.align[M].texture_position,f.size.texture_size,o.texture_size))}t.text_idx++}t.text_idx=null,t.style_idx++}!0===i&&(s.fillStyle="rgba(0, 0, 0, 0)",s.fillRect(a.width-1,a.height-1,1,1));var I=e.texture_prefix+t.texture_idx;e.texture_manager.create(e.gl,I,{element:a,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),t.texture_names.push(I),t.texture_idx++,t.style_idx=0,a.width=0,a.height=0}return Task.finish(e,t.texture_names),!0}},{key:"setTextureTextPositions",value:function(e){var t={texture_id:0,texcoord_cache:{}},r=[];for(var n in e){var i=e[n];for(var o in i){var a=i[o],s=a.text_settings,l=s.can_articulate,c=s.stroke,u=s.stroke_width;if(l){a.textures=[],t.texcoord_cache[n]=t.texcoord_cache[n]||{};for(var p=0;p<a.type.length;p++)switch(a.type[p]){case"straight":var f,h=a.isRTL?o.split().reverse().join():o;t.texcoord_cache[n][h]||(f=a.size.texture_size,t.texcoord_cache[n][h]={},this.placeText(f[0],f[1],{can_articulate:l,style:n,word:h})),a.textures[p]=t.texture_id;break;case"curved":a.textures[p]=[];for(var d=0;d<a.segment_sizes.length;d++){var y,m,v=a.segments[d];t.texcoord_cache[n][v]||(m=(y=a.segment_sizes[d].texture_size)[0],c&&0<u&&(m*=2),t.texcoord_cache[n][v]={},this.placeText(m,y[1],{can_articulate:l,style:n,word:v})),a.textures[p].push(t.texture_id)}}}else{var g=a.size.texture_size;this.placeText(g[0],g[1],{can_articulate:l,text_info:a})}}}var b=this.layout.export(),_=b.items,w=b.width,x=b.height;t.texcoord_cache={};for(var E=0,S=_.length;E<S;E++){var k=_[E],T=k.x,O=k.y;if(k.meta.can_articulate){var A=k.meta,P=A.style,C=A.word;t.texcoord_cache[P]=t.texcoord_cache[P]||{},t.texcoord_cache[P][C]||(t.texcoord_cache[P][C]={texture_id:t.texture_id,texture_position:[T,O]})}else{var N=k.meta.text_info;for(var R in N.align)N.align[R].texture_id=t.texture_id,N.align[R].texture_position=[T,O]}}return 0<w&&0<x&&(r[t.texture_id]={texture_size:[w,x],texcoord_cache:t.texcoord_cache}),r}},{key:"placeText",value:function(e,t,r){this.layout.addItem({width:e+this.vertical_text_buffer,height:t+this.vertical_text_buffer,meta:r})}},{key:"applyTextTransform",value:function(e,t){return"capitalize"===t?e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1)})):"uppercase"===t?e.toUpperCase():"lowercase"===t?e.toLowerCase():e}}],[{key:"fontPixelSize",value:function(t){if(null!=t){var r=_slicedToArray((t="string"==typeof t?t:String(t)).match(e.font_size_re)||[],3),n=r[1],i=r[2];return"em"===(i=i||"px")?n*=16:"pt"===i?n/=.75:"%"===i&&(n/=6.25),(n=StyleParser.parsePositiveNumber(n))*Utils$1.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){e.cache.text_count>e.cache.text_count_max&&(e.cache.text={},e.cache.text_count=0,log("debug","CanvasText: pruning text cache")),Object.keys(e.cache.segment).length>e.cache.segment_count_max&&(e.cache.segment={},log("debug","CanvasText: pruning segment cache"))}}]),e}();CanvasText.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,CanvasText.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},CanvasText.EMPTY_TEXTURES_ARR=[],CanvasText.returnNoTextures=function(){return CanvasText.EMPTY_TEXTURES_ARR};var rtlDirCheck=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function isTextRTL(e){return rtlDirCheck.test(e)}var neutral_chars="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",neutralDirCheck=new RegExp("["+neutral_chars+"]+");function isTextNeutral(e){return neutralDirCheck.test(e)}var markRTL="\u200f",arabic_range=new RegExp("^["+neutral_chars+"\u0600-\u06ff]+"),arabic_splitters=new RegExp("["+neutral_chars+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),arabic_vowels=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),accents_and_vowels="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",combo_characters="[\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]",graphemeRegex=new RegExp("^.(?:"+accents_and_vowels+"+)?("+combo_characters+"\\W(?:"+accents_and_vowels+"+)?)*"),curve_blacklist={Mongolian:"\u1800-\u18af"},curve_blacklist_range=Object.keys(curve_blacklist).map((function(e){return curve_blacklist[e]})).join(""),curve_blacklist_test=new RegExp("["+curve_blacklist_range+"]");function isTextCurveBlacklisted(e){return curve_blacklist_test.test(e)}var default_segment_length=2;function splitLabelText(e,t){var r=t?1:default_segment_length;if(e.length<r)return[e];var n=e;if(CanvasText.cache.segment[n])return CanvasText.cache.stats.segment_hits++,CanvasText.cache.segment[n];var i=[];if(arabic_range.exec(e)){i=e.split(arabic_splitters);for(var o,a=-1,s=0;s<i.length-1;s++)0<s&&(o=arabic_vowels.exec(i[s]))&&(i[s]=i[s].substring(o[0].length),i[s-1]+=o[0],a+=o[0].length),a+=1+i[s].length,i[s]+=e.slice(a,a+1);e=""}for(;e.length;){for(var l="",c=e,u=0;u<r&&c.length;u++){var p=(graphemeRegex.exec(c)||c)[0];l+=p,c=c.substring(p.length)}i.push(l),e=e.substring(l.length)}return t&&i.reverse(),CanvasText.cache.stats.segment_misses++,CanvasText.cache.segment[n]=i}var MultiLine=function(){function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;_classCallCheck(this,e),this.width=0,this.height=0,this.lines=[],this.max_lines=r,this.text_wrap=n,this.context=t}return _createClass(e,[{key:"createLine",value:function(e){return this.lines.length<this.max_lines&&new Line(e,this.text_wrap)}},{key:"push",value:function(e){if(this.lines.length<this.max_lines){var t=this.context.measureText(e.text).width;return(e.width=t)>this.width&&(this.width=Math.ceil(t)),this.lines.push(e),this.height+=e.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(e,t){return!!this.push(e)&&this.createLine(t)}},{key:"addEllipsis",value:function(){var t=this.lines[this.lines.length-1],r=Math.ceil(this.context.measureText(e.ellipsis).width);t.append(e.ellipsis),t.width+=r,t.width>this.width&&(this.width=t.width)}},{key:"finish",value:function(e){e?this.push(e):this.addEllipsis()}}],[{key:"parse",value:function(t,r,n,i,o){for(var a="number"==typeof r?t.split(" "):[t],s=new e(o,n,r),l=s.createLine(i),c=0;c<a.length;c++){for(var u=a[c].split("\n"),p=0===c,f=0;f<u.length&&l;f++){var h=u[f];isTextRTL(h)&&isTextNeutral(h[h.length-1])&&(h+=markRTL);var d=p?h:" "+h;if(r&&0<c&&l.exceedsTextwrap(d)){if(!(l=s.advance(l,i)))break;l.append(h),p=!0}else l.append(d);f<u.length-1&&(l=s.advance(l,i),p=!0)}c===a.length-1&&s.finish(l)}return s}}]),e}();MultiLine.ellipsis="...";var Line=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.chars=0,this.text="",this.height=Math.ceil(t),this.text_wrap=r}return _createClass(e,[{key:"append",value:function(e){this.chars+=e.length,this.text+=e}},{key:"exceedsTextwrap",value:function(e){return e.length+this.chars>this.text_wrap}}]),e}(),TextLabels={resetText:function(){this.texts={}},freeText:function(e){delete this.texts[e.id]},parseTextFeature:function(e,t,r,n){var i=this.parseTextSource(e,t,r);if(null!=i&&""!==i){var o=TextSettings$1.compute(e,t,r);if(o){var a=TextSettings$1.key(o);this.texts[n.id]=this.texts[n.id]||{};var s=this.texts[n.id][a]=this.texts[n.id][a]||{};if(i instanceof Object){var l=[],c=i.left+"-"+i.right;for(var u in i){var p,f=i[u];f&&(p=this.computeTextLayout({},e,t,r,n,f,o,c,u),s[f]||(s[f]={text_settings:o,ref:0}),l.push({draw:t,text:f,text_settings_key:a,layout:p}))}return 0<l.length&&l}var h=this.computeTextLayout({},e,t,r,n,i,o);return s[i]||(s[i]={text_settings:o,ref:0}),{draw:t,text:i,text_settings_key:a,layout:h}}}},parseTextSource:function(e,t,r){var n,i=t.text_source||"name";if(null!=i&&"object"===_typeof(i))for(var o in n={},i)n[o]=this.parseTextSourceValue(i[o],e,r);else n=this.parseTextSourceValue(i,e,r);return n},parseTextSourceValue:function(e,t,r){var n;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("string"==typeof e[i]?n=t.properties[e[i]]:"function"==typeof e[i]&&(n=e[i](r)),n)return n}else"string"==typeof e?n=t.properties[e]:e instanceof Function&&(n=e(r));return n},prepareTextLabels:function(e,t,r){var n=this;return 0===Object.keys(this.texts[e.id]||{}).length?Promise.resolve([]):WorkerBroker.postMessage(this.main_thread_target+".calcTextSizes",e.id,this.texts[e.id]).then((function(t){var i=t.texts;return e.canceled?(log("trace","Style ".concat(n.name,": stop tile build because tile was canceled: ").concat(e.key,", post-calcTextSizes()")),[]):(n.texts[e.id]=i||[],i?n.buildTextLabels(e,r):(Collision.abortTile(e.id),[]))}))},collideAndRenderTextLabels:function(e,t,r){var n=this;return this.prepareTextLabels(e,t,r).then((function(r){return 0===r.length?(Collision.collide([],t,e.id),Promise.resolve({})):Collision.collide(r,t,e.id).then((function(t){if(e.canceled)return log("trace","stop tile build because tile was canceled: ".concat(e.key,", post-collide()")),{};var r=n.texts[e.id];return null==r||0===t.length?{}:(n.cullTextStyles(r,t),t.forEach((function(e){var t=e.text_settings_key,n=r[t]&&r[t][e.text];n.text_settings.can_articulate?(n.type||(n.type=[]),-1===n.type.indexOf(e.label.type)&&n.type.push(e.label.type)):(n.align=n.align||{},n.align[e.label.align]={})})),{labels:t,texts:r,textures:[]})}))}))},cullTextStyles:function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e[n.text_settings_key][n.text].ref++}for(var i in e)for(var o in e[i])e[i][o].ref<1&&delete e[i][o];for(var a in e)0===Object.keys(e[a]).length&&delete e[a]},calcTextSizes:function(e,t){return this._canvas_text||(this._canvas_text=new CanvasText,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(e,t,this._canvas_ctx_for_sizes)},preprocessText:function(e){if(e&&e.font&&"object"===_typeof(e.font))return e.font.fill=StyleParser.createPropertyCache(e.font.fill),e.font.stroke&&(e.font.stroke.color=StyleParser.createPropertyCache(e.font.stroke.color)),e.background&&e.background.color&&(e.background.color=StyleParser.createPropertyCache(e.background.color)),e.outline&&(e.outline.color&&(e.outline.color=StyleParser.createPropertyCache(e.outline.color)),e.outline.width&&(e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber))),e.padding&&(Array.isArray(e.padding)?2===e.padding.length&&(e.padding=[e.padding[0],e.padding[1],e.padding[0],e.padding[1]]):e.padding=Array(4).fill(e.padding),e.padding=StyleParser.createPropertyCache(e.padding,(function(e){return e.map(StyleParser.parsePositiveNumber)}))),e.font.px_size=StyleParser.createPropertyCache(e.font.size||TextSettings$1.defaults.size,CanvasText.fontPixelSize),e.font.stroke&&null!=e.font.stroke.width&&(e.font.stroke.width=StyleParser.createPropertyCache(e.font.stroke.width,StyleParser.parsePositiveNumber)),e.offset=StyleParser.createPropertyCache(e.offset,(function(e){return Array.isArray(e)&&e.map(StyleParser.parseNumber)})),e.buffer=StyleParser.createPropertyCache(e.buffer,(function(e){return(Array.isArray(e)?e:[e,e]).map(StyleParser.parsePositiveNumber)})),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance||Geo$1.tile_size,StyleParser.parsePositiveNumber),e},computeTextLayout:function(e,t,r,n,i,o,a,s,l){var c=e||{};return(c=this.computeLayout(c,t,r,n,i)).repeat_distance&&(s&&(c.repeat_group+="/"+s),c.repeat_group+="/"+o),c.subdiv=i.overzoom2,c.align=r.align,c.italic="normal"!==a.style,"right"===l?c.orientation=1:"left"===l&&(c.orientation=-1),c}};function degToRad(e){return e*Math.PI/180}var PI_OVER_180=Math.PI/180,HORIZON_THRESHOLD_MULTIPLIER=.75,ZOOM_FOR_BOUNDS_EPSILON=.001,NEAR_PLANE=1,LookAtManipulator=function(){function e(t,r){_classCallCheck(this,e),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=t,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),r?this.setLookAtData(r):this._updateMatrices(),ShaderProgram.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return _createClass(e,[{key:"getZoomForBounds",value:function(e,t,r,n){var i,o=this.clone(),a=this._max_zoom,s=this._min_zoom,l=(a-s)/2,c=a-l,u=t,p=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(e));for(void 0===u?u=p:(i=p[0]-u[0],Math.abs(i)>Geo$1.half_circumference_meters+1e-8&&(u[0]+=Math.round(i/Geo$1.circumference_meters)*Geo$1.circumference_meters));ZOOM_FOR_BOUNDS_EPSILON<l;)!function(){o.setLookAtData({zoom:c,position:u,tilt:r,heading:n});var t,i,p,f,h,d=o.getLookAtData().bounds;e.every((function(e){return MathUtils$1.isPointInsidePolygon(e,d)}))?s=c:(i=(t=_slicedToArray(MathUtils$1.getBBox(d),4))[0],p=t[1],f=t[2],h=t[3],f-i+1e-8>=Geo$1.circumference_meters&&h-p+1e-8>=Geo$1.circumference_meters?s=c:a=c),c=a-(l=(a-s)/2)}();return s}},{key:"setZoomConstraints",value:function(e,t){this._min_zoom=e,this._max_zoom=t,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(e,t){var r,n,i,o,a,s=e.position,l=e.zoom;s===r&&e.bounds!==r&&(s=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(e.bounds))),l===r&&e.bounds!==r&&(l=this.getZoomForBounds(e.bounds,s,e.tilt,e.heading)),t!==r&&(n=s||this.screenToWorld(t)),l!==r&&(l=MathUtils$1.clamp(l,this._min_zoom,this._max_zoom),(i=Utils$1.zoomToTileLevel(l))!==(o=this._lookAtData.tile_level)&&(this._zoom_direction=o<i?1:-1),this._lookAtData.zoom=l,this._lookAtData.tile_level=i),e.tilt!==r&&(this._lookAtData.tilt=e.tilt),e.heading!==r&&(this._lookAtData.heading=e.heading),t!==r?(this._updateMatrices(),a=this.screenToWorld(t),this._lookAtData.position[0]-=a[0]-n[0],this._lookAtData.position[1]-=a[1]-n[1]):s&&(this._lookAtData.position=s),this._lookAtData.position[2]=0,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(e){var t=0<arguments.length&&void 0!==e&&e,r=this._viewport,n=r.width,i=r.height;this._viewport_aspect_ratio=n/i;var o=this._viewport.center.x-(n/2<<0),a=this._viewport.center.y-(i/2<<0);this._center_offset[0]=o,this._center_offset[1]=a,this._center_offset_normalized[0]=o/n,this._center_offset_normalized[1]=a/-i,t||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(e,t){mat4.multiply(e.model_view32,this._view_matrix,e.model),t.uniform("Matrix4fv","u_modelView",e.model_view32),mat3.normalFromMat4(e.normal32,e.model_view32),mat3.invert(e.inverse_normal32,e.normal32),t.uniform("Matrix3fv","u_normalMatrix",e.normal32),t.uniform("Matrix3fv","u_inverseNormalMatrix",e.inverse_normal32)}},{key:"_updateMatrices",value:function(){var e=this._viewport.height*Geo$1.metersPerPixel(this._lookAtData.zoom),t=Utils$1.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=e/2*t;var r=this._lookAtData.position[0],n=this._lookAtData.position[1];mat4.lookAt(this._view_matrix,vec3.fromValues(r,n,0),vec3.fromValues(r,n,-1),vec3.fromValues(0,1,0)),this._heading_matrix=mat4.identity(this._heading_matrix);var i=180-this._lookAtData.heading;i*=PI_OVER_180,this._heading_matrix[0]=Math.cos(i),this._heading_matrix[1]=-Math.sin(i),this._heading_matrix[4]=Math.sin(i),this._heading_matrix[5]=Math.cos(i),this._tilt_matrix=mat4.identity(this._tilt_matrix),i=0<(i=this._lookAtData.tilt?this._lookAtData.tilt*PI_OVER_180:0)?-i:i,this._tilt_matrix[5]=Math.cos(i),this._tilt_matrix[6]=Math.sin(i),this._tilt_matrix[9]=-Math.sin(i),this._tilt_matrix[10]=Math.cos(i),mat4.multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),mat4.multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var o=2*Math.atan(1/t),a=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(a/NEAR_PLANE),mat4.perspective(this._projection_matrix,o,this._viewport_aspect_ratio,NEAR_PLANE,a),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],mat4.translate(this._projection_matrix,this._projection_matrix,vec3.fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=mat4.multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var e,t,r,n,i,o=this._viewport,a=o.width,s=o.height,l=o.padding,c=degToRad(this._lookAtData.tilt);this._horizon=Math.max((l.top+s)/2-Math.cos(c)*(l.top*(1-Math.sin(c))+s*HORIZON_THRESHOLD_MULTIPLIER),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([a,this._horizon]),this.screenToWorld([a,s]),this.screenToWorld([0,s])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===l.left&&0===l.top&&0===l.right&&0===l.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(e=l.left,t=Math.max(this._horizon,l.top),r=a-l.right,n=s-l.bottom,i=[this.screenToWorld([e,t]),this.screenToWorld([r,t]),this.screenToWorld([r,n]),this.screenToWorld([e,n])],this._lookAtData.bounds=this._clipAgainstGeoBounds(i))}},{key:"_clipAgainstGeoBounds",value:function(e){var t,r=_slicedToArray(MathUtils$1.getBBox(e),4),n=r[0],i=r[1],o=r[2],a=r[3],s=Geo$1.half_circumference_meters,l=[[n-1,+s],[o+1,+s],[o+1,-s],[n-1,-s]],c=MathUtils$1.clipPolygon(l,e)[0],u=_slicedToArray(MathUtils$1.getBBox(c),4);n=u[0],i=u[1],o=u[2],a=u[3];o-n>=Geo$1.circumference_meters&&(c=[[(t=(o-n)/2)-s,a],[t+s,a],[t+s,i],[t-s,i]]);var p=[];return c&&(p=MathUtils$1.splitLegs(c,s)),p}},{key:"applyPxOffset",value:function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1],i=Math.PI-this._lookAtData.heading*PI_OVER_180,o=Geo$1.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(r*Math.cos(i)+n*Math.sin(i))*o,this._lookAtData.position[1]-=(n*Math.cos(i)-r*Math.sin(i))*o,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1],i=this._viewport,o=i.width,a=i.height;return 0===o||0===a?[0,0]:(r-=o/2,n-=a/2,this._clipCoordsToWorldPlaneCoords([2*(r+o/2)/o-1,1-2*(n+a/2)/a,-1,1]))}},{key:"_clipToScreenCoords",value:function(e){var t=this._viewport,r=t.width,n=t.height;return[(.5*e[0]+.5)*r,n-(.5*e[1]+.5)*n]}},{key:"_isScreenPointInViewPort",value:function(e){var t=this._viewport,r=t.width,n=t.height;return 0<=e[0]&&e[0]<=r&&0<=e[1]&&e[1]<=n}},{key:"worldToScreen",value:function(e,t){var r,n,i,o,a,s,l=1<arguments.length&&void 0!==t&&t;return e[2]||(e[2]=0),l?(r=this._worldToClipCoords(e),a=this._clipToScreenCoords(r)):(n=Math.sign(this._lookAtData.position[0]),i=Math.trunc(this._lookAtData.position[0]/Geo$1.circumference_meters+n/2),e[0]+=Geo$1.circumference_meters*i,o=this._worldToClipCoords(e),s=a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([e[0]+Geo$1.circumference_meters,e[1],e[2]]),a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([e[0]-Geo$1.circumference_meters,e[1],e[2]]),a=this._clipToScreenCoords(o)),this._isScreenPointInViewPort(a)||(a=s))),a}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(e){var t=[],r=this._lookAtData.distance,n=this._lookAtData.position,i=[0,0,r,0],o=0,a=r*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.cos(PI_OVER_180*this._lookAtData.heading),s=r*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.sin(PI_OVER_180*this._lookAtData.heading),l=new Float64Array(16),c=new Float64Array(16);return mat4.invert(l,this._projection_matrix),vec4.transformMat4(t,e,l),t[2]=-1,t[3]=0,mat4.invert(c,this._view_matrix),vec4.transformMat4(t,t,c),vec4.normalize(t,t),vec4.transformMat4(i,i,this._transformation_matrix),0!==t[2]&&(o=-i[2]/t[2]),vec4.scale(t,t,o),[n[0]+(t[0]+s),n[1]+(t[1]+a)]}},{key:"_worldToClipCoords",value:function(e){var t=[e[0],e[1],e[2],1];return vec4.transformMat4(t,t,this._view_matrix),vec4.transformMat4(t,t,this._projection_matrix),vec4.scale(t,t,1/t[3]),t}},{key:"setupProgram",value:function(e){e.uniform("Matrix4fv","u_projection",this._projection_matrix),e.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),e.uniform("2fv","u_center_offset",this._center_offset_normalized),e.uniform("1f","u_tilt",this._lookAtData.tilt*PI_OVER_180),e.uniform("1f","u_heading",this._lookAtData.heading*PI_OVER_180),e.uniform("1f","u_near_plane",NEAR_PLANE),e.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var t=new e(this._viewport,this._lookAtData);return t.setZoomConstraints(this._min_zoom,this._max_zoom),t}},{key:"getViewport",value:function(){return this._viewport}}]),e}();function getX(e){return void 0===e.x?e[0]:e.x}function getY(e){return void 0===e.y?e[1]:e.y}function xAscendingComparator(e,t){return getX(e)-getX(t)}function yAscendingComparator(e,t){return getY(e)-getY(t)}function sortByX(e){return e.sort(xAscendingComparator)}function sortByY(e){return e.sort(yAscendingComparator)}function getMinMax(e,t){for(var r,n=e[0],i=n,o=0;o<e.length;o+=1)t(r=e[o],n)<0?n=r:0<t(r,i)&&(i=r);return[n,i]}function groupByCoord(e,t){return Object.values(t.reduce((function(t,r){var n=r[+e];return t[n]||(t[n]=[]),t[n].push(r),t}),{}))}function groupByX(e){return groupByCoord(!1,e)}function groupByY(e){return groupByCoord(!0,e)}function createTileRangeByCoord(e,t,r){var n=+e,i=t[n],o=r[n];if(o<i)return[];var a=[t];if(o<i)return a;for(var s=t[(1+n)%2],l=e?function(e){return a.push([s,e])}:function(e){return a.push([e,s])},c=i+1;c<o;c+=1)l(c);return a.push(r),a}function createTileRangeByX(e,t){return createTileRangeByCoord(!1,e,t)}function createTileRangeByY(e,t){return createTileRangeByCoord(!0,e,t)}function deduplicate(e){var t={},r=[];return e.forEach((function(e){var n=e.key||(Array.isArray(e)?"".concat(e[0],"/").concat(e[1]):"".concat(e.x,"/").concat(e.y));t[n]||(t[n]=!0,r.push(e))})),r}function flat(e){return e.reduce((function(e,t){return e.concat(t)}))}function applyMargin(e,t){if(t<=0)return e;var r;return deduplicate((r=groupByY(flat(groupByX(e).map((function(e){var r=_slicedToArray(getMinMax(e,yAscendingComparator),2),n=r[0],i=r[1],o=[n[0],n[1]-t],a=[i[0],i[1]+t];return e.concat(createTileRangeByY(o,n),createTileRangeByY(i,a))})))),flat(r.map((function(e){var r=_slicedToArray(getMinMax(e,xAscendingComparator),2),n=r[0],i=r[1],o=[n[0]-t,n[1]],a=[i[0]+t,i[1]];return e.concat(createTileRangeByX(o,n),createTileRangeByX(i,a))})))))}function constructTiles(e,t,r){return e.map((function(e){var n=_slicedToArray(e,2),i=n[0],o=n[1];return Tile.coord(Geo$1.wrapTile({x:i,y:o,z:t},{x:!r,y:!0}))}))}function getTileGrid(e,t,r){function n(t){return Object.values(Geo$1.metersToExactTileCoords(t,e.tile_level))}return deduplicate(constructTiles(applyMargin(rasterizeTetragon(n(e.tetragon[0]),n(e.tetragon[1]),n(e.tetragon[3]),n(e.tetragon[2])),t),e.tile_level,r))}function rasterizeTetragon(e,t,r,n){var i=rasterizeTriangle(t,e,r),o=rasterizeTriangle(r,n,t);return deduplicate(i.concat(o))}function rasterizeTriangle(e,t,r){var n=_slicedToArray(sliceTriangle.apply(void 0,_toConsumableArray(sortByY([e,t,r]))),2),i=n[0],o=n[1];return deduplicate(rasterizeBottomFlatTriangle.apply(void 0,_toConsumableArray(i)).concat(rasterizeTopFlatTriangle.apply(void 0,_toConsumableArray(o))))}function sliceTriangle(e,t,r){var n=_slicedToArray(e,2),i=n[0],o=n[1],a=_slicedToArray(t,2),s=a[0],l=a[1],c=_slicedToArray(r,2),u=c[0],p=c[1],f=i+(l-o)/(p-o)*(u-i);return[[[i,o]].concat(_toConsumableArray(sortByX([[s,l],[f,l]]))),[].concat(_toConsumableArray(sortByX([[s,l],[f,l]])),[[u,p]])]}function rasterizeBottomFlatTriangle(e,t,r){var n=_slicedToArray(e,2),i=n[0],o=n[1],a=_slicedToArray(t,2),s=a[0],l=a[1];return scanFlatTriangle(i,s,_slicedToArray(r,1)[0],o,l)}function rasterizeTopFlatTriangle(e,t,r){var n=_slicedToArray(e,2),i=n[0],o=n[1],a=_slicedToArray(t,1)[0],s=_slicedToArray(r,2);return scanFlatTriangle(s[0],i,a,s[1],o)}var scanStepStatic=.125;function getScanStep(e,t){return scanStepStatic*(t-e)/(Math.ceil(t)-Math.floor(e))}function scanFlatTriangle(e,t,r,n,i){var o=Math.min(e,t),a=Math.max(e,r),s=Math.min(n,i),l=Math.max(n,i);if(Math.floor(n)===Math.floor(i))return scanRow(o,a,n);if(l-s<scanStepStatic)return scanRectangle([o,s],[a,l]);function c(e){d=d.concat(scanRow(y,m,Math.floor(e))),y+=f,m+=h}var u=getScanStep(s,l),p=(l-s)/u,f=(t-e)/p,h=(r-e)/p,d=[],y=e,m=e;if(n<i)for(var v=s;v<=l;v+=u)c(v);else for(var g=l;s<=g;g-=u)c(g);return deduplicate(d)}function xCoordsToPoints(e,t){return e.map((function(e){return[e,t]}))}function createCoordRange(e,t){var r=Math.floor(e),n=Math.floor(t);if(n<r)return[];if(r===n)return[r];for(var i=[],o=r;o<=n;o+=1)i.push(o);return i}function scanRow(e,t,r){return xCoordsToPoints(createCoordRange(e,t),r)}function scanRectangle(e,t){var r=_slicedToArray(e,2),n=r[0],i=r[1],o=_slicedToArray(t,2),a=o[0],s=o[1],l=createCoordRange(n,a),c=xCoordsToPoints(l,i),u=xCoordsToPoints(l,s);return c.concat(u)}var VIEW_PAN_SNAP_TIME=.5,Z_PRECISION=1e5,View=function(){function e(t,r){_classCallCheck(this,e),subscribeMixin(this),this.scene=t,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==r.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new LookAtManipulator(r.viewport),this._viewport=r.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _createClass(e,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(e){var t=0<arguments.length&&void 0!==e&&e,r=this._viewport,n=r.width,i=r.height;this.size.css={width:n,height:i},this.size.device={width:Math.round(n*Utils$1.device_pixel_ratio),height:Math.round(i*Utils$1.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),t||this.updateBounds()}},{key:"setLookAtData",value:function(t,r){e._setLookAtDataForManipulator(this.lookAtManipulator,t,r),this.updateBounds()}},{key:"getLookAtData",value:function(t){var r=0<arguments.length&&void 0!==t&&t;return e._getLookAtDataFromManipulator(this.lookAtManipulator,r)}},{key:"getBestLookAtData",value:function(t,r,n){var i=2<arguments.length&&void 0!==n&&n,o=this.lookAtManipulator.clone();return e._setLookAtDataForManipulator(o,t,r),e._getLookAtDataFromManipulator(o,i)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(e){var t=this._offset_buffer;t[0]+=e[0],t[1]+=e[1];var r,n,i=Math.abs(t[0]),o=Math.abs(t[1]);(1<=i||1<=o)&&(r=~~t[0],n=~~t[1],this.lookAtManipulator.applyPxOffset([i<1?0:r,o<1?0:n]),1<=i&&(t[0]-=r),1<=o&&(t[1]-=n),this.updateBounds())}},{key:"setPanning",value:function(e){this.panning=e,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var e,t;this.markUserInput(),this.ready()&&(this.center_tile=Geo$1.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),e=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),t=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:e[0],y:e[1]},ne:{x:t[0],y:t[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(e,t,r,n,i,o){var a,s=4<arguments.length&&void 0!==i?i:0,l=!(5<arguments.length&&void 0!==o)||o,c=this.lookAtManipulator.getLookAtData().tile_level,u=Geo$1.tileForMeters([t,e],c),p=Geo$1.tileForMeters([n,r],c);u.x-=s,u.y-=s,p.x+=s,p.y+=s,!1===l&&(a=(1<<c)-1,u.x=Math.min(Math.max(0,u.x),a),u.y=Math.min(Math.max(0,u.y),a),p.x=Math.min(Math.max(0,p.x),a),p.y=Math.min(Math.max(0,p.y),a));for(var f=[],h={},d=u.x;d<=p.x;d++)for(var y=u.y;y<=p.y;y++){var m=Tile.coord(Geo$1.wrapTile({x:d,y:y,z:c},{x:!l,y:!0}));h[m.key]||(h[m.key]=!0,f.push(m))}return f}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return getTileGrid(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var e=this.lookAtManipulator.getLookAtData(),t=e.tilt,r=e.heading;return 0===t&&180===r?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(e,t){e.setupProgram(this.matrices,t),this.lookAtManipulator.setupMatrices(this.matrices,t)}},{key:"setupProgram",value:function(e){var t=this.lookAtManipulator.getLookAtData();e.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),e.uniform("3fv","u_map_position",[t.position[0],t.position[1],Math.trunc(t.zoom*Z_PRECISION)/Z_PRECISION]),e.uniform("1f","u_meters_per_pixel",Geo$1.metersPerPixel(t.zoom)),e.uniform("1f","u_device_pixel_ratio",Utils$1.device_pixel_ratio),e.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),e.uniform("1i","u_view_panning",this.panning),e.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(e)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=VIEW_PAN_SNAP_TIME}},{key:"xyToGeo",value:function(e,t){var r=this.lookAtManipulator.screenToWorld([e,t]),n=_slicedToArray(Geo$1.metersToLatLng(r),2),i=n[0];return{lat:n[1],lng:i}}},{key:"geoToPixel",value:function(e){var t=Geo$1.latLngToMeters([e.lng,e.lat]);t.push(e.alt||0);var r=this.lookAtManipulator.worldToScreen(t);return{x:Math.floor(r[0]),y:Math.floor(r[1])}}},{key:"geoToMeters",value:function(e){var t=_slicedToArray(Geo$1.latLngToMeters([e.lng,e.lat]),2);return{x:t[0],y:t[1],z:e.alt||0}}},{key:"metersToGeo",value:function(e){var t=_slicedToArray(Geo$1.metersToLatLng([e.x,e.y]),2),r=t[0];return{lat:t[1],lng:r,alt:e.z||0}}},{key:"setZoomConstraints",value:function(e,t){this.lookAtManipulator.setZoomConstraints(e,t)}}],[{key:"_setLookAtDataForManipulator",value:function(e,t,r){var n=t.position,i=t.zoom,o=t.tilt,a=t.heading,s=t.bounds,l={zoom:i,tilt:o,heading:a};if(n&&"number"==typeof n.lng&&"number"==typeof n.lat&&(l.position=Geo$1.latLngToMeters([n.lng,n.lat])),s){var c=s.getExterior().getLatLngAltArray(),u=c.length/3,p=Array(u);if(s.getBoundingBox().isCDB())for(var f=c[1],h=0,d=0;d<u;d++){var y,m=c[3*d+1];0<d&&(y=m-f,180<Math.abs(y)&&(h+=f<m?-360:360)),f=m,p[d]=Geo$1.latLngToMeters([m+h,c[3*d]])}else for(var v=0;v<u;v++)p[v]=Geo$1.latLngToMeters([c[3*v+1],c[3*v]]);l.bounds=p}e.setLookAtData(l,r)}},{key:"_getLookAtDataFromManipulator",value:function(e,t){var r=1<arguments.length&&void 0!==t&&t,n=e.getLookAtData(),i=n.heading,o=n.incline,a=n.tilt,s=n.zoom,l=n.position,c=n.bounds,u=n.unpadded_bounds,p=_slicedToArray(Geo$1.metersToLatLng(l),2),f=p[0],h=p[1],d=new H.geo.LineString;return(r?u:c).forEach((function(e){var t=Geo$1.metersToLatLng(e);d.pushLatLngAlt(t[1],t[0],0)})),{heading:i,incline:o,tilt:a,zoom:s,bounds:new H.geo.Polygon(d),position:{lat:h,lng:f,alt:l[2]}}}}]),e}(),shaderSrc_pointsVertex="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",shaderSrc_pointsFragment="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",PLACEMENT$1=LabelPoint.PLACEMENT,pre_angles_normalize=128/Math.PI,angles_normalize=16384/Math.PI,offsets_normalize=64,texcoord_normalize=65535,Points=Object.create(Style),TANGRAM_POINT_TYPE_TEXTURE=1,TANGRAM_POINT_TYPE_LABEL=2,TANGRAM_POINT_TYPE_SHADER=3,DEFAULT_POINT_SIZE=16;Object.assign(Points,TextLabels),Object.assign(Points,{name:"points",built_in:!0,vertex_shader_src:shaderSrc_pointsVertex,fragment_shader_src:shaderSrc_pointsFragment,selection:!0,collision:!0,blend:"overlay",init:function(e){var t=0<arguments.length&&void 0!==e?e:{};Style.init.call(this,t),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=TANGRAM_POINT_TYPE_TEXTURE,this.defines.TANGRAM_POINT_TYPE_LABEL=TANGRAM_POINT_TYPE_LABEL,this.defines.TANGRAM_POINT_TYPE_SHADER=TANGRAM_POINT_TYPE_SHADER,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,debugSettings$1.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),debugSettings$1.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=1/VIEW_PAN_SNAP_TIME),debugSettings$1.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(e,t,r){var n,i,o,a=r.tile,s={};if(s.color=this.parseColor(t.color,r),s.texture=t.texture,s.label_texture=null,s.color||s.texture){if(this.hasSprites(s)){if(!(n=this.parseSprite(s,t,r)))return;s.texcoords=n.texcoords}if(s.size=t.size,s.size){if(s.size=StyleParser.evalCachedPointSizeProperty(t.size,n,r),null==s.size)return void log({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(t.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof s.size&&(s.size=[s.size,s.size])}else s.size=n&&n.css_size||[DEFAULT_POINT_SIZE,DEFAULT_POINT_SIZE];t.outline&&(s.outline_width=StyleParser.evalCachedProperty(t.outline.width,r)||StyleParser.defaults.outline.width,s.outline_color=this.parseColor(t.outline.color,r)),s.outline_edge_pct=0,s.outline_width&&s.outline_color&&(i=s.outline_width,s.size[0]+=i,s.size[1]+=i,s.outline_edge_pct=i/Math.min(s.size[0],s.size[1])*2),s.size[0]=Math.min(s.size[0],256),s.size[1]=Math.min(s.size[1],256),s.placement=t.placement,s.placement_min_length_ratio=StyleParser.evalCachedProperty(t.placement_min_length_ratio,r),s.placement===PLACEMENT$1.SPACED&&t.placement_spacing&&(s.placement_spacing=StyleParser.evalCachedProperty(t.placement_spacing,r)),s.angle=StyleParser.evalProperty(t.angle,r)||0,s.elevate_by_altitude=!!t.elevate_by_altitude,s.z=t.z?MathUtils$1.clamp(StyleParser.evalCachedDistanceProperty(t.z,r),0,32767):StyleParser.defaults.z,s.flat=t.flat,s.tile_edges=t.tile_edges,this.computeLayout(s,e,t,r,a),t.stick&&!s.flat&&(o=StyleParser.parseNumber(StyleParser.evalProperty(t.stick.height,r)),s.stick={color:this.parseColor(t.stick.color,r)||StyleParser.defaults.color,height:o?Math.max(o,0):0});var l=t.text&&!1!==StyleParser.evalProperty(t.text.visible,r)&&this.parseTextFeature(e,t.text,r,a);Array.isArray(l)&&log({level:"warn",once:!(l=null)},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(t.text.text_source))),l&&(l.layout.parent=s,l.layout.priority=t.text.priority?Math.max(l.layout.priority,s.priority+.5):s.priority+.5,l.layout.move_into_tile=!1,Collision.addStyle(this.collision_group_text,a.id)),this.queueFeature({feature:e,draw:t,context:r,style:s,text_feature:l},a),Collision.addStyle(this.collision_group_points,a.id)}},hasSprites:function(e){return e.texture&&this.textureManager.textures[e.texture]&&this.textureManager.textures[e.texture].sprites},getSpriteInfo:function(e,t){var r=this.textureManager.textures[e.texture].sprites[t]&&this.textureManager.getSpriteInfo(e.texture,t);return t&&!r?(this.texture_missing_sprites[e.texture]=this.texture_missing_sprites[e.texture]||{},this.texture_missing_sprites[e.texture][t]||(log("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(t,"' for texture '").concat(e.texture,"'")),this.texture_missing_sprites[e.texture][t]=!0)):r&&(r.sprite=t),r},parseSprite:function(e,t,r){var n=StyleParser.evalProperty(t.sprite,r);return this.getSpriteInfo(e,n)||this.getSpriteInfo(e,t.sprite_default)},queueFeature:function(e,t){this.tile_data[t.id]&&this.queues[t.id]||this.startData(t),this.queues[t.id]=this.queues[t.id]||[],this.queues[t.id].push(e)},endData:function(e){var t=this;if(e.canceled)return log("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(e.key)),Promise.resolve();var r=this.queues[e.id];delete this.queues[e.id];var n=[],i=[];return r.forEach((function(e){for(var r=e.style,o=e.feature,a=o.geometry,s=t.buildLabels(r.size,a,r),l=0;l<s.length;l++){var c,u=s[l],p={feature:o,draw:e.draw,context:e.context,style:r,label:u};i.push(p),e.text_feature&&(c={feature:o,draw:e.text_feature.draw,context:e.context,text:e.text_feature.text,text_settings_key:e.text_feature.text_settings_key,layout:e.text_feature.layout,point_label:u,linked:p},n.push(c),e.draw.text.optional||(p.linked=c))}})),Promise.all([Collision.collide(i,this.collision_group_points,e.id).then((function(e){e.forEach((function(e){t.feature_style=e.style,t.feature_style.label=e.label,t.feature_style.linked=e.linked,Style.addFeature.call(t,e.feature,e.draw,e.context)}))})),this.collideAndRenderTextLabels(e,this.collision_group_text,n)]).then((function(r){var n=_slicedToArray(r,2)[1],i=n.labels,o=n.texts;return i&&o&&i.forEach((function(e){var r=e.text_settings_key,n=o[r]&&o[r][e.text],i=t.feature_style;i.label=e.label,i.linked=e.linked,i.size=n.size.logical_size,i.angle=0,e.label.text_data={text_info:n,text_settings_key:r,text:e.text},i.label_texture=t.textureManager.default,Style.addFeature.call(t,e.feature,e.draw,e.context)})),t.freeText(e),Style.endData.call(t,e)}))},_preprocess:function(t){t.color=StyleParser.createColorPropertyCache(t.color),t.texture=void 0!==t.texture?t.texture:this.texture,t.outline&&(t.outline.color=StyleParser.createColorPropertyCache(t.outline.color),t.outline.width=StyleParser.createPropertyCache(t.outline.width,StyleParser.parsePositiveNumber)),t.z=StyleParser.createPropertyCache(t.z,StyleParser.parseUnits);try{t.size=StyleParser.createPointSizePropertyCache(t.size)}catch(e){return log({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"".concat(e," (").concat(JSON.stringify(t.size),"), skipping features in layer")),null}return t.offset=StyleParser.createPropertyCache(t.offset,(function(e){return Array.isArray(e)&&e.map(StyleParser.parseNumber)})),t.buffer=StyleParser.createPropertyCache(t.buffer,(function(e){return(Array.isArray(e)?e:[e,e]).map(StyleParser.parsePositiveNumber)})),t.repeat_distance=StyleParser.createPropertyCache(t.repeat_distance,StyleParser.parseNumber),null==t.repeat_group&&(t.repeat_group=t.layers.join("-")),t.placement=PLACEMENT$1[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=PLACEMENT$1.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=StyleParser.createPropertyCache(t.placement_spacing,StyleParser.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=StyleParser.createPropertyCache(t.placement_min_length_ratio,StyleParser.parsePositiveNumber),"number"==typeof t.angle?t.angle=t.angle*Math.PI/180:t.angle=t.angle||0,t.text=this.preprocessText(t.text),t.text&&(t.text.variantKey=t.variantKey,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.repeat_group=t.text.repeat_group||t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t.stick&&(t.stick.color=StyleParser.createColorPropertyCache(t.stick.color)),t},default_anchor:["bottom","top","right","left"],computeLayout:function(e,t,r,n,i){var o=e||{};o.id=t,o.units_per_pixel=i.units_per_pixel||1,o.collide=!1!==r.collide,o.anchor=r.anchor,o.offset=StyleParser.evalCachedProperty(r.offset,n)||StyleParser.zeroPair,o.buffer=StyleParser.evalCachedProperty(r.buffer,n)||StyleParser.zeroPair,o.repeat_distance=StyleParser.evalCachedProperty(r.repeat_distance,n),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof r.repeat_group?o.repeat_group=r.repeat_group(n):o.repeat_group=r.repeat_group);var a=r.priority;return null!=a?"function"==typeof a&&(a=a(n)):a=-1>>>0,o.priority=a,o},buildTextLabels:function(e,t){for(var r=[],n=0;n<t.length;n++){var i=t[n],o=this.texts[e.id][i.text_settings_key][i.text].size.collision_size;i.label=new LabelPoint(i.point_label.position,o,i.point_label.isFlat(),i.layout),r.push(i)}return r},buildLabels:function(e,t,r){var n=!!r.flat,i=[];if("Point"===t.type)i.push(new LabelPoint(t.coordinates,e,n,r));else if("MultiPoint"===t.type)for(var o=t.coordinates,a=0;a<o.length;++a){var s=o[a];i.push(new LabelPoint(s,e,n,r))}else if("LineString"===t.type)for(var l=placePointsOnLine(t.coordinates,e,n,r),c=0;c<l.length;++c)i.push(l[c]);else if("MultiLineString"===t.type)for(var u=t.coordinates,p=0;p<u.length;p++)for(var f=placePointsOnLine(u[p],e,n,r),h=0;h<f.length;++h)i.push(f[h]);else if("Polygon"===t.type)if(r.placement===PLACEMENT$1.CENTROID){var d=Geo$1.centroid(t.coordinates);i.push(new LabelPoint(d,e,n,r))}else for(var y=t.coordinates,m=0;m<y.length;m++)for(var v=placePointsOnLine(y[m],e,n,r),g=0;g<v.length;++g)i.push(v[g]);else if("MultiPolygon"===t.type)if(r.placement===PLACEMENT$1.CENTROID){var b=Geo$1.multiCentroid(t.coordinates);i.push(new LabelPoint(b,e,n,r))}else for(var _=t.coordinates,w=0;w<_.length;w++)for(var x=_[w],E=0;E<x.length;E++)for(var S=placePointsOnLine(x[E],e,n,r),k=0;k<S.length;++k)i.push(S[k]);return i},makeVertexTemplate:function(e,t){var r,n=e.color||StyleParser.defaults.color,i=t.vertex_data.vertex_layout;return this.fillVertexTemplate(i,"a_position",0,{size:2}),this.fillVertexTemplate(i,"a_position",e.z||0,{size:1,offset:2}),this.fillVertexTemplate(i,"a_position",this.scaleOrder(e.order),{size:1,offset:3}),this.fillVertexTemplate(i,"a_shape",0,{size:4}),this.fillVertexTemplate(i,"a_shape",e.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(i,"a_texcoord",0,{size:2}),this.fillVertexTemplate(i,"a_offset",0,{size:2}),this.fillVertexTemplate(i,"a_color",Vector$1.mult(n,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&t.variant.shader_point&&(r=e.outline_color||StyleParser.defaults.outline.color,this.fillVertexTemplate(i,"a_outline_color",Vector$1.mult(r,255),{size:4}),this.fillVertexTemplate(i,"a_outline_edge",e.outline_edge_pct||StyleParser.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(i,"a_selection_color",Vector$1.mult(e.selection_color,255),{size:4}),this.fillVertexTemplate(i,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&e.stick&&(this.fillVertexTemplate(i,"a_is_stick",0,{size:1}),this.fillVertexTemplate(i,"a_stick_height",e.stick.height,{size:1})),this.vertex_template},buildQuad:function(e,t,r,n,i,o,a,s,l,c,u,p,f,h,d,y,m,v,g){return t[0]<=0||t[1]<=0?0:buildQuadsForPoints(e,d,y,{quad:t,quad_normalize:256,offset:s,offsets:l,offsets_alt:c,pre_angles:o,pre_angles_alt:a,angle:4096*r,angles:n,angles_alt:i,is_flat:f,elevate_by_altitude:h,build_stick_points:m,stick_color:m&&Vector$1.mult(v,255),color:Vector$1.mult(g||StyleParser.defaults.color,255),curve:p,texcoord_scale:u,texcoord_normalize:texcoord_normalize,pre_angles_normalize:pre_angles_normalize,angles_normalize:angles_normalize,offsets_normalize:offsets_normalize})},build:function(e,t,r){var n=e.label;return"curved"===n.type?this.buildCurvedLabel(n,e,t,r):this.buildStraightLabel(n,e,t,r)},buildStraightLabel:function(e,t,r,n){var i,o=this.makeVertexTemplate(t,r),a=e.angle||t.angle,s="point"!==e.type?(i=t.size[e.type],default_uvs):(i=t.size,t.texcoords||default_uvs);r.uniforms=r.uniforms||{},t.label_texture?(r.uniforms.u_texture=t.label_texture,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,r.uniforms.u_apply_color_blocks=!1):(t.texture?(r.uniforms.u_texture=t.texture,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_TEXTURE):(r.uniforms.u_texture=this.textureManager.default,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_SHADER),r.uniforms.u_apply_color_blocks=!0);var l=e.offset,c=this.defines.TANGRAM_POINT_DRAW_STICK&&!t.label_texture&&t.stick&&0<t.stick.height,u=this.buildQuad([e.position],i,a,null,null,null,null,l,null,null,s,!1,e.isFlat(),t.elevate_by_altitude,r.vertex_data,o,c,c&&t.stick.color,t.color),p=t.linked&&t.linked.label.id;return this.trackLabel(e,p,r,u,n,c),u},buildCurvedLabel:function(e,t,r,n){for(var i=this.makeVertexTemplate(t,r),o=e.angle,a=0,s=0;s<2;s++)for(var l=0;l<e.num_segments;l++){var c=t.size[e.type][l],u=default_uvs,p=this.getTileMesh(n.tile,this.getMeshVariantTypeForDraw(t));p.uniforms=p.uniforms||{},p.uniforms.u_texture=t.label_texture,p.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,p.uniforms.u_apply_color_blocks=!1;var f=e.offset||[0,0],h=e.position,d=e.angles[l],y=e.offsets[l],m=e.pre_angles[l],v=e.num_segments-l-1,g=e.alt_angles[v],b=e.alt_pre_angles[v],_=e.alt_offsets[v],w=this.buildQuad([h],c,o,d,g,m,b,f,y,_,u,!0,e.isFlat(),t.elevate_by_altitude,p.vertex_data,i,!1,!1,t.color);a+=w;var x=t.linked&&t.linked.label.id;this.trackLabel(e,x,r,w,n,!1)}return a},trackLabel:function(e,t,r,n,i,o){var a=5<arguments.length&&void 0!==o&&o;r.labels=r.labels||{},r.labels.collision=r.labels.collision||{},r.labels["non-collision"]=r.labels["non-collision"]||{};var s=e.layout.collide?r.labels.collision:r.labels["non-collision"];s[e.id]=s[e.id]||{container:{label:e.text_data?Object.assign(e.toJSON(),{text_data:e.text_data}):e.toJSON(),linked:t},ranges:[]};var l=2*n,c=r.vertex_data.offset-r.vertex_data.stride*l;s[e.id].ranges.push([c,l,a])},buildLines:function(e,t,r,n){return this.build(t,r,n)},buildPoints:function(e,t,r,n){return this.build(t,r,n)},buildPolygons:function(e,t,r,n){return this.build(t,r,n)},vertexLayoutForMeshVariant:function(e){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:gl$1.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&t.push({name:"a_is_stick",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:gl$1.FLOAT,normalized:!1}),this.vertex_layout=new VertexLayout(t),(t=t.map((function(e){return Object.assign({},e)}))).forEach((function(e){"a_outline_color"!==e.name&&"a_outline_edge"!==e.name||(e.static=null)})),this.vertex_layout_shader_point=new VertexLayout(t)),e.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(e){var t=e.label_texture||e.texture||this.default_mesh_variant.key;return{key:t,shader_point:t===this.default_mesh_variant.key,order:e.label_texture?1:0}},makeMesh:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:{};n=Object.assign({},n,{fade_in_time:this.fade_in_time});return Style.makeMesh.call(this,e,t,n)}});var STOPS=[0,.33,.66,.99],LINE_EXCEED_STRAIGHT=1.5,LINE_EXCEED_STRAIGHT_NO_CURVE=1.8,LINE_EXCEED_STAIGHT_LOOSE=2.3,STRAIGHT_ANGLE_TOLERANCE=.1,CURVE_MIN_TOTAL_COST=1.3,CURVE_MIN_AVG_COST=.4,CURVE_MAX_ANGLE=1,ORIENTED_LABEL_OFFSET_FACTOR=1.2,VERTICAL_ANGLE_TOLERANCE=.01,LabelLine={create:function(e,t,r,n,i){for(var o=[{type:"straight",tolerance:i.no_curving?LINE_EXCEED_STRAIGHT_NO_CURVE:LINE_EXCEED_STRAIGHT},{type:"curved"},{type:"straight",tolerance:LINE_EXCEED_STAIGHT_LOOSE}],a=0;a<o.length;a++){var s=o[a],l=void 0;if("straight"===s.type?l=new LabelLineStraight(t,r,n,i,s.tolerance):"curved"===s.type&&!i.no_curving&&2<r.length&&(l=new LabelLineCurved(e,r,n,i)),l&&!l.throw_away)return l}return!1}},LabelLineBase=function(){function e(t,r){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.layout=r,this.position=[],this.angle=0,this.offset=r.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=t,this._circles=void 0,this.placed=null}return _createClass(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var e=this.getAABB(),t=e.left,r=e.top,n=e.right,i=e.bottom;return Utils$1.pointInTile([t,r])&&Utils$1.pointInTile([n,i])}},{key:"getAABBForSegment",value:function(e,t,r,n){var i,o=this.unit_scale,a=t/2,s=r/2,l=_slicedToArray(e,2),c=l[0],u=l[1];0===this.offset[0]&&0===this.offset[1]||(c+=(i=Vector$1.rot(this.offset,this.angle))[0]*o,u-=i[1]*o);var p=[[Math.cos(n),-Math.sin(n)],[Math.sin(n),Math.cos(n)]],f=Vector$1.multMatrix(p,[-a,-s]),h=Vector$1.multMatrix(p,[a,-s]),d=Vector$1.multMatrix(p,[a,s]),y=Vector$1.multMatrix(p,[-a,s]);return{left:c+Math.min(f[0],h[0],d[0],y[0]),top:u+Math.max(f[1],h[1],d[1],y[1]),right:c+Math.max(f[0],h[0],d[0],y[0]),bottom:u+Math.min(f[1],h[1],d[1],y[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(e){for(var t=[e[0]],r=0,n=0,i=0,o=t,a=!1,s=1;s<e.length;s++){var l=e[s],c=e[s-1],u=Vector$1.length(Vector$1.sub(l,c));l[0]>c[0]?1===i?(t.push(l),n<(r+=u)&&(o=t,n=r,a=!1)):(t=[c,l],n<(r=u)&&(o=t,n=r,a=!1),i=1):l[0]<c[0]?-1===i?(t.unshift(l),n<(r+=u)&&(o=t,n=r,a=!0)):(t=[l,c],n<(r=u)&&(o=t,n=r,a=!0),i=-1):(-1===i?t.unshift(l):(t.push(l),i=1),n<(r+=u)&&(o=t,n=r,a=-1===i))}return[o,a]}}]),e}(),LabelLineStraight=function(){_inherits(t,LabelLineBase);var e=_createSuper(t);function t(r,n,i,o,a){var s;return _classCallCheck(this,t),(s=e.call(this,i,o)).type="straight",s.size=r,s.throw_away=!s.fit(r,n,o,a),s}return _createClass(t,[{key:"fit",value:function(e,t,r,n){var i,o=this.unit_scale,a=_slicedToArray(LabelLineBase.splitLineByOrientation(t),2);t=a[0],i=a[1],"number"==typeof r.orientation&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(e[1]-r.vertical_buffer),i&&(this.offset[1]*=-1),-1===r.orientation&&(this.offset[1]*=-1));for(var s=getLineLengths(t),l=e[0]*o,c=0;c<t.length-1;c++)for(var u=t[c],p=0,f=0,h=c+1,d=void 0;h<t.length;){var y=t[h-1],m=t[h],v=getAngleForSegment(y,m);if(h!==c+1&&(p+=getAbsAngleDiff(v,d)),Math.abs(p)>STRAIGHT_ANGLE_TOLERANCE)break;if(calcFitness(f+=s[h-1],l)<n){var g=Vector$1.mult(Vector$1.add(u,m),.5);return this.angle=-v,Math.abs(this.angle-Math.PI/2)<VERTICAL_ANGLE_TOLERANCE&&(this.angle=-Math.PI/2,"number"==typeof r.orientation&&(this.offset[1]*=-1)),this.position=g,this.breach=!this.inTileBounds(),!0}d=v,h++}return!1}},{key:"getBoundingCircles",value:function(){var e,t,r,n,i,o,a,s,l,c,u,p,f,h;return this._circles||(e=this.unit_scale,i=-(r=(t=this.size[0]/2*e)*Math.cos(this.angle)),o=-(n=t*Math.sin(this.angle)),a=this.offset[0]*e,s=this.offset[1]*e,c=(l=_slicedToArray(this.position,2))[0],u=l[1],u*=-1,a&&(p=[r,n],Vector$1.normalize(p),p[0]*=a,p[1]*=a,c+=p[0],u+=p[1]),s&&(f=[n,-r],Vector$1.normalize(f),f[0]*=s,f[1]*=s,c-=f[0],u-=f[1]),r+=c,n+=u,i+=c,o+=u,h=this.size[1]/2*e,this._circles=encircleLine(r,n,i,o,h)),this._circles}},{key:"getAABB",value:function(){var e,t,r,n,i;return this._aabb||(e=this.unit_scale,t=this.size,r=this.layout.buffer,n=(t[0]+2*r[0])*e,i=(t[1]+2*r[1])*e,this._aabb=this.getAABBForSegment(this.position,n,i,this.angle)),this._aabb}}]),t}(),LabelLineCurved=function(){_inherits(t,LabelLineBase);var e=_createSuper(t);function t(r,n,i,o){var a;return _classCallCheck(this,t),(a=e.call(this,i,o)).type="curved",a.positions=[],a.angles=[],a._aabbs=[],a.pre_angles=[],a.offsets=[],a.num_segments=r.length,a.sizes=r,a.alt_angles=[],a.alt_pre_angles=[],a.alt_offsets=[],a.throw_away=!a.fit(a.sizes,n,o),a}return _createClass(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(e,r,n){var i,o=this.unit_scale,a=Math.max.apply(Math,_toConsumableArray(e.map((function(e){return e[1]})))),s=a*o,l=_slicedToArray(LabelLineBase.splitLineByOrientation(r),2);r=l[0],i=l[1],"number"==typeof n.orientation&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(a-n.vertical_buffer),i&&(this.offset[1]*=-1),-1===n.orientation&&(this.offset[1]*=-1));var c=getLineLengths(r),u=e.map((function(e){return e[0]*o})),p=c.reduce((function(e,t){return e+t}),0),f=u.reduce((function(e,t){return e+t}),0);if(p<f)return!1;var h=r.length-1;if(h<2)return!1;var d=t.curvaturePlacement(r,p,c,f,0,h),y=r[d];if(-1===d||h-d<2)return!1;this.position=y;for(var m=0;m<u.length;m++){this.positions[m]=[],this.offsets[m]=[],this.angles[m]=[],this.pre_angles[m]=[];for(var v=0;v<STOPS.length;v++){var g=STOPS[v],b=_slicedToArray(t.scaleLine(g,r),2),_=b[0],w=b[1],x=(y=_[d],t.placeAtIndex(d,_,w,u)),E=x.positions,S=x.offsets,k=x.angles,T=x.pre_angles,O=S.map((function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])/o}));if(0===g){this.angle=1/k.length*k.reduce((function(e,t){return e+t}));for(var A=0;A<E.length;A++){var P=E[A],C=T[A],N=u[A],R=C+k[A];this._aabbs.push(this.getAABBForSegment(P,N,s,R))}}this.positions[m].push(E[m]),this.offsets[m].push(O[m]),this.angles[m].push(k[m]),this.pre_angles[m].push(T[m])}}u=e.slice().reverse().map((function(e){return e[0]*o}));for(var j=0;j<u.length;j++){this.alt_offsets[j]=[],this.alt_angles[j]=[],this.alt_pre_angles[j]=[];for(var M=0;M<STOPS.length;M++){var I=STOPS[M],D=_slicedToArray(t.scaleLine(I,r),2),L=D[0],F=D[1];y=L[d];var B=t.placeAtIndex(d,L,F,u),z=B.offsets,$=B.angles,U=B.pre_angles,H=z.map((function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])/o}));0===I&&(this.alt_angle=1/$.length*$.reduce((function(e,t){return e+t}))),this.alt_offsets[j].push(H[j]),this.alt_angles[j].push($[j]),this.alt_pre_angles[j].push(U[j])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var e=[],t=this.unit_scale,r=0;r<this.positions.length;r++){var n=this.sizes[r],i=this.angles[r][0],o=this.positions[r][0],a=n[0]/2*t,s=a*Math.cos(i),l=a*Math.sin(i),c=-s,u=-l,p=_slicedToArray(o,2),f=p[0],h=p[1],d=encircleLine(s+=f,l+=h*=-1,c+=f,u+=h,n[1]/2*t);Array.prototype.push.apply(e,d)}this._circles=e}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var e=1/0,t=-1/0,r=-1/0,n=1/0,i=0;i<this._aabbs.length;i++){var o=this._aabbs[i];e=Math.min(e,o.left),t=Math.max(t,o.top),r=Math.max(r,o.right),n=Math.min(n,o.bottom)}this._aabb={left:e,top:t,right:r,bottom:n}}return this._aabb}}],[{key:"curvaturePlacement",value:function(e,t,r,n,i,o){i=i||0,o=o||e.length-1;for(var a=[],s=i+1;s<o;s++){var l=e[s-1],c=e[s],u=e[s+1],p=Vector$1.perp(c,l),f=Vector$1.perp(u,c),h=Vector$1.angleBetween(p,f);CURVE_MAX_ANGLE<h&&(h=1/0),a.push(h)}a.push(1/0);for(var d=[],y=[],m=i,v=0,g=0;g<i;g++)v+=r[g];for(;v+n<t;){for(var b=v+n,_=v,w=m,x=0;w<o&&_+r[w]<b&&(x+=a[w])!==1/0;)_+=r[w],w++;if(0===x)return m;var E=x/(w-m);d.push(x),y.push(E),v+=r[m],m++}if(0===d.length)return-1;var S=Math.min.apply(null,d),k=y[d.indexOf(S)];return S<CURVE_MIN_TOTAL_COST&&k<CURVE_MIN_AVG_COST?d.indexOf(S):-1}},{key:"scaleLine",value:function(e,t){var r=[t[0]],n=[];return t.forEach((function(i,o){var a,s;o!==t.length-1&&(a=Vector$1.sub(t[o+1],t[o]),s=Vector$1.mult(a,1+e),r.push(Vector$1.add(r[o],s)),n.push(Vector$1.length(s)))})),[r,n]}},{key:"placeAtIndex",value:function(e,r,n,i){var o=r[e],a=_slicedToArray(t.getIndicesAndOffsets(e,n,i),2),s=a[0],l=a[1],c=t.getPositionsFromIndicesAndOffsets(r,s,l),u=_slicedToArray(t.getAnglesFromIndicesAndOffsets(o,s,r,c),3);return{positions:c,offsets:u[0],angles:u[1],pre_angles:u[2]}}},{key:"getIndicesAndOffsets",value:function(e,t,r){for(var n=r.length,i=[],o=[],a=0,s=0,l=0;a<n;){for(var c=r[a];a<n&&s+.5*c<=l+t[e];){var u=s-l+.5*c;o.push(u),i.push(e),s+=c,c=r[++a]}l+=t[e],e++}return[i,o]}},{key:"getPositionsFromIndicesAndOffsets",value:function(e,t,r){for(var n=[],i=0;i<t.length;i++){var o=t[i],a=r[i],s=getAngleForSegment(e[o],e[o+1]),l=Vector$1.rot([a,0],s),c=Vector$1.add(e[o],l);n.push(c)}return n}},{key:"getAnglesFromIndicesAndOffsets",value:function(e,t,r,n){for(var i=[],o=[],a=[],s=0;s<n.length;s++){var l,c,u=n[s],p=t[s],f=Vector$1.sub(u,e),h=-Vector$1.angle(f),d=getTextAngleForSegment(r[p],r[p+1])-h;0<s&&(l=i[s-1],c=o[s-1],Math.abs(h-l)>Math.PI&&(h+=l<h?-2*Math.PI:2*Math.PI),Math.abs(c-d)>Math.PI&&(d+=c<d?-2*Math.PI:2*Math.PI)),i.push(h),o.push(d),a.push(f)}return[a,i,o]}}]),t}();function calcFitness(e,t){return t/e}function getAngleForSegment(e,t){var r=Vector$1.sub(t,e);return Vector$1.angle(r)}function getTextAngleForSegment(e,t){return-getAngleForSegment(e,t)}function getLineLengths(e){for(var t=[],r=0;r<e.length-1;r++){var n=e[r],i=e[r+1],o=Math.hypot(n[0]-i[0],n[1]-i[1]);t.push(o)}return t}function getAbsAngleDiff(e,t){for(var r,n=t<e?(r=t,e):(r=e,t);n-r>Math.PI;)r+=2*Math.PI;return Math.abs(n-r)}var TextStyle=Object.create(Points);Object.assign(TextStyle,{name:"text",super:Points,built_in:!0,init:function(e){var t=0<arguments.length&&void 0!==e?e:{};Style.init.call(this,t),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(e,t){this.super.makeVertexTemplate.apply(this,arguments);var r=t.vertex_data.vertex_layout;return this.fillVertexTemplate(r,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets",0,{size:4}),this.fillVertexTemplate(r,"a_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(r,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(r,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(e,t,r){var n=this,i=r.tile,o=e.geometry.type;t.can_articulate="LineString"===o||"MultiLineString"===o,t.supersample_text="LineString"===o||"MultiLineString"===o;var a=this.parseTextFeature(e,t,r,i);a&&(a instanceof Array?a.forEach((function(t){t.feature=e,t.context=r,t.layout.vertex=!1,n.queueFeature(t,i)})):(a.feature=e,a.context=r,a.layout.vertex=!1,this.queueFeature(a,i)),Collision.addStyle(this.name,i.id))},endData:function(e){var t=this,r=this.queues[e.id];return delete this.queues[e.id],this.collideAndRenderTextLabels(e,this.name,r).then((function(r){var n=r.labels,i=r.texts;return n&&i&&(t.texts[e.id]=i,n.forEach((function(r){var n=r.text_settings_key,i=t.texts[e.id][n]&&t.texts[e.id][n][r.text],o=t.feature_style;o.label=r.label,r.label.text_data={text_info:i,text_settings_key:n,text:r.text},o.label_texture=t.textureManager.default,i.text_settings.can_articulate?(o.size={},"straight"===r.label.type?o.size.straight=i.size.logical_size:o.size.curved=i.segment_sizes.map((function(e){return e.logical_size}))):o.size=i.size.logical_size,Style.addFeature.call(t,r.feature,r.draw,r.context)}))),t.freeText(e),Style.endData.call(t,e).then((function(r){if(r){for(var n in r.meshes)r.meshes[n].uniforms.u_apply_color_blocks=!0;e.mesh_data[t.name]=r}return r}))}))},_preprocess:function(e){return this.preprocessText(e)},buildTextLabels:function(e,t){for(var r=[],n=0;n<t.length;n++){var i,o,a=t[n],s=this.texts[e.id][a.text_settings_key][a.text];a.layout.vertical_buffer=s.vertical_buffer,o=s.text_settings.can_articulate?(i=s.segment_sizes.map((function(e){return e.collision_size})),a.layout.no_curving=s.no_curving,this.buildLabels(i,a.feature.geometry,a.layout,s.size.collision_size)):this.buildLabels(s.size.collision_size,a.feature.geometry,a.layout);for(var l=0;l<o.length;l++){var c=Object.create(a);c.label=o[l],r.push(c)}}return r},buildLabels:function(e,t,r,n){var i,o,a="Point"!==t.type,s=[];if("LineString"===t.type)Array.prototype.push.apply(s,this.buildLineLabels(t.coordinates,e,a,r,n));else if("MultiLineString"===t.type)for(var l=t.coordinates,c=0;c<l.length;++c)Array.prototype.push.apply(s,this.buildLineLabels(l[c],e,a,r,n));else if("Point"===t.type)s.push(new LabelPoint(t.coordinates,e,a,r));else if("MultiPoint"===t.type)for(var u=t.coordinates,p=0;p<u.length;++p)s.push(new LabelPoint(u[p],e,a,r));else"Polygon"===t.type?(i=Geo$1.centroid(t.coordinates),s.push(new LabelPoint(i,e,a,r))):"MultiPolygon"===t.type&&(o=Geo$1.multiCentroid(t.coordinates),s.push(new LabelPoint(o,e,a,r)));return s},buildLineLabels:function(e,t,r,n,i){var o,a=[],s=Math.min(n.subdiv,e.length-1);if(1<s)for(var l=(e.length-1)/s,c=0;c<s;c++){var u=Math.floor(c*l),p=Math.floor((c+1)*l)+1,f=e.slice(u,p),h=LabelLine.create(t,i,f,r,n);h&&a.push(h)}return a.length<s&&(o=LabelLine.create(t,i,e,r,n))&&a.push(o),a},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_offsets",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:gl$1.SHORT,normalized:!1}],this.vertex_layout=new VertexLayout(e)),this.vertex_layout},getMeshVariantTypeForDraw:Points.getMeshVariantTypeForDraw}),TextStyle.texture_id=0;var RasterStyle=Object.create(Polygons);Object.assign(RasterStyle,{name:"raster",super:Polygons,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(e){return e.color=e.color||StyleParser.defaults.color,this.super._preprocess.apply(this,arguments)}});var CustomIcons=Object.create(Points);Object.assign(CustomIcons,{name:"custom_icons",collision:!1,init:function(e){var t=0<arguments.length&&void 0!==e?e:{};Points.init.call(this,t)},loadTexture:function(e,t,r){var n,i=e.width,o=e.height,a=e.items,s=document.createElement("canvas"),l=Utils$1.device_pixel_ratio,c=this.sources[t],u={sprites:{}};if(s.width=i*l,s.height=o*l,c){var p,f=a.length,h=s.getContext("2d");for(h.scale(l,l);p=a[--f];){var d,y=c.getIconBitmapByObjectId(p.meta.objectId,p.meta.id);y&&((d=isTainting(y))?log("error",d):(h.drawImage(y,p.x,p.y,p.width,p.height),u.sprites[p.meta.id]=[p.x,p.y,p.width,p.height]))}}return u.element=s,(n=this.textureManager.create(this.gl,r,u)).retain(),n.loading.then((function(e){return e.name}))},buildRasterTextures:function(e,t){return WorkerBroker.postMessage(this.main_thread_target+".loadTexture",e.rasters,e.source,e.texture_name).then((function(e){return t.textures.push(e),t}))},addFeature:function(e,t,r){var n=r.tile.rasters,i={};n.items.forEach((function(e){i[e.meta.id]=[e.x,e.y,e.width,e.height]}));var o="".concat(r.tile.source,"_dyn_").concat(r.tile.coords.key,"_").concat(this.generation,"_").concat(r.tile.id);t.texture=r.tile.texture_name=o;var a=Object.assign({},DEFAULT_TEXTURE_INFO,{name:o,width:n.width,height:n.height,sprites:i,manager:this.textureManager});Texture.prototype.calculateSprites.apply(a),this.textureManager.textures[o]=a,Points.addFeature.apply(this,arguments),delete this.textureManager.textures[o]}});var DEFAULT_TEXTURE_INFO={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},OverlayStyle=Object.create(Polygons);Object.assign(OverlayStyle,{name:"overlays",super:Polygons,init:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.selection=t.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!Thread.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var e=!1;for(var t in this.sources)if(this.sources[t]instanceof ObjectSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},loadTextures:function(e,t){var r,n,i,o=this.sources[t],a=e.name;if(e.overlays_config.forEach((function(t){var a,s=t.texcoords,l=t.id,c=o.getMapObjectById(l),u=c.getBitmap();u&&((a=isTainting(u=bitmapToCanvas(u,u.width,u.height)))?log("error",a):(r||((r=document.createElement("canvas")).width=e.width,r.height=e.height,n=r.getContext("2d")),n.save(),n.globalAlpha=c.getOpacity(),s.forEach((function(e){return n.drawImage(u,e[0],e[1],e[2],e[3])})),n.restore(),i=!0))})),i){e.element=r;var s={};return s[a]=e,this.super.loadTextures.call(this,s)}var l=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:l.name,width:l.width,height:l.height,loaded:l.loaded}])},buildRasterTextures:function(e,t){var r=this.sources[e.source].tileTexture(e);return r?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",r,e.source).then((function(e){if(!e||e.length<1)return t;if(e.some((function(e){return!e.loaded})))return null;var r=e[0].name;return t.uniforms=t.uniforms||{},t.textures=t.textures||[],t.uniforms.u_raster=r,t.uniforms.u_raster_offset=[0,0,1],t.textures.push(r),t})):Promise.resolve(t)}});var shaderSrc_Vertex="uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",shaderSrc_Fragment="varying vec4 v_color;void main(void){gl_FragColor=v_color;}",STYLE_NAME="skybox",SkyBox=Object.create(Style),positions=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(SkyBox,{name:STYLE_NAME,built_in:!0,vertex_shader_src:shaderSrc_Vertex,fragment_shader_src:shaderSrc_Fragment,selection:!1,blend:"inlay",blend_order:1,init:function(){Style.init.apply(this,arguments),this.selection=!1},_preprocess:function(e){return e.color={top:StyleParser.createColorPropertyCache(e.color.zenith),bottom:StyleParser.createColorPropertyCache(e.color.horizon),fog:StyleParser.createColorPropertyCache(e.color.fog)},e},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:gl$1.FLOAT,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:gl$1.FLOAT,normalized:!0}],this.vertex_layout=new VertexLayout(e)),this.vertex_layout},makeVertexTemplate:function(){var e=0;return this.vertex_template[e++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(e,t,r){var n=this.feature_style;return t.color&&t.color.top&&t.color.bottom&&(n.color_top=this.parseColor(t.color.top,r),n.color_bottom=this.parseColor(t.color.bottom,r),n.color_fog=this.parseColor(t.color.fog||"white",r),Array.isArray(n.color_fog)&&(n.color_fog=n.color_fog.slice(),n.color_fog[3]=0)),n},buildGeometry:function(e,t,r){for(var n=this.makeVertexTemplate(t),i=r.vertex_data,o=r.vertex_data.vertex_layout,a=i.vertex_layout.index.a_position,s={top:t.color_top,bottom:t.color_bottom},l={top:t.color_bottom,bottom:t.color_fog},c=0,u=positions.length-1;c<u;c+=2){n[a+0]=positions[c],n[a+1]=positions[c+1];var p=c<12,f=0<positions[c+1],h=p?s:l;this.fillVertexTemplate(o,"a_is_sky",p?1:0,{size:1}),this.fillVertexTemplate(o,"a_is_top",f?1:0,{size:1}),this.fillVertexTemplate(o,"a_color",Vector$1.mult(f?h.top:h.bottom,255),{size:4}),i.addVertex(n)}return 4}});var shaderSrc_accessors="#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n",shaderSrc_layerOrder="void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}",shaderSrc_selectionGlobals="\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n",shaderSrc_selectionVertex="\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n",shaderSrc_utils="#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n",shaderSrc_snapToPixelGrid="uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}",StyleManager=function(){function e(){_classCallCheck(this,e),this.styles={},this.base_styles={},this.register(Object.create(Polygons)),this.register(Object.create(Lines)),this.register(Object.create(PatternLines)),this.register(Object.create(Points)),this.register(Object.create(TextStyle)),this.register(Object.create(RasterStyle)),this.register(Object.create(CustomIcons)),this.register(Object.create(OverlayStyle)),this.register(Object.create(SkyBox))}return _createClass(e,[{key:"init",value:function(){ShaderProgram.removeBlock("global"),ShaderProgram.removeBlock("setup"),ShaderProgram.addBlock("global",shaderSrc_accessors),ShaderProgram.addBlock("global",shaderSrc_layerOrder),ShaderProgram.addBlock("global",shaderSrc_selectionGlobals),ShaderProgram.addBlock("global",shaderSrc_snapToPixelGrid),ShaderProgram.replaceBlock("utils",shaderSrc_utils),ShaderProgram.replaceBlock("setup",shaderSrc_selectionVertex),ShaderProgram.defines.TANGRAM_EPSILON=1e-5,ShaderProgram.defines.TANGRAM_LAYER_DELTA=1/16384,ShaderProgram.defines.TANGRAM_TILE_SCALE="vec3(".concat(Geo$1.tile_scale,"., ").concat(Geo$1.tile_scale,"., u_meters_per_pixel * ").concat(Geo$1.tile_size,".)"),ShaderProgram.defines.TANGRAM_HEIGHT_SCALE=Geo$1.height_scale,ShaderProgram.defines.TANGRAM_ALPHA_TEST=.1,Lines.dash_textures={}}},{key:"destroy",value:function(e){var t=this;Object.keys(this.styles).forEach((function(r){var n=t.styles[r];n.gl===e&&(log("trace","StyleManager.destroy: destroying render style ".concat(n.name)),n.base&&t.remove(n.name),n.destroy())}))}},{key:"register",value:function(e){this.styles[e.name]=e,this.base_styles[e.name]=e}},{key:"remove",value:function(e){delete this.styles[e]}},{key:"mix",value:function(e,t){if(e.mixed)return e;e.mixed={};var r=[];e.mix&&(Array.isArray(e.mix)?r.push.apply(r,_toConsumableArray(e.mix)):r.push(e.mix),(r=r.map((function(e){return t[e]})).filter((function(t){return t&&t!==e}))).forEach((function(t){return e.mixed[t.name]=!0}))),r.push(e),e.animated=r.some((function(e){return e&&e.animated})),e.texcoords=r.some((function(e){return e&&e.texcoords})),e.base=r.map((function(e){return e.base})).filter((function(e){return e})).pop(),e.lighting=r.map((function(e){return e.lighting})).filter((function(e){return null!=e})).pop(),e.texture=r.map((function(e){return e.texture})).filter((function(e){return e})).pop(),e.raster=r.map((function(e){return e.raster})).filter((function(e){return null!=e})).pop(),e.dash=r.map((function(e){return e.dash})).filter((function(e){return null!=e})).pop(),e.dash_background_color=r.map((function(e){return e.dash_background_color})).filter((function(e){return null!=e})).pop(),r.some((function(e){return e.hasOwnProperty("blend")&&e.blend}))&&(e.blend=r.map((function(e){return e.hasOwnProperty("blend")&&e.blend})).filter((function(e){return e})).pop()),e.blend_order=r.map((function(e){return e.blend_order})).filter((function(e){return null!=e})).pop(),e.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(r.map((function(e){return e.defines})).filter((function(e){return e}))))),e.material=Object.assign.apply(Object,[{}].concat(_toConsumableArray(r.map((function(e){return e.material})).filter((function(e){return e})))));var n=r.map((function(e){return e.draw})).filter((function(e){return e}));return 0<n.length&&(e.draw=mergeObjects.apply(void 0,[{}].concat(_toConsumableArray(n)))),this.mixShaders(e,t,r),e}},{key:"mixShaders",value:function(e,t,r){var n={},i=r.map((function(e){return e.shaders})).filter((function(e){return e}));if(n.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(i.map((function(e){return e.defines})).filter((function(e){return e}))))),n.uniforms={},n._uniforms=e.shaders&&e.shaders.uniforms||{},n._uniform_scopes={},r.filter((function(e){return e.shaders&&e.shaders.uniforms})).forEach((function(e){for(var r in e.shaders.uniforms)!function(r){n._uniform_scopes[r]=e.name,Object.defineProperty(n.uniforms,r,{enumerable:!0,configurable:!0,get:function(){return void 0!==n._uniforms[r]?n._uniforms[r]:t[n._uniform_scopes[r]].shaders.uniforms!==n.uniforms?t[n._uniform_scopes[r]].shaders.uniforms[r]:void 0},set:function(e){n._uniforms[r]=e}})}(r)})),n.extensions=Object.keys(i.map((function(e){return e.extensions})).filter((function(e){return e})).reduce((function(e,t){return"string"==typeof t?e[t]=!0:t.forEach((function(t){return e[t]=!0})),e}),{})||{}),e.shaders&&e.shaders.blocks)for(var o in e.shaders.block_scopes=e.shaders.block_scopes||{},e.shaders.blocks){var a,s=e.shaders.blocks[o];e.shaders.block_scopes[o]=e.shaders.block_scopes[o]||[],Array.isArray(s)?(a=e.shaders.block_scopes[o]).push.apply(a,_toConsumableArray(s.map((function(){return e.name})))):e.shaders.block_scopes[o].push(e.name)}var l={};return i.forEach((function(e){if(e.blocks){n.blocks=n.blocks||{},n.block_scopes=n.block_scopes||{};var t={};for(var r in e.blocks){var i=e.blocks[r],o=e.block_scopes[r];n.blocks[r]=n.blocks[r]||[],n.block_scopes[r]=n.block_scopes[r]||[],i=Array.isArray(i)?i:[i],o=Array.isArray(o)?o:[o];for(var a=0;a<i.length;a++)l[o[a]]||(t[o[a]]=!0,n.blocks[r].push(i[a]),n.block_scopes[r].push(o[a]))}Object.assign(l,t)}})),Object.assign(e.mixed,l),e.shaders=n,e}},{key:"create",value:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:{},i=mergeObjects({},t);return i.name=e,(i=this.mix(i,n)).base&&this.base_styles[i.base]?this.styles[e]=i=Object.assign(Object.create(this.base_styles[i.base]),i):i.base=null,i}},{key:"build",value:function(e){var t=this,r=Object.keys(e).sort((function(r,n){return t.inheritanceDepth(r,e)-t.inheritanceDepth(n,e)}));for(var n in this.styles)this.base_styles[n]?this.styles[n].reset():delete this.styles[n];var i={};return r.forEach((function(r){i[r]=t.create(r,e[r],i)})),this.styles}},{key:"initStyles",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};for(var r in this.styles)this.styles[r].init(t)}},{key:"inheritanceDepth",value:function(e,t){for(var r=this,n=0;;){var i=t[e];if(!i)break;if(!i.mix)break;if(n++,Array.isArray(i.mix)){n+=Math.max.apply(Math,_toConsumableArray(i.mix.map((function(n){if(e!==n)return r.inheritanceDepth(n,t)}))));break}if(e===i.mix)break;e=i.mix}return n}}]),e}();function isNothing(e){return null==e}function isObject$2(e){return"object"==typeof e&&null!==e}function toArray(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]}function extend$1(e,t){var r,n,i,o;if(t)for(r=0,n=(o=Object.keys(t)).length;r<n;r+=1)e[i=o[r]]=t[i];return e}function repeat(e,t){for(var r="",n=0;n<t;n+=1)r+=e;return r}function isNegativeZero(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}var isNothing_1=isNothing,isObject_1=isObject$2,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend$1,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function YAMLException(e,t){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}YAMLException.prototype=Object.create(Error.prototype),YAMLException.prototype.constructor=YAMLException,YAMLException.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t};var exception=YAMLException;function Mark(e,t,r,n,i){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=i}Mark.prototype.getSnippet=function(e,t){var r,n,i,o,a;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",n=this.position;0<n&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(n-1));)if(--n,this.position-n>t/2-1){r=" ... ",n+=5;break}for(i="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>t/2-1){i=" ... ",o-=5;break}return a=this.buffer.slice(n,o),common.repeat(" ",e)+r+a+i+"\n"+common.repeat(" ",e+this.position-n+r.length)+"^"},Mark.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r};var mark=Mark,TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(e){var t={};return null!==e&&Object.keys(e).forEach((function(r){e[r].forEach((function(e){t[String(e)]=r}))})),t}function Type(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===TYPE_CONSTRUCTOR_OPTIONS.indexOf(t))throw new exception('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=compileStyleAliases(t.styleAliases||null),-1===YAML_NODE_KINDS.indexOf(this.kind))throw new exception('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var type=Type;function compileList(e,t,r){var n=[];return e.include.forEach((function(e){r=compileList(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function compileMap(){var e,t,r={};function n(e){r[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}function Schema(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=compileMap(this.compiledImplicit,this.compiledExplicit)}Schema.DEFAULT=null,Schema.create=function(e,t){var r,n;switch(arguments.length){case 1:r=Schema.DEFAULT,n=e;break;case 2:r=e,n=t;break;default:throw new exception("Wrong number of arguments for Schema.create function")}if(r=common.toArray(r),n=common.toArray(n),!r.every((function(e){return e instanceof Schema})))throw new exception("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!n.every((function(e){return e instanceof type})))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema({include:r,explicit:n})};var schema=Schema,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function constructYamlNull(){return null}function isNull$1(e){return null===e}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});function resolveYamlBoolean(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function constructYamlBoolean(e){return"true"===e||"True"===e||"TRUE"===e}function isBoolean$1(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean$1,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}function resolveYamlInteger(e){if(null===e)return!1;var t,r=e.length,n=0,i=!1;if(!r)return!1;if("-"!==(t=e[n])&&"+"!==t||(t=e[++n]),"0"===t){if(n+1===r)return!0;if("b"===(t=e[++n])){for(n++;n<r;n++)if("_"!==(t=e[n])){if("0"!==t&&"1"!==t)return!1;i=!0}return i}if("x"===t){for(n++;n<r;n++)if("_"!==(t=e[n])){if(!isHexCode(e.charCodeAt(n)))return!1;i=!0}return i}for(;n<r;n++)if("_"!==(t=e[n])){if(!isOctCode(e.charCodeAt(n)))return!1;i=!0}return i}for(;n<r;n++)if("_"!==(t=e[n])){if(":"===t)break;if(!isDecCode(e.charCodeAt(n)))return!1;i=!0}return!!i&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(n)))}function constructYamlInteger(e){var t,r,n=e,i=1,o=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?i*parseInt(n.slice(2),2):"x"===n[1]?i*parseInt(n,16):i*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(e){o.unshift(parseInt(e,10))})),n=0,r=1,o.forEach((function(e){n+=e*r,r*=60})),i*n):i*parseInt(n,10)}function isInteger(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!common.isNegativeZero(e)}var int_1=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(e){return null!==e&&!!YAML_FLOAT_PATTERN.test(e)}function constructYamlFloat(e){var t,r=e.replace(/_/g,"").toLowerCase(),n="-"===r[0]?-1:1,i=[];return 0<="+-".indexOf(r[0])&&(r=r.slice(1)),".inf"===r?1==n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===r?NaN:0<=r.indexOf(":")?(r.split(":").forEach((function(e){i.unshift(parseFloat(e,10))})),r=0,t=1,i.forEach((function(e){r+=e*t,t*=60})),n*r):n*parseFloat(r,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(e))return"-0.0";return r=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(r)?r.replace("e",".e"):r}function isFloat(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||common.isNegativeZero(e))}var float_1$1=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=new schema({include:[failsafe],implicit:[_null,bool,int_1,float_1$1]}),core=new schema({include:[json]}),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");function resolveYamlTimestamp(e){return null!==e&&null!==YAML_TIMESTAMP_REGEXP.exec(e)}function constructYamlTimestamp(e){var t,r,n,i,o,a,s,l=0,c=null,u=YAML_TIMESTAMP_REGEXP.exec(e);if(null===u)throw new Error("Date resolve error");if(t=+u[1],r=u[2]-1,n=+u[3],!u[4])return new Date(Date.UTC(t,r,n));if(i=+u[4],o=+u[5],a=+u[6],u[7]){for(l=u[7].slice(0,3);l.length<3;)l+="0";l=+l}return u[9]&&(c=6e4*(60*+u[10]+ +(u[11]||0)),"-"===u[9]&&(c=-c)),s=new Date(Date.UTC(t,r,n,i,o,a,l)),c&&s.setTime(s.getTime()-c),s}function representYamlTimestamp(e){return e.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(e){return"<<"===e||null===e}var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),NodeBuffer=bufferEs6.Buffer,BASE64_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function resolveYamlBinary(e){if(null===e)return!1;for(var t,r=0,n=e.length,i=BASE64_MAP,o=0;o<n;o++)if(!(64<(t=i.indexOf(e.charAt(o))))){if(t<0)return!1;r+=6}return r%8==0}function constructYamlBinary(e){for(var t,r=e.replace(/[\r\n=]/g,""),n=r.length,i=BASE64_MAP,o=0,a=[],s=0;s<n;s++)s%4==0&&s&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|i.indexOf(r.charAt(s));return 0==(t=n%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18==t?(a.push(o>>10&255),a.push(o>>2&255)):12==t&&a.push(o>>4&255),NodeBuffer?new NodeBuffer(a):a}function representYamlBinary(e){for(var t,r="",n=0,i=e.length,o=BASE64_MAP,a=0;a<i;a++)a%3==0&&a&&(r+=o[n>>18&63],r+=o[n>>12&63],r+=o[n>>6&63],r+=o[63&n]),n=(n<<8)+e[a];return 0==(t=i%3)?(r+=o[n>>18&63],r+=o[n>>12&63],r+=o[n>>6&63],r+=o[63&n]):2==t?(r+=o[n>>10&63],r+=o[n>>4&63],r+=o[n<<2&63],r+=o[64]):1==t&&(r+=o[n>>2&63],r+=o[n<<4&63],r+=o[64],r+=o[64]),r}function isBinary(e){return NodeBuffer&&NodeBuffer.isBuffer(e)}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty=Object.prototype.hasOwnProperty,_toString=Object.prototype.toString;function resolveYamlOmap(e){if(null===e)return!0;for(var t,r,n,i=[],o=e,a=0,s=o.length;a<s;a+=1){if(t=o[a],n=!1,"[object Object]"!==_toString.call(t))return!1;for(r in t)if(_hasOwnProperty.call(t,r)){if(n)return!1;n=!0}if(!n)return!1;if(-1!==i.indexOf(r))return!1;i.push(r)}return!0}function constructYamlOmap(e){return null!==e?e:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(e){if(null===e)return!0;for(var t,r,n=e,i=new Array(n.length),o=0,a=n.length;o<a;o+=1){if(t=n[o],"[object Object]"!==_toString$1.call(t))return!1;if(1!==(r=Object.keys(t)).length)return!1;i[o]=[r[0],t[r[0]]]}return!0}function constructYamlPairs(e){if(null===e)return[];for(var t,r,n=e,i=new Array(n.length),o=0,a=n.length;o<a;o+=1)t=n[o],r=Object.keys(t),i[o]=[r[0],t[r[0]]];return i}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$1=Object.prototype.hasOwnProperty;function resolveYamlSet(e){if(null===e)return!0;var t,r=e;for(t in r)if(_hasOwnProperty$1.call(r,t)&&null!==r[t])return!1;return!0}function constructYamlSet(e){return null!==e?e:{}}var set$2=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),default_safe=new schema({include:[core],implicit:[timestamp,merge],explicit:[binary,omap,pairs,set$2]});function resolveJavascriptUndefined(){return!0}function constructJavascriptUndefined(){}function representJavascriptUndefined(){return""}function isUndefined$1(e){return void 0===e}var _undefined=new type("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:resolveJavascriptUndefined,construct:constructJavascriptUndefined,predicate:isUndefined$1,represent:representJavascriptUndefined});function resolveJavascriptRegExp(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),3<n.length)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0}function constructJavascriptRegExp(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)}function representJavascriptRegExp(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function isRegExp$1(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var regexp=new type("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:resolveJavascriptRegExp,construct:constructJavascriptRegExp,predicate:isRegExp$1,represent:representJavascriptRegExp}),esprima;try{var _require=commonjsRequire,esprima=_require("esprima")}catch(e){"undefined"!=typeof window&&(esprima=window.esprima)}function resolveJavascriptFunction(e){if(null===e)return!1;try{var t="("+e+")",r=esprima.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&"FunctionExpression"===r.body[0].expression.type}catch(e){return!1}}function constructJavascriptFunction(e){var t,r="("+e+")",n=esprima.parse(r,{range:!0}),i=[];if("Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"FunctionExpression"!==n.body[0].expression.type)throw new Error("Failed to resolve function");return n.body[0].expression.params.forEach((function(e){i.push(e.name)})),t=n.body[0].expression.body.range,new Function(i,r.slice(t[0]+1,t[1]-1))}function representJavascriptFunction(e){return e.toString()}function isFunction$1(e){return"[object Function]"===Object.prototype.toString.call(e)}var _function=new type("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:resolveJavascriptFunction,construct:constructJavascriptFunction,predicate:isFunction$1,represent:representJavascriptFunction}),default_full=schema.DEFAULT=new schema({include:[default_safe],explicit:[_undefined,regexp,_function]}),_hasOwnProperty$2=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function is_EOL(e){return 10===e||13===e}function is_WHITE_SPACE(e){return 9===e||32===e}function is_WS_OR_EOL(e){return 9===e||32===e||10===e||13===e}function is_FLOW_INDICATOR(e){return 44===e||91===e||93===e||123===e||125===e}function fromHexCode(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function escapedHexLen(e){return 120===e?2:117===e?4:85===e?8:0}function fromDecimalCode(e){return 48<=e&&e<=57?e-48:-1}function simpleEscapeSequence(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||default_full,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(e,t){return new exception(t,new mark(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function throwError(e,t){throw generateError(e,t)}function throwWarning(e,t){e.onWarning&&e.onWarning.call(null,generateError(e,t))}var directiveHandlers={YAML:function(e,t,r){var n,i,o;null!==e.version&&throwError(e,"duplication of %YAML directive"),1!==r.length&&throwError(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&throwError(e,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),o=parseInt(n[2],10),1!==i&&throwError(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&throwWarning(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,i;2!==r.length&&throwError(e,"TAG directive accepts exactly two arguments"),n=r[0],i=r[1],PATTERN_TAG_HANDLE.test(n)||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$2.call(e.tagMap,n)&&throwError(e,'there is a previously declared suffix for "'+n+'" tag handle'),PATTERN_TAG_URI.test(i)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=i}};function captureSegment(e,t,r,n){var i,o,a,s;if(t<r){if(s=e.input.slice(t,r),n)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(s)&&throwError(e,"the stream contains non-printable characters");e.result+=s}}function mergeMappings(e,t,r,n){var i,o,a,s;for(common.isObject(r)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(r)).length;a<s;a+=1)o=i[a],_hasOwnProperty$2.call(t,o)||(t[o]=r[o],n[o]=!0)}function storeMappingPair(e,t,r,n,i,o){var a,s;if(i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(o))for(a=0,s=o.length;a<s;a+=1)mergeMappings(e,t,o[a],r);else mergeMappings(e,t,o,r);else e.json||_hasOwnProperty$2.call(r,i)||!_hasOwnProperty$2.call(t,i)||throwError(e,"duplicated mapping key"),t[i]=o,delete r[i];return t}function readLineBreak(e){var t=e.input.charCodeAt(e.position);10===t?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function skipSeparationSpace(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);0!==i;){for(;is_WHITE_SPACE(i);)i=e.input.charCodeAt(++e.position);if(t&&35===i)for(;10!==(i=e.input.charCodeAt(++e.position))&&13!==i&&0!==i;);if(!is_EOL(i))break;for(readLineBreak(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&throwWarning(e,"deficient indentation"),n}function testDocumentSeparator(e){var t=e.position,r=e.input.charCodeAt(t);return 45!==r&&46!==r||r!==e.input.charCodeAt(t+1)||r!==e.input.charCodeAt(t+2)||(t+=3,0!==(r=e.input.charCodeAt(t))&&!is_WS_OR_EOL(r))?void 0:1}function writeFoldedLines(e,t){1===t?e.result+=" ":1<t&&(e.result+=common.repeat("\n",t-1))}function readPlainScalar(e,t,r){var n,i,o,a,s,l,c,u=e.kind,p=e.result,f=e.input.charCodeAt(e.position);if(!is_WS_OR_EOL(f)&&!is_FLOW_INDICATOR(f)&&35!==f&&38!==f&&42!==f&&33!==f&&124!==f&&62!==f&&39!==f&&34!==f&&37!==f&&64!==f&&96!==f&&(63!==f&&45!==f||!(is_WS_OR_EOL(n=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(n)))){for(e.kind="scalar",e.result="",i=o=e.position,a=!1;0!==f;){if(58===f){if(is_WS_OR_EOL(n=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(n))break}else if(35===f){if(is_WS_OR_EOL(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||r&&is_FLOW_INDICATOR(f))break;if(is_EOL(f)){if(s=e.line,l=e.lineStart,c=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=t){a=!0,f=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=l,e.lineIndent=c;break}}a&&(captureSegment(e,i,o,!1),writeFoldedLines(e,e.line-s),i=o=e.position,a=!1),is_WHITE_SPACE(f)||(o=e.position+1),f=e.input.charCodeAt(++e.position)}if(captureSegment(e,i,o,!1),e.result)return 1;e.kind=u,e.result=p}}function readSingleQuotedScalar(e,t){var r,n,i=e.input.charCodeAt(e.position);if(39===i){for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(i=e.input.charCodeAt(e.position));)if(39===i){if(captureSegment(e,r,e.position,!0),39!==(i=e.input.charCodeAt(++e.position)))return 1;r=n=e.position,e.position++}else is_EOL(i)?(captureSegment(e,r,n,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),r=n=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}}function readDoubleQuotedScalar(e,t){var r,n,i,o,a,s=e.input.charCodeAt(e.position);if(34===s){for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return captureSegment(e,r,e.position,!0),e.position++,1;if(92===s){if(captureSegment(e,r,e.position,!0),is_EOL(s=e.input.charCodeAt(++e.position)))skipSeparationSpace(e,!1,t);else if(s<256&&simpleEscapeCheck[s])e.result+=simpleEscapeMap[s],e.position++;else if(0<(a=escapedHexLen(s))){for(i=a,o=0;0<i;i--)0<=(a=fromHexCode(s=e.input.charCodeAt(++e.position)))?o=(o<<4)+a:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(o),e.position++}else throwError(e,"unknown escape sequence");r=n=e.position}else is_EOL(s)?(captureSegment(e,r,n,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),r=n=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}}function readFlowCollection(e,t){var r,n,i,o,a,s,l,c,u,p=!0,f=e.tag,h=e.anchor,d={},y=e.input.charCodeAt(e.position);if(91===y)s=!(i=93),n=[];else{if(123!==y)return;i=125,s=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),y=e.input.charCodeAt(++e.position);0!==y;){if(skipSeparationSpace(e,!0,t),(y=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=f,e.anchor=h,e.kind=s?"mapping":"sequence",e.result=n,1;p||throwError(e,"missed comma between flow collection entries"),u=null,o=a=!1,63===y&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1))&&(o=a=!0,e.position++,skipSeparationSpace(e,!0,t)),r=e.line,composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),c=e.tag,l=e.result,skipSeparationSpace(e,!0,t),y=e.input.charCodeAt(e.position),!a&&e.line!==r||58!==y||(o=!0,y=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,t),composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),u=e.result),s?storeMappingPair(e,n,d,c,l,u):o?n.push(storeMappingPair(e,null,d,c,l,u)):n.push(l),skipSeparationSpace(e,!0,t),44===(y=e.input.charCodeAt(e.position))?(p=!0,y=e.input.charCodeAt(++e.position)):p=!1}throwError(e,"unexpected end of the stream within a flow collection")}function readBlockScalar(e,t){var r,n,i,o=CHOMPING_CLIP,a=!1,s=t,l=0,c=!1,u=e.input.charCodeAt(e.position);if(124===u)n=!1;else{if(62!==u)return;n=!0}for(e.kind="scalar",e.result="";0!==u;)if(43===(u=e.input.charCodeAt(++e.position))||45===u)CHOMPING_CLIP===o?o=43===u?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else{if(!(0<=(i=fromDecimalCode(u))))break;0===i?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?throwError(e,"repeat of an indentation width identifier"):(s=t+i-1,a=!0)}if(is_WHITE_SPACE(u)){for(;is_WHITE_SPACE(u=e.input.charCodeAt(++e.position)););if(35===u)for(;!is_EOL(u=e.input.charCodeAt(++e.position))&&0!==u;);}for(;0!==u;){for(readLineBreak(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!a||e.lineIndent<s)&&32===u;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>s&&(s=e.lineIndent),is_EOL(u))l++;else{if(e.lineIndent<s){o===CHOMPING_KEEP?e.result+=common.repeat("\n",l):o===CHOMPING_CLIP&&a&&(e.result+="\n");break}for(n?is_WHITE_SPACE(u)?(c=!0,e.result+=common.repeat("\n",l+1)):c?(c=!1,e.result+=common.repeat("\n",l+1)):0===l?a&&(e.result+=" "):e.result+=common.repeat("\n",l):e.result+=a?common.repeat("\n",l+1):common.repeat("\n",l),a=!0,l=0,r=e.position;!is_EOL(u)&&0!==u;)u=e.input.charCodeAt(++e.position);captureSegment(e,r,e.position,!1)}}return 1}function readBlockSequence(e,t){var r,n,i=e.tag,o=e.anchor,a=[],s=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),n=e.input.charCodeAt(e.position);0!==n&&45===n&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=t)a.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,composeNode(e,t,CONTEXT_BLOCK_IN,!1,!0),a.push(e.result),skipSeparationSpace(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=a,!0)}function readBlockMapping(e,t,r){var n,i,o,a,s=e.tag,l=e.anchor,c={},u={},p=null,f=null,h=null,d=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=c),a=e.input.charCodeAt(e.position);0!==a;){if(n=e.input.charCodeAt(e.position+1),o=e.line,63!==a&&58!==a||!is_WS_OR_EOL(n)){if(!composeNode(e,r,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===o){for(a=e.input.charCodeAt(e.position);is_WHITE_SPACE(a);)a=e.input.charCodeAt(++e.position);if(58===a)is_WS_OR_EOL(a=e.input.charCodeAt(++e.position))||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(storeMappingPair(e,c,u,p,f,null),p=f=h=null),i=d=!(y=!0),p=e.tag,f=e.result;else{if(!y)return e.tag=s,e.anchor=l,1;throwError(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=s,e.anchor=l,1;throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(d&&(storeMappingPair(e,c,u,p,f,null),p=f=h=null),i=d=y=!0):d?i=!(d=!1):throwError(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,a=n;if((e.line===o||e.lineIndent>t)&&(composeNode(e,t,CONTEXT_BLOCK_OUT,!0,i)&&(d?f=e.result:h=e.result),d||(storeMappingPair(e,c,u,p,f,h),p=f=h=null),skipSeparationSpace(e,!0,-1),a=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==a)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return d&&storeMappingPair(e,c,u,p,f,null),y&&(e.tag=s,e.anchor=l,e.kind="mapping",e.result=c),y}function readTagProperty(e){var t,r,n,i=!1,o=!1,a=e.input.charCodeAt(e.position);if(33===a){if(null!==e.tag&&throwError(e,"duplication of a tag property"),60===(a=e.input.charCodeAt(++e.position))?(i=!0,a=e.input.charCodeAt(++e.position)):33===a?(o=!0,r="!!",a=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){for(;0!==(a=e.input.charCodeAt(++e.position))&&62!==a;);e.position<e.length?(n=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!is_WS_OR_EOL(a);)33===a&&(o?throwError(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),PATTERN_FLOW_INDICATORS.test(n)&&throwError(e,"tag suffix cannot contain flow indicator characters")}return n&&!PATTERN_TAG_URI.test(n)&&throwError(e,"tag name cannot contain such characters: "+n),i?e.tag=n:_hasOwnProperty$2.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:throwError(e,'undeclared tag handle "'+r+'"'),1}}function readAnchorProperty(e){var t,r=e.input.charCodeAt(e.position);if(38===r){for(null!==e.anchor&&throwError(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!is_WS_OR_EOL(r)&&!is_FLOW_INDICATOR(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),1}}function readAlias(e){var t,r,n=e.input.charCodeAt(e.position);if(42===n){for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||throwError(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],skipSeparationSpace(e,!0,-1),1}}function composeNode(e,t,r,n,i){var o,a,s,l,c,u,p,f,h=1,d=!1,y=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=CONTEXT_BLOCK_OUT===r||CONTEXT_BLOCK_IN===r,n&&skipSeparationSpace(e,!0,-1)&&(d=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(d=!0,s=o,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):s=!1;if(s=s&&(d||i),1!==h&&CONTEXT_BLOCK_OUT!==r||(p=CONTEXT_FLOW_IN===r||CONTEXT_FLOW_OUT===r?t:t+1,f=e.position-e.lineStart,1===h?s&&(readBlockSequence(e,f)||readBlockMapping(e,f,p))||readFlowCollection(e,p)?y=!0:(a&&readBlockScalar(e,p)||readSingleQuotedScalar(e,p)||readDoubleQuotedScalar(e,p)?y=!0:readAlias(e)?(y=!0,null===e.tag&&null===e.anchor||throwError(e,"alias node should not have any properties")):readPlainScalar(e,p,CONTEXT_FLOW_IN===r)&&(y=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(y=s&&readBlockSequence(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(l=0,c=e.implicitTypes.length;l<c;l+=1)if((u=e.implicitTypes[l]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else _hasOwnProperty$2.call(e.typeMap,e.tag)?(u=e.typeMap[e.tag],null!==e.result&&u.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result)?(e.result=u.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):throwError(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||y}function readDocument(e){var t,r,n,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(i=e.input.charCodeAt(e.position))&&(skipSeparationSpace(e,!0,-1),i=e.input.charCodeAt(e.position),!(0<e.lineIndent||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!is_WS_OR_EOL(i);)i=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&throwError(e,"directive name must not be less than one character in length");0!==i;){for(;is_WHITE_SPACE(i);)i=e.input.charCodeAt(++e.position);if(35===i){for(;0!==(i=e.input.charCodeAt(++e.position))&&!is_EOL(i););break}if(is_EOL(i))break;for(t=e.position;0!==i&&!is_WS_OR_EOL(i);)i=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==i&&readLineBreak(e),_hasOwnProperty$2.call(directiveHandlers,r)?directiveHandlers[r](e,r,n):throwWarning(e,'unknown document directive "'+r+'"')}skipSeparationSpace(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,skipSeparationSpace(e,!0,-1)):a&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(o,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,skipSeparationSpace(e,!0,-1)):e.position<e.length-1&&throwError(e,"end of the stream or a document separator is expected")}function loadDocuments(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new State$1(e,t);for(r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)readDocument(r);return r.documents}function loadAll(e,t,r){for(var n=loadDocuments(e,r),i=0,o=n.length;i<o;i+=1)t(n[i])}function load(e,t){var r=loadDocuments(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new exception("expected a single document in the stream, but found more")}}function safeLoadAll(e,t,r){loadAll(e,t,common.extend({schema:default_safe},r))}function safeLoad(e,t){return load(e,common.extend({schema:default_safe},t))}var loadAll_1=loadAll,load_1=load,safeLoadAll_1=safeLoadAll,safeLoad_1=safeLoad,loader={loadAll:loadAll_1,load:load_1,safeLoadAll:safeLoadAll_1,safeLoad:safeLoad_1},_toString$2=Object.prototype.toString,_hasOwnProperty$3=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function compileStyleMap(e,t){var r,n,i,o,a,s,l;if(null===t)return{};for(r={},i=0,o=(n=Object.keys(t)).length;i<o;i+=1)a=n[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=e.compiledTypeMap[a])&&_hasOwnProperty$3.call(l.styleAliases,s)&&(s=l.styleAliases[s]),r[a]=s;return r}function encodeHex(e){var t,r,n=e.toString(16).toUpperCase();if(e<=255)t="x",r=2;else if(e<=65535)t="u",r=4;else{if(!(e<=4294967295))throw new exception("code point within a string may not be greater than 0xFFFFFFFF");t="U",r=8}return"\\"+t+common.repeat("0",r-n.length)+n}function State$2(e){this.schema=e.schema||default_full,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=common.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=compileStyleMap(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,t){for(var r,n=common.repeat(" ",t),i=0,o=-1,a="",s=e.length;i<s;)i=-1===(o=e.indexOf("\n",i))?(r=e.slice(i),s):(r=e.slice(i,o+1),o+1),r.length&&"\n"!==r&&(a+=n),a+=r;return a}function generateNextLine(e,t){return"\n"+common.repeat(" ",e.indent*t)}function testImplicitResolving(e,t){for(var r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return 1}function StringBuilder(e){this.source=e,this.result="",this.checkpoint=0}function writeScalar(e,t,r,n){var i,o,a,s,l,c,u,p,f,h,d,y,m,v,g,b,_,w,x,E;if(0!==t.length)if(-1===DEPRECATED_BOOLEANS_SYNTAX.indexOf(t)){for(i=!0,o=t.length?t.charCodeAt(0):0,a=CHAR_SPACE===o||CHAR_SPACE===t.charCodeAt(t.length-1),CHAR_MINUS!==o&&CHAR_QUESTION!==o&&CHAR_COMMERCIAL_AT!==o&&CHAR_GRAVE_ACCENT!==o||(i=!1),l=s=a||-1<e.flowLevel&&e.flowLevel<=r?(a&&(i=!1),!1):!n,c=!0,u=new StringBuilder(t),p=!1,h=f=0,d=e.indent*r,-1===(y=e.lineWidth)&&(y=9007199254740991),d<40?y-=d:y=40,v=0;v<t.length;v++){if(m=t.charCodeAt(v),i){if(simpleChar(m))continue;i=!1}c&&m===CHAR_SINGLE_QUOTE&&(c=!1),g=ESCAPE_SEQUENCES[m],b=needsHexEscape(m),(g||b)&&(m!==CHAR_LINE_FEED&&m!==CHAR_DOUBLE_QUOTE&&m!==CHAR_SINGLE_QUOTE?l=s=!1:m===CHAR_LINE_FEED&&(c=!(p=!0),0<v&&t.charCodeAt(v-1)===CHAR_SPACE&&(s=l=!1),s&&(_=v-f,f=v,h<_&&(h=_))),m!==CHAR_DOUBLE_QUOTE&&(c=!1),u.takeUpTo(v),u.escapeChar())}if(i&&testImplicitResolving(e,t)&&(i=!1),w="",(s||l)&&(x=0,t.charCodeAt(t.length-1)===CHAR_LINE_FEED&&(x+=1,t.charCodeAt(t.length-2)===CHAR_LINE_FEED&&(x+=1)),0===x?w="-":2===x&&(w="+")),(l&&h<y||null!==e.tag)&&(s=!1),p||(l=!1),i)e.dump=t;else if(c)e.dump="'"+t+"'";else if(s)E=fold(t,y),e.dump=">"+w+"\n"+indentString(E,d);else if(l)w||(t=t.replace(/\n$/,"")),e.dump="|"+w+"\n"+indentString(t,d);else{if(!u)throw new Error("Failed to dump scalar value");u.finish(),e.dump='"'+u.result+'"'}}else e.dump="'"+t+"'";else e.dump="''"}function fold(e,t){var r,n="",i=0,o=e.length,a=/\n+$/.exec(e);for(a&&(o=a.index+1);i<o;)i=o<(r=e.indexOf("\n",i))||-1===r?(n&&(n+="\n\n"),n+=foldLine(e.slice(i,o),t),o):(n&&(n+="\n\n"),n+=foldLine(e.slice(i,r),t),r+1);return a&&"\n"!==a[0]&&(n+=a[0]),n}function foldLine(e,t){if(""===e)return e;for(var r,n,i=/[^\s] [^\s]/g,o="",a=0,s=0,l=i.exec(e);l;)t<(r=l.index)-s&&(n=a!==s?a:r,o&&(o+="\n"),o+=e.slice(s,n),s=n+1),a=r+1,l=i.exec(e);return o&&(o+="\n"),s!==a&&e.length-s>t?o+=e.slice(s,a)+"\n"+e.slice(a+1):o+=e.slice(s),o}function simpleChar(e){return CHAR_TAB!==e&&CHAR_LINE_FEED!==e&&CHAR_CARRIAGE_RETURN!==e&&CHAR_COMMA!==e&&CHAR_LEFT_SQUARE_BRACKET!==e&&CHAR_RIGHT_SQUARE_BRACKET!==e&&CHAR_LEFT_CURLY_BRACKET!==e&&CHAR_RIGHT_CURLY_BRACKET!==e&&CHAR_SHARP!==e&&CHAR_AMPERSAND!==e&&CHAR_ASTERISK!==e&&CHAR_EXCLAMATION!==e&&CHAR_VERTICAL_LINE!==e&&CHAR_GREATER_THAN!==e&&CHAR_SINGLE_QUOTE!==e&&CHAR_DOUBLE_QUOTE!==e&&CHAR_PERCENT!==e&&CHAR_COLON!==e&&!ESCAPE_SEQUENCES[e]&&!needsHexEscape(e)}function needsHexEscape(e){return!(32<=e&&e<=126||133===e||160<=e&&e<=55295||57344<=e&&e<=65533||65536<=e&&e<=1114111)}function writeFlowSequence(e,t,r){for(var n="",i=e.tag,o=0,a=r.length;o<a;o+=1)writeNode(e,t,r[o],!1,!1)&&(0!==o&&(n+=", "),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function writeBlockSequence(e,t,r,n){for(var i="",o=e.tag,a=0,s=r.length;a<s;a+=1)writeNode(e,t+1,r[a],!0,!0)&&(n&&0===a||(i+=generateNextLine(e,t)),i+="- "+e.dump);e.tag=o,e.dump=i||"[]"}function writeFlowMapping(e,t,r){for(var n,i,o,a="",s=e.tag,l=Object.keys(r),c=0,u=l.length;c<u;c+=1)o="",0!==c&&(o+=", "),i=r[n=l[c]],writeNode(e,t,n,!1,!1)&&(1024<e.dump.length&&(o+="? "),o+=e.dump+": ",writeNode(e,t,i,!1,!1)&&(a+=o+=e.dump));e.tag=s,e.dump="{"+a+"}"}function writeBlockMapping(e,t,r,n){var i,o,a,s,l,c,u="",p=e.tag,f=Object.keys(r);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(i=0,o=f.length;i<o;i+=1)c="",n&&0===i||(c+=generateNextLine(e,t)),s=r[a=f[i]],writeNode(e,t+1,a,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&1024<e.dump.length)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,l&&(c+=generateNextLine(e,t)),writeNode(e,t+1,s,!0,l)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=p,e.dump=u||"{}"}function detectType(e,t,r){for(var n,i,o,a=r?e.explicitTypes:e.implicitTypes,s=0,l=a.length;s<l;s+=1)if(((i=a[s]).instanceOf||i.predicate)&&(!i.instanceOf||"object"==typeof t&&t instanceof i.instanceOf)&&(!i.predicate||i.predicate(t))){if(e.tag=r?i.tag:"?",i.represent){if(o=e.styleMap[i.tag]||i.defaultStyle,"[object Function]"===_toString$2.call(i.represent))n=i.represent(t,o);else{if(!_hasOwnProperty$3.call(i.represent,o))throw new exception("!<"+i.tag+'> tag resolver accepts not "'+o+'" style');n=i.represent[o](t,o)}e.dump=n}return 1}}function writeNode(e,t,r,n,i,o){e.tag=null,e.dump=r,detectType(e,r,!1)||detectType(e,r,!0);var a=_toString$2.call(e.dump);n=n&&(e.flowLevel<0||e.flowLevel>t);var s,l,c="[object Object]"===a||"[object Array]"===a;if(c&&(l=-1!==(s=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||l||2!==e.indent&&0<t)&&(i=!1),l&&e.usedDuplicates[s])e.dump="*ref_"+s;else{if(c&&l&&!e.usedDuplicates[s]&&(e.usedDuplicates[s]=!0),"[object Object]"===a)n&&0!==Object.keys(e.dump).length?(writeBlockMapping(e,t,e.dump,i),l&&(e.dump="&ref_"+s+e.dump)):(writeFlowMapping(e,t,e.dump),l&&(e.dump="&ref_"+s+" "+e.dump));else if("[object Array]"===a)n&&0!==e.dump.length?(writeBlockSequence(e,t,e.dump,i),l&&(e.dump="&ref_"+s+e.dump)):(writeFlowSequence(e,t,e.dump),l&&(e.dump="&ref_"+s+" "+e.dump));else{if("[object String]"!==a){if(e.skipInvalid)return;throw new exception("unacceptable kind of an object to dump "+a)}"?"!==e.tag&&writeScalar(e,e.dump,t,o)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return 1}function getDuplicateReferences(e,t){var r,n,i=[],o=[];for(inspectNode(e,i,o),r=0,n=o.length;r<n;r+=1)t.duplicates.push(i[o[r]]);t.usedDuplicates=new Array(n)}function inspectNode(e,t,r){var n,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===r.indexOf(i)&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)inspectNode(e[i],t,r);else for(i=0,o=(n=Object.keys(e)).length;i<o;i+=1)inspectNode(e[n[i]],t,r)}function dump(e,t){var r=new State$2(t=t||{});return r.noRefs||getDuplicateReferences(e,r),writeNode(r,0,e,!0,!0)?r.dump+"\n":""}function safeDump(e,t){return dump(e,common.extend({schema:default_safe},t))}StringBuilder.prototype.takeUpTo=function(e){var t;if(e<this.checkpoint)throw(t=new Error("position should be > checkpoint")).position=e,t.checkpoint=this.checkpoint,t;return this.result+=this.source.slice(this.checkpoint,e),this.checkpoint=e,this},StringBuilder.prototype.escapeChar=function(){var e=this.source.charCodeAt(this.checkpoint),t=ESCAPE_SEQUENCES[e]||encodeHex(e);return this.result+=t,this.checkpoint+=1,this},StringBuilder.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var dump_1=dump,safeDump_1=safeDump,dumper={dump:dump_1,safeDump:safeDump_1};function deprecated(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var Type$1=type,Schema$1=schema,FAILSAFE_SCHEMA=failsafe,JSON_SCHEMA=json,CORE_SCHEMA=core,DEFAULT_SAFE_SCHEMA=default_safe,DEFAULT_FULL_SCHEMA=default_full,load$1=loader.load,loadAll$1=loader.loadAll,safeLoad$1=loader.safeLoad,safeLoadAll$1=loader.safeLoadAll,dump$1=dumper.dump,safeDump$1=dumper.safeDump,YAMLException$1=exception,MINIMAL_SCHEMA=failsafe,SAFE_SCHEMA=default_safe,DEFAULT_SCHEMA=default_full,scan=deprecated("scan"),parse=deprecated("parse"),compose=deprecated("compose"),addConstructor=deprecated("addConstructor"),jsYaml={Type:Type$1,Schema:Schema$1,FAILSAFE_SCHEMA:FAILSAFE_SCHEMA,JSON_SCHEMA:JSON_SCHEMA,CORE_SCHEMA:CORE_SCHEMA,DEFAULT_SAFE_SCHEMA:DEFAULT_SAFE_SCHEMA,DEFAULT_FULL_SCHEMA:DEFAULT_FULL_SCHEMA,load:load$1,loadAll:loadAll$1,safeLoad:safeLoad$1,safeLoadAll:safeLoadAll$1,dump:dump$1,safeDump:safeDump$1,YAMLException:YAMLException$1,MINIMAL_SCHEMA:MINIMAL_SCHEMA,SAFE_SCHEMA:SAFE_SCHEMA,DEFAULT_SCHEMA:DEFAULT_SCHEMA,scan:scan,parse:parse,compose:compose,addConstructor:addConstructor},jsYaml$1=jsYaml,SceneBundle=function(){function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.url=t,!r||isRelativeURL(r)&&!isRelativeURL(this.url)?this.path=pathForURL(this.url):this.path=r,this.path_for_parent=r||this.path,this.parent=n,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return _createClass(e,[{key:"load",value:function(){return loadResource(this.url)}},{key:"resourceFor",value:function(e){return{url:this.urlFor(e),path:this.pathFor(e),type:this.typeFor(e)}}},{key:"urlFor",value:function(e){return isGlobal(e)?e:isRelativeURL(e)&&this.container?this.parent.urlFor(this.path_for_parent+e):addBaseURL(e,this.path)}},{key:"pathFor",value:function(e){return pathForURL(e)}},{key:"typeFor",value:function(e){return extensionForURL(e)}},{key:"isContainer",value:function(){return!1}}]),e}();function createSceneBundle(e,t,r){return new SceneBundle(e,t,r)}function isGlobal(e){return!(!e||"global."!==e.slice(0,7))}function parseResource(e){var t;try{t=jsYaml$1.safeLoad(e,{json:!0})}catch(e){throw e}return t}function loadResource(e){return new Promise((function(t,r){"string"==typeof e?Utils$1.io(e).then((function(e){try{var n=parseResource(e);t(n)}catch(e){r(e)}}),r):(e=Object.assign({},e),t(e))}))}function notNull(e){return null!=e}function wrap$1(e){return"("+e+")"}function maybeQuote(e){return"string"==typeof e?'"'+e+'"':e}function lookUp(e){return"$"===e[0]?"context['"+e.substring(1)+"']":"context.feature.properties['"+e+"']"}function nullValue(e,t){return" true "}function propertyEqual(e,t){return wrap$1(maybeQuote(t)+" === "+lookUp(e))}function propertyOr(e,t){return wrap$1(t.map((function(t){return propertyEqual(e,t)})).join(" || "))}function printNested(e,t){return wrap$1(e.filter(notNull).map((function(e){return wrap$1(e.join(" && "))})).join(" "+t+" "))}function any(e,t,r){return t&&0<t.length?printNested(t.map((function(e){return parseFilter(e,r)})),"||"):"true"}function all(e,t,r){return t&&0<t.length?printNested(t.map((function(e){return parseFilter(e,r)})),"&&"):"true"}function not(e,t,r){return"!"+wrap$1(parseFilter(t,r).join(" && "))}function none(e,t,r){return"!"+wrap$1(any(null,t,r))}function propertyMatchesBoolean(e,t){return wrap$1(lookUp(e)+(t?" != ":" == ")+"null")}function rangeMatch(e,t,r){var n,i,o=[],a=r&&"function"==typeof r.rangeTransform&&r.rangeTransform;return t.max&&(n=a?a(t.max):t.max,o.push(lookUp(e)+" < "+n)),t.min&&(i=a?i=a(t.min):t.min,o.push(lookUp(e)+" >= "+i)),wrap$1(o.join(" && "))}function parseFilter(e,t){var r=[];if("function"==typeof e)return[wrap$1(e.toString()+"(context)")];if(Array.isArray(e))return[any(null,e,t)];if(null==e)return["true"];for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],a=e[o],s=_typeof(a);if("string"===s||"number"===s)r.push(propertyEqual(o,a));else if("boolean"===s)r.push(propertyMatchesBoolean(o,a));else if("not"===o)r.push(not(o,a,t));else if("any"===o)r.push(any(o,a,t));else if("all"===o)r.push(all(o,a,t));else if("none"===o)r.push(none(o,a,t));else if(Array.isArray(a))r.push(propertyOr(o,a));else if("object"===s&&null!=a)(a.max||a.min)&&r.push(rangeMatch(o,a,t));else{if(null!=a)throw new Error("Unknown Query syntax: "+a);r.push(nullValue(o,a))}}return 0===n.length?["true"]:r}function filterToString(e){return wrap$1(e.join(" && "))}function buildFilter(e,t){return null==e?function(){return!0}:new Function("context","return "+filterToString(parseFilter(e,t))+";")}var reserved=["filter","draw","visible","enabled","data"],layer_cache={};function cacheKey(e){if(1<e.length){for(var t=e[0],r=1;r<e.length;r++)t+="/"+e[r];return t}return e[0]}function mergeTrees(e,t){for(var r,n=0,i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length);if(0===n)return null;for(var o={visible:!0},a=0;a<n;a++)!function(n){r=[],e.forEach((function(e){e[n]&&e[n][t]&&-1===r.indexOf(e[n][t])&&r.push(e[n][t])})),0!==r.length&&(r.sort((function(e,t){return(e&&e.layer_name)>(t&&t.layer_name)?1:-1})),mergeObjects.apply(void 0,[o].concat(_toConsumableArray(r))),delete o.layer_name)}(a);return!1===o.visible?null:o}var blacklist=["any","all","not","none"],Layer=function(){function e(t){var r,n=t.layer,i=t.name,o=t.parent,a=t.draw,s=t.visible,l=t.enabled,c=t.filter,u=t.styles;if(_classCallCheck(this,e),this.id=e.id++,this.config_data=n.data,this.parent=o,this.name=i,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=a,this.filter=c,this.styles=u,this.is_built=!1,l=void 0===l?s:l,this.parent&&!1===this.parent.visible?this.enabled=!1:this.enabled=!1!==l,this.draw)for(var p in this.draw)this.draw[p]=null==this.draw[p]?{}:this.draw[p],"object"!==_typeof(this.draw[p])?(r="Draw group '".concat(p,"' for layer ").concat(this.full_name," is invalid, must be an object, "),log("warn",r+="but was set to `".concat(p,": ").concat(this.draw[p],"` instead")),delete this.draw[p]):this.draw[p].layer_name=this.full_name}return _createClass(e,[{key:"build",value:function(){log("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Utils$1.stringsToFunctions(this.draw,StyleParser.wrapFunction),this.calculatedDraw=calculateDraw(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Utils$1.stringsToFunctions(this.filter,StyleParser.wrapFunction);var e=_typeof(this.filter);if(null==this.filter||"object"===e||"function"===e)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?this.filter=buildFilter(this.filter,FilterOptions):this.filter=null}catch(e){var t="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");log("warn",t+="failed with error '".concat(e.message,"', stack trace: ").concat(e.stack))}else{var r="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");log("warn",r+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var e=this.filter&&this.filter.$zoom,t=_typeof(e);if(null!=e&&"function"!==t){if(this.zooms={},"number"===t)this.zooms[e]=!0;else if(Array.isArray(e))for(var r=0;r<e.length;r++)this.zooms[e[r]]=!0;else if("object"===t&&(null!=e.min||null!=e.max))for(var n=e.min||0,i=e.max||25,o=n;o<i;o++)this.zooms[o]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var e=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach((function(t){if(-1===blacklist.indexOf(t)){var r=e.filter[t],n=_typeof(r),i=Array.isArray(r);if(!i&&"string"!==n&&"number"!==n)return;"$"===t[0]?(e.context_prop_matches=e.context_prop_matches||[],e.context_prop_matches.push([t.substring(1),i?r:[r]])):(e.feature_prop_matches=e.feature_prop_matches||[],e.feature_prop_matches.push([t,i?r:[r]])),delete e.filter[t]}}))}},{key:"doPropMatches",value:function(e){if(this.feature_prop_matches)for(var t=0;t<this.feature_prop_matches.length;t++){var r=this.feature_prop_matches[t],n=e.feature.properties[r[0]];if(null==n||-1===r[1].indexOf(n))return!1}if(this.context_prop_matches)for(var i=0;i<this.context_prop_matches.length;i++){var o=this.context_prop_matches[i],a=e[o[0]];if(null==a||-1===o[1].indexOf(a))return!1}return!0}},{key:"doesMatch",value:function(e){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[e.zoom])return!1;if(!this.doPropMatches(e))return!1;var t;if(this.filter instanceof Function)try{t=this.filter(e)}catch(t){var r="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");log("error",r+="failed with error '".concat(t.message,"', stack trace: ").concat(t.stack),e.feature)}else t=null==this.filter;return!!t&&(this.children_to_parse&&(parseLayerChildren(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),e}();Layer.id=0;var LayerLeaf=function(){_inherits(t,Layer);var e=_createSuper(t);function t(r){var n;return _classCallCheck(this,t),(n=e.call(this,r)).is_leaf=!0,n}return t}(),LayerTree=function(){_inherits(t,Layer);var e=_createSuper(t);function t(r){var n;return _classCallCheck(this,t),(n=e.call(this,r)).is_tree=!0,n.layers=r.layers||[],n}return _createClass(t,[{key:"addLayer",value:function(e){this.layers.push(e)}},{key:"buildDrawGroups",value:function(e){var t=[],r=[];if(matchFeature(e,[this],t,r),0<t.length){var n=cacheKey(r);if(void 0===layer_cache[n]){for(var i=t.map((function(e){return e&&!1!==e.visible&&e.calculatedDraw})),o={},a=0;a<i.length;a++){var s=i[a];if(s)for(var l=0;l<s.length;l++){var c=s[l];for(var u in c)o[u]=!0}}for(var p in o)layer_cache[n]=layer_cache[n]||{},layer_cache[n][p]=mergeTrees(i,p),layer_cache[n][p]?(layer_cache[n][p].key=n+"/"+p,layer_cache[n][p].layers=t.map((function(e){return e&&e.full_name})),layer_cache[n][p].group=p):delete layer_cache[n][p];layer_cache[n]&&0===Object.keys(layer_cache[n]).length&&(layer_cache[n]=null)}return layer_cache[n]}}}]),t}(),FilterOptions={rangeTransform:function(e){return"string"==typeof e&&"px2"===e.trim().slice(-3)?"".concat(parseFloat(e)," * context.meters_per_pixel_sq"):e}},SceneLoader;function isReserved(e){return-1<reserved.indexOf(e)}function isEmpty(e){return 0===Object.keys(e).length}function groupProps(e){var t={},r={};for(var n in e)isReserved(n)?t[n]=e[n]:r[n]=e[n];return[t,r]}function calculateDraw(e){var t,r=[];return e.parent&&(t=e.parent.calculatedDraw||[],r.push.apply(r,_toConsumableArray(t))),r.push(e.draw),r}function parseLayerNode(e,t,r,n){var i={name:e,layer:t=null==t?{}:t,parent:r,styles:n},o=_slicedToArray(groupProps(t),2),a=o[0],s=o[1],l=isEmpty(s),c=new(l&&null!=r?LayerLeaf:LayerTree)(Object.assign(i,a));return c.enabled&&(r&&r.addLayer(c),c.children_to_parse=l?null:s),c}function parseLayerChildren(e,t,r){for(var n in t){var i,o=t[n];"object"!==_typeof(o)||Array.isArray(o)?(i="Layer value must be an object: cannot create layer '".concat(n,": ").concat(JSON.stringify(o),"'"),i+=", under parent layer '".concat(e.full_name,"'."),r[e.name]&&(i+=" The parent name '".concat(e.name,"' is also the name of a style, did you mean to create a 'draw' group"),e.parent&&(i+=" under '".concat(e.parent.name,"'")),i+=" instead?"),log("warn",i)):parseLayerNode(n,o,e,r)}}function parseLayers(e,t){layer_cache={};var r={};for(var n in e){var i=e[n];i&&(r[n]=parseLayerNode(n,i,null,t))}return r}function matchFeature(e,t,r,n){var i=!1;if(0!==t.length){for(var o=0;o<t.length;o++){var a=t[o];a.is_leaf?a.doesMatch(e)&&(i=!0,r.push(a),n.push(a.id)):a.is_tree&&a.doesMatch(e)&&(i=!0,matchFeature(e,a.layers,r,n)||(r.push(a),n.push(a.id)))}return i}}var GLOBAL_PROP_RGX=/^global\.(.+)$/,SceneLoader$1=SceneLoader={loadScene:function(e,t){var r=this,n=1<arguments.length&&void 0!==t?t:{},i=n.path,o=n.type,a=[];return this.loadSceneRecursive({url:e,path:i,type:o},null,a).then((function(e){return r.finalize(e)})).then((function(e){var t=e.config,n=e.bundle;return t?(0<a.length&&a.forEach((function(e){var t="Failed to import scene: ".concat(e.url);log("error",t,e),r.trigger("error",{type:"scene_import",message:t,error:e,url:e.url})})),{config:t,bundle:n}):Promise.reject(a[0])}))},loadSceneRecursive:function(e,t,r){var n=this,i=e.url,o=e.path,a=e.type,s=2<arguments.length&&void 0!==r?r:[];if(!i)return Promise.resolve({});var l=createSceneBundle(i,o,t,a);return l.load().then((function(e){if(null==e.import)return n.normalize(e,l),{config:e,bundle:l};Array.isArray(e.import)||(e.import=[e.import]);var t=[];return e.import.forEach((function(e){"object"===_typeof(e)&&(e=createObjectURL(new Blob([JSON.stringify(e)]))),t.push(l.resourceFor(e))})),delete e.import,Promise.all(t.map((function(e){return n.loadSceneRecursive(e,l,s)}))).then((function(t){t.forEach((function(e){return n.normalize(e.config,e.bundle)}));var r=t.map((function(e){return e.config}));return e=mergeObjects.apply(void 0,_toConsumableArray(r).concat([e])),n.normalize(e,l),{config:e,bundle:l}}))})).catch((function(e){return e.url=i,s.push(e),{}}))},normalize:function(e,t){return this.normalizeDataSources(e,t),this.normalizeFonts(e,t),this.normalizeTextures(e,t),this.hoistTextures(e,t),{config:e,bundle:t}},normalizeDataSources:function(e,t){for(var r in e.sources=e.sources||{},e.sources)this.normalizeDataSource(e.sources[r],t);return e},normalizeDataSource:function(e,t){if(e.url&&(e.url=t.urlFor(e.url)),e.scripts)for(var r in Array.isArray(e.scripts)&&(e.scripts=e.scripts.reduce((function(e,t){return e[t]=t,e}),{})),e.scripts)e.scripts[r]=t.urlFor(e.scripts[r]);return e},normalizeFonts:function(e,t){for(var r in e.fonts=e.fonts||{},e.fonts){var n;Array.isArray(e.fonts[r])?e.fonts[r].forEach((function(e){e.url=e.url&&t.urlFor(e.url)})):(n=e.fonts[r]).url=n.url&&t.urlFor(n.url)}return e},normalizeTextures:function(e,t){if(e.textures=e.textures||{},e.textures)for(var r in e.textures){var n=e.textures[r];n.url&&(n.url=t.urlFor(n.url))}},hoistTextures:function(e,t){var r=this;if(e.styles)for(var n in e.styles)!function(n){var i=e.styles[n],o=i.texture;"string"!=typeof o||e.textures[o]||(i.texture=r.hoistTexture(o,e,t)),i.material&&["emission","ambient","diffuse","specular","normal"].forEach((function(n){var o=null!=i.material[n]&&i.material[n].texture;"string"!=typeof o||e.textures[o]||(i.material[n].texture=r.hoistTexture(o,e,t))}))}(n);if(this.hoistStyleShaderUniformTextures(e,t,{include_globals:!1}),e.layers)for(var i=[e.layers];0<i.length;){var o=i.pop();if("object"===_typeof(o)&&!Array.isArray(o))for(var a in o)if("draw"===a){var s,l,c=o[a];for(var u in c)c[u].texture&&("string"!=typeof(s=c[u].texture)||e.textures[s]||(c[u].texture=this.hoistTexture(s,e,t))),c[u].outline&&c[u].outline.texture&&("string"!=typeof(l=c[u].outline.texture)||e.textures[l]||(c[u].outline.texture=this.hoistTexture(l,e,t)))}else{if(isReserved(a))continue;i.push(o[a])}}},hoistStyleShaderUniformTextures:function(e,t,r){var n=this,i=r.include_globals;if(e.styles)for(var o in e.styles){var a=e.styles[o];a.shaders&&a.shaders.uniforms&&GLSL.parseUniforms(a.shaders.uniforms).forEach((function(r){var o=r.type,a=r.value,s=r.key,l=r.uniforms;"sampler2D"!==o||"string"!=typeof a||e.textures[a]||!i&&isGlobal(a)||(l[s]=n.hoistTexture(a,e,t))}))}},hoistTexture:function(e,t,r){var n=isGlobal(e),i=n?e:r.urlFor(e),o=n?"texture-".concat(i):i;return t.textures[o]={url:i},o},applyGlobalProperties:function(e){if(!e.global||0===Object.keys(e.global).length)return e;var t=flattenProperties(e.global);return function e(r){if("string"==typeof r){var n=function e(t,r,n){var i=2<arguments.length&&void 0!==n?n:[];if(-1<i.indexOf(t))log({level:"warn",once:!0},"Global properties: cyclical reference detected",i);else{i.push(t);var o=GLOBAL_PROP_RGX.exec(t);if(o){var a=o[1];if(a){var s=r[a];if(void 0!==s)return"string"==typeof s&&GLOBAL_PROP_RGX.exec(s)?e(s,r,i):s;log({level:"warn",once:!0},"Global property not found: "+t)}else log({level:"warn",once:!0},"Invalid global property reference: "+t)}}}(r,t);void 0!==n&&(r=n)}else if(Array.isArray(r))for(var i=0;i<r.length;i++)r[i]=e(r[i]);else if("object"===_typeof(r))for(var o in r)r[o]=e(r[o]);return r}(e)},finalize:function(e){var t=e.config,r=e.bundle;return t?(t.global=t.global||{},t.scene=t.scene||{},t.cameras=t.cameras||{},t.lights=t.lights||{},t.styles=t.styles||{},t.layers=t.layers||{},t.camera&&(t.cameras.default=t.camera),0===Object.keys(t.cameras).length&&(t.cameras.default={}),0!==Object.keys(t.lights).length&&!Object.keys(t.lights).every((function(e){return!1===t.lights[e].visible}))||(t.lights.default_light={type:"directional"}),{config:t,bundle:r}):{}}};function flattenProperties(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=(n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)?n+t:"";for(var i in e){var o=n+i,a=e[i];"object"!==_typeof(r[o]=a)||Array.isArray(a)||flattenProperties(a,t,o,r)}return r}subscribeMixin(SceneLoader);var TilePyramid=function(){function e(){_classCallCheck(this,e),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return _createClass(e,[{key:"sourceTiles",value:function(e,t){return this.coords[e.key]&&this.coords[e.key].sources&&this.coords[e.key].sources[t.name]}},{key:"addTile",value:function(e){var t=e.coords.key,r=this.coords[t];(r=r||(this.coords[t]={descendants:0})).sources||(r.sources={}),r.sources[e.source.name]||(r.sources[e.source.name]={});for(var n=(r.sources[e.source.name][e.style_zoom]=e).coords.z-1;0<=n;n--){var i=Tile.coordinateAtZoom(e.coords,n);this.coords[i.key]||(this.coords[i.key]={descendants:0}),this.coords[i.key].descendants++}}},{key:"removeTile",value:function(e){var t=this.sourceTiles(e.coords,e.source),r=e.coords.key;t&&(delete t[e.style_zoom],0===Object.keys(t).length&&(delete this.coords[r].sources[e.source.name],0===Object.keys(this.coords[r].sources).length&&(delete this.coords[r].sources,0===this.coords[r].descendants&&delete this.coords[r])));for(var n=e.coords.z-1;0<=n;n--){var i=Tile.coordinateAtZoom(e.coords,n);this.coords[i.key]&&0<this.coords[i.key].descendants&&(this.coords[i.key].descendants--,0!==this.coords[i.key].descendants||this.coords[i.key].sources||delete this.coords[i.key])}}},{key:"getAncestor",value:function(e,t){var r=e.coords,n=e.style_zoom,i=e.source,o=1<arguments.length&&void 0!==t?t:1;if(!(o>this.max_proxy_ancestor_depth)){if(n>i.max_coord_zoom){var a=this.sourceTiles(r,i);if(a)for(var s=n-1;s>=i.max_coord_zoom;s--)if(a[s]&&a[s].loaded)return a[s];n=i.max_coord_zoom}n--;var l=Tile.coordinateAtZoom(r,r.z-1),c=this.sourceTiles(l,i);return c&&c[n]&&c[n].loaded?c[n]:0<l.z?this.getAncestor({coords:l,style_zoom:n,source:i},o+1):void 0}}},{key:"getDescendants",value:function(e,t){var r=e.coords,n=e.style_zoom,i=e.source,o=1<arguments.length&&void 0!==t?t:1,a=[];if(n>=i.max_coord_zoom){var s=this.sourceTiles(r,i);if(s)for(var l=Math.max(Geo$1.default_view_max_zoom,n+this.max_proxy_descendant_depth),c=n+1;c<=l;c++)if(s[c]&&s[c].loaded)return a.push(s[c]),a;return a}if(this.coords[r.key]&&0<this.coords[r.key].descendants){n++;for(var u=Tile.childrenForCoordinate(r),p=0;p<u.length;p++){var f=u[p],h=this.sourceTiles(f,i);h&&h[n]&&h[n].loaded?a.push(h[n]):o<=this.max_proxy_descendant_depth&&f.z<=i.max_coord_zoom&&a.push.apply(a,_toConsumableArray(this.getDescendants({coords:f,source:i,style_zoom:n},o+1)))}}return a}}]),e}(),LabelMainPass=function(){function e(t,r,n,i){_classCallCheck(this,e),Object.assign(this,t),this.placed=null,this._tile=i;var o=Geo$1.unitsPerMeter(i.coords.z)*Math.pow(2,n-i.style_zoom);this.layout=Object.assign({},t.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=o,this.position=Geo$1.tileSpaceToMeters(this.position,i.coords.z,i.min),this._worldToScreen=r,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return _createClass(e,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var e,t,r,n,i,o,a;return this._screenSpaceBoundingBox||((e=this._worldToScreen(this.position,!0))[0]+=this.offset[0],e[1]+=this.offset[1],t=this.size[0]/2+this.layout.buffer[0],r=this.size[1]/2+this.layout.buffer[1],n=e[0]-t,i=e[0]+t,o=e[1]-r,a=e[1]+r,this._screenSpaceBoundingBox={left:n,bottom:a,right:i,top:o}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var e=this._tile.coords.z,t=this._tile.min,r=Geo$1.tileSpaceToMeters([this.sides[0],this.sides[1]],e,t),n=Geo$1.tileSpaceToMeters([this.sides[2],this.sides[3]],e,t),i=_slicedToArray(this._worldToScreen(r,!0),2),o=i[0],a=i[1],s=_slicedToArray(this._worldToScreen(n,!0),2);return encircleLine(o,a,s[0],s[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var e=[],t=this.circles,r=this._tile.coords.z,n=this._tile.min,i=0;i<t.length-2;i+=3){var o=Geo$1.tileSpaceToMeters([t[i],-t[i+1]],r,n),a=t[i+2]/Geo$1.unitsPerMeter(r),s=[o[0]+a,o[1]],l=this._worldToScreen(o,!0),c=this._worldToScreen(s,!0),u=MathUtils$1.getLineLength(l[0],l[1],c[0],c[1]);e.push(l[0],l[1],u)}return e}}]),e}(),labelsMainPass={mainThreadLabelCollisionPass:mainThreadLabelCollisionPass},visible={},prev_visible={},IS_LITTLE_ENDIAN=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function _createContainer(e,t,r,n,i){var o=e.container,a=o.label,s=o.linked,l=e.ranges;return{label:new LabelMainPass(a,r,n,i),linked:s,ranges:l,mesh:t}}function mainThreadLabelCollisionPass(e,t,r,n,i,o){prev_visible=visible,visible={};var a={},s={},l=[],c=r.worldToScreen.bind(r),u=new TextMeshHelper(o);for(var p in e.forEach((function(e){for(var r in e.meshes)e.meshes[r].forEach((function(r){if(r.labels){for(var n in u.trackMesh(r),r.labels["non-collision"]){var i=_createContainer(r.labels["non-collision"][n],r,c,t,e);i.label.text_data&&u.insertLabel(i,e)}for(var o in r.labels.collision){var l;a[o]||(l=_createContainer(r.labels.collision[o],r,c,t,e),a[o]=l.label,s[o]=l)}}}))})),s){var f=s[p];f.linked&&(f.linked=s[f.linked]),l.push(f)}var h=r.getViewport(),d=h.width,y=h.height;return Collision.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new GridIndex(d,y,30)}),Collision.addStyle("main","main"),Collision.collide(l,"main","main").then((function(e){return e.forEach((function(e){var t,r,i,o,a,s,l=e.mesh,c=e.label.getTile();l.valid&&(!(t=0)!==e.show||n&&e.label.breach&&!prev_visible[e.label.id]||(t=1),t&&(visible[e.label.id]=!0),e.label.text_data&&u.insertLabel(e,c),r=l.vertex_layout.offset.a_shape,i=l.vertex_layout.stride,a=(o=l.vertex_layout.attribs.find((function(e){return"a_shape"===e.name}))).byte_size/o.size,r+=3*a,s=!0,e.ranges.forEach((function(e){if(s){for(var n=0;n<e[1];n++){if(l.vertex_data[e[0]+n*i+r]===t)return void(s=!1);l.vertex_data[e[0]+n*i+r]=t}u.trackMesh(l)}})))})),u.createTextures(i).then((function(){return u.updateMeshes()}))})).then((function(t){t.forEach((function(e){return e.valid&&e.upload()})),e.forEach((function(e){e.labeled=!0})),l=[],s={},a={}}))}var TextMeshHelper=function(){function e(t){_classCallCheck(this,e),this.textureManager=getTextureManager(t),this.tiles={},this.meshes=[],this.containers=[]}return _createClass(e,[{key:"insertLabel",value:function(e,t){var r=e.label.text_data,n=r.text_settings_key,i=r.text,o=r.text_info;this.containers.push(e);var a=this._ensureTextSection(t,n);a[i]?e.label.text_data.text_info=a[i]:a[i]=o}},{key:"trackMesh",value:function(e){-1===this.meshes.indexOf(e)&&this.meshes.push(e)}},{key:"updateMeshes",value:function(){var e=this;return this.containers.forEach((function(t){var r,n,i,o,a,s,l,c,u,p;t.label.text_data&&(r=t.label.getTile(),(n=t.mesh).valid?(i=t.label.type,o=t.label.text_data.text_info,e.tiles[r.id]&&e.tiles[r.id].textures&&(a=e.tiles[r.id].textures[0],n.uniforms.u_texture=a,-1===n.textures.indexOf(a)&&n.textures.push(a),"point"===i||"straight"===i?(s="point"===i?o.align[t.label.align].texcoords:o.texcoords[i].texcoord,e.setTexCoords(n,t,s)):"curved"===i&&(l=o.segments.length,c=o.texcoords_stroke,u=o.texcoords.curved,e.setTexCoords(n,t,(function(e){return e<l?c[e]:u[e-l].texcoord}))))):e.tiles[r.id]&&e.tiles[r.id].textures&&(p=e.tiles[r.id].textures[0],e.textureManager.release(p)))})),this.meshes}},{key:"setTexCoords",value:function(e,t,r){var n,i,o,a,s,l,c=r instanceof Function;c||(i=(n=_slicedToArray(r,4))[0],o=n[1],a=n[2],s=n[3],l=[[i,o],[a,o],[a,s],[i,s]]);var u=e.vertex_layout.stride,p=new DataView(e.vertex_data.buffer),f=e.vertex_layout.offset.a_texcoord;t.ranges.forEach((function(e,t){var n,i,o,a,s,h=_slicedToArray(e,3),d=h[0],y=h[1],m=h[2];c&&(i=(n=_slicedToArray(r(t),4))[0],o=n[1],a=n[2],s=n[3],l=[[i,o],[a,o],[a,s],[i,s]]);for(var v=m?y/2:0;v<y;v++){var g=l[v%4],b=d+v*u;p.setUint16(b+f,g[0]*texcoord_normalize,IS_LITTLE_ENDIAN),p.setUint16(b+f+2,g[1]*texcoord_normalize,IS_LITTLE_ENDIAN)}}))}},{key:"createTextures",value:function(e){var t=this;return Promise.all(Object.values(this.tiles).map((function(r){var n=r.id,i=r.key,o=r.texts;return t._createTexturesForTile(e,o,"labels-".concat(i,"-").concat(n),n,t.textureManager).then((function(e){e.length&&(e.forEach((function(e){t.textureManager.retain(e),1<t.textureManager.getRetainCount(e)&&t.textureManager.release(e)})),t.tiles[n].textures=e)}))})))}},{key:"_createTexturesForTile",value:function(e,t,r,n,i){var o=new CanvasText,a=o.setTextureTextPositions(t);return o.rasterize(t,a,n,r,e,i)}},{key:"_ensureTile",value:function(e){var t=e.id,r=e.key;return this.tiles[t]||(this.tiles[t]={id:t,key:r,texts:{}}),this.tiles[t]}},{key:"_ensureTextSection",value:function(e,t){var r=this._ensureTile(e).texts;return r[t]||(r[t]={}),r[t]}}]),e}(),TILE_VISIBILITY_COUNTER_THRESHOLD=30,TileManager=function(){function e(t){var r=this,n=t.scene,i=t.view;_classCallCheck(this,e),this._scene=n,this._view=i,this._visible_tiles={},this._pyramid=new TilePyramid,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=debounce(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),WorkerBroker.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(getMaxTileCacheSize(),(function(e,t,n){r._visible_tiles[e]&&r._visible_tiles[e]===t||t.destroy()}))}return _createClass(e,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile((function(e){return e.destroy()})),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(e){this._visible_tiles[e.key]=e,this._pyramid.addTile(e)}},{key:"hasTile",value:function(e){return void 0!==this._visible_tiles[e]}},{key:"_forgetTile",value:function(e){var t,r;this.hasTile(e)&&(t=this._visible_tiles[e],this._pyramid.removeTile(t),delete this._visible_tiles[e],t.loaded?this._tile_cache.add(t.key,t,getTileByteLength(t)):(r=this._tile_cache.get(t.key))?this._tile_cache.drop(r.key):t.destroy(),this._tileBuildStop(t))}},{key:"removeTile",value:function(e){this._forgetTile(e),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(e){for(var t in this._visible_tiles)e(this._visible_tiles[t])}},{key:"removeTiles",value:function(e){for(var t in this._visible_tiles)e(this._visible_tiles[t])&&this.removeTile(t)}},{key:"removeCachedTiles",value:function(e){var t=this;this._tile_cache.forEach((function(r,n){e(n)&&t._tile_cache.drop(r)}))}},{key:"updateTilesForView",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this._visible_coords={};for(var r=this._view.findVisibleTileCoordinates(),n=0;n<r.length;n++){var i=r[n];this._visible_coords[i.key]=i}this.updateTileStates(t)}},{key:"updateTileStates",value:function(e){var t=0<arguments.length&&void 0!==e&&e;for(var r in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(r,t);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(e){if(e.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[e.coords.key])return!1;for(var t in this._visible_coords)if(Tile.isDescendant(e.coords,this._visible_coords[t]))return!1}return!e.isProxy()}},{key:"_updateLabels",value:function(){var e,t=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(CanvasText.pruneTextCache(),e=this._renderable_tiles.sort(compareTileCoords),labelsMainPass.mainThreadLabelCollisionPass(e,roundPrecision(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then((function(){t._is_labeled=!Task.hasPendingTasks(),t._scene&&t._scene.immediateRedraw(),t._update_labels_on_queue_check=!1})))}},{key:"_updateProxyTiles",value:function(){var e,t=this,r=this._view.lookAtManipulator.getZoomDirection();0!==r&&(e=!1,this.forEachVisibleTile((function(n){var i;if(n.setProxyFor(null),1===r)n.built||(i=t._pyramid.getAncestor(n))&&(i.setProxyFor(n),e=!0);else if(-1===r&&!n.built)for(var o=t._pyramid.getDescendants(n),a=0;a<o.length;a++)o[a].setProxyFor(n),e=!0})),e||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var e in this._renderable_tiles=[],this._visible_tiles){var t=this._visible_tiles[e],r=this._tile_cache.get(e);t.loaded?(this._renderable_tiles.push(t),r&&r!==t&&this._tile_cache.drop(e)):r&&(r.generation===this._scene.generation?this._renderable_tiles.push(r):this._tile_cache.drop(e))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(e,t){return t.has_volatile_data?this._scene.getWorkers(WorkerType.FAKE)[0]:t.tiled?this._scene.getWorkers(WorkerType.NATIVE)[Math.abs(e.x+e.y+e.z)%this._scene.num_workers]:this._scene.getWorkers(WorkerType.NATIVE)[t.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var e=this._renderable_tiles,t={},r=0;r<e.length;r++){var n=e[r];Object.keys(n.meshes).forEach((function(e){return t[e]=!0}))}return this._active_styles=Object.keys(t),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var e=!1;for(var t in this._visible_tiles)if(!this._visible_tiles[t].built){e=!0;break}return e}},{key:"updateTilesVisibilityCounters",value:function(){var e=this;Object.keys(this._visible_coords).forEach((function(t){t in e._tile_visibility_counters||(e._tile_visibility_counters[t]=0)}));var t=Object.keys(this._tile_visibility_counters),r=[];t.forEach((function(t){t in e._visible_coords?(e._tile_visibility_counters[t]++,e._tile_visibility_counters[t]>=TILE_VISIBILITY_COUNTER_THRESHOLD&&r.push(e._visible_coords[t])):(e._tile_visibility_counters[t]--,e._tile_visibility_counters[t]<=0&&delete e._tile_visibility_counters[t])})),r.length&&this.loadCoordinates(r)}},{key:"loadCoordinates",value:function(e){var t=this;e.sort((function(e,r){var n=t._view.lookAtManipulator.getLookAtData().position,i=Geo$1.metersPerTile(e.z)/2,o=Geo$1.metersForTile(e);o.x+=i,o.y-=i;var a=Geo$1.metersForTile(r);a.x+=i,a.y-=i;var s=Math.abs(n[0]-o.x)+Math.abs(n[1]-o.y),l=Math.abs(n[0]-a.x)+Math.abs(n[1]-a.y);return(e.center_dist=s)<(r.center_dist=l)?-1:l===s?0:1})),e.forEach((function(e){return t.loadCoordinate(e)}))}},{key:"_keepCoordinate",value:function(e,t){var r=1<arguments.length&&void 0!==t&&t,n=this._visible_coords[e];if(n.z===this._view.center_tile.z)for(var i in this._scene.sources){var o,a,s,l=this._scene.sources[i];l.builds_geometry_tiles&&l.includesTile(n,this._view.lookAtManipulator.getLookAtData().tile_level)&&(o=Tile.normalizedKey(n,l,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(o)&&((a=r&&this._tile_cache.get(o))||(this._all_visible_tiles_are_cached=!1),s=a||new Tile({source:l,coords:n,worker:this.getWorkerForTile(n,l),style_zoom:Utils$1.zoomToTileLevel(n.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===l.config.type&&(s.syncedAt=l.getSyncedAt()),this.keepTile(s))}}},{key:"loadCoordinate",value:function(e){if(e.z===this._view.center_tile.z)for(var t in this._scene.sources){var r,n=this._scene.sources[t];n.builds_geometry_tiles&&n.includesTile(e,this._view.lookAtManipulator.getLookAtData().tile_level)&&(r=Tile.normalizedKey(e,n,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(r)&&this.buildTile(this._visible_tiles[r]))}}},{key:"buildTile",value:function(e,t){this._building_tiles&&this._building_tiles[e.key]||e.built&&e.generation===this._scene.generation||(this._tileBuildStart(e.key),e.build(this._scene.generation,t))}},{key:"buildTileStylesCompleted",value:function(e){var t=e.tile,r=e.progress;if(null==this._visible_tiles[t.key])Tile.abortBuild(t,this._scene.id);else if(t.generation!==this._scene.generation)Tile.abortBuild(t,this._scene.id);else{if(t.id<this._visible_tiles[t.key].id)return void Tile.abortBuild(t,this._scene.id);t=this._visible_tiles[t.key].merge(t),r.done&&(t.built=!0),t.buildMeshes(this._scene.styles,r),this.updateTileStates(),this._scene.requestRedraw()}r.done&&this._tileBuildStop(t)}},{key:"buildTileError",value:function(e){this._forgetTile(e.key),Tile.abortBuild(e,this._scene.id)}},{key:"_tileBuildStart",value:function(e){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[e]=!0}},{key:"_tileBuildStop",value:function(e){this._building_tiles&&(e.source&&e.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[e.key],Task.removeForTile(e.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Task.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(e,t){var r=t.source;return!this._visible_tiles[e]&&(t.generation!==this._scene.generation||"ObjectSource"===r.config.type&&r.getSyncedAt()>t.syncedAt)}}]),e}();function compareTileCoords(e,t){var r=e.coords,n=t.coords;return r.z-n.z||r.x-n.x||r.y-n.y}function roundPrecision(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,n=Math.pow(10,r);return Math.round(Math.floor(e*t)/t*n)/n}function getTileByteLength(e){var t=0;for(var r in e.meshes)for(var n=e.meshes[r],i=0;i<n.length;i++){var o=n[i];t+=o.buffer_size;for(var a=0;a<o.textures.length;a++)t+=e.textureManager.getByteLength(o.textures[a])}return t}function getMaxTileCacheSize(){var e=.1;return navigator&&navigator.deviceMemory?e=5*navigator.deviceMemory/100:window&&window.screen&&(e=window.screen.width/512*window.screen.height/512*.03*3,e=Math.min(e,1)),1024*e*1024*1024}var RenderState=function(){function e(t,r){_classCallCheck(this,e),r(t),this.value=t,this.setup=r}return _createClass(e,[{key:"get",value:function(){return this.value}},{key:"set",value:function(e){JSON.stringify(this.value)!==JSON.stringify(e)&&(this.setup(e),this.value=e)}}]),e}(),RenderStateManager=function e(t){_classCallCheck(this,e),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new RenderState({cull:this.defaults.culling,face:this.defaults.culling_face},(function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)})),this.blending=new RenderState({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},(function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)})),this.depth_write=new RenderState({depth_write:this.defaults.depth_write},(function(e){t.depthMask(e.depth_write)})),this.depth_test=new RenderState({depth_test:this.defaults.depth_test},(function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}))},MediaCapture=function(){function e(){_classCallCheck(this,e),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return _createClass(e,[{key:"setCanvas",value:function(e,t){this.canvas=e,this.gl=t}},{key:"screenshot",value:function(e){var t=this,r=(0<arguments.length&&void 0!==e?e:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:r},this.queue_screenshot.promise=new Promise((function(e,r){t.queue_screenshot.resolve=e,t.queue_screenshot.reject=r}))),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var e=this.canvas.width,t=this.canvas.height,r=new Uint8Array(e*t*4);this.gl.readPixels(0,0,e,t,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r);for(var n=(n=this.queue_screenshot.background)&&"transparent"!==n?StyleParser.parseColor(n).slice(0,3).map((function(e){return 255*e})):null,i=new Uint8ClampedArray(e*t*4),o=0;o<t;o++)for(var a=0;a<e;a++){var s=4*((t-o-1)*e+a),l=4*(o*e+a),c=r[3+s];i[0+l]=255*r[0+s]/c,i[1+l]=255*r[1+s]/c,i[2+l]=255*r[2+s]/c,i[3+l]=c,n&&(c/=255,i[0+l]=i[0+l]*c+n[0]*(1-c),i[1+l]=i[1+l]*c+n[1]*(1-c),i[2+l]=i[2+l]*c+n[2]*(1-c),i[3+l]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var u=this.screenshot_canvas;u.width=e,u.height=t,this.screenshot_context=this.screenshot_context||u.getContext("2d");var p=this.screenshot_context,f=new ImageData(i,e,t);p.putImageData(f,0,0);for(var h=u.toDataURL("image/png"),d=atob(h.slice(22)),y=new Uint8Array(d.length),m=0;m<d.length;++m)y[m]=d.charCodeAt(m);var v=new Blob([y],{type:"image/png"});this.queue_screenshot.resolve({url:h,blob:v,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var t=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return log("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return log("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var r=this.video_capture={};r.chunks=[],r.stream=this.canvas.captureStream(),r.options={mimeType:"video/webm"},r.media_recorder=new MediaRecorder(r.stream,r.options),r.media_recorder.ondataavailable=function(e){var n,i;0<e.data.size&&r.chunks.push(e.data),r.resolve&&(i=createObjectURL(n=new Blob(r.chunks,{type:r.options.mimeType})),r.stream&&(r.stream.getTracks()||[]).forEach((function(e){e.stop(),r.stream.removeTrack(e)})),r.stream=null,r.media_recorder=null,t.video_capture=null,r.resolve({url:i,blob:n,type:"webm"}))},r.media_recorder.start()}catch(e){return this.video_capture=null,log("error","Scene video capture failed",e),!1}return!0}},{key:"stopVideoCapture",value:function(){var e=this;return this.video_capture?(this.video_capture.promise=new Promise((function(t,r){e.video_capture.resolve=t,e.video_capture.reject=r})),this.video_capture.media_recorder.stop(),this.video_capture.promise):(log("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),e}(),SceneWorker=function(){function e(){_classCallCheck(this,e),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return _createClass(e,[{key:"init",value:function(e,t,r,n,i,o,a){return this.setMeshVariantMaxLife(a),this.scene_id=e,this.textureManager=getTextureManager(e),this._worker_id=t,log.setLevel(r),Utils$1.device_pixel_ratio=n,VertexElements.setElementIndexUint(i),FeatureSelection.setPrefix(this._worker_id),this._style_manager=new StyleManager,this._importExternalScripts(o),Label.id_prefix=t,this._isConfigured=!1,t}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(e){var t;0!==e.length&&(log("debug","loading custom data source scripts in worker:",e),t=Object.getOwnPropertyNames(window),importScripts.apply(void 0,_toConsumableArray(e)),Object.getOwnPropertyNames(window).forEach((function(e){-1===t.indexOf(e)&&(self[e]=window[e])})))}},{key:"updateConfig",value:function(e,t){var r=e.config,n=e.generation,i=e.introspection;r=JSON.parse(r);for(var o in mergeDebugSettings(t),this._generation=n,this._isConfigured=!1,r.layers)r.layers[o]&&(r.layers[o].data=Utils$1.stringsToFunctions(r.layers[o].data));this.global=Utils$1.stringsToFunctions(r.global),this._createDataSources(r),r.styles=Utils$1.stringsToFunctions(r.styles,StyleParser.wrapFunction),this.styles=this._style_manager.build(r.styles),self.is_fake_worker=Thread.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:i,id:this.scene_id}),delete self.is_fake_worker,this.layers=parseLayers(r.layers,this._style_manager.styles),this._configuring=this._syncTextures(r.textures)}},{key:"setMeshVariantMaxLife",value:function(e){this.meshVariantMaxLife=e}},{key:"_createDataSources",value:function(e){var t=this;this._last_config_sources=this._config_sources||{},this._config_sources=e.sources;var r=this.sources,n=[];for(var i in e.sources=Utils$1.stringsToFunctions(e.sources),this.sources={},self.is_fake_worker=Thread.is_main,e.sources)if(JSON.stringify(this._last_config_sources[i])!==JSON.stringify(e.sources[i])){var o=void 0;try{o=DataSource.create(Object.assign({},e.sources[i],{name:i}),this.sources)}catch(r){log("error","Error creating source.",r.message,e.sources[i]);continue}o&&(this.sources[i]=o,n.push(i))}else this.sources[i]=r[i];delete self.is_fake_worker,n.forEach((function(e){for(var r in t.tiles)t.tiles[r].source===e&&delete t.tiles[r]}))}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(t){var r=this;if((this._isConfigured=!0)!==t.loaded)t.loading=!0,t.loaded=!1,t.error=null,this._loadTileSourceData(t).then((function(){if(r.getTile(t.id)){t.loading=!1,t.loaded=!0;try{Tile.buildGeometry(t,r)}catch(e){t.error=e.toString(),WorkerBroker.postMessage("TileManager_".concat(r.scene_id,".buildTileError"),Tile.slice(t))}}else log("trace","stop tile build after data source load because tile was removed. Key: ".concat(t.key,", id: ").concat(t.id))}),(function(e){t.loading=!1,t.loaded=!1,t.error=e.stack,log("error","tile load error for tile with key ".concat(t.key," and id ").concat(t.id,": ").concat(t.error)),WorkerBroker.postMessage("TileManager_".concat(r.scene_id,".buildTileError"),Tile.slice(t))}));else{log("trace","used worker cache for tile with key ".concat(t.key," and id ").concat(t.id));try{Tile.buildGeometry(t,this)}catch(e){t.error=e.toString(),WorkerBroker.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),Tile.slice(t))}}}},{key:"buildTile",value:function(e){var t,r=e.tile,n=this.getTile(r.id);n&&n.loading||(r=this.tiles[r.id]=Object.assign(n||{},r),this._isConfigured?this._onConfig(r):(t=this).awaitConfiguration().then((function(){return t._onConfig(r)})))}},{key:"_loadTileSourceData",value:function(e){return this.sources[e.source]?this.sources[e.source].load(e):(e.source_data={},Promise.resolve(e))}},{key:"getTile",value:function(e){return this.tiles[e]}},{key:"removeTile",value:function(e){var t=this.tiles[e];null!=t&&(!0===t.loading&&(log("trace","cancel tile load for tile id ".concat(e)),t.loading=!1,Tile.cancel(t)),delete this.tiles[e],log("trace","remove tile from cache, tile id: ".concat(e)))}},{key:"queryFeatures",value:function(e){var t=this,r=e.filter,n=e.visible,i=e.geometry,o=e.tile_ids,a=[],s=o.map((function(e){return t.tiles[e]})).filter((function(e){return e}));return null!=r&&(r=-1<["{","["].indexOf(r[0])?JSON.parse(r):r,r=Utils$1.stringsToFunctions(r,StyleParser.wrapFunction)),r=buildFilter(r,FilterOptions),s.forEach((function(e){for(var o in e.source_data.layers)!function(o){e.source_data.layers[o].features.forEach((function(s){var l,c;!0===n&&s.generation!==t._generation||!1===n&&s.generation===t._generation||((l=StyleParser.getFeatureParseContext(s,e,t.global)).source=e.source,l.layer=o,r(l)&&(c={type:s.type,properties:s.properties},!0===i&&(c.geometry=Geo$1.copyGeometry(s.geometry),Geo$1.tileSpaceToLatlng(c.geometry,e.coords.z,e.min)),a.push(c)))}))}(o)})),a}},{key:"resetFeatureSelection",value:function(){FeatureSelection.reset()}},{key:"_syncTextures",value:function(e){var t=[];return e&&t.push.apply(t,_toConsumableArray(Object.keys(e))),log("trace","sync textures to worker:",t),0<t.length?this.textureManager.syncTexturesToWorker(t):Promise.resolve()}},{key:"profile",value:function(e){console.profile("worker ".concat(this._worker_id,": ").concat(e))}},{key:"profileEnd",value:function(e){console.profileEnd("worker ".concat(this._worker_id,": ").concat(e))}},{key:"terminate",value:function(){this.dispose()}}]),e}();(Thread.is_worker||self.H&&self.H.DEBUG)&&WorkerBroker.addTarget("self",new SceneWorker);var Scene=function(){function t(e,r){_classCallCheck(this,t),r=r||{},subscribeMixin(this),this.id=t.id++,this.textureManager=getTextureManager(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new View(this,r),this.tile_manager=new TileManager({scene:this,view:this.view}),this.num_workers=r.numWorkers||2,!0===r.disableVertexArrayObjects&&(VertexArrayObject.disabled=!0),Utils$1.device_pixel_ratio=r.devicePixelRatio,this.config=null,this.config_source=e,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new StyleManager,this.building=null,this.dirty=!0,r.preUpdate&&this.subscribe({pre_update:r.preUpdate}),r.postUpdate&&this.subscribe({post_update:r.postUpdate}),this.render_loop=!r.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new MediaCapture,this.selection=null,this.introspection=!0===r.introspection,this.viewport=r.viewport,this.adjustMeshVariantMaxLife(),this.container=r.container,this.canvas=null,this.contextOptions=r.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=t.generation,this.last_complete_generation=t.generation,this.log_level=r.logLevel||"warn",log.setLevel(this.log_level),log.reset()}return _createClass(t,[{key:"load",value:function(e,t){var r=this,n=0<arguments.length&&void 0!==e?e:null,i=1<arguments.length&&void 0!==t?t:{};return this.initializing||(log.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(i="string"==typeof i?{base_path:i}:i).blocking=void 0===i.blocking||i.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(n,i).then((function(){return r.createWorkers()})).then((function(){r.resetFeatureSelection();var e="object"===_typeof(r.config_source)||r.hasSubscribersFor("load"),t=r.updateConfig({serialize_funcs:e,normalize:!1,load_event:!0,fade_in:!0});if(!0===i.blocking)return t})).then((function(){r.updating--,r.initializing=null,r.initialized=!0,r.last_valid_config_source=r.config_source,r.last_valid_options={base_path:i.base_path,file_type:i.file_type},r.requestRedraw()})).catch((function(e){var t,n;if(r.initializing=null,r.updating=0,n="YAMLException"===e.name?(t="yaml","Error parsing scene YAML"):"Error initializing scene",r.trigger("error",{type:t,message:n,error:e,url:r.config_source}),n="Scene.load() failed to load ".concat(r.config_source,": ").concat(e.message),r.last_valid_config_source)return log("warn",n,e),log("info","Scene.load() reverting to last valid configuration"),r.load(r.last_valid_config_source,r.last_valid_base_path);throw log("error",n,e),e}))),this.initializing}},{key:"destroy",value:function(){var e;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},ShaderProgram.reset(),(e=this.gl.getExtension("WEBGL_lose_context"))&&e.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),log.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Context$1.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Utils$1.device_pixel_ratio},this.contextOptions))}catch(e){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),VertexArrayObject.init(this.gl),this.render_states=new RenderStateManager(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var e,t;if(void 0!==__worker_src__&&(t="("+__worker_src__+")()",__worker_src_origin__&&""!==__worker_src_map__&&(t+="\n//# sourceMappingURL="+__worker_src_origin__.slice(0,__worker_src_origin__.lastIndexOf("/")+1)+__worker_src_map__),e=createObjectURL(new Blob([t],{type:"application/javascript"}))),!e)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return e}},{key:"updateExternalScripts",value:function(){var e=_toConsumableArray(this.external_scripts||[]),t=[];if(this.config.scene.scripts)for(var r in this.config.scene.scripts)-1===t.indexOf(this.config.scene.scripts[r])&&t.push(this.config.scene.scripts[r]);for(var n in this.config.sources){var i=this.config.sources[n];if(i.scripts)for(var o in i.scripts)-1===t.indexOf(i.scripts[o])&&t.push(i.scripts[o])}return this.external_scripts=t,!(this.external_scripts.length===e.length&&this.external_scripts.every((function(t,r){return t===e[r]})))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(e){var t=this,r=!!this.gl.getExtension("OES_element_index_uint"),n=[];this._workers=[];for(var i=0;i<this.num_workers;i++)!function(){var o=new Worker(e);t._workers[i]=o,WorkerBroker.addWorker(o),log("debug","Scene.makeWorkers: initializing worker ".concat(i));var a=i;n.push(WorkerBroker.postMessage(o,"self.init",t.id,i,t.log_level,Utils$1.device_pixel_ratio,r,t.external_scripts,t.meshVariantMaxLife).then((function(e){return log("debug","Scene.makeWorkers: initialized worker ".concat(e)),e}),(function(e){return log("error","Scene.makeWorkers: failed to initialize worker ".concat(a,":"),e),Promise.reject(e)})))}();var o=new SceneWorker;return this._workers.push(o),n.push(o.init(this.id,i,this.log_level,Utils$1.device_pixel_ratio,r,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(n).then((function(){log.setWorkers(t._workers.slice(0,t.num_workers)),revokeObjectURL(e)}))}},{key:"getWorkers",value:function(e){return this._workers.filter((function(t){switch(e){case WorkerType.NATIVE:return t instanceof Worker;case WorkerType.FAKE:return t instanceof SceneWorker;default:return!0}}))}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(log.setWorkers(null),this._workers.forEach((function(e){e.terminate()})),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var e=this.viewport,t=e.width,r=e.height;0<t&&0<r&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Context$1.resize(this.gl,t,r,Utils$1.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var e=this.viewport,t=e.width,r=e.height,n=Utils$1.device_pixel_ratio,i=t/n/256*(r/n/256),o=Math.max(Math.ceil(2*i),8);if(this.meshVariantMaxLife!==o)return this.meshVariantMaxLife=o,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&WorkerBroker.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Task.setState({user_moving_view:this.view.user_input_active}),Task.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var e=this;this.render_loop_active||setTimeout((function(){e.renderLoop()}),0)}},{key:"update",value:function(){var e=this.dirty,t=!!this.selection&&this.selection.hasPendingRequests(),r=!(!1===e&&!1===t||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",r),this.view.update(),r&&(this.dirty=!1,this.render({main:e,selection:t}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",r),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,log("trace","Scene.render()"),!0)}},{key:"render",value:function(e){var t=this,r=e.main,n=e.selection,i=this.gl;if(Object.keys(this.lights).forEach((function(e){return t.lights[e].update()})),r&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),n){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,this.canvas.width,this.canvas.height),i.clearColor.apply(i,_toConsumableArray(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:n})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(e,t){var r=this,n=0<arguments.length&&void 0!==e?e:"program",i=(1<arguments.length&&void 0!==t?t:{}).allow_blend,o=this.gl;i=null==i||i;this.clearFrame();for(var a,s=Style.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map((function(e){return r.styles[e]})).filter((function(e){return e}))),l=0,c=0,u=0;u<s.length;u++){var p,f,h=s[u],d=c-(p=parseInt(h.name));(h.clean_depth||d)&&(this.render_states.depth_write.value.depth_write?o.clear(o.DEPTH_BUFFER_BIT):(o.depthMask(!0),o.clear(o.DEPTH_BUFFER_BIT),o.depthMask(!1)),d&&(c=p)),h.blend!==a&&(f=Object.assign({},Style.render_states[h.blend],{blend:i&&h.blend}),this.setRenderState(f));var y="translucent"===h.blend&&"program"===n;y&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(h.name,n),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),l+=this.renderStyle(h.name,n),y&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),a=h.blend}return l}},{key:"renderStyle",value:function(e,t){for(var r,n=this,i=this.styles[e],o=!0,a=0,s=this.tile_manager.getRenderableTiles(),l=Math.max.apply(Math,_toConsumableArray(s.map((function(t){return t.meshes[e]?Math.max.apply(Math,_toConsumableArray(t.meshes[e].map((function(e){return e.variant.order})))):-1})))),c=0;c<l+1;c++){var u=function(l){for(var c=0;c<s.length;c++){var u=s[c];if(null!=u.meshes[e]&&u.shouldProxyForStyle(e))for(var p=u.meshes[e].filter((function(e){return e.variant.order===l})),f=0,h=p.length;f<h;f+=1){var d=p[f];if(!0===o&&(o=!1,!(r=n.setupStyle(i,t))))return{v:0};n.view.setupTile(u,r),n.selection.setupDiscards(r),i.render(d)&&n.requestRedraw(),a+=d.geometry_count}}}(c);if("object"===_typeof(u))return u.v}return a}},{key:"setupStyle",value:function(e,t){var r;try{if(!(r=e.getProgram(t)))return}catch(t){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(e.name),style:e,shader_errors:e.program&&e.program.shader_errors})}for(var n in r.use(),e.setup(),this.view.setupProgram(r),this.lights)this.lights[n].setupProgram(r);return r}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(e){var t,r,n=0<arguments.length&&void 0!==e?e:{},i=n.depth_test,o=n.depth_write,a=n.cull_face,s=n.blend;this.initialized&&(t=this.render_states,i=!1!==i&&t.defaults.depth_test,o=!1!==o&&t.defaults.depth_write,a=!1!==a&&t.defaults.culling,s=null!=s?s:t.defaults.blending,r=this.gl,t.depth_test.set({depth_test:i}),t.depth_write.set({depth_write:o}),t.culling.set({cull:a,face:t.defaults.culling_face}),s&&"opaque"!==s?"overlay"===s||"inlay"===s||"translucent"===s?t.blending.set({blend:!0,src:r.SRC_ALPHA,dst:r.ONE_MINUS_SRC_ALPHA,src_alpha:r.ONE,dst_alpha:r.ONE_MINUS_SRC_ALPHA}):"add"===s?t.blending.set({blend:!0,src:r.ONE,dst:r.ONE}):"multiply"===s&&t.blending.set({blend:!0,src:r.ZERO,dst:r.SRC_COLOR}):t.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(e,t,r){var n,i=t.radius,o=t.top_most_only;this.initialized?(n={x:e.x/this.view.size.css.width,y:e.y/this.view.size.css.height},i=0<i?{x:i/this.view.size.css.width,y:i/this.view.size.css.height}:null,this.selection.getFeatureAt(n,{radius:i,top_most_only:o},r)):log("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.filter,n=t.unique,i=void 0===n||n,o=t.group_by,a=void 0===o?null:o,s=t.visible,l=void 0===s?null:s,c=t.geometry,u=void 0!==c&&c,p=(r=Utils$1.serializeWithFunctions(r),this.tile_manager.getRenderableTiles().map((function(e){return e.id})));return WorkerBroker.postMessage(this._workers,"self.queryFeatures",{filter:r,visible:l,geometry:u,tile_ids:p}).then((function(e){var t=[],r={},n={},o=(i="string"==typeof i?[i]:i)&&function(e){return JSON.stringify(Array.isArray(i)?sliceObject(e,i):e)},s=(a=("string"==typeof a||Array.isArray(a))&&a)&&function(e){return Array.isArray(a)?JSON.stringify(sliceObject(e,a)):e[a]};return e.forEach((function(e){return e.forEach((function(e){if(o){var i=o(e);if(r[i])return;r[i]=!0}var a;s?(a=s(e.properties),n[a]=n[a]||[],n[a].push(e)):t.push(e)}))})),s?n:t}))}},{key:"loadScene",value:function(e,t){var r=this,n=0<arguments.length&&void 0!==e?e:null,i=1<arguments.length&&void 0!==t?t:{},o=i.base_path,a=i.file_type;return this.config_source=n||this.config_source,"string"==typeof this.config_source?this.base_path=pathForURL(o||this.config_source):this.base_path=pathForURL(o),this.config_path=this.base_path,SceneLoader$1.loadScene(this.config_source,{path:this.base_path,type:a}).then((function(e){var t=e.config,n=e.bundle;return r.config=t,r.config_bundle=n,r.config}))}},{key:"createDataSources",value:function(){var e=this,t=[],r=Object.keys(this.sources),n=0;for(var i in this.config.sources){var o=this.config.sources[i],a=this.sources[i];try{var s=Object.assign({},o,{name:i,id:n++});if(this.sources[i]=DataSource.create(s,this.sources),!this.sources[i])throw{}}catch(r){delete this.sources[i];var l="Could not create data source: ".concat(r.message);log("warn","Scene: ".concat(l),o),this.trigger("warning",{type:"sources",source:o,message:l})}DataSource.sameConfig(this.sources[i],a)||t.push(i)}for(var c in r.forEach((function(r){e.config.sources[r]||(delete e.sources[r],t.push(r))})),0<t.length&&this.tile_manager.removeTiles((function(e){return-1<t.indexOf(e.source.name)})),this.config.layers){var u=this.config.layers[c];!1!==u.enabled&&u.data&&this.sources[u.data.source]&&(this.sources[u.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var e=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then((function(){return e.textureManager.createDefault(e.gl)}))}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var e in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[e].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var e in this.lights={},this.config.lights){var t;this.config.lights[e]&&"object"===_typeof(this.config.lights[e])&&((t=this.config.lights[e]).name=e.replace("-","_"),t.visible=!1!==t.visible,t.visible&&(this.lights[t.name]=Light.create(this.view,t)))}Light.inject(this.lights)}},{key:"setBackground",value:function(){var e,t=this.config.scene.background;this.background={},t&&t.color&&(this.background.color=StyleParser.parseColor(t.color)),this.background.color||(this.background.color=[0,0,0,0]),1===this.background.color[3]?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map((function(e){return Math.floor(255*e)})).join(", "),")"):this.canvas.style.backgroundColor="transparent",(e=this.gl).clearColor.apply(e,_toConsumableArray(this.background.color))}},{key:"setIntrospection",value:function(e){var t=this;return e!==this.introspection?(this.introspection=e||!1,this.updating++,this.updateConfig({normalize:!1}).then((function(){return t.updating--}))):Promise.resolve()}},{key:"updateConfig",value:function(e){var r=0<arguments.length&&void 0!==e?e:{},n=r.load_event,i=void 0!==n&&n,o=r.serialize_funcs,a=r.normalize,s=void 0===a||a;r.fade_in,this.generation=++t.generation,this.updating++,this.config=SceneLoader$1.applyGlobalProperties(this.config),s?SceneLoader$1.normalize(this.config,this.config_bundle):(SceneLoader$1.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),SceneLoader$1.normalizeTextures(this.config,this.config_bundle)),this.trigger(i?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),FontManager.loadFonts(this.config.fonts),this.updateStyles();var l=this.syncConfigToWorker({serialize_funcs:o});return this.updating--,this.view.updateBounds(),this.requestRedraw(),l}},{key:"syncConfigToWorker",value:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).serialize_funcs,r=void 0===t||t?Utils$1.serializeWithFunctions(this.config):JSON.stringify(this.config);return WorkerBroker.postMessage(this._workers,"self.updateConfig",{config:r,generation:this.generation,introspection:this.introspection},debugSettings$1)}},{key:"createListeners",value:function(){var e=this;this.listeners={},this.listeners.view={move:function(){return e.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return e.dirty=!0},warning:function(t){return e.trigger("warning",Object.assign({type:"textures"},t))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(t){return e.trigger("error",Object.assign({type:"scene"},t))}},SceneLoader$1.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),SceneLoader$1.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&WorkerBroker.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new FeatureSelection(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).background,r=void 0===t?"white":t;return this.requestRedraw(),this.media_capture.screenshot({background:r})}},{key:"pixelRatio",value:function(){return Utils$1.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(e){console.profile("main thread: ".concat(e)),WorkerBroker.postMessage(this._workers,"self.profile",e)}},{key:"_profileEnd",value:function(e){console.profileEnd("main thread: ".concat(e)),WorkerBroker.postMessage(this._workers,"self.profileEnd",e)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var e=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some((function(t){return e.styles[t]&&e.styles[t].animated}))}}],[{key:"create",value:function(e,r){return new t(e,1<arguments.length&&void 0!==r?r:{})}}]),t}();Scene.id=0,Scene.generation=0;var RemoteTexture=function(){_inherits(t,Texture);var e=_createSuper(t);function t(r,n,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,t);var a=Math.pow(2,o.coords.z),s=Math.abs(Math.floor(o.coords.x/a)),l=Math.abs(a*s-Math.abs(o.coords.x)),c=o.coords;return o.coords={x:l,y:c.y,z:c.z},e.call(this,r,n,i,o)}return _createClass(t,[{key:"load",value:function(e){var r=this;if(!e||!e.uid)return _get(_getPrototypeOf(t.prototype),"load",this).call(this,e);var n=e.coords,i=new Uint8Array([0,0,0,0]);return this.loading=new Promise((function(t,o){var a=H.map.DataModel.invoke(e.uid,"requestTileAsPromise",[n.x,n.y,n.z])||null;a?a.then((function(t){var n=t.data;r.loaded=!0,!n||n instanceof ArrayBuffer||"IMG"!==n.tagName.toUpperCase()&&"CANVAS"!==n.tagName.toUpperCase()?r.setData(1,1,i,{filtering:"nearest"}):r.setElement(n,e)}),(function(){r.loaded=!1})).then(t,(function(e){return o(e)})):o(new Error("Unable to invoke on target "+e.uid))})),this.loading}}]),t}();TextureManager.register(RemoteTexture,(function(e){return e&&e.uid})),self.H=self.H||{},self.H.gl={DataSource:DataSource,Geo:Geo$1,MathUtils:MathUtils$1,Scene:Scene,Task:Task,Tile:Tile,WorkerBroker:WorkerBroker,log:log,SceneLoader:SceneLoader$1,yaml:jsYaml$1}}()};f()}(),this.H=this.H||{},this.H.venues=function(e){function t(e,t){var r,n;t=(t=void 0===t?{}:t).insertAt;e&&"undefined"!=typeof document&&(r=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).type="text/css","top"===t&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}function r(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=(d="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=d.asyncIterator||"@@asyncIterator",a=d.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(t){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i,o,a,s;t=t&&t.prototype instanceof p?t:p,t=Object.create(t.prototype),n=new w(n||[]);return t._invoke=(i=e,o=r,a=n,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return{value:void 0,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r&&(r=function e(t,r){var n=t.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}return"throw"===(n=c(n,t.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,u):(n=n.arg)?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,u):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}(r,a),r)){if(r===u)continue;return r}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(s="executing","normal"===(r=c(i,o,a)).type){if(s=a.done?"completed":"suspendedYield",r.arg===u)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s="completed",a.method="throw",a.arg=r.arg)}}),t}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function p(){}function f(){}function h(){}var d,y,m=((y=(y=(s(d={},n,(function(){return this})),Object.getPrototypeOf))&&y(y(x([]))))&&y!==t&&r.call(y,n)&&(d=y),h.prototype=p.prototype=Object.create(d));function v(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,s){var l;if("throw"!==(i=c(e[i],e,o)).type)return(o=(l=i.arg).value)&&"object"==typeof o&&r.call(o,"__await")?t.resolve(o.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(o).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}));s(i.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function x(e){if(e){var t,i=e[n];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return t=-1,(i=function n(){for(;++t<e.length;)if(r.call(e,t))return n.value=e[t],n.done=!1,n;return n.value=void 0,n.done=!0,n}).next=i}return{next:E}}function E(){return{value:void 0,done:!0}}return s(m,"constructor",f.prototype=h),s(h,"constructor",f),f.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},v(g.prototype),s(g.prototype,o,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new g(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,n,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,r=[];for(t in e)r.push(t);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=x,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;0<=i;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,n,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(r=i.completion).type&&(n=r.arg,_(i)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e,t,r){return(y=d()?Reflect.construct.bind():function(e,t,r){var n=[null];return n.push.apply(n,t),t=new(Function.bind.apply(e,n)),r&&h(t,r.prototype),t}).apply(null,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t=d();return function(){var r,n=f(e);r=t?(r=f(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),n=this;if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return m(n)}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:r):n.value}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg);\n}\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial;\n}");var E=function(){p(t,H.map.Feature);var e=v(t);function t(r){var n;return s(this,t),(n=e.call(this)).id=r.id,n.model=r,n}return c(t,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var e=(t=b(this.model.getCenter(),2))[0],t=t[1];return new H.geo.Point(t,e)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),t}(),S=function(){p(t,H.map.Feature);var e=v(t);function t(r){var n;return s(this,t),(n=e.call(this)).id=r.id,n.model=r,n}return c(t,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return y(H.geo.Rect,_(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var e=(t=b(this.model.getCenter(),2))[0],t=t[1];return new H.geo.Point(t,e)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(e){return this.getLevels().find((function(t){return t.getIdentifier()===e}))}},{key:"getLevels",value:function(){var e=this.getData().getLevels().map((function(e){return e.getIdentifier()}));return this.getVenue().getLevels().filter((function(t){return-1!==e.indexOf(t.id)}))}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),t}(),k=function(){p(t,H.map.Feature);var e=v(t);function t(r){var n;return s(this,t),(n=e.call(this)).id=r.id,n.model=r,n}return c(t,[{key:"getGeometry",value:function(e){return this.getGeometries().find((function(t){return t.getIdentifier()===e}))}},{key:"getGeometries",value:function(){var e=this.getData().getGeometries().map((function(e){return e.getIdentifier()}));return this.getDrawing().getVenue().getGeometries().filter((function(t){return-1!==e.indexOf(t.id)}))}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),t}();function T(e,t,r,n){for(var i,o=n,a=r-t>>1,s=r-t,l=e[t],c=e[t+1],u=e[r],p=e[r+1],f=t+3;f<r;f+=3){var h=function(e,t,r,n,i,o){var a,s=i-r,l=o-n;return 0===s&&0===l||(1<(a=((e-r)*s+(t-n)*l)/(s*s+l*l))?(r=i,n=o):0<a&&(r+=s*a,n+=l*a)),(s=e-r)*s+(l=t-n)*l}(e[f],e[f+1],l,c,u,p);o<h?(i=f,o=h):h===o&&(h=Math.abs(f-a))<s&&(i=f,s=h)}n<o&&(3<i-t&&T(e,t,i,n),e[i+2]=o,3<r-i&&T(e,i,r,n))}function O(e,t,r,n){var i=e={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},o=i.geometry;if("Point"===(t=i.type)||"MultiPoint"===t||"LineString"===t)A(i,o);else if("Polygon"===t||"MultiLineString"===t)for(var a=0;a<o.length;a++)A(i,o[a]);else if("MultiPolygon"===t)for(a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)A(i,o[a][s]);return e}function A(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function P(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)C(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)C(i[c],s);else if("LineString"===o)N(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(c=0;c<i.length;c++)N(i[c],s=[],a,!1),e.push(O(l,"LineString",s,t.properties));return}R(i,s,a,!1)}else if("Polygon"===o)R(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(c=0;c<t.geometry.geometries.length;c++)P(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},r,n);return}for(c=0;c<i.length;c++){var u=[];R(i[c],u,a,!0),s.push(u)}}e.push(O(l,o,s,t.properties))}}function C(e,t){t.push(j(e[0])),t.push(M(e[1])),t.push(0)}function N(e,t,r,n){for(var i,o,a=0,s=0;s<e.length;s++){var l=j(e[s][0]),c=M(e[s][1]);t.push(l),t.push(c),t.push(0),0<s&&(a+=n?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=t.length-3;t[2]=1,T(t,0,u,r),t[2+u]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function R(e,t,r,n){for(var i=0;i<e.length;i++){var o=[];N(e[i],o,r,n),t.push(o)}}function j(e){return e/360+.5}function M(e){return e=Math.sin(e*Math.PI/180),(e=.5-.25*Math.log((1+e)/(1-e))/Math.PI)<0?0:1<e?1:e}function I(e,t,r,n,i,o,a,s){if(n/=t,(r/=t)<=o&&a<n)return e;if(a<r||n<=o)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],p=u.geometry,f=u.type,h=0===i?u.minX:u.minY,d=0===i?u.maxX:u.maxY;if(r<=h&&d<n)l.push(u);else if(!(d<r||n<=h)){var y=[];if("Point"===f||"MultiPoint"===f){x=w=v=void 0;for(var m=p,v=y,g=r,b=n,_=i,w=0;w<m.length;w+=3){var x=m[w+_];g<=x&&x<=b&&(v.push(m[w]),v.push(m[w+1]),v.push(m[w+2]))}}else if("LineString"===f)D(p,y,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===f)F(p,y,r,n,i,!1);else if("Polygon"===f)F(p,y,r,n,i,!0);else if("MultiPolygon"===f)for(var E=0;E<p.length;E++){var S=[];F(p[E],S,r,n,i,!0),S.length&&y.push(S)}if(y.length)if(s.lineMetrics&&"LineString"===f)for(E=0;E<y.length;E++)l.push(O(u.id,f,y[E],u.tags));else"LineString"!==f&&"MultiLineString"!==f||(1===y.length?(f="LineString",y=y[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===y.length?"Point":"MultiPoint"),l.push(O(u.id,f,y,u.tags))}}return l.length?l:null}function D(e,t,r,n,i,o,a){for(var s,l,c=L(e),u=0===i?z:$,p=e.start,f=0;f<e.length-3;f+=3){var h=e[f],d=e[f+1],y=e[f+2],m=e[f+3],v=e[f+4],g=0===i?h:d,b=0===i?m:v,_=!1;a&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(d-v,2))),g<r?r<b&&(l=u(c,h,d,m,v,r),a&&(c.start=p+s*l)):n<g?b<n&&(l=u(c,h,d,m,v,n),a&&(c.start=p+s*l)):B(c,h,d,y),b<r&&r<=g&&(l=u(c,h,d,m,v,r),_=!0),n<b&&g<=n&&(l=u(c,h,d,m,v,n),_=!0),!o&&_&&(a&&(c.end=p+s*l),t.push(c),c=L(e)),a&&(p+=s)}var w=e.length-3;h=e[w],d=e[1+w],y=e[2+w];r<=(g=0===i?h:d)&&g<=n&&B(c,h,d,y),w=c.length-3,o&&3<=w&&(c[w]!==c[0]||c[1+w]!==c[1])&&B(c,c[0],c[1],c[2]),c.length&&t.push(c)}function L(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function F(e,t,r,n,i,o){for(var a=0;a<e.length;a++)D(e[a],t,r,n,i,o,!1)}function B(e,t,r,n){e.push(t),e.push(r),e.push(n)}function z(e,t,r,n,i,o){return n=(o-t)/(n-t),e.push(o),e.push(r+(i-r)*n),e.push(1),n}function $(e,t,r,n,i,o){return i=(o-r)/(i-r),e.push(t+(n-t)*i),e.push(o),e.push(1),i}function U(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=V(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o)for(var a=[],s=0;s<i.geometry.length;s++)a.push(V(i.geometry[s],t));else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var l=[],c=0;c<i.geometry[s].length;c++)l.push(V(i.geometry[s][c],t));a.push(l)}r.push(O(i.id,o,a,i.tags))}return r}function V(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function G(e,t){if(!e.transformed){for(var r,n=1<<e.z,i=e.x,o=e.y,a=0;a<e.features.length;a++){var s=e.features[a],l=s.geometry,c=s.type;if(s.geometry=[],1===c)for(r=0;r<l.length;r+=2)s.geometry.push(q(l[r],l[r+1],t,n,i,o));else for(r=0;r<l.length;r++){for(var u=[],p=0;p<l[r].length;p+=2)u.push(q(l[r][p],l[r][p+1],t,n,i,o));s.geometry.push(u)}}e.transformed=!0}return e}function q(e,t,r,n,i,o){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-o))]}function W(e,t,r,n,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,p=b=g=v=m=y=d=p=l=void 0;var l=a,c=e[s],u=o,p=i,f=c.geometry,h=c.type,d=[];if("Point"===h||"MultiPoint"===h)for(var y=0;y<f.length;y+=3)d.push(f[y]),d.push(f[y+1]),l.numPoints++,l.numSimplified++;else if("LineString"===h)Y(d,f,l,u,!1,!1);else if("MultiLineString"===h||"Polygon"===h)for(y=0;y<f.length;y++)Y(d,f[y],l,u,"Polygon"===h,0===y);else if("MultiPolygon"===h)for(var m=0;m<f.length;m++){var v=f[m];for(y=0;y<v.length;y++)Y(d,v[y],l,u,!0,0===y)}if(d.length){var g=c.tags||null;if("LineString"===h&&p.lineMetrics){for(var b in g={},c.tags)g[b]=c.tags[b];g.mapbox_clip_start=f.start/f.size,g.mapbox_clip_end=f.end/f.size}p={geometry:d,type:"Polygon"===h||"MultiPolygon"===h?3:"LineString"===h||"MultiLineString"===h?2:1,tags:g},null!==c.id&&(p.id=c.id),l.features.push(p)}p=e[s].minX;var _=e[s].minY,w=e[s].maxX,x=e[s].maxY;p<a.minX&&(a.minX=p),_<a.minY&&(a.minY=_),w>a.maxX&&(a.maxX=w),x>a.maxY&&(a.maxY=x)}return a}function Y(e,t,r,n,i,o){var a=n*n;if(0<n&&t.size<(i?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;if(i){for(var c=s,u=(i=o,0),p=0,f=c.length,h=f-2;p<f;h=p,p+=2)u+=(c[p]-c[h])*(c[p+1]+c[h+1]);if(0<u===i)for(p=0,f=c.length;p<f/2;p+=2){var d=c[p],y=c[p+1];c[p]=c[f-2-p],c[p+1]=c[f-1-p],c[f-2-p]=d,c[f-1-p]=y}}e.push(s)}}function K(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||24<t.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,i,o,a,s;e=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)P(r,e.features[n],t,n);else"Feature"===e.type?P(r,e,t):P(r,{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),a=I(o=n=e,1,-1-(i=t.buffer/t.extent),i,0,-1,2,t),s=I(n,1,1-i,2+i,0,-1,2,t),(a||s)&&(o=I(n,1,-i,1+i,0,-1,2,t)||[],a&&(o=U(a,1).concat(o)),s&&(o=o.concat(U(s,-1)))),(e=o).length&&this.splitTile(e,0,0,0),r&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function X(e,t,r){return 32*((1<<e)*r+t)+e}function Z(e,t,r,n,i){var o;return t=1<<t,(o=[])[0]=(e[0]/i+r)/t,o[1]=(e[1]/i+n)/t,i=(e=r={x:o[0],y:o[1]}).x,e=e.y,i=360*(i-.5),n=Math.exp(Math.PI*(.5-e)/.25)-1,e=Math.exp(Math.PI*(.5-e)/.25)+1,[i,180*Math.asin(n/e)/Math.PI]}K.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},K.prototype.splitTile=function(e,t,r,n,i,o,a){for(var s=[e,t,r,n],l=this.options,c=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var u,p,f,h,d,y,m,v,g,b=1<<t,_=X(t,r,n),w=this.tiles[_];if(w||(1<c&&console.time("creation"),w=this.tiles[_]=W(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c&&(1<c&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,w.numFeatures,w.numPoints,w.numSimplified),console.timeEnd("creation")),this.stats[_="z"+t]=(this.stats[_]||0)+1,this.total++)),w.source=e,i){if(t===l.maxZoom||t===i)continue;_=1<<i-t;if(r!==Math.floor(o/_)||n!==Math.floor(a/_))continue}else if(t===l.indexMaxZoom||w.numPoints<=l.indexMaxPoints)continue;w.source=null,0!==e.length&&(1<c&&console.time("clipping"),u=.5-(_=.5*l.buffer/l.extent),f=1+_,m=h=d=y=null,v=I(e,b,r-_,r+(p=.5+_),0,w.minX,w.maxX,l),g=I(e,b,r+u,r+f,0,w.minX,w.maxX,l),e=null,v&&(m=I(v,b,n-_,n+p,1,w.minY,w.maxY,l),h=I(v,b,n+u,n+f,1,w.minY,w.maxY,l),v=null),g&&(d=I(g,b,n-_,n+p,1,w.minY,w.maxY,l),y=I(g,b,n+u,n+f,1,w.minY,w.maxY,l),g=null),1<c&&console.timeEnd("clipping"),s.push(m||[],t+1,2*r,2*n),s.push(h||[],t+1,2*r,2*n+1),s.push(d||[],t+1,2*r+1,2*n),s.push(y||[],t+1,2*r+1,2*n+1))}},K.prototype.getTile=function(e,t,r){var n=(i=this.options).extent,i=i.debug;if(e<0||24<e)return null;var o=X(e,t=(t%(o=1<<e)+o)%o,r);if(this.tiles[o])return G(this.tiles[o],n);1<i&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var a,s=e,l=t,c=r;!a&&0<s;)s--,l=Math.floor(l/2),c=Math.floor(c/2),a=this.tiles[X(s,l,c)];return a&&a.source?(1<i&&console.log("found parent tile z%d-%d-%d",s,l,c),1<i&&console.time("drilling down"),this.splitTile(a.source,s,l,c,e,t,r),1<i&&console.timeEnd("drilling down"),this.tiles[o]?G(this.tiles[o],n):null):null};var J={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINESTRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection"},Q={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},ee=13,te={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},re={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},ne=Object.freeze({v1:1,v2:2}),ie=1,oe=2,ae=3,se=function(e){return e=function(e){for(var t=0,r=e.length,n=0;n<r-1;n+=1){var i=e[n],o=e[n+1];t+=i[0]*o[1]-o[0]*i[1]}return t+(e[r-1][0]*e[0][1]-e[0][0]*e[r-1][1])}(e),0<e?"CW":e<0?"CCW":void 0};!function(e){function t(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return r[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r,n;e.exports=(r=[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}var i=r(1),a=(r=r(7)).get,s=(r.deepValue,r.isArray);r=function(){function e(t,r){var n=void 0===(n=r.location)?0:n,i=void 0===(i=r.distance)?100:i,o=void 0===(o=r.threshold)?.6:o,s=void 0===(s=r.maxPatternLength)?32:s,l=void 0!==(l=r.caseSensitive)&&l,c=void 0===(c=r.tokenSeparator)?/ +/g:c,u=void 0!==(u=r.findAllMatches)&&u,p=void 0===(p=r.minMatchCharLength)?1:p,f=void 0===(f=r.id)?null:f,h=void 0===(h=r.keys)?[]:h,d=void 0===(d=r.shouldSort)||d,y=void 0===(y=r.getFn)?a:y,m=void 0===(m=r.sortFn)?function(e,t){return e.score-t.score}:m,v=void 0!==(v=r.tokenize)&&v,g=void 0!==(g=r.matchAllTokens)&&g,b=void 0!==(b=r.includeMatches)&&b,_=void 0!==(_=r.includeScore)&&_;r=void 0!==(r=r.verbose)&&r;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.options={location:n,distance:i,threshold:o,maxPatternLength:s,isCaseSensitive:l,tokenSeparator:c,findAllMatches:u,minMatchCharLength:p,id:f,keys:h,includeMatches:b,includeScore:_,shouldSort:d,getFn:y,sortFn:m,verbose:r,tokenize:v,matchAllTokens:g},this.setCollection(t),this._processKeys(h)}for(var t=e.prototype,r=[{key:"setCollection",value:function(e){return this.list=e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,r=e.length;t<r;t+=1){var n=e[t];this._keyWeights[n]=1,this._keyNames.push(n)}else{for(var i=null,o=null,a=0,s=0,l=e.length;s<l;s+=1){var c=e[s];if(!c.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var u=c.name;if(this._keyNames.push(u),!c.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((c=c.weight)<0||1<c)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?c:Math.max(o,c),i=null==i?c:Math.min(i,c),a+=this._keyWeights[u]=c}if(1<a)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1},r=(e=(this._log('---------\nSearch pattern: "'.concat(e,'"')),this._prepareSearchers(e))).tokenSearchers;e=e.fullSearcher,r=this._search(r,e);return this._computeScore(r),this.options.shouldSort&&this._sort(r),t.limit&&"number"==typeof t.limit&&(r=r.slice(0,t.limit)),this._format(r)}},{key:"_prepareSearchers",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var r=e.split(this.options.tokenSeparator),n=0,o=r.length;n<o;n+=1)t.push(new i(r[n],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,r=this.list,n={},i=[];if("string"==typeof r[0])for(var o=0,a=r.length;o<a;o+=1)this._analyze({key:"",value:r[o],record:o,index:o},{resultMap:n,results:i,tokenSearchers:e,fullSearcher:t});else for(var s=0,l=r.length;s<l;s+=1)for(var c=r[s],u=0,p=this._keyNames.length;u<p;u+=1){var f=this._keyNames[u];this._analyze({key:f,value:this.options.getFn(c,f),record:c,index:s},{resultMap:n,results:i,tokenSearchers:e,fullSearcher:t})}return i}},{key:"_analyze",value:function(e,t){var r,n=this,i=e.key,o=e.arrayIndex,a=e.value,l=e.record,c=(e=e.index,void 0===(r=t.tokenSearchers)?[]:r),u=t.fullSearcher,p=void 0===(r=t.resultMap)?{}:r,f=void 0===(r=t.results)?[]:r;!function e(t,r,o,a){if(null!=r)if("string"==typeof r){var l=!1,h=-1,d=0,y=(n._log("\nKey: ".concat(""===i?"--":i)),u.search(r));if(n._log('Full text: "'.concat(r,'", score: ').concat(y.score)),n.options.tokenize){for(var m=r.split(n.options.tokenSeparator),v=m.length,g=[],b=0,_=c.length;b<_;b+=1){var w=c[b];n._log('\nPattern: "'.concat(w.pattern,'"'));for(var x=!1,E=0;E<v;E+=1){var S=m[E],k=w.search(S),T={};k.isMatch?(T[S]=k.score,x=l=!0,g.push(k.score)):(T[S]=1,n.options.matchAllTokens||g.push(1)),n._log('Token: "'.concat(S,'", score: ').concat(T[S]))}x&&(d+=1)}h=g[0];for(var O=g.length,A=1;A<O;A+=1)h+=g[A];n._log("Token score average:",h/=O)}var P=y.score,C=(n._log("Score average:",P=-1<h?(P+h)/2:P),!n.options.tokenize||!n.options.matchAllTokens||d>=c.length);n._log("\nCheck Matches: ".concat(C)),(l||y.isMatch)&&C&&(C={key:i,arrayIndex:t,value:r,score:P},n.options.includeMatches&&(C.matchedIndices=y.matchedIndices),(t=p[a])?t.output.push(C):(p[a]={item:o,output:[C]},f.push(p[a])))}else if(s(r))for(var N=0,R=r.length;N<R;N+=1)e(N,r[N],o,a)}(void 0===o?-1:o,a,l,e)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,r=!!Object.keys(t).length,n=0,i=e.length;n<i;n+=1){for(var o=e[n],a=o.output,s=a.length,l=1,c=0;c<s;c+=1){var u=a[c],p=u.key,f=r?t[p]:1;p=0===u.score&&t&&0<t[p]?Number.EPSILON:u.score;l*=Math.pow(p,f)}o.score=l,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t,r=[],i=(this.options.verbose&&(t=[],this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,r){if("object"===n(r)&&null!==r){if(-1!==t.indexOf(r))return;t.push(r)}return r}),2)),t=null),[]);this.options.includeMatches&&i.push((function(e,t){var r=e.output;t.matches=[];for(var n=0,i=r.length;n<i;n+=1){var o,a=r[n];0!==a.matchedIndices.length&&(o={indices:a.matchedIndices,value:a.value},a.key&&(o.key=a.key),a.hasOwnProperty("arrayIndex")&&-1<a.arrayIndex&&(o.arrayIndex=a.arrayIndex),t.matches.push(o))}})),this.options.includeScore&&i.push((function(e,t){t.score=e.score}));for(var o=0,a=e.length;o<a;o+=1){var s=e[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),i.length){for(var l={item:s.item},c=0,u=i.length;c<u;c+=1)i[c](s,l);r.push(l)}else r.push(s.item)}return r}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}],o=0;o<r.length;o++){var l=r[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}return e}();e.exports=r},function(e,t,r){var n=r(2),i=r(3),o=r(6);r=function(){function e(t,r){var n=void 0===(n=r.location)?0:n,i=void 0===(i=r.distance)?100:i,a=void 0===(a=r.threshold)?.6:a,s=void 0===(s=r.maxPatternLength)?32:s,l=void 0!==(l=r.isCaseSensitive)&&l,c=void 0===(c=r.tokenSeparator)?/ +/g:c,u=void 0!==(u=r.findAllMatches)&&u,p=void 0===(p=r.minMatchCharLength)?1:p;r=void 0!==(r=r.includeMatches)&&r;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.options={location:n,distance:i,threshold:a,maxPatternLength:s,isCaseSensitive:l,tokenSeparator:c,findAllMatches:u,includeMatches:r,minMatchCharLength:p},this.pattern=l?t:t.toLowerCase(),this.pattern.length<=s&&(this.patternAlphabet=o(this.pattern))}for(var t=e.prototype,r=[{key:"search",value:function(e){var t=(r=this.options).isCaseSensitive,r=r.includeMatches;if(t||(e=e.toLowerCase()),this.pattern===e)return t={isMatch:!0,score:0},r&&(t.matchedIndices=[[0,e.length-1]]),t;var o=(t=this.options).maxPatternLength;t=t.tokenSeparator;if(this.pattern.length>o)return n(e,this.pattern,t);t=(o=this.options).location;var a=o.distance,s=o.threshold,l=o.findAllMatches;o=o.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:t,distance:a,threshold:s,findAllMatches:l,minMatchCharLength:o,includeMatches:r})}}],a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}return e}();e.exports=r},function(e,t){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,i=(t=new RegExp(t.replace(r,"\\$&").replace(n,"|")),e.match(t)),o=[];if(n=!!i)for(var a=0,s=i.length;a<s;a+=1){var l=i[a];o.push([e.indexOf(l),l.length-1])}return{score:n?.5:1,isMatch:n,matchedIndices:o}}},function(e,t,r){var n=r(4),i=r(5);e.exports=function(e,t,r,o){for(var a=o.location,s=void 0===(l=o.distance)?100:l,l=o.threshold,c=void 0!==(u=o.findAllMatches)&&u,u=void 0===(u=o.minMatchCharLength)?1:u,p=(o=void 0!==(o=o.includeMatches)&&o,void 0===a?0:a),f=e.length,h=void 0===l?.6:l,d=e.indexOf(t,p),y=t.length,m=[],v=0;v<f;v+=1)m[v]=0;-1!==d&&(a=n(t,{errors:0,currentLocation:d,expectedLocation:p,distance:s}),h=Math.min(a,h),-1!==(d=e.lastIndexOf(t,p+y))&&(l=n(t,{errors:0,currentLocation:d,expectedLocation:p,distance:s}),h=Math.min(l,h)));d=-1;for(var g=[],b=1,_=y+f,w=1<<(y<=31?y-1:30),x=0;x<y;x+=1){for(var E=0,S=_;E<S;)n(t,{errors:x,currentLocation:p+S,expectedLocation:p,distance:s})<=h?E=S:_=S,S=Math.floor((_-E)/2+E);_=S;var k=Math.max(1,p-S+1),T=c?f:Math.min(p+S,f)+y,O=Array(T+2);O[T+1]=(1<<x)-1;for(var A=T;k<=A;--A){var P=A-1,C=r[e.charAt(P)];if(C&&(m[P]=1),O[A]=(O[A+1]<<1|1)&C,0!==x&&(O[A]|=(g[A+1]|g[A])<<1|1|g[A+1]),O[A]&w&&(b=n(t,{errors:x,currentLocation:P,expectedLocation:p,distance:s}))<=h){if(h=b,(d=P)<=p)break;k=Math.max(1,2*p-d)}}if(n(t,{errors:x+1,currentLocation:p,expectedLocation:p,distance:s})>h)break;g=O}return a={isMatch:0<=d,score:0===b?.001:b},o&&(a.matchedIndices=i(m,u)),a}},function(e,t){e.exports=function(e,t){var r=t.errors,n=t.currentLocation,i=t.expectedLocation;t=void 0===(t=t.distance)?100:t,r=(void 0===r?0:r)/e.length,e=Math.abs((void 0===i?0:i)-(void 0===n?0:n));return t?r+e/t:e?1:r}},function(e,t){e.exports=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=[],n=-1,i=0,o=e.length;i<o;i+=1){var a=e[i];a&&-1===n?n=i:a||-1===n||((a=i-1)-n+1>=t&&r.push([n,a]),n=-1)}return e[i-1]&&t<=i-n&&r.push([n,i-1]),r}},function(e,t){e.exports=function(e){for(var t={},r=e.length,n=0;n<r;n+=1)t[e.charAt(n)]=0;for(var i=0;i<r;i+=1)t[e.charAt(i)]|=1<<r-i-1;return t}},function(e,t){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function n(e){if(null==e)return"";if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function i(e){return"string"==typeof e}function o(e){return"number"==typeof e}e.exports={get:function(e,t){var a=[];return function e(t,s){if(s){var l=s.indexOf("."),c=s,u=null,p=(-1!==l&&(c=s.slice(0,l),u=s.slice(l+1)),t[c]);if(null!=p)if(u||!i(p)&&!o(p))if(r(p))for(var f=0,h=p.length;f<h;f+=1)e(p[f],u);else u&&e(p,u);else a.push(n(p))}else a.push(t)}(e,t),a},isArray:r,isString:i,isNum:o,toString:n}}],n={},t.m=r,t.c=n,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==o(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0))}(Nt={exports:{}});var le=(Ce=Nt=Nt.exports)&&Ce.__esModule&&Object.prototype.hasOwnProperty.call(Ce,"default")?Ce.default:Ce,ce=(Nt.Fuse,c((function e(t){var r=void 0===(r=t.addressList)?[]:r,n=void 0===(n=t.geometries)?[]:n,i=void 0===(i=t.entity)?null:i,o=void 0===(o=t.name)?"":o;t=void 0===(t=t.icon)?"":t;s(this,e),this.addressList=r,this.geometries=n,this.icon=t,this.entity=i,this.name=o}))),ue={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},pe=function(){function e(t){s(this,e),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=t,this.init()}return c(e,[{key:"init",value:function(){var e=this.venueModel.getGeometries().reduce((function(e,t){return e[t.getId()]=t,e}),{});this.initEntityList(this.venueModel.getOccupant()),this.initIconList(e),this.levels_=this.venueModel.getLevels().map((function(e){return{levelId:e.getId(),levelName:e.getName(),drawingId:e.getDrawing().getId(),drawingName:e.getDrawing().getName()}})),e=[].concat(_(this.searchListEntities_),_(this.searchListIcons_));this.searchList_=e.sort((function(e,t){return e.name.localeCompare(t.name)})),this.fuseSearch_=new le(this.searchList_,ue)}},{key:"initEntityList",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return e.spaceIds?new ce({geometries:e.space,addressList:e.spaceIds||[],name:e.properties.name||"",entity:e}):null})).filter((function(e){return null!==e}));this.searchListEntities_=e}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter((function(e){return e.isIcon()})).map((function(e){var t=e.getIcon();return new ce({geometries:[e],icon:t,name:e.properties.name||""})}))}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var e=this.searchListIcons_.reduce((function(e,t){return e[t.name]=t.name,e}),{});return Object.keys(e)}},{key:"find",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return""===e?this.searchList_:this.fuseSearch_.search(e)}}]),e}(),fe=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),he="indoor.Site",de="indoor.Occupant",ye="indoor.Space",me="Address",ve="indoor.Level",ge="indoor.Entrance",be="SPACE_TYPE_NAME",_e="SPACE_CATEGORY_NAME",we="Point",xe="LineString",Ee="Polygon",Se="MultiPoint",ke="MultiLineString",Te="MultiPolygon",Oe=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),Ae="9999999999999",Pe="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",Ce=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),Ne=(Ce=(Object.freeze((u(Nt={},Ce.THEME,"themeUrls"),u(Nt,Ce.THEME_MAP,"themeMapUrl"),u(Nt,Ce.PRESETS,"presetsUrl"),u(Nt,Ce.SDK_STRINGS,"stringsUrl"),Nt)),Object.freeze((u(Nt={},Ce.THEME,"themeOverrides"),u(Nt,Ce.THEME_MAP,"themeMapOverrides"),u(Nt,Ce.PRESETS,"presetOverrides"),u(Nt,Ce.SDK_STRINGS,"stringsOverrides"),u(Nt,Ce.INPUT_COLORS,"inputColorOverrides"),Nt)),Object.freeze((u(Nt={},Ce.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),u(Nt,Ce.SDK_STRINGS,["Standard","SDK","sdk/standard"]),u(Nt,Ce.V4_THEME_FAMILY,["modern","standard"]),u(Nt,Ce.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),u(Nt,Ce.NAV_THEME,["Factory","MapEditor"]),u(Nt,Ce.ICON,["Multicolor","Standard","TheBase","Factory"]),Nt)),Object.freeze((u(Nt={},Ce.THEME,"Modern"),u(Nt,Ce.THEME_MAP,"Standard"),u(Nt,Ce.PRESETS,"Standard"),u(Nt,Ce.SDK_STRINGS,"Standard"),u(Nt,Ce.ICON_FILE,"Standard"),u(Nt,Ce.INPUT_COLORS,"Standard"),u(Nt,Ce.BASE_MAP_INFO,"Standard"),u(Nt,Ce.CONFIG_PROFILE,"factory"),u(Nt,Ce.NAV_THEME,"Factory"),u(Nt,Ce.NAV_NAME_THEME,"FactoryName"),u(Nt,Ce.NAV_PROP_MAP,"Standard"),u(Nt,Ce.NAV_STRINGS,"Standard"),u(Nt,Ce.NAV_THEME_MAP,"Standard"),u(Nt,Ce.NAV_NAME_THEME_MAP,"StandardName"),u(Nt,Ce.V4_THEME_FAMILY,"Standard"),u(Nt,Ce.V4_MAPTYPE_THEME,"Standard"),u(Nt,Ce.ICON,"Multicolor"),u(Nt,Ce.MARKER,"Standard"),Nt)),Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"})),Object.freeze(u({},Ce.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Object.freeze({ACCOUNT_API:"ACCOUNT_API",DEFAULT_COLLECTION:"DEFAULT_COLLECTION",CATALOG_LAYER:"CATALOG_LAYER"})),Re=Object.freeze((u(Nt={},Ne.ACCOUNT_API,{BASE_URL:"https://account.api.here.com/authorization/v1.1/projects/me"}),u(Nt,Ne.DEFAULT_COLLECTION,{BASE_URL:"https://config.data.api.platform.here.com/config/v1/catalogs",PARAMS:{CREATED_BY:"created",COLLECTION:"-collection"}}),u(Nt,Ne.CATALOG_LAYER,{BASE_URL:"https://interactive.data.api.platform.here.com/interactive/v1/catalogs",MOMDATA_LAYER:"9999999999999",ICON_LAYER:"icons",THEMERULE_LAYER:"config",COLLECTION_LAYER:"layers/9999999999999/search",PARAMS:{FEATURE_TYPE:{KEY:"p.featureType",VALUE:"indoor.Site"}}}),Nt)),je=Object.freeze({isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}}),Me=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"});function Ie(){}function De(){De.init.call(this)}function Le(e){return void 0===e._maxListeners?De.defaultMaxListeners:e._maxListeners}function Fe(e,t,r,n){var i,o;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),o=i[t]):(i=e._events=new Ie,e._eventsCount=0),o?("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),o.warned||(n=Le(e))&&0<n&&o.length>n&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,"function"==typeof console.warn?console.warn(n):console.log(n))):(o=i[t]=r,++e._eventsCount),e}function Be(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function ze(e){var t=this._events;if(t){if("function"==typeof(t=t[e]))return 1;if(t)return t.length}return 0}function $e(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function Ue(e,t,r){return r===At.ObjectType.SEGMENT_START_MARKER?0===e?Tt:null:r===At.ObjectType.SEGMENT_FINISH_MARKER?1===t.length||e===t.length-1?Ot:null:"indoor"===t[e].departure.place.type?St:kt}Ie.prototype=Object.create(null),(De.EventEmitter=De).usingDomains=!1,De.prototype.domain=void 0,De.prototype._events=void 0,De.prototype._maxListeners=void 0,De.defaultMaxListeners=10,De.init=function(){this.domain=null,De.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ie,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},De.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},De.prototype.getMaxListeners=function(){return Le(this)},De.prototype.emit=function(e){var t,r,n,i="error"===e,o=this._events;if(o)i=i&&null==o.error;else if(!i)return!1;if(a=this.domain,i){var a;i=arguments[1];if(a)return(i=i||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,i.domain=a,i.domainThrown=!1,a.emit("error",i),!1;throw i instanceof Error?i:((a=new Error('Uncaught, unspecified "error" event. ('+i+")")).context=i,a)}if(!(t=o[e]))return!1;var s,l="function"==typeof t;switch(s=arguments.length){case 1:var c=t;if(h=l)c.call(this);else for(var u=c.length,p=$e(c,u),f=0;f<u;++f)p[f].call(this);break;case 2:var h=t,d=arguments[1];if(c=l)h.call(this,d);else for(var y=h.length,m=$e(h,y),v=0;v<y;++v)m[v].call(this,d);break;case 3:var g=t,b=arguments[1],_=arguments[2];if(S=l)g.call(this,b,_);else for(var w=g.length,x=$e(g,w),E=0;E<w;++E)x[E].call(this,b,_);break;case 4:var S=t,k=arguments[1],T=arguments[2],O=arguments[3];if(g=l)S.call(this,k,T,O);else for(var A=S.length,P=$e(S,A),C=0;C<A;++C)P[C].call(this,k,T,O);break;default:for(r=new Array(s-1),n=1;n<s;n++)r[n-1]=arguments[n];var N=t,R=r;if(l)N.apply(this,R);else for(var j=N.length,M=$e(N,j),I=0;I<j;++I)M[I].apply(this,R)}return!0},De.prototype.on=De.prototype.addListener=function(e,t){return Fe(this,e,t,!1)},De.prototype.prependListener=function(e,t){return Fe(this,e,t,!0)},De.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Be(this,e,t)),this},De.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Be(this,e,t)),this},De.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((n=this._events)&&(r=n[e]))if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new Ie:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;0<o--;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new Ie,this;delete n[e]}else{for(var s=r,l=i,c=l+1,u=s.length;c<u;l+=1,c+=1)s[l]=s[c];s.pop()}n.removeListener&&this.emit("removeListener",e,a||t)}return this},De.prototype.removeAllListeners=function(e){var t,r=this._events;if(r){if(!r.removeListener)return 0===arguments.length?(this._events=new Ie,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new Ie:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new Ie,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);}return this},De.prototype.listeners=function(e){var t=this._events;e=t&&(t=t[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[];return e},De.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ze.call(e,t)},De.prototype.listenerCount=ze,De.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var He="venues-ui-button--active",Ve="venues-ui-button",Ge="venues-ui__drawings",qe="data-drawing",We=function(){function e(t,r,n){var i=this,o=(s(this,e),this.clickHandler=n,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",Ge),document.createElement("div"));(n=(o.setAttribute("class","trigger ".concat(Ve)),document.createElement("div"))).setAttribute("class","arrow arrow--down"),o.appendChild(n),o.addEventListener("click",(function(){o.classList.toggle(He),i.containerButtons.classList.toggle("drawings--open")})),this.containerDiv.appendChild(o),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),r&&this.update(r),t.appendChild(this.containerDiv)}return c(e,[{key:"drawButton",value:function(e,t,r){var n=this,i=document.createElement("div");r=Number(r)===Number(e);i.setAttribute("class",r?"".concat(Ve," ").concat(He):Ve),i.innerHTML=t,i.setAttribute(qe,e),i.addEventListener("click",(function(){n.switch(e),n.clickHandler(e)})),this.containerButtons.appendChild(i)}},{key:"switch",value:function(e){this.containerButtons.querySelectorAll(".".concat(Ge," .").concat(He)).forEach((function(e){return e.setAttribute("class",Ve)})),(e=this.containerButtons.querySelector("[".concat(qe,"='").concat(e,"']")))&&e.setAttribute("class","".concat(Ve," ").concat(He))}},{key:"update",value:function(e){var t=this,r=(this.containerButtons.innerHTML="",function(e){return e=e.getDrawings(),new Map(e.map((function(e){var t=e.getDisplayName()||e.getName();return[e.getId(),t]})))}(e));0<r.size&&r.forEach((function(r,n){return t.drawButton(n,r,e.getRootDrawing().getId())}))}}]),e}(),Ye="venues-ui-button--active",Ke="venues-ui-button",Xe="data-level",Ze="venues-ui__levels",Je=function(){function e(t,r,n,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;s(this,e),this.clickHandler=i,this.levelButtonCount=o,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(Ze)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),r&&this.update(r,n),t.appendChild(this.containerUI)}return c(e,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(e,t){var r=this,n=document.createElement("div");n.innerHTML=t,n.style.fontSize="".concat(Math.max(Math.min(28.8/t.length,11.52),10),"px"),n.style.display="block",n.setAttribute("class",Ke),n.setAttribute(Xe,e),n.addEventListener("click",(function(){r.switch(e),r.clickHandler(e)})),this.containerButtons.appendChild(n)}},{key:"drawScrollButtons",value:function(){var e,t=this;(e=((e=(this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(Ke," ").concat(Ke,"--up")),document.createElement("div"))).setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(e),this.buttonScrollUp.addEventListener("click",(function(){return t.scroll(1)})),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(Ke," ").concat(Ke,"--down")),document.createElement("div"))).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(e),this.buttonScrollDown.addEventListener("click",(function(){return t.scroll(-1)})),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var e,t,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=Array.from(this.containerButtons.querySelectorAll(".".concat(Ke))).reverse(),i=[];0<=r?(this.currentScrollIndex=Math.min(this.currentScrollIndex+r,n.length-this.levelButtonCount),e=Math.min(this.currentScrollIndex,n.length-this.levelButtonCount),t=Math.min(this.currentScrollIndex+this.levelButtonCount,n.length),i=n.slice(e,t)):r<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+r,0),e=Math.max(0,this.currentScrollIndex),t=Math.min(n.length,this.currentScrollIndex+this.levelButtonCount),i=n.slice(e,t)),n.forEach((function(e){-1!==i.indexOf(e)?e.style.display="block":e.style.display="none"})),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===n.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(e){var t;this.containerButtons.querySelectorAll(".".concat(Ye)).forEach((function(e){return e.setAttribute("class",Ke)})),(e=this.containerButtons.querySelector(".".concat(Ze," [").concat(Xe,"='").concat(e,"']")))&&(t=Array.from(this.containerButtons.querySelectorAll(".".concat(Ke))).reverse(),e.setAttribute("class","".concat(Ke," ").concat(Ye)),((t=t.indexOf(e))<this.currentScrollIndex||t>=this.currentScrollIndex+4)&&this.scroll(t-this.currentScrollIndex))}},{key:"update",value:function(e,t){var r,n=this,i=(t=function(){return new Map((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return[e.getZIndex(),e.getShortName()||e.getDisplayName()||e.getName()]})))}((r=e,(t===Oe.FLATTEN?(t=r.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(t).map((function(e){return e[0]}))):r.getLevels()).sort((function(e,t){return t.getZIndex()-e.getZIndex()})))),e.getMainLevel().getZIndex());this.clear(),t.forEach((function(e,t){return n.drawLevelButton(t,e)})),t.size>this.levelButtonCount&&(t.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(t).reverse().findIndex((function(e){return e[0]===i})),t.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(i)}}]),e}(),Qe=function(){function e(t,r){s(this,e),this.baseTheme=t,this.metaInformation=r,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return c(e,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var e=0,t=Object.entries(this.baseTheme.spaceRules);e<t.length;e++){var r,n=(r=b(t[e],2))[0],i=(r=r[1]).properties.behavioralAppearance.default.styleProperties,o=r.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[n]=i,this.labelStyleMap[n]=o,r.spaceTypes)for(var a=0,s=Object.entries(r.spaceTypes);a<s.length;a++){var l=(u=b(s[a],2))[0],c=(u=u[1]).behavioralAppearance.default.styleProperties,u=u.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(n,"_").concat(l)]=c&&0!==Object.keys(c)?c:i,this.labelStyleMap["".concat(n,"_").concat(l)]=u&&0!==Object.keys(u)?u:o}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(e){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[e]:null}},{key:"getLabelStyle",value:function(e){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[e]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),e}(),et=function(){function e(){s(this,e),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return c(e,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=this.getTheme(),n=Qe.getGeometryDefaultStyle(),i=e.properties.spaceType,o=e=e.properties.spaceCategory;return i&&(o="".concat(e,"_").concat(i)),{m:(e=(e=r.getGeometryStyle(o))&&!t?e:n).fill&&e.fill.toLowerCase()||"#fff",w:e.strokeWidth/10||.1,o:e.stroke&&e.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(e){this.getTheme();var t=Qe.getLabelDefaultStyle();return{fill:t.stroke,zmin:t.zmin}}}]),e}(),tt=Math.PI/180,rt=180/Math.PI,nt=function(){function e(){s(this,e)}return c(e,null,[{key:"toRadians",value:function(e){return e*tt}},{key:"toDegrees",value:function(e){return e*rt}},{key:"getBoundingBox",value:function(t,r){var n=[];switch(t){case we:n=[r,r];break;case Se:case xe:n=r;break;case ke:case Ee:n=r.reduce((function(e,t){return e.concat(t)}),[]);break;case Te:n=r.reduce((function(e,t){return e.concat(t)}),[]).reduce((function(e,t){return e.concat(t)}),[])}return e.getBoundingBoxVertices(n)}},{key:"getInverseTransform",value:function(e){var t=e[0]*e[3]-e[1]*e[2];return(t=[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,0,0])[4]=-(t[0]*e[4]+t[2]*e[5]),t[5]=-(t[1]*e[4]+t[3]*e[5]),t}},{key:"applyTransformToPoint",value:function(e,t){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"transformProduct",value:function(e,t){var r=[0,0,0,0,0,0];return r[0]=t[0]*e[0]+t[2]*e[1],r[1]=t[1]*e[0]+t[3]*e[1],r[2]=t[0]*e[2]+t[2]*e[3],r[3]=t[1]*e[2]+t[3]*e[3],r[4]=t[0]*e[4]+t[2]*e[5]+t[4],r[5]=t[1]*e[4]+t[3]*e[5]+t[5],r}},{key:"convertLonLatToMerc",value:function(e){var t=e[0]*tt;e=e[1]*tt,e=Math.sin(e);return[.5+t/(2*Math.PI),.5-Math.log((1+e)/(1-e))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(e){var t=2*Math.PI*(e[0]-.5);e=Math.atan(Math.sinh(2*Math.PI*(.5-e[1])));return[t/tt,e/tt]}},{key:"getTransformScale",value:function(e){return Math.sqrt(e[0]*e[3]-e[1]*e[2])}},{key:"getLonLatToMercTransform",value:function(t){var r=[1/360,0,0,-1/(360*Math.cos(t[1]*tt)),0,0],n=e.applyTransformToPoint(r,t);t=e.convertLonLatToMerc(t);return r[4]=t[0]-n[0],r[5]=t[1]-n[1],r}},{key:"getNatToMercTransform",value:function(t){var r=[t[4],t[5]];r=e.getLonLatToMercTransform(r);return e.transformProduct(t,r)}},{key:"convertMxMy2LonLat",value:function(t,r){return t.length&&r.length?e.applyTransformToPoint(t,r):[]}},{key:"convertLonLat2MxMy",value:function(t,r){return t.length&&r.length?(t=e.getInverseTransform(t),e.applyTransformToPoint(t,r)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(e,t,r){var n=[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;i<1&&(i=6);for(var o=0;o<=i;o+=1){var a=(1-(l=o/i))*(1-l),s=2*l*(1-l),l=l*l,c=a*e[0]+s*t[0]+l*r[0];a=a*e[1]+s*t[1]+l*r[1];n.push([c,a])}return n}},{key:"getFlattenedCubicBezierCurve",value:function(e,t,r,n){var i=[],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;o<1&&(o=6);for(var a=0;a<=o;a+=1){var s=(1-(u=a/o))*(1-u)*(1-u),l=3*u*(1-u)*(1-u),c=3*u*u*(1-u),u=u*u*u,p=s*e[0]+l*t[0]+c*r[0]+u*n[0];s=s*e[1]+l*t[1]+c*r[1]+u*n[1];i.push([p,s])}return i}},{key:"getRectangularCoordinatesOfLabelArea",value:function(t,r){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=(l=b(t,6))[0],o=l[1],a=l[2],s=l[3],l=l[5],c=e.getDeltaLonLatForMeterAtGivenLonLat(i,o);t=t[4];return n?(l&&(t*=-1),null!=r&&(t=(t+=r<0?2*Math.PI+r:r)<0?2*Math.PI+t:t)):t=0,e.getRectVerticesFromSignatureRectRepresentation([i,o],{xLength:a,yLength:s},t,c)}},{key:"getRotatedPoint",value:function(e,t){var r,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0],o=Math.cos(t),a=(t=Math.sin(t),e[0]-i[0]);e=e[1]-i[1];return[(r=n?[a*o+e*t,e*o-a*t]:[a*o-e*t,e*o+a*t])[0]+i[0],r[1]+i[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(t,r,n,i){var o=r.xLength,a=(r=r.yLength,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]),s=(t=b(t,2))[0],l=t[1],c=o/2,u=r/2,p=(t=b(i,2))[0],f=t[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map((function(e){return[e[0]*c,e[1]*u]})).map((function(t){return e.getRotatedPoint(t,n,a)})).map((function(e){return[e[0]*p,e[1]*f]})).map((function(e){return[e[0]+s,e[1]+l]}))}},{key:"getScaleFactorForRectInSpace",value:function(e,t,r,n){return e/=r,(r=t/n)<e?r:e}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(e,t){return[1/6371e3*(180/Math.PI)/Math.cos(t*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return e.reduce((function(e,t){return[[Math.min(t[0],e[0][0]),Math.min(t[1],e[0][1])],[Math.max(t[0],e[1][0]),Math.max(t[1],e[1][1])]]}),t)}},{key:"isPointInBoundingBox",value:function(e,t){var r,n,i,o;if(e&&t)return r=(e=b(e,2))[0],e=e[1],t=b(t,2),n=(i=b(t[0],2))[0],i=i[1],o=(t=b(t[1],2))[0],t=t[1],r<=o&&n<=r&&e<=t&&i<=e}},{key:"isPointOnLineSegment",value:function(e,t,r){var n=(e=b(e,2))[0],i=(e=e[1],(t=b(t,2))[0]),o=(t=t[1],(r=b(r,2))[0]),a=(t-e)*((r=r[1])-e)<=0;return i===o?i===n&&a:e-r==(r-t)/(o-i)*(n-o)&&a}},{key:"rayIntersectLineSegment",value:function(e,t,r){var n=(e=b(e,2))[0],i=(e=e[1],(t=b(t,2))[0]),o=(t=t[1],(r=b(r,2))[0]);r=r[1];return i!==o&&(0<=(n=(n-i)/(o-i))&&n<1&&e<(r-t)*n+t)}},{key:"isPointInPolygon",value:function(t,r){var n=(t=b(t,2))[0],i=t[1];if((t=r.length)<3)return!1;var o=0,a=r[t-1];return r.forEach((function(t){e.rayIntersectLineSegment([n,i],a,t)&&(o+=1),a=t})),o%2!=0}},{key:"isPointOnLineString",value:function(t,r){var n=(t=b(t,2))[0],i=t[1],o=r.length;if(!(o<2))for(var a=r[o-1],s=0;s<o;s+=1){var l=r[s];if(e.isPointOnLineSegment([n,i],a,l))return!0;a=r[s]}return!1}},{key:"getAreaOfPolygon",value:function(e){var t=e.length;if(t<3)return null;var r=0,n=e[t-1];return e.forEach((function(e){var t,i,o,a;r+=.5*(i=e,o=(t=b(t=n,2))[0],t=t[1],a=(i=b(i,2))[0],o*i[1]-t*a),n=e})),r}},{key:"getDistanceBetweenPoints",value:function(e,t){var r=(e=b(e,2))[0];e=e[1],r-=(t=b(t,2))[0],e-=t[1];return Math.sqrt(r*r+e*e)}}]),e}(),it=function(){function e(){s(this,e),this.spaceRules={}}return c(e,null,[{key:"getDataEntriesOne",value:function(e,t){var r;e=[e,""];return null!==t&&Array.isArray(t)?e[1]=t.toString():null!==t&&"object"===o(t)?0<(r=Object.entries(t)).length&&(r=this.getDataEntriesOne(r[0][0],r[0][1]),e[0]="".concat(e[0],".").concat(r[0]),e[1]=r[1]):e[1]=t,e}},{key:"getDataEntriesAll",value:function(e){for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var i=(o=b(n[r],2))[0],o=o[1];i=this.getDataEntriesOne(i,o);t.push(i)}return t}},{key:"doFindComboMatch",value:function(e,t){var r="";if(e&&e.configuration&&e.configuration.combinations)for(var n=this.getDataEntriesAll(t),i=(t=Object.entries(e.configuration.combinations),0),o=0,a=t;o<a.length;o++)!function(){var e=a[o],t=Object.keys(e[1]).filter((function(t){return n.some((function(r){return t===r[0]&&e[1][t]===r[1]}))}));t.length===Object.keys(e[1]).length&&t.length>i&&(r=e[0],i=t.length)}();return r}},{key:"getIconFromCombinations",value:function(e,t){if(e&&e.configuration.combinations&&t&&0<Object.keys(t).length&&e.behavioralAppearance.combinations&&0<Object.keys(e.behavioralAppearance.combinations).length){if(""===(t=this.doFindComboMatch(e,t))||!e.behavioralAppearance.combinations[t].labelIcon)return"";if(e.behavioralAppearance.combinations&&e.behavioralAppearance.combinations[t]&&e.behavioralAppearance.combinations[t].labelIcon)return e.behavioralAppearance.combinations[t].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(e,t){if(t.spaceTypes&&t.spaceTypes[e])return t.spaceTypes[e]}},{key:"findCategory",value:function(e){if(this.spaceRules[e])return this.spaceRules[e]}},{key:"setSpaceRules",value:function(e){this.spaceRules=e}},{key:"getSpaceIcon",value:function(e,t,r){var n,i="";return(t=this.findCategory(t))&&(e=this.findSpace(e,t))&&(n="",(n=r?this.getIconFromCombinations(e,r):n)&&""!==n?i=n:e.behavioralAppearance.default.labelIcon?i=e.behavioralAppearance.default.labelIcon.referenceUri:t.properties.behavioralAppearance.default.labelIcon&&(i=t.properties.behavioralAppearance.default.labelIcon.referenceUri)),i}}]),e}(),ot=function(){function e(){s(this,e),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return c(e,null,[{key:"getNumberFromAlphaNumeric",value:function(e){try{var t=e.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(t,10)}catch(e){return null}}},{key:"extractNumFromSting",value:function(e){try{var t=e.replace(/[^0-9]/g,"");return parseInt(t,10)}catch(t){return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(e)}}},{key:"getVenueId",value:function(e){var t;return"number"!=typeof e?(t=e.substr(e.length-6),parseInt(t,10)):e}},{key:"getStringFormatIdentifier",value:function(e){return"number"==typeof e||e.length<13?"indoormap-00000000-0000-4000-a000-".concat(e.toString().padStart(12,"0")):e}},{key:"setSite",value:function(e,t){var r=this.getName(e);return(e={id:this.getStringFormatIdentifier(t),location:e.referencePoint,properties:e.properties,geometry:e.geometry,map_version:e.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(t),obj_type:"CommunityMap"}).properties.name=r,e.properties.display_name=r,e}},{key:"setEntrance",value:function(e){var t=this.themeRule.entranceRules.default.labelIcon.referenceUri,r=this.extractNumFromSting(e.id),n=this.getName(e),i=e.properties;return i.icon=!0,i.svg=this.svgList[t.toLowerCase()],i.name=n||"entrance",i.display_name=n||"entrance",i.level={id:e.properties.level.id},{id:e.id,levelId:e.properties.level.id,momType:ge,geometry:e.geometry,location:e.geometry,properties:i,identifier:r,label_area:[e.referencePoint.coordinates[0],e.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(e){var t=this.extractNumFromSting(e.id),r=this.getName(e),n=e.properties;return n.is_root=0===e.properties.drawOrder,n.display_name=r,n.map_type=e.properties.structureType,n.name=r,{id:e.id,obj_type:"Drawing",identifier:t,properties:n}}},{key:"getNameByPriority",value:function(e,t){for(var r,n="",i=0;i<e.length;i++){var o=e[i];if(("OFFICIAL"===(r=o).nameType&&r.languageCode&&r.languageCode===this.defaultLang||"OFFICIAL"===r.nameType)&&(t&&t===o.nameType||!t)){n=o.name;break}if("ABBREVIATION"===o.nameType&&(t&&t===o.nameType||!t)){n=o.name;break}if("UNCLASSIFIED"===o.nameType&&(t&&t===o.nameType||!t)){n=o.name;break}if(!o.nameType&&o.name){n=o.name;break}}return n}},{key:"getName",value:function(e,t){return e.properties&&e.properties.names?this.getNameByPriority(e.properties.names,t):e.properties.placeProperties&&e.properties.placeProperties&&e.properties.placeProperties.names?this.getNameByPriority(e.properties.placeProperties.names,t):e.properties.locationDetails&&e.properties.locationDetails[0]&&e.properties.locationDetails[0].names?this.getNameByPriority(e.properties.locationDetails[0].names,t):""}},{key:"setLevel",value:function(e){var t=this.extractNumFromSting(e.id),r=e.properties.names,n=e.properties;return n["short name"]=this.getNameByPriority(r,r&&1!==r.length?"ABBREVIATION":""),n.name=this.getNameByPriority(r,r&&1!==r.length?"ABBREVIATION":""),{id:e.id,obj_type:"Level",identifier:t,properties:n}}},{key:"setLevelConnector",value:function(e){var t=this.extractNumFromSting(e.id);return{id:e.id,obj_type:"LevelConnector",properties:e.properties,geometry:e.geometry,identifier:t,location:e.geometry}}},{key:"setOccupant",value:function(e){var t=this.getName(e),r=this.extractNumFromSting(e.id),n=e.properties;return n.occupantName=t,n.email=e.properties.placeProperties&&e.properties.placeProperties.contacts&&e.properties.placeProperties.contacts.find((function(e){return"EMAIL"===e.contactType}))&&e.properties.placeProperties.contacts.find((function(e){return"EMAIL"===e.contactType})).value,n.name=t,n.tags=e.properties.attributes&&e.properties.attributes.tags,{geometry:e.geometry,id:e.id,obj_type:"Geometry",properties:n,identifier:r,spaceIds:e.properties.spaces||[],type:"Feature",momType:de}}},{key:"getIcon",value:function(e){var t=!1,r="";return this.svgList[e]&&(t=!0,r=this.svgList[e]),{icon:t,svg:r}}},{key:"setSpace",value:function(e){var t=it.getSpaceIcon(e.properties.spaceType,e.properties.spaceCategory,e.properties.spaceTypeProperties),r=this.getName(e),n=(t=this.getIcon(t)).icon,i=(t=t.svg,this.extractNumFromSting(e.id)),o=(e.properties.level.id.includes("out"),e.properties.level.id),a=e.properties;a.spaceName=r,a[e.properties.spaceCategory]=e.properties.spaceType,a.spaceType=e.properties.spaceType,a.spaceCategory=e.properties.spaceCategory,a.icon=n,a.svg=t,r={geometry:e.geometry,id:e.id,levelId:o,label_area:[e.referencePoint.coordinates[0],e.referencePoint.coordinates[1],50,50,180],location:e.referencePoint,obj_type:"Geometry",identifier:i,properties:a,momType:ye,type:"Feature"};return e.properties.spaceAddress&&e.properties.spaceAddress.id&&(r.addressId=e.properties.spaceAddress.id),r}},{key:"setSpaceGroups",value:function(e){var t=this.extractNumFromSting(e.id);return{id:e.id,obj_type:"SpaceGroups",properties:e.properties,geometry:e.geometry,location:e.referencePoint,identifier:t}}},{key:"setTopology",value:function(e){var t=this.extractNumFromSting(e.id);return{id:e.id,obj_type:"Topology",properties:e.properties,geometry:e.geometry,identifier:t}}},{key:"setAddress",value:function(e){var t=this.extractNumFromSting(e.id),r=this.getName(e),n=e.properties;return n.addressName=r,n.name=r,{id:e.id,properties:n,obj_type:"Address",identifier:t}}},{key:"manageSvgDimensions",value:function(e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var i,o,a,s=(a=b(n[r],2))[0];"string"==typeof(a=a[1])&&(i=-1!==a.indexOf("<g")&&a.indexOf("<g")||a.indexOf("<p"),o=a.indexOf("</s"),i&&o&&(a=a.substring(i-1,o-1),t[s]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(a,"</svg>")))}return t}},{key:"getSiteBoundingBox",value:function(e){if(e){var t=(e=b(nt.getBoundingBox(e.geometry.type,e.geometry.coordinates),2))[0];e=e[1];if(t)return"".concat(t[0],",").concat(t[1],",").concat(e[0],",").concat(e[1])}return"null, null, null, null"}}]),e}(),at=function(){function e(){s(this,e)}return c(e,null,[{key:"get",value:function(e){return fetch(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{method:"GET"}).then((function(t){return t.ok?t.json():Promise.reject(new Error("Call failed for ".concat(e," : ").concat(t.status," ").concat(t.statusText)))}))}},{key:"getFormattedIndoorMapId",value:function(e){return"number"==typeof e?"indoormap-00000000-0000-4000-a000-".concat(e.toString().padStart(12,"0")):e.includes("indoormap")?e:"indoormap-00000000-0000-4000-a000-".concat(e.padStart(12,"0"))}},{key:"getConfigUrl",value:function(e,t,r){var n=r.apiKey,i=r.url,o=r.token,a=(r=r.hrn,{method:"GET",mode:"cors",cache:"default"});i="".concat(i||Pe,"/").concat(r),r="";return t===fe.SITE&&(r="".concat(i,"/layers/").concat(Ae,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(e),"'")),t===fe.IMAGES&&(r="".concat(i,"/layers/").concat("icons","/features/svg")),t===fe.Theme&&(r="".concat(i,"/layers/").concat("config","/features/indoorMapRules")),o?a.headers={Authorization:"Bearer ".concat(o)}:r=r.concat("".concat(t===fe.SITE?"&":"?","apiKey=").concat(n)),this.get(r,a)}},{key:"getMomData",value:function(e,t){var r=t.apiKey,n=t.url,i=t.token,o=(t=t.hrn,{method:"GET",mode:"cors",cache:"default"});n="".concat(n||Pe,"/").concat(t),t=e&&e.features&&e.features.find((function(e){return e.momType===he})),e=ot.getSiteBoundingBox(t),n="".concat(n,"/layers/").concat(Ae,"/bbox?bbox=").concat(e,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance");return i?o.headers={Authorization:"Bearer ".concat(i)}:n=n.concat("&apiKey=".concat(r)),{mom:this.get(n,o),site:t}}},{key:"getDefaultCollection",value:function(e){e=e.token;var t=(r=Re[Ne.DEFAULT_COLLECTION]).PARAMS,r=r.BASE_URL;r=encodeURI("".concat(r,"?sortBy=").concat(t.CREATED_BY,"&q=").concat(t.COLLECTION));return e?(t={method:"GET",headers:{Authorization:"Bearer ".concat(e)}},this.get(r,t)):Promise.reject(new Error("Please provide valid token"))}},{key:"getProjectAccountDetails",value:function(e){e=e.token;var t=Re[Ne.ACCOUNT_API].BASE_URL;return e?(e={method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(e)}},this.get(t,e)):Promise.reject(new Error("Please provide valid token"))}},{key:"fetchIndoorMapList",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.hrn,r=e.url,n=(i=Re[Ne.CATALOG_LAYER]).PARAMS,i=i.COLLECTION_LAYER;r=r||Pe;return t?(r=encodeURI("".concat(r,"/").concat(t,"/").concat(i,"?").concat(n.FEATURE_TYPE.KEY,"=").concat(n.FEATURE_TYPE.VALUE)),i=(t=this.createBaseUrl(r,Me.GET,{},e)).URL,n=t.options,this.get(i,n)):Promise.reject(new Error("Please provide valid hrn"))}},{key:"createBaseUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Me.GET,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=(o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).token,o=o.apiKey,a=e;t={method:t,mode:"cors"};return i?t.headers=n({Authorization:"Bearer ".concat(i)},r):a=e.concat("&apiKey=".concat(o)),{URL:a,options:t}}}]),e}(),st=function(){function e(){s(this,e)}return c(e,null,[{key:"isPointOnGeoJSONLineString",value:function(e,t){var r=!1;if(t&&1<t.length)for(var n,i,o=1;o<t.length;o+=1)if(n=t[o-1],i=t[o],nt.isPointOnLineSegment(e,n,i)){r=!0;break}return r}},{key:"isPointOnGeoJSONMultiLineString",value:function(t,r){for(var n=!1,i=0;i<r.length;i+=1)if(e.isPointOnGeoJSONLineString(t,r[i])){n=!0;break}return n}},{key:"isPointInsideGeoJSONPolygon",value:function(e,t){var r=!1;if(r=!!nt.isPointInPolygon(e,t[0])||r)for(var n=1;n<t.length;n+=1)if(nt.isPointInPolygon(e,t[n])){r=!1;break}return r}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(t,r){for(var n=r.length,i=0;i<n;i+=1)if(e.isPointInsideGeoJSONPolygon(t,r[i]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(e,t){for(var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=[],i=t.filter((function(t){return nt.isPointInBoundingBox(e,t.getBoundingBox())})),o=0;o<i.length;o+=1){var a=i[o];if(a.isPointInsideGeometry(e,!0)&&(n.push(a),!r))break}return n.sort((function(e,t){return t.getZIndex()-e.getZIndex()}))}}]),e}(),lt=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;s(this,e),this.id=t.id,this.properties=t.properties||{},this.labelArea=t.label_area||[],this.geometry=t.geometry||{},this.location=t.location||{},this.address=t.address||{},this.level=r,this.zIndex=n,this.spaceId=t.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=t}return c(e,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var e=this.getType(),t=this.getCoordinates(),r=[];switch(e){case we:r=[t,t];break;case Se:case xe:r=t;break;case ke:case Ee:r=t.reduce((function(e,t){return e.concat(t)}),[]);break;case Te:r=t.reduce((function(e,t){return e.concat(t)}),[]).reduce((function(e,t){return e.concat(t)}),[])}return nt.getBoundingBoxVertices(r)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=!1;switch(this.getType()){case we:t=this.getLabelArea()&&nt.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),n=nt.isPointInPolygon(e,t);break;case Se:break;case xe:n=r&&st.isPointOnGeoJSONLineString(e,this.getCoordinates());break;case ke:n=r&&st.isPointOnGeoJSONMultiLineString(e,this.getCoordinates());break;case Ee:n=st.isPointInsideGeoJSONPolygon(e,this.getCoordinates());break;case Te:n=st.isPointInsideGeoJSONMultiPolygon(e,this.getCoordinates())}return n}},{key:"highlight",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=e,this.state_.highlightedStyle=e?t:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return n({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),e}(),ct=function(){function e(t,r){var n=this;s(this,e),this.id=t&&t.id,this.properties=t&&t.properties,this.zIndexCount=0,this.geometries=t&&t.features&&Object.values(t.features).reduce((function(e,t){return e[[t.id]]=new lt(t,n,t.properties.drawOrder),e}),{}),this.drawing=r,this.levelData=t}return c(e,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map((function(e){return e.toJSON()}))}},{key:"getGeometryById",value:function(e){return this.geometries[e]}},{key:"getGeometries",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.geometries&&Object.values(this.geometries).sort((function(e,t){return t.getZIndex()-e.getZIndex()})):this.geometries&&Object.values(this.geometries).sort((function(e,t){return e.getZIndex()-t.getZIndex()}))}},{key:"getGeometriesByAddress",value:function(e){return Object.values(this.geometries).filter((function(t){return t.address&&t.address.properties&&t.address.properties.name&&t.address.properties.name===e}))}},{key:"isMain",value:function(){return Boolean(this.properties.isMain)}}]),e}(),ut=function(){function e(t){var r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=3<arguments.length?arguments[3]:void 0;s(this,e),this.venueModel=o,this.levels=i.map((function(e){return new ct(e,r)})),this.structure=t,this.id=t&&t.id,this.properties=n}return c(e,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var e=(t=b(nt.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2))[0],t=t[1];if(e)return[t[1],e[0],e[1],t[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(e){return this.getGeometries().find((function(t){return t.getId()===e||t.getIdentifier()===e}))}},{key:"getGeometries",value:function(){return this.levels.flatMap((function(e){return e.getGeometries()}))}},{key:"getLevelById",value:function(e){return this.levels.find((function(t){return t.getId()===e||t.getIdentifier()===e}))}},{key:"getLevelByZIndex",value:function(e){return this.levels.find((function(t){return t.getZIndex()===e}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find((function(e){return e.isMain()}))}},{key:"getVenueModel",value:function(){return this.venueModel}}]),e}(),pt=Oe.STANDARD,ft=function(){function e(t){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new et;s(this,e),this.metaInformation_=i,this.momStructure=t,this.id=t&&t.site&&t.site.id,this.location=t&&t.site&&t.site.location||{},this.properties=t&&t.site&&n({},t.site.properties),this.drawings=t&&t.structure&&Object.values(t.structure).map((function(e){var n=t.getStructureWiseGeometry(e.id);return new ut(e,e.properties,Object.values(n),r)}))}return c(e,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||pt}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var e=(t=b(nt.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2))[0],t=t[1];if(e)return[t[1],e[0],e[1],t[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(e){return this.getGeometries().find((function(t){return t.getId()===e||t.getIdentifier()===e}))}},{key:"getGeometries",value:function(){return this.getLevels().sort((function(e,t){return e.getZIndex()-t.getZIndex()})).flatMap((function(e){return e.getGeometries()}))}},{key:"getGeometriesByLonLat",value:function(e){var t,r=this,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0===(t=(t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).map((function(e){return r.getLevelById(e)}))).length&&(t=this.drawings.filter((function(t){return t=t.getBoundingBox(),nt.isPointInBoundingBox(e,t)})).flatMap((function(e){return e.getLevels()}))),st.getGeometriesByLonLat(e,t.flatMap((function(e){return e.getGeometries(!0)})),n)}},{key:"getDrawingById",value:function(e){return this.drawings.find((function(t){return t.getId()===e||t.getIdentifier()===e}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find((function(e){return e.isRoot()}))}},{key:"getLevelById",value:function(e){return this.getLevels().find((function(t){return t.getId()===e||t.getIdentifier()===e}))}},{key:"getLevelsByZIndex",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.getLevels().filter((function(t){return Number(t.getZIndex())===Number(e)}))}},{key:"getLevels",value:function(){return this.drawings.flatMap((function(e){return e.getLevels()}))}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce((function(e,t){var r=t.getZIndex();return e[r]||(e[r]=[]),e[r].push(t),e}),{})}},{key:"getOccupant",value:function(){var e=this.momStructure.occupant;return Object.values(e)}}]),e}(),ht=function(){function e(t){s(this,e),this.theme=t&&t.theme,this.level=t&&t.level,this.site=t&&t.site,this.spaces=t&&t.spaces,this.address=t&&t.address,this.levelConnector=t&&t.levelConnector,this.topology=t&&t.topology,this.entrance=t&&t.entrance,this.occupant=t&&t.occupant,this.structure=t&&t.structure,this.spaceGroups=t&&t.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=t&&t.levelStructureMapping,this.outdoorLevelMapping=t&&t.outdoorLevelMapping||{},this.labelTextPreference=t&&t.labelTextPreference||null}return c(e,[{key:"setSpaceWithLevel",value:function(){var e=this;this.spaces&&Object.values(this.spaces).forEach((function(t){var r="",i=(r=((i=(t.addressId&&(r=e.address&&e.address[t.addressId]&&e.address[t.addressId].properties.addressName),t.properties)).addressName=r,e.getLabelAsPerPreference(n(n({},t),{},{properties:i}))),(r=((i=t.properties).name=r,i.display_name=r,t.properties.icon&&(i.name=t.id,i.display_name=t.id),t)).properties=i,r.address=e.address[t.addressId],(e.spaces[t.id]=t).levelId);e.outdoorLevelMapping[i]&&(i=e.outdoorLevelMapping[i]),e.levelWiseGeometry[i]||(e.levelWiseGeometry[i]={}),e.levelWiseGeometry[i][r.id]=r}))}},{key:"setOccupantWithLevel",value:function(){var e=this;this.occupant&&Object.values(this.occupant).forEach((function(t){var r,n;t.spaceIds&&t.properties.occupantName&&(r=[],n=[],t.spaceIds.forEach((function(i){function o(i){var o=!1,a=(o=(e.labelTextPreference&&e.labelTextPreference.length&&(o=-1!==e.labelTextPreference.indexOf("OCCUPANT_NAMES")),null===e.labelTextPreference||o),i),s=i.properties;s.name=i.properties.icon||!o?i.properties.name:t.properties.occupantName,s.display_name=i.properties.icon||!o?i.properties.display_name:t.properties.occupantName,s.address=i.address,s.occupantName=t.properties.occupantName,o=i.levelId;e.outdoorLevelMapping[o]&&(o=e.outdoorLevelMapping[o]),e.levelWiseGeometry[o]||(e.levelWiseGeometry[o]={}),e.levelWiseGeometry[o][i.id]=a,r.push(a),n.push(i.id)}var a=i.id,s=(a=e.spaces[a],null);e.spaceGroups&&Object.values(e.spaceGroups).forEach((function(e){e.properties.spaceGroups&&e.properties.spaceGroups&&e.properties.spaceGroups.forEach((function(e){e.mainSpace&&e.mainSpace.id===i.id&&(s=e.spaces.map((function(e){return e.id})))}))})),s&&0<s.length&&s.forEach((function(t){o(e.spaces[t])})),a&&o(a)})),e.occupant[t.id]=t,e.occupant[t.id].space=r,e.occupant[t.id].spaceIds=n)}))}},{key:"setEntrance",value:function(){var e=this;this.entrance&&Object.values(this.entrance).forEach((function(t){var r=t.properties.level.id;e.levelWiseGeometry[r]||(e.levelWiseGeometry[t.properties.level.id]={}),e.outdoorLevelMapping[r]&&(r=e.outdoorLevelMapping[r]),e.levelWiseGeometry[r][t.id]=t}))}},{key:"setLevelWiseGeometry",value:function(){var e=this;this.level&&Object.keys(this.level).forEach((function(t){e.levelWiseGeometry[t]={}})),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(e){for(var t={},r=0,n=Object.entries(this.levelWiseGeometry);r<n.length;r++){var i=(o=b(n[r],2))[0],o=o[1];e===this.levelStructureMapping[i]&&(t[i]=this.level[i],t[i].features=o)}return t}},{key:"getLabelAsPerPreference",value:function(e){var t=(e=e.properties).spaceType,r=e.occupantName,n=e.spaceName,i=e.addressName,o=(e=e.spaceCategory,u(s={},"OCCUPANT_NAMES",r),u(s,"SPACE_NAME",n),u(s,be,t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""),u(s,_e,e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""),u(s,"INTERNAL_ADDRESS_SHORT",i),u(s,"INTERNAL_ADDRESS",i),u(s,"INTERNAL_ADDRESS_LONG",i),s),a=(r=this.theme.spaceRules,"");if("NONE"===(n=e&&t&&r[e]&&r[e].spaceTypes&&r[e].spaceTypes[t].behavioralAppearance.default.labelType)){if(!this.labelTextPreference)return"";o[be]=""}if(("NONE"===(i=e&&t&&r[e]&&r[e].properties&&r[e].properties.behavioralAppearance&&r[e].properties.behavioralAppearance.default&&r[e].properties.behavioralAppearance.default.labelType)||void 0===i)&&void 0===n){if(!this.labelTextPreference)return"";o[be]="",o[_e]=""}var s=e&&t&&r[e]&&r[e].properties&&r[e].properties.behavioralAppearance&&r[e].properties.behavioralAppearance.default&&r[e].properties.behavioralAppearance.default.labelTextPreference,l=s&&this.labelTextPreference?this.labelTextPreference:s;if(l)for(var c=0;c<l.length;c++)if(o[l[c]]){a=o[l[c]];break}return a}}]),e}(),dt=function(){function e(t){var r=t.apiKey,n=t.baseUrl,i=t.token;t=t.hrn;s(this,e),this.hostOptions_={apiKey:r,url:n,token:i,hrn:t},this.momData=[],this.theme={},this.loadOptions={}}var t,r;return c(e,[{key:"setHostOptions",value:function(e){0!==Object.keys(e).length&&(this.hostOptions_=n(n({},this.hostOptions_),e))}},{key:"getToken",value:function(){return this.hostOptions_.token}},{key:"getHrn",value:function(){return this.hostOptions_.hrn}},{key:"load",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.loadOptions=n(n(n({},je),r),{},{venueId:e}),this.hostOptions_.mapData=r.mapData,this.hostOptions_.themeRule=r.themeRule,this.hostOptions_.svgList=r.svgList,this.hostOptions_.labelTextPreference=r.labelTextPreferenceOverride,this.getHrn()?this.getVenueModalInstance():this.getToken()?this.getDefaultCollectionWithToken().then((function(){return t.getVenueModalInstance()})).catch((function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))})):Promise.reject(new Error("In order to load indoor map, Please provide either hrn or token"))}},{key:"getVenueModalInstance",value:function(){var e=this;return Promise.resolve().then((function(){return e.loadOptions.isMetaEnabled?e.getMeta_(e.loadOptions.isIconsEnabled).catch((function(e){return console.warn(e),Promise.resolve()})):Promise.reject()})).then((function(t){return e.getVenue_(t)})).then((function(e){return e})).catch((function(e){console.debug("Captured event VENUE_ERROR_STATE",e)}))}},{key:"createMomStructure",value:function(){var e=this,t={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach((function(r){var n="indoormap-00000000-0000-4000-a000-".concat(e.loadOptions.venueId.toString().padStart(12,"0")),i=r.id;r.momType!==me&&!e.hostOptions_.mapData&&r.properties.indoorMapId!=e.loadOptions.venueId&&r.properties.indoorMapId!==n||(r.momType===he?t.site=ot.setSite(r,e.loadOptions.venueId):"indoor.Structure"===r.momType?t.structure[i]=ot.setStructure(r):r.momType!==ve||r.properties.isOutdoor&&(!r.properties.isOutdoor||r.properties.parentIndoorLevel)?r.momType===ve&&r.properties.isOutdoor&&r.properties.parentIndoorLevel?t.outdoorLevelMapping[r.id]=r.properties.parentIndoorLevel.id:r.momType===ge?t.entrance[i]=ot.setEntrance(r):r.momType===de?t.occupant[i]=ot.setOccupant(r):r.momType===ye?t.spaces[i]=ot.setSpace(r):"indoor.SpaceGroups"===r.momType?t.spaceGroups[i]=ot.setSpaceGroups(r):r.momType===me&&(t.address[i]=ot.setAddress(r)):(t.level[i]=ot.setLevel(r),t.levelStructureMapping[i]=r.properties.structure.id))})),t.theme=this.theme,t.labelTextPreference=this.hostOptions_.labelTextPreference,new ht(t)}},{key:"getVenue_",value:function(e){this.momData=e.getMomData();var t=this.createMomStructure();return t.setLevelWiseGeometry(),new ft(t,e)}},{key:"setConfigData",value:function(e){var t=e.themeRule,r=e.svgList;e=e.defaultLang;it.setSpaceRules(t.spaceRules),ot.svgList=r,ot.themeRule=t,ot.defaultLang=e,this.theme=t}},{key:"getMeta_",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],r=new et,n=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,fe.SITE),i=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,fe.Theme),o=[];return t&&(o=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,fe.IMAGES)),new Promise((function(a){Promise.all([n,i,o]).then((function(n){var i=(n=b(n,3))[0],o=n[1],s=n[2],l=e.hostOptions_.mapData?{mom:new Promise((function(t){return t(e.hostOptions_.mapData)})),site:e.hostOptions_.mapData.features.find((function(e){return e.momType===he}))}:at.getMomData(i,e.hostOptions_);l.mom.then((function(n){var i=o.properties;r.imageCache=t?ot.manageSvgDimensions(s.properties):[],e.setConfigData({themeRule:i,svgList:r.imageCache,defaultLang:l&&l.site&&l.site.properties.defaultLanguageCode}),r.releaseSettings_={displayOptions:{display:i.entranceRules.default.displayName||Oe.STANDARD},mom:n.features},r.theme=new Qe(i,r),a(r)}))}))}))}},{key:"getMetaConfig_",value:function(e,t){return at.getConfigUrl(e,t,this.hostOptions_)}},{key:"fetchCollections",value:function(){return at.getDefaultCollection(this.hostOptions_)}},{key:"fetchUserProjects",value:function(){return at.getProjectAccountDetails(this.hostOptions_)}},{key:"getDefaultCollectionWithToken",value:(t=i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.fetchCollections(),this.fetchUserProjects()]).then((function(e){var r=(e=b(e,2))[0];e=e[1];return(r=t.getHrnFromDefaultCollection(r,e)).hrn?(e={hrn:r.hrn},t.setHostOptions(e),Promise.resolve()):Promise.reject()})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(e){a(o,n,i,s,l,"next",e)}function l(e){a(o,n,i,s,l,"throw",e)}s(void 0)}))},function(){return r.apply(this,arguments)})},{key:"getHrnFromDefaultCollection",value:function(e,t){var r;e=e.results.items;return Array.isArray(e)&&e.length?(r=this.getProjectRealm(t),e.find((function(e){return e.hrn.includes(r)}))):Promise.reject(new Error("Error while accessing default collection"))}},{key:"getProjectRealm",value:function(e){return Array.isArray(e.items)&&e.items.length&&e.items[0].id.includes("indoor-")?(e=e.items[0].hrn,this.getRealmNameFromHrn(e)):""}},{key:"getRealmNameFromHrn",value:function(e){return e?(e=e.split(":")).length&&e[4]:""}},{key:"getSupportedMapList",value:function(){var e=this,t=(r=this.hostOptions_).hrn,r=r.token;return t?this.fetchMapInfoList():r?this.getDefaultCollectionWithToken().then((function(){return e.fetchMapInfoList()})).catch((function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))})):Promise.reject(new Error("In order to load map list, Please provide either hrn or token"))}},{key:"fetchMapInfoList",value:function(){var e=this;return at.fetchIndoorMapList(this.hostOptions_).then((function(t){return 0<(t=t.features).length?t.map((function(t){var r=(t=t.properties).placeProperties,n=(n=(t=t.indoorMapId).split("-").pop()).substring(n.length-5);return{mapIdentifier:t,mapName:e.getMapName(r.names).name,mapId:n}})):[]})).catch((function(e){Promise.reject(new Error("".concat(e,": Error while fetching map list")))}))}},{key:"getMapName",value:function(e){return Array.isArray(e)&&0<e.length?e.find((function(e){return"OFFICIAL"===e.nameType})):{}}}]),e}(),yt=["origin","destination"],mt=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(s(this,e),!t.apiKey&&!t.token)throw new Error("API key or Token is missing");this.config_=n({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},t)}return c(e,[{key:"calculateRoute",value:function(e){var t=void 0===(t=e.origin)?{}:t,r=void 0===(r=e.destination)?{}:r;e=function(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}(e,yt);if(!t.coordinates||!r.coordinates)throw new Error("Waypoint coordinates are missing");function n(e){var t=e.coordinates,r=e.venueId;e=e.levelId,t=t.join(",");return r&&e?t.concat(";indoorMapId=",r,";levelId=",e):t}var i=new URL("".concat(this.config_.baseUrl,"/v1/routes")),a=new URLSearchParams({origin:n(t),destination:n(r),apiKey:this.config_.apiKey});return Object.entries(e).forEach((function(e){var t=(e=b(e,2))[0];e=e[1];a.append(t,"object"===o(e)?JSON.stringify(e):e)})),i.search=a,fetch(i,{headers:{"X-Api-Key":this.config_.apiKey}}).then((function(e){return e.json()}))}}]),e}(),vt={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},gt=((Nt=(Object.freeze((u(Ce={},vt.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),u(Ce,vt.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),u(Ce,vt.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),u(Ce,vt.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),u(Ce,vt.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),u(Ce,vt.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),u(Ce,vt.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),u(Ce,vt.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),u(Ce,vt.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),Ce)),new De)).EVENT_NAME=vt,Nt.on("newListener",(function(e){vt[e]||console.warn("subscribing for un-registered/documented event")})),function(){p(t,H.map.Feature);var e=v(t);function t(r){var n;if(s(this,t),n=e.call(this),r instanceof ft)return n.venueModel=r,n.search_=new pe(r),n.status_={activeDrawingId:r.getRootDrawing().getIdentifier(),activeLevelIndex:r.getRootDrawing().getMainLevel().getZIndex()},n.mapObjectStore_=n.getDefaultMapObjectsStore_(),n.drawings=r.getDrawings().map((function(e){return(e=new S(e)).setParentEventTarget(m(n)),e})),n.levels=r.getLevels().map((function(e){var t=new k(e);return t.setParentEventTarget(n.drawings.find((function(e){return e.getIdentifier()===t.getData().getDrawing().getIdentifier()}))),t})),n.geometries=r.getGeometries().map((function(e){var t=new E(e);return t.setParentEventTarget(n.levels.find((function(e){return e.getIdentifier()===t.getData().getLevel().getIdentifier()}))),t})),n.mutualExclusiveHighlight_=!1,n;throw new Error("It is mandatory to provide valid instance of venueModel")}return c(t,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return y(H.geo.Rect,_(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var e=(t=b(this.venueModel.getCenter(),2))[0],t=t[1];return new H.geo.Point(t,e)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(e){return this.drawings.find((function(t){return t.getIdentifier()===e}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(e){return this.levels.find((function(t){return t.getIdentifier()===e}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(e){return this.getGeometries().find((function(t){return t.getIdentifier()===e}))}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var e=this;return this.getData().getDisplaySettings()===Oe.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map((function(t){return e.getLevel(t.getIdentifier())})):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map((function(t){return e.getLevel(t.getIdentifier())}))}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(e){if(this.status_.activeDrawingId!==e){var r=this.venueModel.getDrawingById(e);if(!r)throw new Error("Drawing ".concat(e," was not found"));var n=this.status_.activeDrawingId;this.status_.activeDrawingId=r.id,this.setActiveLevelIndex(r.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(t.EVENTS.DRAWING_CHANGE,e,n))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(e){var r;this.venueModel.getLevelsByZIndex(e)&&(r=this.status_.activeLevelIndex,this.status_.activeLevelIndex=e,this.dispatchEvent(new H.util.ChangeEvent(t.EVENTS.LEVEL_CHANGE,e,r)))}},{key:"isActive",value:function(){var e=this.getParentEventTarget();return!!e&&this===e.activeVenue}},{key:"getHighlightedGeometries",value:function(){var e=this;return this.venueModel.getGeometries().filter((function(e){return e.isHighlighted()})).map((function(t){return e.getGeometry(t.getIdentifier())}))}},{key:"setHighlightedGeometries",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=(i=n(n({},te),i)).fillColor,s=i.outlineColor,l=i.outlineWidth;this.mutualExclusiveHighlight_=!!o,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach((function(e){e.getData().highlight(!1)})),r.forEach((function(t){t.getData().highlight(e,{m:a,o:s,w:l})})),this.dispatchEvent(t.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveLevelIndex(),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[e][t.getIdentifier()]}},{key:"setMapObjects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveLevelIndex(),r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[t]&&this.mapObjectStore_[t][r.getIdentifier()]&&(this.mapObjectStore_[t][r.getIdentifier()]=_(e)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var e=this;return this.search_.find(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").flatMap((function(t){return t.geometries.map((function(t){return e.getGeometry(t.id)}))}))}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach((function(e){Object.values(e).forEach((function(e){return e.forEach((function(e){return e.setVisibility(!1)}))}))})),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach((function(e){return e.setVisibility(!0)}))}},{key:"getDefaultMapObjectsStore_",value:function(){var e=this,t=this.getData().getDisplaySettings()===Oe.FLATTEN;return this.venueModel.getLevels().reduce((function(r,i){var o=i.getZIndex();return(r=n({},r))[o]||(r[o]={}),r[o][i.getDrawing().getIdentifier()]=[],t&&(r[o][e.venueModel.getRootDrawing().getIdentifier()]=[]),r}),{})}}]),t}()),bt=(gt.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function e(){s(this,e)}return c(e,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap((function(e){return e.getData().getGeometries()})).filter((function(e){return e.isIcon()&&e.getIcon()})).map((function(e){var t=(r=b(e.getLabelArea(),2))[0],r=r[1],n=e.getLevel(),i=e.getIcon(),o=e.properties.spaceType||e.properties.spaceCategory||e.getDisplayName();return{type:"Feature",properties:{id:e.getIdentifier(),geometryId:e.getIdentifier(),levelId:n.getIdentifier(),name:o,venueId:n.getDrawing().getVenueModel().getIdentifier(),url:i?"data:image/svg+xml;utf8,".concat(encodeURIComponent(i)):""},geometry:{type:J.POINT,coordinates:[t,r]}}}))}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap((function(e){return e.getData().getGeometries()})).filter((function(e){return e.getDisplayName()&&!e.isIcon()})).map((function(e){var t=(r=b(e.getLabelArea(),2))[0],r=r[1],n=(i=e.getLabelStyle()).fill,i=i.zmin,o=e.getLevel();return{type:"Feature",properties:{id:e.getIdentifier(),geometryId:e.getIdentifier(),levelId:o.getIdentifier(),venueId:o.getDrawing().getVenueModel().getIdentifier(),name:e.getDisplayName(),minZoom:i||15,textFillColor:n.toLowerCase()},geometry:{type:J.POINT,coordinates:[t,r]}}}))}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap((function(e){return e.getData().getGeometries()})).filter((function(e){return e.getType()!==J.POINT})).map((function(e){var t=(i=e.getHighlightedStyle()||{}).m,r=i.o,i=i.w,o=(s=n({},e.getStyle())).m,a=s.o,s=s.w,l=(u=Q).fillColor,c=u.outlineColor,u=u.outlineWidth,p=e.getLevel();return{type:"Feature",properties:{id:e.getIdentifier(),fillColor:(t||o||l).toLowerCase(),geometryId:e.getIdentifier(),levelId:p.getIdentifier(),venueId:p.getDrawing().getVenueModel().getIdentifier(),outlineColor:(r||a||c).toLowerCase(),outlineWidth:Number(((i||s||u)/3).toFixed(2)),zIndex:e.getZIndex()},geometry:{type:e.getType(),coordinates:e.getCoordinates()}}}))}}},{key:"getFootprintLayer",value:function(e){return{type:"FeatureCollection",features:e.flatMap((function(e){var t=e.getData().getRootDrawing().getMainLevel().getIdentifier(),r=e.getLevel(t).getData().getGeometries().filter((function(e){return e.getType()===J.POLYGON}));return[{type:"Feature",properties:{isFootprint:!0,levelId:t,venueId:e.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:r.map((function(e){return e.getCoordinates()}))}},{type:"Feature",properties:{isFootprint:!0,levelId:t,venueId:e.getIdentifier(),zIndex:2,venueName:e.getName()},geometry:{type:"Point",coordinates:e.getCenter().toGeoJSON().coordinates.slice(0,2)}}]}))}}}]),e}()),_t=function(){function e(){s(this,e)}return c(e,null,[{key:"getStyle",value:function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t={styles:[{layer:re.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:re.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:re.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:re.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:re.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:re.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:ee,text:["get","name"],priority:60},{layer:re.ICON,minZoomLevel:16,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){var r="texture"+e.properties.name;t.images[r]||(t.images[r]={url:e.properties.url,preload:!0},t.imageTextures.push({name:r,image:r}))})),e.forEach((function(e){var r,n=(o=e.getData().getHighlightedStyle()).m,i=o.o,o=o.w;(r=t.styles).push.apply(r,[{layer:re.VECTOR,when:["==",["get","id"],e.id],technique:"fill",color:n,renderOrder:["get","zIndex"]},{layer:re.VECTOR,when:["==",["get","id"],e.id],technique:"solid-line",color:i,lineWidth:o,renderOrder:["get","zIndex"]}])})),new H.map.render.harp.Style(t)}}]),e}(),wt=function(){function e(){s(this,e)}return c(e,null,[{key:"getIconsTextures",value:function(){var e={},t={},r=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var r=t.properties.name;return e[r]||(e[r]=[]),e[r].push(t),e}),{});return Object.keys(r).forEach((function(n){var i="texture".concat(n),o="sprite".concat(n),a=r[n][0].properties.url;e[i]={url:a,sprites:u({},o,[0,0,50,50])},r[n].forEach((function(e){e=e.properties,t["icon".concat(e.name)]={filter:{name:e.name,$zoom:{min:16}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:i,sprite:o}}}}))})),{textures:e,iconLayers:t}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:re.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var e,t,r,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i={};return n.length&&(e=(r=n[0].getData().getHighlightedStyle()).m,t=r.o,r=r.w,i={filter:{id:n.map((function(e){return e.id}))},draw:{polygons:{interactive:!0,color:e},lines:{color:t,width:r}}}),{data:{source:"venues",layer:re.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:i}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:re.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:ee},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(e){return n({data:{source:"venues",layer:re.ICON}},e)}},{key:"getStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=(t=e.getIconsTextures(t)).textures;t=t.iconLayers,r={venue_footprints:e.getFootprintLayer(),venue_geometries:e.getGeometryLayer(r),venue_labels:e.getTextLayer(),venue_icons:e.getIconLayer(t)},t=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:r,textures:n});return new H.map.render.webgl.Style(t)}}]),e}(),xt={type:"FeatureCollection",features:[]},Et={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},St=(Ce=function(){p(t,H.map.provider.RemoteTileProvider);var e=v(t);function t(r){return s(this,t),(r=e.call(this,r)).venues=[],r.activeVenue=null,r.dataLayers_={},r.tileIndexes_={},r.addEventListener(gt.EVENTS.ACTIVE_VENUE_CHANGE,r.activeVenueChangeHandler_,void 0,m(r)),r}return c(t,[{key:"setStyle",value:function(e){return this.setStyleInternal(e)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(e,t){var r=e.properties;return this.activeVenue&&r.venueId===this.activeVenue.getIdentifier()?t!==re.FOOTPRINT&&this.activeVenue.getActiveLevels().some((function(e){return e.id===r.levelId})):!0===r.isFootprint&&t===re.FOOTPRINT}},{key:"requestInternal",value:function(e,t,r,n){function i(n){for(var i=0;i<n.length;i+=1)n[i]=n[i].map((function(n){return Z(n,r,e,t,Et.extent)}))}var o=this,a={};return Object.keys(this.tileIndexes_).forEach((function(n){var s=o.tileIndexes_[n].getTile(r,e,t);a[n]=s?function(e){var t=[],r=e&&e.features;if(r)for(var n=0,i=r.length;n<i;n+=1){var o=r[n],a=o.type,s=void 0,l=!1;switch(a){case ie:s={type:J.MULTI_POINT,coordinates:o.geometry.map((function(e){return e.slice()}))};break;case oe:case ae:s={type:J.MULTI_LINESTRING,coordinates:o.geometry.map((function(e){return e.map((function(e){return e.slice()}))}))},a===ae&&null==(s=function(e){for(var t,r=[],n=[],i=0,o=e.coordinates.length;i<o;i+=1){var a=e.coordinates[i],s=se(a);null!==s&&(s===(t=t||s)&&n.length&&(r.push(n),n=[]),n.push(a))}return 0<n.length&&r.push(n),1===r.length?(e.type=J.POLYGON,e.coordinates=r[0]):1<r.length?(e.type=J.MULTI_POLYGON,e.coordinates=r):e=null,e}(s))&&(l=!0);break;default:l=!0}l||t.push({geometry:s,id:o.id,properties:o.tags,type:"Feature"})}return{type:"FeatureCollection",features:t}}(s):xt,a[n].features=a[n].features.filter((function(e){return o.isFeatureVisible_(e,n)}));for(var l=0;l<a[n].features.length;l+=1){var c=a[n].features[l],u=c.geometry.type;if(u===J.POLYGON||u===J.MULTI_LINESTRING)i(c.geometry.coordinates);else if(u===J.MULTI_POLYGON)c.geometry.coordinates.map(i);else for(var p=c.geometry.coordinates,f=0;f<p.length;f+=1)p[f]=Z(p[f],r,e,t,Et.extent)}})),n(a),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(e){return e?this.venues.find((function(t){return t.getIdentifier()===e})):this.activeVenue}},{key:"setActiveVenue",value:function(e){var t=this.activeVenue;this.activeVenue=e,this.dispatchEvent(new H.util.ChangeEvent(gt.EVENTS.ACTIVE_VENUE_CHANGE,e,t)),this.reload()}},{key:"addVenue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof gt))throw new Error("Invalid argument");var r=e.getIdentifier();if(this.getVenue(r))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(r," before adding new"));e.setParentEventTarget(this),this.venues.push(e),t||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];0<t.length&&(t.forEach((function(t){t instanceof gt&&e.addVenue(t,!0)})),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(e){var t;e instanceof gt&&-1<this.venues.indexOf(e)&&(t=e.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===t&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(e),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(e,t,r){var n=e.geometryId;e=e.venueId,e=this.getVenue(e);return n?r(e.getGeometries().find((function(e){return e.id===n}))):e&&r(e),!0}},{key:"addVenueEventListeners_",value:function(e){e&&(e.addEventListener(gt.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),e.addEventListener(gt.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),e.addEventListener(gt.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(e){e&&(e.removeEventListener(gt.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),e.removeEventListener(gt.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),e.removeEventListener(gt.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(e){var t=e.oldValue;e=e.newValue;t&&(this.removeVenueEventListeners_(t),t.updateMapObjectsVisibility_()),e&&(this.addVenueEventListeners_(e),e.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(re),r=re.FOOTPRINT,n=re.ICON,i=re.TEXT,o=re.VECTOR;t.forEach((function(t){switch(t){case o:e.dataLayers_[o]=bt.getGeometryLayer(e.venues);break;case r:e.dataLayers_[r]=bt.getFootprintLayer(e.venues);break;case n:e.dataLayers_[n]=bt.getIconLayer(e.venues);break;case i:e.dataLayers_[i]=bt.getLabelLayer(e.venues);break;default:throw new Error("Unsupported Layer ".concat(t))}}))}},{key:"createTileIndexes_",value:function(){var e=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(re)).forEach((function(t){e.tileIndexes_[t]=new K(e.dataLayers_[t],Et)}))}},{key:"reloadData_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(re);this.createDataLayers_(e),this.createTileIndexes_(e)}},{key:"reloadStyle_",value:function(e){var t=this.dataLayers_[re.ICON]?this.dataLayers_[re.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(wt.getStyle(t,e)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(_t.getStyle(t,e))}},{key:"providesGeoJSON",value:function(){return!0}}]),t}(),new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3})),kt=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),Tt=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),Ot=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),At=function(){function e(t,r){s(this,e),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(t,r)}return c(e,[{key:"createRouteObjects_",value:function(t){for(var r=this,i=void 0===(t=t.sections)?[]:t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ue,a=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(t){var a,s,l=i[t],c=(u=l.departure.place).id,u=u.type,p=H.util.flexiblePolyline.decode(l.polyline).polyline,f=void 0,h=void 0,d=((s=((s=o(t,i,e.ObjectType.SEGMENT_START_MARKER))&&(f=new H.map.Marker(l.departure.place.location,{icon:s})),o(t,i,e.ObjectType.SEGMENT_FINISH_MARKER)))&&(h=new H.map.Marker(l.arrival.place.location,{icon:s})),o(t,i,e.ObjectType.SEGMENT_POLYLINE));"indoor"===u?(s=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=new Map,r=new H.geo.LineString,n=b(e[0],3)[2];return t.set(n,[r]),e.forEach((function(e){e[2]!==n&&(n=e[2],r=new H.geo.LineString,t.has(n)?t.get(n).push(r):t.set(n,[r])),r.pushLatLngAlt.apply(r,_(e))})),t}(p),a=Array.from(s.keys()).reduce((function(e,t){return e[t]||(e[t]=new H.map.Group),e}),{}),d&&s.forEach((function(e,t){e.forEach((function(e){1<e.getPointCount()&&(e=new H.map.Polyline(e,{style:d}),a[t].addObject(e))}))})),f&&a[l.departure.place.location.lvl].addObject(f),h&&a[l.arrival.place.location.lvl].addObject(h),r.indoorMapObjects_[c]=n(n({},r.indoorMapObjects_[c]||{}),a)):(d&&(t=new H.geo.LineString(p.flatMap((function(e){return[e[0],e[1],0]}))),u=new H.map.Polyline(t,{style:d}),r.outdoorMapObjects_.addObject(u)),f&&r.outdoorMapObjects_.addObject(f),h&&r.outdoorMapObjects_.addObject(h))}),s=0;s<i.length;s++)a(s)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),e}(),Pt=(At.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){p(t,H.service.Service);var e=v(t);function t(r){s(this,t),i=e.call(this,t,n(n({},r),{},{baseUrl:void 0}));var i,o={apiKey:r.apikey,baseUrl:r.baseUrl,token:r.token},a={apiKey:o.apiKey,token:o.token},l=(o.apiKey||(o.apiKey=i.getUrl().getQuery().apikey),r.useLegacy||!1);return i.venueService_=new dt(o,l),a.apiKey||(a.apiKey=i.getUrl().getQuery().apikey),r.routingBaseUrl&&(a.baseUrl=r.routingBaseUrl),i.routingService_=new mt(a),i}return c(t,[{key:"loadVenue",value:function(e){return console.warn("Venue service version 1 is no longer supported hence "+e+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(e){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(e)}}]),t}()),Ct=(Pt.CONFIG_KEY="venues",function(){p(t,H.service.Service);var e=v(t);function t(r){s(this,t),i=e.call(this,t,n(n({},r),{},{baseUrl:void 0}));var i,o={apiKey:r.apikey,baseUrl:r.baseUrl,token:r.token,hrn:r.hrn};o.apiKey||(o.apiKey=i.getUrl().getQuery().apikey),r=r.useLegacy||!1;return i.venueService_=new dt(o,r),i}return c(t,[{key:"loadVenue",value:function(e){return this.venueService_.load(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).then((function(e){return new gt(e)}))}},{key:"getMapInfoList",value:function(){return this.venueService_.getSupportedMapList()}}]),t}()),Nt=(Ct.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(e,t){var r=Ct;return 1!==t&&t?t!==ne.v2||e.token||(e.hrn?e.apikey||console.error("Venue Service version 2 requires either apikey or token"):console.error("Token is mandatory when Hrn is not provided in Venue Service version 2")):(console.warn("Venue service version 1 is no longer supported"),r=Pt),this.createService(r,e)},Ct.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},function(){p(t,H.ui.Control);var e=v(t);function t(r){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return s(this,t),(n=e.call(this)).provider_=null,n.levelSelectorUI_=null,n.setAlignment(i&&i.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),n.addClass("venues-ui"),r instanceof gt&&n.setVenue(r),n}return c(t,[{key:"renderInternal",value:function(e,r){g(f(t.prototype),"renderInternal",this).call(this,e,r),this.createLevelSelectorUI_(e),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(e){e instanceof gt&&(this.removeEventListeners_(),this.venue=e,this.provider_=e.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(e){var t=this;e.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new Je(e,null,null,(function(e){return t.venue.setActiveLevelIndex(e)}))}},{key:"update_",value:function(){var e,t;this.levelSelectorUI_&&(e=this.venue.getActiveDrawing().getData(),t=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(e,t),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(gt.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(gt.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(gt.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(gt.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(gt.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(gt.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(e){this.setVenue(e.newValue)}}]),t}()),Rt=function(){p(t,H.ui.Control);var e=v(t);function t(r){var n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return s(this,t),(n=e.call(this)).provider_=null,n.drawingSelectorUI_=null,n.addClass("venues-ui"),n.setAlignment(i&&i.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),r instanceof gt&&n.setVenue(r),n}return c(t,[{key:"renderInternal",value:function(e,r){g(f(t.prototype),"renderInternal",this).call(this,e,r),this.createDrawingSelectorUI_(e),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(e){e instanceof gt&&(this.removeEventListeners_(),this.venue=e,this.provider_=e.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(e.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(e){var t=this;e.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new We(e,null,(function(e){return t.venue.setActiveDrawing(e)}))}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(gt.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(gt.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(gt.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(gt.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(e){this.setVenue(e.newValue)}}]),t}();Rt=Object.freeze({__proto__:null,DrawingControl:Rt,LevelControl:Nt});return t(".venues-ui * {\n  font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, sans-serif;\n  color: #0F1621;\n}\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.venues-ui .arrow--up {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .arrow--down {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n  background-color: #f0f0f0;\n  color: #0F1621;\n}\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .drawings--open {\n  display: block;\n  opacity: 1;\n  animation: fade 1s;\n}\n.venues-ui__drawings .drawings .venues-ui-button {\n  width: auto;\n  padding: 0 10px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n  transform: rotate(90deg);\n  transition: 0.4s;\n}\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__levels .levels {\n  overflow: hidden;\n}\n.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n  border-radius: 0;\n}\n.venues-ui__levels .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n  opacity: 0.5;\n}\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__directory.active {\n  bottom: 10px;\n}\n.venues-ui__directory .directory__list {\n  top: 80px;\n  bottom: 20px;\n  position: absolute;\n  overflow-y: scroll;\n  right: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n.venues-ui__directory .directory__list svg {\n  width: 25px;\n  height: 25px;\n}\n.venues-ui__directory .directory__heading {\n  margin: 8px;\n  font-size: 15px;\n  font-weight: normal;\n  cursor: pointer;\n}\n.venues-ui__directory .directory__input {\n  margin: 10px;\n}\n.venues-ui__directory .directory__input input {\n  width: 100%;\n  padding: 5px 0;\n}\n.venues-ui__directory .directory__trigger {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n  width: 10px;\n  height: 10px;\n}\n.venues-ui__directory .directory__trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__directory .directory__trigger--active .arrow {\n  transform: rotate(-180deg);\n  transition: 0.4s;\n}"),e.Drawing=S,e.Geometry=E,e.Level=k,e.Provider=Ce,e.Route=At,e.Service=Pt,e.Service2=Ct,e.Venue=gt,e.ui=Rt,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}.call(self);const __WEBPACK_DEFAULT_EXPORT__=H},7286:(e,t)=>{"use strict";t.addLeadingZeros=function(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}},9143:(e,t,r)=>{"use strict";Object.defineProperty(t,"defaultLocale",{enumerable:!0,get:function(){return n.enUS}});var n=r(9127)},6150:(e,t)=>{"use strict";t.getDefaultOptions=function(){return r},t.setDefaultOptions=function(e){r=e};let r={}},6807:(e,t,r)=>{"use strict";t.formatters=void 0;var n=r(9303),i=r(8917),o=r(1846),a=r(5529),s=r(1148),l=r(7286),c=r(1365);const u="midnight",p="noon",f="morning",h="afternoon",d="evening",y="night";t.formatters={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return c.lightFormatters.y(e,t)},Y:function(e,t,r,n){const i=(0,s.getWeekYear)(e,n),o=i>0?i:1-i;if("YY"===t){const e=o%100;return(0,l.addLeadingZeros)(e,2)}return"Yo"===t?r.ordinalNumber(o,{unit:"year"}):(0,l.addLeadingZeros)(o,t.length)},R:function(e,t){const r=(0,o.getISOWeekYear)(e);return(0,l.addLeadingZeros)(r,t.length)},u:function(e,t){const r=e.getFullYear();return(0,l.addLeadingZeros)(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return(0,l.addLeadingZeros)(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return(0,l.addLeadingZeros)(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return c.lightFormatters.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return(0,l.addLeadingZeros)(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=(0,a.getWeek)(e,n);return"wo"===t?r.ordinalNumber(i,{unit:"week"}):(0,l.addLeadingZeros)(i,t.length)},I:function(e,t,r){const n=(0,i.getISOWeek)(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):(0,l.addLeadingZeros)(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):c.lightFormatters.d(e,t)},D:function(e,t,r){const i=(0,n.getDayOfYear)(e);return"Do"===t?r.ordinalNumber(i,{unit:"dayOfYear"}):(0,l.addLeadingZeros)(i,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return(0,l.addLeadingZeros)(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),o=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return(0,l.addLeadingZeros)(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=0===n?7:n;switch(t){case"i":return String(i);case"ii":return(0,l.addLeadingZeros)(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(i=12===n?p:0===n?u:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(i=n>=17?d:n>=12?h:n>=4?f:y,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return c.lightFormatters.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):c.lightFormatters.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):(0,l.addLeadingZeros)(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):(0,l.addLeadingZeros)(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):c.lightFormatters.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):c.lightFormatters.s(e,t)},S:function(e,t){return c.lightFormatters.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return v(n);case"XXXX":case"XX":return g(n);default:return g(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return v(n);case"xxxx":case"xx":return g(n);default:return g(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m(n,":");default:return"GMT"+g(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m(n,":");default:return"GMT"+g(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return(0,l.addLeadingZeros)(n,t.length)},T:function(e,t,r){const n=e.getTime();return(0,l.addLeadingZeros)(n,t.length)}};function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),o=n%60;return 0===o?r+String(i):r+String(i)+t+(0,l.addLeadingZeros)(o,2)}function v(e,t){if(e%60===0){return(e>0?"-":"+")+(0,l.addLeadingZeros)(Math.abs(e)/60,2)}return g(e,t)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e);return r+(0,l.addLeadingZeros)(Math.trunc(n/60),2)+t+(0,l.addLeadingZeros)(n%60,2)}},1365:(e,t,r)=>{"use strict";t.lightFormatters=void 0;var n=r(7286);t.lightFormatters={y(e,t){const r=e.getFullYear(),i=r>0?r:1-r;return(0,n.addLeadingZeros)("yy"===t?i%100:i,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):(0,n.addLeadingZeros)(r+1,2)},d:(e,t)=>(0,n.addLeadingZeros)(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>(0,n.addLeadingZeros)(e.getHours()%12||12,t.length),H:(e,t)=>(0,n.addLeadingZeros)(e.getHours(),t.length),m:(e,t)=>(0,n.addLeadingZeros)(e.getMinutes(),t.length),s:(e,t)=>(0,n.addLeadingZeros)(e.getSeconds(),t.length),S(e,t){const r=t.length,i=e.getMilliseconds(),o=Math.trunc(i*Math.pow(10,r-3));return(0,n.addLeadingZeros)(o,t.length)}}},8438:(e,t)=>{"use strict";t.longFormatters=void 0;const r=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},n=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};t.longFormatters={p:n,P:(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],o=i[1],a=i[2];if(!a)return r(e,t);let s;switch(o){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",r(o,t)).replace("{{time}}",n(a,t))}}},339:(e,t,r)=>{"use strict";t.getTimezoneOffsetInMilliseconds=function(e){const t=(0,n.toDate)(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r};var n=r(5905)},7068:(e,t)=>{"use strict";t.isProtectedDayOfYearToken=function(e){return r.test(e)},t.isProtectedWeekYearToken=function(e){return n.test(e)},t.warnOrThrowProtectedError=function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(n," to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,r);if(console.warn(n),i.includes(e))throw new RangeError(n)};const r=/^D+$/,n=/^Y+$/,i=["D","DD","YY","YYYY"]},2426:(e,t,r)=>{"use strict";t.addDays=function(e,t){const r=(0,n.toDate)(e);if(isNaN(t))return(0,i.constructFrom)(e,NaN);if(!t)return r;return r.setDate(r.getDate()+t),r};var n=r(5905),i=r(3481)},9818:(e,t,r)=>{"use strict";t.addHours=function(e,t){return(0,n.addMilliseconds)(e,t*i.millisecondsInHour)};var n=r(6188),i=r(5703)},6188:(e,t,r)=>{"use strict";t.addMilliseconds=function(e,t){const r=+(0,n.toDate)(e);return(0,i.constructFrom)(e,r+t)};var n=r(5905),i=r(3481)},6666:(e,t,r)=>{"use strict";t.addMinutes=function(e,t){return(0,n.addMilliseconds)(e,t*i.millisecondsInMinute)};var n=r(6188),i=r(5703)},3274:(e,t,r)=>{"use strict";t.addMonths=function(e,t){const r=(0,n.toDate)(e);if(isNaN(t))return(0,i.constructFrom)(e,NaN);if(!t)return r;const o=r.getDate(),a=(0,i.constructFrom)(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const s=a.getDate();return o>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),o),r)};var n=r(5905),i=r(3481)},590:(e,t,r)=>{"use strict";t.addQuarters=function(e,t){const r=3*t;return(0,n.addMonths)(e,r)};var n=r(3274)},3237:(e,t,r)=>{"use strict";t.addWeeks=function(e,t){const r=7*t;return(0,n.addDays)(e,r)};var n=r(2426)},8463:(e,t,r)=>{"use strict";t.addYears=function(e,t){return(0,n.addMonths)(e,12*t)};var n=r(3274)},5703:(e,t)=>{"use strict";t.secondsInYear=t.secondsInWeek=t.secondsInQuarter=t.secondsInMonth=t.secondsInMinute=t.secondsInHour=t.secondsInDay=t.quartersInYear=t.monthsInYear=t.monthsInQuarter=t.minutesInYear=t.minutesInMonth=t.minutesInHour=t.minutesInDay=t.minTime=t.millisecondsInWeek=t.millisecondsInSecond=t.millisecondsInMinute=t.millisecondsInHour=t.millisecondsInDay=t.maxTime=t.daysInYear=t.daysInWeek=void 0;t.daysInWeek=7;const r=t.daysInYear=365.2425,n=t.maxTime=24*Math.pow(10,8)*60*60*1e3,i=(t.minTime=-n,t.millisecondsInWeek=6048e5,t.millisecondsInDay=864e5,t.millisecondsInMinute=6e4,t.millisecondsInHour=36e5,t.millisecondsInSecond=1e3,t.minutesInYear=525600,t.minutesInMonth=43200,t.minutesInDay=1440,t.minutesInHour=60,t.monthsInQuarter=3,t.monthsInYear=12,t.quartersInYear=4,t.secondsInHour=3600),o=(t.secondsInMinute=60,t.secondsInDay=24*i),a=(t.secondsInWeek=7*o,t.secondsInYear=o*r),s=t.secondsInMonth=a/12;t.secondsInQuarter=3*s},3481:(e,t)=>{"use strict";t.constructFrom=function(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}},4504:(e,t,r)=>{"use strict";t.differenceInCalendarDays=function(e,t){const r=(0,i.startOfDay)(e),a=(0,i.startOfDay)(t),s=+r-(0,o.getTimezoneOffsetInMilliseconds)(r),l=+a-(0,o.getTimezoneOffsetInMilliseconds)(a);return Math.round((s-l)/n.millisecondsInDay)};var n=r(5703),i=r(8837),o=r(339)},9897:(e,t,r)=>{"use strict";t.differenceInCalendarMonths=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t),o=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return 12*o+a};var n=r(5905)},6010:(e,t,r)=>{"use strict";t.differenceInCalendarYears=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t);return r.getFullYear()-i.getFullYear()};var n=r(5905)},3199:(e,t,r)=>{"use strict";t.endOfDay=function(e){const t=(0,n.toDate)(e);return t.setHours(23,59,59,999),t};var n=r(5905)},3004:(e,t,r)=>{"use strict";t.endOfMonth=function(e){const t=(0,n.toDate)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t};var n=r(5905)},5145:(e,t,r)=>{"use strict";t.endOfWeek=function(e,t){var r,o,a,s,l,c;const u=(0,i.getDefaultOptions)(),p=null!==(r=null!==(o=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==o?o:null===(c=u.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0,f=(0,n.toDate)(e),h=f.getDay(),d=6+(h<p?-7:0)-(h-p);return f.setDate(f.getDate()+d),f.setHours(23,59,59,999),f};var n=r(5905),i=r(6150)},8226:(e,t,r)=>{"use strict";t.endOfYear=function(e){const t=(0,n.toDate)(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t};var n=r(5905)},4935:(e,t,r)=>{"use strict";t.format=t.formatDate=function(e,t,r){var f,h,m,v,g,b,_,w,x,E,S,k,T,O;const A=(0,i.getDefaultOptions)(),P=null!==(f=null!==(h=null===r||void 0===r?void 0:r.locale)&&void 0!==h?h:A.locale)&&void 0!==f?f:n.defaultLocale,C=null!==(m=null!==(v=null!==(g=null!==(b=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==b?b:null===r||void 0===r||null===(_=r.locale)||void 0===_||null===(_=_.options)||void 0===_?void 0:_.firstWeekContainsDate)&&void 0!==g?g:A.firstWeekContainsDate)&&void 0!==v?v:null===(w=A.locale)||void 0===w||null===(w=w.options)||void 0===w?void 0:w.firstWeekContainsDate)&&void 0!==m?m:1,N=null!==(x=null!==(E=null!==(S=null!==(k=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==k?k:null===r||void 0===r||null===(T=r.locale)||void 0===T||null===(T=T.options)||void 0===T?void 0:T.weekStartsOn)&&void 0!==S?S:A.weekStartsOn)&&void 0!==E?E:null===(O=A.locale)||void 0===O||null===(O=O.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==x?x:0,R=(0,c.toDate)(e);if(!(0,l.isValid)(R))throw new RangeError("Invalid time value");let j=t.match(p).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,a.longFormatters[t])(e,P.formatLong)}return e})).join("").match(u).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:y(e)};if(o.formatters[t])return{isToken:!0,value:e};if(t.match(d))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));P.localize.preprocessor&&(j=P.localize.preprocessor(R,j));const M={firstWeekContainsDate:C,weekStartsOn:N,locale:P};return j.map((n=>{if(!n.isToken)return n.value;const i=n.value;(null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!(0,s.isProtectedWeekYearToken)(i))&&(null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!(0,s.isProtectedDayOfYearToken)(i))||(0,s.warnOrThrowProtectedError)(i,t,String(e));return(0,o.formatters[i[0]])(R,i,P.localize,M)})).join("")},Object.defineProperty(t,"formatters",{enumerable:!0,get:function(){return o.formatters}}),Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return a.longFormatters}});var n=r(9143),i=r(6150),o=r(6807),a=r(8438),s=r(7068),l=r(8812),c=r(5905);const u=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,p=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f=/^'([^]*?)'?$/,h=/''/g,d=/[a-zA-Z]/;function y(e){const t=e.match(f);return t?t[1].replace(h,"'"):e}},7629:(e,t,r)=>{"use strict";t.getDate=function(e){const t=(0,n.toDate)(e);return t.getDate()};var n=r(5905)},2783:(e,t,r)=>{"use strict";t.getDay=function(e){const t=(0,n.toDate)(e);return t.getDay()};var n=r(5905)},9303:(e,t,r)=>{"use strict";t.getDayOfYear=function(e){const t=(0,o.toDate)(e),r=(0,n.differenceInCalendarDays)(t,(0,i.startOfYear)(t));return r+1};var n=r(4504),i=r(7234),o=r(5905)},9183:(e,t,r)=>{"use strict";t.getDaysInMonth=function(e){const t=(0,n.toDate)(e),r=t.getFullYear(),o=t.getMonth(),a=(0,i.constructFrom)(e,0);return a.setFullYear(r,o+1,0),a.setHours(0,0,0,0),a.getDate()};var n=r(5905),i=r(3481)},4602:(e,t,r)=>{"use strict";t.getDefaultOptions=function(){return Object.assign({},(0,n.getDefaultOptions)())};var n=r(6150)},3490:(e,t,r)=>{"use strict";t.getHours=function(e){const t=(0,n.toDate)(e);return t.getHours()};var n=r(5905)},3432:(e,t,r)=>{"use strict";t.getISODay=function(e){let t=(0,n.toDate)(e).getDay();0===t&&(t=7);return t};var n=r(5905)},8917:(e,t,r)=>{"use strict";t.getISOWeek=function(e){const t=(0,a.toDate)(e),r=+(0,i.startOfISOWeek)(t)-+(0,o.startOfISOWeekYear)(t);return Math.round(r/n.millisecondsInWeek)+1};var n=r(5703),i=r(2392),o=r(4402),a=r(5905)},1846:(e,t,r)=>{"use strict";t.getISOWeekYear=function(e){const t=(0,o.toDate)(e),r=t.getFullYear(),a=(0,n.constructFrom)(e,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=(0,i.startOfISOWeek)(a),l=(0,n.constructFrom)(e,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=(0,i.startOfISOWeek)(l);return t.getTime()>=s.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1};var n=r(3481),i=r(2392),o=r(5905)},6829:(e,t,r)=>{"use strict";t.getMinutes=function(e){const t=(0,n.toDate)(e);return t.getMinutes()};var n=r(5905)},9150:(e,t,r)=>{"use strict";t.getMonth=function(e){const t=(0,n.toDate)(e);return t.getMonth()};var n=r(5905)},7867:(e,t,r)=>{"use strict";t.getQuarter=function(e){const t=(0,n.toDate)(e);return Math.trunc(t.getMonth()/3)+1};var n=r(5905)},8499:(e,t,r)=>{"use strict";t.getSeconds=function(e){const t=(0,n.toDate)(e);return t.getSeconds()};var n=r(5905)},3130:(e,t,r)=>{"use strict";t.getTime=function(e){const t=(0,n.toDate)(e);return t.getTime()};var n=r(5905)},5529:(e,t,r)=>{"use strict";t.getWeek=function(e,t){const r=(0,a.toDate)(e),s=+(0,i.startOfWeek)(r,t)-+(0,o.startOfWeekYear)(r,t);return Math.round(s/n.millisecondsInWeek)+1};var n=r(5703),i=r(5340),o=r(444),a=r(5905)},1148:(e,t,r)=>{"use strict";t.getWeekYear=function(e,t){var r,s,l,c,u,p;const f=(0,o.toDate)(e),h=f.getFullYear(),d=(0,a.getDefaultOptions)(),y=null!==(r=null!==(s=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:d.firstWeekContainsDate)&&void 0!==s?s:null===(p=d.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==r?r:1,m=(0,n.constructFrom)(e,0);m.setFullYear(h+1,0,y),m.setHours(0,0,0,0);const v=(0,i.startOfWeek)(m,t),g=(0,n.constructFrom)(e,0);g.setFullYear(h,0,y),g.setHours(0,0,0,0);const b=(0,i.startOfWeek)(g,t);return f.getTime()>=v.getTime()?h+1:f.getTime()>=b.getTime()?h:h-1};var n=r(3481),i=r(5340),o=r(5905),a=r(6150)},2810:(e,t,r)=>{"use strict";t.getYear=function(e){return(0,n.toDate)(e).getFullYear()};var n=r(5905)},6274:(e,t,r)=>{"use strict";t.isAfter=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t);return r.getTime()>i.getTime()};var n=r(5905)},3581:(e,t,r)=>{"use strict";t.isBefore=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t);return+r<+i};var n=r(5905)},837:(e,t)=>{"use strict";t.isDate=function(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}},86:(e,t,r)=>{"use strict";t.isEqual=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t);return+r===+i};var n=r(5905)},8616:(e,t,r)=>{"use strict";t.isSameDay=function(e,t){const r=(0,n.startOfDay)(e),i=(0,n.startOfDay)(t);return+r===+i};var n=r(8837)},5244:(e,t,r)=>{"use strict";t.isSameMonth=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()};var n=r(5905)},9141:(e,t,r)=>{"use strict";t.isSameQuarter=function(e,t){const r=(0,n.startOfQuarter)(e),i=(0,n.startOfQuarter)(t);return+r===+i};var n=r(643)},9985:(e,t,r)=>{"use strict";t.isSameYear=function(e,t){const r=(0,n.toDate)(e),i=(0,n.toDate)(t);return r.getFullYear()===i.getFullYear()};var n=r(5905)},8812:(e,t,r)=>{"use strict";t.isValid=function(e){if(!(0,n.isDate)(e)&&"number"!==typeof e)return!1;const t=(0,i.toDate)(e);return!isNaN(Number(t))};var n=r(837),i=r(5905)},724:(e,t,r)=>{"use strict";t.isWithinInterval=function(e,t){const r=+(0,n.toDate)(e),[i,o]=[+(0,n.toDate)(t.start),+(0,n.toDate)(t.end)].sort(((e,t)=>e-t));return r>=i&&r<=o};var n=r(5905)},2272:(e,t)=>{"use strict";t.buildFormatLongFn=function(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}},389:(e,t)=>{"use strict";t.buildLocalizeFn=function(e){return(t,r)=>{let n;if("formatting"===(null!==r&&void 0!==r&&r.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=null!==r&&void 0!==r&&r.width?String(r.width):t;n=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=null!==r&&void 0!==r&&r.width?String(r.width):e.defaultWidth;n=e.values[i]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}},5066:(e,t)=>{"use strict";t.buildMatchFn=function(e){return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const a=o[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(s,(e=>e.test(a))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(s,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}},1263:(e,t)=>{"use strict";t.buildMatchPatternFn=function(e){return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];a=r.valueCallback?r.valueCallback(a):a;return{value:a,rest:t.slice(i.length)}}}},9127:(e,t,r)=>{"use strict";t.enUS=void 0;var n=r(6432),i=r(8819),o=r(3249),a=r(7351),s=r(7419);t.enUS={code:"en-US",formatDistance:n.formatDistance,formatLong:i.formatLong,formatRelative:o.formatRelative,localize:a.localize,match:s.match,options:{weekStartsOn:0,firstWeekContainsDate:1}}},6432:(e,t)=>{"use strict";t.formatDistance=void 0;const r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.formatDistance=(e,t,n)=>{let i;const o=r[e];return i="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i}},8819:(e,t,r)=>{"use strict";t.formatLong=void 0;var n=r(2272);t.formatLong={date:(0,n.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,n.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,n.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}},3249:(e,t)=>{"use strict";t.formatRelative=void 0;const r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.formatRelative=(e,t,n,i)=>r[e]},7351:(e,t,r)=>{"use strict";t.localize=void 0;var n=r(389);t.localize={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:(0,n.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,n.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,n.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,n.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,n.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}},7419:(e,t,r)=>{"use strict";t.match=void 0;var n=r(5066),i=r(1263);t.match={ordinalNumber:(0,i.buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,n.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,n.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,n.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,n.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,n.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}},2677:(e,t,r)=>{"use strict";t.max=function(e){let t;return e.forEach((function(e){const r=(0,n.toDate)(e);(void 0===t||t<r||isNaN(Number(r)))&&(t=r)})),t||new Date(NaN)};var n=r(5905)},4940:(e,t,r)=>{"use strict";t.min=function(e){let t;return e.forEach((e=>{const r=(0,n.toDate)(e);(!t||t>r||isNaN(+r))&&(t=r)})),t||new Date(NaN)};var n=r(5905)},6747:(e,t,r)=>{"use strict";Object.defineProperty(t,"longFormatters",{enumerable:!0,get:function(){return s.longFormatters}}),t.parse=function(e,t,r,v){var g,b,_,w,x,E,S,k,T,O,A,P,C,N;const R=(0,i.getDefaultOptions)(),j=null!==(g=null!==(b=null===v||void 0===v?void 0:v.locale)&&void 0!==b?b:R.locale)&&void 0!==g?g:o.defaultLocale,M=null!==(_=null!==(w=null!==(x=null!==(E=null===v||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==E?E:null===v||void 0===v||null===(S=v.locale)||void 0===S||null===(S=S.options)||void 0===S?void 0:S.firstWeekContainsDate)&&void 0!==x?x:R.firstWeekContainsDate)&&void 0!==w?w:null===(k=R.locale)||void 0===k||null===(k=k.options)||void 0===k?void 0:k.firstWeekContainsDate)&&void 0!==_?_:1,I=null!==(T=null!==(O=null!==(A=null!==(P=null===v||void 0===v?void 0:v.weekStartsOn)&&void 0!==P?P:null===v||void 0===v||null===(C=v.locale)||void 0===C||null===(C=C.options)||void 0===C?void 0:C.weekStartsOn)&&void 0!==A?A:R.weekStartsOn)&&void 0!==O?O:null===(N=R.locale)||void 0===N||null===(N=N.options)||void 0===N?void 0:N.weekStartsOn)&&void 0!==T?T:0;if(""===t)return""===e?(0,a.toDate)(r):(0,n.constructFrom)(r,NaN);const D={firstWeekContainsDate:M,weekStartsOn:I,locale:j},L=[new u.DateToSystemTimezoneSetter],F=t.match(f).map((e=>{const t=e[0];if(t in s.longFormatters){return(0,s.longFormatters[t])(e,j.formatLong)}return e})).join("").match(p),B=[];for(let i of F){null!==v&&void 0!==v&&v.useAdditionalWeekYearTokens||!(0,l.isProtectedWeekYearToken)(i)||(0,l.warnOrThrowProtectedError)(i,t,e),null!==v&&void 0!==v&&v.useAdditionalDayOfYearTokens||!(0,l.isProtectedDayOfYearToken)(i)||(0,l.warnOrThrowProtectedError)(i,t,e);const o=i[0],a=c.parsers[o];if(a){const{incompatibleTokens:t}=a;if(Array.isArray(t)){const e=B.find((e=>t.includes(e.token)||e.token===o));if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(i,"` at the same time"))}else if("*"===a.incompatibleTokens&&B.length>0)throw new RangeError("The format string mustn't contain `".concat(i,"` and any other token at the same time"));B.push({token:o,fullToken:i});const s=a.run(e,i,j.match,D);if(!s)return(0,n.constructFrom)(r,NaN);L.push(s.setter),e=s.rest}else{if(o.match(m))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");if("''"===i?i="'":"'"===o&&(i=i.match(h)[1].replace(d,"'")),0!==e.indexOf(i))return(0,n.constructFrom)(r,NaN);e=e.slice(i.length)}}if(e.length>0&&y.test(e))return(0,n.constructFrom)(r,NaN);const z=L.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,r)=>r.indexOf(e)===t)).map((e=>L.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let $=(0,a.toDate)(r);if(isNaN($.getTime()))return(0,n.constructFrom)(r,NaN);const U={};for(const i of z){if(!i.validate($,D))return(0,n.constructFrom)(r,NaN);const e=i.set($,U,D);Array.isArray(e)?($=e[0],Object.assign(U,e[1])):$=e}return(0,n.constructFrom)(r,$)},Object.defineProperty(t,"parsers",{enumerable:!0,get:function(){return c.parsers}});var n=r(3481),i=r(4602),o=r(9143),a=r(5905),s=r(8438),l=r(7068),c=r(52),u=r(7378);const p=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,f=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h=/^'([^]*?)'?$/,d=/''/g,y=/\S/,m=/[a-zA-Z]/},1991:(e,t,r)=>{"use strict";t.Parser=void 0;var n=r(7378);t.Parser=class{run(e,t,r,i){const o=this.parse(e,t,r,i);return o?{setter:new n.ValueSetter(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,r){return!0}}},7378:(e,t,r)=>{"use strict";var n=r(8416).default;t.ValueSetter=t.Setter=t.DateToSystemTimezoneSetter=void 0;var i=r(4329),o=r(3481);class a{constructor(){n(this,"subPriority",0)}validate(e,t){return!0}}t.Setter=a;t.ValueSetter=class extends a{constructor(e,t,r,n,i){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}};t.DateToSystemTimezoneSetter=class extends a{constructor(){super(...arguments),n(this,"priority",10),n(this,"subPriority",-1)}set(e,t){return t.timestampIsSet?e:(0,o.constructFrom)(e,(0,i.transpose)(e,Date))}}},9907:(e,t)=>{"use strict";t.timezonePatterns=t.numericPatterns=void 0;t.numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},t.timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/}},52:(e,t,r)=>{"use strict";t.parsers=void 0;var n=r(7649),i=r(2940),o=r(6832),a=r(9716),s=r(5596),l=r(2230),c=r(5809),u=r(6740),p=r(5863),f=r(2021),h=r(2252),d=r(3413),y=r(7073),m=r(386),v=r(2286),g=r(4400),b=r(815),_=r(7931),w=r(6034),x=r(9116),E=r(7039),S=r(5015),k=r(9853),T=r(5682),O=r(1471),A=r(2984),P=r(2816),C=r(1213),N=r(9163),R=r(9517),j=r(8290);t.parsers={G:new n.EraParser,y:new i.YearParser,Y:new o.LocalWeekYearParser,R:new a.ISOWeekYearParser,u:new s.ExtendedYearParser,Q:new l.QuarterParser,q:new c.StandAloneQuarterParser,M:new u.MonthParser,L:new p.StandAloneMonthParser,w:new f.LocalWeekParser,I:new h.ISOWeekParser,d:new d.DateParser,D:new y.DayOfYearParser,E:new m.DayParser,e:new v.LocalDayParser,c:new g.StandAloneLocalDayParser,i:new b.ISODayParser,a:new _.AMPMParser,b:new w.AMPMMidnightParser,B:new x.DayPeriodParser,h:new E.Hour1to12Parser,H:new S.Hour0to23Parser,K:new k.Hour0To11Parser,k:new T.Hour1To24Parser,m:new O.MinuteParser,s:new A.SecondParser,S:new P.FractionOfSecondParser,X:new C.ISOTimezoneWithZParser,x:new N.ISOTimezoneParser,t:new R.TimestampSecondsParser,T:new j.TimestampMillisecondsParser}},6034:(e,t,r)=>{"use strict";var n=r(8416).default;t.AMPMMidnightParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",80),n(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours((0,o.dayPeriodEnumToHours)(r),0,0,0),e}}t.AMPMMidnightParser=a},7931:(e,t,r)=>{"use strict";var n=r(8416).default;t.AMPMParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",80),n(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours((0,o.dayPeriodEnumToHours)(r),0,0,0),e}}t.AMPMParser=a},3413:(e,t,r)=>{"use strict";var n=r(8416).default;t.DateParser=void 0;var i=r(9907),o=r(1991),a=r(2033);const s=[31,28,31,30,31,30,31,31,30,31,30,31],l=[31,29,31,30,31,30,31,31,30,31,30,31];class c extends o.Parser{constructor(){super(...arguments),n(this,"priority",90),n(this,"subPriority",1),n(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"d":return(0,a.parseNumericPattern)(i.numericPatterns.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){const r=e.getFullYear(),n=(0,a.isLeapYearIndex)(r),i=e.getMonth();return n?t>=1&&t<=l[i]:t>=1&&t<=s[i]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}}t.DateParser=c},7073:(e,t,r)=>{"use strict";var n=r(8416).default;t.DayOfYearParser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",90),n(this,"subpriority",1),n(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,r){switch(t){case"D":case"DD":return(0,a.parseNumericPattern)(i.numericPatterns.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){const r=e.getFullYear();return(0,a.isLeapYearIndex)(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}t.DayOfYearParser=s},386:(e,t,r)=>{"use strict";var n=r(8416).default;t.DayParser=void 0;var i=r(6960),o=r(1991);class a extends o.Parser{constructor(){super(...arguments),n(this,"priority",90),n(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=(0,i.setDay)(e,r,n)).setHours(0,0,0,0),e}}t.DayParser=a},9116:(e,t,r)=>{"use strict";var n=r(8416).default;t.DayPeriodParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",80),n(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours((0,o.dayPeriodEnumToHours)(r),0,0,0),e}}t.DayPeriodParser=a},7649:(e,t,r)=>{"use strict";var n=r(8416).default;t.EraParser=void 0;var i=r(1991);class o extends i.Parser{constructor(){super(...arguments),n(this,"priority",140),n(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}t.EraParser=o},5596:(e,t,r)=>{"use strict";var n=r(8416).default;t.ExtendedYearParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",130),n(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return"u"===t?(0,o.parseNDigitsSigned)(4,e):(0,o.parseNDigitsSigned)(t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}t.ExtendedYearParser=a},2816:(e,t,r)=>{"use strict";var n=r(8416).default;t.FractionOfSecondParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",30),n(this,"incompatibleTokens",["t","T"])}parse(e,t){return(0,o.mapValue)((0,o.parseNDigits)(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,r){return e.setMilliseconds(r),e}}t.FractionOfSecondParser=a},9853:(e,t,r)=>{"use strict";var n=r(8416).default;t.Hour0To11Parser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",70),n(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,r){switch(t){case"K":return(0,a.parseNumericPattern)(i.numericPatterns.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}t.Hour0To11Parser=s},5015:(e,t,r)=>{"use strict";var n=r(8416).default;t.Hour0to23Parser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",70),n(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,r){switch(t){case"H":return(0,a.parseNumericPattern)(i.numericPatterns.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}}t.Hour0to23Parser=s},5682:(e,t,r)=>{"use strict";var n=r(8416).default;t.Hour1To24Parser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",70),n(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,r){switch(t){case"k":return(0,a.parseNumericPattern)(i.numericPatterns.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}}t.Hour1To24Parser=s},7039:(e,t,r)=>{"use strict";var n=r(8416).default;t.Hour1to12Parser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",70),n(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,r){switch(t){case"h":return(0,a.parseNumericPattern)(i.numericPatterns.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}}t.Hour1to12Parser=s},815:(e,t,r)=>{"use strict";var n=r(8416).default;t.ISODayParser=void 0;var i=r(6505),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",90),n(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,r){const n=e=>0===e?7:e;switch(t){case"i":case"ii":return(0,a.parseNDigits)(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return(0,a.mapValue)(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return(0,a.mapValue)(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return(0,a.mapValue)(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return(0,a.mapValue)(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return(e=(0,i.setISODay)(e,r)).setHours(0,0,0,0),e}}t.ISODayParser=s},9163:(e,t,r)=>{"use strict";var n=r(8416).default;t.ISOTimezoneParser=void 0;var i=r(3481),o=r(339),a=r(9907),s=r(1991),l=r(2033);class c extends s.Parser{constructor(){super(...arguments),n(this,"priority",10),n(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return(0,l.parseTimezonePattern)(a.timezonePatterns.basicOptionalMinutes,e);case"xx":return(0,l.parseTimezonePattern)(a.timezonePatterns.basic,e);case"xxxx":return(0,l.parseTimezonePattern)(a.timezonePatterns.basicOptionalSeconds,e);case"xxxxx":return(0,l.parseTimezonePattern)(a.timezonePatterns.extendedOptionalSeconds,e);default:return(0,l.parseTimezonePattern)(a.timezonePatterns.extended,e)}}set(e,t,r){return t.timestampIsSet?e:(0,i.constructFrom)(e,e.getTime()-(0,o.getTimezoneOffsetInMilliseconds)(e)-r)}}t.ISOTimezoneParser=c},1213:(e,t,r)=>{"use strict";var n=r(8416).default;t.ISOTimezoneWithZParser=void 0;var i=r(3481),o=r(339),a=r(9907),s=r(1991),l=r(2033);class c extends s.Parser{constructor(){super(...arguments),n(this,"priority",10),n(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return(0,l.parseTimezonePattern)(a.timezonePatterns.basicOptionalMinutes,e);case"XX":return(0,l.parseTimezonePattern)(a.timezonePatterns.basic,e);case"XXXX":return(0,l.parseTimezonePattern)(a.timezonePatterns.basicOptionalSeconds,e);case"XXXXX":return(0,l.parseTimezonePattern)(a.timezonePatterns.extendedOptionalSeconds,e);default:return(0,l.parseTimezonePattern)(a.timezonePatterns.extended,e)}}set(e,t,r){return t.timestampIsSet?e:(0,i.constructFrom)(e,e.getTime()-(0,o.getTimezoneOffsetInMilliseconds)(e)-r)}}t.ISOTimezoneWithZParser=c},2252:(e,t,r)=>{"use strict";var n=r(8416).default;t.ISOWeekParser=void 0;var i=r(2621),o=r(2392),a=r(9907),s=r(1991),l=r(2033);class c extends s.Parser{constructor(){super(...arguments),n(this,"priority",100),n(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,r){switch(t){case"I":return(0,l.parseNumericPattern)(a.numericPatterns.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return(0,l.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return(0,o.startOfISOWeek)((0,i.setISOWeek)(e,r))}}t.ISOWeekParser=c},9716:(e,t,r)=>{"use strict";var n=r(8416).default;t.ISOWeekYearParser=void 0;var i=r(2392),o=r(3481),a=r(1991),s=r(2033);class l extends a.Parser{constructor(){super(...arguments),n(this,"priority",130),n(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return"R"===t?(0,s.parseNDigitsSigned)(4,e):(0,s.parseNDigitsSigned)(t.length,e)}set(e,t,r){const n=(0,o.constructFrom)(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),(0,i.startOfISOWeek)(n)}}t.ISOWeekYearParser=l},2286:(e,t,r)=>{"use strict";var n=r(8416).default;t.LocalDayParser=void 0;var i=r(6960),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",90),n(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,r,n){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return(0,a.mapValue)((0,a.parseNDigits)(t.length,e),i);case"eo":return(0,a.mapValue)(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=(0,i.setDay)(e,r,n)).setHours(0,0,0,0),e}}t.LocalDayParser=s},2021:(e,t,r)=>{"use strict";var n=r(8416).default;t.LocalWeekParser=void 0;var i=r(1742),o=r(5340),a=r(9907),s=r(1991),l=r(2033);class c extends s.Parser{constructor(){super(...arguments),n(this,"priority",100),n(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,r){switch(t){case"w":return(0,l.parseNumericPattern)(a.numericPatterns.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return(0,l.parseNDigits)(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return(0,o.startOfWeek)((0,i.setWeek)(e,r,n),n)}}t.LocalWeekParser=c},6832:(e,t,r)=>{"use strict";var n=r(8416).default;t.LocalWeekYearParser=void 0;var i=r(1148),o=r(5340),a=r(1991),s=r(2033);class l extends a.Parser{constructor(){super(...arguments),n(this,"priority",130),n(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return(0,s.mapValue)((0,s.parseNDigits)(4,e),n);case"Yo":return(0,s.mapValue)(r.ordinalNumber(e,{unit:"year"}),n);default:return(0,s.mapValue)((0,s.parseNDigits)(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const a=(0,i.getWeekYear)(e,n);if(r.isTwoDigitYear){const t=(0,s.normalizeTwoDigitYear)(r.year,a);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),(0,o.startOfWeek)(e,n)}const l="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(l,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),(0,o.startOfWeek)(e,n)}}t.LocalWeekYearParser=l},1471:(e,t,r)=>{"use strict";var n=r(8416).default;t.MinuteParser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",60),n(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"m":return(0,a.parseNumericPattern)(i.numericPatterns.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}}t.MinuteParser=s},6740:(e,t,r)=>{"use strict";var n=r(8416).default;t.MonthParser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),n(this,"priority",110)}parse(e,t,r){const n=e=>e-1;switch(t){case"M":return(0,a.mapValue)((0,a.parseNumericPattern)(i.numericPatterns.month,e),n);case"MM":return(0,a.mapValue)((0,a.parseNDigits)(2,e),n);case"Mo":return(0,a.mapValue)(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}t.MonthParser=s},2230:(e,t,r)=>{"use strict";var n=r(8416).default;t.QuarterParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",120),n(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"Q":case"QQ":return(0,o.parseNDigits)(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}}t.QuarterParser=a},2984:(e,t,r)=>{"use strict";var n=r(8416).default;t.SecondParser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",50),n(this,"incompatibleTokens",["t","T"])}parse(e,t,r){switch(t){case"s":return(0,a.parseNumericPattern)(i.numericPatterns.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return(0,a.parseNDigits)(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}}t.SecondParser=s},4400:(e,t,r)=>{"use strict";var n=r(8416).default;t.StandAloneLocalDayParser=void 0;var i=r(6960),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",90),n(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,r,n){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return(0,a.mapValue)((0,a.parseNDigits)(t.length,e),i);case"co":return(0,a.mapValue)(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=(0,i.setDay)(e,r,n)).setHours(0,0,0,0),e}}t.StandAloneLocalDayParser=s},5863:(e,t,r)=>{"use strict";var n=r(8416).default;t.StandAloneMonthParser=void 0;var i=r(9907),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",110),n(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,r){const n=e=>e-1;switch(t){case"L":return(0,a.mapValue)((0,a.parseNumericPattern)(i.numericPatterns.month,e),n);case"LL":return(0,a.mapValue)((0,a.parseNDigits)(2,e),n);case"Lo":return(0,a.mapValue)(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}t.StandAloneMonthParser=s},5809:(e,t,r)=>{"use strict";var n=r(8416).default;t.StandAloneQuarterParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",120),n(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,r){switch(t){case"q":case"qq":return(0,o.parseNDigits)(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}}t.StandAloneQuarterParser=a},8290:(e,t,r)=>{"use strict";var n=r(8416).default;t.TimestampMillisecondsParser=void 0;var i=r(3481),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",20),n(this,"incompatibleTokens","*")}parse(e){return(0,a.parseAnyDigitsSigned)(e)}set(e,t,r){return[(0,i.constructFrom)(e,r),{timestampIsSet:!0}]}}t.TimestampMillisecondsParser=s},9517:(e,t,r)=>{"use strict";var n=r(8416).default;t.TimestampSecondsParser=void 0;var i=r(3481),o=r(1991),a=r(2033);class s extends o.Parser{constructor(){super(...arguments),n(this,"priority",40),n(this,"incompatibleTokens","*")}parse(e){return(0,a.parseAnyDigitsSigned)(e)}set(e,t,r){return[(0,i.constructFrom)(e,1e3*r),{timestampIsSet:!0}]}}t.TimestampSecondsParser=s},2940:(e,t,r)=>{"use strict";var n=r(8416).default;t.YearParser=void 0;var i=r(1991),o=r(2033);class a extends i.Parser{constructor(){super(...arguments),n(this,"priority",130),n(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return(0,o.mapValue)((0,o.parseNDigits)(4,e),n);case"yo":return(0,o.mapValue)(r.ordinalNumber(e,{unit:"year"}),n);default:return(0,o.mapValue)((0,o.parseNDigits)(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const t=(0,o.normalizeTwoDigitYear)(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}t.YearParser=a},2033:(e,t,r)=>{"use strict";t.dayPeriodEnumToHours=function(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}},t.isLeapYearIndex=function(e){return e%400===0||e%4===0&&e%100!==0},t.mapValue=function(e,t){if(!e)return e;return{value:t(e.value),rest:e.rest}},t.normalizeTwoDigitYear=function(e,t){const r=t>0,n=r?t:1-t;let i;if(n<=50)i=e||100;else{const t=n+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return r?i:1-i},t.parseAnyDigitsSigned=function(e){return o(i.numericPatterns.anyDigitsSigned,e)},t.parseNDigits=function(e,t){switch(e){case 1:return o(i.numericPatterns.singleDigit,t);case 2:return o(i.numericPatterns.twoDigits,t);case 3:return o(i.numericPatterns.threeDigits,t);case 4:return o(i.numericPatterns.fourDigits,t);default:return o(new RegExp("^\\d{1,"+e+"}"),t)}},t.parseNDigitsSigned=function(e,t){switch(e){case 1:return o(i.numericPatterns.singleDigitSigned,t);case 2:return o(i.numericPatterns.twoDigitsSigned,t);case 3:return o(i.numericPatterns.threeDigitsSigned,t);case 4:return o(i.numericPatterns.fourDigitsSigned,t);default:return o(new RegExp("^-?\\d{1,"+e+"}"),t)}},t.parseNumericPattern=o,t.parseTimezonePattern=function(e,t){const r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};const i="+"===r[1]?1:-1,o=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,s=r[5]?parseInt(r[5],10):0;return{value:i*(o*n.millisecondsInHour+a*n.millisecondsInMinute+s*n.millisecondsInSecond),rest:t.slice(r[0].length)}};var n=r(5703),i=r(9907);function o(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}},1989:(e,t,r)=>{"use strict";t.parseISO=function(e,t){var r;const f=null!==(r=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==r?r:2,h=function(e){const t={},r=e.split(i.dateTimeDelimiter);let n;if(r.length>2)return t;/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],i.timeZoneDelimiter.test(t.date)&&(t.date=e.split(i.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length)));if(n){const e=i.timezone.exec(n);e?(t.time=n.replace(e[1],""),t.timezone=e[1]):t.time=n}return t}(e);let d;if(h.date){const e=function(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:null===o?i:100*o,restDateString:e.slice((n[1]||n[2]).length)}}(h.date,f);d=function(e,t){if(null===t)return new Date(NaN);const r=e.match(o);if(!r)return new Date(NaN);const n=!!r[4],i=l(r[1]),a=l(r[2])-1,s=l(r[3]),c=l(r[4]),f=l(r[5])-1;if(n)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,c,f)?function(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,o=7*(t-1)+r+1-i;return n.setUTCDate(n.getUTCDate()+o),n}(t,c,f):new Date(NaN);{const e=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(u[t]||(p(e)?29:28))}(t,a,s)&&function(e,t){return t>=1&&t<=(p(e)?366:365)}(t,i)?(e.setUTCFullYear(t,a,Math.max(i,s)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!d||isNaN(d.getTime()))return new Date(NaN);const y=d.getTime();let m,v=0;if(h.time&&(v=function(e){const t=e.match(a);if(!t)return NaN;const r=c(t[1]),i=c(t[2]),o=c(t[3]);if(!function(e,t,r){if(24===e)return 0===t&&0===r;return r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,i,o))return NaN;return r*n.millisecondsInHour+i*n.millisecondsInMinute+1e3*o}(h.time),isNaN(v)))return new Date(NaN);if(!h.timezone){const e=new Date(y+v),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}if(m=function(e){if("Z"===e)return 0;const t=e.match(s);if(!t)return 0;const r="+"===t[1]?-1:1,i=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return r*(i*n.millisecondsInHour+o*n.millisecondsInMinute)}(h.timezone),isNaN(m))return new Date(NaN);return new Date(y+v+m)};var n=r(5703);const i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,a=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,s=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}const u=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400===0||e%4===0&&e%100!==0}},9645:(e,t,r)=>{"use strict";t.set=function(e,t){let r=(0,o.toDate)(e);if(isNaN(+r))return(0,n.constructFrom)(e,NaN);null!=t.year&&r.setFullYear(t.year);null!=t.month&&(r=(0,i.setMonth)(r,t.month));null!=t.date&&r.setDate(t.date);null!=t.hours&&r.setHours(t.hours);null!=t.minutes&&r.setMinutes(t.minutes);null!=t.seconds&&r.setSeconds(t.seconds);null!=t.milliseconds&&r.setMilliseconds(t.milliseconds);return r};var n=r(3481),i=r(3825),o=r(5905)},6960:(e,t,r)=>{"use strict";t.setDay=function(e,t,r){var a,s,l,c,u,p;const f=(0,o.getDefaultOptions)(),h=null!==(a=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==s?s:null===(p=f.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==a?a:0,d=(0,i.toDate)(e),y=d.getDay(),m=(t%7+7)%7,v=7-h,g=t<0||t>6?t-(y+v)%7:(m+v)%7-(y+v)%7;return(0,n.addDays)(d,g)};var n=r(2426),i=r(5905),o=r(6150)},7941:(e,t,r)=>{"use strict";t.setHours=function(e,t){const r=(0,n.toDate)(e);return r.setHours(t),r};var n=r(5905)},6505:(e,t,r)=>{"use strict";t.setISODay=function(e,t){const r=(0,o.toDate)(e),a=(0,i.getISODay)(r),s=t-a;return(0,n.addDays)(r,s)};var n=r(2426),i=r(3432),o=r(5905)},2621:(e,t,r)=>{"use strict";t.setISOWeek=function(e,t){const r=(0,i.toDate)(e),o=(0,n.getISOWeek)(r)-t;return r.setDate(r.getDate()-7*o),r};var n=r(8917),i=r(5905)},6609:(e,t,r)=>{"use strict";t.setMinutes=function(e,t){const r=(0,n.toDate)(e);return r.setMinutes(t),r};var n=r(5905)},3825:(e,t,r)=>{"use strict";t.setMonth=function(e,t){const r=(0,o.toDate)(e),a=r.getFullYear(),s=r.getDate(),l=(0,n.constructFrom)(e,0);l.setFullYear(a,t,15),l.setHours(0,0,0,0);const c=(0,i.getDaysInMonth)(l);return r.setMonth(t,Math.min(s,c)),r};var n=r(3481),i=r(9183),o=r(5905)},5566:(e,t,r)=>{"use strict";t.setQuarter=function(e,t){const r=(0,i.toDate)(e),o=Math.trunc(r.getMonth()/3)+1,a=t-o;return(0,n.setMonth)(r,r.getMonth()+3*a)};var n=r(3825),i=r(5905)},3528:(e,t,r)=>{"use strict";t.setSeconds=function(e,t){const r=(0,n.toDate)(e);return r.setSeconds(t),r};var n=r(5905)},1742:(e,t,r)=>{"use strict";t.setWeek=function(e,t,r){const o=(0,i.toDate)(e),a=(0,n.getWeek)(o,r)-t;return o.setDate(o.getDate()-7*a),o};var n=r(5529),i=r(5905)},9840:(e,t,r)=>{"use strict";t.setYear=function(e,t){const r=(0,i.toDate)(e);if(isNaN(+r))return(0,n.constructFrom)(e,NaN);return r.setFullYear(t),r};var n=r(3481),i=r(5905)},8837:(e,t,r)=>{"use strict";t.startOfDay=function(e){const t=(0,n.toDate)(e);return t.setHours(0,0,0,0),t};var n=r(5905)},2392:(e,t,r)=>{"use strict";t.startOfISOWeek=function(e){return(0,n.startOfWeek)(e,{weekStartsOn:1})};var n=r(5340)},4402:(e,t,r)=>{"use strict";t.startOfISOWeekYear=function(e){const t=(0,n.getISOWeekYear)(e),r=(0,o.constructFrom)(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),(0,i.startOfISOWeek)(r)};var n=r(1846),i=r(2392),o=r(3481)},4975:(e,t,r)=>{"use strict";t.startOfMonth=function(e){const t=(0,n.toDate)(e);return t.setDate(1),t.setHours(0,0,0,0),t};var n=r(5905)},643:(e,t,r)=>{"use strict";t.startOfQuarter=function(e){const t=(0,n.toDate)(e),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t};var n=r(5905)},5340:(e,t,r)=>{"use strict";t.startOfWeek=function(e,t){var r,o,a,s,l,c;const u=(0,i.getDefaultOptions)(),p=null!==(r=null!==(o=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(l=t.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==o?o:null===(c=u.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:0,f=(0,n.toDate)(e),h=f.getDay(),d=(h<p?7:0)+h-p;return f.setDate(f.getDate()-d),f.setHours(0,0,0,0),f};var n=r(5905),i=r(6150)},444:(e,t,r)=>{"use strict";t.startOfWeekYear=function(e,t){var r,s,l,c,u,p;const f=(0,a.getDefaultOptions)(),h=null!==(r=null!==(s=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:f.firstWeekContainsDate)&&void 0!==s?s:null===(p=f.locale)||void 0===p||null===(p=p.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==r?r:1,d=(0,i.getWeekYear)(e,t),y=(0,n.constructFrom)(e,0);y.setFullYear(d,0,h),y.setHours(0,0,0,0);return(0,o.startOfWeek)(y,t)};var n=r(3481),i=r(1148),o=r(5340),a=r(6150)},7234:(e,t,r)=>{"use strict";t.startOfYear=function(e){const t=(0,n.toDate)(e),r=(0,i.constructFrom)(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r};var n=r(5905),i=r(3481)},4616:(e,t,r)=>{"use strict";t.subDays=function(e,t){return(0,n.addDays)(e,-t)};var n=r(2426)},8186:(e,t,r)=>{"use strict";t.subMonths=function(e,t){return(0,n.addMonths)(e,-t)};var n=r(3274)},3623:(e,t,r)=>{"use strict";t.subQuarters=function(e,t){return(0,n.addQuarters)(e,-t)};var n=r(590)},6083:(e,t,r)=>{"use strict";t.subWeeks=function(e,t){return(0,n.addWeeks)(e,-t)};var n=r(3237)},8624:(e,t,r)=>{"use strict";t.subYears=function(e,t){return(0,n.addYears)(e,-t)};var n=r(8463)},5905:(e,t)=>{"use strict";t.toDate=function(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}},4329:(e,t,r)=>{"use strict";t.transpose=function(e,t){const r=t instanceof Date?(0,n.constructFrom)(t,0):new t(0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r};var n=r(3481)},2610:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createBrowserHistory:()=>S,createHashHistory:()=>C,createLocation:()=>m,createMemoryHistory:()=>R,createPath:()=>y,locationsAreEqual:()=>v,parsePath:()=>d});var n=r(7462);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}const a=function(e,t){void 0===t&&(t="");var r,n=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&i(e),l=t&&i(t),c=s||l;if(e&&i(e)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";if(a.length){var u=a[a.length-1];r="."===u||".."===u||""===u}else r=!1;for(var p=0,f=a.length;f>=0;f--){var h=a[f];"."===h?o(a,f):".."===h?(o(a,f),p++):p&&(o(a,f),p--)}if(!c)for(;p--;p)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var d=a.join("/");return r&&"/"!==d.substr(-1)&&(d+="/"),d};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const l=function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(Array.isArray(t))return Array.isArray(r)&&t.length===r.length&&t.every((function(t,n){return e(t,r[n])}));if("object"===typeof t||"object"===typeof r){var n=s(t),i=s(r);return n!==t||i!==r?e(n,i):Object.keys(Object.assign({},t,r)).every((function(n){return e(t[n],r[n])}))}return!1};var c=r(4554);function u(e){return"/"===e.charAt(0)?e:"/"+e}function p(e){return"/"===e.charAt(0)?e.substr(1):e}function f(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function d(e){var t=e||"/",r="",n="",i=t.indexOf("#");-1!==i&&(n=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(r=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}function y(e){var t=e.pathname,r=e.search,n=e.hash,i=t||"/";return r&&"?"!==r&&(i+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(i+="#"===n.charAt(0)?n:"#"+n),i}function m(e,t,r,i){var o;"string"===typeof e?(o=d(e)).state=t:(void 0===(o=(0,n.Z)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return r&&(o.key=r),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,r,n,i){if(null!=e){var o="function"===typeof e?e(t,r):e;"string"===typeof o?"function"===typeof n?n(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var r=!0;function n(){r&&e.apply(void 0,arguments)}return t.push(n),function(){r=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,r)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var w="popstate",x="hashchange";function E(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),b||(0,c.Z)(!1);var t=window.history,r=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,p=void 0===l?_:l,d=o.keyLength,v=void 0===d?6:d,S=e.basename?h(u(e.basename)):"";function k(e){var t=e||{},r=t.key,n=t.state,i=window.location,o=i.pathname+i.search+i.hash;return S&&(o=f(o,S)),m(o,n,r)}function T(){return Math.random().toString(36).substr(2,v)}var O=g();function A(e){(0,n.Z)(z,e),z.length=t.length,O.notifyListeners(z.location,z.action)}function P(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||R(k(e.state))}function C(){R(k(E()))}var N=!1;function R(e){if(N)N=!1,A();else{O.confirmTransitionTo(e,"POP",p,(function(t){t?A({action:"POP",location:e}):function(e){var t=z.location,r=M.indexOf(t.key);-1===r&&(r=0);var n=M.indexOf(e.key);-1===n&&(n=0);var i=r-n;i&&(N=!0,D(i))}(e)}))}}var j=k(E()),M=[j.key];function I(e){return S+y(e)}function D(e){t.go(e)}var L=0;function F(e){1===(L+=e)&&1===e?(window.addEventListener(w,P),i&&window.addEventListener(x,C)):0===L&&(window.removeEventListener(w,P),i&&window.removeEventListener(x,C))}var B=!1;var z={length:t.length,action:"POP",location:j,createHref:I,push:function(e,n){var i="PUSH",o=m(e,n,T(),z.location);O.confirmTransitionTo(o,i,p,(function(e){if(e){var n=I(o),a=o.key,l=o.state;if(r)if(t.pushState({key:a,state:l},null,n),s)window.location.href=n;else{var c=M.indexOf(z.location.key),u=M.slice(0,c+1);u.push(o.key),M=u,A({action:i,location:o})}else window.location.href=n}}))},replace:function(e,n){var i="REPLACE",o=m(e,n,T(),z.location);O.confirmTransitionTo(o,i,p,(function(e){if(e){var n=I(o),a=o.key,l=o.state;if(r)if(t.replaceState({key:a,state:l},null,n),s)window.location.replace(n);else{var c=M.indexOf(z.location.key);-1!==c&&(M[c]=o.key),A({action:i,location:o})}else window.location.replace(n)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=O.appendListener(e);return F(1),function(){F(-1),t()}}};return z}var k="hashchange",T={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+p(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:p,decodePath:u},slash:{encodePath:u,decodePath:u}};function O(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function A(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(O(window.location.href)+"#"+e)}function C(e){void 0===e&&(e={}),b||(0,c.Z)(!1);var t=window.history,r=(window.navigator.userAgent.indexOf("Firefox"),e),i=r.getUserConfirmation,o=void 0===i?_:i,a=r.hashType,s=void 0===a?"slash":a,l=e.basename?h(u(e.basename)):"",p=T[s],d=p.encodePath,v=p.decodePath;function w(){var e=v(A());return l&&(e=f(e,l)),m(e)}var x=g();function E(e){(0,n.Z)(z,e),z.length=t.length,x.notifyListeners(z.location,z.action)}var S=!1,C=null;function N(){var e=A(),t=d(e);if(e!==t)P(t);else{var r=w(),n=z.location;if(!S&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(n,r))return;if(C===y(r))return;C=null,function(e){if(S)S=!1,E();else{var t="POP";x.confirmTransitionTo(e,t,o,(function(r){r?E({action:t,location:e}):function(e){var t=z.location,r=I.lastIndexOf(y(t));-1===r&&(r=0);var n=I.lastIndexOf(y(e));-1===n&&(n=0);var i=r-n;i&&(S=!0,D(i))}(e)}))}}(r)}}var R=A(),j=d(R);R!==j&&P(j);var M=w(),I=[y(M)];function D(e){t.go(e)}var L=0;function F(e){1===(L+=e)&&1===e?window.addEventListener(k,N):0===L&&window.removeEventListener(k,N)}var B=!1;var z={length:t.length,action:"POP",location:M,createHref:function(e){var t=document.querySelector("base"),r="";return t&&t.getAttribute("href")&&(r=O(window.location.href)),r+"#"+d(l+y(e))},push:function(e,t){var r="PUSH",n=m(e,void 0,void 0,z.location);x.confirmTransitionTo(n,r,o,(function(e){if(e){var t=y(n),i=d(l+t);if(A()!==i){C=t,function(e){window.location.hash=e}(i);var o=I.lastIndexOf(y(z.location)),a=I.slice(0,o+1);a.push(t),I=a,E({action:r,location:n})}else E()}}))},replace:function(e,t){var r="REPLACE",n=m(e,void 0,void 0,z.location);x.confirmTransitionTo(n,r,o,(function(e){if(e){var t=y(n),i=d(l+t);A()!==i&&(C=t,P(i));var o=I.indexOf(y(z.location));-1!==o&&(I[o]=t),E({action:r,location:n})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=x.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=x.appendListener(e);return F(1),function(){F(-1),t()}}};return z}function N(e,t,r){return Math.min(Math.max(e,t),r)}function R(e){void 0===e&&(e={});var t=e,r=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,a=t.initialIndex,s=void 0===a?0:a,l=t.keyLength,c=void 0===l?6:l,u=g();function p(e){(0,n.Z)(_,e),_.length=_.entries.length,u.notifyListeners(_.location,_.action)}function f(){return Math.random().toString(36).substr(2,c)}var h=N(s,0,o.length-1),d=o.map((function(e){return m(e,void 0,"string"===typeof e?f():e.key||f())})),v=y;function b(e){var t=N(_.index+e,0,_.entries.length-1),n=_.entries[t];u.confirmTransitionTo(n,"POP",r,(function(e){e?p({action:"POP",location:n,index:t}):p()}))}var _={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:v,push:function(e,t){var n="PUSH",i=m(e,t,f(),_.location);u.confirmTransitionTo(i,n,r,(function(e){if(e){var t=_.index+1,r=_.entries.slice(0);r.length>t?r.splice(t,r.length-t,i):r.push(i),p({action:n,location:i,index:t,entries:r})}}))},replace:function(e,t){var n="REPLACE",i=m(e,t,f(),_.location);u.confirmTransitionTo(i,n,r,(function(e){e&&(_.entries[_.index]=i,p({action:n,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return _}},2110:(e,t,r)=>{"use strict";var n=r(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,r,n){if("string"!==typeof r){if(d){var i=h(r);i&&i!==d&&e(t,i,n)}var a=u(r);p&&(a=a.concat(p(r)));for(var s=l(t),y=l(r),m=0;m<a.length;++m){var v=a[m];if(!o[v]&&(!n||!n[v])&&(!y||!y[v])&&(!s||!s[v])){var g=f(r,v);try{c(t,v,g)}catch(b){}}}}return t}},2176:e=>{"use strict";e.exports=function(e,t,r,n,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},5095:e=>{var t=NaN,r="[object Symbol]",n=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,d=function(){return u.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==r}(e))return t;if(y(e)){var l="function"==typeof e.valueOf?e.valueOf():e;e=y(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var c=o.test(e);return c||a.test(e)?s(e.slice(2),c?2:8):i.test(e)?t:+e}e.exports=function(e,t,r){var n,i,o,a,s,l,c=0,u=!1,p=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var r=n,o=i;return n=i=void 0,c=t,a=e.apply(o,r)}function b(e){var r=e-l;return void 0===l||r>=t||r<0||p&&e-c>=o}function _(){var e=d();if(b(e))return w(e);s=setTimeout(_,function(e){var r=t-(e-l);return p?h(r,o-(e-c)):r}(e))}function w(e){return s=void 0,v&&n?g(e):(n=i=void 0,a)}function x(){var e=d(),r=b(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(_,t),u?g(e):a}(l);if(p)return s=setTimeout(_,t),g(l)}return void 0===s&&(s=setTimeout(_,t)),a}return t=m(t)||0,y(r)&&(u=!!r.leading,o=(p="maxWait"in r)?f(m(r.maxWait)||0,t):o,v="trailing"in r?!!r.trailing:v),x.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=i=s=void 0},x.flush=function(){return void 0===s?a:w(d())},x}},9498:e=>{var t="__lodash_hash_undefined__",r="[object Function]",n="[object GeneratorFunction]",i=/^\[object .+?Constructor\]$/,o="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,s=o||a||Function("return this")();var l=Array.prototype,c=Function.prototype,u=Object.prototype,p=s["__core-js_shared__"],f=function(){var e=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),h=c.toString,d=u.hasOwnProperty,y=u.toString,m=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=l.splice,g=T(s,"Map"),b=T(Object,"create");function _(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function x(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function E(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!==r&&n!==n)return i;return-1}function S(e){if(!A(e)||(t=e,f&&f in t))return!1;var t,o=function(e){var t=A(e)?y.call(e):"";return t==r||t==n}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}(e)?m:i;return o.test(function(e){if(null!=e){try{return h.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function k(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function T(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return S(r)?r:void 0}function O(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(O.Cache||x),r}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}_.prototype.clear=function(){this.__data__=b?b(null):{}},_.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},_.prototype.get=function(e){var r=this.__data__;if(b){var n=r[e];return n===t?void 0:n}return d.call(r,e)?r[e]:void 0},_.prototype.has=function(e){var t=this.__data__;return b?void 0!==t[e]:d.call(t,e)},_.prototype.set=function(e,r){return this.__data__[e]=b&&void 0===r?t:r,this},w.prototype.clear=function(){this.__data__=[]},w.prototype.delete=function(e){var t=this.__data__,r=E(t,e);return!(r<0)&&(r==t.length-1?t.pop():v.call(t,r,1),!0)},w.prototype.get=function(e){var t=this.__data__,r=E(t,e);return r<0?void 0:t[r][1]},w.prototype.has=function(e){return E(this.__data__,e)>-1},w.prototype.set=function(e,t){var r=this.__data__,n=E(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},x.prototype.clear=function(){this.__data__={hash:new _,map:new(g||w),string:new _}},x.prototype.delete=function(e){return k(this,e).delete(e)},x.prototype.get=function(e){return k(this,e).get(e)},x.prototype.has=function(e){return k(this,e).has(e)},x.prototype.set=function(e,t){return k(this,e).set(e,t),this},O.Cache=x,e.exports=O},3573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.default)((function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,r);null!=t&&(i=t)}})),i}))};var n,i=r(6054),o=(n=i)&&n.__esModule?n:{default:n};e.exports=t.default},6054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,r,n,i,o,a){var s=i||"<<anonymous>>",l=a||n;if(null==r[n])return t?new Error("Required "+o+" `"+l+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),p=6;p<c;p++)u[p-6]=arguments[p];return e.apply(void 0,[r,n,s,o,l].concat(u))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r},e.exports=t.default},888:(e,t,r)=>{"use strict";var n=r(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},2007:(e,t,r)=>{e.exports=r(888)()},9047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9513:function(e,t,r){!function(e,t,r,n,i,o,a,s,l,c,u,p,f,h,d,y,m,v,g,b,_,w,x,E,S,k,T,O,A,P,C,N,R,j,M,I,D,L,F,B,z,$,U,H,V,G,q,W,Y,K,X,Z,J,Q,ee,te,re,ne,ie,oe,ae,se,le,ce){"use strict";function ue(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var pe=ue(t),fe=ue(ae),he=ue(se);function de(e,t,r){return t=Te(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ye()?Reflect.construct(t,r||[],Te(e).constructor):t.apply(e,r))}function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ge(n.key),n)}}function xe(e,t,r){return t&&we(e.prototype,t),r&&we(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e,t,r){return(t=ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}function ke(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}function Ae(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=12,Ne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Re(e){var t=e?"string"==typeof e||e instanceof String?oe.parseISO(e):ne.toDate(e):new Date;return je(t)?t:null}function je(e,t){return t=t||new Date("1/1/1000"),o.isValid(e)&&!te.isBefore(e,t)}function Me(e,t,r){if("en"===r)return a.format(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=Ke(r);return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),!n&&Ye()&&Ke(Ye())&&(n=Ke(Ye())),a.format(e,t,{locale:n||null,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ie(e,t){var r=t.dateFormat,n=t.locale;return e&&Me(e,Array.isArray(r)?r[0]:r,n)||""}function De(e,t){var r=t.hour,n=void 0===r?0:r,i=t.minute,o=void 0===i?0:i,a=t.second,s=void 0===a?0:a;return N.setHours(C.setMinutes(P.setSeconds(e,s),o),n)}function Le(e,t,r){var n=Ke(t||Ye());return $.startOfWeek(e,{locale:n,weekStartsOn:r})}function Fe(e){return U.startOfMonth(e)}function Be(e){return V.startOfYear(e)}function ze(e){return H.startOfQuarter(e)}function $e(){return z.startOfDay(Re())}function Ue(e,t){return e&&t?J.isSameYear(e,t):!e&&!t}function He(e,t){return e&&t?Z.isSameMonth(e,t):!e&&!t}function Ve(e,t){return e&&t?Q.isSameQuarter(e,t):!e&&!t}function Ge(e,t){return e&&t?X.isSameDay(e,t):!e&&!t}function qe(e,t){return e&&t?K.isEqual(e,t):!e&&!t}function We(e,t,r){var n,i=z.startOfDay(t),o=G.endOfDay(r);try{n=re.isWithinInterval(e,{start:i,end:o})}catch(e){n=!1}return n}function Ye(){return("undefined"!=typeof window?window:globalThis).__localeId__}function Ke(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function Xe(e,t){return Me(R.setMonth(Re(),e),"LLLL",t)}function Ze(e,t){return Me(R.setMonth(Re(),e),"LLL",t)}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,i=t.excludeDates,o=t.excludeDateIntervals,a=t.includeDates,s=t.includeDateIntervals,l=t.filterDate;return at(e,{minDate:r,maxDate:n})||i&&i.some((function(t){return Ge(e,t.date?t.date:t)}))||o&&o.some((function(t){var r=t.start,n=t.end;return re.isWithinInterval(e,{start:r,end:n})}))||a&&!a.some((function(t){return Ge(e,t)}))||s&&!s.some((function(t){var r=t.start,n=t.end;return re.isWithinInterval(e,{start:r,end:n})}))||l&&!l(Re(e))||!1}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.excludeDates,n=t.excludeDateIntervals;return n&&n.length>0?n.some((function(t){var r=t.start,n=t.end;return re.isWithinInterval(e,{start:r,end:n})})):r&&r.some((function(t){return Ge(e,t.date?t.date:t)}))||!1}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,i=t.excludeDates,o=t.includeDates,a=t.filterDate;return at(e,{minDate:U.startOfMonth(r),maxDate:W.endOfMonth(n)})||i&&i.some((function(t){return He(e,t)}))||o&&!o.some((function(t){return He(e,t)}))||a&&!a(Re(e))||!1}function tt(e,t,r,n){var i=O.getYear(e),o=k.getMonth(e),a=O.getYear(t),s=k.getMonth(t),l=O.getYear(n);return i===a&&i===l?o<=r&&r<=s:i<a?l===i&&o<=r||l===a&&s>=r||l<a&&l>i:void 0}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,i=t.excludeDates,o=t.includeDates,a=t.filterDate;return at(e,{minDate:r,maxDate:n})||i&&i.some((function(t){return Ve(e,t)}))||o&&!o.some((function(t){return Ve(e,t)}))||a&&!a(Re(e))||!1}function nt(e,t,r){if(!o.isValid(t)||!o.isValid(r))return!1;var n=O.getYear(t),i=O.getYear(r);return n<=e&&i>=e}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,i=t.excludeDates,o=t.includeDates,a=t.filterDate,s=new Date(e,0,1);return at(s,{minDate:V.startOfYear(r),maxDate:Y.endOfYear(n)})||i&&i.some((function(e){return Ue(s,e)}))||o&&!o.some((function(e){return Ue(s,e)}))||a&&!a(Re(s))||!1}function ot(e,t,r,n){var i=O.getYear(e),o=T.getQuarter(e),a=O.getYear(t),s=T.getQuarter(t),l=O.getYear(n);return i===a&&i===l?o<=r&&r<=s:i<a?l===i&&o<=r||l===a&&s>=r||l<a&&l>i:void 0}function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate;return r&&L.differenceInCalendarDays(e,r)<0||n&&L.differenceInCalendarDays(e,n)>0}function st(e,t){return t.some((function(t){return w.getHours(t)===w.getHours(e)&&_.getMinutes(t)===_.getMinutes(e)}))}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.excludeTimes,n=t.includeTimes,i=t.filterTime;return r&&st(e,r)||n&&!st(e,n)||i&&!i(e)||!1}function ct(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var i,o=Re(),a=N.setHours(C.setMinutes(o,_.getMinutes(e)),w.getHours(e)),s=N.setHours(C.setMinutes(o,_.getMinutes(r)),w.getHours(r)),l=N.setHours(C.setMinutes(o,_.getMinutes(n)),w.getHours(n));try{i=!re.isWithinInterval(a,{start:s,end:l})}catch(e){i=!1}return i}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.includeDates,i=m.subMonths(e,1);return r&&F.differenceInCalendarMonths(r,i)>0||n&&n.every((function(e){return F.differenceInCalendarMonths(e,i)>0}))||!1}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxDate,n=t.includeDates,i=p.addMonths(e,1);return r&&F.differenceInCalendarMonths(i,r)>0||n&&n.every((function(e){return F.differenceInCalendarMonths(i,e)>0}))||!1}function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.includeDates,i=g.subYears(e,1);return r&&B.differenceInCalendarYears(r,i)>0||n&&n.every((function(e){return B.differenceInCalendarYears(e,i)>0}))||!1}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxDate,n=t.includeDates,i=h.addYears(e,1);return r&&B.differenceInCalendarYears(i,r)>0||n&&n.every((function(e){return B.differenceInCalendarYears(i,e)>0}))||!1}function dt(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter((function(e){return L.differenceInCalendarDays(e,t)>=0}));return I.min(n)}return r?I.min(r):t}function yt(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter((function(e){return L.differenceInCalendarDays(e,t)<=0}));return D.max(n)}return r?D.max(r):t}function mt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",r=new Map,n=0,o=e.length;n<o;n++){var a=e[n];if(i.isDate(a)){var s=Me(a,"MM.dd.yyyy"),l=r.get(s)||[];l.includes(t)||(l.push(t),r.set(s,l))}else if("object"===be(a)){var c=Object.keys(a),u=c[0],p=a[c[0]];if("string"==typeof u&&p.constructor===Array)for(var f=0,h=p.length;f<h;f++){var d=Me(p[f],"MM.dd.yyyy"),y=r.get(d)||[];y.includes(u)||(y.push(u),r.set(d,y))}}}return r}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--holidays",r=new Map;return e.forEach((function(e){var n=e.date,o=e.holidayName;if(i.isDate(n)){var a=Me(n,"MM.dd.yyyy"),s=r.get(a)||{};if(!("className"in s)||s.className!==t||(l=s.holidayNames,c=[o],l.length!==c.length||!l.every((function(e,t){return e===c[t]})))){var l,c;s.className=t;var u=s.holidayNames;s.holidayNames=u?[].concat(Ae(u),[o]):[o],r.set(a,s)}}})),r}function gt(e,t,r,n,i){for(var o=i.length,a=[],c=0;c<o;c++){var u=s.addMinutes(l.addHours(e,w.getHours(i[c])),_.getMinutes(i[c])),p=s.addMinutes(e,(r+1)*n);ee.isAfter(u,t)&&te.isBefore(u,p)&&a.push(i[c])}return a}function bt(e){return e<10?"0".concat(e):"".concat(e)}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ce,r=Math.ceil(O.getYear(e)/t)*t;return{startPeriod:r-(t-1),endPeriod:r}}function wt(e){var t=e.getSeconds(),r=e.getMilliseconds();return ne.toDate(e.getTime()-1e3*t-r)}function xt(e){if(!i.isDate(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function Et(e,t){if(!i.isDate(e)||!i.isDate(t))throw new Error("Invalid date received");var r=xt(e),n=xt(t);return te.isBefore(r,n)}function St(e){return" "===e.key}function kt(e,t,r,n){for(var i=[],o=0;o<2*t+1;o++){var a=e+t-o,s=!0;r&&(s=O.getYear(r)<=a),n&&s&&(s=O.getYear(n)>=a),s&&i.push(a)}return i}var Tt=function(e){function r(e){var n;_e(this,r),Ee(n=de(this,r,[e]),"renderOptions",(function(){var e=n.props.year,t=n.state.yearsList.map((function(t){return pe.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:n.onChange.bind(n,t),"aria-selected":e===t?"true":void 0},e===t?pe.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),r=n.props.minDate?O.getYear(n.props.minDate):null,i=n.props.maxDate?O.getYear(n.props.maxDate):null;return i&&n.state.yearsList.find((function(e){return e===i}))||t.unshift(pe.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},pe.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),r&&n.state.yearsList.find((function(e){return e===r}))||t.push(pe.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},pe.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),Ee(n,"onChange",(function(e){n.props.onChange(e)})),Ee(n,"handleClickOutside",(function(){n.props.onCancel()})),Ee(n,"shiftYears",(function(e){var t=n.state.yearsList.map((function(t){return t+e}));n.setState({yearsList:t})})),Ee(n,"incrementYears",(function(){return n.shiftYears(1)})),Ee(n,"decrementYears",(function(){return n.shiftYears(-1)}));var i=e.yearDropdownItemNumber,o=e.scrollableYearDropdown,a=i||(o?10:5);return n.state={yearsList:kt(n.props.year,a,n.props.minDate,n.props.maxDate)},n.dropdownRef=t.createRef(),n}return ke(r,e),xe(r,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,r=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=r?r.offsetTop+(r.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=n.clsx({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return pe.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}])}(pe.default.Component),Ot=fe.default(Tt),At=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"state",{dropdownVisible:!1}),Ee(e,"renderSelectOptions",(function(){for(var t=e.props.minDate?O.getYear(e.props.minDate):1900,r=e.props.maxDate?O.getYear(e.props.maxDate):2100,n=[],i=t;i<=r;i++)n.push(pe.default.createElement("option",{key:i,value:i},i));return n})),Ee(e,"onSelectChange",(function(t){e.onChange(t.target.value)})),Ee(e,"renderSelectMode",(function(){return pe.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),Ee(e,"renderReadView",(function(t){return pe.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},pe.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),pe.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),Ee(e,"renderDropdown",(function(){return pe.default.createElement(Ot,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),Ee(e,"renderScrollMode",(function(){var t=e.state.dropdownVisible,r=[e.renderReadView(!t)];return t&&r.unshift(e.renderDropdown()),r})),Ee(e,"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),Ee(e,"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),Ee(e,"handleYearChange",(function(t,r){e.onSelect(t,r),e.setOpen()})),Ee(e,"onSelect",(function(t,r){e.props.onSelect&&e.props.onSelect(t,r)})),Ee(e,"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return ke(t,e),xe(t,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return pe.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}])}(pe.default.Component),Pt=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"isSelectedMonth",(function(t){return e.props.month===t})),Ee(e,"renderOptions",(function(){return e.props.monthNames.map((function(t,r){return pe.default.createElement("div",{className:e.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(e,r),"aria-selected":e.isSelectedMonth(r)?"true":void 0},e.isSelectedMonth(r)?pe.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),Ee(e,"onChange",(function(t){return e.props.onChange(t)})),Ee(e,"handleClickOutside",(function(){return e.props.onCancel()})),e}return ke(t,e),xe(t,[{key:"render",value:function(){return pe.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}])}(pe.default.Component),Ct=fe.default(Pt),Nt=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"state",{dropdownVisible:!1}),Ee(e,"renderSelectOptions",(function(e){return e.map((function(e,t){return pe.default.createElement("option",{key:t,value:t},e)}))})),Ee(e,"renderSelectMode",(function(t){return pe.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),Ee(e,"renderReadView",(function(t,r){return pe.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},pe.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),pe.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[e.props.month]))})),Ee(e,"renderDropdown",(function(t){return pe.default.createElement(Ct,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),Ee(e,"renderScrollMode",(function(t){var r=e.state.dropdownVisible,n=[e.renderReadView(!r,t)];return r&&n.unshift(e.renderDropdown(t)),n})),Ee(e,"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),Ee(e,"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return ke(t,e),xe(t,[{key:"render",value:function(){var e,t=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return Ze(e,t.props.locale)}:function(e){return Xe(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(r);break;case"select":e=this.renderSelectMode(r)}return pe.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}])}(pe.default.Component);function Rt(e,t){for(var r=[],n=Fe(e),i=Fe(t);!ee.isAfter(n,i);)r.push(Re(n)),n=p.addMonths(n,1);return r}var jt=function(e){function t(e){var r;return _e(this,t),Ee(r=de(this,t,[e]),"renderOptions",(function(){return r.state.monthYearsList.map((function(e){var t=A.getTime(e),n=Ue(r.props.date,e)&&He(r.props.date,e);return pe.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:r.onChange.bind(r,t),"aria-selected":n?"true":void 0},n?pe.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Me(e,r.props.dateFormat,r.props.locale))}))})),Ee(r,"onChange",(function(e){return r.props.onChange(e)})),Ee(r,"handleClickOutside",(function(){r.props.onCancel()})),r.state={monthYearsList:Rt(r.props.minDate,r.props.maxDate)},r}return ke(t,e),xe(t,[{key:"render",value:function(){var e=n.clsx({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return pe.default.createElement("div",{className:e},this.renderOptions())}}])}(pe.default.Component),Mt=fe.default(jt),It=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"state",{dropdownVisible:!1}),Ee(e,"renderSelectOptions",(function(){for(var t=Fe(e.props.minDate),r=Fe(e.props.maxDate),n=[];!ee.isAfter(t,r);){var i=A.getTime(t);n.push(pe.default.createElement("option",{key:i,value:i},Me(t,e.props.dateFormat,e.props.locale))),t=p.addMonths(t,1)}return n})),Ee(e,"onSelectChange",(function(t){e.onChange(t.target.value)})),Ee(e,"renderSelectMode",(function(){return pe.default.createElement("select",{value:A.getTime(Fe(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),Ee(e,"renderReadView",(function(t){var r=Me(e.props.date,e.props.dateFormat,e.props.locale);return pe.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},pe.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),pe.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))})),Ee(e,"renderDropdown",(function(){return pe.default.createElement(Mt,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),Ee(e,"renderScrollMode",(function(){var t=e.state.dropdownVisible,r=[e.renderReadView(!t)];return t&&r.unshift(e.renderDropdown()),r})),Ee(e,"onChange",(function(t){e.toggleDropdown();var r=Re(parseInt(t));Ue(e.props.date,r)&&He(e.props.date,r)||e.props.onChange(r)})),Ee(e,"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return ke(t,e),xe(t,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return pe.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}])}(pe.default.Component),Dt=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ee(e=de(this,t,[].concat(i)),"dayEl",pe.default.createRef()),Ee(e,"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),Ee(e,"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),Ee(e,"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),Ee(e,"isSameDay",(function(t){return Ge(e.props.day,t)})),Ee(e,"isKeyboardSelected",(function(){var t;return!e.props.disabledKeyboardNavigation&&!(e.props.selectsMultiple?null===(t=e.props.selectedDates)||void 0===t?void 0:t.some((function(t){return e.isSameDayOrWeek(t)})):e.isSameDayOrWeek(e.props.selected))&&e.isSameDayOrWeek(e.props.preSelection)})),Ee(e,"isDisabled",(function(){return Je(e.props.day,e.props)})),Ee(e,"isExcluded",(function(){return Qe(e.props.day,e.props)})),Ee(e,"isStartOfWeek",(function(){return Ge(e.props.day,Le(e.props.day,e.props.locale,e.props.calendarStartDay))})),Ee(e,"isSameWeek",(function(t){return e.props.showWeekPicker&&Ge(t,Le(e.props.day,e.props.locale,e.props.calendarStartDay))})),Ee(e,"isSameDayOrWeek",(function(t){return e.isSameDay(t)||e.isSameWeek(t)})),Ee(e,"getHighLightedClass",(function(){var t=e.props,r=t.day,n=t.highlightDates;if(!n)return!1;var i=Me(r,"MM.dd.yyyy");return n.get(i)})),Ee(e,"getHolidaysClass",(function(){var t=e.props,r=t.day,n=t.holidays;if(!n)return!1;var i=Me(r,"MM.dd.yyyy");return n.has(i)?[n.get(i).className]:void 0})),Ee(e,"isInRange",(function(){var t=e.props,r=t.day,n=t.startDate,i=t.endDate;return!(!n||!i)&&We(r,n,i)})),Ee(e,"isInSelectingRange",(function(){var t,r=e.props,n=r.day,i=r.selectsStart,o=r.selectsEnd,a=r.selectsRange,s=r.selectsDisabledDaysInRange,l=r.startDate,c=r.endDate,u=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(i||o||a)||!u||!s&&e.isDisabled())&&(i&&c&&(te.isBefore(u,c)||qe(u,c))?We(n,u,c):(o&&l&&(ee.isAfter(u,l)||qe(u,l))||!(!a||!l||c||!ee.isAfter(u,l)&&!qe(u,l)))&&We(n,l,u))})),Ee(e,"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var r=e.props,n=r.day,i=r.startDate,o=r.selectsStart,a=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Ge(n,o?a:i)})),Ee(e,"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var r=e.props,n=r.day,i=r.endDate,o=r.selectsEnd,a=r.selectsRange,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Ge(n,o||a?s:i)})),Ee(e,"isRangeStart",(function(){var t=e.props,r=t.day,n=t.startDate,i=t.endDate;return!(!n||!i)&&Ge(n,r)})),Ee(e,"isRangeEnd",(function(){var t=e.props,r=t.day,n=t.startDate,i=t.endDate;return!(!n||!i)&&Ge(i,r)})),Ee(e,"isWeekend",(function(){var t=x.getDay(e.props.day);return 0===t||6===t})),Ee(e,"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===k.getMonth(e.props.day)})),Ee(e,"isBeforeMonth",(function(){return void 0!==e.props.month&&(k.getMonth(e.props.day)+1)%12===e.props.month})),Ee(e,"isCurrentDay",(function(){return e.isSameDay(Re())})),Ee(e,"isSelected",(function(){var t;return e.props.selectsMultiple?null===(t=e.props.selectedDates)||void 0===t?void 0:t.some((function(t){return e.isSameDayOrWeek(t)})):e.isSameDayOrWeek(e.props.selected)})),Ee(e,"getClassNames",(function(t){var r,i=e.props.dayClassName?e.props.dayClassName(t):void 0;return n.clsx("react-datepicker__day",i,"react-datepicker__day--"+Me(e.props.day,"ddd",r),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"),e.getHolidaysClass())})),Ee(e,"getAriaLabel",(function(){var t=e.props,r=t.day,n=t.ariaLabelPrefixWhenEnabled,i=void 0===n?"Choose":n,o=t.ariaLabelPrefixWhenDisabled,a=void 0===o?"Not available":o,s=e.isDisabled()||e.isExcluded()?a:i;return"".concat(s," ").concat(Me(r,"PPPP",e.props.locale))})),Ee(e,"getTitle",(function(){var t=e.props,r=t.day,n=t.holidays,i=void 0===n?new Map:n,o=t.excludeDates,a=Me(r,"MM.dd.yyyy"),s=[];return i.has(a)&&s.push.apply(s,Ae(i.get(a).holidayNames)),e.isExcluded()&&s.push(null==o?void 0:o.filter((function(e){return Ge(e.date?e.date:e,r)})).map((function(e){return e.message}))),s.join(", ")})),Ee(e,"getTabIndex",(function(t,r){var n=t||e.props.selected,i=r||e.props.preSelection;return(!e.props.showWeekPicker||!e.props.showWeekNumber&&e.isStartOfWeek())&&(e.isKeyboardSelected()||e.isSameDay(n)&&Ge(i,n))?0:-1})),Ee(e,"handleFocusDay",(function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!r.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(n=!0),e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()&&(n=!1),e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()&&(n=!1)),n&&(null===(t=e.dayEl.current)||void 0===t||t.focus({preventScroll:!0}))})),Ee(e,"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(E.getDate(e.props.day),e.props.day):E.getDate(e.props.day)})),Ee(e,"render",(function(){return pe.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.props.usePointerEvent?void 0:e.handleMouseEnter,onPointerEnter:e.props.usePointerEvent?e.handleMouseEnter:void 0,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),""!==e.getTitle()&&pe.default.createElement("span",{className:"overlay"},e.getTitle()))})),e}return ke(t,e),xe(t,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}])}(pe.default.Component),Lt=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"weekNumberEl",pe.default.createRef()),Ee(e,"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),Ee(e,"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),Ee(e,"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Ge(e.props.date,e.props.selected)&&Ge(e.props.date,e.props.preSelection)})),Ee(e,"getTabIndex",(function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||Ge(e.props.date,e.props.selected)&&Ge(e.props.preSelection,e.props.selected))?0:-1})),Ee(e,"handleFocusWeekNumber",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;0===e.getTabIndex()&&!t.isInputFocused&&Ge(e.props.date,e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})})),e}return ke(t,e),xe(t,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(e){this.handleFocusWeekNumber(e)}},{key:"render",value:function(){var e=this.props,t=e.weekNumber,r=e.ariaLabelPrefix,i=void 0===r?"week ":r,o=e.onClick,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o,"react-datepicker__week-number--selected":!!o&&Ge(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return pe.default.createElement("div",{ref:this.weekNumberEl,className:n.clsx(a),"aria-label":"".concat(i," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}])}(pe.default.Component),Ft=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"handleDayClick",(function(t,r){e.props.onDayClick&&e.props.onDayClick(t,r)})),Ee(e,"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),Ee(e,"handleWeekClick",(function(t,r,n){"function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,r,n),e.props.showWeekPicker&&e.handleDayClick(t,n),e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),Ee(e,"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):function(e,t){var r=t&&Ke(t)||Ye()&&Ke(Ye());return S.getISOWeek(e,r?{locale:r}:null)}(t)})),Ee(e,"renderDays",(function(){var t=e.startOfWeek(),r=[],n=e.formatWeekNumber(t);if(e.props.showWeekNumber){var i=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(e,t,n):void 0;r.push(pe.default.createElement(Lt,{key:"W",weekNumber:n,date:t,onClick:i,selected:e.props.selected,preSelection:e.props.preSelection,ariaLabelPrefix:e.props.ariaLabelPrefix,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef}))}return r.concat([0,1,2,3,4,5,6].map((function(r){var n=c.addDays(t,r);return pe.default.createElement(Dt,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:n.valueOf(),day:n,month:e.props.month,onClick:e.handleDayClick.bind(e,n),usePointerEvent:e.props.usePointerEvent,onMouseEnter:e.handleDayMouseEnter.bind(e,n),minDate:e.props.minDate,maxDate:e.props.maxDate,calendarStartDay:e.props.calendarStartDay,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,selectsMultiple:e.props.selectsMultiple,selectedDates:e.props.selectedDates,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),Ee(e,"startOfWeek",(function(){return Le(e.props.day,e.props.locale,e.props.calendarStartDay)})),Ee(e,"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Ge(e.startOfWeek(),e.props.selected)&&Ge(e.startOfWeek(),e.props.preSelection)})),e}return ke(t,e),xe(t,[{key:"render",value:function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Ge(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return pe.default.createElement("div",{className:n.clsx(e)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}])}(pe.default.Component),Bt="two_columns",zt="three_columns",$t="four_columns",Ut=Ee(Ee(Ee({},Bt,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),zt,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),$t,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function Ht(e,t){return e?$t:t?Bt:zt}var Vt=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Ee(e=de(this,t,[].concat(i)),"MONTH_REFS",Ae(Array(12)).map((function(){return pe.default.createRef()}))),Ee(e,"QUARTER_REFS",Ae(Array(4)).map((function(){return pe.default.createRef()}))),Ee(e,"isDisabled",(function(t){return Je(t,e.props)})),Ee(e,"isExcluded",(function(t){return Qe(t,e.props)})),Ee(e,"handleDayClick",(function(t,r){e.props.onDayClick&&e.props.onDayClick(t,r,e.props.orderInDisplay)})),Ee(e,"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),Ee(e,"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),Ee(e,"isRangeStartMonth",(function(t){var r=e.props,n=r.day,i=r.startDate,o=r.endDate;return!(!i||!o)&&He(R.setMonth(n,t),i)})),Ee(e,"isRangeStartQuarter",(function(t){var r=e.props,n=r.day,i=r.startDate,o=r.endDate;return!(!i||!o)&&Ve(j.setQuarter(n,t),i)})),Ee(e,"isRangeEndMonth",(function(t){var r=e.props,n=r.day,i=r.startDate,o=r.endDate;return!(!i||!o)&&He(R.setMonth(n,t),o)})),Ee(e,"isRangeEndQuarter",(function(t){var r=e.props,n=r.day,i=r.startDate,o=r.endDate;return!(!i||!o)&&Ve(j.setQuarter(n,t),o)})),Ee(e,"isInSelectingRangeMonth",(function(t){var r,n=e.props,i=n.day,o=n.selectsStart,a=n.selectsEnd,s=n.selectsRange,l=n.startDate,c=n.endDate,u=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return!(!(o||a||s)||!u)&&(o&&c?tt(u,c,t,i):(a&&l||!(!s||!l||c))&&tt(l,u,t,i))})),Ee(e,"isSelectingMonthRangeStart",(function(t){var r;if(!e.isInSelectingRangeMonth(t))return!1;var n=e.props,i=n.day,o=n.startDate,a=n.selectsStart,s=R.setMonth(i,t),l=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return He(s,a?l:o)})),Ee(e,"isSelectingMonthRangeEnd",(function(t){var r;if(!e.isInSelectingRangeMonth(t))return!1;var n=e.props,i=n.day,o=n.endDate,a=n.selectsEnd,s=n.selectsRange,l=R.setMonth(i,t),c=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return He(l,a||s?c:o)})),Ee(e,"isInSelectingRangeQuarter",(function(t){var r,n=e.props,i=n.day,o=n.selectsStart,a=n.selectsEnd,s=n.selectsRange,l=n.startDate,c=n.endDate,u=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return!(!(o||a||s)||!u)&&(o&&c?ot(u,c,t,i):(a&&l||!(!s||!l||c))&&ot(l,u,t,i))})),Ee(e,"isWeekInMonth",(function(t){var r=e.props.day,n=c.addDays(t,6);return He(t,r)||He(n,r)})),Ee(e,"isCurrentMonth",(function(e,t){return O.getYear(e)===O.getYear(Re())&&t===k.getMonth(Re())})),Ee(e,"isCurrentQuarter",(function(e,t){return O.getYear(e)===O.getYear(Re())&&t===T.getQuarter(Re())})),Ee(e,"isSelectedMonth",(function(e,t,r){return k.getMonth(r)===t&&O.getYear(e)===O.getYear(r)})),Ee(e,"isSelectedQuarter",(function(e,t,r){return T.getQuarter(e)===t&&O.getYear(e)===O.getYear(r)})),Ee(e,"renderWeeks",(function(){for(var t=[],r=e.props.fixedHeight,n=0,i=!1,o=Le(Fe(e.props.day),e.props.locale,e.props.calendarStartDay),a=e.props.showWeekPicker?Le(e.props.selected,e.props.locale,e.props.calendarStartDay):e.props.selected,s=e.props.showWeekPicker?Le(e.props.preSelection,e.props.locale,e.props.calendarStartDay):e.props.preSelection;t.push(pe.default.createElement(Ft,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:n,day:o,month:k.getMonth(e.props.day),onDayClick:e.handleDayClick,usePointerEvent:e.props.usePointerEvent,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:s,selected:a,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,selectsMultiple:e.props.selectsMultiple,selectedDates:e.props.selectedDates,showWeekNumber:e.props.showWeekNumbers,showWeekPicker:e.props.showWeekPicker,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!i;){n++,o=u.addWeeks(o,1);var l=r&&n>=6,c=!r&&!e.isWeekInMonth(o);if(l||c){if(!e.props.peekNextMonth)break;i=!0}}return t})),Ee(e,"onMonthClick",(function(t,r){var n=R.setMonth(e.props.day,r);et(n,e.props)||e.handleDayClick(Fe(n),t)})),Ee(e,"onMonthMouseEnter",(function(t){var r=R.setMonth(e.props.day,t);et(r,e.props)||e.handleDayMouseEnter(Fe(r))})),Ee(e,"handleMonthNavigation",(function(t,r){e.isDisabled(r)||e.isExcluded(r)||(e.props.setPreSelection(r),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),Ee(e,"onMonthKeyDown",(function(t,r){var n=e.props,i=n.selected,o=n.preSelection,a=n.disabledKeyboardNavigation,s=n.showTwoColumnMonthYearPicker,l=n.showFourColumnMonthYearPicker,c=n.setPreSelection,u=n.handleOnMonthKeyDown,f=t.key;if("Tab"!==f&&t.preventDefault(),!a){var h=Ht(l,s),d=Ut[h].verticalNavigationOffset,y=Ut[h].grid;switch(f){case"Enter":e.onMonthClick(t,r),c(i);break;case"ArrowRight":e.handleMonthNavigation(11===r?0:r+1,p.addMonths(o,1));break;case"ArrowLeft":e.handleMonthNavigation(0===r?11:r-1,m.subMonths(o,1));break;case"ArrowUp":e.handleMonthNavigation(y[0].includes(r)?r+12-d:r-d,m.subMonths(o,d));break;case"ArrowDown":e.handleMonthNavigation(y[y.length-1].includes(r)?r-12+d:r+d,p.addMonths(o,d))}}u&&u(t)})),Ee(e,"onQuarterClick",(function(t,r){var n=j.setQuarter(e.props.day,r);rt(n,e.props)||e.handleDayClick(ze(n),t)})),Ee(e,"onQuarterMouseEnter",(function(t){var r=j.setQuarter(e.props.day,t);rt(r,e.props)||e.handleDayMouseEnter(ze(r))})),Ee(e,"handleQuarterNavigation",(function(t,r){e.isDisabled(r)||e.isExcluded(r)||(e.props.setPreSelection(r),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),Ee(e,"onQuarterKeyDown",(function(t,r){var n=t.key;if(!e.props.disabledKeyboardNavigation)switch(n){case"Enter":e.onQuarterClick(t,r),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===r?1:r+1,f.addQuarters(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===r?4:r-1,v.subQuarters(e.props.preSelection,1))}})),Ee(e,"getMonthClassNames",(function(t){var r=e.props,i=r.day,o=r.startDate,a=r.endDate,s=r.selected,l=r.minDate,c=r.maxDate,u=r.preSelection,p=r.monthClassName,f=r.excludeDates,h=r.includeDates,d=p?p(R.setMonth(i,t)):void 0,y=R.setMonth(i,t);return n.clsx("react-datepicker__month-text","react-datepicker__month-".concat(t),d,{"react-datepicker__month-text--disabled":(l||c||f||h)&&et(y,e.props),"react-datepicker__month-text--selected":e.isSelectedMonth(i,t,s),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&e.isSelectedMonth(i,t,u),"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(t),"react-datepicker__month-text--in-range":tt(o,a,t,i),"react-datepicker__month-text--range-start":e.isRangeStartMonth(t),"react-datepicker__month-text--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(t),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(t),"react-datepicker__month-text--today":e.isCurrentMonth(i,t)})})),Ee(e,"getTabIndex",(function(t){var r=k.getMonth(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==r?"-1":"0"})),Ee(e,"getQuarterTabIndex",(function(t){var r=T.getQuarter(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==r?"-1":"0"})),Ee(e,"getAriaLabel",(function(t){var r=e.props,n=r.chooseDayAriaLabelPrefix,i=void 0===n?"Choose":n,o=r.disabledDayAriaLabelPrefix,a=void 0===o?"Not available":o,s=r.day,l=R.setMonth(s,t),c=e.isDisabled(l)||e.isExcluded(l)?a:i;return"".concat(c," ").concat(Me(l,"MMMM yyyy"))})),Ee(e,"getQuarterClassNames",(function(t){var r=e.props,i=r.day,o=r.startDate,a=r.endDate,s=r.selected,l=r.minDate,c=r.maxDate,u=r.preSelection,p=r.disabledKeyboardNavigation;return n.clsx("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter-text--disabled":(l||c)&&rt(j.setQuarter(i,t),e.props),"react-datepicker__quarter-text--selected":e.isSelectedQuarter(i,t,s),"react-datepicker__quarter-text--keyboard-selected":!p&&e.isSelectedQuarter(i,t,u),"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(t),"react-datepicker__quarter-text--in-range":ot(o,a,t,i),"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(t)})})),Ee(e,"getMonthContent",(function(t){var r=e.props,n=r.showFullMonthYearPicker,i=r.renderMonthContent,o=r.locale,a=r.day,s=Ze(t,o),l=Xe(t,o);return i?i(t,s,l,a):n?l:s})),Ee(e,"getQuarterContent",(function(t){var r=e.props,n=r.renderQuarterContent,i=function(e,t){return Me(j.setQuarter(Re(),e),"QQQ",t)}(t,r.locale);return n?n(t,i):i})),Ee(e,"renderMonths",(function(){var t=e.props,r=t.showTwoColumnMonthYearPicker,n=t.showFourColumnMonthYearPicker,i=t.day,o=t.selected;return Ut[Ht(n,r)].grid.map((function(t,r){return pe.default.createElement("div",{className:"react-datepicker__month-wrapper",key:r},t.map((function(t,r){return pe.default.createElement("div",{ref:e.MONTH_REFS[t],key:r,onClick:function(r){e.onMonthClick(r,t)},onKeyDown:function(r){St(r)&&(r.preventDefault(),r.key="Enter"),e.onMonthKeyDown(r,t)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onMonthMouseEnter(t)},onPointerEnter:e.props.usePointerEvent?function(){return e.onMonthMouseEnter(t)}:void 0,tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(i,t)?"date":void 0,"aria-selected":e.isSelectedMonth(i,t,o)},e.getMonthContent(t))})))}))})),Ee(e,"renderQuarters",(function(){var t=e.props,r=t.day,n=t.selected;return pe.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,i){return pe.default.createElement("div",{key:i,ref:e.QUARTER_REFS[i],role:"option",onClick:function(r){e.onQuarterClick(r,t)},onKeyDown:function(r){e.onQuarterKeyDown(r,t)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onQuarterMouseEnter(t)},onPointerEnter:e.props.usePointerEvent?function(){return e.onQuarterMouseEnter(t)}:void 0,className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(r,t,n),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(r,t)?"date":void 0},e.getQuarterContent(t))})))})),Ee(e,"getClassNames",(function(){var t=e.props,r=t.selectingDate,i=t.selectsStart,o=t.selectsEnd,a=t.showMonthYearPicker,s=t.showQuarterYearPicker,l=t.showWeekPicker;return n.clsx("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(i||o)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":s},{"react-datepicker__weekPicker":l})})),e}return ke(t,e),xe(t,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,r=e.showQuarterYearPicker,n=e.day,i=e.ariaLabelPrefix,o=void 0===i?"Month ":i,a=o?o.trim()+" ":"";return pe.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(a).concat(Me(n,"MMMM, yyyy")),role:"listbox"},t?this.renderMonths():r?this.renderQuarters():this.renderWeeks())}}])}(pe.default.Component),Gt=function(e){function t(){var e;_e(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Ee(e=de(this,t,[].concat(n)),"state",{height:null}),Ee(e,"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){e.list&&(e.list.scrollTop=e.centerLi&&t.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-e.header.clientHeight:e.list.clientHeight,e.centerLi))}))})),Ee(e,"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&ct(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&lt(t,e.props)||e.props.onChange(t)})),Ee(e,"isSelectedTime",(function(t){return e.props.selected&&(r=t,wt(e.props.selected).getTime()===wt(r).getTime());var r})),Ee(e,"isDisabledTime",(function(t){return(e.props.minTime||e.props.maxTime)&&ct(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&lt(t,e.props)})),Ee(e,"liClasses",(function(t){var r=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t):void 0];return e.isSelectedTime(t)&&r.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(t)&&r.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*w.getHours(t)+_.getMinutes(t))%e.props.intervals!=0&&r.push("react-datepicker__time-list-item--injected"),r.join(" ")})),Ee(e,"handleOnKeyDown",(function(t,r){" "===t.key&&(t.preventDefault(),t.key="Enter"),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||!t.target.previousSibling||(t.preventDefault(),t.target.previousSibling.focus()),"ArrowDown"!==t.key&&"ArrowRight"!==t.key||!t.target.nextSibling||(t.preventDefault(),t.target.nextSibling.focus()),"Enter"===t.key&&e.handleClick(r),e.props.handleOnKeyDown(t)})),Ee(e,"renderTimes",(function(){for(var t,r=[],n=e.props.format?e.props.format:"p",i=e.props.intervals,o=e.props.selected||e.props.openToDate||Re(),a=(t=o,z.startOfDay(t)),l=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),c=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}(o),u=c/i,p=0;p<u;p++){var f=s.addMinutes(a,p*i);if(r.push(f),l){var h=gt(a,f,p,i,l);r=r.concat(h)}}var d=r.reduce((function(e,t){return t.getTime()<=o.getTime()?t:e}),r[0]);return r.map((function(t,r){return pe.default.createElement("li",{key:r,onClick:e.handleClick.bind(e,t),className:e.liClasses(t),ref:function(r){t===d&&(e.centerLi=r)},onKeyDown:function(r){e.handleOnKeyDown(r,t)},tabIndex:t===d?0:-1,role:"option","aria-selected":e.isSelectedTime(t)?"true":void 0,"aria-disabled":e.isDisabledTime(t)?"true":void 0},Me(t,n,e.props.locale))}))})),e}return ke(t,e),xe(t,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return pe.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},pe.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},pe.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),pe.default.createElement("div",{className:"react-datepicker__time"},pe.default.createElement("div",{className:"react-datepicker__time-box"},pe.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}])}(pe.default.Component);Ee(Gt,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var qt=function(e){function t(e){var r;return _e(this,t),Ee(r=de(this,t,[e]),"YEAR_REFS",Ae(Array(r.props.yearItemNumber)).map((function(){return pe.default.createRef()}))),Ee(r,"isDisabled",(function(e){return Je(e,r.props)})),Ee(r,"isExcluded",(function(e){return Qe(e,r.props)})),Ee(r,"selectingDate",(function(){var e;return null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection})),Ee(r,"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(r);window.requestAnimationFrame(t)})),Ee(r,"handleYearClick",(function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)})),Ee(r,"handleYearNavigation",(function(e,t){var n=r.props,i=n.date,o=n.yearItemNumber,a=_t(i,o).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(r.props.setPreSelection(t),e-a==-1?r.updateFocusOnPaginate(o-1):e-a===o?r.updateFocusOnPaginate(0):r.YEAR_REFS[e-a].current.focus())})),Ee(r,"isSameDay",(function(e,t){return Ge(e,t)})),Ee(r,"isCurrentYear",(function(e){return e===O.getYear(Re())})),Ee(r,"isRangeStart",(function(e){return r.props.startDate&&r.props.endDate&&Ue(M.setYear(Re(),e),r.props.startDate)})),Ee(r,"isRangeEnd",(function(e){return r.props.startDate&&r.props.endDate&&Ue(M.setYear(Re(),e),r.props.endDate)})),Ee(r,"isInRange",(function(e){return nt(e,r.props.startDate,r.props.endDate)})),Ee(r,"isInSelectingRange",(function(e){var t=r.props,n=t.selectsStart,i=t.selectsEnd,o=t.selectsRange,a=t.startDate,s=t.endDate;return!(!(n||i||o)||!r.selectingDate())&&(n&&s?nt(e,r.selectingDate(),s):(i&&a||!(!o||!a||s))&&nt(e,a,r.selectingDate()))})),Ee(r,"isSelectingRangeStart",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.startDate,i=t.selectsStart;return Ue(M.setYear(Re(),e),i?r.selectingDate():n)})),Ee(r,"isSelectingRangeEnd",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.endDate,i=t.selectsEnd,o=t.selectsRange;return Ue(M.setYear(Re(),e),i||o?r.selectingDate():n)})),Ee(r,"isKeyboardSelected",(function(e){var t=Be(M.setYear(r.props.date,e));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Ge(t,Be(r.props.selected))&&Ge(t,Be(r.props.preSelection))})),Ee(r,"onYearClick",(function(e,t){var n=r.props.date;r.handleYearClick(Be(M.setYear(n,t)),e)})),Ee(r,"onYearKeyDown",(function(e,t){var n=e.key,i=r.props.handleOnKeyDown;if(!r.props.disabledKeyboardNavigation)switch(n){case"Enter":r.onYearClick(e,t),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(t+1,h.addYears(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(t-1,g.subYears(r.props.preSelection,1))}i&&i(e)})),Ee(r,"getYearClassNames",(function(e){var t=r.props,i=t.date,o=t.minDate,a=t.maxDate,s=t.selected,l=t.excludeDates,c=t.includeDates,u=t.filterDate,p=t.yearClassName;return n.clsx("react-datepicker__year-text","react-datepicker__year-".concat(e),p?p(M.setYear(i,e)):void 0,{"react-datepicker__year-text--selected":e===O.getYear(s),"react-datepicker__year-text--disabled":(o||a||l||c||u)&&it(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--range-start":r.isRangeStart(e),"react-datepicker__year-text--range-end":r.isRangeEnd(e),"react-datepicker__year-text--in-range":r.isInRange(e),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})})),Ee(r,"getYearTabIndex",(function(e){return r.props.disabledKeyboardNavigation?"-1":e===O.getYear(r.props.preSelection)?"0":"-1"})),Ee(r,"getYearContainerClassNames",(function(){var e=r.props,t=e.selectingDate,i=e.selectsStart,o=e.selectsEnd,a=e.selectsRange;return n.clsx("react-datepicker__year",{"react-datepicker__year--selecting-range":t&&(i||o||a)})})),Ee(r,"getYearContent",(function(e){return r.props.renderYearContent?r.props.renderYearContent(e):e})),r}return ke(t,e),xe(t,[{key:"render",value:function(){for(var e=this,t=[],r=this.props,n=r.date,i=r.yearItemNumber,o=r.onYearMouseEnter,a=r.onYearMouseLeave,s=_t(n,i),l=s.startPeriod,c=s.endPeriod,u=function(r){t.push(pe.default.createElement("div",{ref:e.YEAR_REFS[r-l],onClick:function(t){e.onYearClick(t,r)},onKeyDown:function(t){St(t)&&(t.preventDefault(),t.key="Enter"),e.onYearKeyDown(t,r)},tabIndex:e.getYearTabIndex(r),className:e.getYearClassNames(r),onMouseEnter:e.props.usePointerEvent?void 0:function(e){return o(e,r)},onPointerEnter:e.props.usePointerEvent?function(e){return o(e,r)}:void 0,onMouseLeave:e.props.usePointerEvent?void 0:function(e){return a(e,r)},onPointerLeave:e.props.usePointerEvent?function(e){return a(e,r)}:void 0,key:r,"aria-current":e.isCurrentYear(r)?"date":void 0},e.getYearContent(r)))},p=l;p<=c;p++)u(p);return pe.default.createElement("div",{className:this.getYearContainerClassNames()},pe.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))}}])}(pe.default.Component),Wt=function(e){function t(e){var r;return _e(this,t),Ee(r=de(this,t,[e]),"onTimeChange",(function(e){r.setState({time:e});var t=r.props.date,n=t instanceof Date&&!isNaN(t)?t:new Date;n.setHours(e.split(":")[0]),n.setMinutes(e.split(":")[1]),r.props.onChange(n)})),Ee(r,"renderTimeInput",(function(){var e=r.state.time,t=r.props,n=t.date,i=t.timeString,o=t.customTimeInput;return o?pe.default.cloneElement(o,{date:n,value:e,onChange:r.onTimeChange}):pe.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){r.onTimeChange(e.target.value||i)}})})),r.state={time:r.props.timeString},r}return ke(t,e),xe(t,[{key:"render",value:function(){return pe.default.createElement("div",{className:"react-datepicker__input-time-container"},pe.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),pe.default.createElement("div",{className:"react-datepicker-time__input-container"},pe.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}])}(pe.default.Component);function Yt(e){var t=e.showTimeSelectOnly,r=void 0!==t&&t,n=e.showTime,i=void 0!==n&&n,o=e.className,a=e.children,s=r?"Choose Time":"Choose Date".concat(i?" and Time":"");return pe.default.createElement("div",{className:o,role:"dialog","aria-label":s,"aria-modal":"true"},a)}var Kt,Xt=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Zt=function(e){function t(e){var r;return _e(this,t),Ee(r=de(this,t,[e]),"handleClickOutside",(function(e){r.props.onClickOutside(e)})),Ee(r,"setClickOutsideRef",(function(){return r.containerRef.current})),Ee(r,"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Xt.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&r.props.onDropdownFocus()})),Ee(r,"getDateInView",(function(){var e=r.props,t=e.preSelection,n=e.selected,i=e.openToDate,o=dt(r.props),a=yt(r.props),s=Re();return i||n||t||(o&&te.isBefore(s,o)?o:a&&ee.isAfter(s,a)?a:s)})),Ee(r,"increaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:p.addMonths(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Ee(r,"decreaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:m.subMonths(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Ee(r,"handleDayClick",(function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)})),Ee(r,"handleDayMouseEnter",(function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)})),Ee(r,"handleMonthMouseLeave",(function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()})),Ee(r,"handleYearMouseEnter",(function(e,t){r.setState({selectingDate:M.setYear(Re(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)})),Ee(r,"handleYearMouseLeave",(function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)})),Ee(r,"handleYearChange",(function(e){r.props.onYearChange&&(r.props.onYearChange(e),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),Ee(r,"handleMonthChange",(function(e){r.handleCustomMonthChange(e),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),Ee(r,"handleCustomMonthChange",(function(e){r.props.onMonthChange&&(r.props.onMonthChange(e),r.setState({isRenderAriaLiveMessage:!0}))})),Ee(r,"handleMonthYearChange",(function(e){r.handleYearChange(e),r.handleMonthChange(e)})),Ee(r,"changeYear",(function(e){r.setState((function(t){var r=t.date;return{date:M.setYear(r,e)}}),(function(){return r.handleYearChange(r.state.date)}))})),Ee(r,"changeMonth",(function(e){r.setState((function(t){var r=t.date;return{date:R.setMonth(r,e)}}),(function(){return r.handleMonthChange(r.state.date)}))})),Ee(r,"changeMonthYear",(function(e){r.setState((function(t){var r=t.date;return{date:M.setYear(R.setMonth(r,k.getMonth(e)),O.getYear(e))}}),(function(){return r.handleMonthYearChange(r.state.date)}))})),Ee(r,"header",(function(){var e=Le(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),t=[];return r.props.showWeekNumbers&&t.push(pe.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var i=c.addDays(e,t),o=r.formatWeekday(i,r.props.locale),a=r.props.weekDayClassName?r.props.weekDayClassName(i):void 0;return pe.default.createElement("div",{key:t,className:n.clsx("react-datepicker__day-name",a)},o)})))})),Ee(r,"formatWeekday",(function(e,t){return r.props.formatWeekDay?function(e,t,r){return t(Me(e,"EEEE",r))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return Me(e,"EEE",t)}(e,t):function(e,t){return Me(e,"EEEEEE",t)}(e,t)})),Ee(r,"decreaseYear",(function(){r.setState((function(e){var t=e.date;return{date:g.subYears(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),Ee(r,"clearSelectingDate",(function(){r.setState({selectingDate:null})})),Ee(r,"renderPreviousButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=ft(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.yearItemNumber,i=void 0===n?Ce:n,o=_t(Be(g.subYears(e,i)),i).endPeriod,a=r&&O.getYear(r);return a&&a>o||!1}(r.state.date,r.props);break;default:e=ut(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.decreaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null);var i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,a=o.previousMonthButtonLabel,s=o.previousYearButtonLabel,l=r.props,c=l.previousMonthAriaLabel,u=void 0===c?"string"==typeof a?a:"Previous Month":c,p=l.previousYearAriaLabel,f=void 0===p?"string"==typeof s?s:"Previous Year":p;return pe.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":i?f:u},pe.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},i?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}})),Ee(r,"increaseYear",(function(){r.setState((function(e){var t=e.date;return{date:h.addYears(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),Ee(r,"renderNextButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=ht(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxDate,n=t.yearItemNumber,i=void 0===n?Ce:n,o=_t(h.addYears(e,i),i).startPeriod,a=r&&O.getYear(r);return a&&a<o||!1}(r.state.date,r.props);break;default:e=pt(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.increaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null);var i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,a=o.nextMonthButtonLabel,s=o.nextYearButtonLabel,l=r.props,c=l.nextMonthAriaLabel,u=void 0===c?"string"==typeof a?a:"Next Month":c,p=l.nextYearAriaLabel,f=void 0===p?"string"==typeof s?s:"Next Year":p;return pe.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":i?f:u},pe.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},i?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}})),Ee(r,"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),pe.default.createElement("div",{className:t.join(" ")},Me(e,r.props.dateFormat,r.props.locale))})),Ee(r,"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showYearDropdown&&!e)return pe.default.createElement(At,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:O.getYear(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),Ee(r,"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthDropdown&&!e)return pe.default.createElement(Nt,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:k.getMonth(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})})),Ee(r,"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthYearDropdown&&!e)return pe.default.createElement(It,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})})),Ee(r,"handleTodayButtonClick",(function(e){r.props.onSelect($e(),e),r.props.setPreSelection&&r.props.setPreSelection($e())})),Ee(r,"renderTodayButton",(function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return pe.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return r.handleTodayButtonClick(e)}},r.props.todayButton)})),Ee(r,"renderDefaultHeader",(function(e){var t=e.monthDate,n=e.i;return pe.default.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),pe.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)),pe.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),Ee(r,"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,n=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var i=ut(r.state.date,r.props),o=pt(r.state.date,r.props),a=ft(r.state.date,r.props),s=ht(r.state.date,r.props),l=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return pe.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(ve(ve({},r.state),{},{customHeaderCount:n,monthDate:t,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:i,nextMonthButtonDisabled:o,prevYearButtonDisabled:a,nextYearButtonDisabled:s})),l&&pe.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),Ee(r,"renderYearHeader",(function(e){var t=e.monthDate,n=r.props,i=n.showYearPicker,o=_t(t,n.yearItemNumber),a=o.startPeriod,s=o.endPeriod;return pe.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},i?"".concat(a," - ").concat(s):O.getYear(t))})),Ee(r,"renderHeader",(function(e){switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(e);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(e);default:return r.renderDefaultHeader(e)}})),Ee(r,"renderMonths",(function(){var e;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var t=[],n=r.props.showPreviousMonths?r.props.monthsShown-1:0,i=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?h.addYears(r.state.date,n):m.subMonths(r.state.date,n),o=null!==(e=r.props.monthSelectedIn)&&void 0!==e?e:n,a=0;a<r.props.monthsShown;++a){var s=a-o+n,l=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?h.addYears(i,s):p.addMonths(i,s),c="month-".concat(a),u=a<r.props.monthsShown-1,f=a>0;t.push(pe.default.createElement("div",{key:c,ref:function(e){r.monthContainer=e},className:"react-datepicker__month-container"},r.renderHeader({monthDate:l,i:a}),pe.default.createElement(Vt,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:l,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,usePointerEvent:r.props.usePointerEvent,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:a,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,selectsMultiple:r.props.selectsMultiple,selectedDates:r.props.selectedDates,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:u,monthShowsDuplicateDaysStart:f})))}return t}})),Ee(r,"renderYears",(function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?pe.default.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),pe.default.createElement(qt,Se({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0})),Ee(r,"renderTimeSection",(function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return pe.default.createElement(Gt,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})})),Ee(r,"renderInputTimeSection",(function(){var e=new Date(r.props.selected),t=je(e)&&Boolean(r.props.selected)?"".concat(bt(e.getHours()),":").concat(bt(e.getMinutes())):"";if(r.props.showTimeInput)return pe.default.createElement(Wt,{date:e,timeString:t,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})})),Ee(r,"renderAriaLiveRegion",(function(){var e,t=_t(r.state.date,r.props.yearItemNumber),n=t.startPeriod,i=t.endPeriod;return e=r.props.showYearPicker?"".concat(n," - ").concat(i):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?O.getYear(r.state.date):"".concat(Xe(k.getMonth(r.state.date),r.props.locale)," ").concat(O.getYear(r.state.date)),pe.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&e)})),Ee(r,"renderChildren",(function(){if(r.props.children)return pe.default.createElement("div",{className:"react-datepicker__children-container"},r.props.children)})),r.containerRef=pe.default.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return ke(t,e),xe(t,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.preSelection||Ge(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Ge(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var r=!He(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return r&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var e=this.props.container||Yt;return pe.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},pe.default.createElement(e,{className:n.clsx("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Ce}}}])}(pe.default.Component),Jt=function(e){var t=e.icon,r=e.className,n=void 0===r?"":r,i=e.onClick,o="react-datepicker__calendar-icon";return pe.default.isValidElement(t)?pe.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(o," ").concat(n),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof i&&i(e)}}):"string"==typeof t?pe.default.createElement("i",{className:"".concat(o," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:i}):pe.default.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},pe.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Qt=function(e){function t(e){var r;return _e(this,t),(r=de(this,t,[e])).el=document.createElement("div"),r}return ke(t,e),xe(t,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return he.default.createPortal(this.props.children,this.el)}}])}(pe.default.Component),er=function(e){return!e.disabled&&-1!==e.tabIndex},tr=function(e){function t(e){var r;return _e(this,t),Ee(r=de(this,t,[e]),"getTabChildren",(function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(er)})),Ee(r,"handleFocusStart",(function(){var e=r.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),Ee(r,"handleFocusEnd",(function(){var e=r.getTabChildren();e&&e.length>1&&e[0].focus()})),r.tabLoopRef=pe.default.createRef(),r}return ke(t,e),xe(t,[{key:"render",value:function(){return this.props.enableTabLoop?pe.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},pe.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,pe.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}])}(pe.default.Component),rr=function(e){function t(){return _e(this,t),de(this,t,arguments)}return ke(t,e),xe(t,[{key:"render",value:function(){var e,t=this.props,r=t.className,i=t.wrapperClassName,o=t.hidePopper,a=t.popperComponent,s=t.targetComponent,l=t.enableTabLoop,c=t.popperOnKeyDown,u=t.portalId,p=t.portalHost,f=t.popperProps,h=t.showArrow;if(!o){var d=n.clsx("react-datepicker-popper",r);e=pe.default.createElement(tr,{enableTabLoop:l},pe.default.createElement("div",{ref:f.refs.setFloating,style:f.floatingStyles,className:d,"data-placement":f.placement,onKeyDown:c},a,h&&pe.default.createElement(le.FloatingArrow,{ref:f.arrowRef,context:f.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(e=pe.default.createElement(this.props.popperContainer,{},e)),u&&!o&&(e=pe.default.createElement(Qt,{portalId:u,portalHost:p},e));var y=n.clsx("react-datepicker-wrapper",i);return pe.default.createElement(pe.default.Fragment,null,pe.default.createElement("div",{ref:f.refs.setReference,className:y},s),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0}}}])}(pe.default.Component),nr=(Kt=rr,function(e){var t=ve(ve({},e),{},{popperModifiers:e.popperModifiers||[],popperProps:e.popperProps||{},hidePopper:"boolean"!=typeof e.hidePopper||e.hidePopper}),r=pe.default.useRef(),n=le.useFloating(ve({open:!t.hidePopper,whileElementsMounted:le.autoUpdate,placement:t.popperPlacement,middleware:[le.flip({padding:15}),le.offset(10),le.arrow({element:r})].concat(Ae(t.popperModifiers))},t.popperProps));return pe.default.createElement(Kt,Se({},t,{popperProps:ve(ve({},n),{},{arrowRef:r})}))}),ir="react-datepicker-ignore-onclickoutside",or=fe.default(Zt),ar="Date input not valid.",sr=function(e){function t(e){var r;return _e(this,t),Ee(r=de(this,t,[e]),"getPreSelection",(function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Re()})),Ee(r,"modifyHolidays",(function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var r=new Date(t.date);return o.isValid(r)?[].concat(Ae(e),[ve(ve({},t),{},{date:r})]):e}),[])})),Ee(r,"calcInitialState",(function(){var e,t=r.getPreSelection(),n=dt(r.props),i=yt(r.props),o=n&&te.isBefore(t,z.startOfDay(n))?n:i&&ee.isAfter(t,G.endOfDay(i))?i:t;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:o,highlightDates:mt(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),Ee(r,"clearPreventFocusTimeout",(function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)})),Ee(r,"setFocus",(function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})})),Ee(r,"setBlur",(function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()})),Ee(r,"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:cr},(function(){e||r.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&r.setBlur(),r.setState({inputValue:null})}))}))})),Ee(r,"inputOk",(function(){return i.isDate(r.state.preSelection)})),Ee(r,"isCalendarOpen",(function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open})),Ee(r,"handleFocus",(function(e){r.state.preventFocus||(r.props.onFocus(e),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})})),Ee(r,"sendFocusBackToInput",(function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},(function(){r.preventFocusTimeout=setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))}))})),Ee(r,"cancelFocusInput",(function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null})),Ee(r,"deferFocusInput",(function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout((function(){return r.setFocus()}),1)})),Ee(r,"handleDropdownFocus",(function(){r.cancelFocusInput()})),Ee(r,"handleBlur",(function(e){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(e),r.setState({focused:!1})})),Ee(r,"handleCalendarClickOutside",(function(e){r.props.inline||r.setOpen(!1),r.props.onClickOutside(e),r.props.withPortal&&e.preventDefault()})),Ee(r,"handleChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(r,t),"function"==typeof i.isDefaultPrevented&&!i.isDefaultPrevented())){r.setState({inputValue:i.target.value,lastPreSelectChange:lr});var o,s,l,c,u,p,f,h,d=(o=i.target.value,s=r.props.dateFormat,l=r.props.locale,c=r.props.strictParsing,u=r.props.minDate,p=null,f=Ke(l)||Ke(Ye()),h=!0,Array.isArray(s)?(s.forEach((function(e){var t=ie.parse(o,e,new Date,{locale:f,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});c&&(h=je(t,u)&&o===Me(t,e,l)),je(t,u)&&h&&(p=t)})),p):(p=ie.parse(o,s,new Date,{locale:f,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),c?h=je(p)&&o===Me(p,s,l):je(p)||(s=s.match(Ne).map((function(e){var t=e[0];if("p"===t||"P"===t){var r=a.longFormatters[t];return f?r(e,f.formatLong):t}return e})).join(""),o.length>0&&(p=ie.parse(o,s.slice(0,o.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),je(p)||(p=new Date(o))),je(p)&&h?p:null));r.props.showTimeSelectOnly&&r.props.selected&&d&&!Ge(d,r.props.selected)&&(d=ce.set(r.props.selected,{hours:w.getHours(d),minutes:_.getMinutes(d),seconds:b.getSeconds(d)})),!d&&i.target.value||r.setSelected(d,i,!0)}})),Ee(r,"handleSelect",(function(e,t,n){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(e);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var i=r.props,o=i.startDate,a=i.endDate;!o||a||Et(e,o)||r.setOpen(!1)}})),Ee(r,"setSelected",(function(e,t,n,i){var o=e;if(r.props.showYearPicker){if(null!==o&&it(O.getYear(o),r.props))return}else if(r.props.showMonthYearPicker){if(null!==o&&et(o,r.props))return}else if(null!==o&&Je(o,r.props))return;var a=r.props,s=a.onChange,l=a.selectsRange,c=a.startDate,u=a.endDate,p=a.selectsMultiple,f=a.selectedDates,h=a.minTime;if(!qe(r.props.selected,o)||r.props.allowSameDay||l||p)if(null!==o&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(o=De(o,{hour:w.getHours(r.props.selected),minute:_.getMinutes(r.props.selected),second:b.getSeconds(r.props.selected)})),n||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly||h&&(o=De(o,{hour:h.getHours(),minute:h.getMinutes(),second:h.getSeconds()})),r.props.inline||r.setState({preSelection:o}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:i})),l){var d=c&&u;c||u?c&&!u&&(null===o?s([null,null],t):Et(o,c)?s([o,null],t):s([c,o],t)):s([o,null],t),d&&s([o,null],t)}else p?null!=f&&f.length?f.some((function(e){return Ge(e,o)}))?s(f.filter((function(e){return!Ge(e,o)})),t):s([].concat(Ae(f),[o]),t):s([o],t):s(o,t);n||(r.props.onSelect(o,t),r.setState({inputValue:null}))})),Ee(r,"setPreSelection",(function(e){var t=void 0!==r.props.minDate,n=void 0!==r.props.maxDate,i=!0;if(e){var o=z.startOfDay(e);if(t&&n)i=We(e,r.props.minDate,r.props.maxDate);else if(t){var a=z.startOfDay(r.props.minDate);i=ee.isAfter(e,a)||qe(o,a)}else if(n){var s=G.endOfDay(r.props.maxDate);i=te.isBefore(e,s)||qe(o,s)}}i&&r.setState({preSelection:e})})),Ee(r,"toggleCalendar",(function(){r.setOpen(!r.state.open)})),Ee(r,"handleTimeChange",(function(e){var t=r.props.selected?r.props.selected:r.getPreSelection(),n=r.props.selected?e:De(t,{hour:w.getHours(e),minute:_.getMinutes(e)});r.setState({preSelection:n}),r.props.onChange(n),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})})),Ee(r,"onInputClick",(function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()})),Ee(r,"onInputKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',i=r.calendar.componentNode&&r.calendar.componentNode.querySelector(n);return void(i&&i.focus({preventScroll:!0}))}var o=Re(r.state.preSelection);"Enter"===t?(e.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===cr?(r.handleSelect(o,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(o)):r.setOpen(!1)):"Escape"===t?(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):"Tab"===t&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ar})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||r.onInputClick()})),Ee(r,"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),Ee(r,"onDayKeyDown",(function(e){r.props.onKeyDown(e);var t,n=e.key,i=e.shiftKey,o=Re(r.state.preSelection);if("Enter"===n)e.preventDefault(),r.handleSelect(o,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(o);else if("Escape"===n)e.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ar});else if(!r.props.disabledKeyboardNavigation){var a;switch(n){case"ArrowLeft":a=r.props.showWeekPicker?y.subWeeks(o,1):d.subDays(o,1);break;case"ArrowRight":a=r.props.showWeekPicker?u.addWeeks(o,1):c.addDays(o,1);break;case"ArrowUp":a=y.subWeeks(o,1);break;case"ArrowDown":a=u.addWeeks(o,1);break;case"PageUp":a=i?g.subYears(o,1):m.subMonths(o,1);break;case"PageDown":a=i?h.addYears(o,1):p.addMonths(o,1);break;case"Home":a=Le(o,r.props.locale,r.props.calendarStartDay);break;case"End":t=o,a=q.endOfWeek(t);break;default:a=null}if(!a)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:ar}));if(e.preventDefault(),r.setState({lastPreSelectChange:cr}),r.props.adjustDateOnChange&&r.setSelected(a),r.setPreSelection(a),r.props.inline){var s=k.getMonth(o),l=k.getMonth(a),f=O.getYear(o),v=O.getYear(a);s!==l||f!==v?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}})),Ee(r,"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.sendFocusBackToInput())})),Ee(r,"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],e):r.props.onChange(null,e),r.setState({inputValue:null})})),Ee(r,"clear",(function(){r.onClearClick()})),Ee(r,"onScroll",(function(e){"boolean"==typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"==typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)})),Ee(r,"renderCalendar",(function(){return r.props.inline||r.isCalendarOpen()?pe.default.createElement(or,{ref:function(e){r.calendar=e},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsMultiple:r.props.selectsMultiple,selectedDates:r.props.selectedDates,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:vt(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:ir,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection,usePointerEvent:r.props.usePointerEvent,yearClassName:r.props.yearClassName},r.props.children):null})),Ee(r,"renderAriaLiveRegion",(function(){var e,t=r.props,n=t.dateFormat,i=t.locale,o=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return e=r.props.selectsRange?"Selected start date: ".concat(Ie(r.props.startDate,{dateFormat:o,locale:i}),". ").concat(r.props.endDate?"End date: "+Ie(r.props.endDate,{dateFormat:o,locale:i}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Ie(r.props.selected,{dateFormat:n,locale:i})):r.props.showYearPicker?"Selected year: ".concat(Ie(r.props.selected,{dateFormat:"yyyy",locale:i})):r.props.showMonthYearPicker?"Selected month: ".concat(Ie(r.props.selected,{dateFormat:"MMMM yyyy",locale:i})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Ie(r.props.selected,{dateFormat:"yyyy, QQQ",locale:i})):"Selected date: ".concat(Ie(r.props.selected,{dateFormat:o,locale:i})),pe.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)})),Ee(r,"renderDateInput",(function(){var e,t=n.clsx(r.props.className,Ee({},ir,r.state.open)),i=r.props.customInput||pe.default.createElement("input",{type:"text"}),o=r.props.customInputRef||"ref",a="string"==typeof r.props.value?r.props.value:"string"==typeof r.state.inputValue?r.state.inputValue:r.props.selectsRange?function(e,t,r){if(!e)return"";var n=Ie(e,r),i=t?Ie(t,r):"";return"".concat(n," - ").concat(i)}(r.props.startDate,r.props.endDate,r.props):r.props.selectsMultiple?function(e,t){if(null==e||!e.length)return"";var r=Ie(e[0],t);if(1===e.length)return r;if(2===e.length){var n=Ie(e[1],t);return"".concat(r,", ").concat(n)}var i=e.length-1;return"".concat(r," (+").concat(i,")")}(r.props.selectedDates,r.props):Ie(r.props.selected,r.props);return pe.default.cloneElement(i,(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(e={},o,(function(e){r.input=e})),"value",a),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(e,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",n.clsx(i.props.className,t)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),Ee(Ee(Ee(e,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))})),Ee(r,"renderClearButton",(function(){var e=r.props,t=e.isClearable,i=e.disabled,o=e.selected,a=e.startDate,s=e.endDate,l=e.clearButtonTitle,c=e.clearButtonClassName,u=void 0===c?"":c,p=e.ariaLabelClose,f=void 0===p?"Close":p,h=e.selectedDates;return t&&(null!=o||null!=a||null!=s||null!=h&&h.length)?pe.default.createElement("button",{type:"button",className:n.clsx("react-datepicker__close-icon",u,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":f,onClick:r.onClearClick,title:l,tabIndex:-1}):null})),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return ke(t,e),xe(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var r,n;e.inline&&(r=e.selected,n=this.props.selected,r&&n?k.getMonth(r)!==k.getMonth(n)||O.getYear(r)!==O.getYear(n):r!==n)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:mt(this.props.highlightDates)}),t.focused||qe(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props,t=e.showIcon,r=e.icon,n=e.calendarIconClassname,i=e.toggleCalendarOnIconClick,o=this.state.open;return pe.default.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&pe.default.createElement(Jt,Se({icon:r,className:"".concat(n," ").concat(o&&"react-datepicker-ignore-onclickoutside")},i?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?pe.default.createElement(tr,{enableTabLoop:this.props.enableTabLoop},pe.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=pe.default.createElement(Qt,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),pe.default.createElement("div",null,this.renderInputContainer(),t)}return pe.default.createElement(nr,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop,showArrow:this.props.showPopperArrow})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Ce,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}}}])}(pe.default.Component),lr="input",cr="navigate";e.CalendarContainer=Yt,e.default=sr,e.getDefaultLocale=Ye,e.registerLocale=function(e,t){var r="undefined"!=typeof window?window:globalThis;r.__localeData__||(r.__localeData__={}),r.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,r(2791),r(2007),r(4810),r(837),r(8812),r(4935),r(6666),r(9818),r(2426),r(3237),r(3274),r(590),r(8463),r(4616),r(6083),r(8186),r(3623),r(8624),r(8499),r(6829),r(3490),r(2783),r(7629),r(8917),r(9150),r(7867),r(2810),r(3130),r(3528),r(6609),r(7941),r(3825),r(5566),r(9840),r(4940),r(2677),r(4504),r(9897),r(6010),r(8837),r(5340),r(4975),r(643),r(7234),r(3199),r(5145),r(3004),r(8226),r(86),r(8616),r(5244),r(9985),r(9141),r(6274),r(3581),r(724),r(5905),r(6747),r(1989),r(11),r(4164),r(2024),r(9645))},4810:e=>{function t(e){var r,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(r=0;r<o;r++)e[r]&&(n=t(e[r]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function r(){for(var e,r,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(r=t(e))&&(i&&(i+=" "),i+=r);return i}e.exports=r,e.exports.clsx=r},6674:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.DebounceInput=void 0;var i=s(r(2791)),o=s(r(5095)),a=["element","onChange","value","minLength","debounceTimeout","forceNotifyByEnter","forceNotifyOnBlur","onKeyDown","onBlur","inputRef"];function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,r,n,s=h(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),m(d(t=s.call(this,e)),"onChange",(function(e){e.persist();var r=t.state.value,n=t.props.minLength;t.setState({value:e.target.value},(function(){var i=t.state.value;i.length>=n?t.notify(e):r.length>i.length&&t.notify(u(u({},e),{},{target:u(u({},e.target),{},{value:""})}))}))})),m(d(t),"onKeyDown",(function(e){"Enter"===e.key&&t.forceNotify(e);var r=t.props.onKeyDown;r&&(e.persist(),r(e))})),m(d(t),"onBlur",(function(e){t.forceNotify(e);var r=t.props.onBlur;r&&(e.persist(),r(e))})),m(d(t),"createNotifier",(function(e){if(e<0)t.notify=function(){return null};else if(0===e)t.notify=t.doNotify;else{var r=(0,o.default)((function(e){t.isDebouncing=!1,t.doNotify(e)}),e);t.notify=function(e){t.isDebouncing=!0,r(e)},t.flush=function(){return r.flush()},t.cancel=function(){t.isDebouncing=!1,r.cancel()}}})),m(d(t),"doNotify",(function(){t.props.onChange.apply(void 0,arguments)})),m(d(t),"forceNotify",(function(e){var r=t.props.debounceTimeout;if(t.isDebouncing||!(r>0)){t.cancel&&t.cancel();var n=t.state.value,i=t.props.minLength;n.length>=i?t.doNotify(e):t.doNotify(u(u({},e),{},{target:u(u({},e.target),{},{value:n})}))}})),t.isDebouncing=!1,t.state={value:"undefined"===typeof e.value||null===e.value?"":e.value};var r=t.props.debounceTimeout;return t.createNotifier(r),t}return t=c,(r=[{key:"componentDidUpdate",value:function(e){if(!this.isDebouncing){var t=this.props,r=t.value,n=t.debounceTimeout,i=e.debounceTimeout,o=e.value,a=this.state.value;"undefined"!==typeof r&&o!==r&&a!==r&&this.setState({value:r}),n!==i&&this.createNotifier(n)}}},{key:"componentWillUnmount",value:function(){this.flush&&this.flush()}},{key:"render",value:function(){var e,t,r=this.props,n=r.element,o=(r.onChange,r.value,r.minLength,r.debounceTimeout,r.forceNotifyByEnter),s=r.forceNotifyOnBlur,c=r.onKeyDown,p=r.onBlur,f=r.inputRef,h=l(r,a),d=this.state.value;e=o?{onKeyDown:this.onKeyDown}:c?{onKeyDown:c}:{},t=s?{onBlur:this.onBlur}:p?{onBlur:p}:{};var y=f?{ref:f}:{};return i.default.createElement(n,u(u(u(u({},h),{},{onChange:this.onChange,value:d},e),t),y))}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.default.PureComponent);t.DebounceInput=v,m(v,"defaultProps",{element:"input",type:"text",onKeyDown:void 0,onBlur:void 0,value:void 0,minLength:0,debounceTimeout:100,forceNotifyByEnter:!0,forceNotifyOnBlur:!0,inputRef:void 0})},3628:(e,t,r)=>{"use strict";var n=r(6674).DebounceInput;n.DebounceInput=n,e.exports=n},4463:(e,t,r)=>{"use strict";var n=r(2791),i=r(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},d={};function y(e,t,r,n,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!p.call(d,e)||!p.call(h,e)&&(f.test(e)?d[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,g);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,g);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,g);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,L=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=n.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Z(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function oe(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function pe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function de(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=de(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(fe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var me=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ge(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Ee=null;function Se(e){if(e=yi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=vi(t),we(e.stateNode,e.type,t))}}function ke(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Oe(e,t){return e(t)}function Ae(){}var Pe=!1;function Ce(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Oe(e,t,r)}finally{Pe=!1,(null!==xe||null!==Ee)&&(Ae(),Te())}}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var n=vi(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var Re=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Re=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(tu){Re=!1}function Me(e,t,r,n,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Ie=!1,De=null,Le=!1,Fe=null,Be={onError:function(e){Ie=!0,De=e}};function ze(e,t,r,n,i,o,a,s,l){Ie=!1,De=null,Me.apply(Be,arguments)}function $e(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if($e(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return He(i),e;if(a===n)return He(i),t;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,Qe=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,nt=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/st|0)|0},at=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~i;0!==s?n=ut(s):0!==(o&=a)&&(n=ut(o))}else 0!==(a=r&~i)?n=ut(a):0!==o&&(n=ut(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-ot(t)),n|=e[r],t&=~i;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function dt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var gt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,Et,St,kt=!1,Tt=[],Ot=null,At=null,Pt=null,Ct=new Map,Nt=new Map,Rt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function It(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=di(e.target);if(null!==t){var r=$e(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ue(r)))return e.blockedOn=t,void St(e.priority,(function(){xt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=yi(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Ft(e,t,r){Lt(e)&&r.delete(t)}function Bt(){kt=!1,null!==Ot&&Lt(Ot)&&(Ot=null),null!==At&&Lt(At)&&(At=null),null!==Pt&&Lt(Pt)&&(Pt=null),Ct.forEach(Ft),Nt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function $t(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var r=1;r<Tt.length;r++){var n=Tt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Ot&&zt(Ot,e),null!==At&&zt(At,e),null!==Pt&&zt(Pt,e),Ct.forEach(t),Nt.forEach(t),r=0;r<Rt.length;r++)(n=Rt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Dt(r),null===r.blockedOn&&Rt.shift()}var Ut=_.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,r,n){var i=gt,o=Ut.transition;Ut.transition=null;try{gt=1,qt(e,t,r,n)}finally{gt=i,Ut.transition=o}}function Gt(e,t,r,n){var i=gt,o=Ut.transition;Ut.transition=null;try{gt=4,qt(e,t,r,n)}finally{gt=i,Ut.transition=o}}function qt(e,t,r,n){if(Ht){var i=Yt(e,t,r,n);if(null===i)zn(e,t,n,Wt,r),Mt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Ot=It(Ot,e,t,r,n,i),!0;case"dragenter":return At=It(At,e,t,r,n,i),!0;case"mouseover":return Pt=It(Pt,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Ct.set(o,It(Ct.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,It(Nt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Mt(e,n),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var o=yi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,r,n))&&zn(e,t,n,Wt,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else zn(e,t,n,null,r)}}var Wt=null;function Yt(e,t,r,n){if(Wt=null,null!==(e=di(e=_e(n))))if(null===(t=$e(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case Qe:return 4;case et:case tt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,Jt=null;function Qt(){if(Jt)return Jt;var e,t,r=Zt,n=r.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function er(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tr(){return!0}function rr(){return!1}function nr(e){function t(t,r,n,i,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tr:rr,this.isPropagationStopped=rr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),t}var ir,or,ar,sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=nr(sr),cr=L({},sr,{view:0,detail:0}),ur=nr(cr),pr=L({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(ir=e.screenX-ar.screenX,or=e.screenY-ar.screenY):or=ir=0,ar=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:or}}),fr=nr(pr),hr=nr(L({},pr,{dataTransfer:0})),dr=nr(L({},cr,{relatedTarget:0})),yr=nr(L({},sr,{animationName:0,elapsedTime:0,pseudoElement:0})),mr=nr(L({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vr=nr(L({},sr,{data:0})),gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function xr(){return wr}var Er=nr(L({},cr,{key:function(e){if(e.key){var t=gr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=er(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return"keypress"===e.type?er(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?er(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sr=nr(L({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kr=nr(L({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr})),Tr=nr(L({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=nr(L({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Ar=[9,13,27,32],Pr=u&&"CompositionEvent"in window,Cr=null;u&&"documentMode"in document&&(Cr=document.documentMode);var Nr=u&&"TextEvent"in window&&!Cr,Rr=u&&(!Pr||Cr&&8<Cr&&11>=Cr),jr=String.fromCharCode(32),Mr=!1;function Ir(e,t){switch(e){case"keyup":return-1!==Ar.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Lr=!1;var Fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fr[e.type]:"textarea"===t}function zr(e,t,r,n){ke(n),0<(t=Un(t,"onChange")).length&&(r=new lr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $r=null,Ur=null;function Hr(e){Mn(e,0)}function Vr(e){if(W(mi(e)))return e}function Gr(e,t){if("change"===e)return t}var qr=!1;if(u){var Wr;if(u){var Yr="oninput"in document;if(!Yr){var Kr=document.createElement("div");Kr.setAttribute("oninput","return;"),Yr="function"===typeof Kr.oninput}Wr=Yr}else Wr=!1;qr=Wr&&(!document.documentMode||9<document.documentMode)}function Xr(){$r&&($r.detachEvent("onpropertychange",Zr),Ur=$r=null)}function Zr(e){if("value"===e.propertyName&&Vr(Ur)){var t=[];zr(t,Ur,e,_e(e)),Ce(Hr,t)}}function Jr(e,t,r){"focusin"===e?(Xr(),Ur=r,($r=t).attachEvent("onpropertychange",Zr)):"focusout"===e&&Xr()}function Qr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vr(Ur)}function en(e,t){if("click"===e)return Vr(t)}function tn(e,t){if("input"===e||"change"===e)return Vr(t)}var rn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function nn(e,t){if(rn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!p.call(t,i)||!rn(e[i],t[i]))return!1}return!0}function on(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function an(e,t){var r,n=on(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=on(n)}}function sn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ln(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function cn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function un(e){var t=ln(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&sn(r.ownerDocument.documentElement,r)){if(null!==n&&cn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=an(r,o);var a=an(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=u&&"documentMode"in document&&11>=document.documentMode,fn=null,hn=null,dn=null,yn=!1;function mn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==fn||fn!==Y(n)||("selectionStart"in(n=fn)&&cn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},dn&&nn(dn,n)||(dn=n,0<(n=Un(hn,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}function vn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var gn={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},bn={},_n={};function wn(e){if(bn[e])return bn[e];if(!gn[e])return e;var t,r=gn[e];for(t in r)if(r.hasOwnProperty(t)&&t in _n)return bn[e]=r[t];return e}u&&(_n=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);var xn=wn("animationend"),En=wn("animationiteration"),Sn=wn("animationstart"),kn=wn("transitionend"),Tn=new Map,On="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){Tn.set(e,t),l(t,[e])}for(var Pn=0;Pn<On.length;Pn++){var Cn=On[Pn];An(Cn.toLowerCase(),"on"+(Cn[0].toUpperCase()+Cn.slice(1)))}An(xn,"onAnimationEnd"),An(En,"onAnimationIteration"),An(Sn,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(kn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nn));function jn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,l,c){if(ze.apply(this,arguments),Ie){if(!Ie)throw Error(o(198));var u=De;Ie=!1,De=null,Le||(Le=!0,Fe=u)}}(n,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;jn(i,s,c),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;jn(i,s,c),o=l}}}if(Le)throw e=Fe,Le=!1,Fe=null,e}function In(e,t){var r=t[pi];void 0===r&&(r=t[pi]=new Set);var n=e+"__bubble";r.has(n)||(Bn(t,e,2,!1),r.add(n))}function Dn(e,t,r){var n=0;t&&(n|=4),Bn(r,e,n,t)}var Ln="_reactListening"+Math.random().toString(36).slice(2);function Fn(e){if(!e[Ln]){e[Ln]=!0,a.forEach((function(t){"selectionchange"!==t&&(Rn.has(t)||Dn(t,!1,e),Dn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ln]||(t[Ln]=!0,Dn("selectionchange",!1,t))}}function Bn(e,t,r,n){switch(Kt(t)){case 1:var i=Vt;break;case 4:i=Gt;break;default:i=qt}r=i.bind(null,t,r,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function zn(e,t,r,n,i){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=di(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue e}s=s.parentNode}}n=n.return}Ce((function(){var n=o,i=_e(r),a=[];e:{var s=Tn.get(e);if(void 0!==s){var l=lr,c=e;switch(e){case"keypress":if(0===er(r))break e;case"keydown":case"keyup":l=Er;break;case"focusin":c="focus",l=dr;break;case"focusout":c="blur",l=dr;break;case"beforeblur":case"afterblur":l=dr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kr;break;case xn:case En:case Sn:l=yr;break;case kn:l=Tr;break;case"scroll":l=ur;break;case"wheel":l=Or;break;case"copy":case"cut":case"paste":l=mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Sr}var u=0!==(4&t),p=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,d=n;null!==d;){var y=(h=d).stateNode;if(5===h.tag&&null!==y&&(h=y,null!==f&&(null!=(y=Ne(d,f))&&u.push($n(d,y,h)))),p)break;d=d.return}0<u.length&&(s=new l(s,c,null,r,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!di(c)&&!c[ui])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?di(c):null)&&(c!==(p=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,y="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(u=Sr,y="onPointerLeave",f="onPointerEnter",d="pointer"),p=null==l?s:mi(l),h=null==c?s:mi(c),(s=new u(y,d+"leave",l,r,i)).target=p,s.relatedTarget=h,y=null,di(i)===n&&((u=new u(f,d+"enter",c,r,i)).target=h,u.relatedTarget=p,y=u),p=y,l&&c)e:{for(f=c,d=0,h=u=l;h;h=Hn(h))d++;for(h=0,y=f;y;y=Hn(y))h++;for(;0<d-h;)u=Hn(u),d--;for(;0<h-d;)f=Hn(f),h--;for(;d--;){if(u===f||null!==f&&u===f.alternate)break e;u=Hn(u),f=Hn(f)}u=null}else u=null;null!==l&&Vn(a,s,l,u,!1),null!==c&&null!==p&&Vn(a,p,c,u,!0)}if("select"===(l=(s=n?mi(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Gr;else if(Br(s))if(qr)m=tn;else{m=Qr;var v=Jr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=en);switch(m&&(m=m(e,n))?zr(a,m,r,i):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=n?mi(n):window,e){case"focusin":(Br(v)||"true"===v.contentEditable)&&(fn=v,hn=n,dn=null);break;case"focusout":dn=hn=fn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,mn(a,r,i);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":mn(a,r,i)}var g;if(Pr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Lr?Ir(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Rr&&"ko"!==r.locale&&(Lr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Lr&&(g=Qt()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,Lr=!0)),0<(v=Un(n,b)).length&&(b=new vr(b,e,null,r,i),a.push({event:b,listeners:v}),g?b.data=g:null!==(g=Dr(r))&&(b.data=g))),(g=Nr?function(e,t){switch(e){case"compositionend":return Dr(t);case"keypress":return 32!==t.which?null:(Mr=!0,jr);case"textInput":return(e=t.data)===jr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(Lr)return"compositionend"===e||!Pr&&Ir(e,t)?(e=Qt(),Jt=Zt=Xt=null,Lr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Un(n,"onBeforeInput")).length&&(i=new vr("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=g))}Mn(a,t)}))}function $n(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Un(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,r))&&n.unshift($n(e,o,i)),null!=(o=Ne(e,t))&&n.push($n(e,o,i))),e=e.return}return n}function Hn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vn(e,t,r,n,i){for(var o=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Ne(r,o))&&a.unshift($n(r,l,s)):i||null!=(l=Ne(r,o))&&a.push($n(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Gn=/\r\n?/g,qn=/\u0000|\uFFFD/g;function Wn(e){return("string"===typeof e?e:""+e).replace(Gn,"\n").replace(qn,"")}function Yn(e,t,r){if(t=Wn(t),Wn(e)!==t&&r)throw Error(o(425))}function Kn(){}var Xn=null,Zn=null;function Jn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Qn="function"===typeof setTimeout?setTimeout:void 0,ei="function"===typeof clearTimeout?clearTimeout:void 0,ti="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ti?function(e){return ti.resolve(null).then(e).catch(ni)}:Qn;function ni(e){setTimeout((function(){throw e}))}function ii(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void $t(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);$t(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ai(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),li="__reactFiber$"+si,ci="__reactProps$"+si,ui="__reactContainer$"+si,pi="__reactEvents$"+si,fi="__reactListeners$"+si,hi="__reactHandles$"+si;function di(e){var t=e[li];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ui]||r[li]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ai(e);null!==e;){if(r=e[li])return r;e=ai(e)}return t}r=(e=r).parentNode}return null}function yi(e){return!(e=e[li]||e[ui])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function vi(e){return e[ci]||null}var gi=[],bi=-1;function _i(e){return{current:e}}function wi(e){0>bi||(e.current=gi[bi],gi[bi]=null,bi--)}function xi(e,t){bi++,gi[bi]=e.current,e.current=t}var Ei={},Si=_i(Ei),ki=_i(!1),Ti=Ei;function Oi(e,t){var r=e.type.contextTypes;if(!r)return Ei;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){wi(ki),wi(Si)}function Ci(e,t,r){if(Si.current!==Ei)throw Error(o(168));xi(Si,t),xi(ki,r)}function Ni(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return L({},r,n)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ti=Si.current,xi(Si,e),xi(ki,ki.current),!0}function ji(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=Ni(e,t,Ti),n.__reactInternalMemoizedMergedChildContext=e,wi(ki),wi(Si),xi(Si,e)):wi(ki),xi(ki,r)}var Mi=null,Ii=!1,Di=!1;function Li(e){null===Mi?Mi=[e]:Mi.push(e)}function Fi(){if(!Di&&null!==Mi){Di=!0;var e=0,t=gt;try{var r=Mi;for(gt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Mi=null,Ii=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),qe(Je,Fi),i}finally{gt=t,Di=!1}}return null}var Bi=[],zi=0,$i=null,Ui=0,Hi=[],Vi=0,Gi=null,qi=1,Wi="";function Yi(e,t){Bi[zi++]=Ui,Bi[zi++]=$i,$i=e,Ui=t}function Ki(e,t,r){Hi[Vi++]=qi,Hi[Vi++]=Wi,Hi[Vi++]=Gi,Gi=e;var n=qi;e=Wi;var i=32-ot(n)-1;n&=~(1<<i),r+=1;var o=32-ot(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,qi=1<<32-ot(t)+i|r<<i|n,Wi=o+e}else qi=1<<o|r<<i|n,Wi=e}function Xi(e){null!==e.return&&(Yi(e,1),Ki(e,1,0))}function Zi(e){for(;e===$i;)$i=Bi[--zi],Bi[zi]=null,Ui=Bi[--zi],Bi[zi]=null;for(;e===Gi;)Gi=Hi[--Vi],Hi[Vi]=null,Wi=Hi[--Vi],Hi[Vi]=null,qi=Hi[--Vi],Hi[Vi]=null}var Ji=null,Qi=null,eo=!1,to=null;function ro(e,t){var r=Ac(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function no(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ji=e,Qi=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ji=e,Qi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Gi?{id:qi,overflow:Wi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ac(18,null,null,0)).stateNode=t,r.return=e,e.child=r,Ji=e,Qi=null,!0);default:return!1}}function io(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function oo(e){if(eo){var t=Qi;if(t){var r=t;if(!no(e,t)){if(io(e))throw Error(o(418));t=oi(r.nextSibling);var n=Ji;t&&no(e,t)?ro(n,r):(e.flags=-4097&e.flags|2,eo=!1,Ji=e)}}else{if(io(e))throw Error(o(418));e.flags=-4097&e.flags|2,eo=!1,Ji=e}}}function ao(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ji=e}function so(e){if(e!==Ji)return!1;if(!eo)return ao(e),eo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jn(e.type,e.memoizedProps)),t&&(t=Qi)){if(io(e))throw lo(),Error(o(418));for(;t;)ro(e,t),t=oi(t.nextSibling)}if(ao(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Qi=oi(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Qi=null}}else Qi=Ji?oi(e.stateNode.nextSibling):null;return!0}function lo(){for(var e=Qi;e;)e=oi(e.nextSibling)}function co(){Qi=Ji=null,eo=!1}function uo(e){null===to?to=[e]:to.push(e)}var po=_.ReactCurrentBatchConfig;function fo(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var ho=_i(null),yo=null,mo=null,vo=null;function go(){vo=mo=yo=null}function bo(e){var t=ho.current;wi(ho),e._currentValue=t}function _o(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wo(e,t){yo=e,vo=mo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ms=!0),e.firstContext=null)}function xo(e){var t=e._currentValue;if(vo!==e)if(e={context:e,memoizedValue:t,next:null},null===mo){if(null===yo)throw Error(o(308));mo=e,yo.dependencies={lanes:0,firstContext:e}}else mo=mo.next=e;return t}var Eo=null;function So(e){null===Eo?Eo=[e]:Eo.push(e)}function ko(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,So(t)):(r.next=i.next,i.next=r),t.interleaved=r,To(e,n)}function To(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Oo=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function No(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&kl)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,To(e,r)}return null===(i=n.interleaved)?(t.next=t,So(n)):(t.next=i.next,i.next=t),n.interleaved=t,To(e,r)}function Ro(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function jo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mo(e,t,r,n){var i=e.updateQueue;Oo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var p=i.baseState;for(a=0,u=c=l=null,s=o;;){var f=s.lane,h=s.eventTime;if((n&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var d=e,y=s;switch(f=t,h=r,y.tag){case 1:if("function"===typeof(d=y.payload)){p=d.call(h,p,f);break e}p=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(f="function"===typeof(d=y.payload)?d.call(h,p,f):d)||void 0===f)break e;p=L({},p,f);break e;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=p):u=u.next=h,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===u&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=p}}function Io(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var Do=(new n.Component).refs;function Lo(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var Fo={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Zl(),i=Jl(e),o=Co(n,i);o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=No(e,o,i))&&(Ql(t,e,i,n),Ro(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Zl(),i=Jl(e),o=Co(n,i);o.tag=1,o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=No(e,o,i))&&(Ql(t,e,i,n),Ro(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zl(),n=Jl(e),i=Co(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=No(e,i,n))&&(Ql(t,e,n,r),Ro(t,e,n))}};function Bo(e,t,r,n,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!nn(r,n)||!nn(i,o))}function zo(e,t,r){var n=!1,i=Ei,o=t.contextType;return"object"===typeof o&&null!==o?o=xo(o):(i=Ai(t)?Ti:Si.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?Oi(e,i):Ei),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fo,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function $o(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Fo.enqueueReplaceState(t,t.state,null)}function Uo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Do,Ao(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=xo(o):(o=Ai(t)?Ti:Si.current,i.context=Oi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Lo(e,t,o,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Fo.enqueueReplaceState(i,i.state,null),Mo(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Do&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function Vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Go(e){return(0,e._init)(e._payload)}function qo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Cc(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Mc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){var o=r.type;return o===E?p(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Go(o)===t.type)?((n=i(t,r.props)).ref=Ho(e,t,r),n.return=e,n):((n=Nc(r.type,r.key,r.props,null,e.mode,n)).ref=Ho(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Ic(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function p(e,t,r,n,o){return null===t||7!==t.tag?((t=Rc(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function f(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Nc(t.type,t.key,t.props,null,e.mode,r)).ref=Ho(e,null,t),r.return=e,r;case x:return(t=Ic(t,e.mode,r)).return=e,t;case R:return f(e,(0,t._init)(t._payload),r)}if(te(t)||I(t))return(t=Rc(t,e.mode,r,null)).return=e,t;Vo(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===i?c(e,t,r,n):null;case x:return r.key===i?u(e,t,r,n):null;case R:return h(e,t,(i=r._init)(r._payload),n)}if(te(r)||I(r))return null!==i?null:p(e,t,r,n,null);Vo(e,r)}return null}function d(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case x:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case R:return d(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||I(n))return p(t,e=e.get(r)||null,n,i,null);Vo(t,n)}return null}function y(i,o,s,l){for(var c=null,u=null,p=o,y=o=0,m=null;null!==p&&y<s.length;y++){p.index>y?(m=p,p=null):m=p.sibling;var v=h(i,p,s[y],l);if(null===v){null===p&&(p=m);break}e&&p&&null===v.alternate&&t(i,p),o=a(v,o,y),null===u?c=v:u.sibling=v,u=v,p=m}if(y===s.length)return r(i,p),eo&&Yi(i,y),c;if(null===p){for(;y<s.length;y++)null!==(p=f(i,s[y],l))&&(o=a(p,o,y),null===u?c=p:u.sibling=p,u=p);return eo&&Yi(i,y),c}for(p=n(i,p);y<s.length;y++)null!==(m=d(p,i,y,s[y],l))&&(e&&null!==m.alternate&&p.delete(null===m.key?y:m.key),o=a(m,o,y),null===u?c=m:u.sibling=m,u=m);return e&&p.forEach((function(e){return t(i,e)})),eo&&Yi(i,y),c}function m(i,s,l,c){var u=I(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var p=u=null,y=s,m=s=0,v=null,g=l.next();null!==y&&!g.done;m++,g=l.next()){y.index>m?(v=y,y=null):v=y.sibling;var b=h(i,y,g.value,c);if(null===b){null===y&&(y=v);break}e&&y&&null===b.alternate&&t(i,y),s=a(b,s,m),null===p?u=b:p.sibling=b,p=b,y=v}if(g.done)return r(i,y),eo&&Yi(i,m),u;if(null===y){for(;!g.done;m++,g=l.next())null!==(g=f(i,g.value,c))&&(s=a(g,s,m),null===p?u=g:p.sibling=g,p=g);return eo&&Yi(i,m),u}for(y=n(i,y);!g.done;m++,g=l.next())null!==(g=d(y,i,m,g.value,c))&&(e&&null!==g.alternate&&y.delete(null===g.key?m:g.key),s=a(g,s,m),null===p?u=g:p.sibling=g,p=g);return e&&y.forEach((function(e){return t(i,e)})),eo&&Yi(i,m),u}return function e(n,o,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){r(n,u.sibling),(o=i(u,a.props.children)).return=n,n=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Go(c)===u.type){r(n,u.sibling),(o=i(u,a.props)).ref=Ho(n,u,a),o.return=n,n=o;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===E?((o=Rc(a.props.children,n.mode,l,a.key)).return=n,n=o):((l=Nc(a.type,a.key,a.props,null,n.mode,l)).ref=Ho(n,o,a),l.return=n,n=l)}return s(n);case x:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(n,o.sibling),(o=i(o,a.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Ic(a,n.mode,l)).return=n,n=o}return s(n);case R:return e(n,o,(u=a._init)(a._payload),l)}if(te(a))return y(n,o,a,l);if(I(a))return m(n,o,a,l);Vo(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,a)).return=n,n=o):(r(n,o),(o=Mc(a,n.mode,l)).return=n,n=o),s(n)):r(n,o)}}var Wo=qo(!0),Yo=qo(!1),Ko={},Xo=_i(Ko),Zo=_i(Ko),Jo=_i(Ko);function Qo(e){if(e===Ko)throw Error(o(174));return e}function ea(e,t){switch(xi(Jo,t),xi(Zo,e),xi(Xo,Ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi(Xo),xi(Xo,t)}function ta(){wi(Xo),wi(Zo),wi(Jo)}function ra(e){Qo(Jo.current);var t=Qo(Xo.current),r=le(t,e.type);t!==r&&(xi(Zo,e),xi(Xo,r))}function na(e){Zo.current===e&&(wi(Xo),wi(Zo))}var ia=_i(0);function oa(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=[];function sa(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var la=_.ReactCurrentDispatcher,ca=_.ReactCurrentBatchConfig,ua=0,pa=null,fa=null,ha=null,da=!1,ya=!1,ma=0,va=0;function ga(){throw Error(o(321))}function ba(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rn(e[r],t[r]))return!1;return!0}function _a(e,t,r,n,i,a){if(ua=a,pa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,la.current=null===e||null===e.memoizedState?ns:is,e=r(n,i),ya){a=0;do{if(ya=!1,ma=0,25<=a)throw Error(o(301));a+=1,ha=fa=null,t.updateQueue=null,la.current=os,e=r(n,i)}while(ya)}if(la.current=rs,t=null!==fa&&null!==fa.next,ua=0,ha=fa=pa=null,da=!1,t)throw Error(o(300));return e}function wa(){var e=0!==ma;return ma=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ha?pa.memoizedState=ha=e:ha=ha.next=e,ha}function Ea(){if(null===fa){var e=pa.alternate;e=null!==e?e.memoizedState:null}else e=fa.next;var t=null===ha?pa.memoizedState:ha.next;if(null!==t)ha=t,fa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(fa=e).memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},null===ha?pa.memoizedState=ha=e:ha=ha.next=e}return ha}function Sa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=Ea(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=fa,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){a=i.next,n=n.baseState;var l=s=null,c=null,u=a;do{var p=u.lane;if((ua&p)===p)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=n):c=c.next=f,pa.lanes|=p,jl|=p}u=u.next}while(null!==u&&u!==a);null===c?s=n:c.next=l,rn(n,t.memoizedState)||(ms=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{a=i.lane,pa.lanes|=a,jl|=a,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ta(e){var t=Ea(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);rn(a,t.memoizedState)||(ms=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Oa(){}function Aa(e,t){var r=pa,n=Ea(),i=t(),a=!rn(n.memoizedState,i);if(a&&(n.memoizedState=i,ms=!0),n=n.queue,za(Na.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ha&&1&ha.memoizedState.tag){if(r.flags|=2048,Ia(9,Ca.bind(null,r,n,i,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&ua)||Pa(r,t,i)}return i}function Pa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ca(e,t,r,n){t.value=r,t.getSnapshot=n,Ra(t)&&ja(e)}function Na(e,t,r){return r((function(){Ra(t)&&ja(e)}))}function Ra(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rn(e,r)}catch(n){return!0}}function ja(e){var t=To(e,1);null!==t&&Ql(t,e,1,-1)}function Ma(e){var t=xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,pa,e),[t.memoizedState,e]}function Ia(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=pa.updateQueue)?(t={lastEffect:null,stores:null},pa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Da(){return Ea().memoizedState}function La(e,t,r,n){var i=xa();pa.flags|=e,i.memoizedState=Ia(1|t,r,void 0,void 0===n?null:n)}function Fa(e,t,r,n){var i=Ea();n=void 0===n?null:n;var o=void 0;if(null!==fa){var a=fa.memoizedState;if(o=a.destroy,null!==n&&ba(n,a.deps))return void(i.memoizedState=Ia(t,r,o,n))}pa.flags|=e,i.memoizedState=Ia(1|t,r,o,n)}function Ba(e,t){return La(8390656,8,e,t)}function za(e,t){return Fa(2048,8,e,t)}function $a(e,t){return Fa(4,2,e,t)}function Ua(e,t){return Fa(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Fa(4,4,Ha.bind(null,t,e),r)}function Ga(){}function qa(e,t){var r=Ea();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ba(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wa(e,t){var r=Ea();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ba(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ya(e,t,r){return 0===(21&ua)?(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=r):(rn(r,t)||(r=dt(),pa.lanes|=r,jl|=r,e.baseState=!0),t)}function Ka(e,t){var r=gt;gt=0!==r&&4>r?r:4,e(!0);var n=ca.transition;ca.transition={};try{e(!1),t()}finally{gt=r,ca.transition=n}}function Xa(){return Ea().memoizedState}function Za(e,t,r){var n=Jl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qa(e))es(t,r);else if(null!==(r=ko(e,t,r,n))){Ql(r,e,n,Zl()),ts(r,t,n)}}function Ja(e,t,r){var n=Jl(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))es(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,rn(s,a)){var l=t.interleaved;return null===l?(i.next=i,So(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=ko(e,t,i,n))&&(Ql(r,e,n,i=Zl()),ts(r,t,n))}}function Qa(e){var t=e.alternate;return e===pa||null!==t&&t===pa}function es(e,t){ya=da=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ts(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var rs={readContext:xo,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useInsertionEffect:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useSyncExternalStore:ga,useId:ga,unstable_isNewReconciler:!1},ns={readContext:xo,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:xo,useEffect:Ba,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,La(4194308,4,Ha.bind(null,t,e),r)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var r=xa();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xa();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Za.bind(null,pa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Ma,useDebugValue:Ga,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Ma(!1),t=e[0];return e=Ka.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=pa,i=xa();if(eo){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Tl)throw Error(o(349));0!==(30&ua)||Pa(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Ba(Na.bind(null,n,a,e),[e]),n.flags|=2048,Ia(9,Ca.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=xa(),t=Tl.identifierPrefix;if(eo){var r=Wi;t=":"+t+"R"+(r=(qi&~(1<<32-ot(qi)-1)).toString(32)+r),0<(r=ma++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=va++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:xo,useCallback:qa,useContext:xo,useEffect:za,useImperativeHandle:Va,useInsertionEffect:$a,useLayoutEffect:Ua,useMemo:Wa,useReducer:ka,useRef:Da,useState:function(){return ka(Sa)},useDebugValue:Ga,useDeferredValue:function(e){return Ya(Ea(),fa.memoizedState,e)},useTransition:function(){return[ka(Sa)[0],Ea().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Aa,useId:Xa,unstable_isNewReconciler:!1},os={readContext:xo,useCallback:qa,useContext:xo,useEffect:za,useImperativeHandle:Va,useInsertionEffect:$a,useLayoutEffect:Ua,useMemo:Wa,useReducer:Ta,useRef:Da,useState:function(){return Ta(Sa)},useDebugValue:Ga,useDeferredValue:function(e){var t=Ea();return null===fa?t.memoizedState=e:Ya(t,fa.memoizedState,e)},useTransition:function(){return[Ta(Sa)[0],Ea().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Aa,useId:Xa,unstable_isNewReconciler:!1};function as(e,t){try{var r="",n=t;do{r+=$(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ss(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ls(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var cs="function"===typeof WeakMap?WeakMap:Map;function us(e,t,r){(r=Co(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$l||($l=!0,Ul=n),ls(0,t)},r}function ps(e,t,r){(r=Co(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ls(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){ls(0,t),"function"!==typeof n&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function fs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new cs;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=xc.bind(null,e,t,r),t.then(e,e))}function hs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ds(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Co(-1,1)).tag=2,No(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=_.ReactCurrentOwner,ms=!1;function vs(e,t,r,n){t.child=null===e?Yo(t,null,r,n):Wo(t,e.child,r,n)}function gs(e,t,r,n,i){r=r.render;var o=t.ref;return wo(t,i),n=_a(e,t,r,n,o,i),r=wa(),null===e||ms?(eo&&r&&Xi(t),t.flags|=1,vs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$s(e,t,i))}function bs(e,t,r,n,i){if(null===e){var o=r.type;return"function"!==typeof o||Pc(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Nc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,n,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:nn)(a,n)&&e.ref===t.ref)return $s(e,t,i)}return t.flags|=1,(e=Cc(o,n)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(nn(o,n)&&e.ref===t.ref){if(ms=!1,t.pendingProps=n=o,0===(e.lanes&i))return t.lanes=e.lanes,$s(e,t,i);0!==(131072&e.flags)&&(ms=!0)}}return Es(e,t,r,n,i)}function ws(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Cl,Pl),Pl|=r;else{if(0===(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Cl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,xi(Cl,Pl),Pl|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,xi(Cl,Pl),Pl|=n;return vs(e,t,i,r),t.child}function xs(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,r,n,i){var o=Ai(r)?Ti:Si.current;return o=Oi(t,o),wo(t,i),r=_a(e,t,r,n,o,i),n=wa(),null===e||ms?(eo&&n&&Xi(t),t.flags|=1,vs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$s(e,t,i))}function Ss(e,t,r,n,i){if(Ai(r)){var o=!0;Ri(t)}else o=!1;if(wo(t,i),null===t.stateNode)zs(e,t),zo(t,r,n),Uo(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;"object"===typeof c&&null!==c?c=xo(c):c=Oi(t,c=Ai(r)?Ti:Si.current);var u=r.getDerivedStateFromProps,p="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&$o(t,a,n,c),Oo=!1;var f=t.memoizedState;a.state=f,Mo(t,n,a,i),l=t.memoizedState,s!==n||f!==l||ki.current||Oo?("function"===typeof u&&(Lo(t,r,u,n),l=t.memoizedState),(s=Oo||Bo(t,r,s,n,f,l,c))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Po(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:fo(t.type,s),a.props=c,p=t.pendingProps,f=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=xo(l):l=Oi(t,l=Ai(r)?Ti:Si.current);var h=r.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==p||f!==l)&&$o(t,a,n,l),Oo=!1,f=t.memoizedState,a.state=f,Mo(t,n,a,i);var d=t.memoizedState;s!==p||f!==d||ki.current||Oo?("function"===typeof h&&(Lo(t,r,h,n),d=t.memoizedState),(c=Oo||Bo(t,r,c,n,f,d,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,d,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,d,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=d),a.props=n,a.state=d,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return ks(e,t,r,n,o,i)}function ks(e,t,r,n,i,o){xs(e,t);var a=0!==(128&t.flags);if(!n&&!a)return i&&ji(t,r,!1),$s(e,t,o);n=t.stateNode,ys.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Wo(t,e.child,null,o),t.child=Wo(t,null,s,o)):vs(e,t,s,o),t.memoizedState=n.state,i&&ji(t,r,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Ci(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ci(0,t.context,!1),ea(e,t.containerInfo)}function Os(e,t,r,n,i){return co(),uo(i),t.flags|=256,vs(e,t,r,n),t.child}var As,Ps,Cs,Ns,Rs={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,r){var n,i=t.pendingProps,a=ia.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),xi(ia,1&a),null===e)return oo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,i,0,null),e=Rc(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(r),t.memoizedState=Rs,e):Is(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,i,a,s){if(r)return 256&t.flags?(t.flags&=-257,Ds(e,t,s,n=ss(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=jc({mode:"visible",children:n.children},i,0,null),(a=Rc(a,i,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&Wo(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Rs,a);if(0===(1&t.mode))return Ds(e,t,s,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Ds(e,t,s,n=ss(a=Error(o(419)),n,void 0))}if(l=0!==(s&e.childLanes),ms||l){if(null!==(n=Tl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,To(e,i),Ql(n,e,i,-1))}return fc(),Ds(e,t,s,n=ss(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Qi=oi(i.nextSibling),Ji=t,eo=!0,to=null,null!==e&&(Hi[Vi++]=qi,Hi[Vi++]=Wi,Hi[Vi++]=Gi,qi=e.id,Wi=e.overflow,Gi=t),t=Is(t,n.children),t.flags|=4096,t)}(e,t,l,i,n,a,r);if(s){s=i.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Cc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Cc(n,s):(s=Rc(s,l,r,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Rs,i}return e=(s=e.child).sibling,i=Cc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Is(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ds(e,t,r,n){return null!==n&&uo(n),Wo(t,e.child,null,r),(e=Is(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ls(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_o(e.return,t,r)}function Fs(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Bs(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(vs(e,t,n.children,r),0!==(2&(n=ia.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ls(e,r,t);else if(19===e.tag)Ls(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(xi(ia,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===oa(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Fs(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===oa(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Fs(t,!0,r,null,o);break;case"together":Fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $s(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Cc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Cc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Us(e,t){if(!eo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Vs(e,t,r){var n=t.pendingProps;switch(Zi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ai(t.type)&&Pi(),Hs(t),null;case 3:return n=t.stateNode,ta(),wi(ki),wi(Si),sa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(so(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==to&&(nc(to),to=null))),Ps(e,t),Hs(t),null;case 5:na(t);var i=Qo(Jo.current);if(r=t.type,null!==e&&null!=t.stateNode)Cs(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Hs(t),null}if(e=Qo(Xo.current),so(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[li]=t,n[ci]=a,e=0!==(1&t.mode),r){case"dialog":In("cancel",n),In("close",n);break;case"iframe":case"object":case"embed":In("load",n);break;case"video":case"audio":for(i=0;i<Nn.length;i++)In(Nn[i],n);break;case"source":In("error",n);break;case"img":case"image":case"link":In("error",n),In("load",n);break;case"details":In("toggle",n);break;case"input":X(n,a),In("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},In("invalid",n);break;case"textarea":ie(n,a),In("invalid",n)}for(var l in ve(r,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&Yn(n.textContent,c,e),i=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Yn(n.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&In("scroll",n)}switch(r){case"input":q(n),Q(n,a,!0);break;case"textarea":q(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Kn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[li]=t,e[ci]=n,As(e,t,!1,!1),t.stateNode=e;e:{switch(l=ge(r,n),r){case"dialog":In("cancel",e),In("close",e),i=n;break;case"iframe":case"object":case"embed":In("load",e),i=n;break;case"video":case"audio":for(i=0;i<Nn.length;i++)In(Nn[i],e);i=n;break;case"source":In("error",e),i=n;break;case"img":case"image":case"link":In("error",e),In("load",e),i=n;break;case"details":In("toggle",e),i=n;break;case"input":X(e,n),i=K(e,n),In("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=L({},n,{value:void 0}),In("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),In("invalid",e)}for(a in ve(r,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ye(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==r||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&In("scroll",e):null!=u&&b(e,a,u,l))}switch(r){case"input":q(e),Q(e,n,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Kn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ns(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(r=Qo(Jo.current),Qo(Xo.current),so(t)){if(n=t.stateNode,r=t.memoizedProps,n[li]=t,(a=n.nodeValue!==r)&&null!==(e=Ji))switch(e.tag){case 3:Yn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yn(n.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[li]=t,t.stateNode=n}return Hs(t),null;case 13:if(wi(ia),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(eo&&null!==Qi&&0!==(1&t.mode)&&0===(128&t.flags))lo(),co(),t.flags|=98560,a=!1;else if(a=so(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[li]=t}else co(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),a=!1}else null!==to&&(nc(to),to=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ia.current)?0===Nl&&(Nl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return ta(),Ps(e,t),null===e&&Fn(t.stateNode.containerInfo),Hs(t),null;case 10:return bo(t.type._context),Hs(t),null;case 19:if(wi(ia),null===(a=t.memoizedState))return Hs(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)Us(a,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=oa(e))){for(t.flags|=128,Us(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return xi(ia,1&ia.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,n=!0,Us(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=oa(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Us(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!eo)return Hs(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==r&&(t.flags|=128,n=!0,Us(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=a.last)?r.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,r=ia.current,xi(ia,n?1&r|2:1&r),t):(Hs(t),null);case 22:case 23:return lc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Gs(e,t){switch(Zi(t),t.tag){case 1:return Ai(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ta(),wi(ki),wi(Si),sa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return na(t),null;case 13:if(wi(ia),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));co()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wi(ia),null;case 4:return ta(),null;case 10:return bo(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}As=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ps=function(){},Cs=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Qo(Xo.current);var o,a=null;switch(r){case"input":i=K(e,i),n=K(e,n),a=[];break;case"select":i=L({},i,{value:void 0}),n=L({},n,{value:void 0}),a=[];break;case"textarea":i=ne(e,i),n=ne(e,n),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Kn)}for(u in ve(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&In("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ns=function(e,t,r,n){r!==n&&(t.flags|=4)};var qs=!1,Ws=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Xs(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){wc(e,t,n)}else r.current=null}function Zs(e,t,r){try{r()}catch(n){wc(e,t,n)}}var Js=!1;function Qs(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Zs(t,r,o)}i=i.next}while(i!==n)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[li],delete t[ci],delete t[pi],delete t[fi],delete t[hi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nl(e){return 5===e.tag||3===e.tag||4===e.tag}function il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Kn));else if(4!==n&&null!==(e=e.child))for(ol(e,t,r),e=e.sibling;null!==e;)ol(e,t,r),e=e.sibling}function al(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(al(e,t,r),e=e.sibling;null!==e;)al(e,t,r),e=e.sibling}var sl=null,ll=!1;function cl(e,t,r){for(r=r.child;null!==r;)ul(e,t,r),r=r.sibling}function ul(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(nt,r)}catch(s){}switch(r.tag){case 5:Ws||Xs(r,t);case 6:var n=sl,i=ll;sl=null,cl(e,t,r),ll=i,null!==(sl=n)&&(ll?(e=sl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):sl.removeChild(r.stateNode));break;case 18:null!==sl&&(ll?(e=sl,r=r.stateNode,8===e.nodeType?ii(e.parentNode,r):1===e.nodeType&&ii(e,r),$t(e)):ii(sl,r.stateNode));break;case 4:n=sl,i=ll,sl=r.stateNode.containerInfo,ll=!0,cl(e,t,r),sl=n,ll=i;break;case 0:case 11:case 14:case 15:if(!Ws&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&Zs(r,t,a),i=i.next}while(i!==n)}cl(e,t,r);break;case 1:if(!Ws&&(Xs(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){wc(r,t,s)}cl(e,t,r);break;case 21:cl(e,t,r);break;case 22:1&r.mode?(Ws=(n=Ws)||null!==r.memoizedState,cl(e,t,r),Ws=n):cl(e,t,r);break;default:cl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ys),t.forEach((function(t){var n=kc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function fl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(o(160));ul(a,s,i),sl=null,ll=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){wc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hl(t,e),t=t.sibling}function hl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),dl(e),4&n){try{Qs(3,e,e.return),el(3,e)}catch(m){wc(e,e.return,m)}try{Qs(5,e,e.return)}catch(m){wc(e,e.return,m)}}break;case 1:fl(t,e),dl(e),512&n&&null!==r&&Xs(r,r.return);break;case 5:if(fl(t,e),dl(e),512&n&&null!==r&&Xs(r,r.return),32&e.flags){var i=e.stateNode;try{pe(i,"")}catch(m){wc(e,e.return,m)}}if(4&n&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(i,a),ge(l,s);var u=ge(l,a);for(s=0;s<c.length;s+=2){var p=c[s],f=c[s+1];"style"===p?ye(i,f):"dangerouslySetInnerHTML"===p?ue(i,f):"children"===p?pe(i,f):b(i,p,f,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;null!=d?re(i,!!a.multiple,d,!1):h!==!!a.multiple&&(null!=a.defaultValue?re(i,!!a.multiple,a.defaultValue,!0):re(i,!!a.multiple,a.multiple?[]:"",!1))}i[ci]=a}catch(m){wc(e,e.return,m)}}break;case 6:if(fl(t,e),dl(e),4&n){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){wc(e,e.return,m)}}break;case 3:if(fl(t,e),dl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(m){wc(e,e.return,m)}break;case 4:default:fl(t,e),dl(e);break;case 13:fl(t,e),dl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Fl=Xe())),4&n&&pl(e);break;case 22:if(p=null!==r&&null!==r.memoizedState,1&e.mode?(Ws=(u=Ws)||p,fl(t,e),Ws=u):fl(t,e),dl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!p&&0!==(1&e.mode))for(Ks=e,p=e.child;null!==p;){for(f=Ks=p;null!==Ks;){switch(d=(h=Ks).child,h.tag){case 0:case 11:case 14:case 15:Qs(4,h,h.return);break;case 1:Xs(h,h.return);var y=h.stateNode;if("function"===typeof y.componentWillUnmount){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){wc(n,r,m)}}break;case 5:Xs(h,h.return);break;case 22:if(null!==h.memoizedState){gl(f);continue}}null!==d?(d.return=h,Ks=d):gl(f)}p=p.sibling}e:for(p=null,f=e;;){if(5===f.tag){if(null===p){p=f;try{i=f.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=de("display",s))}catch(m){wc(e,e.return,m)}}}else if(6===f.tag){if(null===p)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){wc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fl(t,e),dl(e),4&n&&pl(e);case 21:}}function dl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(nl(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(pe(i,""),n.flags&=-33),al(e,il(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;ol(e,il(e),a);break;default:throw Error(o(161))}}catch(s){wc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Ks=e,ml(e,t,r)}function ml(e,t,r){for(var n=0!==(1&e.mode);null!==Ks;){var i=Ks,o=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||qs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ws;s=qs;var c=Ws;if(qs=a,(Ws=l)&&!c)for(Ks=i;null!==Ks;)l=(a=Ks).child,22===a.tag&&null!==a.memoizedState?bl(i):null!==l?(l.return=a,Ks=l):bl(i);for(;null!==o;)Ks=o,ml(o,t,r),o=o.sibling;Ks=i,qs=s,Ws=c}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ks=o):vl(e)}}function vl(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ws||el(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ws)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:fo(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Io(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Io(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var p=u.memoizedState;if(null!==p){var f=p.dehydrated;null!==f&&$t(f)}}}break;default:throw Error(o(163))}Ws||512&t.flags&&tl(t)}catch(h){wc(t,t.return,h)}}if(t===e){Ks=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ks=r;break}Ks=t.return}}function gl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ks=r;break}Ks=t.return}}function bl(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{el(4,t)}catch(l){wc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){wc(t,i,l)}}var o=t.return;try{tl(t)}catch(l){wc(t,o,l)}break;case 5:var a=t.return;try{tl(t)}catch(l){wc(t,a,l)}}}catch(l){wc(t,t.return,l)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var _l,wl=Math.ceil,xl=_.ReactCurrentDispatcher,El=_.ReactCurrentOwner,Sl=_.ReactCurrentBatchConfig,kl=0,Tl=null,Ol=null,Al=0,Pl=0,Cl=_i(0),Nl=0,Rl=null,jl=0,Ml=0,Il=0,Dl=null,Ll=null,Fl=0,Bl=1/0,zl=null,$l=!1,Ul=null,Hl=null,Vl=!1,Gl=null,ql=0,Wl=0,Yl=null,Kl=-1,Xl=0;function Zl(){return 0!==(6&kl)?Xe():-1!==Kl?Kl:Kl=Xe()}function Jl(e){return 0===(1&e.mode)?1:0!==(2&kl)&&0!==Al?Al&-Al:null!==po.transition?(0===Xl&&(Xl=dt()),Xl):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function Ql(e,t,r,n){if(50<Wl)throw Wl=0,Yl=null,Error(o(185));mt(e,r,n),0!==(2&kl)&&e===Tl||(e===Tl&&(0===(2&kl)&&(Ml|=r),4===Nl&&ic(e,Al)),ec(e,n),1===r&&0===kl&&0===(1&t.mode)&&(Bl=Xe()+500,Ii&&Fi()))}function ec(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ot(o),s=1<<a,l=i[a];-1===l?0!==(s&r)&&0===(s&n)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var n=pt(e,e===Tl?Al:0);if(0===n)null!==r&&We(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&We(r),1===t)0===e.tag?function(e){Ii=!0,Li(e)}(oc.bind(null,e)):Li(oc.bind(null,e)),ri((function(){0===(6&kl)&&Fi()})),r=null;else{switch(bt(n)){case 1:r=Je;break;case 4:r=Qe;break;case 16:default:r=et;break;case 536870912:r=rt}r=Tc(r,tc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tc(e,t){if(Kl=-1,Xl=0,0!==(6&kl))throw Error(o(327));var r=e.callbackNode;if(bc()&&e.callbackNode!==r)return null;var n=pt(e,e===Tl?Al:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=hc(e,n);else{t=n;var i=kl;kl|=2;var a=pc();for(Tl===e&&Al===t||(zl=null,Bl=Xe()+500,cc(e,t));;)try{yc();break}catch(l){uc(e,l)}go(),xl.current=a,kl=i,null!==Ol?t=0:(Tl=null,Al=0,t=Nl)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(n=i,t=rc(e,i))),1===t)throw r=Rl,cc(e,0),ic(e,n),ec(e,Xe()),r;if(6===t)ic(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!rn(o(),i))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=hc(e,n))&&(0!==(a=ht(e))&&(n=a,t=rc(e,a))),1===t))throw r=Rl,cc(e,0),ic(e,n),ec(e,Xe()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:gc(e,Ll,zl);break;case 3:if(ic(e,n),(130023424&n)===n&&10<(t=Fl+500-Xe())){if(0!==pt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Qn(gc.bind(null,e,Ll,zl),t);break}gc(e,Ll,zl);break;case 4:if(ic(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-ot(n);a=1<<s,(s=t[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Xe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wl(n/1960))-n)){e.timeoutHandle=Qn(gc.bind(null,e,Ll,zl),n);break}gc(e,Ll,zl);break;default:throw Error(o(329))}}}return ec(e,Xe()),e.callbackNode===r?tc.bind(null,e):null}function rc(e,t){var r=Dl;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),2!==(e=hc(e,t))&&(t=Ll,Ll=r,null!==t&&nc(t)),e}function nc(e){null===Ll?Ll=e:Ll.push.apply(Ll,e)}function ic(e,t){for(t&=~Il,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function oc(e){if(0!==(6&kl))throw Error(o(327));bc();var t=pt(e,0);if(0===(1&t))return ec(e,Xe()),null;var r=hc(e,t);if(0!==e.tag&&2===r){var n=ht(e);0!==n&&(t=n,r=rc(e,n))}if(1===r)throw r=Rl,cc(e,0),ic(e,t),ec(e,Xe()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gc(e,Ll,zl),ec(e,Xe()),null}function ac(e,t){var r=kl;kl|=1;try{return e(t)}finally{0===(kl=r)&&(Bl=Xe()+500,Ii&&Fi())}}function sc(e){null!==Gl&&0===Gl.tag&&0===(6&kl)&&bc();var t=kl;kl|=1;var r=Sl.transition,n=gt;try{if(Sl.transition=null,gt=1,e)return e()}finally{gt=n,Sl.transition=r,0===(6&(kl=t))&&Fi()}}function lc(){Pl=Cl.current,wi(Cl)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ei(r)),null!==Ol)for(r=Ol.return;null!==r;){var n=r;switch(Zi(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Pi();break;case 3:ta(),wi(ki),wi(Si),sa();break;case 5:na(n);break;case 4:ta();break;case 13:case 19:wi(ia);break;case 10:bo(n.type._context);break;case 22:case 23:lc()}r=r.return}if(Tl=e,Ol=e=Cc(e.current,null),Al=Pl=t,Nl=0,Rl=null,Il=Ml=jl=0,Ll=Dl=null,null!==Eo){for(t=0;t<Eo.length;t++)if(null!==(n=(r=Eo[t]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var a=o.next;o.next=i,n.next=a}r.pending=n}Eo=null}return e}function uc(e,t){for(;;){var r=Ol;try{if(go(),la.current=rs,da){for(var n=pa.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}da=!1}if(ua=0,ha=fa=pa=null,ya=!1,ma=0,El.current=null,null===r||null===r.return){Nl=1,Rl=t,Ol=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,p=l,f=p.tag;if(0===(1&p.mode)&&(0===f||11===f||15===f)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var d=hs(s);if(null!==d){d.flags&=-257,ds(d,s,l,0,t),1&d.mode&&fs(a,u,t),c=u;var y=(t=d).updateQueue;if(null===y){var m=new Set;m.add(c),t.updateQueue=m}else y.add(c);break e}if(0===(1&t)){fs(a,u,t),fc();break e}c=Error(o(426))}else if(eo&&1&l.mode){var v=hs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ds(v,s,l,0,t),uo(as(c,l));break e}}a=c=as(c,l),4!==Nl&&(Nl=2),null===Dl?Dl=[a]:Dl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,jo(a,us(0,c,t));break e;case 1:l=c;var g=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,jo(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}vc(r)}catch(_){t=_,Ol===r&&null!==r&&(Ol=r=r.return);continue}break}}function pc(){var e=xl.current;return xl.current=rs,null===e?rs:e}function fc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Tl||0===(268435455&jl)&&0===(268435455&Ml)||ic(Tl,Al)}function hc(e,t){var r=kl;kl|=2;var n=pc();for(Tl===e&&Al===t||(zl=null,cc(e,t));;)try{dc();break}catch(i){uc(e,i)}if(go(),kl=r,xl.current=n,null!==Ol)throw Error(o(261));return Tl=null,Al=0,Nl}function dc(){for(;null!==Ol;)mc(Ol)}function yc(){for(;null!==Ol&&!Ye();)mc(Ol)}function mc(e){var t=_l(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?vc(e):Ol=t,El.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Vs(r,t,Pl)))return void(Ol=r)}else{if(null!==(r=Gs(r,t)))return r.flags&=32767,void(Ol=r);if(null===e)return Nl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Nl&&(Nl=5)}function gc(e,t,r){var n=gt,i=Sl.transition;try{Sl.transition=null,gt=1,function(e,t,r,n){do{bc()}while(null!==Gl);if(0!==(6&kl))throw Error(o(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ot(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}(e,a),e===Tl&&(Ol=Tl=null,Al=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Vl||(Vl=!0,Tc(et,(function(){return bc(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var s=gt;gt=1;var l=kl;kl|=4,El.current=null,function(e,t){if(Xn=Ht,cn(e=ln())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(w){r=null;break e}var s=0,l=-1,c=-1,u=0,p=0,f=e,h=null;t:for(;;){for(var d;f!==r||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==n&&3!==f.nodeType||(c=s+n),3===f.nodeType&&(s+=f.nodeValue.length),null!==(d=f.firstChild);)h=f,f=d;for(;;){if(f===e)break t;if(h===r&&++u===i&&(l=s),h===a&&++p===n&&(c=s),null!==(d=f.nextSibling))break;h=(f=h).parentNode}f=d}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zn={focusedElem:e,selectionRange:r},Ht=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var y=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var m=y.memoizedProps,v=y.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:fo(t.type,m),v);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(w){wc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}y=Js,Js=!1}(e,r),hl(r,e),un(Zn),Ht=!!Xn,Zn=Xn=null,e.current=r,yl(r,e,i),Ke(),kl=l,gt=s,Sl.transition=a}else e.current=r;if(Vl&&(Vl=!1,Gl=e,ql=i),a=e.pendingLanes,0===a&&(Hl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ec(e,Xe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if($l)throw $l=!1,e=Ul,Ul=null,e;0!==(1&ql)&&0!==e.tag&&bc(),a=e.pendingLanes,0!==(1&a)?e===Yl?Wl++:(Wl=0,Yl=e):Wl=0,Fi()}(e,t,r,n)}finally{Sl.transition=i,gt=n}return null}function bc(){if(null!==Gl){var e=bt(ql),t=Sl.transition,r=gt;try{if(Sl.transition=null,gt=16>e?16:e,null===Gl)var n=!1;else{if(e=Gl,Gl=null,ql=0,0!==(6&kl))throw Error(o(331));var i=kl;for(kl|=4,Ks=e.current;null!==Ks;){var a=Ks,s=a.child;if(0!==(16&Ks.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ks=u;null!==Ks;){var p=Ks;switch(p.tag){case 0:case 11:case 15:Qs(8,p,a)}var f=p.child;if(null!==f)f.return=p,Ks=f;else for(;null!==Ks;){var h=(p=Ks).sibling,d=p.return;if(rl(p),p===u){Ks=null;break}if(null!==h){h.return=d,Ks=h;break}Ks=d}}}var y=a.alternate;if(null!==y){var m=y.child;if(null!==m){y.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ks=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(a=Ks).flags))switch(a.tag){case 0:case 11:case 15:Qs(9,a,a.return)}var g=a.sibling;if(null!==g){g.return=a.return,Ks=g;break e}Ks=a.return}}var b=e.current;for(Ks=b;null!==Ks;){var _=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Ks=_;else e:for(s=b;null!==Ks;){if(0!==(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(x){wc(l,l.return,x)}if(l===s){Ks=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ks=w;break e}Ks=l.return}}if(kl=i,Fi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(nt,e)}catch(x){}n=!0}return n}finally{gt=r,Sl.transition=t}}return!1}function _c(e,t,r){e=No(e,t=us(0,t=as(r,t),1),1),t=Zl(),null!==e&&(mt(e,1,t),ec(e,t))}function wc(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hl||!Hl.has(n))){t=No(t,e=ps(t,e=as(r,e),1),1),e=Zl(),null!==t&&(mt(t,1,e),ec(t,e));break}}t=t.return}}function xc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&r,Tl===e&&(Al&r)===r&&(4===Nl||3===Nl&&(130023424&Al)===Al&&500>Xe()-Fl?cc(e,0):Il|=r),ec(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var r=Zl();null!==(e=To(e,t))&&(mt(e,t,r),ec(e,r))}function Sc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ec(e,r)}function kc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Ec(e,r)}function Tc(e,t){return qe(e,t)}function Oc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,r,n){return new Oc(e,t,r,n)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Cc(e,t){var r=e.alternate;return null===r?((r=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Nc(e,t,r,n,i,a){var s=2;if(n=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Rc(r.children,i,a,t);case S:s=8,i|=8;break;case k:return(e=Ac(12,r,t,2|i)).elementType=k,e.lanes=a,e;case P:return(e=Ac(13,r,t,i)).elementType=P,e.lanes=a,e;case C:return(e=Ac(19,r,t,i)).elementType=C,e.lanes=a,e;case j:return jc(r,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case O:s=9;break e;case A:s=11;break e;case N:s=14;break e;case R:s=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ac(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Rc(e,t,r,n){return(e=Ac(7,e,n,t)).lanes=r,e}function jc(e,t,r,n){return(e=Ac(22,e,n,t)).elementType=j,e.lanes=r,e.stateNode={isHidden:!1},e}function Mc(e,t,r){return(e=Ac(6,e,null,t)).lanes=r,e}function Ic(e,t,r){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lc(e,t,r,n,i,o,a,s,l){return e=new Dc(e,t,r,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ac(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(o),e}function Fc(e){if(!e)return Ei;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(Ai(r))return Ni(e,r,t)}return t}function Bc(e,t,r,n,i,o,a,s,l){return(e=Lc(r,n,!0,e,0,o,0,s,l)).context=Fc(null),r=e.current,(o=Co(n=Zl(),i=Jl(r))).callback=void 0!==t&&null!==t?t:null,No(r,o,i),e.current.lanes=i,mt(e,i,n),ec(e,n),e}function zc(e,t,r,n){var i=t.current,o=Zl(),a=Jl(i);return r=Fc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Co(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=No(i,t,a))&&(Ql(e,i,a,o),Ro(e,i,a)),a}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Uc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Hc(e,t){Uc(e,t),(e=e.alternate)&&Uc(e,t)}_l=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)ms=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ms=!1,function(e,t,r){switch(t.tag){case 3:Ts(t),co();break;case 5:ra(t);break;case 1:Ai(t.type)&&Ri(t);break;case 4:ea(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;xi(ho,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(xi(ia,1&ia.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ms(e,t,r):(xi(ia,1&ia.current),null!==(e=$s(e,t,r))?e.sibling:null);xi(ia,1&ia.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Bs(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(ia,ia.current),n)break;return null;case 22:case 23:return t.lanes=0,ws(e,t,r)}return $s(e,t,r)}(e,t,r);ms=0!==(131072&e.flags)}else ms=!1,eo&&0!==(1048576&t.flags)&&Ki(t,Ui,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zs(e,t),e=t.pendingProps;var i=Oi(t,Si.current);wo(t,r),i=_a(null,t,n,e,i,r);var a=wa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(n)?(a=!0,Ri(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ao(t),i.updater=Fo,t.stateNode=i,i._reactInternals=t,Uo(t,n,e,r),t=ks(null,t,n,!0,a,r)):(t.tag=0,eo&&a&&Xi(t),vs(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===N)return 14}return 2}(n),e=fo(n,e),i){case 0:t=Es(null,t,n,e,r);break e;case 1:t=Ss(null,t,n,e,r);break e;case 11:t=gs(null,t,n,e,r);break e;case 14:t=bs(null,t,n,fo(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Es(e,t,n,i=t.elementType===n?i:fo(n,i),r);case 1:return n=t.type,i=t.pendingProps,Ss(e,t,n,i=t.elementType===n?i:fo(n,i),r);case 3:e:{if(Ts(t),null===e)throw Error(o(387));n=t.pendingProps,i=(a=t.memoizedState).element,Po(e,t),Mo(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Os(e,t,n,r,i=as(Error(o(423)),t));break e}if(n!==i){t=Os(e,t,n,r,i=as(Error(o(424)),t));break e}for(Qi=oi(t.stateNode.containerInfo.firstChild),Ji=t,eo=!0,to=null,r=Yo(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(co(),n===i){t=$s(e,t,r);break e}vs(e,t,n,r)}t=t.child}return t;case 5:return ra(t),null===e&&oo(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Jn(n,i)?s=null:null!==a&&Jn(n,a)&&(t.flags|=32),xs(e,t),vs(e,t,s,r),t.child;case 6:return null===e&&oo(t),null;case 13:return Ms(e,t,r);case 4:return ea(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Wo(t,null,n,r):vs(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,gs(e,t,n,i=t.elementType===n?i:fo(n,i),r);case 7:return vs(e,t,t.pendingProps,r),t.child;case 8:case 12:return vs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,xi(ho,n._currentValue),n._currentValue=s,null!==a)if(rn(a.value,s)){if(a.children===i.children&&!ki.current){t=$s(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Co(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var p=(u=u.shared).pending;null===p?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),_o(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),_o(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}vs(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,wo(t,r),n=n(i=xo(i)),t.flags|=1,vs(e,t,n,r),t.child;case 14:return i=fo(n=t.type,t.pendingProps),bs(e,t,n,i=fo(n.type,i),r);case 15:return _s(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:fo(n,i),zs(e,t),t.tag=1,Ai(n)?(e=!0,Ri(t)):e=!1,wo(t,r),zo(t,n,i),Uo(t,n,i,r),ks(null,t,n,!0,e,r);case 19:return Bs(e,t,r);case 22:return ws(e,t,r)}throw Error(o(156,t.tag))};var Vc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Wc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(){}function Xc(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=$c(a);s.call(e)}}zc(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var e=$c(a);o.call(e)}}var a=Bc(t,n,e,0,null,!1,0,"",Kc);return e._reactRootContainer=a,e[ui]=a.current,Fn(8===e.nodeType?e.parentNode:e),sc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var s=n;n=function(){var e=$c(l);s.call(e)}}var l=Lc(e,0,!1,null,0,!1,0,"",Kc);return e._reactRootContainer=l,e[ui]=l.current,Fn(8===e.nodeType?e.parentNode:e),sc((function(){zc(t,l,r,n)})),l}(r,t,e,i,n);return $c(a)}qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));zc(e,t,null,null)},qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sc((function(){zc(null,e,null,null)})),t[ui]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Dt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(vt(t,1|r),ec(t,Xe()),0===(6&kl)&&(Bl=Xe()+500,Fi()))}break;case 13:sc((function(){var t=To(e,1);if(null!==t){var r=Zl();Ql(t,e,1,r)}})),Hc(e,1)}},wt=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)Ql(t,e,134217728,Zl());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=Jl(e),r=To(e,t);if(null!==r)Ql(r,e,t,Zl());Hc(e,t)}},Et=function(){return gt},St=function(e,t){var r=gt;try{return gt=e,t()}finally{gt=r}},we=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=vi(n);if(!i)throw Error(o(90));W(n),J(n,i)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Oe=ac,Ae=sc;var Zc={usingClientEntryPoint:!1,Events:[yi,mi,vi,ke,Te,ac]},Jc={findFiberByHostInstance:di,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Qc={bundleType:Jc.bundleType,version:Jc.version,rendererPackageName:Jc.rendererPackageName,rendererConfig:Jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:Jc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{nt=eu.inject(Qc),it=eu}catch(tu){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Wc(t))throw Error(o(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Wc(e))throw Error(o(299));var r=!1,n="",i=Vc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Lc(e,1,!1,null,0,r,0,n,i),e[ui]=t.current,Fn(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return sc(e)},t.hydrate=function(e,t,r){if(!Yc(t))throw Error(o(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Wc(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,a="",s=Vc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Bc(t,null,e,1,null!=r?r:null,i,0,a,s),e[ui]=t.current,Fn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new qc(t)},t.render=function(e,t,r){if(!Yc(t))throw Error(o(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(o(40));return!!e._reactRootContainer&&(sc((function(){Xc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ui]=null}))})),!0)},t.unstable_batchedUpdates=ac,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yc(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Xc(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:(e,t,r)=>{"use strict";var n=r(4164);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4164:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4463)},77:e=>{var t="undefined"!==typeof Element,r="function"===typeof Map,n="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(l=s;0!==l--;)if(!o(e[l],a[l]))return!1;return!0}if(r&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(n&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(l=s;0!==l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!o(e[c[l]],a[c[l]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return o(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}},1372:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case p:case o:case s:case a:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case y:case l:return e;default:return t}}case i:return t}}}function x(e){return w(e)===p}t.AsyncMode=u,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=f,t.Fragment=o,t.Lazy=m,t.Memo=y,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.isAsyncMode=function(e){return x(e)||w(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===y},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===p||e===s||e===a||e===h||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===y||e.$$typeof===l||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},t.typeOf=w},7441:(e,t,r)=>{"use strict";e.exports=r(1372)},11:(e,t,r)=>{"use strict";r.r(t),r.d(t,{IGNORE_CLASS_NAME:()=>d,default:()=>m});var n=r(2791),i=r(4164);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(r):e.classList.contains(r))}var l,c,u=(void 0===l&&(l=0),function(){return++l}),p={},f={},h=["touchstart","touchmove"],d="ignore-react-onclickoutside";function y(e,t){var r={};return-1!==h.indexOf(t)&&c&&(r.passive=!e.props.preventDefault),r}const m=function(e,t){var r,l,h=e.displayName||e.name||"Component";return l=r=function(r){var l,d;function m(e){var n;return(n=r.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof n.__clickOutsideHandlerProp){var t=n.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+h+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else n.__clickOutsideHandlerProp(e)},n.__getComponentNode=function(){var e=n.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,i.findDOMNode)(e)},n.enableOnClickOutside=function(){if("undefined"!==typeof document&&!f[n._uid]){"undefined"===typeof c&&(c=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,t),window.removeEventListener("testPassiveEventSupport",r,t),e}}()),f[n._uid]=!0;var e=n.props.eventTypes;e.forEach||(e=[e]),p[n._uid]=function(e){var t;null!==n.componentNode&&(n.props.preventDefault&&e.preventDefault(),n.props.stopPropagation&&e.stopPropagation(),n.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,r){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&s(e,t,r))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,n.componentNode,n.props.outsideClickIgnoreClass)===document&&n.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,p[n._uid],y(a(n),e))}))}},n.disableOnClickOutside=function(){delete f[n._uid];var e=p[n._uid];if(e&&"undefined"!==typeof document){var t=n.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,y(a(n),t))})),delete p[n._uid]}},n.getRef=function(e){return n.instanceRef=e},n._uid=u(),n}d=r,(l=m).prototype=Object.create(d.prototype),l.prototype.constructor=l,o(l,d);var v=m.prototype;return v.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},v.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+h+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},v.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},v.componentWillUnmount=function(){this.disableOnClickOutside()},v.render=function(){var t=this.props;t.excludeScrollbar;var r=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?r.ref=this.getRef:r.wrappedRef=this.getRef,r.disableOnClickOutside=this.disableOnClickOutside,r.enableOnClickOutside=this.enableOnClickOutside,(0,n.createElement)(e,r)},m}(n.Component),r.displayName="OnClickOutside("+h+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:d,preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},l}},2025:(e,t,r)=>{"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var i=r(9271),o=n(r(2791)),a=r(2610),s=n(r(2007)),l=n(r(5501)),c=n(r(90));function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function p(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var d=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=a.createBrowserHistory(t.props),t}return p(t,e),t.prototype.render=function(){return o.createElement(i.Router,{history:this.history,children:this.props.children})},t}(o.Component);d.propTypes={basename:s.string,children:s.node,forceRefresh:s.bool,getUserConfirmation:s.func,keyLength:s.number},d.prototype.componentDidMount=function(){l(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")};var y=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=a.createHashHistory(t.props),t}return p(t,e),t.prototype.render=function(){return o.createElement(i.Router,{history:this.history,children:this.props.children})},t}(o.Component);y.propTypes={basename:s.string,children:s.node,getUserConfirmation:s.func,hashType:s.oneOf(["hashbang","noslash","slash"])},y.prototype.componentDidMount=function(){l(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")};var m=function(e,t){return"function"===typeof e?e(t):e},v=function(e,t){return"string"===typeof e?a.createLocation(e,null,null,t):e},g=function(e){return e},b=o.forwardRef;"undefined"===typeof b&&(b=g);var _=b((function(e,t){var r=e.innerRef,n=e.navigate,i=e.onClick,a=h(e,["innerRef","navigate","onClick"]),s=a.target,l=u({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return l.ref=g!==b&&t||r,o.createElement("a",l)}));_.displayName="LinkAnchor";var w=b((function(e,t){var r=e.component,n=void 0===r?_:r,s=e.replace,l=e.to,p=e.innerRef,f=h(e,["component","replace","to","innerRef"]);return o.createElement(i.__RouterContext.Consumer,null,(function(e){e||c(!1,"You should not use <Link> outside a <Router>");var r=e.history,i=v(m(l,e.location),e.location),h=i?r.createHref(i):"",d=u({},f,{href:h,navigate:function(){var t=m(l,e.location),n=a.createPath(e.location)===a.createPath(v(t));(s||n?r.replace:r.push)(t)}});return g!==b?d.ref=t||p:d.innerRef=p,o.createElement(n,d)}))})),x=s.oneOfType([s.string,s.object,s.func]),E=s.oneOfType([s.string,s.func,s.shape({current:s.any})]);w.displayName="Link",w.propTypes={innerRef:E,onClick:s.func,replace:s.bool,target:s.string,to:x.isRequired};var S=function(e){return e},k=o.forwardRef;"undefined"===typeof k&&(k=S);var T=k((function(e,t){var r=e["aria-current"],n=void 0===r?"page":r,a=e.activeClassName,s=void 0===a?"active":a,l=e.activeStyle,p=e.className,f=e.exact,d=e.isActive,y=e.location,g=e.sensitive,b=e.strict,_=e.style,x=e.to,E=e.innerRef,T=h(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(i.__RouterContext.Consumer,null,(function(e){e||c(!1,"You should not use <NavLink> outside a <Router>");var r=y||e.location,a=v(m(x,r),r),h=a.pathname,O=h&&h.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),A=O?i.matchPath(r.pathname,{path:O,exact:f,sensitive:g,strict:b}):null,P=!!(d?d(A,r):A),C="function"===typeof p?p(P):p,N="function"===typeof _?_(P):_;P&&(C=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return e})).join(" ")}(C,s),N=u({},N,l));var R=u({"aria-current":P&&n||null,className:C,style:N,to:a},T);return S!==k?R.ref=t||E:R.innerRef=E,o.createElement(w,R)}))}));T.displayName="NavLink";var O=s.oneOf(["page","step","location","date","time","true","false"]);T.propTypes=u({},w.propTypes,{"aria-current":O,activeClassName:s.string,activeStyle:s.object,className:s.oneOfType([s.string,s.func]),exact:s.bool,isActive:s.func,location:s.object,sensitive:s.bool,strict:s.bool,style:s.oneOfType([s.object,s.func])}),Object.defineProperty(t,"l_",{enumerable:!0,get:function(){return i.Redirect}})},542:(e,t,r)=>{"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(9271),o=n(r(2791)),a=r(2610);r(2007),r(5501);var s=n(r(90));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}var f=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=a.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return o.createElement(i.Router,{history:this.history,children:this.props.children})},t}(o.Component),h=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=a.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return o.createElement(i.Router,{history:this.history,children:this.props.children})},t}(o.Component),d=function(e,t){return"function"==typeof e?e(t):e},y=function(e,t){return"string"==typeof e?a.createLocation(e,null,null,t):e},m=function(e){return e},v=o.forwardRef;void 0===v&&(v=m);var g=v((function(e,t){var r=e.innerRef,n=e.navigate,i=e.onClick,a=p(e,["innerRef","navigate","onClick"]),s=a.target,c=l({},a,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),n())}});return c.ref=m!==v&&t||r,o.createElement("a",c)})),b=v((function(e,t){var r=e.component,n=void 0===r?g:r,c=e.replace,u=e.to,f=e.innerRef,h=p(e,["component","replace","to","innerRef"]);return o.createElement(i.__RouterContext.Consumer,null,(function(e){e||s(!1);var r=e.history,i=y(d(u,e.location),e.location),p=i?r.createHref(i):"",g=l({},h,{href:p,navigate:function(){var t=d(u,e.location),n=a.createPath(e.location)===a.createPath(y(t));(c||n?r.replace:r.push)(t)}});return m!==v?g.ref=t||f:g.innerRef=f,o.createElement(n,g)}))})),_=function(e){return e},w=o.forwardRef;void 0===w&&(w=_);var x=w((function(e,t){var r=e["aria-current"],n=void 0===r?"page":r,a=e.activeClassName,c=void 0===a?"active":a,u=e.activeStyle,f=e.className,h=e.exact,m=e.isActive,v=e.location,g=e.sensitive,x=e.strict,E=e.style,S=e.to,k=e.innerRef,T=p(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(i.__RouterContext.Consumer,null,(function(e){e||s(!1);var r=v||e.location,a=y(d(S,r),r),p=a.pathname,O=p&&p.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),A=O?i.matchPath(r.pathname,{path:O,exact:h,sensitive:g,strict:x}):null,P=!!(m?m(A,r):A),C="function"==typeof f?f(P):f,N="function"==typeof E?E(P):E;P&&(C=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return e})).join(" ")}(C,c),N=l({},N,u));var R=l({"aria-current":P&&n||null,className:C,style:N,to:a},T);return _!==w?R.ref=t||k:R.innerRef=k,o.createElement(b,R)}))}));t.rU=b},9271:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MemoryRouter:()=>E,Prompt:()=>k,Redirect:()=>C,Route:()=>I,Router:()=>x,StaticRouter:()=>$,Switch:()=>U,__HistoryContext:()=>_,__RouterContext:()=>w,generatePath:()=>P,matchPath:()=>M,useHistory:()=>G,useLocation:()=>q,useParams:()=>W,useRouteMatch:()=>Y,withRouter:()=>H});var n=r(4578),i=r(2791),o=r(2610),a=r(2007),s=r.n(a),l=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{};var u=i.createContext||function(e,t){var r,o,a="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",u=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(r,n){e=r,t.forEach((function(t){return t(e,n)}))}}}(t.props.value),t}(0,n.Z)(r,e);var i=r.prototype;return i.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var r,n=this.props.value,i=e.value;((o=n)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?r=0:(r="function"===typeof t?t(n,i):l,0!==(r|=0)&&this.emitter.set(e.value,r))}var o,a},i.render=function(){return this.props.children},r}(i.Component);u.childContextTypes=((r={})[a]=s().object.isRequired,r);var p=function(t){function r(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,r){0!==((0|e.observedBits)&r)&&e.setState({value:e.getValue()})},e}(0,n.Z)(r,t);var i=r.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?l:t},i.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?l:e},i.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},i.getValue=function(){return this.context[a]?this.context[a].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},r}(i.Component);return p.contextTypes=((o={})[a]=s().object,o),{Provider:u,Consumer:p}};const p=u;var f=r(4554),h=r(7462),d=r(3813),y=r.n(d),m=(r(7441),r(3366)),v=r(2110),g=r.n(v),b=function(e){var t=p();return t.displayName=e,t},_=b("Router-History"),w=b("Router"),x=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={location:t.history.location},r._isMounted=!1,r._pendingLocation=null,t.staticContext||(r.unlisten=t.history.listen((function(e){r._pendingLocation=e}))),r}(0,n.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=t.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return i.createElement(w.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(_.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var E=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=(0,o.createMemoryHistory)(t.props),t}return(0,n.Z)(t,e),t.prototype.render=function(){return i.createElement(x,{history:this.history,children:this.props.children})},t}(i.Component);var S=function(e){function t(){return e.apply(this,arguments)||this}(0,n.Z)(t,e);var r=t.prototype;return r.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},r.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},r.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},r.render=function(){return null},t}(i.Component);function k(e){var t=e.message,r=e.when,n=void 0===r||r;return i.createElement(w.Consumer,null,(function(e){if(e||(0,f.Z)(!1),!n||e.staticContext)return null;var r=e.history.block;return i.createElement(S,{onMount:function(e){e.release=r(t)},onUpdate:function(e,n){n.message!==t&&(e.release(),e.release=r(t))},onUnmount:function(e){e.release()},message:t})}))}var T={},O=1e4,A=0;function P(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(T[e])return T[e];var t=y().compile(e);return A<O&&(T[e]=t,A++),t}(e)(t,{pretty:!0})}function C(e){var t=e.computedMatch,r=e.to,n=e.push,a=void 0!==n&&n;return i.createElement(w.Consumer,null,(function(e){e||(0,f.Z)(!1);var n=e.history,s=e.staticContext,l=a?n.push:n.replace,c=(0,o.createLocation)(t?"string"===typeof r?P(r,t.params):(0,h.Z)({},r,{pathname:P(r.pathname,t.params)}):r);return s?(l(c),null):i.createElement(S,{onMount:function(){l(c)},onUpdate:function(e,t){var r=(0,o.createLocation)(t.to);(0,o.locationsAreEqual)(r,(0,h.Z)({},c,{key:r.key}))||l(c)},to:r})}))}var N={},R=1e4,j=0;function M(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var r=t,n=r.path,i=r.exact,o=void 0!==i&&i,a=r.strict,s=void 0!==a&&a,l=r.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(t,r){if(!r&&""!==r)return null;if(t)return t;var n=function(e,t){var r=""+t.end+t.strict+t.sensitive,n=N[r]||(N[r]={});if(n[e])return n[e];var i=[],o={regexp:y()(e,i,t),keys:i};return j<R&&(n[e]=o,j++),o}(r,{end:o,strict:s,sensitive:c}),i=n.regexp,a=n.keys,l=i.exec(e);if(!l)return null;var u=l[0],p=l.slice(1),f=e===u;return o&&!f?null:{path:r,url:"/"===r&&""===u?"/":u,isExact:f,params:a.reduce((function(e,t,r){return e[t.name]=p[r],e}),{})}}),null)}var I=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(w.Consumer,null,(function(t){t||(0,f.Z)(!1);var r=e.props.location||t.location,n=e.props.computedMatch?e.props.computedMatch:e.props.path?M(r.pathname,e.props):t.match,o=(0,h.Z)({},t,{location:r,match:n}),a=e.props,s=a.children,l=a.component,c=a.render;return Array.isArray(s)&&function(e){return 0===i.Children.count(e)}(s)&&(s=null),i.createElement(w.Provider,{value:o},o.match?s?"function"===typeof s?s(o):s:l?i.createElement(l,o):c?c(o):null:"function"===typeof s?s(o):null)}))},t}(i.Component);function D(e){return"/"===e.charAt(0)?e:"/"+e}function L(e,t){if(!e)return t;var r=D(e);return 0!==t.pathname.indexOf(r)?t:(0,h.Z)({},t,{pathname:t.pathname.substr(r.length)})}function F(e){return"string"===typeof e?e:(0,o.createPath)(e)}function B(e){return function(){(0,f.Z)(!1)}}function z(){}var $=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return z},t.handleBlock=function(){return z},t}(0,n.Z)(t,e);var r=t.prototype;return r.navigateTo=function(e,t){var r=this.props,n=r.basename,i=void 0===n?"":n,a=r.context,s=void 0===a?{}:a;s.action=t,s.location=function(e,t){return e?(0,h.Z)({},t,{pathname:D(e)+t.pathname}):t}(i,(0,o.createLocation)(e)),s.url=F(s.location)},r.render=function(){var e=this.props,t=e.basename,r=void 0===t?"":t,n=e.context,a=void 0===n?{}:n,s=e.location,l=void 0===s?"/":s,c=(0,m.Z)(e,["basename","context","location"]),u={createHref:function(e){return D(r+F(e))},action:"POP",location:L(r,(0,o.createLocation)(l)),push:this.handlePush,replace:this.handleReplace,go:B(),goBack:B(),goForward:B(),listen:this.handleListen,block:this.handleBlock};return i.createElement(x,(0,h.Z)({},c,{history:u,staticContext:a}))},t}(i.Component);var U=function(e){function t(){return e.apply(this,arguments)||this}return(0,n.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(w.Consumer,null,(function(t){t||(0,f.Z)(!1);var r,n,o=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==n&&i.isValidElement(e)){r=e;var a=e.props.path||e.props.from;n=a?M(o.pathname,(0,h.Z)({},e.props,{path:a})):t.match}})),n?i.cloneElement(r,{location:o,computedMatch:n}):null}))},t}(i.Component);function H(e){var t="withRouter("+(e.displayName||e.name)+")",r=function(t){var r=t.wrappedComponentRef,n=(0,m.Z)(t,["wrappedComponentRef"]);return i.createElement(w.Consumer,null,(function(t){return t||(0,f.Z)(!1),i.createElement(e,(0,h.Z)({},n,t,{ref:r}))}))};return r.displayName=t,r.WrappedComponent=e,g()(r,e)}var V=i.useContext;function G(){return V(_)}function q(){return V(w).location}function W(){var e=V(w).match;return e?e.params:{}}function Y(e){var t=q(),r=V(w).match;return e?M(t.pathname,e):r}},3381:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},3813:(e,t,r)=>{var n=r(3381);e.exports=h,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var r,n=[],o=0,a=0,s="",u=t&&t.delimiter||"/";null!=(r=i.exec(e));){var p=r[0],f=r[1],h=r.index;if(s+=e.slice(a,h),a=h+p.length,f)s+=f[1];else{var d=e[a],y=r[2],m=r[3],v=r[4],g=r[5],b=r[6],_=r[7];s&&(n.push(s),s="");var w=null!=y&&null!=d&&d!==y,x="+"===b||"*"===b,E="?"===b||"*"===b,S=r[2]||u,k=v||g;n.push({name:m||o++,prefix:y||"",delimiter:S,optional:E,repeat:x,partial:w,asterisk:!!_,pattern:k?c(k):_?".*":"[^"+l(S)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&n.push(s),n}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(r[i]=new RegExp("^(?:"+e[i].pattern+")$",p(t)));return function(t,i){for(var o="",s=t||{},l=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var p,f=s[u.name];if(null==f){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(n(f)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<f.length;h++){if(p=l(f[h]),!r[c].test(p))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(p)+"`");o+=(0===h?u.prefix:u.delimiter)+p}}else{if(p=u.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(f),!r[c].test(p))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+p+'"');o+=u.prefix+p}}else o+=u}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function p(e){return e&&e.sensitive?"":"i"}function f(e,t,r){n(t)||(r=t||r,t=[]);for(var i=(r=r||{}).strict,o=!1!==r.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=l(c);else{var f=l(c.prefix),h="(?:"+c.pattern+")";t.push(c),c.repeat&&(h+="(?:"+f+h+")*"),a+=h=c.optional?c.partial?f+"("+h+")?":"(?:"+f+"("+h+"))?":f+"("+h+")"}}var d=l(r.delimiter||"/"),y=a.slice(-d.length)===d;return i||(a=(y?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&y?"":"(?="+d+"|$)",u(new RegExp("^"+a,p(r)),t)}function h(e,t,r){return n(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):n(e)?function(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(h(e[i],t,r).source);return u(new RegExp("(?:"+n.join("|")+")",p(r)),t)}(e,t,r):function(e,t,r){return f(o(e,r),t,r)}(e,t,r)}},6374:(e,t,r)=>{"use strict";var n=r(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,o={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,m={};function v(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||d}function g(){}function b(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||d}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var _=b.prototype=new g;_.constructor=b,y(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(O,"$&/")+"/"),P(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+A(s=e[c],c);l+=P(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=P(s=s.value,t,i,u=o+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,r){if(null==e)return e;var n=[],i=0;return P(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},j={transition:null},M={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:j,ReactCurrentOwner:E};t.Children={map:C,forEach:function(e,t,r){C(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,r){return R.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,r){return R.current.useReducer(e,t,r)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return R.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:(e,t,r)=>{"use strict";e.exports=r(9117)},184:(e,t,r)=>{"use strict";e.exports=r(6374)},6813:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<o(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,a=i>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,r))c<i&&0>o(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<i&&0>o(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],p=1,f=null,h=3,d=!1,y=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function w(e){if(m=!1,_(e),!y)if(null!==n(c))y=!0,j(x);else{var t=n(u);null!==t&&M(w,t.startTime-e)}}function x(e,r){y=!1,m&&(m=!1,g(T),T=-1),d=!0;var o=h;try{for(_(r),f=n(c);null!==f&&(!(f.expirationTime>r)||e&&!P());){var a=f.callback;if("function"===typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?f.callback=s:f===n(c)&&i(c),_(r)}else i(c);f=n(c)}if(null!==f)var l=!0;else{var p=n(u);null!==p&&M(w,p.startTime-r),l=!1}return l}finally{f=null,h=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,k=null,T=-1,O=5,A=-1;function P(){return!(t.unstable_now()-A<O)}function C(){if(null!==k){var e=t.unstable_now();A=e;var r=!0;try{r=k(!0,e)}finally{r?E():(S=!1,k=null)}}else S=!1}if("function"===typeof b)E=function(){b(C)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=C,E=function(){R.postMessage(null)}}else E=function(){v(C,0)};function j(e){k=e,S||(S=!0,E())}function M(e,r){T=v((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){y||d||(y=!0,j(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:p++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,r(u,e),null===n(c)&&e===n(u)&&(m?(g(T),T=-1):m=!0,M(w,o-a))):(e.sortIndex=s,r(c,e),y||d||(y=!0,j(x))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},5296:(e,t,r)=>{"use strict";e.exports=r(6813)},9613:e=>{e.exports=function(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],p=t[c];if(!1===(i=r?r.call(n,u,p,c):void 0)||void 0===i&&u!==p)return!1}return!0}},90:e=>{"use strict";var t="Invariant failed";e.exports=function(e,r){if(!e)throw new Error(t)}},5501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n=function(e,t){}},2391:e=>{"use strict";var t=function(){};e.exports=t},9572:function(module){!function(e,t){module.exports=t()}("undefined"!=typeof self&&self,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=95)}([function(e,t,r){"use strict";t.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics"),t.arrayParentSymbol=Symbol("mongoose#Array#_parent"),t.arrayPathSymbol=Symbol("mongoose#Array#_path"),t.arraySchemaSymbol=Symbol("mongoose#Array#_schema"),t.documentArrayParent=Symbol("mongoose:documentArrayParent"),t.documentIsSelected=Symbol("mongoose#Document#isSelected"),t.documentIsModified=Symbol("mongoose#Document#isModified"),t.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths"),t.documentSchemaSymbol=Symbol("mongoose#Document#schema"),t.getSymbol=Symbol("mongoose#Document#get"),t.modelSymbol=Symbol("mongoose#Model"),t.objectIdSymbol=Symbol("mongoose#ObjectId"),t.populateModelSymbol=Symbol("mongoose.PopulateOptions#Model"),t.schemaTypeSymbol=Symbol("mongoose#schemaType"),t.sessionNewDocuments=Symbol("mongoose:ClientSession#newDocuments"),t.scopeSymbol=Symbol("mongoose#Document#scope"),t.validatorErrorSymbol=Symbol("mongoose:validatorError")},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,s=r(113),l=r(49),c=r(62),u=r(63).Buffer,p=r(20),f=r(7),h=r(116),d=r(29),y=r(22),m=r(21),v=r(66),g=r(65),b=r(30),_=r(25),w=r(71),x=r(50);function E(e){if(Array.isArray(e.populate)){var r=[];e.populate.forEach((function(e){if(/[\s]/.test(e.path)){var n=Object.assign({},e);n.path.split(" ").forEach((function(e){n.path=e,r.push(t.populate(n)[0])}))}else r.push(t.populate(e)[0])})),e.populate=t.populate(r)}else null!=e.populate&&"object"===o(e.populate)&&(e.populate=t.populate(e.populate));var i=[],a=e.path.split(" ");null!=e.options&&(e.options=t.clone(e.options));var s,l=n(a);try{for(l.s();!(s=l.n()).done;){var c=s.value;i.push(new h(Object.assign({},e,{path:c})))}}catch(e){l.e(e)}finally{l.f()}return i}t.specialProperties=x,t.toCollectionName=function(e,t){return"system.profile"===e||"system.indexes"===e?e:"function"==typeof t?t(e):e},t.deepEqual=function e(r,n){if(r===n)return!0;if("object"!==o(r)&&"object"!==o(n))return r===n;if(r instanceof Date&&n instanceof Date)return r.getTime()===n.getTime();if(v(r,"ObjectID")&&v(n,"ObjectID")||v(r,"Decimal128")&&v(n,"Decimal128"))return r.toString()===n.toString();if(r instanceof RegExp&&n instanceof RegExp)return r.source===n.source&&r.ignoreCase===n.ignoreCase&&r.multiline===n.multiline&&r.global===n.global;if(null==r||null==n)return!1;if(r.prototype!==n.prototype)return!1;if(r instanceof Map&&n instanceof Map)return e(Array.from(r.keys()),Array.from(n.keys()))&&e(Array.from(r.values()),Array.from(n.values()));if(r instanceof Number&&n instanceof Number)return r.valueOf()===n.valueOf();if(u.isBuffer(r))return t.buffer.areEqual(r,n);if(Array.isArray(r)&&Array.isArray(n)){var i=r.length;if(i!==n.length)return!1;for(var a=0;a<i;++a)if(!e(r[a],n[a]))return!1;return!0}null!=r.$__?r=r._doc:b(r)&&(r=r.toObject()),null!=n.$__?n=n._doc:b(n)&&(n=n.toObject());var s=Object.keys(r),l=Object.keys(n),c=s.length;if(c!==l.length)return!1;s.sort(),l.sort();for(var p=c-1;p>=0;p--)if(s[p]!==l[p])return!1;for(var f=0,h=s;f<h.length;f++){var d=h[f];if(!e(r[d],n[d]))return!1}return!0},t.last=function(e){if(e.length>0)return e[e.length-1]},t.clone=d,t.promiseOrCallback=_,t.omit=function(e,t){if(null==t)return Object.assign({},e);Array.isArray(t)||(t=[t]);var r,i=Object.assign({},e),o=n(t);try{for(o.s();!(r=o.n()).done;)delete i[r.value]}catch(e){o.e(e)}finally{o.f()}return i},t.options=function(e,t){var r,n=Object.keys(e),i=n.length;for(t=t||{};i--;)(r=n[i])in t||(t[r]=e[r]);return t},t.random=function(){return Math.random().toString().substr(3)},t.merge=function e(r,n,i,o){i=i||{};var a,s=Object.keys(n),l=0,c=s.length;o=o||"";for(var u=i.omitNested||{};l<c;)if(a=s[l++],!(i.omit&&i.omit[a]||u[o]||x.has(a)))if(null==r[a])r[a]=n[a];else if(t.isObject(n[a])){if(t.isObject(r[a])||(r[a]={}),null!=n[a]){if(i.isDiscriminatorSchemaMerge&&n[a].$isSingleNested&&r[a].$isMongooseDocumentArray||n[a].$isMongooseDocumentArray&&r[a].$isSingleNested)continue;if(n[a].instanceOfSchema){r[a].instanceOfSchema?w(r[a],n[a].clone(),i.isDiscriminatorSchemaMerge):r[a]=n[a].clone();continue}if(n[a]instanceof f){r[a]=new f(n[a]);continue}}e(r[a],n[a],i,o?o+"."+a:a)}else i.overwrite&&(r[a]=n[a])},t.toObject=function e(i){var o;if(a||(a=r(12)),null==i)return i;if(i instanceof a)return i.toObject();if(Array.isArray(i)){o=[];var s,l=n(i);try{for(l.s();!(s=l.n()).done;){var c=s.value;o.push(e(c))}}catch(e){l.e(e)}finally{l.f()}return o}if(t.isPOJO(i)){o={};for(var u=0,p=Object.keys(i);u<p.length;u++){var f=p[u];x.has(f)||(o[f]=e(i[f]))}return o}return i},t.isObject=m,t.isPOJO=function(e){if(null==e||"object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return!t||"Object"===t.constructor.name},t.isNativeObject=function(e){return Array.isArray(e)||e instanceof Date||e instanceof Boolean||e instanceof Number||e instanceof String},t.isEmptyObject=function(e){return null!=e&&"object"===o(e)&&0===Object.keys(e).length},t.hasKey=function(e,r){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(o===r)return!0;if(t.isPOJO(e[o])&&t.hasKey(e[o],r))return!0}return!1},t.args=c,t.tick=function(e){if("function"==typeof e)return function(){try{e.apply(this,arguments)}catch(e){y((function(){throw e}))}}},t.isMongooseType=function(e){return e instanceof f||e instanceof p||e instanceof u},t.isMongooseObject=b,t.expires=function(e){var t;e&&"Object"===e.constructor.name&&"expires"in e&&(t="string"!=typeof e.expires?e.expires:Math.round(s(e.expires)/1e3),e.expireAfterSeconds=t,delete e.expires)},t.populate=function(e,r,n,i,a,s,l,c){var u=null;if(1===arguments.length){if(e instanceof h)return[e];if(Array.isArray(e)){var p=function(e){var t=[];return e.forEach((function(e){/[\s]/.test(e.path)?e.path.split(" ").forEach((function(r){var n=Object.assign({},e);n.path=r,t.push(n)})):t.push(e)})),t}(e);return p.map((function(e){return t.populate(e)[0]}))}u=t.isObject(e)?Object.assign({},e):{path:e}}else u="object"===o(n)?{path:e,select:r,match:n,options:i}:{path:e,select:r,model:n,match:i,options:a,populate:s,justOne:l,count:c};if("string"!=typeof u.path)throw new TypeError("utils.populate: invalid path. Expected string. Got typeof `"+o(e)+"`");return E(u)},t.getValue=function(e,t,r){return l.get(e,t,"_doc",r)},t.setValue=function(e,t,r,n,i){l.set(e,t,r,"_doc",n,i)},t.object={},t.object.vals=function(e){for(var t=Object.keys(e),r=t.length,n=[];r--;)n.push(e[t[r]]);return n},t.object.shallowCopy=t.options;var S=Object.prototype.hasOwnProperty;t.object.hasOwnProperty=function(e,t){return S.call(e,t)},t.isNullOrUndefined=function(e){return null==e},t.array={},t.array.flatten=function e(t,r,n){return n||(n=[]),t.forEach((function(t){Array.isArray(t)?e(t,r,n):r&&!r(t)||n.push(t)})),n};var k=Object.prototype.hasOwnProperty;t.hasUserDefinedProperty=function(e,r){if(null==e)return!1;if(Array.isArray(r)){var i,a=n(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(t.hasUserDefinedProperty(e,s))return!0}}catch(e){a.e(e)}finally{a.f()}return!1}if(k.call(e,r))return!0;if("object"===o(e)&&r in e){var l=e[r];return l!==Object.prototype[r]&&l!==Array.prototype[r]}return!1};var T=Math.pow(2,32)-1;t.isArrayIndex=function(e){return"number"==typeof e?e>=0&&e<=T:"string"==typeof e&&!!/^\d+$/.test(e)&&(e=+e)>=0&&e<=T},t.array.unique=function(e){var t,r=new Set,i=new Set,o=[],a=n(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if("number"==typeof s||"string"==typeof s||null==s){if(r.has(s))continue;o.push(s),r.add(s)}else if(s instanceof f){if(i.has(s.toString()))continue;o.push(s),i.add(s.toString())}else o.push(s)}}catch(e){a.e(e)}finally{a.f()}return o},t.buffer={},t.buffer.areEqual=function(e,t){if(!u.isBuffer(e))return!1;if(!u.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0},t.getFunctionName=g,t.decorate=function(e,t){for(var r in t)x.has(r)||(e[r]=t[r])},t.mergeClone=function(e,r){b(r)&&(r=r.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));for(var n,i=Object.keys(r),o=i.length,a=0;a<o;)if(n=i[a++],!x.has(n))if(void 0===e[n])e[n]=t.clone(r[n],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{var s=r[n];if(null==s||!s.valueOf||s instanceof Date||(s=s.valueOf()),t.isObject(s)){var l=s;b(s)&&!s.isMongooseBuffer&&(l=l.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),s.isMongooseBuffer&&(l=u.from(l)),t.mergeClone(e[n],l)}else e[n]=t.clone(s,{flattenDecimals:!1})}},t.each=function(e,t){var r,i=n(e);try{for(i.s();!(r=i.n()).done;)t(r.value)}catch(e){i.e(e)}finally{i.f()}},t.getOption=function(e){var t,r=n(Array.prototype.slice.call(arguments,1));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(null!=i[e])return i[e]}}catch(e){r.e(e)}finally{r.f()}return null},t.noop=function(){},t.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");var t,r={},i=n(Object.getOwnPropertyNames(e));try{for(i.s();!(t=i.n()).done;){var o=t.value;r[o]=e[o]}}catch(e){i.e(e)}finally{i.f()}return r}},function(e,t,r){"use strict";(function(e){var n=r(97),i=r(98),o=r(99);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),i=(e=s(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|h(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(u(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|h(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function d(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var p=!0,f=0;f<l;f++)if(c(e,o+f)!==c(t,f)){p=!1;break}if(p)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function _(e,t,r,n){return U(z(t,e.length-r),e,r,n)}function w(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function E(e,t,r,n){return U($(t),e,r,n)}function S(e,t,r,n){return U(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,c=e[i],u=null,p=c>239?4:c>223?3:c>191?2:1;if(i+p<=r)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,p=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=B(e[o]);return i}function C(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function j(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function I(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return o||I(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,o){return o||I(e,0,r,8),i.write(e,t,r,n,52,8),r+8}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return c(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return u(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):y.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(n,i),u=e.slice(t,r),p=0;p<s;++p)if(c[p]!==u[p]){o=c[p],a=u[p];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=l.isBuffer(e)?e:z(new l(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(10))},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){return null==e?e:e instanceof Map?e.get(t):e[t]}e.exports=function(e,t,r){var i,a=!1;if("string"==typeof t){if(-1===t.indexOf(".")){var s=o(e,t);return null==s?r:s}i=t.split(".")}else if(a=!0,1===(i=t).length){var l=o(e,i[0]);return null==l?r:l}var c,u=t,p=e,f=n(i);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(null==p)return r;if(!a&&null!=p[u])return p[u];p=o(p,h),a||(u=u.substr(h.length+1))}}catch(e){f.e(e)}finally{f.f()}return null==p?r:p}},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])m(s)||!w(s)?a+=" "+s:a+=" "+l(s);return a},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var a,s={};function l(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var r=l.styles[t];return r?"\x1b["+l.colors[r][0]+"m"+e+"\x1b["+l.colors[r][1]+"m":e}function u(e,t){return e}function p(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return g(i)||(i=p(e,i,n)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,r);if(o)return o;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),E(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(r);if(0===a.length){if(S(r)){var l=r.name?": "+r.name:"";return e.stylize("[Function"+l+"]","special")}if(_(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(E(r))return f(r)}var c,u="",w=!1,k=["{","}"];return d(r)&&(w=!0,k=["[","]"]),S(r)&&(u=" [Function"+(r.name?": "+r.name:"")+"]"),_(r)&&(u=" "+RegExp.prototype.toString.call(r)),x(r)&&(u=" "+Date.prototype.toUTCString.call(r)),E(r)&&(u=" "+f(r)),0!==a.length||w&&0!=r.length?n<0?_(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=w?function(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)A(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))})),o}(e,r,n,s,a):a.map((function(t){return h(e,r,n,s,t,w)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(c,u,k)):k[0]+u+k[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),A(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(r)?p(e,l.value,null):p(e,l.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return"number"==typeof e}function g(e){return"string"==typeof e}function b(e){return void 0===e}function _(e){return w(e)&&"[object RegExp]"===k(e)}function w(e){return"object"===n(e)&&null!==e}function x(e){return w(e)&&"[object Date]"===k(e)}function E(e){return w(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(b(a)&&(a=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=y,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=g,t.isSymbol=function(e){return"symbol"===n(e)},t.isUndefined=b,t.isRegExp=_,t.isObject=w,t.isDate=x,t.isError=E,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===n(e)||void 0===e},t.isBuffer=r(102);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=r(103),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=P,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,r).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(C,t,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,i(t)),r}}).call(this,r(11))},function(e,t,r){"use strict";var n=r(14);e.exports=n,n.messages=r(129),n.Messages=n.messages,n.DocumentNotFoundError=r(130),n.CastError=r(13),n.ValidationError=r(32),n.ValidatorError=r(72),n.VersionError=r(131),n.ParallelSaveError=r(132),n.OverwriteModelError=r(133),n.MissingSchemaError=r(134),n.DivergentArrayError=r(135),n.StrictModeError=r(33)},function(e,t,r){"use strict";(function(n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(5),a=r(8),s=r(51),l=r(73),c=r(3),u=r(136),p=r(22),f=r(0).schemaTypeSymbol,h=r(4),d=r(1),y=r(0).validatorErrorSymbol,m=r(0).documentIsModified,v=r(0).populateModelSymbol,g=o.CastError,b=o.ValidatorError;function _(e,t,r){this[f]=!0,this.path=e,this.instance=r,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=[],this.splitPath(),t=t||{};for(var n=this.constructor.defaultOptions||{},o=0,s=Object.keys(n);o<s.length;o++){var l=s[o];n.hasOwnProperty(l)&&!t.hasOwnProperty(l)&&(t[l]=n[l])}null==t.select&&delete t.select;var c=this.OptionsConstructor||a;this.options=new c(t),this._index=null,d.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,u(this));for(var p=0,h=Object.keys(this.options);p<h.length;p++){var y=h[p];if("cast"!==y){if(d.hasUserDefinedProperty(this.options,y)&&"function"==typeof this[y]){if("index"===y&&this._index){if(!1===t.index){var m=this._index;if("object"===i(m)&&null!=m){if(m.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(m.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}var v=t[y];if("default"===y){this.default(v);continue}var g=Array.isArray(v)?v:[v];this[y].apply(this,g)}}else this.castFunction(this.options[y])}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}_.prototype.OptionsConstructor=a,_.prototype.splitPath=function(){return null!=this._presplitPath?this._presplitPath:null!=this.path?(this._presplitPath=-1===this.path.indexOf(".")?[this.path]:this.path.split("."),this._presplitPath):void 0},_.cast=function(e){return 0===arguments.length||(!1===e&&(e=function(e){return e}),this._cast=e),this._cast},_.prototype.castFunction=function(e){return 0===arguments.length||(!1===e&&(e=this.constructor._defaultCaster||function(e){return e}),this._castFunction=e),this._castFunction},_.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")},_.set=function(e,t){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=t},_.get=function(e){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(e)},_.prototype.default=function(e){if(1===arguments.length){if(void 0===e)return void(this.defaultValue=void 0);if(null!=e&&e.instanceOfSchema)throw new o("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=e,this.defaultValue}return arguments.length>1&&(this.defaultValue=d.args(arguments)),this.defaultValue},_.prototype.index=function(e){return this._index=e,d.expires(this._index),this},_.prototype.unique=function(e){if(!1===this._index){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return null==this._index||!0===this._index?this._index={}:"string"==typeof this._index&&(this._index={type:this._index}),this._index.unique=e,this},_.prototype.text=function(e){if(!1===this._index){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return null===this._index||void 0===this._index||"boolean"==typeof this._index?this._index={}:"string"==typeof this._index&&(this._index={type:this._index}),this._index.text=e,this},_.prototype.sparse=function(e){if(!1===this._index){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return null==this._index||"boolean"==typeof this._index?this._index={}:"string"==typeof this._index&&(this._index={type:this._index}),this._index.sparse=e,this},_.prototype.immutable=function(e){return this.$immutable=e,u(this),this},_.prototype.transform=function(e){return this.options.transform=e,this},_.prototype.set=function(e){if("function"!=typeof e)throw new TypeError("A setter must be a function.");return this.setters.push(e),this},_.prototype.get=function(e){if("function"!=typeof e)throw new TypeError("A getter must be a function.");return this.getters.push(e),this},_.prototype.validate=function(e,t,r){var n,a,s,l;if("function"==typeof e||e&&"RegExp"===d.getFunctionName(e.constructor))return"function"==typeof t?(n={validator:e,message:t}).type=r||"user defined":t instanceof Object&&!r?((n=d.clone(t)).message||(n.message=n.msg),n.validator=e,n.type=n.type||"user defined"):(null==t&&(t=o.messages.general.default),r||(r="user defined"),n={message:t,type:r,validator:e}),n.isAsync&&w(),this.validators.push(n),this;for(a=0,s=arguments.length;a<s;a++){if(l=arguments[a],!d.isPOJO(l)){var c="Invalid validator. Received ("+i(l)+") "+l+". See http://mongoosejs.com/docs/api.html#schematype_SchemaType-validate";throw new Error(c)}this.validate(l.validator,l)}return this};var w=h.deprecate((function(){}),"Mongoose: the `isAsync` option for custom validators is deprecated. Make your async validators return a promise instead: https://mongoosejs.com/docs/validation.html#async-custom-validators");function x(e){return this.castForQuery(e)}function E(e){var t=this;return Array.isArray(e)?e.map((function(e){return Array.isArray(e)&&0===e.length?e:t.castForQuery(e)})):[this.castForQuery(e)]}_.prototype.required=function(e,t){var r={};if(arguments.length>0&&null==e)return this.validators=this.validators.filter((function(e){return e.validator!==this.requiredValidator}),this),this.isRequired=!1,delete this.originalRequiredValue,this;if("object"===i(e)&&(t=(r=e).message||t,e=e.isRequired),!1===e)return this.validators=this.validators.filter((function(e){return e.validator!==this.requiredValidator}),this),this.isRequired=!1,delete this.originalRequiredValue,this;var n=this;this.isRequired=!0,this.requiredValidator=function(t){var r=c(this,"$__.cachedRequired");if(null!=r&&!this.$__isSelected(n.path)&&!this[m](n.path))return!0;if(null!=r&&n.path in r){var i=!r[n.path]||n.checkRequired(t,this);return delete r[n.path],i}return"function"==typeof e&&!e.apply(this)||n.checkRequired(t,this)},this.originalRequiredValue=e,"string"==typeof e&&(t=e,e=void 0);var a=t||o.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:a,type:"required"})),this},_.prototype.ref=function(e){return this.options.ref=e,this},_.prototype.getDefault=function(e,t){var r="function"==typeof this.defaultValue?this.defaultValue.call(e):this.defaultValue;if(null!=r){"object"!==i(r)||this.options&&this.options.shared||(r=d.clone(r));var n=this.applySetters(r,e,t);return n&&n.$isSingleNested&&(n.$__parent=e),n}return r},_.prototype._applySetters=function(e,t,r){var n=e;if(r)return n;for(var i=this.setters,o=i.length-1;o>=0;o--)n=i[o].call(t,n,this);return n},_.prototype._castNullish=function(e){return e},_.prototype.applySetters=function(e,t,r,n,i){var o=this._applySetters(e,t,r,n,i);return null==o?this._castNullish(o):o=this.cast(o,t,r,n,i)},_.prototype.applyGetters=function(e,t){var r=e,n=this.getters,i=n.length;if(0===i)return r;for(var o=0;o<i;++o)r=n[o].call(t,r,this);return r},_.prototype.select=function(e){return this.selected=!!e,this},_.prototype.doValidate=function(e,t,r,n){var o=!1,a=this.path,s=this.validators.filter((function(e){return null!=e&&"object"===i(e)})),l=s.length;if(!l)return t(null);var c=this;function u(e,r){if(!o)if(void 0===e||e)--l<=0&&p((function(){t(null)}));else{var n=r.ErrorConstructor||b;(o=new n(r))[y]=!0,p((function(){t(o)}))}}s.forEach((function(t){if(!o){var i,s=t.validator,l=d.clone(t);if(l.path=n&&n.path?n.path:a,l.value=e,s instanceof RegExp)u(s.test(e),l);else if("function"==typeof s)if(void 0!==e||s===c.requiredValidator)if(l.isAsync)!function(e,t,r,n,i){var o=!1,a=e.call(t,r,(function(e,t){o||(o=!0,t&&(n.message=t),i(e,n))}));"boolean"==typeof a?(o=!0,i(a,n)):a&&"function"==typeof a.then&&a.then((function(e){o||(o=!0,i(e,n))}),(function(e){o||(o=!0,n.reason=e,n.message=e.message,i(!1,n))}))}(s,r,e,l,u);else{try{i=l.propsParameter?s.call(r,e,l):s.call(r,e)}catch(e){i=!1,l.reason=e,e.message&&(l.message=e.message)}null!=i&&"function"==typeof i.then?i.then((function(e){u(e,l)}),(function(e){l.reason=e,l.message=e.message,u(i=!1,l)})):u(i,l)}else u(!0,l)}}))},_.prototype.doValidateSync=function(e,t,r){var n=this.path;if(!this.validators.length)return null;var o=this.validators;if(void 0===e){if(!(this.validators.length>0&&"required"===this.validators[0].type))return null;o=[this.validators[0]]}var a=null;return o.forEach((function(o){if(!a&&null!=o&&"object"===i(o)){var l,c=o.validator,u=d.clone(o);if(u.path=r&&r.path?r.path:n,u.value=e,!c.isAsync)if(c instanceof RegExp)s(c.test(e),u);else if("function"==typeof c){try{l=u.propsParameter?c.call(t,e,u):c.call(t,e)}catch(e){l=!1,u.reason=e}null!=l&&"function"==typeof l.then||s(l,u)}}})),a;function s(e,t){if(!a&&void 0!==e&&!e){var r=t.ErrorConstructor||b;(a=new r(t))[y]=!0}}},_._isRef=function(e,t,r,i){var o=i&&e.options&&(e.options.ref||e.options.refPath);if(!o&&r&&null!=r.$__){var a=r.$__fullPath(e.path);o=(r.ownerDocument?r.ownerDocument():r).populated(a)||r.populated(e.path)}return!!o&&(null==t||!(n.isBuffer(t)||"Binary"===t._bsontype||!d.isObject(t))||i)},_.prototype._castRef=function(e,t,r){if(null==e)return e;if(null!=e.$__)return e.$__.wasPopulated=!0,e;if(n.isBuffer(e)||!d.isObject(e)){if(r)return e;throw new g(this.instance,e,this.path,null,this)}var i=t.$__fullPath(this.path),o=(t.ownerDocument?t.ownerDocument():t).populated(i,!0),a=e;return t.$__.populated&&t.$__.populated[i]&&t.$__.populated[i].options&&t.$__.populated[i].options.options&&t.$__.populated[i].options.options.lean||((a=new o.options[v](e)).$__.wasPopulated=!0),a},_.prototype.$conditionalHandlers={$all:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.castForQuery(e)})):[this.castForQuery(e)]},$eq:x,$in:E,$ne:x,$nin:E,$exists:s,$type:l},_.prototype.castForQueryWrapper=function(e){if(this.$$context=e.context,"$conditional"in e){var t=this.castForQuery(e.$conditional,e.val);return this.$$context=null,t}if(e.$skipQueryCastForUpdate||e.$applySetters){var r=this._castForQuery(e.val);return this.$$context=null,r}var n=this.castForQuery(e.val);return this.$$context=null,n},_.prototype.castForQuery=function(e,t){var r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new Error("Can't use "+e);return r.call(this,t)}return t=e,this._castForQuery(t)},_.prototype._castForQuery=function(e){return this.applySetters(e,this.$$context)},_.checkRequired=function(e){return arguments.length>0&&(this._checkRequired=e),this._checkRequired},_.prototype.checkRequired=function(e){return null!=e},_.prototype.clone=function(){var e=Object.assign({},this.options),t=new this.constructor(this.path,e,this.instance);return t.validators=this.validators.slice(),void 0!==this.requiredValidator&&(t.requiredValidator=this.requiredValidator),void 0!==this.defaultValue&&(t.defaultValue=this.defaultValue),void 0!==this.$immutable&&void 0===this.options.immutable&&(t.$immutable=this.$immutable,u(t)),void 0!==this._index&&(t._index=this._index),void 0!==this.selected&&(t.selected=this.selected),void 0!==this.isRequired&&(t.isRequired=this.isRequired),void 0!==this.originalRequiredValue&&(t.originalRequiredValue=this.originalRequiredValue),t.getters=this.getters.slice(),t.setters=this.setters.slice(),t},e.exports=t=_,t.CastError=g,t.ValidatorError=b}).call(this,r(2).Buffer)},function(e,t,r){"use strict";var n=r(15).get().ObjectId,i=r(0).objectIdSymbol;Object.defineProperty(n.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}),n.prototype[i]=!0,e.exports=n},function(e,t,r){"use strict";var n=r(29),i=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==t)return this;Object.assign(this,n(t))},o=r(9);Object.defineProperty(i.prototype,"type",o),Object.defineProperty(i.prototype,"validate",o),Object.defineProperty(i.prototype,"cast",o),Object.defineProperty(i.prototype,"required",o),Object.defineProperty(i.prototype,"default",o),Object.defineProperty(i.prototype,"ref",o),Object.defineProperty(i.prototype,"select",o),Object.defineProperty(i.prototype,"index",o),Object.defineProperty(i.prototype,"unique",o),Object.defineProperty(i.prototype,"immutable",o),Object.defineProperty(i.prototype,"sparse",o),Object.defineProperty(i.prototype,"text",o),Object.defineProperty(i.prototype,"transform",o),e.exports=i},function(e,t,r){"use strict";e.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],u=!1,p=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&h())}function h(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||u||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";(function(t){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s,l,c,u=r(19).EventEmitter,p=r(111),f=r(5),h=r(26),d=r(74),y=r(137),m=r(138),v=r(53),g=r(33),b=r(32),_=r(72),w=r(54),x=r(25),E=r(86),S=r(57).compile,k=r(57).defineKey,T=r(173).flatten,O=r(3),A=r(174),P=r(90),C=r(175),N=r(22),R=r(58),j=r(176),M=r(4).inspect,I=r(17).internalToObjectOptions,D=r(49),L=r(177),F=r(1),B=r(179),z=F.clone,$=F.deepEqual,U=F.isMongooseObject,H=Symbol("mongoose.Array#atomicsBackup"),V=r(0).arrayAtomicsSymbol,G=r(0).documentArrayParent,q=r(0).documentIsModified,W=r(0).documentModifiedPaths,Y=r(0).documentSchemaSymbol,K=r(0).getSymbol,X=r(0).populateModelSymbol,Z=r(0).scopeSymbol,J=r(34).schemaMixedSymbol,Q=F.specialProperties;function ee(e,t,r,n){var o=this;"object"===a(r)&&null!=r&&(r=(n=r).skipId),n=Object.assign({},n);var s=O(n,"defaults",!0);if(n.defaults=s,null==this.$__schema){var l=F.isObject(t)&&!t.instanceOfSchema?new v(t):t;this.$__setSchema(l),t=r,r=n,n=arguments[4]||{}}if(this.$__=new p,this.$__.emitter=new u,this.isNew=!("isNew"in n)||n.isNew,this.errors=void 0,this.$__.$options=n||{},this.$locals={},this.$op=null,null!=e&&"object"!==a(e))throw new y(e,"obj","Document");var c=this.$__schema;"boolean"==typeof t||"throw"===t?(this.$__.strictMode=t,t=void 0):(this.$__.strictMode=c.options.strict,this.$__.selected=t);var f,h=i(c.requiredPaths(!0));try{for(h.s();!(f=h.n()).done;){var d=f.value;this.$__.activePaths.require(d)}}catch(e){h.e(e)}finally{h.f()}this.$__.emitter.setMaxListeners(0);var m=null;F.isPOJO(t)&&(m=j(t));var g=!1===m&&t?function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var o,a=[],s=i(n[r].split("."));try{for(s.s();!(o=s.n()).done;){var l=o.value;a.push(l),t[a.join(".")]=1}}catch(e){s.e(e)}finally{s.f()}}return t}(t):{};if(null==this._doc&&(this.$__buildDoc(e,t,r,m,g,!1),s&&re(this,t,r,m,g,!0,{isNew:this.isNew})),e&&(this.$__original_set?this.$__original_set(e,void 0,!0):this.$set(e,void 0,!0),e instanceof ee&&(this.isNew=e.isNew)),n.willInit&&s?u.prototype.once.call(this,"init",(function(){re(o,t,r,m,g,!1,n.skipDefaults,o.isNew)})):s&&re(this,t,r,m,g,!1,n.skipDefaults,this.isNew),this.$__._id=this._id,!this.$__.strictMode&&e){var b=this;Object.keys(this._doc).forEach((function(e){e in c.tree||k(e,null,b)}))}!function(e){var t=e.$__schema&&e.$__schema.callQueue;if(t.length){var r,n=i(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;"pre"!==o[0]&&"post"!==o[0]&&"on"!==o[0]&&e[o[0]].apply(e,o[1])}}catch(e){n.e(e)}finally{n.f()}}}(this)}for(var te in F.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],(function(e){ee.prototype[e]=function(){return this.$__.emitter[e].apply(this.$__.emitter,arguments)}})),ee.prototype.constructor=ee,u.prototype)ee[te]=u.prototype[te];function re(e,t,r,n,i,o,a){for(var s=Object.keys(e.$__schema.paths),l=s.length,c=0;c<l;++c){var u=void 0,p="",f=s[c];if("_id"!==f||!r)for(var h=e.$__schema.paths[f],d=h.splitPath(),y=d.length,m=!1,v=e._doc,g=0;g<y&&null!=v;++g){var b=d[g];if(p+=(p.length?".":"")+b,!0===n){if(p in t)break}else if(!1===n&&t&&!m)if(p in t)m=!0;else if(!i[p])break;if(g===y-1){if(void 0!==v[b])break;if("function"==typeof h.defaultValue){if(!h.defaultValue.$runBeforeSetters&&o)break;if(h.defaultValue.$runBeforeSetters&&!o)break}else if(!o)continue;if(a&&a[p])break;if(t&&null!==n){if(!0===n){if(f in t)continue;try{u=h.getDefault(e,!1)}catch(t){e.invalidate(f,t);break}void 0!==u&&(v[b]=u,e.$__.activePaths.default(f))}else if(m){try{u=h.getDefault(e,!1)}catch(t){e.invalidate(f,t);break}void 0!==u&&(v[b]=u,e.$__.activePaths.default(f))}}else{try{u=h.getDefault(e,!1)}catch(t){e.invalidate(f,t);break}void 0!==u&&(v[b]=u,e.$__.activePaths.default(f))}}else v=v[b]}}}function ne(e){if(null==e)return!0;if("object"!==a(e)||Array.isArray(e))return!1;for(var t=0,r=Object.keys(e);t<r.length;t++)if(!ne(e[r[t]]))return!1;return!0}function ie(e){var t={};!function(e){Object.keys(e.$__.activePaths.states.require).forEach((function(t){var r=e.$__schema.path(t);null!=r&&"function"==typeof r.originalRequiredValue&&(e.$__.cachedRequired[t]=r.originalRequiredValue.call(e,e))}))}(e);var r=new Set(Object.keys(e.$__.activePaths.states.require).filter((function(t){return!(!e.$__isSelected(t)&&!e.isModified(t))&&(!(t in e.$__.cachedRequired)||e.$__.cachedRequired[t])})));function n(e){r.add(e)}Object.keys(e.$__.activePaths.states.init).forEach(n),Object.keys(e.$__.activePaths.states.modify).forEach(n),Object.keys(e.$__.activePaths.states.default).forEach(n);var o,a=e.$getAllSubdocs(),s=e.modifiedPaths(),l=i(a);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c.$basePath){var u,p=i(r);try{for(p.s();!(u=p.n()).done;){var f=u.value;(null===f||f.startsWith(c.$basePath+"."))&&r.delete(f)}}catch(e){p.e(e)}finally{p.f()}!e.isModified(c.$basePath,s)||e.isDirectModified(c.$basePath)||e.$isDefault(c.$basePath)||(r.add(c.$basePath),t[c.$basePath]=!0)}}}catch(e){l.e(e)}finally{l.f()}var h,d=i(r);try{for(d.s();!(h=d.n()).done;){var y=h.value,m=e.$__schema.path(y);m&&m.$isMongooseArray&&(!m.$isMongooseDocumentArray||O(m,"schemaOptions.required"))&&v(e.$__getValue(y),r,y)}}catch(e){d.e(e)}finally{d.f()}function v(e,t,r){if(null!=e)for(var n=e.length,i=0;i<n;++i)Array.isArray(e[i])?v(e[i],t,r+"."+i):t.add(r+"."+i)}var g,b={skipArrays:!0},_=i(r);try{for(_.s();!(g=_.n()).done;){var w=g.value;if(e.$__schema.nested[w]){var x=e.$__getValue(w);U(x)&&(x=x.toObject({transform:!1}));var E=T(x,w,b,e.$__schema);Object.keys(E).forEach(n)}}}catch(e){_.e(e)}finally{_.f()}var S,k=i(r);try{for(k.s();!(S=k.n()).done;){var A=S.value;if(e.$__schema.singleNestedPaths.hasOwnProperty(A))r.delete(A);else{var P=e.$__schema.path(A);if(P&&P.$isSchemaMap){var C=e.$__getValue(A);if(null!=C){var N,R=i(C.keys());try{for(R.s();!(N=R.n()).done;){var j=N.value;r.add(A+"."+j)}}catch(e){R.e(e)}finally{R.f()}}}}}}catch(e){k.e(e)}finally{k.f()}return[r=Array.from(r),t]}function oe(e,t){var r,n=new Set(t),o=new Map([]),a=i(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(-1!==s.indexOf("."))for(var l=s.split("."),c=l[0],u=1;u<l.length;++u)o.set(c,s),c=c+"."+l[u]}}catch(e){a.e(e)}finally{a.f()}var p,f=[],h=i(e);try{for(h.s();!(p=h.n()).done;){var d=p.value;n.has(d)?f.push(d):o.has(d)&&f.push(o.get(d))}}catch(e){h.e(e)}finally{h.f()}return f}function ae(e,t){return t=new Set(t),e.filter((function(e){return!t.has(e)}))}function se(e,t,r,n){var i,o,a,s=e.$__schema,l=Object.keys(s.virtuals),c=l.length,u=c,p=e._doc,f=O(n,"aliases",!0),h=null;if(Array.isArray(r.virtuals))h=new Set(r.virtuals);else if(r.virtuals&&r.virtuals.pathsToSkip){h=new Set(l);for(var d=0;d<r.virtuals.pathsToSkip.length;d++)h.has(r.virtuals.pathsToSkip[d])&&h.delete(r.virtuals.pathsToSkip[d])}if(!p)return t;for(r=r||{},c=0;c<u;++c)if(i=l[c],(null==h||h.has(i))&&(f||!s.aliases.hasOwnProperty(i))){if(o=i,null!=r.path){if(!i.startsWith(r.path+"."))continue;o=i.substr(r.path.length+1)}var y=o.split(".");if(void 0!==(a=z(e.get(i),r))){var m=y.length;p=t;for(var v=0;v<m-1;++v)p[y[v]]=p[y[v]]||{},p=p[y[v]];p[y[m-1]]=a}}return t}function le(e,t){if(B(t))throw new Error("`transform` function must be synchronous, but the transform on path `"+e+"` returned a promise.")}ee.prototype.$__schema,ee.prototype.schema,Object.defineProperty(ee.prototype,"$locals",{configurable:!1,enumerable:!1,writable:!0}),ee.prototype.isNew,ee.prototype.id,ee.prototype.errors,ee.prototype.$op,ee.prototype.$__buildDoc=function(e,t,r,n,i){for(var o={},a=Object.keys(this.$__schema.paths).filter((function(e){return!e.includes("$*")})),s=a.length,l=0;l<s;++l){var c=a[l];if("_id"===c){if(r)continue;if(e&&"_id"in e)continue}for(var u=this.$__schema.paths[c].splitPath(),p=u.length,f=p-1,h="",d=o,y=!1,m=0;m<p;++m){var v=u[m];if(h+=(h.length?".":"")+v,!0===n){if(h in t)break}else if(!1===n&&t&&!y)if(h in t)y=!0;else if(!i[h])break;m<f&&(d=d[v]||(d[v]={}))}}this._doc=o},ee.prototype.toBSON=function(){return this.toObject(I)},ee.prototype.init=function(e,t,r){return"function"==typeof t&&(r=t,t=null),this.$__init(e,t),r&&r(null,this),this},ee.prototype.$__init=function(e,t){if(this.isNew=!1,this.$init=!0,t=t||{},null!=e._id&&t.populated&&t.populated.length){var r,n=String(e._id),o=i(t.populated);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.isVirtual?this.populated(a.path,F.getValue(a.path,e),a):this.populated(a.path,a._docs[n],a),null!=a._childDocs){var s,l=i(a._childDocs);try{for(l.s();!(s=l.n()).done;){var c=s.value;null!=c&&null!=c.$__&&(c.$__.parent=this)}}catch(e){l.e(e)}finally{l.f()}a._childDocs=[]}}}catch(e){o.e(e)}finally{o.f()}}return function e(t,r,n,i,o){o=o||"";for(var a,s,l,c=Object.keys(r),u=c.length,p=0;p<u;)f(p++);function f(u){if(l=c[u],s=o+l,a=t.$__schema.path(s),!t.$__schema.$isRootDiscriminator||t.$__isSelected(s))if(!a&&F.isPOJO(r[l]))n[l]||(n[l]={}),e(t,r[l],n[l],i,s+".");else if(a){if(null===r[l])n[l]=a._castNullish(null);else if(void 0!==r[l]){var p=(r[l].$__||{}).wasPopulated||null;if(a&&!p)try{n[l]=a.cast(r[l],t,!0)}catch(e){t.invalidate(e.path,new _({path:e.path,message:e.message,type:"cast",value:e.value,reason:e}))}else n[l]=r[l]}t.isModified(s)||t.$__.activePaths.init(s)}else n[l]=r[l]}}(this,e,this._doc,t),function(e,t){if(null!=e._id&&null!=t&&0!==t.length){var r,n=String(e._id),o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.isVirtual)for(var s=a.path.split("."),l=0;l<s.length-1;++l){var c=s.slice(0,l+1).join("."),u=s.slice(l+1).join("."),p=e.get(c);if(null!=p&&p.isMongooseDocumentArray){for(var f=0;f<p.length;++f)p[f].populated(u,null==a._docs[n]?[]:a._docs[n][f],a);break}}}}catch(e){o.e(e)}finally{o.f()}}}(this,t.populated),this.emit("init",this),this.constructor.emit("init",this),this.$__._id=this._id,this},ee.prototype.update=function(){var e=F.args(arguments);e.unshift({_id:this._id});var t=this.constructor.update.apply(this.constructor,e);return null!=this.$session()&&("session"in t.options||(t.options.session=this.$session())),t},ee.prototype.updateOne=function(e,t,r){var n=this,i=this.constructor.updateOne({_id:this._id},e,t);return i.pre((function(e){n.constructor._middleware.execPre("updateOne",n,[n],e)})),i.post((function(e){n.constructor._middleware.execPost("updateOne",n,[n],{},e)})),null!=this.$session()&&("session"in i.options||(i.options.session=this.$session())),null!=r?i.exec(r):i},ee.prototype.replaceOne=function(){var e=F.args(arguments);return e.unshift({_id:this._id}),this.constructor.replaceOne.apply(this.constructor,e)},ee.prototype.$session=function(e){if(0===arguments.length)return null!=this.$__.session&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(null!=e&&e.hasEnded)throw new f("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(this.$__.session=e,!this.ownerDocument){var t,r=i(this.$getAllSubdocs());try{for(r.s();!(t=r.n()).done;){t.value.$session(e)}}catch(e){r.e(e)}finally{r.f()}}return e},ee.prototype.overwrite=function(e){for(var t=0,r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(e))));t<r.length;t++){var n=r[t];"_id"!==n&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,e[n]))}return this},ee.prototype.$set=function(e,t,r,o){var s=this;F.isPOJO(r)&&(o=r,r=void 0);var l,c,u,p,y=(o=o||{}).merge,m=r&&!0!==r,v=!0===r,b=this.$__schema.options.typeKey,_=0,w="strict"in o?o.strict:this.$__.strictMode;if(m&&((this.$__.adhocPaths||(this.$__.adhocPaths={}))[e]=this.$__schema.interpretAsType(e,r,this.$__schema.options)),null==e){var x=e;e=t,t=x}else{if("string"!=typeof e){if(e instanceof ee&&(e=e.$__isNested?e.toObject():e._doc),null==e){var S=e;e=t,t=S}p=t?t+".":"";var k=(l=Object.keys(e)).length,T=O(o,"_skipMinimizeTopLevel",!1);if(0===k&&T)return delete o._skipMinimizeTopLevel,t&&this.$set(t,{}),this;for(var C=0;C<k;++C){var N=p+(u=l[C]);if(c=this.$__schema.pathType(N),!0!==r||p||null==e[u]||"nested"!==c||null==this._doc[u]||0!==Object.keys(this._doc[u]).length||(delete this._doc[u],o=Object.assign({},o,{_skipMinimizeTopLevel:!0})),"object"!==a(e[u])||F.isNativeObject(e[u])||F.isMongooseType(e[u])||null==e[u]||"virtual"===c||"real"===c||"adhocOrUndefined"===c||this.$__path(N)instanceof h||this.$__schema.paths[N]&&this.$__schema.paths[N].options&&this.$__schema.paths[N].options.ref)if(w){if(v&&void 0===e[u]&&void 0!==this.get(N))continue;if("adhocOrUndefined"===c&&(c=A(this,N,{typeOnly:!0})),"real"===c||"virtual"===c){var R=e[u];this.$__schema.paths[N]&&this.$__schema.paths[N].$isSingleNested&&e[u]instanceof ee&&(R=R.toObject({virtuals:!1,transform:!1})),this.$set(p+u,R,v,o)}else if("nested"===c&&e[u]instanceof ee)this.$set(p+u,e[u].toObject({transform:!1}),v,o);else if("throw"===w)throw"nested"===c?new d(u,e[u]):new g(u)}else void 0!==e[u]&&this.$set(p+u,e[u],v,o);else this.$__.$setCalled.add(p+u),this.$set(e[u],p+u,v,o)}return this}this.$__.$setCalled.add(e)}var j,M=this.$__schema.pathType(e);if("adhocOrUndefined"===M&&(M=A(this,e,{typeOnly:!0})),t=P(t),"nested"===M&&t){if("object"===a(t)&&null!=t){var I=null!=this.$__.savedState&&this.$__.savedState.hasOwnProperty(e);if(null!=this.$__.savedState&&!this.isNew&&!this.$__.savedState.hasOwnProperty(e)){var L=this.$__getValue(e);this.$__.savedState[e]=L;for(var B=0,z=Object.keys(L||{});B<z.length;B++){var $=z[B];this.$__.savedState[e+"."+$]=L[$]}}if(y)return this.$set(t,e,v);this.$__setValue(e,null),E(this,e);var U=Object.keys(t);this.$__setValue(e,{});for(var H=0,V=U;H<V.length;H++){var G=V[H];this.$set(e+"."+G,t[G],v)}return I&&F.deepEqual(this.$__.savedState[e],t)?this.unmarkModified(e):this.markModified(e),E(this,e,{skipDocArrays:!0}),this}return this.invalidate(e,new f.CastError("Object",t,e)),this}var q=-1===e.indexOf(".")?[e]:e.split(".");if("string"==typeof this.$__schema.aliases[q[0]]&&(q[0]=this.$__schema.aliases[q[0]]),"adhocOrUndefined"===M&&w){var W;for(_=0;_<q.length;++_){var Y=q.slice(0,_+1).join(".");if(_+1<q.length&&"virtual"===this.$__schema.pathType(Y))return D.set(e,t,this),this;if(null!=(j=this.$__schema.path(Y))&&j instanceof h){W=!0;break}}if(null==j&&(j=A(this,e)),!W&&!j){if("throw"===w)throw new g(e);return this}}else{if("virtual"===M)return(j=this.$__schema.virtualpath(e)).applySetters(t,this),this;j=this.$__path(e)}var K,Z=this._doc,J="";for(_=0;_<q.length-1;++_)Z=Z[q[_]],J+=(J.length>0?".":"")+q[_],Z||(this.$set(J,{}),this.$__isSelected(J)||this.unmarkModified(J),Z=this.$__getValue(J));if(q.length<=1)K=e;else{for(_=0;_<q.length;++_){var Q=q.slice(0,_+1).join(".");if(null===this.get(Q,null,{getters:!1})){K=Q;break}}K||(K=e)}var te=null!=s.$__.$options.priorDoc?s.$__.$options.priorDoc.$__getValue(e):v?void 0:s.$__getValue(e);if(!j)return this.$__set(K,e,v,q,j,t,te),this;if((j.$isSingleNested||j.$isMongooseArray)&&function(e,t){if(e.$__.validationError){for(var r=0,n=Object.keys(e.$__.validationError.errors);r<n.length;r++){var i=n[r];i.startsWith(t+".")&&delete e.$__.validationError.errors[i]}0===Object.keys(e.$__.validationError.errors).length&&(e.$__.validationError=null)}}(this,e),j.$isSingleNested&&null!=t&&y){t instanceof ee&&(t=t.toObject({virtuals:!1,transform:!1}));for(var re=0,ne=Object.keys(t);re<ne.length;re++){var ie=ne[re];this.$set(e+"."+ie,t[ie],v,o)}return this}var oe=!0;try{var ae,se=function(){if(null==j.options)return!1;if(!(t instanceof ee))return!1;var e=t.constructor,r=j.options.ref;if(null!=r&&(r===e.modelName||r===e.baseModelName))return!0;var n=j.options.refPath;if(null==n)return!1;var i=t.get(n);return i===e.modelName||i===e.baseModelName}(),le=!1;if(se&&t instanceof ee&&(this.populated(e,t._id,n({},X,t.constructor)),t.$__.wasPopulated=!0,le=!0),j.options&&Array.isArray(j.options[b])&&j.options[b].length&&j.options[b][0].ref&&function(e,t){if(!Array.isArray(e))return!1;if(0===e.length)return!1;var r,n=i(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!(o instanceof ee))return!1;if(null==o.constructor.modelName)return!1;if(o.constructor.modelName!=t&&o.constructor.baseModelName!=t)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}(t,j.options[b][0].ref)){ae=n({},X,t[0].constructor),this.populated(e,t.map((function(e){return e._id})),ae);var ce,ue=i(t);try{for(ue.s();!(ce=ue.n()).done;)ce.value.$__.wasPopulated=!0}catch(e){ue.e(e)}finally{ue.f()}le=!0}if(null==this.$__schema.singleNestedPaths[e]&&(t=j.applySetters(t,this,!1,te)),j.$isMongooseDocumentArray&&Array.isArray(t)&&t.length>0&&null!=t[0]&&null!=t[0].$__&&null!=t[0].$__.populated){for(var pe=Object.keys(t[0].$__.populated),fe=function(){var r=de[he];s.populated(e+"."+r,t.map((function(e){return e.populated(r)})),t[0].$__.populated[r].options)},he=0,de=pe;he<de.length;he++)fe();le=!0}if(!le&&this.$__.populated){if(Array.isArray(t)&&this.$__.populated[e])for(var ye=0;ye<t.length;++ye)t[ye]instanceof ee&&(t[ye]=t[ye]._id);delete this.$__.populated[e]}j.$isSingleNested&&null!=t&&function(e,t,r){var n=t.schema;if(null!=n)for(var i=0,o=Object.keys(n.paths);i<o.length;i++){var a=o[i],s=n.paths[a];if(null!=s.$immutableSetter){var l=null==r?void 0:r.$__getValue(a);s.$immutableSetter.call(e,l)}}}(t,j,te),this.$markValid(e)}catch(r){r instanceof f.StrictModeError&&r.isImmutableError?this.invalidate(e,r):r instanceof f.CastError?(this.invalidate(r.path,r),r.$originalErrorPath&&this.invalidate(e,new f.CastError(j.instance,t,e,r.$originalErrorPath))):this.invalidate(e,new f.CastError(j.instance,t,e,r)),oe=!1}return oe&&(this.$__set(K,e,v,q,j,t,te),null!=this.$__.savedState&&(this.isNew||this.$__.savedState.hasOwnProperty(e)?this.$__.savedState.hasOwnProperty(e)&&F.deepEqual(t,this.$__.savedState[e])&&this.unmarkModified(e):this.$__.savedState[e]=te)),j.$isSingleNested&&(this.isDirectModified(e)||null==t)&&E(this,e),this},ee.prototype.set=ee.prototype.$set,ee.prototype.$__shouldModify=function(e,t,r,n,i,o,a){return!!this.isNew||null==this.$__schema.singleNestedPaths[t]&&(void 0===o&&!this.$__isSelected(t)||(void 0!==o||!(t in this.$__.activePaths.states.default))&&!(this.populated(t)&&o instanceof ee&&$(o._id,a))&&(!$(o,a||F.getValue(t,this))||!(r||null==o||!(t in this.$__.activePaths.states.default)||!$(o,i.getDefault(this,r)))))},ee.prototype.$__set=function(e,t,n,i,o,a,s){c=c||r(27);var u=this.$__shouldModify(e,t,n,i,o,a,s),p=this;u&&(this.markModified(e),l||(l=r(84)),a&&a.isMongooseArray&&(a._registerAtomic("$set",a),a.isMongooseDocumentArray&&a.forEach((function(e){e&&e.__parentArray&&(e.__parentArray=a)})),this.$__.activePaths.forEach((function(e){e.startsWith(t+".")&&p.$__.activePaths.ignore(e)}))));for(var f=this._doc,h=0,d=i.length,y="";h<d;h++){var m=h+1===d;if(y+=y?"."+i[h]:i[h],Q.has(i[h]))return;m?f instanceof Map?f.set(i[h],a):f[i[h]]=a:(F.isPOJO(f[i[h]])||f[i[h]]&&f[i[h]]instanceof c||f[i[h]]&&f[i[h]].$isSingleNested||f[i[h]]&&Array.isArray(f[i[h]])||(f[i[h]]=f[i[h]]||{}),f=f[i[h]])}},ee.prototype.$__getValue=function(e){return F.getValue(e,this._doc)},ee.prototype.$__setValue=function(e,t){return F.setValue(e,t,this._doc),this},ee.prototype.get=function(e,t,r){var n;r=r||{},t&&(n=this.$__schema.interpretAsType(e,t,this.$__schema.options));var i=this.$__path(e);if(null==i&&(i=this.$__schema.virtualpath(e)),i instanceof h){var o=this.$__schema.virtualpath(e);null!=o&&(i=o)}var a=-1===e.indexOf(".")?[e]:e.split("."),s=this._doc;if(i instanceof w)return i.applyGetters(void 0,this);"string"==typeof this.$__schema.aliases[a[0]]&&(a[0]=this.$__schema.aliases[a[0]]);for(var l=0,c=a.length;l<c;l++)s&&s._doc&&(s=s._doc),s=null==s?void 0:s instanceof Map?s.get(a[l],{getters:!1}):l===c-1?F.getValue(a[l],s):s[a[l]];if(n&&(s=n.cast(s)),null!=i&&!1!==r.getters)s=i.applyGetters(s,this);else if(this.$__schema.nested[e]&&r.virtuals)return se(this,F.clone(s)||{},{path:e});return s},ee.prototype[K]=ee.prototype.get,ee.prototype.$__path=function(e){var t=this.$__.adhocPaths;return(t&&t.hasOwnProperty(e)?t[e]:null)||this.$__schema.path(e)},ee.prototype.markModified=function(e,t){this.$__.activePaths.modify(e),null==t||this.ownerDocument||(this.$__.pathsToScopes[e]=t)},ee.prototype.unmarkModified=function(e){this.$__.activePaths.init(e),delete this.$__.pathsToScopes[e]},ee.prototype.$ignore=function(e){this.$__.activePaths.ignore(e)},ee.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.states.modify)},ee.prototype.$isEmpty=function(e){var t={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length>0){var r=this.get(e);return null==r||"object"===a(r)&&(F.isPOJO(r)?ne(r):0===Object.keys(r.toObject(t)).length)}return 0===Object.keys(this.toObject(t)).length},ee.prototype.modifiedPaths=function(e){e=e||{};var t=Object.keys(this.$__.activePaths.states.modify),r=this;return t.reduce((function(t,n){var o=n.split(".");if(t=t.concat(o.reduce((function(e,t,r){return e.concat(o.slice(0,r).concat(t).join("."))}),[]).filter((function(e){return-1===t.indexOf(e)}))),!e.includeChildren)return t;var s=r.get(n);if(null!=s&&"object"===a(s))if(s._doc&&(s=s._doc),Array.isArray(s)){for(var l=s.length,c=0;c<l;++c)if(-1===t.indexOf(n+"."+c)&&(t.push(n+"."+c),null!=s[c]&&s[c].$__)){var u,p=i(s[c].modifiedPaths());try{for(p.s();!(u=p.n()).done;){var f=u.value;t.push(n+"."+c+"."+f)}}catch(e){p.e(e)}finally{p.f()}}}else Object.keys(s).filter((function(e){return-1===t.indexOf(n+"."+e)})).forEach((function(e){t.push(n+"."+e)}));return t}),[])},ee.prototype[W]=ee.prototype.modifiedPaths,ee.prototype.isModified=function(e,t){if(e){Array.isArray(e)||(e=e.split(" "));var r=t||this[W](),n=Object.keys(this.$__.activePaths.states.modify);return e.some((function(e){return!!~r.indexOf(e)}))||e.some((function(e){return n.some((function(t){return t===e||e.startsWith(t+".")}))}))}return this.$__.activePaths.some("modify")},ee.prototype[q]=ee.prototype.isModified,ee.prototype.$isDefault=function(e){var t=this;if(null==e)return this.$__.activePaths.some("default");if("string"==typeof e&&-1===e.indexOf(" "))return this.$__.activePaths.states.default.hasOwnProperty(e);var r=e;return Array.isArray(r)||(r=r.split(" ")),r.some((function(e){return t.$__.activePaths.states.default.hasOwnProperty(e)}))},ee.prototype.$isDeleted=function(e){return 0===arguments.length?!!this.$__.isDeleted:(this.$__.isDeleted=!!e,this)},ee.prototype.isDirectModified=function(e){var t=this;if(null==e)return this.$__.activePaths.some("modify");if("string"==typeof e&&-1===e.indexOf(" "))return this.$__.activePaths.states.modify.hasOwnProperty(e);var r=e;return Array.isArray(r)||(r=r.split(" ")),r.some((function(e){return t.$__.activePaths.states.modify.hasOwnProperty(e)}))},ee.prototype.isInit=function(e){var t=this;if(null==e)return this.$__.activePaths.some("init");if("string"==typeof e&&-1===e.indexOf(" "))return this.$__.activePaths.states.init.hasOwnProperty(e);var r=e;return Array.isArray(r)||(r=r.split(" ")),r.some((function(e){return t.$__.activePaths.states.init.hasOwnProperty(e)}))},ee.prototype.isSelected=function(e){var t=this;if(null==this.$__.selected)return!0;if("_id"===e)return 0!==this.$__.selected._id;if(-1!==e.indexOf(" ")&&(e=e.split(" ")),Array.isArray(e))return e.some((function(e){return t.$__isSelected(e)}));var r=Object.keys(this.$__.selected),n=null;if(1===r.length&&"_id"===r[0])return 0===this.$__.selected._id;for(var i=0,o=r;i<o.length;i++){var a=o[i];if("_id"!==a&&R(this.$__.selected[a])){n=!!this.$__.selected[a];break}}if(null===n)return!0;if(e in this.$__.selected)return n;for(var s=e+".",l=0,c=r;l<c.length;l++){var u=c[l];if("_id"!==u){if(u.startsWith(s))return n||u!==s;if(s.startsWith(u+"."))return n}}return!n},ee.prototype.$__isSelected=ee.prototype.isSelected,ee.prototype.isDirectSelected=function(e){var t=this;if(null==this.$__.selected)return!0;if("_id"===e)return 0!==this.$__.selected._id;if(-1!==e.indexOf(" ")&&(e=e.split(" ")),Array.isArray(e))return e.some((function(e){return t.isDirectSelected(e)}));var r=Object.keys(this.$__.selected),n=null;if(1===r.length&&"_id"===r[0])return 0===this.$__.selected._id;for(var i=0,o=r;i<o.length;i++){var a=o[i];if("_id"!==a&&R(this.$__.selected[a])){n=!!this.$__.selected[a];break}}return null===n||(this.$__.selected.hasOwnProperty(e)?n:!n)},ee.prototype.validate=function(e,t,r){var n,i=this;if(this.$op="validate",null!=this.ownerDocument||(this.$__.validating?n=new m(this,{parentStack:t&&t.parentStack,conflictStack:this.$__.validating.stack}):this.$__.validating=new m(this,{parentStack:t&&t.parentStack})),1===arguments.length?"object"!==a(arguments[0])||Array.isArray(arguments[0])?"function"==typeof arguments[0]&&(r=arguments[0],t=null,e=null):(t=arguments[0],r=null,e=null):"function"==typeof e?(r=e,t=null,e=null):"function"==typeof t&&(r=t,t=e,e=null),t&&"string"==typeof t.pathsToSkip){var o=-1===t.pathsToSkip.indexOf(" ");t.pathsToSkip=o?[t.pathsToSkip]:t.pathsToSkip.split(" ")}return x(r,(function(r){if(null!=n)return r(n);i.$__validate(e,t,(function(e){i.$op=null,r(e)}))}),this.constructor.events)},ee.prototype.$__validate=function(e,t,r){var n=this;"function"==typeof e?(r=e,t=null,e=null):"function"==typeof t&&(r=t,t=null);var o,s=t&&"object"===a(t)&&"validateModifiedOnly"in t,l=O(t,"pathsToSkip",null);o=s?!!t.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;var c=this,u=function(){var e=n.$__.validationError;if(n.$__.validationError=void 0,o&&null!=e){for(var t=0,r=Object.keys(e.errors);t<r.length;t++){var i=r[t];n.isModified(i)||delete e.errors[i]}0===Object.keys(e.errors).length&&(e=void 0)}if(n.$__.cachedRequired={},n.emit("validate",c),n.constructor.emit("validate",c),n.$__.validating=null,e){for(var a in e.errors)!n[G]&&e.errors[a]instanceof f.CastError&&n.invalidate(a,e.errors[a]);return e}},p=ie(this),h=o?p[0].filter((function(e){return n.isModified(e)})):p[0],d=p[1];if("string"==typeof e&&(e=e.split(" ")),Array.isArray(e)?h=oe(h,e):l&&(h=ae(h,l)),0===h.length)return N((function(){var e=u();if(e)return c.$__schema.s.hooks.execPost("validate:error",c,[c],{error:e},(function(e){r(e)}));r(null,c)}));var y,m={},v=0,g=i(h);try{for(g.s();!(y=g.n()).done;)_(y.value)}catch(e){g.e(e)}finally{g.f()}function _(e){null==e||m[e]||(m[e]=!0,v++,N((function(){var t=c.$__schema.path(e);if(!t)return--v||w();if(c.$isValid(e)){if(null!=t[J]&&e!==t.path)return--v||w();var r,n=c.$__getValue(e);null==n&&(r=c.populated(e))&&(n=r);var i=e in c.$__.pathsToScopes?c.$__.pathsToScopes[e]:c,a={skipSchemaValidators:d[e],path:e,validateModifiedOnly:o};t.doValidate(n,(function(r){if(r&&(!t.$isMongooseDocumentArray||r.$isArrayValidatorError)){if(t.$isSingleNested&&r instanceof b&&!1===t.schema.options.storeSubdocValidationError)return--v||w();c.invalidate(e,r,void 0,!0)}--v||w()}),i,a)}else--v||w()})))}function w(){var e=u();if(e)return c.$__schema.s.hooks.execPost("validate:error",c,[c],{error:e},(function(e){r(e)}));r(null,c)}},ee.prototype.validateSync=function(e,t){var r=this,n=this;1!==arguments.length||"object"!==a(arguments[0])||Array.isArray(arguments[0])||(t=arguments[0],e=null);var i,o=t&&"object"===a(t)&&"validateModifiedOnly"in t;i=o?!!t.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;var s=t&&t.pathsToSkip;if("string"==typeof e){var l=-1===e.indexOf(" ");e=l?[e]:e.split(" ")}else"string"==typeof s&&-1!==s.indexOf(" ")&&(s=s.split(" "));var c=ie(this),u=i?c[0].filter((function(e){return r.isModified(e)})):c[0],p=c[1];Array.isArray(e)?u=oe(u,e):Array.isArray(s)&&(u=ae(u,s));var h={};u.forEach((function(e){if(!h[e]){h[e]=!0;var t=n.$__schema.path(e);if(t&&n.$isValid(e)){var r=n.$__getValue(e),o=t.doValidateSync(r,n,{skipSchemaValidators:p[e],path:e,validateModifiedOnly:i});if(o&&(!t.$isMongooseDocumentArray||o.$isArrayValidatorError)){if(t.$isSingleNested&&o instanceof b&&!1===t.schema.options.storeSubdocValidationError)return;n.invalidate(e,o,void 0,!0)}}}}));var d=n.$__.validationError;if(n.$__.validationError=void 0,n.emit("validate",n),n.constructor.emit("validate",n),d)for(var y in d.errors)d.errors[y]instanceof f.CastError&&n.invalidate(y,d.errors[y]);return d},ee.prototype.invalidate=function(e,t,r,n){if(this.$__.validationError||(this.$__.validationError=new b(this)),!this.$__.validationError.errors[e])return t&&"string"!=typeof t||(t=new _({path:e,message:t,type:n||"user defined",value:r})),this.$__.validationError===t||this.$__.validationError.addError(e,t),this.$__.validationError},ee.prototype.$markValid=function(e){this.$__.validationError&&this.$__.validationError.errors[e]&&(delete this.$__.validationError.errors[e],0===Object.keys(this.$__.validationError.errors).length&&(this.$__.validationError=null))},ee.prototype.$isValid=function(e){var t=this;return null==this.$__.validationError||0===Object.keys(this.$__.validationError.errors).length||null!=e&&(-1!==e.indexOf(" ")&&(e=e.split(" ")),Array.isArray(e)?e.some((function(e){return null==t.$__.validationError.errors[e]})):null==this.$__.validationError.errors[e])},ee.prototype.$__reset=function(){var e=this;return s||(s=r(18)),this.$__.activePaths.map("init","modify",(function(t){return e.$__getValue(t)})).filter((function(e){return e&&e instanceof Array&&e.isMongooseDocumentArray&&e.length})).forEach((function(t){for(var r=t.length;r--;){var n=t[r];n&&n.$__reset()}e.$__.activePaths.init(t.$path()),t[H]=t[V],t[V]={}})),this.$__.activePaths.map("init","modify",(function(t){return e.$__getValue(t)})).filter((function(e){return e&&e.$isSingleNested})).forEach((function(t){t.$__reset(),t.$__parent===e?e.$__.activePaths.init(t.$basePath):null!=t.$__parent&&t.$__parent.ownerDocument&&t.$__parent.$__reset()})),this.$__dirty().forEach((function(e){var t=e.value;t&&t[V]&&(t[H]=t[V],t[V]={})})),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.states.modify),default:Object.assign({},this.$__.activePaths.states.default)},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.errors=void 0,e=this,this.$__schema.requiredPaths().forEach((function(t){e.$__.activePaths.require(t)})),this},ee.prototype.$__undoReset=function(){if(null!=this.$__.backup&&null!=this.$__.backup.activePaths){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.errors=this.$__.backup.errors;var e,t=i(this.$__dirty());try{for(t.s();!(e=t.n()).done;){var r=e.value.value;r&&r[V]&&r[H]&&(r[V]=r[H])}}catch(e){t.e(e)}finally{t.f()}var n,o=i(this.$getAllSubdocs());try{for(o.s();!(n=o.n()).done;)n.value.$__undoReset()}catch(e){o.e(e)}finally{o.f()}}},ee.prototype.$__dirty=function(){var e=this,t=this.$__.activePaths.map("modify",(function(t){return{path:t,value:e.$__getValue(t),schema:e.$__path(t)}}));(t=t.concat(this.$__.activePaths.map("default",(function(t){if("_id"!==t&&null!=e.$__getValue(t))return{path:t,value:e.$__getValue(t),schema:e.$__path(t)}})))).sort((function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}));var r,n,i=[];return t.forEach((function(e){e&&(null==r||0!==e.path.indexOf(r)?(r=e.path+".",i.push(e),n=e):null!=n&&null!=n.value&&null!=n.value[V]&&n.value.hasAtomics()&&(n.value[V]={},n.value[V].$set=n.value))})),n=r=null,i},ee.prototype.$__setSchema=function(e){e.plugin(C,{deduplicate:!0}),S(e.tree,this,void 0,e.options);for(var t=0,r=Object.keys(e.virtuals);t<r.length;t++){var n=r[t];e.virtuals[n]._applyDefaultGetters()}null==e.path("schema")&&(this.schema=e),this.$__schema=e,this[Y]=e},ee.prototype.$__getArrayPathsToValidate=function(){return s||(s=r(18)),this.$__.activePaths.map("init","modify",function(e){return this.$__getValue(e)}.bind(this)).filter((function(e){return e&&e instanceof Array&&e.isMongooseDocumentArray&&e.length})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e}))},ee.prototype.$getAllSubdocs=function(){function e(t,r,n){var i=t,o=!1;if(n&&(t instanceof ee&&t[Y].paths[n]?i=t._doc[n]:t instanceof ee&&t[Y].nested[n]?(i=t._doc[n],o=!0):i=t[n]),i instanceof c)r.push(i);else if(i instanceof Map)r=Array.from(i.keys()).reduce((function(t,r){return e(i.get(r),t,null)}),r);else if(i&&i.$isSingleNested)(r=Object.keys(i._doc).reduce((function(t,r){return e(i._doc,t,r)}),r)).push(i);else if(i&&i.isMongooseDocumentArray)i.forEach((function(t){t&&t._doc&&(r=Object.keys(t._doc).reduce((function(r,n){return e(t._doc,r,n)}),r),t instanceof c&&r.push(t))}));else if(o&&null!=i)for(var a=0,s=Object.keys(i);a<s.length;a++){var l=s[a];e(i,r,l)}return r}s||(s=r(18)),c=c||r(27);for(var t=[],n=0,i=Object.keys(this._doc);n<i.length;n++)e(this,t,i[n]);return t},ee.prototype.$__handleReject=function(e){this.listeners("error").length?this.emit("error",e):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",e)},ee.prototype.$toObject=function(e,r){var n,i,o={transform:!0,flattenDecimals:!0},a=r?"toJSON":"toObject",s=O(this,"constructor.base.options."+a,{}),l=O(this,"$__schema.options",{});o=F.options(o,z(s)),o=F.options(o,z(l[a]||{})),(e=F.isPOJO(e)?z(e):{})._calledWithOptions=e._calledWithOptions||z(e),n=null!=e._calledWithOptions.minimize?e.minimize:null!=o.minimize?o.minimize:l.minimize,i=null!=e._calledWithOptions.flattenMaps?e.flattenMaps:null!=o.flattenMaps?o.flattenMaps:l.flattenMaps;var c=Object.assign(F.clone(e),{_isNested:!0,json:r,minimize:n,flattenMaps:i});if(F.hasUserDefinedProperty(e,"getters")&&(c.getters=e.getters),F.hasUserDefinedProperty(e,"virtuals")&&(c.virtuals=e.virtuals),(e.depopulate||O(e,"_parentOptions.depopulate",!1))&&e._isNested&&this.$__.wasPopulated)return z(this._id,c);(e=F.options(o,e))._isNested=!0,e.json=r,e.minimize=n,c._parentOptions=e,c._skipSingleNestedGetters=!0;var u=Object.assign({},c);u._skipSingleNestedGetters=!1;var p=e.transform,f=z(this._doc,c)||{};e.getters&&(function(e,t,r){var n,i,o=e.$__schema,a=Object.keys(o.paths),s=a.length,l=e._doc;if(!l)return t;for(;s--;){var c=(n=a[s]).split("."),u=c.length,p=u-1,f=t,h=void 0;if(l=e._doc,e.$__isSelected(n))for(var d=0;d<u;++d){if(i=l[h=c[d]],d===p){var y=e.get(n);f[h]=z(y,r)}else{if(null==i){h in l&&(f[h]=i);break}f=f[h]||(f[h]={})}l=i}}}(this,f,u),e.minimize&&(f=function e(r){for(var n,i,o,a=Object.keys(r),s=a.length;s--;)o=r[i=a[s]],F.isObject(o)&&!t.isBuffer(o)&&(r[i]=e(o)),void 0!==r[i]?n=!0:delete r[i];return n?r:void 0}(f)||{})),(e.virtuals||e.getters&&!1!==e.virtuals)&&se(this,f,u,e),!1===e.versionKey&&this.$__schema.options.versionKey&&delete f[this.$__schema.options.versionKey];var h=e.transform;if(h&&function(e,t){var r=e.$__schema,n=Object.keys(r.paths||{});if(!e._doc)return t;for(var i=0,o=n;i<o.length;i++){var a=o[i],s=r.paths[a];if("function"==typeof s.options.transform){var l=e.get(a),c=s.options.transform.call(e,l);le(a,c),F.setValue(a,c,t)}else if(null!=s.$embeddedSchemaType&&"function"==typeof s.$embeddedSchemaType.options.transform){for(var u=[].concat(e.get(a)),p=s.$embeddedSchemaType.options.transform,f=0;f<u.length;++f){var h=p.call(e,u[f]);u[f]=h,le(a,h)}t[a]=u}}}(this,f),e.useProjection&&function(e,t){var r=e.$__schema,n=Object.keys(r.paths||{});if(!e._doc)return t;var i=e.$__.selected;if(void 0===i&&(i={},L.applyPaths(i,r)),null==i||0===Object.keys(i).length)return t;for(var o=0,a=n;o<a.length;o++){var s=a[o];null==i[s]||i[s]||delete t[s]}}(this,f),!0===h||l.toObject&&h){var d=e.json?l.toJSON:l.toObject;d&&(h="function"==typeof e.transform?e.transform:d.transform)}else e.transform=p;if("function"==typeof h){var y=h(this,f,e);void 0!==y&&(f=y)}return f},ee.prototype.toObject=function(e){return this.$toObject(e)},ee.prototype.toJSON=function(e){return this.$toObject(e,!0)},ee.prototype.parent=function(){return this.$__.parent},ee.prototype.$parent=ee.prototype.parent,ee.prototype.inspect=function(e){var t;F.isPOJO(e)&&((t=e).minimize=!1);var r=this.toObject(t);return null==r?"MongooseDocument { "+r+" }":r},M.custom&&(ee.prototype[M.custom]=ee.prototype.inspect),ee.prototype.toString=function(){var e=this.inspect();return"string"==typeof e?e:M(e)},ee.prototype.equals=function(e){if(!e)return!1;var t=this.$__getValue("_id"),r=null!=e.$__?e.$__getValue("_id"):e;return t||r?t&&t.equals?t.equals(r):t===r:$(this,e)},ee.prototype.populate=function(){if(0===arguments.length)return this;var e,t=this.$__.populate||(this.$__.populate={}),r=F.args(arguments);if("function"==typeof r[r.length-1]&&(e=r.pop()),r.length){var n,o=i(F.populate.apply(null,r));try{for(o.s();!(n=o.n()).done;){var a=n.value;t[a.path]=a}}catch(e){o.e(e)}finally{o.f()}}if(e){var s=F.object.vals(t);this.$__.populate=void 0;var l=this.constructor;if(this.$__isNested){l=this.$__[Z].constructor;var c=this.$__.nestedPath;s.forEach((function(e){e.path=c+"."+e.path}))}if(null!=this.$session()){var u=this.$session();s.forEach((function(e){null!=e.options?"session"in e.options||(e.options.session=u):e.options={session:u}}))}l.populate(this,s,e)}return this},ee.prototype.$getPopulatedDocs=function(){var e=[];null!=this.$__.populated&&(e=e.concat(Object.keys(this.$__.populated))),null!=this.$$populatedVirtuals&&(e=e.concat(Object.keys(this.$$populatedVirtuals)));var t,r=[],n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,a=this.get(o);Array.isArray(a)?r=r.concat(a):a instanceof ee&&r.push(a)}}catch(e){n.e(e)}finally{n.f()}return r},ee.prototype.execPopulate=function(e){var t=this;return null!=e&&"function"!=typeof e?this.populate.apply(this,arguments).execPopulate():x(e,(function(e){t.populate(e)}),this.constructor.events)},ee.prototype.populated=function(e,t,r){if(null==t||!0===t){if(!this.$__.populated)return;var n=e.endsWith(".$*")?e.replace(/\.\$\*$/,""):e,i=this.$__.populated[n];return i?!0===t?i:i.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[e]={value:t,options:r};for(var o=e.split("."),a=0;a<o.length-1;++a){var s=o.slice(0,a+1).join("."),l=this.get(s);if(null!=l&&null!=l.$__&&this.populated(s)){var c=o.slice(a+1).join(".");l.populated(c,t,r);break}}return t},ee.prototype.depopulate=function(e){var t;"string"==typeof e&&(e=e.split(" "));var r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=O(this,"$__.populated",{});if(0===arguments.length){var o,a=i(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;delete this.$$populatedVirtuals[s],delete this._doc[s],delete n[s]}}catch(e){a.e(e)}finally{a.f()}for(var l=0,c=Object.keys(n);l<c.length;l++){var u=c[l];(t=this.populated(u))&&(delete n[u],this.$set(u,t))}return this}var p,f=i(e);try{for(f.s();!(p=f.n()).done;){var h=p.value;t=this.populated(h),delete n[h],-1!==r.indexOf(h)?(delete this.$$populatedVirtuals[h],delete this._doc[h]):t&&this.$set(h,t)}}catch(e){f.e(e)}finally{f.f()}return this},ee.prototype.$__fullPath=function(e){return e||""},ee.prototype.getChanges=function(){var e=this.$__delta();return e?e[1]:{}},ee.ValidationError=b,e.exports=ee}).call(this,r(2).Buffer)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(14),u=r(3),p=r(4),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,r,n=a(l);function l(e,t,r,i,o){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),arguments.length>0){var c=h(t),u=d(t),p=m(null,e,c,r,y(o),u);(a=n.call(this,p)).init(e,t,r,i,o)}else a=n.call(this,m());return s(a)}return t=l,(r=[{key:"toJSON",value:function(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}},{key:"init",value:function(e,t,r,n,i){this.stringValue=h(t),this.messageFormat=y(i),this.kind=e,this.value=t,this.path=r,this.reason=n,this.valueType=d(t)}},{key:"copy",value:function(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}},{key:"setModel",value:function(e){this.model=e,this.message=m(e,this.kind,this.stringValue,this.path,this.messageFormat,this.valueType)}}])&&i(t.prototype,r),l}(c);function h(e){var t=p.inspect(e);return(t=t.replace(/^'|'$/g,'"')).startsWith('"')||(t='"'+t+'"'),t}function d(e){if(null==e)return""+e;var t=n(e);return"object"!==t||"function"!=typeof e.constructor?t:e.constructor.name}function y(e){var t=u(e,"options.cast",null);if("string"==typeof t)return t}function m(e,t,r,n,i,o){if(null!=i){var a=i.replace("{KIND}",t).replace("{VALUE}",r).replace("{PATH}",n);return null!=e&&(a=a.replace("{MODEL}",e.modelName)),a}var s="Cast to "+t+" failed for value "+r+(o?" (type "+o+")":"")+' at path "'+n+'"';return null!=e&&(s+=' for model "'+e.modelName+'"'),s}Object.defineProperty(f.prototype,"name",{value:"CastError"}),e.exports=f},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function a(e,t,r){return(a=s()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&l(i,r.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,e);var t,r,n=(t=o,r=s(),function(){var e,n=c(t);if(r){var o=c(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return i(this,e)});function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return o}(o(Error));Object.defineProperty(u.prototype,"name",{value:"MongooseError"}),e.exports=u},function(e,t,r){"use strict";var n=null;e.exports.get=function(){return n},e.exports.set=function(e){n=e}},function(e,t,r){"use strict";(function(t){function r(e,r){return new t(e,r)}e.exports={normalizedFunctionString:function(e){return e.toString().replace(/function *\(/,"function (")},allocBuffer:"function"==typeof t.alloc?function(){return t.alloc.apply(t,arguments)}:r,toBuffer:"function"==typeof t.from?function(){return t.from.apply(t,arguments)}:r}}).call(this,r(2).Buffer)},function(e,t,r){"use strict";t.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1}},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=r(85),f=r(12),h=r(7),d=r(88),y=r(36),m=r(17).internalToObjectOptions,v=r(4),g=r(1),b=r(0).arrayAtomicsSymbol,_=r(0).arrayParentSymbol,w=r(0).arrayPathSymbol,x=r(0).arraySchemaSymbol,E=r(0).documentArrayParent,S=Array.prototype.push,k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,e);var r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r.apply(this,arguments)}return function(e,t,r){t&&a(e.prototype,t)}(n,[{key:"isMongooseDocumentArray",get:function(){return!0}},{key:"toBSON",value:function(){return this.toObject(m)}},{key:"map",value:function(){var e=s(u(n.prototype),"map",this).apply(this,arguments);return e[x]=null,e[w]=null,e[_]=null,e}},{key:"_cast",value:function(e,r){if(null==this[x])return e;var n=this[x].casterConstructor;if((n.$isMongooseDocumentArray?e&&e.isMongooseDocumentArray:e instanceof n)||e&&e.constructor&&e.constructor.baseCasterConstructor===n)return e[E]&&e.__parentArray||(e[E]=this[_],e.__parentArray=this),e.$setIndex(r),e;if(null==e)return null;if((t.isBuffer(e)||e instanceof h||!g.isObject(e))&&(e={_id:e}),e&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if("string"==typeof e[n.schema.options.discriminatorKey]&&n.discriminators[e[n.schema.options.discriminatorKey]])n=n.discriminators[e[n.schema.options.discriminatorKey]];else{var i=y(n.discriminators,e[n.schema.options.discriminatorKey]);i&&(n=i)}return n.$isMongooseDocumentArray?n.cast(e,this,void 0,void 0,r):new n(e,this,void 0,void 0,r)}},{key:"id",value:function(e){var t,r,n;try{t=d(e).toString()}catch(e){t=null}var o,a=i(this);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s&&null!=(n=s.get("_id")))if(n instanceof f){if(r||(r=String(e)),r==n._id)return s}else if(e instanceof h||n instanceof h){if(t==n)return s}else if(e==n||g.deepEqual(e,n))return s}}catch(e){a.e(e)}finally{a.f()}return null}},{key:"toObject",value:function(e){return[].concat(this.map((function(t){return null==t?null:"function"!=typeof t.toObject?t:t.toObject(e)})))}},{key:"slice",value:function(){var e=s(u(n.prototype),"slice",this).apply(this,arguments);return e[_]=this[_],e[w]=this[w],e}},{key:"push",value:function(){var e=s(u(n.prototype),"push",this).apply(this,arguments);return T(this),e}},{key:"pull",value:function(){var e=s(u(n.prototype),"pull",this).apply(this,arguments);return T(this),e}},{key:"shift",value:function(){var e=s(u(n.prototype),"shift",this).apply(this,arguments);return T(this),e}},{key:"splice",value:function(){var e=s(u(n.prototype),"splice",this).apply(this,arguments);return T(this),e}},{key:"inspect",value:function(){return this.toObject()}},{key:"create",value:function(e){var t=this[x].casterConstructor;if(e&&t.discriminators&&t.schema&&t.schema.options&&t.schema.options.discriminatorKey)if("string"==typeof e[t.schema.options.discriminatorKey]&&t.discriminators[e[t.schema.options.discriminatorKey]])t=t.discriminators[e[t.schema.options.discriminatorKey]];else{var r=y(t.discriminators,e[t.schema.options.discriminatorKey]);r&&(t=r)}return new t(e,this)}},{key:"notify",value:function(e){var t=this;return function r(n,i){for(var o=(i=i||t).length;o--;)if(null!=i[o]){if("save"===e)n=t[o];i[o].isMongooseArray?r(n,i[o]):i[o]&&i[o].emit(e,n)}}}},{key:"_markModified",value:function(e,t){var r,n=this[_];if(n){if(r=this[w],arguments.length)if(null!=t){r=r+"."+e.__index+"."+t}else r=r+"."+e;if(null!=r&&r.endsWith(".$"))return this;n.markModified(r,arguments.length>0?e:n)}return this}}]),n}(p);function T(e){var t=e[_];if(t&&null!=t.$__.populated){var r,n=i(Object.keys(t.$__.populated).filter((function(t){return t.startsWith(e[w]+".")})));try{var o=function(){var n=r.value,i=n.slice((e[w]+".").length);if(!Array.isArray(t.$__.populated[n].value))return"continue";t.$__.populated[n].value=e.map((function(e){return e.populated(i)}))};for(n.s();!(r=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}}}v.inspect.custom&&(k.prototype[v.inspect.custom]=k.prototype.inspect),e.exports=function(e,t,r){var n=new k;if(n[b]={},n[x]=void 0,Array.isArray(e)&&(e[w]===t&&e[_]===r&&(n[b]=Object.assign({},e[b])),e.forEach((function(e){S.call(n,e)}))),n[w]=t,r&&r instanceof f)for(n[_]=r,n[x]=r.schema.path(t);null!=n&&null!=n[x]&&n[x].$isMongooseArray&&!n[x].$isMongooseDocumentArray;)n[x]=n[x].casterConstructor;return n}}).call(this,r(2).Buffer)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o="object"===("undefined"==typeof Reflect?"undefined":n(Reflect))?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+n(e))}function p(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var i,o,a,s;if(u(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=p(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function y(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):v(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+n(e));e.addEventListener(t,(function n(o){i.once&&e.removeEventListener(t,n),r(o)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=v(l,c);for(r=0;r<c;++r)a(u[r],this,t)}return!0},l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},l.prototype.removeListener=function(e,t){var r,n,i,o,a;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},l.prototype.listeners=function(e){return y(this,e,!0)},l.prototype.rawListeners=function(e){return y(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,r){"use strict";e.exports=r(15).get().Decimal128},function(e,t,r){"use strict";(function(t){e.exports=function(e){return!!t.isBuffer(e)||"[object Object]"===Object.prototype.toString.call(e)}}).call(this,r(2).Buffer)},function(e,t,r){"use strict";(function(t){var r=t.nextTick.bind(t);e.exports=function(e){return r(e)}}).call(this,r(11))},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(117);function o(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(4),l=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function p(e){return Object.prototype.toString.call(e)}function f(e){return!a(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var h=e.exports=b,d=/\s*function\s+([^\(\s]*)\s*/;function y(e){if(s.isFunction(e)){if(u)return e.name;var t=e.toString().match(d);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function v(e){if(u||!s.isFunction(e))return s.inspect(e);var t=y(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,r,n,i){throw new h.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function b(e,t){e||g(e,!0,t,"==",h.ok)}function _(e,t,r,i){if(e===t)return!0;if(a(e)&&a(t))return 0===o(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===n(e)||null!==t&&"object"===n(t)){if(f(e)&&f(t)&&p(e)===p(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var l=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=w(e),o=w(t);if(i&&!o||!i&&o)return!1;if(i)return _(e=c.call(e),t=c.call(t),r);var a,l,u=S(e),p=S(t);if(u.length!==p.length)return!1;for(u.sort(),p.sort(),l=u.length-1;l>=0;l--)if(u[l]!==p[l])return!1;for(l=u.length-1;l>=0;l--)if(!_(e[a=u[l]],t[a],r,n))return!1;return!0}(e,t,r,i))}return r?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function E(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&g(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!e&&i&&!r;if((!e&&s.isError(i)&&o&&x(i,r)||a)&&g(i,r,"Got unwanted exception"+n),e&&i&&r&&!x(i,r)||!e&&i)throw i}h.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(v(e.actual),128)+" "+e.operator+" "+m(v(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=y(t),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},s.inherits(h.AssertionError,Error),h.fail=g,h.ok=b,h.equal=function(e,t,r){e!=t&&g(e,t,r,"==",h.equal)},h.notEqual=function(e,t,r){e==t&&g(e,t,r,"!=",h.notEqual)},h.deepEqual=function(e,t,r){_(e,t,!1)||g(e,t,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,r){_(e,t,!0)||g(e,t,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,r){_(e,t,!1)&&g(e,t,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,r,n){_(t,r,!0)&&g(t,r,n,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,r){e!==t&&g(e,t,r,"===",h.strictEqual)},h.notStrictEqual=function(e,t,r){e===t&&g(e,t,r,"!==",h.notStrictEqual)},h.throws=function(e,t,r){E(!0,e,t,r)},h.doesNotThrow=function(e,t,r){E(!1,e,t,r)},h.ifError=function(e){if(e)throw e},h.strict=i((function e(t,r){t||g(t,!0,r,"==",e)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var S=Object.keys||function(e){var t=[];for(var r in e)l.call(e,r)&&t.push(r);return t}}).call(this,r(10))},function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);this._bsontype="Long",this.low_=0|e,this.high_=0|t}r.prototype.toInt=function(){return this.low_},r.prototype.toNumber=function(){return this.high_*r.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},r.prototype.toBigInt=function(){return BigInt(this.toString())},r.prototype.toJSON=function(){return this.toString()},r.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(r.MIN_VALUE)){var n=r.fromNumber(t),i=this.div(n),o=i.multiply(n).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}var a=r.fromNumber(Math.pow(t,6));o=this;for(var s="";!o.isZero();){var l=o.div(a),c=o.subtract(l.multiply(a)).toInt().toString(t);if((o=l).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},r.prototype.getHighBits=function(){return this.high_},r.prototype.getLowBits=function(){return this.low_},r.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:r.TWO_PWR_32_DBL_+this.low_},r.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high_?this.high_:this.low_,t=31;t>0&&0==(e&1<<t);t--);return 0!==this.high_?t+33:t+1},r.prototype.isZero=function(){return 0===this.high_&&0===this.low_},r.prototype.isNegative=function(){return this.high_<0},r.prototype.isOdd=function(){return 1==(1&this.low_)},r.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_},r.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_},r.prototype.lessThan=function(e){return this.compare(e)<0},r.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},r.prototype.greaterThan=function(e){return this.compare(e)>0},r.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},r.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1},r.prototype.negate=function(){return this.equals(r.MIN_VALUE)?r.MIN_VALUE:this.not().add(r.ONE)},r.prototype.add=function(e){var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,c=0,u=0,p=0,f=0;return p+=(f+=o+(65535&e.low_))>>>16,f&=65535,u+=(p+=i+l)>>>16,p&=65535,c+=(u+=n+s)>>>16,u&=65535,c+=t+a,c&=65535,r.fromBits(p<<16|f,c<<16|u)},r.prototype.subtract=function(e){return this.add(e.negate())},r.prototype.multiply=function(e){if(this.isZero())return r.ZERO;if(e.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE))return e.isOdd()?r.MIN_VALUE:r.ZERO;if(e.equals(r.MIN_VALUE))return this.isOdd()?r.MIN_VALUE:r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(r.TWO_PWR_24_)&&e.lessThan(r.TWO_PWR_24_))return r.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,c=65535&e.low_,u=0,p=0,f=0,h=0;return f+=(h+=o*c)>>>16,h&=65535,p+=(f+=i*c)>>>16,f&=65535,p+=(f+=o*l)>>>16,f&=65535,u+=(p+=n*c)>>>16,p&=65535,u+=(p+=i*l)>>>16,p&=65535,u+=(p+=o*s)>>>16,p&=65535,u+=t*c+n*l+i*s+o*a,u&=65535,r.fromBits(f<<16|h,u<<16|p)},r.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE)){if(e.equals(r.ONE)||e.equals(r.NEG_ONE))return r.MIN_VALUE;if(e.equals(r.MIN_VALUE))return r.ONE;var t=this.shiftRight(1).div(e).shiftLeft(1);if(t.equals(r.ZERO))return e.isNegative()?r.ONE:r.NEG_ONE;var n=this.subtract(e.multiply(t));return t.add(n.div(e))}if(e.equals(r.MIN_VALUE))return r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var i=r.ZERO;for(n=this;n.greaterThanOrEqual(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),s=r.fromNumber(t),l=s.multiply(e);l.isNegative()||l.greaterThan(n);)t-=a,l=(s=r.fromNumber(t)).multiply(e);s.isZero()&&(s=r.ONE),i=i.add(s),n=n.subtract(l)}return i},r.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},r.prototype.not=function(){return r.fromBits(~this.low_,~this.high_)},r.prototype.and=function(e){return r.fromBits(this.low_&e.low_,this.high_&e.high_)},r.prototype.or=function(e){return r.fromBits(this.low_|e.low_,this.high_|e.high_)},r.prototype.xor=function(e){return r.fromBits(this.low_^e.low_,this.high_^e.high_)},r.prototype.shiftLeft=function(e){if(0===(e&=63))return this;var t=this.low_;if(e<32){var n=this.high_;return r.fromBits(t<<e,n<<e|t>>>32-e)}return r.fromBits(0,t<<e-32)},r.prototype.shiftRight=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var n=this.low_;return r.fromBits(n>>>e|t<<32-e,t>>e)}return r.fromBits(t>>e-32,t>=0?0:-1)},r.prototype.shiftRightUnsigned=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var n=this.low_;return r.fromBits(n>>>e|t<<32-e,t>>>e)}return 32===e?r.fromBits(t,0):r.fromBits(t>>>e-32,0)},r.fromInt=function(e){if(-128<=e&&e<128){var t=r.INT_CACHE_[e];if(t)return t}var n=new r(0|e,e<0?-1:0);return-128<=e&&e<128&&(r.INT_CACHE_[e]=n),n},r.fromNumber=function(e){return isNaN(e)||!isFinite(e)?r.ZERO:e<=-r.TWO_PWR_63_DBL_?r.MIN_VALUE:e+1>=r.TWO_PWR_63_DBL_?r.MAX_VALUE:e<0?r.fromNumber(-e).negate():new r(e%r.TWO_PWR_32_DBL_|0,e/r.TWO_PWR_32_DBL_|0)},r.fromBigInt=function(e){return r.fromString(e.toString(10),10)},r.fromBits=function(e,t){return new r(e,t)},r.fromString=function(e,t){if(0===e.length)throw Error("number format error: empty string");var n=t||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"===e.charAt(0))return r.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var i=r.fromNumber(Math.pow(n,8)),o=r.ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+s),n);if(s<8){var c=r.fromNumber(Math.pow(n,s));o=o.multiply(c).add(r.fromNumber(l))}else o=(o=o.multiply(i)).add(r.fromNumber(l))}return o},r.INT_CACHE_={},r.TWO_PWR_16_DBL_=65536,r.TWO_PWR_24_DBL_=1<<24,r.TWO_PWR_32_DBL_=r.TWO_PWR_16_DBL_*r.TWO_PWR_16_DBL_,r.TWO_PWR_31_DBL_=r.TWO_PWR_32_DBL_/2,r.TWO_PWR_48_DBL_=r.TWO_PWR_32_DBL_*r.TWO_PWR_16_DBL_,r.TWO_PWR_64_DBL_=r.TWO_PWR_32_DBL_*r.TWO_PWR_32_DBL_,r.TWO_PWR_63_DBL_=r.TWO_PWR_64_DBL_/2,r.ZERO=r.fromInt(0),r.ONE=r.fromInt(1),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647),r.MIN_VALUE=r.fromBits(0,-2147483648),r.TWO_PWR_24_=r.fromInt(1<<24),e.exports=r,e.exports.Long=r},function(e,t,r){"use strict";var n=r(67),i=r(22),o=Symbol("mongoose:emitted");e.exports=function(e,t,r,a){return"function"==typeof e?t((function(t){if(null==t)e.apply(this,arguments);else{null!=r&&null!=r.listeners&&r.listeners("error").length>0&&!t[o]&&(t[o]=!0,r.emit("error",t));try{e(t)}catch(t){return i((function(){throw t}))}}})):new(a=a||n.get())((function(e,n){t((function(t,i){return null!=t?(null!=r&&null!=r.listeners&&r.listeners("error").length>0&&!t[o]&&(t[o]=!0,r.emit("error",t)),n(t)):arguments.length>2?e(Array.prototype.slice.call(arguments,1)):void e(i)}))}))}},function(e,t,r){"use strict";var n=r(6),i=r(34),o=r(21),a=r(1);function s(e,t){if(t&&t.default){var r=t.default;Array.isArray(r)&&0===r.length?t.default=Array:!t.shared&&o(r)&&0===Object.keys(r).length&&(t.default=function(){return{}})}n.call(this,e,t,"Mixed"),this[i.schemaMixedSymbol]=!0}s.schemaName="Mixed",s.defaultOptions={},s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.get=n.get,s.set=n.set,s.prototype.cast=function(e){return e instanceof Error?a.errorToPOJO(e):e},s.prototype.castForQuery=function(e,t){return 2===arguments.length?t:e},e.exports=s},function(e,t,r){"use strict";var n=r(61)(),i=r(19).EventEmitter,o=r(32),a=r(22),s=r(17).internalToObjectOptions,l=r(3),c=r(25),u=r(4),p=r(0).documentArrayParent,f=r(0).validatorErrorSymbol;function h(e,t,r,i,o){var a={};null!=t&&t.isMongooseDocumentArray?(this.__parentArray=t,this[p]=t.$parent()):(this.__parentArray=void 0,this[p]=void 0),this.$setIndex(o),this.$isDocumentArrayElement=!0,null!=this[p]&&(a.defaults=this[p].$__.$options.defaults),n.call(this,e,i,r,a);var s=this;this.on("isNew",(function(e){s.isNew=e})),s.on("save",(function(){s.constructor.emit("save",s)}))}for(var d in h.prototype=Object.create(n.prototype),h.prototype.constructor=h,i.prototype)h[d]=i.prototype[d];h.prototype.toBSON=function(){return this.toObject(s)},h.prototype.$setIndex=function(e){if(this.__index=e,null!=l(this,"$__.validationError",null))for(var t=0,r=Object.keys(this.$__.validationError.errors);t<r.length;t++){var n=r[t];this.invalidate(n,this.$__.validationError.errors[n])}},h.prototype.markModified=function(e){if(this.$__.activePaths.modify(e),this.__parentArray){var t=this.__parentArray.$path()+".0."+e;this.isNew&&this.ownerDocument().$__isSelected(t)?this.__parentArray._markModified():this.__parentArray._markModified(this,e)}},h.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')},h.prototype.save=function(e,t){var r=this;return"function"==typeof e&&(t=e,e={}),(e=e||{}).suppressWarning||console.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),c(t,(function(e){r.$__save(e)}))},h.prototype.$__save=function(e){var t=this;return a((function(){return e(null,t)}))},h.prototype.$__remove=function(e){if(null!=e)return e(null,this)},h.prototype.remove=function(e,t){if("function"!=typeof e||t||(t=e,e=void 0),!this.__parentArray||e&&e.noop)return this.$__remove(t),this;var r;if(!this.willRemove){if(!(r=this._doc._id))throw new Error("For your own good, Mongoose does not know how to remove an EmbeddedDocument that has no _id");this.__parentArray.pull({_id:r}),this.willRemove=!0,function(e){var t=e.ownerDocument();function r(){t.removeListener("save",r),t.removeListener("remove",r),e.emit("remove",e),e.constructor.emit("remove",e),t=e=null}t.on("save",r),t.on("remove",r)}(this)}return this.$__remove(t),this},h.prototype.update=function(){throw new Error("The #update method is not available on EmbeddedDocuments")},h.prototype.inspect=function(){return this.toObject({transform:!1,virtuals:!1,flattenDecimals:!1})},u.inspect.custom&&(h.prototype[u.inspect.custom]=h.prototype.inspect),h.prototype.invalidate=function(e,t,r){if(n.prototype.invalidate.call(this,e,t,r),!this[p]||null==this.__index){if(t[f]||t instanceof o)return this.ownerDocument().$__.validationError;throw t}var i=this.__index,a=[this.__parentArray.$path(),i,e].join(".");return this[p].invalidate(a,t,r),this.ownerDocument().$__.validationError},h.prototype.$markValid=function(e){if(this[p]){var t=this.__index;if(void 0!==t){var r=[this.__parentArray.$path(),t,e].join(".");this[p].$markValid(r)}}},h.prototype.$ignore=function(e){if(n.prototype.$ignore.call(this,e),this[p]){var t=this.__index;if(void 0!==t){var r=[this.__parentArray.$path(),t,e].join(".");this[p].$ignore(r)}}},h.prototype.$isValid=function(e){return void 0===this.__index||!this[p]||!this[p].$__.validationError||!this[p].$__.validationError.errors[this.$__fullPath(e)]},h.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;var e=this[p];if(!e)return this;for(;e[p]||e.$__parent;)e=e[p]||e.$__parent;return this.$__.ownerDocument=e,this.$__.ownerDocument},h.prototype.$__fullPath=function(e){if(!this.$__.fullPath){var t=this;if(!t[p])return e;for(var r=[];t[p]||t.$__parent;)t[p]?r.unshift(t.__parentArray.$path()):r.unshift(t.$basePath),t=t[p]||t.$__parent;this.$__.fullPath=r.join("."),this.$__.ownerDocument||(this.$__.ownerDocument=t)}return e?this.$__.fullPath+"."+e:this.$__.fullPath},h.prototype.parent=function(){return this[p]},h.prototype.$parent=h.prototype.parent,h.prototype.parentArray=function(){return this.__parentArray},e.exports=h},function(e,t,r){(function(t){if(void 0!==t)var n=r(2).Buffer;var i=r(16);function o(e,t){if(!(this instanceof o))return new o(e,t);if(!(null==e||"string"==typeof e||n.isBuffer(e)||e instanceof Uint8Array||Array.isArray(e)))throw new Error("only String, Buffer, Uint8Array or Array accepted");if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=null==t?a:t,this.position=0),null==e||e instanceof Number)void 0!==n?this.buffer=i.allocBuffer(o.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(o.BUFFER_SIZE)):this.buffer=new Array(o.BUFFER_SIZE),this.position=0;else{if("string"==typeof e)if(void 0!==n)this.buffer=i.toBuffer(e);else{if("undefined"==typeof Uint8Array&&"[object Array]"!==Object.prototype.toString.call(e))throw new Error("only String, Buffer, Uint8Array or Array accepted");this.buffer=s(e)}else this.buffer=e;this.position=e.length}}o.prototype.put=function(e){if(null!=e.length&&"number"!=typeof e&&1!==e.length)throw new Error("only accepts single character String, Uint8Array or Array");if("number"!=typeof e&&e<0||e>255)throw new Error("only accepts number in a valid unsigned byte range 0-255");var t;if(t="string"==typeof e?e.charCodeAt(0):null!=e.length?e[0]:e,this.buffer.length>this.position)this.buffer[this.position++]=t;else if(void 0!==n&&n.isBuffer(this.buffer)){var r=i.allocBuffer(o.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=t}else{r=null,r="[object Uint8Array]"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(o.BUFFER_SIZE+this.buffer.length)):new Array(o.BUFFER_SIZE+this.buffer.length);for(var a=0;a<this.buffer.length;a++)r[a]=this.buffer[a];this.buffer=r,this.buffer[this.position++]=t}},o.prototype.write=function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=null;if(void 0!==n&&n.isBuffer(this.buffer))r=i.allocBuffer(this.buffer.length+e.length),this.buffer.copy(r,0,0,this.buffer.length);else if("[object Uint8Array]"===Object.prototype.toString.call(this.buffer)){r=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var o=0;o<this.position;o++)r[o]=this.buffer[o]}this.buffer=r}if(void 0!==n&&n.isBuffer(e)&&n.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==n&&"string"==typeof e&&n.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if("[object Uint8Array]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e)&&"string"!=typeof e){for(o=0;o<e.length;o++)this.buffer[t++]=e[o];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}},o.prototype.read=function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r},o.prototype.value=function(e){if((e=null!=e&&e)&&void 0!==n&&n.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==n&&n.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t="[object Uint8Array]"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),r=0;r<this.position;r++)t[r]=this.buffer[r];return t}return l(this.buffer,0,this.position)},o.prototype.length=function(){return this.position},o.prototype.toJSON=function(){return null!=this.buffer?this.buffer.toString("base64"):""},o.prototype.toString=function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""};var a=0,s=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},l=function(e,t,r){for(var n="",i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n};o.BUFFER_SIZE=256,o.SUBTYPE_DEFAULT=0,o.SUBTYPE_FUNCTION=1,o.SUBTYPE_BYTE_ARRAY=2,o.SUBTYPE_UUID_OLD=3,o.SUBTYPE_UUID=4,o.SUBTYPE_MD5=5,o.SUBTYPE_USER_DEFINED=128,e.exports=o,e.exports.Binary=o}).call(this,r(10))},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(64),a=r(20),s=r(7),l=r(50),c=r(30),u=r(65),p=r(66),f=r(21),h=r(0),d=r(1);function y(e,t,r){if(null==e)return e;if(Array.isArray(e))return function(e,t){var r,i=[],o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(y(a,t,!0))}}catch(e){o.e(e)}finally{o.f()}return i}(e,t);if(c(e))return t&&t._skipSingleNestedGetters&&e.$isSingleNested&&(t=Object.assign({},t,{getters:!1})),d.isPOJO(e)&&null!=e.$__&&null!=e._doc?e._doc:t&&t.json&&"function"==typeof e.toJSON?e.toJSON(t):e.toObject(t);if(e.constructor)switch(u(e.constructor)){case"Object":return m(e,t,r);case"Date":return new e.constructor(+e);case"RegExp":return o(e)}return e instanceof s?new s(e.id):p(e,"Decimal128")?t&&t.flattenDecimals?e.toJSON():a.fromString(e.toString()):!e.constructor&&f(e)?m(e,t,r):e[h.schemaTypeSymbol]?e.clone():t&&t.bson&&"function"==typeof e.toBSON?e:null!=e.valueOf?e.valueOf():m(e,t,r)}function m(e,t,r){for(var n,i=t&&t.minimize,o={},a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(!l.has(c)){var u=y(e[c],t);i&&void 0===u||(!1===i&&void 0===u?delete o[c]:(n||(n=!0),o[c]=u))}}return i&&!r?n&&o:o}e.exports=y},function(e,t,r){"use strict";e.exports=function(e){return null!=e&&(null!=e.$__||e.isMongooseArray||e.isMongooseBuffer||e.$isMongooseMap)}},function(e,t,r){"use strict";var n=["find","findOne","update","updateMany","updateOne","replaceOne","remove","count","distinct","findAndModify","aggregate","findStream","deleteOne","deleteMany"];function i(){}for(var o=0,a=n.length;o<a;++o){var s=n[o];i.prototype[s]=l(s)}function l(e){return function(){throw new Error("collection."+e+" not implemented")}}e.exports=i,i.methods=n},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(14),u=r(4),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,e);var t,r,n=a(s);function s(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=e&&"model"===e.constructor.name?e.constructor.modelName+" validation failed":"Validation failed",(t=n.call(this,r)).errors={},t._message=r,e&&(e.errors=t.errors),t}return t=s,(r=[{key:"toString",value:function(){return this.name+": "+f(this)}},{key:"inspect",value:function(){return Object.assign(new Error(this.message),this)}},{key:"addError",value:function(e,t){this.errors[e]=t,this.message=this._message+": "+f(this)}}])&&i(t.prototype,r),s}(c);function f(e){for(var t,r=Object.keys(e.errors||{}),n=r.length,i=[],o=0;o<n;++o)t=r[o],e!==e.errors[t]&&i.push(t+": "+e.errors[t].message);return i.join(", ")}u.inspect.custom&&(p.prototype[u.inspect.custom]=p.prototype.inspect),Object.defineProperty(p.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}}),Object.defineProperty(p.prototype,"name",{value:"ValidationError"}),e.exports=p},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=n||"Field `"+e+"` is not in schema and strict mode is set to throw.",(o=t.call(this,n)).isImmutableError=!!i,o.path=e,o}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"StrictModeError"}),e.exports=s},function(e,t,r){"use strict";t.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed"),t.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")},function(e,t,r){"use strict";var n=r(79);function i(e){return n.cast()(e)}t.castToNumber=i,t.castArraysOfNumbers=function e(t,r){t.forEach((function(n,o){Array.isArray(n)?e(n,r):t[o]=i.call(r,n)}))}},function(e,t,r){"use strict";var n=r(81);e.exports=function(e,t){if(null==e)return null;for(var r=0,i=Object.keys(e);r<i.length;r++){var o=e[i[r]];if(o.schema&&o.schema.discriminatorMapping&&n(o.schema.discriminatorMapping.value,t))return o}return null}},function(e,t,r){"use strict";t.Array=r(84),t.Buffer=r(87),t.Document=t.Embedded=r(27),t.DocumentArray=r(18),t.Decimal128=r(20),t.ObjectId=r(7),t.Map=r(89),t.Subdocument=r(91)},function(e,t,r){"use strict";var n=r(59),i=r(24),o=r(39),a=r(40),s=r(41),l=r(42),c=r(43),u=r(60),p=r(44),f=r(45),h=r(46),d=r(47),y=r(48),m=r(28),v=r(104),g=r(105),b=r(107),_=r(16),w=_.allocBuffer(17825792),x=function(){};x.prototype.serialize=function(e,t){var r="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,n="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,o="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:17825792;w.length<o&&(w=_.allocBuffer(o));var a=g(w,e,r,0,0,n,i,[]),s=_.allocBuffer(a);return w.copy(s,0,0,s.length),s},x.prototype.serializeWithBufferAndIndex=function(e,t,r){var n="boolean"==typeof(r=r||{}).checkKeys&&r.checkKeys,i="boolean"==typeof r.serializeFunctions&&r.serializeFunctions,o="boolean"!=typeof r.ignoreUndefined||r.ignoreUndefined,a="number"==typeof r.index?r.index:0;return g(t,e,n,a||0,0,i,o)-1},x.prototype.deserialize=function(e,t){return v(e,t)},x.prototype.calculateObjectSize=function(e,t){var r="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,n="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return b(e,r,n)},x.prototype.deserializeStream=function(e,t,r,n,i,o){o=null!=o?o:{};for(var a=t,s=0;s<r;s++){var l=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;o.index=a,n[i+s]=this.deserialize(e,o),a+=l}return a},x.BSON_INT32_MAX=2147483647,x.BSON_INT32_MIN=-2147483648,x.BSON_INT64_MAX=Math.pow(2,63)-1,x.BSON_INT64_MIN=-Math.pow(2,63),x.JS_INT_MAX=9007199254740992,x.JS_INT_MIN=-9007199254740992,x.BSON_DATA_NUMBER=1,x.BSON_DATA_STRING=2,x.BSON_DATA_OBJECT=3,x.BSON_DATA_ARRAY=4,x.BSON_DATA_BINARY=5,x.BSON_DATA_OID=7,x.BSON_DATA_BOOLEAN=8,x.BSON_DATA_DATE=9,x.BSON_DATA_NULL=10,x.BSON_DATA_REGEXP=11,x.BSON_DATA_CODE=13,x.BSON_DATA_SYMBOL=14,x.BSON_DATA_CODE_W_SCOPE=15,x.BSON_DATA_INT=16,x.BSON_DATA_TIMESTAMP=17,x.BSON_DATA_LONG=18,x.BSON_DATA_MIN_KEY=255,x.BSON_DATA_MAX_KEY=127,x.BSON_BINARY_SUBTYPE_DEFAULT=0,x.BSON_BINARY_SUBTYPE_FUNCTION=1,x.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,x.BSON_BINARY_SUBTYPE_UUID=3,x.BSON_BINARY_SUBTYPE_MD5=4,x.BSON_BINARY_SUBTYPE_USER_DEFINED=128,e.exports=x,e.exports.Code=p,e.exports.Map=n,e.exports.Symbol=c,e.exports.BSON=x,e.exports.DBRef=y,e.exports.Binary=m,e.exports.ObjectID=s,e.exports.Long=i,e.exports.Timestamp=a,e.exports.Double=o,e.exports.Int32=u,e.exports.MinKey=h,e.exports.MaxKey=d,e.exports.BSONRegExp=l,e.exports.Decimal128=f},function(e,t){function r(e){if(!(this instanceof r))return new r(e);this._bsontype="Double",this.value=e}r.prototype.valueOf=function(){return this.value},r.prototype.toJSON=function(){return this.value},e.exports=r,e.exports.Double=r},function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);this._bsontype="Timestamp",this.low_=0|e,this.high_=0|t}r.prototype.toInt=function(){return this.low_},r.prototype.toNumber=function(){return this.high_*r.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},r.prototype.toJSON=function(){return this.toString()},r.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(r.MIN_VALUE)){var n=r.fromNumber(t),i=this.div(n),o=i.multiply(n).subtract(this);return i.toString(t)+o.toInt().toString(t)}return"-"+this.negate().toString(t)}var a=r.fromNumber(Math.pow(t,6));o=this;for(var s="";!o.isZero();){var l=o.div(a),c=o.subtract(l.multiply(a)).toInt().toString(t);if((o=l).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},r.prototype.getHighBits=function(){return this.high_},r.prototype.getLowBits=function(){return this.low_},r.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:r.TWO_PWR_32_DBL_+this.low_},r.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high_?this.high_:this.low_,t=31;t>0&&0==(e&1<<t);t--);return 0!==this.high_?t+33:t+1},r.prototype.isZero=function(){return 0===this.high_&&0===this.low_},r.prototype.isNegative=function(){return this.high_<0},r.prototype.isOdd=function(){return 1==(1&this.low_)},r.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_},r.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_},r.prototype.lessThan=function(e){return this.compare(e)<0},r.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},r.prototype.greaterThan=function(e){return this.compare(e)>0},r.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},r.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1},r.prototype.negate=function(){return this.equals(r.MIN_VALUE)?r.MIN_VALUE:this.not().add(r.ONE)},r.prototype.add=function(e){var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,c=0,u=0,p=0,f=0;return p+=(f+=o+(65535&e.low_))>>>16,f&=65535,u+=(p+=i+l)>>>16,p&=65535,c+=(u+=n+s)>>>16,u&=65535,c+=t+a,c&=65535,r.fromBits(p<<16|f,c<<16|u)},r.prototype.subtract=function(e){return this.add(e.negate())},r.prototype.multiply=function(e){if(this.isZero())return r.ZERO;if(e.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE))return e.isOdd()?r.MIN_VALUE:r.ZERO;if(e.equals(r.MIN_VALUE))return this.isOdd()?r.MIN_VALUE:r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(r.TWO_PWR_24_)&&e.lessThan(r.TWO_PWR_24_))return r.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,o=65535&this.low_,a=e.high_>>>16,s=65535&e.high_,l=e.low_>>>16,c=65535&e.low_,u=0,p=0,f=0,h=0;return f+=(h+=o*c)>>>16,h&=65535,p+=(f+=i*c)>>>16,f&=65535,p+=(f+=o*l)>>>16,f&=65535,u+=(p+=n*c)>>>16,p&=65535,u+=(p+=i*l)>>>16,p&=65535,u+=(p+=o*s)>>>16,p&=65535,u+=t*c+n*l+i*s+o*a,u&=65535,r.fromBits(f<<16|h,u<<16|p)},r.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE)){if(e.equals(r.ONE)||e.equals(r.NEG_ONE))return r.MIN_VALUE;if(e.equals(r.MIN_VALUE))return r.ONE;var t=this.shiftRight(1).div(e).shiftLeft(1);if(t.equals(r.ZERO))return e.isNegative()?r.ONE:r.NEG_ONE;var n=this.subtract(e.multiply(t));return t.add(n.div(e))}if(e.equals(r.MIN_VALUE))return r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var i=r.ZERO;for(n=this;n.greaterThanOrEqual(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),s=r.fromNumber(t),l=s.multiply(e);l.isNegative()||l.greaterThan(n);)t-=a,l=(s=r.fromNumber(t)).multiply(e);s.isZero()&&(s=r.ONE),i=i.add(s),n=n.subtract(l)}return i},r.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},r.prototype.not=function(){return r.fromBits(~this.low_,~this.high_)},r.prototype.and=function(e){return r.fromBits(this.low_&e.low_,this.high_&e.high_)},r.prototype.or=function(e){return r.fromBits(this.low_|e.low_,this.high_|e.high_)},r.prototype.xor=function(e){return r.fromBits(this.low_^e.low_,this.high_^e.high_)},r.prototype.shiftLeft=function(e){if(0===(e&=63))return this;var t=this.low_;if(e<32){var n=this.high_;return r.fromBits(t<<e,n<<e|t>>>32-e)}return r.fromBits(0,t<<e-32)},r.prototype.shiftRight=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var n=this.low_;return r.fromBits(n>>>e|t<<32-e,t>>e)}return r.fromBits(t>>e-32,t>=0?0:-1)},r.prototype.shiftRightUnsigned=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var n=this.low_;return r.fromBits(n>>>e|t<<32-e,t>>>e)}return 32===e?r.fromBits(t,0):r.fromBits(t>>>e-32,0)},r.fromInt=function(e){if(-128<=e&&e<128){var t=r.INT_CACHE_[e];if(t)return t}var n=new r(0|e,e<0?-1:0);return-128<=e&&e<128&&(r.INT_CACHE_[e]=n),n},r.fromNumber=function(e){return isNaN(e)||!isFinite(e)?r.ZERO:e<=-r.TWO_PWR_63_DBL_?r.MIN_VALUE:e+1>=r.TWO_PWR_63_DBL_?r.MAX_VALUE:e<0?r.fromNumber(-e).negate():new r(e%r.TWO_PWR_32_DBL_|0,e/r.TWO_PWR_32_DBL_|0)},r.fromBits=function(e,t){return new r(e,t)},r.fromString=function(e,t){if(0===e.length)throw Error("number format error: empty string");var n=t||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"===e.charAt(0))return r.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var i=r.fromNumber(Math.pow(n,8)),o=r.ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+s),n);if(s<8){var c=r.fromNumber(Math.pow(n,s));o=o.multiply(c).add(r.fromNumber(l))}else o=(o=o.multiply(i)).add(r.fromNumber(l))}return o},r.INT_CACHE_={},r.TWO_PWR_16_DBL_=65536,r.TWO_PWR_24_DBL_=1<<24,r.TWO_PWR_32_DBL_=r.TWO_PWR_16_DBL_*r.TWO_PWR_16_DBL_,r.TWO_PWR_31_DBL_=r.TWO_PWR_32_DBL_/2,r.TWO_PWR_48_DBL_=r.TWO_PWR_32_DBL_*r.TWO_PWR_16_DBL_,r.TWO_PWR_64_DBL_=r.TWO_PWR_32_DBL_*r.TWO_PWR_32_DBL_,r.TWO_PWR_63_DBL_=r.TWO_PWR_64_DBL_/2,r.ZERO=r.fromInt(0),r.ONE=r.fromInt(1),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647),r.MIN_VALUE=r.fromBits(0,-2147483648),r.TWO_PWR_24_=r.fromInt(1<<24),e.exports=r,e.exports.Timestamp=r},function(e,t,r){(function(t,n){var i="inspect",o=r(16),a=parseInt(16777215*Math.random(),10),s=new RegExp("^[0-9a-fA-F]{24}$");try{if(t&&t.from){var l=!0;i=r(4).inspect.custom||"inspect"}}catch(e){l=!1}for(var c=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._bsontype="ObjectID",null==t||"number"==typeof t)return this.id=this.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var r=e.isValid(t);if(!r&&null!=t)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&"string"==typeof t&&24===t.length&&l)return new e(o.toBuffer(t,"hex"));if(r&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&"function"==typeof t.toHexString)return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))},u=[],p=0;p<256;p++)u[p]=(p<=15?"0":"")+p.toString(16);c.prototype.toHexString=function(){if(c.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof h)return e=d(this.id),c.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=u[this.id.charCodeAt(t)];return c.cacheHexString&&(this.__id=e),e},c.prototype.get_inc=function(){return c.index=(c.index+1)%16777215},c.prototype.getInc=function(){return this.get_inc()},c.prototype.generate=function(e){"number"!=typeof e&&(e=~~(Date.now()/1e3));var t=(void 0===n||1===n.pid?Math.floor(1e5*Math.random()):n.pid)%65535,r=this.get_inc(),i=o.allocBuffer(12);return i[3]=255&e,i[2]=e>>8&255,i[1]=e>>16&255,i[0]=e>>24&255,i[6]=255&a,i[5]=a>>8&255,i[4]=a>>16&255,i[8]=255&t,i[7]=t>>8&255,i[11]=255&r,i[10]=r>>8&255,i[9]=r>>16&255,i},c.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()},c.prototype[i]=c.prototype.toString,c.prototype.toJSON=function(){return this.toHexString()},c.prototype.equals=function(e){return e instanceof c?this.toString()===e.toString():"string"==typeof e&&c.isValid(e)&&12===e.length&&this.id instanceof h?e===this.id.toString("binary"):"string"==typeof e&&c.isValid(e)&&24===e.length?e.toLowerCase()===this.toHexString():"string"==typeof e&&c.isValid(e)&&12===e.length?e===this.id:!(null==e||!(e instanceof c||e.toHexString))&&e.toHexString()===this.toHexString()},c.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*Math.floor(t)),e},c.index=~~(16777215*Math.random()),c.createPk=function(){return new c},c.createFromTime=function(e){var t=o.toBuffer([0,0,0,0,0,0,0,0,0,0,0,0]);return t[3]=255&e,t[2]=e>>8&255,t[1]=e>>16&255,t[0]=e>>24&255,new c(t)};var f=[];for(p=0;p<10;)f[48+p]=p++;for(;p<16;)f[55+p]=f[87+p]=p++;var h=t,d=function(e){return e.toString("hex")};c.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(l)return new c(o.toBuffer(e,"hex"));for(var t=new h(12),r=0,n=0;n<24;)t[r++]=f[e.charCodeAt(n++)]<<4|f[e.charCodeAt(n++)];return new c(t)},c.isValid=function(e){return null!=e&&("number"==typeof e||("string"==typeof e?12===e.length||24===e.length&&s.test(e):e instanceof c||e instanceof h||"function"==typeof e.toHexString&&(e.id instanceof h||"string"==typeof e.id)&&(12===e.id.length||24===e.id.length&&s.test(e.id))))},Object.defineProperty(c.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.exports=c,e.exports.ObjectID=c,e.exports.ObjectId=c}).call(this,r(2).Buffer,r(11))},function(e,t){function r(e,t){if(!(this instanceof r))return new r;this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t||"";for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Error("the regular expression options ["+this.options[n]+"] is not supported")}e.exports=r,e.exports.BSONRegExp=r},function(e,t,r){(function(t){var n=t&&r(4).inspect.custom||"inspect";function i(e){if(!(this instanceof i))return new i(e);this._bsontype="Symbol",this.value=e}i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return this.value},i.prototype[n]=function(){return this.value},i.prototype.toJSON=function(){return this.value},e.exports=i,e.exports.Symbol=i}).call(this,r(2).Buffer)},function(e,t){var r=function e(t,r){if(!(this instanceof e))return new e(t,r);this._bsontype="Code",this.code=t,this.scope=r};r.prototype.toJSON=function(){return{scope:this.scope,code:this.code}},e.exports=r,e.exports.Code=r},function(e,t,r){"use strict";var n=r(24),i=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,o=/^(\+|-)?(Infinity|inf)$/i,a=/^(\+|-)?NaN$/i,s=6176,l=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),c=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),u=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),p=/^([-+])?(\d+)?$/,f=r(16),h=function(e){return!isNaN(parseInt(e,10))},d=function(e){var t=n.fromNumber(1e9),r=n.fromNumber(0),i=0;if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(i=0;i<=3;i++)r=(r=r.shiftLeft(32)).add(new n(e.parts[i],0)),e.parts[i]=r.div(t).low_,r=r.modulo(t);return{quotient:e,rem:r}},y=function(e){this._bsontype="Decimal128",this.bytes=e};y.fromString=function(e){var t,r=!1,d=!1,m=!1,v=0,g=0,b=0,_=0,w=0,x=[0],E=0,S=0,k=0,T=0,O=0,A=0,P=[0,0],C=[0,0],N=0;if((e=e.trim()).length>=7e3)throw new Error(e+" not a valid Decimal128 string");var R=e.match(i),j=e.match(o),M=e.match(a);if(!R&&!j&&!M||0===e.length)throw new Error(e+" not a valid Decimal128 string");if(R&&R[4]&&void 0===R[2])throw new Error(e+" not a valid Decimal128 string");if("+"!==e[N]&&"-"!==e[N]||(r="-"===e[N++]),!h(e[N])&&"."!==e[N]){if("i"===e[N]||"I"===e[N])return new y(f.toBuffer(r?c:u));if("N"===e[N])return new y(f.toBuffer(l))}for(;h(e[N])||"."===e[N];)if("."!==e[N])E<34&&("0"!==e[N]||m)&&(m||(w=g),m=!0,x[S++]=parseInt(e[N],10),E+=1),m&&(b+=1),d&&(_+=1),g+=1,N+=1;else{if(d)return new y(f.toBuffer(l));d=!0,N+=1}if(d&&!g)throw new Error(e+" not a valid Decimal128 string");if("e"===e[N]||"E"===e[N]){var I=e.substr(++N).match(p);if(!I||!I[2])return new y(f.toBuffer(l));O=parseInt(I[0],10),N+=I[0].length}if(e[N])return new y(f.toBuffer(l));if(k=0,E){if(T=E-1,v=b,0!==O&&1!==v)for(;"0"===e[w+v-1];)v-=1}else k=0,T=0,x[0]=0,b=1,E=1,v=0;for(O<=_&&_-O>16384?O=-6176:O-=_;O>6111;){if((T+=1)-k>34){var D=x.join("");if(D.match(/^0+$/)){O=6111;break}return new y(f.toBuffer(r?c:u))}O-=1}for(;O<-6176||E<b;){if(0===T){O=-6176,v=0;break}if(E<b?b-=1:T-=1,!(O<6111)){if((D=x.join("")).match(/^0+$/)){O=6111;break}return new y(f.toBuffer(r?c:u))}O+=1}if(T-k+1<v&&"0"!==e[v]){var L=g;d&&-6176===O&&(w+=1,L+=1);var F=parseInt(e[w+T+1],10),B=0;if(F>=5&&(B=1,5===F))for(B=x[T]%2==1,A=w+T+2;A<L;A++)if(parseInt(e[A],10)){B=1;break}if(B)for(var z=T;z>=0&&++x[z]>9;z--)if(x[z]=0,0===z){if(!(O<6111))return new y(f.toBuffer(r?c:u));O+=1,x[z]=1}}if(P=n.fromNumber(0),C=n.fromNumber(0),0===v)P=n.fromNumber(0),C=n.fromNumber(0);else if(T-k<17)for(z=k,C=n.fromNumber(x[z++]),P=new n(0,0);z<=T;z++)C=(C=C.multiply(n.fromNumber(10))).add(n.fromNumber(x[z]));else{for(z=k,P=n.fromNumber(x[z++]);z<=T-17;z++)P=(P=P.multiply(n.fromNumber(10))).add(n.fromNumber(x[z]));for(C=n.fromNumber(x[z++]);z<=T;z++)C=(C=C.multiply(n.fromNumber(10))).add(n.fromNumber(x[z]))}var $,U,H,V,G=function(e,t){if(!e&&!t)return{high:n.fromNumber(0),low:n.fromNumber(0)};var r=e.shiftRightUnsigned(32),i=new n(e.getLowBits(),0),o=t.shiftRightUnsigned(32),a=new n(t.getLowBits(),0),s=r.multiply(o),l=r.multiply(a),c=i.multiply(o),u=i.multiply(a);return s=s.add(l.shiftRightUnsigned(32)),l=new n(l.getLowBits(),0).add(c).add(u.shiftRightUnsigned(32)),{high:s=s.add(l.shiftRightUnsigned(32)),low:u=l.shiftLeft(32).add(new n(u.getLowBits(),0))}}(P,n.fromString("100000000000000000"));G.low=G.low.add(C),U=C,((H=($=G.low).high_>>>0)<(V=U.high_>>>0)||H===V&&$.low_>>>0<U.low_>>>0)&&(G.high=G.high.add(n.fromNumber(1))),t=O+s;var q={low:n.fromNumber(0),high:n.fromNumber(0)};G.high.shiftRightUnsigned(49).and(n.fromNumber(1)).equals(n.fromNumber)?(q.high=q.high.or(n.fromNumber(3).shiftLeft(61)),q.high=q.high.or(n.fromNumber(t).and(n.fromNumber(16383).shiftLeft(47))),q.high=q.high.or(G.high.and(n.fromNumber(0x7fffffffffff)))):(q.high=q.high.or(n.fromNumber(16383&t).shiftLeft(49)),q.high=q.high.or(G.high.and(n.fromNumber(562949953421311)))),q.low=G.low,r&&(q.high=q.high.or(n.fromString("9223372036854775808")));var W=f.allocBuffer(16);return N=0,W[N++]=255&q.low.low_,W[N++]=q.low.low_>>8&255,W[N++]=q.low.low_>>16&255,W[N++]=q.low.low_>>24&255,W[N++]=255&q.low.high_,W[N++]=q.low.high_>>8&255,W[N++]=q.low.high_>>16&255,W[N++]=q.low.high_>>24&255,W[N++]=255&q.high.low_,W[N++]=q.high.low_>>8&255,W[N++]=q.high.low_>>16&255,W[N++]=q.high.low_>>24&255,W[N++]=255&q.high.high_,W[N++]=q.high.high_>>8&255,W[N++]=q.high.high_>>16&255,W[N++]=q.high.high_>>24&255,new y(W)},s=6176,y.prototype.toString=function(){for(var e,t,r,i,o,a,l=0,c=new Array(36),u=0;u<c.length;u++)c[u]=0;var p,f,h,y,m,v=0,g=!1,b={parts:new Array(4)},_=[];v=0;var w=this.bytes;if(i=w[v++]|w[v++]<<8|w[v++]<<16|w[v++]<<24,r=w[v++]|w[v++]<<8|w[v++]<<16|w[v++]<<24,t=w[v++]|w[v++]<<8|w[v++]<<16|w[v++]<<24,e=w[v++]|w[v++]<<8|w[v++]<<16|w[v++]<<24,v=0,(new n(i,r),new n(t,e)).lessThan(n.ZERO)&&_.push("-"),(o=e>>26&31)>>3==3){if(30===o)return _.join("")+"Infinity";if(31===o)return"NaN";a=e>>15&16383,h=8+(e>>14&1)}else h=e>>14&7,a=e>>17&16383;if(p=a-s,b.parts[0]=(16383&e)+((15&h)<<14),b.parts[1]=t,b.parts[2]=r,b.parts[3]=i,0===b.parts[0]&&0===b.parts[1]&&0===b.parts[2]&&0===b.parts[3])g=!0;else for(m=3;m>=0;m--){var x=0,E=d(b);if(b=E.quotient,x=E.rem.low_)for(y=8;y>=0;y--)c[9*m+y]=x%10,x=Math.floor(x/10)}if(g)l=1,c[v]=0;else for(l=36,u=0;!c[v];)u++,l-=1,v+=1;if((f=l-1+p)>=34||f<=-7||p>0){for(_.push(c[v++]),(l-=1)&&_.push("."),u=0;u<l;u++)_.push(c[v++]);_.push("E"),f>0?_.push("+"+f):_.push(f)}else if(p>=0)for(u=0;u<l;u++)_.push(c[v++]);else{var S=l+p;if(S>0)for(u=0;u<S;u++)_.push(c[v++]);else _.push("0");for(_.push(".");S++<0;)_.push("0");for(u=0;u<l-Math.max(S-1,0);u++)_.push(c[v++])}return _.join("")},y.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.exports=y,e.exports.Decimal128=y},function(e,t){function r(){if(!(this instanceof r))return new r;this._bsontype="MinKey"}e.exports=r,e.exports.MinKey=r},function(e,t){function r(){if(!(this instanceof r))return new r;this._bsontype="MaxKey"}e.exports=r,e.exports.MaxKey=r},function(e,t){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);this._bsontype="DBRef",this.namespace=e,this.oid=t,this.db=n}r.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:null==this.db?"":this.db}},e.exports=r,e.exports.DBRef=r},function(e,t,r){"use strict";e.exports=r(114)},function(e,t,r){"use strict";e.exports=new Set(["__proto__","constructor","prototype"])},function(e,t,r){"use strict";var n=r(52);e.exports=function(e){var t=null!=this?this.path:null;return n(e,t)}},function(e,t,r){"use strict";var n=r(13);e.exports=function(t,r){if(e.exports.convertToTrue.has(t))return!0;if(e.exports.convertToFalse.has(t))return!1;if(null==t)return t;throw new n("boolean",t,r)},e.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]),e.exports.convertToFalse=new Set([!1,"false",0,"0","no"])},function(e,t,r){"use strict";(function(n){function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l,c=r(19).EventEmitter,u=r(139),p=r(14),f=r(6),h=r(8),d=r(140),y=r(54),m=r(75),v=r(0).arrayParentSymbol,g=r(3),b=r(141),_=r(71),w=r(49),x=r(15).get().ReadPreference,E=r(142),S=r(4),k=r(1),T=r(146),O=r(147).middlewareFunctions,A=r(77).middlewareFunctions,P=O.concat(A).reduce((function(e,t){return e.add(t)}),new Set),C=0;function N(e,t){if(!(this instanceof N))return new N(e,t);if(this.obj=e,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this.methods={},this.methodOptions={},this.statics={},this.tree={},this.query={},this.childSchemas=[],this.plugins=[],this.$id=++C,this.mapPaths=[],this.s={hooks:new u},this.options=this.defaultOptions(t),Array.isArray(e)){var r,n=a(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.add(i)}}catch(e){n.e(e)}finally{n.f()}}else e&&this.add(e);var o=e&&e._id&&k.isObject(e._id);!this.paths._id&&!this.options.noId&&this.options._id&&!o&&m(this),this.setupTimestamp(this.options.timestamps)}N.prototype=Object.create(c.prototype),N.prototype.constructor=N,N.prototype.instanceOfSchema=!0,Object.defineProperty(N.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0}),Object.defineProperty(N.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0}),N.prototype.obj,N.prototype.paths,N.prototype.tree,N.prototype.clone=function(){var e=this,t=new(null==this.base?N:this.base.Schema)({},this._userProvidedOptions);return t.base=this.base,t.obj=this.obj,t.options=k.clone(this.options),t.callQueue=this.callQueue.map((function(e){return e})),t.methods=k.clone(this.methods),t.methodOptions=k.clone(this.methodOptions),t.statics=k.clone(this.statics),t.query=k.clone(this.query),t.plugins=Array.prototype.slice.call(this.plugins),t._indexes=k.clone(this._indexes),t.s.hooks=this.s.hooks.clone(),t.tree=k.clone(this.tree),t.paths=k.clone(this.paths),t.nested=k.clone(this.nested),t.subpaths=k.clone(this.subpaths),t.singleNestedPaths=k.clone(this.singleNestedPaths),t.childSchemas=function(e){for(var t=[],r=0,n=Object.keys(e.paths);r<n.length;r++){var i=n[r],o=e.paths[i];(o.$isMongooseDocumentArray||o.$isSingleNested)&&t.push({schema:o.schema,model:o.caster})}return t}(t),t.virtuals=k.clone(this.virtuals),t.$globalPluginsApplied=this.$globalPluginsApplied,t.$isRootDiscriminator=this.$isRootDiscriminator,t.$implicitlyCreated=this.$implicitlyCreated,t.mapPaths=[].concat(this.mapPaths),null!=this.discriminatorMapping&&(t.discriminatorMapping=Object.assign({},this.discriminatorMapping)),null!=this.discriminators&&(t.discriminators=Object.assign({},this.discriminators)),t.aliases=Object.assign({},this.aliases),t.on("init",(function(t){return e.emit("init",t)})),t},N.prototype.pick=function(e,t){var r=new N({},t||this.options);if(!Array.isArray(e))throw new p('Schema#pick() only accepts an array argument, got "'+o(e)+'"');var n,s=a(e);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(this.nested[l])r.add(i({},l,g(this.tree,l)));else{var c=this.path(l);if(null==c)throw new p("Path `"+l+"` is not in the schema");r.add(i({},l,c))}}}catch(e){s.e(e)}finally{s.f()}return r},N.prototype.defaultOptions=function(e){e&&!1===e.safe&&(e.safe={w:0}),e&&e.safe&&0===e.safe.w&&(e.versionKey=!1),this._userProvidedOptions=null==e?{}:k.clone(e);var t=g(this,"base.options",{});if((e=k.options({strict:!("strict"in t)||t.strict,strictQuery:"strictQuery"in t&&t.strictQuery,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,discriminatorKey:"__t",minimize:!0,autoIndex:null,shardKey:null,read:null,validateBeforeSave:!0,noId:!1,_id:!0,noVirtualId:!1,id:!0,typeKey:"type",typePojoToMixed:!("typePojoToMixed"in t)||t.typePojoToMixed},k.clone(e))).read&&(e.read=x(e.read)),e.optimisticConcurrency&&!e.versionKey)throw new p("Must set `versionKey` if using `optimisticConcurrency`");return e},N.prototype.add=function(e,t){if(e instanceof N||null!=e&&e.instanceOfSchema)return _(this,e),this;if(!1===e._id&&null==t&&(this.options._id=!1),"__proto__."===(t=t||"")||"constructor."===t||"prototype."===t)return this;for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],s=t+o;if(null==e[o])throw new TypeError("Invalid value for schema path `"+s+'`, got value "'+e[o]+'"');if("_id"!==o||!1!==e[o])if(e[o]instanceof y||"VirtualType"===g(e[o],"constructor.name",null))this.virtual(e[o]);else{if(Array.isArray(e[o])&&1===e[o].length&&null==e[o][0])throw new TypeError("Invalid value for schema Array path `"+s+'`, got value "'+e[o][0]+'"');if(k.isPOJO(e[o])||e[o]instanceof h)if(Object.keys(e[o]).length<1)t&&(this.nested[t.substr(0,t.length-1)]=!0),this.path(s,e[o]);else if(!e[o][this.options.typeKey]||"type"===this.options.typeKey&&e[o].type.type)this.nested[s]=!0,this.add(e[o],s+".");else if(!this.options.typePojoToMixed&&k.isPOJO(e[o][this.options.typeKey])){t&&(this.nested[t.substr(0,t.length-1)]=!0);var l=new N(e[o][this.options.typeKey],{typePojoToMixed:!1}),c=Object.assign({},e[o],i({},this.options.typeKey,l));this.path(t+o,c)}else t&&(this.nested[t.substr(0,t.length-1)]=!0),this.path(t+o,e[o]);else t&&(this.nested[t.substr(0,t.length-1)]=!0),this.path(t+o,e[o])}}return function(e,t){var r,n=a(t=t||Object.keys(e.paths));try{for(n.s();!(r=n.n()).done;){var i=r.value,o=g(e.paths[i],"options");if(null!=o){var s=e.paths[i].path,l=o.alias;if(l){if("string"!=typeof l)throw new Error("Invalid value for alias option on "+s+", got "+l);e.aliases[l]=s,e.virtual(l).get(function(e){return function(){return"function"==typeof this.get?this.get(e):this[e]}}(s)).set(function(e){return function(t){return this.$set(e,t)}}(s))}}}}catch(e){n.e(e)}finally{n.f()}}(this,Object.keys(e).map((function(e){return t?t+e:e}))),this},N.reserved=Object.create(null),N.prototype.reserved=N.reserved;var R=N.reserved;function j(e){return/\.\d+/.test(e)?e.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):e}function M(e,t){if(0===e.mapPaths.length)return null;var r,n=a(e.mapPaths);try{for(n.s();!(r=n.n()).done;){var i=r.value.path;if(new RegExp("^"+i.replace(/\.\$\*/g,"\\.[^.]+")+"$").test(t))return e.paths[i]}}catch(e){n.e(e)}finally{n.f()}return null}function I(e,t){var r=t.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(r.length<2)return e.paths.hasOwnProperty(r[0])?e.paths[r[0]]:"adhocOrUndefined";var n=e.path(r[0]),i=!1;if(!n)return"adhocOrUndefined";for(var o=r.length-1,a=1;a<r.length;++a){i=!1;var s=r[a];if(a===o&&n&&!/\D/.test(s)){n=n.$isMongooseDocumentArray?n.$embeddedSchemaType:n instanceof l.Array?n.caster:void 0;break}if(/\D/.test(s)){if(!n||!n.schema){n=void 0;break}i="nested"===n.schema.pathType(s),n=n.schema.path(s)}else n instanceof l.Array&&a!==o&&(n=n.caster)}return e.subpaths[t]=n,n?"real":i?"nested":"adhocOrUndefined"}R.prototype=R.emit=R.listeners=R.on=R.removeListener=R.collection=R.errors=R.get=R.init=R.isModified=R.isNew=R.populated=R.remove=R.save=R.toObject=R.validate=1,N.prototype.path=function(e,t){var r=j(e);if(void 0===t){var n=function(e,t,r){return e.paths.hasOwnProperty(t)?e.paths[t]:e.subpaths.hasOwnProperty(r)?e.subpaths[r]:e.singleNestedPaths.hasOwnProperty(r)&&"object"===o(e.singleNestedPaths[r])?e.singleNestedPaths[r]:null}(this,e,r);if(null!=n)return n;var i=M(this,e);return null!=i?i:null!=(n=this.hasMixedParent(r))?n:/\.\d+\.?.*$/.test(e)?function(e,t){return I(e,t),e.subpaths[t]}(this,e):void 0}var s=e.split(".")[0];if(R[s])throw new Error("`"+s+"` may not be used as a schema pathname");"object"===o(t)&&k.hasUserDefinedProperty(t,"ref")&&T(t.ref,e);var l,c=e.split(/\./),u=c.pop(),p=this.tree,h="",d=a(c);try{for(d.s();!(l=d.n()).done;){var y=l.value;if(h=h+=(h.length>0?".":"")+y,p[y]||(this.nested[h]=!0,p[y]={}),"object"!==o(p[y])){var m="Cannot set nested path `"+e+"`. Parent path `"+h+"` already set to type "+p[y].name+".";throw new Error(m)}p=p[y]}}catch(e){d.e(e)}finally{d.f()}p[u]=k.clone(t),this.paths[e]=this.interpretAsType(e,t,this.options);var v=this.paths[e];if(v.$isSchemaMap){var g=e+".$*",b={type:{}};k.hasUserDefinedProperty(t,"of")&&(b=k.isPOJO(t.of)&&Object.keys(t.of).length>0&&!k.hasUserDefinedProperty(t.of,this.options.typeKey)?new N(t.of):t.of),k.hasUserDefinedProperty(t,"ref")&&(b={type:b,ref:t.ref}),this.paths[g]=this.interpretAsType(g,b,this.options),this.mapPaths.push(this.paths[g]),v.$__schemaType=this.paths[g]}if(v.$isSingleNested){for(var _=0,w=Object.keys(v.schema.paths);_<w.length;_++){var x=w[_];this.singleNestedPaths[e+"."+x]=v.schema.paths[x]}for(var E=0,S=Object.keys(v.schema.singleNestedPaths);E<S.length;E++){var O=S[E];this.singleNestedPaths[e+"."+O]=v.schema.singleNestedPaths[O]}for(var A=0,P=Object.keys(v.schema.subpaths);A<P.length;A++){var C=P[A];this.singleNestedPaths[e+"."+C]=v.schema.subpaths[C]}for(var D=0,L=Object.keys(v.schema.nested);D<L.length;D++){var F=L[D];this.singleNestedPaths[e+"."+F]="nested"}Object.defineProperty(v.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),v.caster.base=this.base,this.childSchemas.push({schema:v.schema,model:v.caster})}else v.$isMongooseDocumentArray&&(Object.defineProperty(v.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),v.casterConstructor.base=this.base,this.childSchemas.push({schema:v.schema,model:v.casterConstructor}));if(v.$isMongooseArray&&v.caster instanceof f){for(var B=e,z=v,$=[];z.$isMongooseArray;)B+=".$",z.$isMongooseDocumentArray?(z.$embeddedSchemaType._arrayPath=B,z.$embeddedSchemaType._arrayParentPath=e,z=z.$embeddedSchemaType.clone()):(z.caster._arrayPath=B,z.caster._arrayParentPath=e,z=z.caster.clone()),z.path=B,$.push(z);for(var U=0,H=$;U<H.length;U++){var V=H[U];this.subpaths[V.path]=V}}if(v.$isMongooseDocumentArray){for(var G=0,q=Object.keys(v.schema.paths);G<q.length;G++){var W=q[G],Y=v.schema.paths[W];this.subpaths[e+"."+W]=Y,"object"===o(Y)&&null!=Y&&(Y.$isUnderneathDocArray=!0)}for(var K=0,X=Object.keys(v.schema.subpaths);K<X.length;K++){var Z=X[K],J=v.schema.subpaths[Z];this.subpaths[e+"."+Z]=J,"object"===o(J)&&null!=J&&(J.$isUnderneathDocArray=!0)}for(var Q=0,ee=Object.keys(v.schema.singleNestedPaths);Q<ee.length;Q++){var te=ee[Q],re=v.schema.singleNestedPaths[te];this.subpaths[e+"."+te]=re,"object"===o(re)&&null!=re&&(re.$isUnderneathDocArray=!0)}}return this},Object.defineProperty(N.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null}),N.prototype.interpretAsType=function(e,t,r){if(t instanceof f){if(t.path===e)return t;var i=t.clone();return i.path=e,i}var a=null!=this.base?this.base.Schema.Types:N.Types;if(!(k.isPOJO(t)||t instanceof h)&&"Object"!==k.getFunctionName(t.constructor)){var s=t;(t={})[r.typeKey]=s}var l,c=!t[r.typeKey]||"type"===r.typeKey&&t.type.type?{}:t[r.typeKey];if(k.isPOJO(c)||"mixed"===c)return new a.Mixed(e,t);if(Array.isArray(c)||c===Array||"array"===c||c===a.Array){var u=c===Array||"array"===c?t.cast||t.of:c[0];if(u&&u.instanceOfSchema)return new a.DocumentArray(e,u,t);if(u&&u[r.typeKey]&&u[r.typeKey].instanceOfSchema)return new a.DocumentArray(e,u[r.typeKey],t,u);if(Array.isArray(u))return new a.Array(e,this.interpretAsType(e,u,r),t);if("string"==typeof u)u=a[u.charAt(0).toUpperCase()+u.substring(1)];else if(u&&(!u[r.typeKey]||"type"===r.typeKey&&u.type.type)&&k.isPOJO(u)){if(Object.keys(u).length){var p={minimize:r.minimize};r.typeKey&&(p.typeKey=r.typeKey),r.hasOwnProperty("strict")&&(p.strict=r.strict),r.hasOwnProperty("typePojoToMixed")&&(p.typePojoToMixed=r.typePojoToMixed),this._userProvidedOptions.hasOwnProperty("_id")?p._id=this._userProvidedOptions._id:N.Types.DocumentArray.defaultOptions&&null!=N.Types.DocumentArray.defaultOptions._id&&(p._id=N.Types.DocumentArray.defaultOptions._id);var d=new N(u,p);return d.$implicitlyCreated=!0,new a.DocumentArray(e,d,t)}return new a.Array(e,a.Mixed,t)}if(u&&("ClockDate"===(l="string"==typeof(c=!u[r.typeKey]||"type"===r.typeKey&&u.type.type?u:u[r.typeKey])?c:c.schemaName||k.getFunctionName(c))&&(l="Date"),!a.hasOwnProperty(l)))throw new TypeError("Invalid schema configuration: "+"`".concat(l,"` is not a valid type within the array `").concat(e,"`.")+"See http://bit.ly/mongoose-schematypes for a list of valid schema types.");return new a.Array(e,u||a.Mixed,t,r)}if(c&&c.instanceOfSchema)return new a.Embedded(c,e,t);if((l=n.isBuffer(c)?"Buffer":"function"==typeof c||"object"===o(c)?c.schemaName||k.getFunctionName(c):null==c?""+c:c.toString())&&(l=l.charAt(0).toUpperCase()+l.substring(1)),"ObjectID"===l&&(l="ObjectId"),"ClockDate"===l&&(l="Date"),null==a[l])throw new TypeError("Invalid schema configuration: `".concat(l,"` is not ")+"a valid type at path `".concat(e,"`. See ")+"http://bit.ly/mongoose-schematypes for a list of valid schema types.");return new a[l](e,t)},N.prototype.eachPath=function(e){for(var t=Object.keys(this.paths),r=t.length,n=0;n<r;++n)e(t[n],this.paths[t[n]]);return this},N.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;for(var t=Object.keys(this.paths),r=t.length,n=[];r--;){var i=t[r];this.paths[i].isRequired&&n.push(i)}return this._requiredpaths=n,this._requiredpaths},N.prototype.indexedPaths=function(){return this._indexedpaths||(this._indexedpaths=this.indexes()),this._indexedpaths},N.prototype.pathType=function(e){var t=j(e);if(this.paths.hasOwnProperty(e))return"real";if(this.virtuals.hasOwnProperty(e))return"virtual";if(this.nested.hasOwnProperty(e))return"nested";if(this.subpaths.hasOwnProperty(t)||this.subpaths.hasOwnProperty(e))return"real";var r=this.singleNestedPaths.hasOwnProperty(t)||this.singleNestedPaths.hasOwnProperty(e);return r?"nested"===r?"nested":"real":null!=M(this,e)?"real":/\.\d+\.|\.\d+$/.test(e)?I(this,e):"adhocOrUndefined"},N.prototype.hasMixedParent=function(e){var t=e.split(/\./g);e="";for(var r=0;r<t.length;++r)if(e=r>0?e+"."+t[r]:t[r],this.paths.hasOwnProperty(e)&&this.paths[e]instanceof l.Mixed)return this.paths[e];return null},N.prototype.setupTimestamp=function(e){return E(this,e)},N.prototype.queue=function(e,t){return this.callQueue.push([e,t]),this},N.prototype.pre=function(e){if(e instanceof RegExp){var t,r=Array.prototype.slice.call(arguments,1),n=a(P);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.test(i)&&this.pre.apply(this,[i].concat(r))}}catch(e){n.e(e)}finally{n.f()}return this}if(Array.isArray(e)){var o,s=Array.prototype.slice.call(arguments,1),l=a(e);try{for(l.s();!(o=l.n()).done;){var c=o.value;this.pre.apply(this,[c].concat(s))}}catch(e){l.e(e)}finally{l.f()}return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this},N.prototype.post=function(e){if(e instanceof RegExp){var t,r=Array.prototype.slice.call(arguments,1),n=a(P);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.test(i)&&this.post.apply(this,[i].concat(r))}}catch(e){n.e(e)}finally{n.f()}return this}if(Array.isArray(e)){var o,s=Array.prototype.slice.call(arguments,1),l=a(e);try{for(l.s();!(o=l.n()).done;){var c=o.value;this.post.apply(this,[c].concat(s))}}catch(e){l.e(e)}finally{l.f()}return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this},N.prototype.plugin=function(e,t){if("function"!=typeof e)throw new Error('First param to `schema.plugin()` must be a function, got "'+o(e)+'"');if(t&&t.deduplicate){var r,n=a(this.plugins);try{for(n.s();!(r=n.n()).done;)if(r.value.fn===e)return this}catch(e){n.e(e)}finally{n.f()}}return this.plugins.push({fn:e,opts:t}),e(this,t),this},N.prototype.method=function(e,t,r){if("string"!=typeof e)for(var n in e)this.methods[n]=e[n],this.methodOptions[n]=k.clone(r);else this.methods[e]=t,this.methodOptions[e]=k.clone(r);return this},N.prototype.static=function(e,t){if("string"!=typeof e)for(var r in e)this.statics[r]=e[r];else this.statics[e]=t;return this},N.prototype.index=function(e,t){return e||(e={}),t||(t={}),t.expires&&k.expires(t),this._indexes.push([e,t]),this},N.prototype.set=function(e,t,r){if(1===arguments.length)return this.options[e];switch(e){case"read":this.options[e]=x(t,r),this._userProvidedOptions[e]=this.options[e];break;case"safe":D(this.options,t),this._userProvidedOptions[e]=this.options[e];break;case"timestamps":this.setupTimestamp(t),this.options[e]=t,this._userProvidedOptions[e]=this.options[e];break;case"_id":this.options[e]=t,this._userProvidedOptions[e]=this.options[e],t&&!this.paths._id?m(this):!t&&null!=this.paths._id&&this.paths._id.auto&&this.remove("_id");break;default:this.options[e]=t,this._userProvidedOptions[e]=this.options[e]}return this};var D=S.deprecate((function(e,t){e.safe=!1===t?{w:0}:t}),"Mongoose: The `safe` option for schemas is deprecated. Use the `writeConcern` option instead: http://bit.ly/mongoose-write-concern");N.prototype.get=function(e){return this.options[e]};var L="2d 2dsphere hashed text".split(" ");function F(e,t){var r,n=t.split("."),i=n.pop(),o=e.tree,s=a(n);try{for(s.s();!(r=s.n()).done;)o=o[r.value]}catch(e){s.e(e)}finally{s.f()}delete o[i]}function B(e){return e.startsWith("$[")&&e.endsWith("]")}Object.defineProperty(N,"indexTypes",{get:function(){return L},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}}),N.prototype.indexes=function(){return b(this)},N.prototype.virtual=function(e,t){var r=this;if(e instanceof y||null!=e&&"VirtualType"===e.constructor.name)return this.virtual(e.path,e.options);if(t=new d(t),k.hasUserDefinedProperty(t,["ref","refPath"])){if(null==t.localField)throw new Error("Reference virtuals require `localField` option");if(null==t.foreignField)throw new Error("Reference virtuals require `foreignField` option");this.pre("init",(function(r){if(w.has(e,r)){var n=w.get(e,r);this.$$populatedVirtuals||(this.$$populatedVirtuals={}),t.justOne||t.count?this.$$populatedVirtuals[e]=Array.isArray(n)?n[0]:n:this.$$populatedVirtuals[e]=Array.isArray(n)?n:null==n?[]:[n],w.unset(e,r)}}));var n=this.virtual(e);return n.options=t,n.set((function(r){this.$$populatedVirtuals||(this.$$populatedVirtuals={}),t.justOne||t.count?(this.$$populatedVirtuals[e]=Array.isArray(r)?r[0]:r,"object"!==o(this.$$populatedVirtuals[e])&&(this.$$populatedVirtuals[e]=t.count?r:null)):(this.$$populatedVirtuals[e]=Array.isArray(r)?r:null==r?[]:[r],this.$$populatedVirtuals[e]=this.$$populatedVirtuals[e].filter((function(e){return e&&"object"===o(e)})))})),"function"==typeof t.get&&n.get(t.get),n}var i=this.virtuals,a=e.split(".");if("real"===this.pathType(e))throw new Error('Virtual path "'+e+'" conflicts with a real path in the schema');i[e]=a.reduce((function(r,n,i){return r[n]||(r[n]=i===a.length-1?new y(t,e):{}),r[n]}),this.tree);for(var s=a[0],l=0;l<a.length-1&&(null==this.paths[s]||!this.paths[s].$isMongooseDocumentArray||"break"!==function(){var e=a.slice(l+1).join(".");return r.paths[s].schema.virtual(e).get((function(t,r,n){var i=n.__parentArray[v],o=s+"."+n.__index+"."+e;return i.get(o)})),"break"}());++l)s+="."+a[l+1];return i[e]},N.prototype.virtualpath=function(e){return this.virtuals.hasOwnProperty(e)?this.virtuals[e]:null},N.prototype.remove=function(e){return"string"==typeof e&&(e=[e]),Array.isArray(e)&&e.forEach((function(e){if(null!=this.path(e)||this.nested[e]){if(this.nested[e]){var t,r=a(Object.keys(this.paths).concat(Object.keys(this.nested)));try{for(r.s();!(t=r.n()).done;){var n=t.value;n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],F(this,n))}}catch(e){r.e(e)}finally{r.f()}return delete this.nested[e],void F(this,e)}delete this.paths[e],F(this,e)}}),this),this},N.prototype.loadClass=function(e,t){return e===Object.prototype||e===Function.prototype||e.prototype.hasOwnProperty("$isMongooseModelPrototype")||(this.loadClass(Object.getPrototypeOf(e),t),t||Object.getOwnPropertyNames(e).forEach((function(t){if(!t.match(/^(length|name|prototype|constructor|__proto__)$/)){var r=Object.getOwnPropertyDescriptor(e,t);this.static(t,r.value)}}),this),Object.getOwnPropertyNames(e.prototype).forEach((function(r){if(!r.match(/^(constructor)$/)){var n=Object.getOwnPropertyDescriptor(e.prototype,r);t||"function"==typeof n.value&&this.method(r,n.value),"function"==typeof n.get&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),"function"==typeof n.set&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))}}),this)),this},N.prototype._getSchema=function(e){var t=this.path(e),r=[];if(t)return t.$fullPath=e,t;for(var n=e.split("."),i=0;i<n.length;++i)("$"===n[i]||B(n[i]))&&(n[i]="0");return function e(t,n){for(var i,o,a=t.length+1;a--;)if(o=t.slice(0,a).join("."),i=n.path(o)){if(r.push(o),i.caster){if(i.caster instanceof l.Mixed)return i.caster.$fullPath=r.join("."),i.caster;if(a!==t.length&&i.schema){var s=void 0;return"$"===t[a]||B(t[a])?a+1===t.length?i:((s=e(t.slice(a+1),i.schema))&&(s.$isUnderneathDocArray=s.$isUnderneathDocArray||!i.schema.$isSingleNested),s):((s=e(t.slice(a),i.schema))&&(s.$isUnderneathDocArray=s.$isUnderneathDocArray||!i.schema.$isSingleNested),s)}}else if(i.$isSchemaMap)return a+1>=t.length?i.$__schemaType:e(t.slice(a+1),i.$__schemaType.schema);return i.$fullPath=r.join("."),i}}(n,this)},N.prototype._getPathType=function(e){return this.path(e)?"real":function e(t,r){for(var n,i,o=t.length+1;o--;){if(i=t.slice(0,o).join("."),n=r.path(i))return n.caster?n.caster instanceof l.Mixed?{schema:n,pathType:"mixed"}:o!==t.length&&n.schema?"$"===t[o]||B(t[o])?o===t.length-1?{schema:n,pathType:"nested"}:e(t.slice(o+1),n.schema):e(t.slice(o),n.schema):{schema:n,pathType:n.$isSingleNested?"nested":"array"}:{schema:n,pathType:"real"};if(o===t.length&&r.nested[i])return{schema:r,pathType:"nested"}}return{schema:n||r,pathType:"undefined"}}(e.split("."),this)},e.exports=t=N,N.Types=l=r(55),t.ObjectId=l.ObjectId}).call(this,r(2).Buffer)},function(e,t,r){"use strict";var n=r(1);function i(e,t){this.path=t,this.getters=[],this.setters=[],this.options=Object.assign({},e)}i.prototype._applyDefaultGetters=function(){if(!(this.getters.length>0||this.setters.length>0)){var e="$"+this.path;this.getters.push((function(){return this[e]})),this.setters.push((function(t){this[e]=t}))}},i.prototype.clone=function(){var e=new i(this.options,this.path);return e.getters=[].concat(this.getters),e.setters=[].concat(this.setters),e},i.prototype.get=function(e){return this.getters.push(e),this},i.prototype.set=function(e){return this.setters.push(e),this},i.prototype.applyGetters=function(e,t){n.hasUserDefinedProperty(this.options,["ref","refPath"])&&t.$$populatedVirtuals&&t.$$populatedVirtuals.hasOwnProperty(this.path)&&(e=t.$$populatedVirtuals[this.path]);for(var r=e,i=this.getters.length-1;i>=0;i--)r=this.getters[i].call(t,r,this,t);return r},i.prototype.applySetters=function(e,t){for(var r=e,n=this.setters.length-1;n>=0;n--)r=this.setters[n].call(t,r,this,t);return r},e.exports=i},function(e,t,r){"use strict";t.String=r(148),t.Number=r(79),t.Boolean=r(152),t.DocumentArray=r(153),t.Embedded=r(160),t.Array=r(56),t.Buffer=r(162),t.Date=r(164),t.ObjectId=r(167),t.Mixed=r(26),t.Decimal128=t.Decimal=r(169),t.Map=r(171),t.Oid=t.ObjectId,t.Object=t.Mixed,t.Bool=t.Boolean,t.ObjectID=t.ObjectId},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o,a,s=r(51),l=r(73),c=r(14),u=r(154),p=r(6),f=p.CastError,h=r(26),d=r(155),y=r(156),m=r(3),v=r(82),g=r(4),b=r(1),_=r(35).castToNumber,w=r(83),x=r(36),E=Symbol("mongoose#isNestedArray"),S=Object.freeze({});function k(e,t,n,i){a||(a=r(37).Embedded);var o,s,l="type";if(i&&i.typeKey&&(l=i.typeKey),this.schemaOptions=i,t){var c={};b.isPOJO(t)&&(t[l]?(delete(c=b.clone(t))[l],t=t[l]):t=h),null!=n&&null!=n.ref&&null==c.ref&&(c.ref=n.ref),t===Object&&(t=h);var u="string"==typeof t?t:b.getFunctionName(t),f=r(55),d=f.hasOwnProperty(u)?f[u]:t;if(this.casterConstructor=d,this.casterConstructor instanceof k&&(this.casterConstructor[E]=!0),"function"!=typeof d||d.$isArraySubdocument||d.$isSchemaMap)this.caster=d,this.caster instanceof a||(this.caster.path=e);else{var y=this.caster instanceof a?null:e;this.caster=new d(y,c)}this.$embeddedSchemaType=this.caster}if(this.$isMongooseArray=!0,p.call(this,e,n,"Array"),null!=this.defaultValue&&(o=this.defaultValue,s="function"==typeof o),!("defaultValue"in this)||void 0!==this.defaultValue){var m=function(){var e=[];return s?e=o.call(this):null!=o&&(e=e.concat(o)),e};m.$runBeforeSetters=!s,this.default(m)}}k.schemaName="Array",k.options={castNonArrays:!0},k.defaultOptions={},k.set=p.set,k.prototype=Object.create(p.prototype),k.prototype.constructor=k,k.prototype.OptionsConstructor=u,k._checkRequired=p.prototype.checkRequired,k.checkRequired=p.checkRequired,k.prototype.checkRequired=function(e,t){return p._isRef(this,e,t,!0)?!!e:("function"==typeof this.constructor.checkRequired?this.constructor.checkRequired():k.checkRequired())(e)},k.prototype.enum=function(){for(var e=this;;){var t=m(e,"caster.instance");if("Array"!==t){if("String"!==t&&"Number"!==t)throw new Error("`enum` can only be set on an array of strings or numbers , not "+t);break}e=e.caster}var r=arguments;return!Array.isArray(arguments)&&b.isObject(arguments)&&(r=b.object.vals(r)),e.caster.enum.apply(e.caster,r),this},k.prototype.applyGetters=function(e,t){if(null!=t&&null!=t.$__&&t.populated(this.path))return e;var r=p.prototype.applyGetters.call(this,e,t);if(Array.isArray(r))for(var n=r.length,i=0;i<n;++i)r[i]=this.caster.applyGetters(r[i],t);return r},k.prototype._applySetters=function(e,t,r,n){if(this.casterConstructor.$isMongooseArray&&k.options.castNonArrays&&!this[E]){for(var i=0,o=this;null!=o&&o.$isMongooseArray&&!o.$isMongooseDocumentArray;)++i,o=o.casterConstructor;if(null!=e&&e.length>0){var a=d(e);if(a.min===a.max&&a.max<i&&a.containsNonArrayItem)for(var s=a.max;s<i;++s)e=[e]}}return p.prototype._applySetters.call(this,e,t,r,n)},k.prototype.cast=function(e,t,n,i,a){var s,l;if(o||(o=r(37).Array),Array.isArray(e)){var u=e.length;if(!u&&t){var p=t.schema.indexedPaths(),d=this.path;for(s=0,l=p.length;s<l;++s){var y=p[s][0][d];if("2dsphere"===y||"2d"===y)return}var m=this.path.endsWith(".coordinates")?this.path.substr(0,this.path.lastIndexOf(".")):null;if(null!=m)for(s=0,l=p.length;s<l;++s)if("2dsphere"===p[s][0][m])return}if(e=o(e,(a=a||S).path||this._arrayPath||this.path,t,this),n&&null!=t&&null!=t.$__&&t.populated(this.path))return e;var v=this.caster,b=v.$isMongooseArray,_="Number"===v.instance;if(v&&this.casterConstructor!==h)try{for(s=0;s<u;s++){if(_&&void 0===e[s])throw new c("Mongoose number arrays disallow storing undefined");var w={};b&&(null!=a.arrayPath||null!=v._arrayParentPath)&&(w.arrayPathIndex=s),e[s]=v.applySetters(e[s],t,n,void 0,w)}}catch(t){throw new f("["+t.kind+"]",g.inspect(e),this.path+"."+s,t,this)}return e}if(n||k.options.castNonArrays)return t&&n&&t.markModified(this.path),this.cast([e],t,n);throw new f("Array",g.inspect(e),this.path,null,this)},k.prototype._castForPopulate=function(e,t){if(o||(o=r(37).Array),Array.isArray(e)){var n,i=e.length,a=this.caster;if(a&&this.casterConstructor!==h)try{for(n=0;n<i;n++){var s={};a.$isMongooseArray&&null!=a._arrayParentPath&&(s.arrayPathIndex=n),e[n]=a.cast(e[n],t,!1,void 0,s)}}catch(t){throw new f("["+t.kind+"]",g.inspect(e),this.path+"."+n,t,this)}return e}throw new f("Array",g.inspect(e),this.path,null,this)},k.prototype.discriminator=function(e,t){for(var r=this;r.$isMongooseArray&&!r.$isMongooseDocumentArray;)if(null==(r=r.casterConstructor)||"function"==typeof r)throw new c("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return r.discriminator(e,t)},k.prototype.clone=function(){var e=Object.assign({},this.options),t=new this.constructor(this.path,this.caster,e,this.schemaOptions);return t.validators=this.validators.slice(),void 0!==this.requiredValidator&&(t.requiredValidator=this.requiredValidator),t},k.prototype.castForQuery=function(e,t){var r,n,i=this;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new Error("Can't use "+e+" with Array.");n=r.call(this,t)}else{n=e;var o=this.casterConstructor;if(n&&o.discriminators&&o.schema&&o.schema.options&&o.schema.options.discriminatorKey)if("string"==typeof n[o.schema.options.discriminatorKey]&&o.discriminators[n[o.schema.options.discriminatorKey]])o=o.discriminators[n[o.schema.options.discriminatorKey]];else{var a=x(o.discriminators,n[o.schema.options.discriminatorKey]);a&&(o=a)}var s=this.casterConstructor.prototype,l=s&&(s.castForQuery||s.cast);!l&&o.castForQuery&&(l=o.castForQuery);var c=this.caster;Array.isArray(n)?(this.setters.reverse().forEach((function(e){n=e.call(i,n,i)})),n=n.map((function(e){return b.isObject(e)&&e.$elemMatch?e:l?e=l.call(c,e):null!=e?e=new o(e):e}))):l?n=l.call(c,n):null!=n&&(n=new o(n))}return n};var T=k.prototype.$conditionalHandlers={};function O(e){return function(t){if(!Array.isArray(t))throw new TypeError("conditional "+e+" requires an array");var r,i=[],o=n(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(y(this.casterConstructor.schema,a))}}catch(e){o.e(e)}finally{o.f()}return i}}T.$all=function(e){return Array.isArray(e)||(e=[e]),e=e.map((function(e){if(b.isObject(e)){var t={};return t[this.path]=e,y(this.casterConstructor.schema,t)[this.path]}return e}),this),this.castForQuery(e)},T.$options=String,T.$elemMatch=function(e){for(var t=Object.keys(e),r=t.length,n=0;n<r;++n){var i=t[n],o=e[i];v(i)&&null!=o&&(e[i]=this.castForQuery(i,o))}var a=m(this,"casterConstructor.schema.options.discriminatorKey"),s=m(this,"casterConstructor.schema.discriminators",{});return null!=a&&null!=e[a]&&null!=s[e[a]]?y(s[e[a]],e):y(this.casterConstructor.schema,e)},T.$geoIntersects=w.cast$geoIntersects,T.$or=O("$or"),T.$and=O("$and"),T.$nor=O("$nor"),T.$near=T.$nearSphere=w.cast$near,T.$within=T.$geoWithin=w.cast$within,T.$size=T.$minDistance=T.$maxDistance=_,T.$exists=s,T.$type=l,T.$eq=T.$gt=T.$gte=T.$lt=T.$lte=T.$ne=T.$regex=k.prototype.castForQuery,T.$nin=p.prototype.$conditionalHandlers.$nin,T.$in=p.prototype.$conditionalHandlers.$in,e.exports=k},function(e,t,r){"use strict";var n,i=r(0).documentSchemaSymbol,o=r(3),a=r(17).internalToObjectOptions,s=r(1),l=r(0).getSymbol,c=r(0).scopeSymbol;function u(e,t,i,o){n=n||r(12);for(var a,l,c=Object.keys(e),u=c.length,f=0;f<u;++f)a=e[l=c[f]],p(l,s.isPOJO(a)&&Object.keys(a).length&&(!a[o.typeKey]||"type"===o.typeKey&&a.type.type)?a:null,t,i,c,o)}function p(e,t,p,f,h,d){n=n||r(12);var y=(f?f+".":"")+e;f=f||"",t?Object.defineProperty(p,e,{enumerable:!0,configurable:!0,get:function(){var e,r,a=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[y]){var l=Object.create(n.prototype,(e=this,r={},Object.getOwnPropertyNames(e).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(e,t),r[t].get?delete r[t]:r[t].enumerable=-1===["isNew","$__","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(t)})),r));f||(l.$__[c]=this),l.$__.nestedPath=y,Object.defineProperty(l,"schema",{enumerable:!1,configurable:!0,writable:!1,value:p.schema}),Object.defineProperty(l,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:p.schema}),Object.defineProperty(l,i,{enumerable:!1,configurable:!0,writable:!1,value:p.schema}),Object.defineProperty(l,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return s.clone(a.get(y,null,{virtuals:o(this,"schema.options.toObject.virtuals",null)}))}}),Object.defineProperty(l,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(y,null,{virtuals:o(this,"schema.options.toObject.virtuals",null)})}}),Object.defineProperty(l,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(y,null,{virtuals:o(a,"schema.options.toJSON.virtuals",null)})}}),Object.defineProperty(l,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0});var h=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1});Object.defineProperty(l,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return 0===Object.keys(this.get(y,null,h)||{}).length}}),Object.defineProperty(l,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),u(t,l,y,d),this.$__.getters[y]=l}return this.$__.getters[y]},set:function(e){null!=e&&e.$__isNested?e=e.$__get():e instanceof n&&!e.$__isNested&&(e=e.toObject(a)),(this.$__[c]||this).$set(y,e)}}):Object.defineProperty(p,e,{enumerable:!0,configurable:!0,get:function(){return this[l].call(this.$__[c]||this,y)},set:function(e){this.$set.call(this.$__[c]||this,y,e)}})}t.compile=u,t.defineKey=p},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null==e||"object"!==n(e)||!("$meta"in e)&&!("$slice"in e)}},function(e,t,r){"use strict";(function(t){if(void 0!==t.Map)e.exports=t.Map,e.exports.Map=t.Map;else{var r=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}};r.prototype.clear=function(){this._keys=[],this._values={}},r.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},r.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?[r,e._values[r].v]:void 0,done:void 0===r}}}},r.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},r.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},r.prototype.has=function(e){return null!=this._values[e]},r.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},r.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},r.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?e._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(r.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),e.exports=r,e.exports.Map=r}}).call(this,r(10))},function(e,t){var r=function e(t){if(!(this instanceof e))return new e(t);this._bsontype="Int32",this.value=t};r.prototype.valueOf=function(){return this.value},r.prototype.toJSON=function(){return this.value},e.exports=r,e.exports.Int32=r},function(e,t,r){"use strict";var n=r(12),i=r(180),o=!1;e.exports=function(){return o?i:n},e.exports.setBrowser=function(e){o=e}},function(e,t){e.exports=function(e,t,r){var n=[],i=e.length;if(0===i)return n;var o=t<0?Math.max(0,t+i):t||0;for(void 0!==r&&(i=r<0?r+i:r);i-- >o;)n[i-o]=e[i];return n}},function(e,t,r){var n=r(2),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=Object.prototype.toString;e.exports=function(e){if("object"!=r(t=e)||"[object RegExp]"!=n.call(t))throw new TypeError("Not a RegExp");var t,i=[];e.global&&i.push("g"),e.multiline&&i.push("m"),e.ignoreCase&&i.push("i"),e.dotAll&&i.push("s"),e.unicode&&i.push("u"),e.sticky&&i.push("y");var o=new RegExp(e.source,i.join(""));return"number"==typeof e.lastIndex&&(o.lastIndex=e.lastIndex),o}},function(e,t,r){"use strict";e.exports=function(e){return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e,t){return n(e,"_bsontype",void 0)===t}},function(e,t,r){"use strict";(function(t){var n=r(23),i=r(118),o={_promise:null,get:function(){return o._promise},set:function(e){n.ok("function"==typeof e,"mongoose.Promise must be a function, got ".concat(e)),o._promise=e,i.Promise=e}};o.set(t.Promise),e.exports=o}).call(this,r(10))},function(e,t,r){"use strict";(function(e,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(120).Buffer,a=r(64),s=["__proto__","constructor","prototype"],l=t.clone=function e(r,n){if(null==r)return r;if(Array.isArray(r))return t.cloneArray(r,n);if(r.constructor){if(/ObjectI[dD]$/.test(r.constructor.name))return"function"==typeof r.clone?r.clone():new r.constructor(r.id);if("ReadPreference"===r.constructor.name)return new r.constructor(r.mode,e(r.tags,n));if("Binary"==r._bsontype&&r.buffer&&r.value)return"function"==typeof r.clone?r.clone():new r.constructor(r.value(!0),r.sub_type);if("Date"===r.constructor.name||"Function"===r.constructor.name)return new r.constructor(+r);if("RegExp"===r.constructor.name)return a(r);if("Buffer"===r.constructor.name)return t.cloneBuffer(r)}return u(r)?t.cloneObject(r,n):r.valueOf?r.valueOf():void 0};t.cloneObject=function(e,t){for(var r,n,i=t&&t.minimize,o={},a=0,c=Object.keys(e);a<c.length;a++){var u=c[a];-1===s.indexOf(u)&&(n=l(e[u],t),i&&void 0===n||(r||(r=!0),o[u]=n))}return i?r&&o:o},t.cloneArray=function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r.push(l(e[n],t));return r},t.tick=function(e){if("function"==typeof e)return function(){var t=arguments;p((function(){e.apply(this,t)}))}},t.merge=function e(r,n){for(var i,o=Object.keys(n),a=o.length;a--;)i=o[a],-1===s.indexOf(i)&&(void 0===r[i]?r[i]=n[i]:t.isObject(n[i])?e(r[i],n[i]):r[i]=n[i])},t.mergeClone=function e(r,n){for(var i,o=Object.keys(n),a=o.length;a--;)i=o[a],-1===s.indexOf(i)&&(void 0===r[i]?r[i]=l(n[i]):t.isObject(n[i])?e(r[i],n[i]):r[i]=l(n[i]))},t.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest"}return e},t.readConcern=function(e){if("string"==typeof e){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot"}e={level:e}}return e};var c=Object.prototype.toString;t.toString=function(e){return c.call(e)};var u=t.isObject=function(e){return"[object Object]"==t.toString(e)};t.isArray=function(e){return Array.isArray(e)||"object"==i(e)&&"[object Array]"==t.toString(e)},t.keys=Object.keys,t.create="function"==typeof Object.create?Object.create:function(e){if(arguments.length>1)throw new Error("Adding properties is not supported");function t(){}return t.prototype=e,new t},t.inherits=function(e,r){e.prototype=t.create(r.prototype),e.prototype.constructor=e};var p=t.soon="function"==typeof e?e:n.nextTick;t.cloneBuffer=function(e){var t=o.alloc(e.length);return e.copy(t,0,0,e.length),t},t.isArgumentsObject=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)}}).call(this,r(69).setImmediate,r(11))},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(119),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(10))},function(e,t,r){"use strict";(function(e,r,n,i){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.isNode=void 0!==e&&"object"==o(r)&&"object"==(void 0===n?"undefined":o(n))&&"function"==typeof i&&e.argv,t.isMongo=!t.isNode&&"function"==typeof printjson&&"function"==typeof ObjectId&&"function"==typeof rs&&"function"==typeof sh,t.isBrowser=!t.isNode&&!t.isMongo&&"undefined"!=typeof window,t.type=t.isNode?"node":t.isMongo?"mongo":t.isBrowser?"browser":"unknown"}).call(this,r(11),r(125)(e),r(10),r(2).Buffer)},function(e,t,r){"use strict";e.exports=function(e,t,r){for(var n={},i=0,o=Object.keys(t.tree);i<o.length;i++){var a=o[i];r&&(e.paths[a]||e.nested[a]||e.singleNestedPaths[a])||(n[a]=t.tree[a])}for(var s in e.add(n),e.callQueue=e.callQueue.concat(t.callQueue),e.method(t.methods),e.static(t.statics),t.query)e.query[s]=t.query[s];for(var l in t.virtuals)e.virtuals[l]=t.virtuals[l].clone();e.s.hooks.merge(t.s.hooks,!1)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(5),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,e);var t,r,n=a(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=e.message;r||(r=c.messages.general.default);var i=p(r,e);return t=n.call(this,i),e=Object.assign({},e,{message:i}),t.properties=e,t.kind=e.type,t.path=e.path,t.value=e.value,t.reason=e.reason,t}return t=s,(r=[{key:"toString",value:function(){return this.message}},{key:"toJSON",value:function(){return Object.assign({name:this.name,message:this.message},this)}}])&&i(t.prototype,r),s}(c);function p(e,t){if("function"==typeof e)return e(t);for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];"message"!==i&&(e=e.replace("{"+i.toUpperCase()+"}",t[i]))}return e}Object.defineProperty(u.prototype,"name",{value:"ValidatorError"}),Object.defineProperty(u.prototype,"properties",{enumerable:!1,writable:!0,value:null}),u.prototype.formatMessage=p,e.exports=u},function(e,t,r){"use strict";e.exports=function(e){if(Array.isArray(e)){if(!e.every((function(e){return"number"==typeof e||"string"==typeof e})))throw new Error("$type array values must be strings or numbers");return e}if("number"!=typeof e&&"string"!=typeof e)throw new Error("$type parameter must be number, string, or array of numbers and strings");return e}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var o=Array.isArray(n)?"array":"primitive value";return(i=t.call(this,"Tried to set nested object field `"+e+"` to ".concat(o," `")+n+"` and strict mode is set to throw.")).path=e,i}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"ObjectExpectedError"}),e.exports=s},function(e,t,r){"use strict";e.exports=function(e){var t={_id:{auto:!0}};t._id[e.options.typeKey]="ObjectId",e.add(t)}},function(e,t,r){"use strict";e.exports=function(e,t){return null==e?null:"boolean"==typeof e?t:"boolean"==typeof e[t]?e[t]?t:null:t in e?e[t]:t}},function(e,t,r){"use strict";var n=r(34),i=r(25);function o(e,t,r){var a={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},s=(r=r||{}).decorateDoc?e:e.prototype;e.$appliedHooks=!0;for(var l=0,c=Object.keys(t.paths);l<c.length;l++){var u=c[l],p=t.paths[u],f=null;if(p.$isSingleNested)f=p.caster;else{if(!p.$isMongooseDocumentArray)continue;f=p.Constructor}if(!f.$appliedHooks&&(o(f,p.schema,r),null!=f.discriminators))for(var h=0,d=Object.keys(f.discriminators);h<d.length;h++){var y=d[h];o(f.discriminators[y],f.discriminators[y].schema,r)}}var m=t.s.hooks.filter((function(e){return"updateOne"===e.name||"deleteOne"===e.name?!!e.document:"remove"===e.name||"init"===e.name?null==e.document||!!e.document:null==e.query&&null==e.document||!1!==e.document})).filter((function(e){return!t.methods[e.name]||!e.fn[n.builtInMiddleware]}));e._middleware=m,s.$__originalValidate=s.$__originalValidate||s.$__validate;for(var v=0,g=["save","validate","remove","deleteOne"];v<g.length;v++){var b=g[v],_="validate"===b?"$__originalValidate":"$__".concat(b),w=m.createWrapper(b,s[_],null,a);s["$__".concat(b)]=w}s.$__init=m.createWrapperSync("init",s.$__init,null,a);for(var x=Object.keys(t.methods),E=Object.assign({},a,{checkForPromise:!0}),S=function(){var t=T[k];if(!m.hasHooks(t))return"continue";var r=s[t];s[t]=function(){var r=this,n=Array.prototype.slice.call(arguments),o=n.slice(-1).pop(),a="function"==typeof o?n.slice(0,n.length-1):n;return i(o,(function(e){return r["$__".concat(t)].apply(r,a.concat([e]))}),e.events)},s["$__".concat(t)]=m.createWrapper(t,r,null,E)},k=0,T=x;k<T.length;k++)S()}e.exports=o,o.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"]},function(e,t,r){"use strict";var n=r(13);e.exports=function(e,t){if(null==e)return e;if(e._id&&"string"==typeof e._id)return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new n("string",e,t)}},function(e,t,r){"use strict";var n=r(5),i=r(150),o=r(6),a=r(151),s=r(80),l=r(1),c=o.CastError;function u(e,t){o.call(this,e,t,"Number")}function p(e){return this.cast(e)}u.get=o.get,u.set=o.set,u._cast=a,u.cast=function(e){return 0===arguments.length||(!1===e&&(e=this._defaultCaster),this._cast=e),this._cast},u._defaultCaster=function(e){if("number"!=typeof e)throw new Error;return e},u.schemaName="Number",u.defaultOptions={},u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.prototype.OptionsConstructor=i,u._checkRequired=function(e){return"number"==typeof e||e instanceof Number},u.checkRequired=o.checkRequired,u.prototype.checkRequired=function(e,t){return o._isRef(this,e,t,!0)?!!e:("function"==typeof this.constructor.checkRequired?this.constructor.checkRequired():u.checkRequired())(e)},u.prototype.min=function(e,t){if(this.minValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.minValidator}),this)),null!=e){var r=t||n.messages.Number.min;r=r.replace(/{MIN}/,e),this.validators.push({validator:this.minValidator=function(t){return null==t||t>=e},message:r,type:"min",min:e})}return this},u.prototype.max=function(e,t){if(this.maxValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.maxValidator}),this)),null!=e){var r=t||n.messages.Number.max;r=r.replace(/{MAX}/,e),this.validators.push({validator:this.maxValidator=function(t){return null==t||t<=e},message:r,type:"max",max:e})}return this},u.prototype.enum=function(e,t){return this.enumValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.enumValidator}),this)),Array.isArray(e)||(e=l.isObject(e)?l.object.vals(e):Array.prototype.slice.call(arguments),t=n.messages.Number.enum),t=null==t?n.messages.Number.enum:t,this.enumValidator=function(t){return null==t||-1!==e.indexOf(t)},this.validators.push({validator:this.enumValidator,message:t,type:"enum",enumValues:e}),this},u.prototype.cast=function(e,t,r){if(o._isRef(this,e,t,r))return"number"==typeof e?e:this._castRef(e,t,r);var n,i=e&&void 0!==e._id?e._id:e;n="function"==typeof this._castFunction?this._castFunction:"function"==typeof this.constructor.cast?this.constructor.cast():u.cast();try{return n(i)}catch(e){throw new c("Number",i,this.path,e,this)}},u.prototype.$conditionalHandlers=l.options(o.prototype.$conditionalHandlers,{$bitsAllClear:s,$bitsAnyClear:s,$bitsAllSet:s,$bitsAnySet:s,$gt:p,$gte:p,$lt:p,$lte:p,$mod:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.cast(e)})):[this.cast(e)]}}),u.prototype.castForQuery=function(e,t){var r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new c("number",t,this.path,null,this);return r.call(this,t)}return this._castForQuery(e)},e.exports=u},function(e,t,r){"use strict";(function(t){var n=r(13);function i(e,t){var r=Number(t);if(isNaN(r))throw new n("number",t,e);return r}e.exports=function(e){var r=this;return Array.isArray(e)?e.map((function(e){return i(r.path,e)})):t.isBuffer(e)?e:i(r.path,e)}}).call(this,r(2).Buffer)},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t){return"string"==typeof e&&"string"==typeof t||"number"==typeof e&&"number"==typeof t?e===t:e instanceof n&&t instanceof n&&e.toString()===t.toString()}},function(e,t,r){"use strict";var n=new Set(["$ref","$id","$db"]);e.exports=function(e){return e.startsWith("$")&&!n.has(e)}},function(e,t,r){"use strict";var n=r(35).castArraysOfNumbers,i=r(35).castToNumber;function o(e,t){switch(e.$geometry.type){case"Polygon":case"LineString":case"Point":n(e.$geometry.coordinates,t)}return a(t,e),e}function a(e,t){t.$maxDistance&&(t.$maxDistance=i.call(e,t.$maxDistance)),t.$minDistance&&(t.$minDistance=i.call(e,t.$minDistance))}t.cast$geoIntersects=function(e){if(e.$geometry)return o(e,this),e},t.cast$near=function(e){var t=r(56);if(Array.isArray(e))return n(e,this),e;if(a(this,e),e&&e.$geometry)return o(e,this);if(!Array.isArray(e))throw new TypeError("$near must be either an array or an object with a $geometry property");return t.prototype.castForQuery.call(this,e)},t.cast$within=function(e){var t=this;if(a(this,e),e.$box||e.$polygon){var r=e.$box?"$box":"$polygon";e[r].forEach((function(e){if(!Array.isArray(e))throw new TypeError("Invalid $within $box argument. Expected an array, received "+e);e.forEach((function(r,n){e[n]=i.call(t,r)}))}))}else if(e.$center||e.$centerSphere){var n=e.$center?"$center":"$centerSphere";e[n].forEach((function(r,o){Array.isArray(r)?r.forEach((function(e,n){r[n]=i.call(t,e)})):e[n][o]=i.call(t,r)}))}else e.$geometry&&o(e,this);return e}},function(e,t,r){"use strict";var n=r(85),i=r(0).arrayAtomicsSymbol,o=r(0).arrayParentSymbol,a=r(0).arrayPathSymbol,s=r(0).arraySchemaSymbol,l=Array.prototype.push;e.exports=function(e,t,r,c){var u;if(Array.isArray(e)){var p=e.length;if(0===p)u=new n;else if(1===p)(u=new n(1))[0]=e[0];else if(p<1e4)u=new n,l.apply(u,e);else{u=new n;for(var f=0;f<p;++f)l.call(u,e[f])}null!=e[i]&&(u[i]=e[i])}else u=new n;return u[a]=t,null!=r&&null!=r.$__&&(u[o]=r,u[s]=c||r.schema.path(t)),u}},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function u(e,t,r){return(u=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(12),y=r(27),m=r(14),v=r(7),g=r(86),b=r(3),_=r(17).internalToObjectOptions,w=r(1),x=r(4),E=r(0).arrayAtomicsSymbol,S=r(0).arrayParentSymbol,k=r(0).arrayPathSymbol,T=r(0).arraySchemaSymbol,O=r(0).populateModelSymbol,A=Symbol("mongoose#Array#sliced"),P=Array.prototype.push,C=Symbol("mongoose#MongooseCoreArray#validators"),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var r,n,i,o,c=(r=u,n=p(),function(){var e,t=h(r);if(n){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return l(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return i=u,(o=[{key:"isMongooseArray",get:function(){return!0}},{key:"validators",get:function(){return this[C]},set:function(e){this[C]=e}},{key:"$__getAtomics",value:function(){var e=[],t=Object.keys(this[E]||{}),r=t.length,n=Object.assign({},_,{_isNested:!0});if(0===r)return e[0]=["$set",this.toObject(n)],e;for(;r--;){var i=t[r],o=this[E][i];w.isMongooseObject(o)?o=o.toObject(n):Array.isArray(o)?o=this.toObject.call(o,n):null!=o&&Array.isArray(o.$each)?o.$each=this.toObject.call(o.$each,n):null!=o&&"function"==typeof o.valueOf&&(o=o.valueOf()),"$addToSet"===i&&(o={$each:o}),e.push([i,o])}return e}},{key:"$atomics",value:function(){return this[E]||{}}},{key:"$parent",value:function(){return this[S]}},{key:"$path",value:function(){return this[k]}},{key:"$shift",value:function(){if(this._registerAtomic("$pop",-1),this._markModified(),!this._shifted)return this._shifted=!0,[].shift.call(this)}},{key:"$pop",value:function(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)}},{key:"$schema",value:function(){return this[T]}},{key:"_cast",value:function(e){var r,n=!1;return this[S]&&(n=this[S].populated(this[k],!0)),n&&null!=e?(r=n.options[O],(t.isBuffer(e)||e instanceof v||!w.isObject(e))&&(e={_id:e}),e.$__schema&&e.$__schema.discriminatorMapping&&void 0!==e.$__schema.discriminatorMapping.key||(e=new r(e)),this[T].caster.applySetters(e,this[S],!0)):this[T].caster.applySetters(e,this[S],!1)}},{key:"_mapCast",value:function(e,t){return this._cast(e,this.length+t)}},{key:"_markModified",value:function(e){var t,r=this[S];if(r){if(t=this[k],arguments.length&&(t=t+"."+e),null!=t&&t.endsWith(".$"))return this;r.markModified(t,arguments.length>0?e:r)}return this}},{key:"_registerAtomic",value:function(e,t){if(!this[A]){if("$set"===e)return this[E]={$set:t},g(this[S],this[k]),this._markModified(),this;this[E]||(this[E]={});var r,n=this[E];if("$pop"===e&&!("$pop"in n)){var i=this;this[S].once("save",(function(){i._popped=i._shifted=null}))}if(this[E].$set||Object.keys(n).length&&!(e in n))return this[E]={$set:this},this;if("$pullAll"===e||"$addToSet"===e)n[e]||(n[e]=[]),n[e]=n[e].concat(t);else if("$pullDocs"===e){var o=n.$pull||(n.$pull={});t[0]instanceof y?(r=o.$or||(o.$or=[]),Array.prototype.push.apply(r,t.map((function(e){return e.toObject({transform:!1,virtuals:!1})})))):(r=o._id||(o._id={$in:[]})).$in=r.$in.concat(t)}else"$push"===e?(n.$push=n.$push||{$each:[]},null!=t&&w.hasUserDefinedProperty(t,"$each")?n.$push=t:n.$push.$each=n.$push.$each.concat(t)):n[e]=t;return this}}},{key:"addToSet",value:function(){R(this,arguments);var e=[].map.call(arguments,this._mapCast,this);e=this[T].applySetters(e,this[S]);var t=[],r="";return e[0]instanceof y?r="doc":e[0]instanceof Date&&(r="date"),e.forEach((function(e){var n,i=+e;switch(r){case"doc":n=this.some((function(t){return t.equals(e)}));break;case"date":n=this.some((function(e){return+e===i}));break;default:n=~this.indexOf(e)}n||([].push.call(this,e),this._registerAtomic("$addToSet",e),this._markModified(),[].push.call(t,e))}),this),t}},{key:"hasAtomics",value:function(){return w.isPOJO(this[E])?Object.keys(this[E]).length:0}},{key:"includes",value:function(e,t){return-1!==this.indexOf(e,t)}},{key:"indexOf",value:function(e,t){e instanceof v&&(e=e.toString()),t=null==t?0:t;for(var r=this.length,n=t;n<r;++n)if(e==this[n])return n;return-1}},{key:"inspect",value:function(){return JSON.stringify(this)}},{key:"nonAtomicPush",value:function(){var e=[].map.call(arguments,this._mapCast,this),t=[].push.apply(this,e);return this._registerAtomic("$set",this),this._markModified(),t}},{key:"pop",value:function(){var e=[].pop.call(this);return this._registerAtomic("$set",this),this._markModified(),e}},{key:"pull",value:function(){for(var e,t=[].map.call(arguments,this._cast,this),r=this[S].get(this[k]),n=r.length;n--;)if((e=r[n])instanceof d){t.some((function(t){return e.equals(t)}))&&[].splice.call(r,n,1)}else~r.indexOf.call(t,e)&&[].splice.call(r,n,1);return t[0]instanceof y?this._registerAtomic("$pullDocs",t.map((function(e){return e.$__getValue("_id")||e}))):this._registerAtomic("$pullAll",t),this._markModified(),g(this[S],this[k])>0&&this._registerAtomic("$set",this),this}},{key:"push",value:function(){var e=arguments,t=e,r=null!=e[0]&&w.hasUserDefinedProperty(e[0],"$each");if(r&&(t=e[0],e=e[0].$each),null==this[T])return P.apply(this,e);R(this,e);var n,i=this[S];e=[].map.call(e,this._mapCast,this),e=this[T].applySetters(e,i,void 0,void 0,{skipDocumentArrayCast:!0});var o=this[E];if(r){if(t.$each=e,b(o,"$push.$each.length",0)>0&&o.$push.$position!=o.$position)throw new m("Cannot call `Array#push()` multiple times with different `$position`");null!=t.$position?([].splice.apply(this,[t.$position,0].concat(e)),n=this.length):n=[].push.apply(this,e)}else{if(b(o,"$push.$each.length",0)>0&&null!=o.$push.$position)throw new m("Cannot call `Array#push()` multiple times with different `$position`");t=e,n=[].push.apply(this,e)}return this._registerAtomic("$push",t),this._markModified(),n}},{key:"remove",value:function(){return this.pull.apply(this,arguments)}},{key:"set",value:function(e,t){var r=this._cast(t,e);return this[e]=r,this._markModified(e),this}},{key:"shift",value:function(){var e=[].shift.call(this);return this._registerAtomic("$set",this),this._markModified(),e}},{key:"sort",value:function(){var e=[].sort.apply(this,arguments);return this._registerAtomic("$set",this),e}},{key:"splice",value:function(){var e;if(R(this,Array.prototype.slice.call(arguments,2)),arguments.length){var t;if(null==this[T])t=arguments;else{t=[];for(var r=0;r<arguments.length;++r)t[r]=r<2?arguments[r]:this._cast(arguments[r],arguments[0]+(r-2))}e=[].splice.apply(this,t),this._registerAtomic("$set",this)}return e}},{key:"slice",value:function(){var e=s(h(u.prototype),"slice",this).apply(this,arguments);return e[S]=this[S],e[T]=this[T],e[E]=this[E],e[k]=this[k],e[A]=!0,e}},{key:"filter",value:function(){var e=s(h(u.prototype),"filter",this).apply(this,arguments);return e[S]=this[S],e[T]=this[T],e[E]=this[E],e[k]=this[k],e}},{key:"toBSON",value:function(){return this.toObject(_)}},{key:"toObject",value:function(e){return e&&e.depopulate?((e=w.clone(e))._isNested=!0,[].concat(this).map((function(t){return t instanceof d?t.toObject(e):t}))):[].concat(this)}},{key:"unshift",value:function(){var e;return R(this,arguments),null==this[T]?e=arguments:(e=[].map.call(arguments,this._cast,this),e=this[T].applySetters(e,this[S])),[].unshift.apply(this,e),this._registerAtomic("$set",this),this._markModified(),this.length}}])&&a(i.prototype,o),u}(c(Array));function R(e,t){var r,n,o,a=null==e?null:b(e[T],"caster.options.ref",null);0===e.length&&t.length>0&&function(e,t){if(!t)return!1;var r,n=i(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(null==o)return!1;var a=o.constructor;if(!(o instanceof d)||a.modelName!==t&&a.baseModelName!==t)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}(t,a)&&e[S].populated(e[k],[],(r={},n=O,o=t[0].constructor,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r))}x.inspect.custom&&(N.prototype[x.inspect.custom]=N.prototype.inspect),e.exports=N}).call(this,r(2).Buffer)},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=(r=r||{}).skipDocArrays,i=0;if(!e)return i;for(var o=0,a=Object.keys(e.$__.activePaths.states.modify);o<a.length;o++){var s=a[o];if(n){var l=e.$__schema.path(s);if(l&&l.$isMongooseDocumentArray)continue}s.startsWith(t+".")&&(delete e.$__.activePaths.states.modify[s],++i)}return i}},function(e,t,r){"use strict";var n=r(15).get().Binary,i=r(1),o=r(63).Buffer;function a(e,t,r){var n,s,c,u,p;return n=0===arguments.length||null==arguments[0]?0:e,Array.isArray(t)?(c=t[0],u=t[1]):s=t,p="number"==typeof n||n instanceof Number?o.alloc(n):o.from(n,s,r),i.decorate(p,a.mixin),p.isMongooseBuffer=!0,p[a.pathSymbol]=c,p[l]=u,p._subtype=0,p}var s=Symbol.for("mongoose#Buffer#_path"),l=Symbol.for("mongoose#Buffer#_parent");a.pathSymbol=s,a.mixin={_subtype:void 0,_markModified:function(){var e=this[l];return e&&e.markModified(this[a.pathSymbol]),this},write:function(){var e=o.prototype.write.apply(this,arguments);return e>0&&this._markModified(),e},copy:function(e){var t=o.prototype.copy.apply(this,arguments);return e&&e.isMongooseBuffer&&e._markModified(),t}},"writeUInt8 writeUInt16 writeUInt32 writeInt8 writeInt16 writeInt32 writeFloat writeDouble fill utf8Write binaryWrite asciiWrite set writeUInt16LE writeUInt16BE writeUInt32LE writeUInt32BE writeInt16LE writeInt16BE writeInt32LE writeInt32BE writeFloatLE writeFloatBE writeDoubleLE writeDoubleBE".split(" ").forEach((function(e){o.prototype[e]&&(a.mixin[e]=function(){var t=o.prototype[e].apply(this,arguments);return this._markModified(),t})})),a.mixin.toObject=function(e){var t="number"==typeof e?e:this._subtype||0;return new n(o.from(this),t)},a.mixin.toBSON=function(){return new n(this,this._subtype||0)},a.mixin.equals=function(e){if(!o.isBuffer(e))return!1;if(this.length!==e.length)return!1;for(var t=0;t<this.length;++t)if(this[t]!==e[t])return!1;return!0},a.mixin.subtype=function(e){if("number"!=typeof e)throw new TypeError("Invalid subtype. Expected a number");this._subtype!==e&&this._markModified(),this._subtype=e},a.Binary=n,e.exports=a},function(e,t,r){"use strict";var n=r(15).get().ObjectId,i=r(23);e.exports=function(e){if(null==e)return e;if(e instanceof n)return e;if(e._id){if(e._id instanceof n)return e._id;if(e._id.toString instanceof Function)return new n(e._id.toString())}if(e.toString instanceof Function)return new n(e.toString());i.ok(!1)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function u(e,t,r){return(u=p()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(26),y=r(7),m=r(1).deepEqual,v=r(3),g=r(90),b=r(4),_=r(50),w=r(0).populateModelSymbol,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,r,n,o,c=(t=u,r=p(),function(){var e,n=h(t);if(r){var i=h(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return l(this,e)});function u(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),null!=e&&"Object"===e.constructor.name&&(e=Object.keys(e).reduce((function(t,r){return t.concat([[r,e[r]]])}),[])),(i=c.call(this,e)).$__parent=null!=r&&null!=r.$__?r:null,i.$__path=t,i.$__schemaType=null==n?new d(t):n,i.$__runDeferred(),i}return n=u,(o=[{key:"$init",value:function(e,t){E(e),s(h(u.prototype),"set",this).call(this,e,t),null!=t&&t.$isSingleNested&&(t.$basePath=this.$__path+"."+e)}},{key:"$__set",value:function(e,t){s(h(u.prototype),"set",this).call(this,e,t)}},{key:"get",value:function(e,t){return e instanceof y&&(e=e.toString()),!1===(t=t||{}).getters?s(h(u.prototype),"get",this).call(this,e):this.$__schemaType.applyGetters(s(h(u.prototype),"get",this).call(this,e),this.$__parent)}},{key:"set",value:function(e,t){if(e instanceof y&&(e=e.toString()),E(e),t=g(t),null==this.$__schemaType)return this.$__deferred=this.$__deferred||[],void this.$__deferred.push({key:e,value:t});var r=this.$__path+"."+e,n=null!=this.$__parent&&this.$__parent.$__?this.$__parent.populated(r)||this.$__parent.populated(this.$__path):null,i=this.get(e);if(null!=n)null==t.$__&&(t=new n.options[w](t)),t.$__.wasPopulated=!0;else try{t=this.$__schemaType.applySetters(t,this.$__parent,!1,this.get(e),{path:r})}catch(e){if(null!=this.$__parent&&null!=this.$__parent.$__)return void this.$__parent.invalidate(r,e);throw e}s(h(u.prototype),"set",this).call(this,e,t),null!=t&&t.$isSingleNested&&(t.$basePath=this.$__path+"."+e);var o=this.$__parent;null==o||null==o.$__||m(t,i)||o.markModified(this.$__path+"."+e)}},{key:"clear",value:function(){s(h(u.prototype),"clear",this).call(this);var e=this.$__parent;null!=e&&e.markModified(this.$__path)}},{key:"delete",value:function(e){e instanceof y&&(e=e.toString()),this.set(e,void 0),s(h(u.prototype),"delete",this).call(this,e)}},{key:"toBSON",value:function(){return new Map(this)}},{key:"toObject",value:function(e){if(v(e,"flattenMaps")){var t,r={},n=i(this.keys());try{for(n.s();!(t=n.n()).done;){var o=t.value;r[o]=this.get(o)}}catch(e){n.e(e)}finally{n.f()}return r}return new Map(this)}},{key:"toJSON",value:function(){var e,t={},r=i(this.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;t[n]=this.get(n)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"inspect",value:function(){return new Map(this)}},{key:"$__runDeferred",value:function(){if(this.$__deferred){var e,t=i(this.$__deferred);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.set(r.key,r.value)}}catch(e){t.e(e)}finally{t.f()}this.$__deferred=null}}}])&&a(n.prototype,o),u}(c(Map));function E(e){var t=n(e);if("string"!==t)throw new TypeError("Mongoose maps only support string keys, got ".concat(t));if(e.startsWith("$"))throw new Error('Mongoose maps do not support keys that start with "$", got "'.concat(e,'"'));if(e.includes("."))throw new Error('Mongoose maps do not support keys that contain ".", got "'.concat(e,'"'));if(_.has(e))throw new Error('Mongoose maps do not support reserved key name "'.concat(e,'"'))}b.inspect.custom&&Object.defineProperty(x.prototype,b.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:x.prototype.inspect}),Object.defineProperty(x.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(x.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(x.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(x.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(x.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0}),Object.defineProperty(x.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0}),e.exports=x},function(e,t,r){"use strict";var n=r(1);e.exports=function(e){return n.isPOJO(e)&&null!=e.$__&&null!=e._doc?e._doc:e}},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(12),a=r(22),s=r(17).internalToObjectOptions,l=r(25),c=r(0).documentArrayParent;function u(e,t,r,i,a){var s=this;this.$isSingleNested=!0,null!=a&&null!=a.path&&(this.$basePath=a.path);var l=null!=a&&a.priorDoc,c=null;if(l&&(this._doc=Object.assign({},a.priorDoc._doc),delete this._doc[this.$__schema.options.discriminatorKey],c=Object.keys(a.priorDoc._doc||{}).filter((function(e){return e!==s.$__schema.options.discriminatorKey}))),null!=r&&(a=Object.assign({},a,{isNew:r.isNew,defaults:r.$__.$options.defaults})),o.call(this,e,t,i,a),l){var u,p=n(c);try{for(p.s();!(u=p.n()).done;){var f=u.value;if(!this.$__.activePaths.states.modify[f]&&!this.$__.activePaths.states.default[f]&&!this.$__.$setCalled.has(f)){var h=this.$__schema.path(f),d=null==h?void 0:h.getDefault(this);void 0===d?delete this._doc[f]:(this._doc[f]=d,this.$__.activePaths.default(f))}}}catch(e){p.e(e)}finally{p.f()}delete a.priorDoc,delete this.$__.$options.priorDoc}}e.exports=u,u.prototype=Object.create(o.prototype),u.prototype.toBSON=function(){return this.toObject(s)},u.prototype.save=function(e,t){var r=this;return"function"==typeof e&&(t=e,e={}),(e=e||{}).suppressWarning||console.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),l(t,(function(e){r.$__save(e)}))},u.prototype.$__save=function(e){var t=this;return a((function(){return e(null,t)}))},u.prototype.$isValid=function(e){return this.$__parent&&this.$basePath?this.$__parent.$isValid([this.$basePath,e].join(".")):o.prototype.$isValid.call(this,e)},u.prototype.markModified=function(e){if(o.prototype.markModified.call(this,e),this.$__parent&&this.$basePath){if(this.$__parent.isDirectModified(this.$basePath))return;this.$__parent.markModified([this.$basePath,e].join("."),this)}},u.prototype.isModified=function(e,t){var r=this;return this.$__parent&&this.$basePath?Array.isArray(e)||"string"==typeof e?(e=(e=Array.isArray(e)?e:e.split(" ")).map((function(e){return[r.$basePath,e].join(".")})),this.$__parent.isModified(e,t)):this.$__parent.isModified(this.$basePath):o.prototype.isModified.call(this,e,t)},u.prototype.$markValid=function(e){o.prototype.$markValid.call(this,e),this.$__parent&&this.$basePath&&this.$__parent.$markValid([this.$basePath,e].join("."))},u.prototype.invalidate=function(e,t,r){if(t!==this.ownerDocument().$__.validationError&&o.prototype.invalidate.call(this,e,t,r),this.$__parent&&this.$basePath)this.$__parent.invalidate([this.$basePath,e].join("."),t,r);else if("cast"===t.kind||"CastError"===t.name)throw t;return this.ownerDocument().$__.validationError},u.prototype.$ignore=function(e){o.prototype.$ignore.call(this,e),this.$__parent&&this.$basePath&&this.$__parent.$ignore([this.$basePath,e].join("."))},u.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;var e=this.$__parent;if(!e)return this;for(;e.$__parent||e[c];)e=e.$__parent||e[c];return this.$__.ownerDocument=e,this.$__.ownerDocument},u.prototype.parent=function(){return this.$__parent},u.prototype.$parent=u.prototype.parent,u.prototype.$__remove=function(e){return e(null,this)},u.prototype.remove=function(e,t){"function"==typeof e&&(t=e,e=null),function(e){var t=e.ownerDocument();function r(){t.removeListener("save",r),t.removeListener("remove",r),e.emit("remove",e),e.constructor.emit("remove",e),t=e=null}t.on("save",r),t.on("remove",r)}(this),e&&e.noop||this.$__parent.set(this.$basePath,null),"function"==typeof t&&t(null)},u.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')}},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(26),a=r(7),s=r(57).defineKey,l=r(3),c=r(1),u={toJSON:!0,toObject:!0,_id:!0,id:!0};e.exports=function(e,t,r,i,p){if(!r||!r.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+t+'" can only be a discriminator of the root model');if(p){var f=l(e.base,"options.applyPluginsToDiscriminators",!1);e.base._applyPlugins(r,{skipTopLevel:!f})}var h=e.schema.options.discriminatorKey,d=e.schema.path(h);if(null!=d)c.hasUserDefinedProperty(d.options,"select")||(d.options.select=!0),d.options.$skipDiscriminatorCheck=!0;else{var y={};y[h]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},y[h][e.schema.options.typeKey]=String,e.schema.add(y),s(h,null,e.prototype,null,[h],e.schema.options)}if(r.path(h)&&!0!==r.path(h).options.$skipDiscriminatorCheck)throw new Error('Discriminator "'+t+'" cannot have field with name "'+h+'"');var m=t;if(("string"==typeof i&&i.length||"number"==typeof i||i instanceof a)&&(m=i),function(t,r){t._baseSchema=r,r.paths._id&&r.paths._id.options&&!r.paths._id.options.auto&&t.remove("_id");for(var i=[],a=0,s=Object.keys(r.paths);a<s.length;a++){var l=s[a];if(t.nested[l])i.push(l);else if(-1!==l.indexOf(".")){var p,f="",y=n(l.split(".").slice(0,-1));try{for(y.s();!(p=y.n()).done;){var v=p.value;f+=(f.length?".":"")+v,(t.paths[f]instanceof o||t.singleNestedPaths[f]instanceof o)&&i.push(l)}}catch(e){y.e(e)}finally{y.f()}}}c.merge(t,r,{isDiscriminatorSchemaMerge:!0,omit:{discriminators:!0,base:!0},omitNested:i.reduce((function(e,t){return e["tree."+t]=!0,e}),{})});for(var g=0,b=i;g<b.length;g++){var _=b[g];delete t.paths[_]}t.childSchemas.forEach((function(e){e.model.prototype.$__setSchema(e.schema)}));var w={};w[h]={default:m,select:!0,set:function(e){if(e===m)return m;throw new Error("Can't set discriminator key \""+h+'"')},$skipDiscriminatorCheck:!0},w[h][t.options.typeKey]=d?d.instance:String,t.add(w),t.discriminatorMapping={key:h,value:m,isRoot:!1},r.options.collection&&(t.options.collection=r.options.collection);var x=t.options.toJSON,E=t.options.toObject,S=t.options._id,k=t.options.id,T=Object.keys(t.options);t.options.discriminatorKey=r.options.discriminatorKey;for(var O=0,A=T;O<A.length;O++){var P=A[O];if(!u[P]){if("pluralization"===P&&1==t.options[P]&&null==r.options[P])continue;if(!c.deepEqual(t.options[P],r.options[P]))throw new Error("Can't customize discriminator option "+P+" (can only modify "+Object.keys(u).join(", ")+")")}}t.options=c.clone(r.options),x&&(t.options.toJSON=x),E&&(t.options.toObject=E),void 0!==S&&(t.options._id=S),t.options.id=k,t.s.hooks=e.schema.s.hooks.merge(t.s.hooks),t.plugins=Array.prototype.slice.call(r.plugins),t.callQueue=r.callQueue.concat(t.callQueue),delete t._requiredpaths}(r,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:h,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[t]=r,e.discriminators[t])throw new Error('Discriminator with name "'+t+'" already exists');return r}},function(e,t,r){"use strict";var n=r(75);e.exports=function(e,t){return null==t||null==t._id||(e=e.clone(),t._id?e.paths._id||(n(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}},function(e,t,r){"use strict";var n=r(36);e.exports=function(e,t){var r=e.schema.options.discriminatorKey;if(null!=t&&e.discriminators&&null!=t[r])if(e.discriminators[t[r]])e=e.discriminators[t[r]];else{var i=n(e.discriminators,t[r]);i&&(e=i)}return e}},function(e,t,r){"use strict";e.exports=r(96)},function(e,t,r){"use strict";(function(n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(15).set(r(100));var l=r(61),c=r(67);l.setBrowser(!0),Object.defineProperty(t,"Promise",{get:function(){return c.get()},set:function(e){c.set(e)}}),t.PromiseProvider=c,t.Error=r(5),t.Schema=r(53),t.Types=r(37),t.VirtualType=r(54),t.SchemaType=r(6),t.utils=r(1),t.Document=l(),t.model=function(e,r){var n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return a(this,r)}}(n);function n(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e,r,i)}return n}(t.Document);return n.modelName=e,n},"undefined"!=typeof window&&(window.mongoose=e.exports,window.Buffer=n)}).call(this,r(2).Buffer)},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=l(e),a=n[0],s=n[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),u=0,p=s>0?a-4:a;for(r=0;r<p;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,p=r?i-1:0,f=r?-1:1,h=e[t+p];for(p+=f,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+p],p+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+e[t+p],p+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=c}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?f/l:f*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=u?(s=0,a=u):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+h]=255&a,h+=d,a/=256,c-=8);e[r+h-d]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";t.Binary=r(101),t.Collection=function(){throw new Error("Cannot create a collection from browser library")},t.getConnection=function(){return function(){throw new Error("Cannot create a connection from browser library")}},t.Decimal128=r(108),t.ObjectId=r(109),t.ReadPreference=r(110)},function(e,t,r){"use strict";var n=r(38).Binary;e.exports=n},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return e&&"object"===r(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(module,exports,__nested_webpack_require_408119__){"use strict";var Long=__nested_webpack_require_408119__(24).Long,Double=__nested_webpack_require_408119__(39).Double,Timestamp=__nested_webpack_require_408119__(40).Timestamp,ObjectID=__nested_webpack_require_408119__(41).ObjectID,_Symbol=__nested_webpack_require_408119__(43).Symbol,Code=__nested_webpack_require_408119__(44).Code,MinKey=__nested_webpack_require_408119__(46).MinKey,MaxKey=__nested_webpack_require_408119__(47).MaxKey,Decimal128=__nested_webpack_require_408119__(45),Int32=__nested_webpack_require_408119__(60),DBRef=__nested_webpack_require_408119__(48).DBRef,BSONRegExp=__nested_webpack_require_408119__(42).BSONRegExp,Binary=__nested_webpack_require_408119__(28).Binary,utils=__nested_webpack_require_408119__(16),deserialize=function(e,t,r){var n=(t=null==t?{}:t)&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5||e.length<i||i+n>e.length)throw new Error("corrupt bson message");if(0!==e[n+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,n,t,r)},deserializeObject=function e(t,r,n,i){var o=null!=n.evalFunctions&&n.evalFunctions,a=null!=n.cacheFunctions&&n.cacheFunctions,s=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!s)var l=null;var c=null==n.fieldsAsRaw?null:n.fieldsAsRaw,u=null!=n.raw&&n.raw,p="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,f=null!=n.promoteBuffers&&n.promoteBuffers,h=null==n.promoteLongs||n.promoteLongs,d=null==n.promoteValues||n.promoteValues,y=r;if(t.length<5)throw new Error("corrupt bson message < 5 bytes long");var m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(m<5||m>t.length)throw new Error("corrupt bson message");for(var v=i?[]:{},g=0;;){var b=t[r++];if(0===b)break;for(var _=r;0!==t[_]&&_<t.length;)_++;if(_>=t.length)throw new Error("Bad BSON Document: illegal CString");var w=i?g++:t.toString("utf8",r,_);if(r=_+1,b===BSON.BSON_DATA_STRING){var x=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(x<=0||x>t.length-r||0!==t[r+x-1])throw new Error("bad string length in bson");v[w]=t.toString("utf8",r,r+x-1),r+=x}else if(b===BSON.BSON_DATA_OID){var E=utils.allocBuffer(12);t.copy(E,0,r,r+12),v[w]=new ObjectID(E),r+=12}else if(b===BSON.BSON_DATA_INT&&!1===d)v[w]=new Int32(t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24);else if(b===BSON.BSON_DATA_INT)v[w]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;else if(b===BSON.BSON_DATA_NUMBER&&!1===d)v[w]=new Double(t.readDoubleLE(r)),r+=8;else if(b===BSON.BSON_DATA_NUMBER)v[w]=t.readDoubleLE(r),r+=8;else if(b===BSON.BSON_DATA_DATE){var S=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,k=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;v[w]=new Date(new Long(S,k).toNumber())}else if(b===BSON.BSON_DATA_BOOLEAN){if(0!==t[r]&&1!==t[r])throw new Error("illegal boolean type value");v[w]=1===t[r++]}else if(b===BSON.BSON_DATA_OBJECT){var T=r,O=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;if(O<=0||O>t.length-r)throw new Error("bad embedded document length in bson");v[w]=u?t.slice(r,r+O):e(t,T,n,!1),r+=O}else if(b===BSON.BSON_DATA_ARRAY){T=r;var A=n,P=r+(O=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24);if(c&&c[w]){for(var C in A={},n)A[C]=n[C];A.raw=!0}if(v[w]=e(t,T,A,!0),0!==t[(r+=O)-1])throw new Error("invalid array terminator byte");if(r!==P)throw new Error("corrupted array bson")}else if(b===BSON.BSON_DATA_UNDEFINED)v[w]=void 0;else if(b===BSON.BSON_DATA_NULL)v[w]=null;else if(b===BSON.BSON_DATA_LONG){S=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,k=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;var N=new Long(S,k);v[w]=h&&!0===d&&N.lessThanOrEqual(JS_INT_MAX_LONG)&&N.greaterThanOrEqual(JS_INT_MIN_LONG)?N.toNumber():N}else if(b===BSON.BSON_DATA_DECIMAL128){var R=utils.allocBuffer(16);t.copy(R,0,r,r+16),r+=16;var j=new Decimal128(R);v[w]=j.toObject?j.toObject():j}else if(b===BSON.BSON_DATA_BINARY){var M=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,I=M,D=t[r++];if(M<0)throw new Error("Negative binary type element size found");if(M>t.length)throw new Error("Binary type size larger than document size");if(null!=t.slice){if(D===Binary.SUBTYPE_BYTE_ARRAY){if((M=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(M>I-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(M<I-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}v[w]=f&&d?t.slice(r,r+M):new Binary(t.slice(r,r+M),D)}else{var L="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(M)):new Array(M);if(D===Binary.SUBTYPE_BYTE_ARRAY){if((M=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(M>I-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(M<I-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(_=0;_<M;_++)L[_]=t[r+_];v[w]=f&&d?L:new Binary(L,D)}r+=M}else if(b===BSON.BSON_DATA_REGEXP&&!1===p){for(_=r;0!==t[_]&&_<t.length;)_++;if(_>=t.length)throw new Error("Bad BSON Document: illegal CString");var F=t.toString("utf8",r,_);for(_=r=_+1;0!==t[_]&&_<t.length;)_++;if(_>=t.length)throw new Error("Bad BSON Document: illegal CString");var B=t.toString("utf8",r,_);r=_+1;var z=new Array(B.length);for(_=0;_<B.length;_++)switch(B[_]){case"m":z[_]="m";break;case"s":z[_]="g";break;case"i":z[_]="i"}v[w]=new RegExp(F,z.join(""))}else if(b===BSON.BSON_DATA_REGEXP&&!0===p){for(_=r;0!==t[_]&&_<t.length;)_++;if(_>=t.length)throw new Error("Bad BSON Document: illegal CString");for(F=t.toString("utf8",r,_),_=r=_+1;0!==t[_]&&_<t.length;)_++;if(_>=t.length)throw new Error("Bad BSON Document: illegal CString");B=t.toString("utf8",r,_),r=_+1,v[w]=new BSONRegExp(F,B)}else if(b===BSON.BSON_DATA_SYMBOL){if((x=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||x>t.length-r||0!==t[r+x-1])throw new Error("bad string length in bson");v[w]=new _Symbol(t.toString("utf8",r,r+x-1)),r+=x}else if(b===BSON.BSON_DATA_TIMESTAMP)S=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,k=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,v[w]=new Timestamp(S,k);else if(b===BSON.BSON_DATA_MIN_KEY)v[w]=new MinKey;else if(b===BSON.BSON_DATA_MAX_KEY)v[w]=new MaxKey;else if(b===BSON.BSON_DATA_CODE){if((x=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||x>t.length-r||0!==t[r+x-1])throw new Error("bad string length in bson");var $=t.toString("utf8",r,r+x-1);if(o)if(a){var U=s?l($):$;v[w]=isolateEvalWithHash(functionCache,U,$,v)}else v[w]=isolateEval($);else v[w]=new Code($);r+=x}else if(b===BSON.BSON_DATA_CODE_W_SCOPE){var H=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(H<13)throw new Error("code_w_scope total size shorter minimum expected length");if((x=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||x>t.length-r||0!==t[r+x-1])throw new Error("bad string length in bson");$=t.toString("utf8",r,r+x-1),T=r+=x,O=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;var V=e(t,T,n,!1);if(r+=O,H<8+O+x)throw new Error("code_w_scope total size is to short, truncating scope");if(H>8+O+x)throw new Error("code_w_scope total size is to long, clips outer document");o?(a?(U=s?l($):$,v[w]=isolateEvalWithHash(functionCache,U,$,v)):v[w]=isolateEval($),v[w].scope=V):v[w]=new Code($,V)}else{if(b!==BSON.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+b.toString(16)+' for fieldname "'+w+'", are you using the latest BSON parser');if((x=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||x>t.length-r||0!==t[r+x-1])throw new Error("bad string length in bson");var G=t.toString("utf8",r,r+x-1);r+=x;var q=utils.allocBuffer(12);t.copy(q,0,r,r+12),E=new ObjectID(q),r+=12;var W=G.split("."),Y=W.shift(),K=W.join(".");v[w]=new DBRef(K,E,Y)}}if(m!==r-y){if(i)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}return null!=v.$id&&(v=new DBRef(v.$ref,v.$id,v.$db)),v},isolateEvalWithHash=function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},isolateEval=function isolateEval(functionString){var value=null;return eval("value = "+functionString),value},BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1,BSON.BSON_DATA_STRING=2,BSON.BSON_DATA_OBJECT=3,BSON.BSON_DATA_ARRAY=4,BSON.BSON_DATA_BINARY=5,BSON.BSON_DATA_UNDEFINED=6,BSON.BSON_DATA_OID=7,BSON.BSON_DATA_BOOLEAN=8,BSON.BSON_DATA_DATE=9,BSON.BSON_DATA_NULL=10,BSON.BSON_DATA_REGEXP=11,BSON.BSON_DATA_DBPOINTER=12,BSON.BSON_DATA_CODE=13,BSON.BSON_DATA_SYMBOL=14,BSON.BSON_DATA_CODE_W_SCOPE=15,BSON.BSON_DATA_INT=16,BSON.BSON_DATA_TIMESTAMP=17,BSON.BSON_DATA_LONG=18,BSON.BSON_DATA_DECIMAL128=19,BSON.BSON_DATA_MIN_KEY=255,BSON.BSON_DATA_MAX_KEY=127,BSON.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON.BSON_BINARY_SUBTYPE_UUID=3,BSON.BSON_BINARY_SUBTYPE_MD5=4,BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128,BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long.fromNumber(-9007199254740992);module.exports=deserialize},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(106).writeIEEE754,o=r(24).Long,a=r(59),s=r(28).Binary,l=r(16).normalizedFunctionString,c=/\x00/,u=["$db","$ref","$id","$clusterTime"],p=function(e){return"object"===n(e)&&"[object Date]"===Object.prototype.toString.call(e)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},h=function(e,t,r,n,i){e[n++]=M.BSON_DATA_STRING;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");e[(n=n+o+1)-1]=0;var a=e.write(r,n+4,"utf8");return e[n+3]=a+1>>24&255,e[n+2]=a+1>>16&255,e[n+1]=a+1>>8&255,e[n]=a+1&255,n=n+4+a,e[n++]=0,n},d=function(e,t,r,n,a){if(Math.floor(r)===r&&r>=M.JS_INT_MIN&&r<=M.JS_INT_MAX)if(r>=M.BSON_INT32_MIN&&r<=M.BSON_INT32_MAX){e[n++]=M.BSON_DATA_INT;var s=a?e.write(t,n,"ascii"):e.write(t,n,"utf8");n+=s,e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255}else if(r>=M.JS_INT_MIN&&r<=M.JS_INT_MAX)e[n++]=M.BSON_DATA_NUMBER,n+=s=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,i(e,r,n,"little",52,8),n+=8;else{e[n++]=M.BSON_DATA_LONG,n+=s=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var l=o.fromNumber(r),c=l.getLowBits(),u=l.getHighBits();e[n++]=255&c,e[n++]=c>>8&255,e[n++]=c>>16&255,e[n++]=c>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255}else e[n++]=M.BSON_DATA_NUMBER,n+=s=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,i(e,r,n,"little",52,8),n+=8;return n},y=function(e,t,r,n,i){return e[n++]=M.BSON_DATA_NULL,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,n},m=function(e,t,r,n,i){return e[n++]=M.BSON_DATA_BOOLEAN,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,e[n++]=r?1:0,n},v=function(e,t,r,n,i){e[n++]=M.BSON_DATA_DATE,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var a=o.fromNumber(r.getTime()),s=a.getLowBits(),l=a.getHighBits();return e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&l,e[n++]=l>>8&255,e[n++]=l>>16&255,e[n++]=l>>24&255,n},g=function(e,t,r,n,i){if(e[n++]=M.BSON_DATA_REGEXP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,r.source&&null!=r.source.match(c))throw Error("value "+r.source+" must not contain null bytes");return n+=e.write(r.source,n,"utf8"),e[n++]=0,r.global&&(e[n++]=115),r.ignoreCase&&(e[n++]=105),r.multiline&&(e[n++]=109),e[n++]=0,n},b=function(e,t,r,n,i){if(e[n++]=M.BSON_DATA_REGEXP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,null!=r.pattern.match(c))throw Error("pattern "+r.pattern+" must not contain null bytes");return n+=e.write(r.pattern,n,"utf8"),e[n++]=0,n+=e.write(r.options.split("").sort().join(""),n,"utf8"),e[n++]=0,n},_=function(e,t,r,n,i){return null===r?e[n++]=M.BSON_DATA_NULL:"MinKey"===r._bsontype?e[n++]=M.BSON_DATA_MIN_KEY:e[n++]=M.BSON_DATA_MAX_KEY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,n},w=function(e,t,r,n,i){if(e[n++]=M.BSON_DATA_OID,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,"string"==typeof r.id)e.write(r.id,n,"binary");else{if(!r.id||!r.id.copy)throw new Error("object ["+JSON.stringify(r)+"] is not a valid ObjectId");r.id.copy(e,n,0,12)}return n+12},x=function(e,t,r,n,i){e[n++]=M.BSON_DATA_BINARY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=M.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,o),n+o},E=function(e,t,r,n,i,o,a,s,l,c){for(var u=0;u<c.length;u++)if(c[u]===r)throw new Error("cyclic dependency detected");c.push(r),e[n++]=Array.isArray(r)?M.BSON_DATA_ARRAY:M.BSON_DATA_OBJECT,n+=l?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var p=j(e,r,i,n,o+1,a,s,c);return c.pop(),p},S=function(e,t,r,n,i){return e[n++]=M.BSON_DATA_DECIMAL128,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,r.bytes.copy(e,n,0,16),n+16},k=function(e,t,r,n,i){e[n++]="Long"===r._bsontype?M.BSON_DATA_LONG:M.BSON_DATA_TIMESTAMP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.getLowBits(),a=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&a,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,n},T=function(e,t,r,n,i){return e[n++]=M.BSON_DATA_INT,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n},O=function(e,t,r,n,o){return e[n++]=M.BSON_DATA_NUMBER,n+=o?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,i(e,r,n,"little",52,8),n+8},A=function(e,t,r,n,i,o,a){e[n++]=M.BSON_DATA_CODE,n+=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var s=l(r),c=e.write(s,n+4,"utf8")+1;return e[n]=255&c,e[n+1]=c>>8&255,e[n+2]=c>>16&255,e[n+3]=c>>24&255,n=n+4+c-1,e[n++]=0,n},P=function(e,t,r,i,o,a,s,l,c){if(r.scope&&"object"===n(r.scope)){e[i++]=M.BSON_DATA_CODE_W_SCOPE;var u=c?e.write(t,i,"ascii"):e.write(t,i,"utf8");i+=u,e[i++]=0;var p=i,f="string"==typeof r.code?r.code:r.code.toString();i+=4;var h=e.write(f,i+4,"utf8")+1;e[i]=255&h,e[i+1]=h>>8&255,e[i+2]=h>>16&255,e[i+3]=h>>24&255,e[i+4+h-1]=0,i=i+h+4;var d=j(e,r.scope,o,i,a+1,s,l);i=d-1;var y=d-p;e[p++]=255&y,e[p++]=y>>8&255,e[p++]=y>>16&255,e[p++]=y>>24&255,e[i++]=0}else{e[i++]=M.BSON_DATA_CODE,i+=u=c?e.write(t,i,"ascii"):e.write(t,i,"utf8"),e[i++]=0,f=r.code.toString();var m=e.write(f,i+4,"utf8")+1;e[i]=255&m,e[i+1]=m>>8&255,e[i+2]=m>>16&255,e[i+3]=m>>24&255,i=i+4+m-1,e[i++]=0}return i},C=function(e,t,r,n,i){e[n++]=M.BSON_DATA_BINARY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.value(!0),a=r.position;return r.sub_type===s.SUBTYPE_BYTE_ARRAY&&(a+=4),e[n++]=255&a,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,e[n++]=r.sub_type,r.sub_type===s.SUBTYPE_BYTE_ARRAY&&(a-=4,e[n++]=255&a,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255),o.copy(e,n,0,r.position),n+r.position},N=function(e,t,r,n,i){e[n++]=M.BSON_DATA_SYMBOL,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=e.write(r.value,n+4,"utf8")+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n},R=function(e,t,r,n,i,o,a){e[n++]=M.BSON_DATA_OBJECT,n+=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var s,l=n,c=(s=null!=r.db?j(e,{$ref:r.namespace,$id:r.oid,$db:r.db},!1,n,i+1,o):j(e,{$ref:r.namespace,$id:r.oid},!1,n,i+1,o))-l;return e[l++]=255&c,e[l++]=c>>8&255,e[l++]=c>>16&255,e[l++]=c>>24&255,s},j=function(e,r,i,o,s,l,j,M){o=o||0,(M=M||[]).push(r);var I=o+4;if(Array.isArray(r))for(var D=0;D<r.length;D++){var L=""+D,F=r[D];if(F&&F.toBSON){if("function"!=typeof F.toBSON)throw new Error("toBSON is not a function");F=F.toBSON()}var B=n(F);if("string"===B)I=h(e,L,F,I,!0);else if("number"===B)I=d(e,L,F,I,!0);else{if("bigint"===B)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===B)I=m(e,L,F,I,!0);else if(F instanceof Date||p(F))I=v(e,L,F,I,!0);else if(void 0===F)I=y(e,L,0,I,!0);else if(null===F)I=y(e,L,0,I,!0);else if("ObjectID"===F._bsontype||"ObjectId"===F._bsontype)I=w(e,L,F,I,!0);else if(t.isBuffer(F))I=x(e,L,F,I,!0);else if(F instanceof RegExp||f(F))I=g(e,L,F,I,!0);else if("object"===B&&null==F._bsontype)I=E(e,L,F,I,i,s,l,j,!0,M);else if("object"===B&&"Decimal128"===F._bsontype)I=S(e,L,F,I,!0);else if("Long"===F._bsontype||"Timestamp"===F._bsontype)I=k(e,L,F,I,!0);else if("Double"===F._bsontype)I=O(e,L,F,I,!0);else if("function"==typeof F&&l)I=A(e,L,F,I,0,0,l);else if("Code"===F._bsontype)I=P(e,L,F,I,i,s,l,j,!0);else if("Binary"===F._bsontype)I=C(e,L,F,I,!0);else if("Symbol"===F._bsontype)I=N(e,L,F,I,!0);else if("DBRef"===F._bsontype)I=R(e,L,F,I,s,l,!0);else if("BSONRegExp"===F._bsontype)I=b(e,L,F,I,!0);else if("Int32"===F._bsontype)I=T(e,L,F,I,!0);else if("MinKey"===F._bsontype||"MaxKey"===F._bsontype)I=_(e,L,F,I,!0);else if(void 0!==F._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+F._bsontype)}}else if(r instanceof a)for(var z=r.entries(),$=!1;!$;){var U=z.next();if(!($=U.done)){if(L=U.value[0],B=n(F=U.value[1]),"string"==typeof L&&-1===u.indexOf(L)){if(null!=L.match(c))throw Error("key "+L+" must not contain null bytes");if(i){if("$"===L[0])throw Error("key "+L+" must not start with '$'");if(~L.indexOf("."))throw Error("key "+L+" must not contain '.'")}}if("string"===B)I=h(e,L,F,I);else if("number"===B)I=d(e,L,F,I);else{if("bigint"===B)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===B)I=m(e,L,F,I);else if(F instanceof Date||p(F))I=v(e,L,F,I);else if(null===F||void 0===F&&!1===j)I=y(e,L,0,I);else if("ObjectID"===F._bsontype||"ObjectId"===F._bsontype)I=w(e,L,F,I);else if(t.isBuffer(F))I=x(e,L,F,I);else if(F instanceof RegExp||f(F))I=g(e,L,F,I);else if("object"===B&&null==F._bsontype)I=E(e,L,F,I,i,s,l,j,!1,M);else if("object"===B&&"Decimal128"===F._bsontype)I=S(e,L,F,I);else if("Long"===F._bsontype||"Timestamp"===F._bsontype)I=k(e,L,F,I);else if("Double"===F._bsontype)I=O(e,L,F,I);else if("Code"===F._bsontype)I=P(e,L,F,I,i,s,l,j);else if("function"==typeof F&&l)I=A(e,L,F,I,0,0,l);else if("Binary"===F._bsontype)I=C(e,L,F,I);else if("Symbol"===F._bsontype)I=N(e,L,F,I);else if("DBRef"===F._bsontype)I=R(e,L,F,I,s,l);else if("BSONRegExp"===F._bsontype)I=b(e,L,F,I);else if("Int32"===F._bsontype)I=T(e,L,F,I);else if("MinKey"===F._bsontype||"MaxKey"===F._bsontype)I=_(e,L,F,I);else if(void 0!==F._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+F._bsontype)}}}else{if(r.toBSON){if("function"!=typeof r.toBSON)throw new Error("toBSON is not a function");if(null!=(r=r.toBSON())&&"object"!==n(r))throw new Error("toBSON function did not return an object")}for(L in r){if((F=r[L])&&F.toBSON){if("function"!=typeof F.toBSON)throw new Error("toBSON is not a function");F=F.toBSON()}if(B=n(F),"string"==typeof L&&-1===u.indexOf(L)){if(null!=L.match(c))throw Error("key "+L+" must not contain null bytes");if(i){if("$"===L[0])throw Error("key "+L+" must not start with '$'");if(~L.indexOf("."))throw Error("key "+L+" must not contain '.'")}}if("string"===B)I=h(e,L,F,I);else if("number"===B)I=d(e,L,F,I);else{if("bigint"===B)throw new TypeError("Unsupported type BigInt, please use Decimal128");if("boolean"===B)I=m(e,L,F,I);else if(F instanceof Date||p(F))I=v(e,L,F,I);else if(void 0===F)!1===j&&(I=y(e,L,0,I));else if(null===F)I=y(e,L,0,I);else if("ObjectID"===F._bsontype||"ObjectId"===F._bsontype)I=w(e,L,F,I);else if(t.isBuffer(F))I=x(e,L,F,I);else if(F instanceof RegExp||f(F))I=g(e,L,F,I);else if("object"===B&&null==F._bsontype)I=E(e,L,F,I,i,s,l,j,!1,M);else if("object"===B&&"Decimal128"===F._bsontype)I=S(e,L,F,I);else if("Long"===F._bsontype||"Timestamp"===F._bsontype)I=k(e,L,F,I);else if("Double"===F._bsontype)I=O(e,L,F,I);else if("Code"===F._bsontype)I=P(e,L,F,I,i,s,l,j);else if("function"==typeof F&&l)I=A(e,L,F,I,0,0,l);else if("Binary"===F._bsontype)I=C(e,L,F,I);else if("Symbol"===F._bsontype)I=N(e,L,F,I);else if("DBRef"===F._bsontype)I=R(e,L,F,I,s,l);else if("BSONRegExp"===F._bsontype)I=b(e,L,F,I);else if("Int32"===F._bsontype)I=T(e,L,F,I);else if("MinKey"===F._bsontype||"MaxKey"===F._bsontype)I=_(e,L,F,I);else if(void 0!==F._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+F._bsontype)}}}M.pop(),e[I++]=0;var H=I-o;return e[o++]=255&H,e[o++]=H>>8&255,e[o++]=H>>16&255,e[o++]=H>>24&255,I},M={BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128,BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648};M.BSON_INT64_MAX=Math.pow(2,63)-1,M.BSON_INT64_MIN=-Math.pow(2,63),M.JS_INT_MAX=9007199254740992,M.JS_INT_MIN=-9007199254740992,e.exports=j}).call(this,r(2).Buffer)},function(e,t){t.readIEEE754=function(e,t,r,n,i){var o,a,s="big"===r,l=8*i-n-1,c=(1<<l)-1,u=c>>1,p=-7,f=s?0:i-1,h=s?1:-1,d=e[t+f];for(f+=h,o=d&(1<<-p)-1,d>>=-p,p+=l;p>0;o=256*o+e[t+f],f+=h,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=n;p>0;a=256*a+e[t+f],f+=h,p-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},t.writeIEEE754=function(e,t,r,n,i,o){var a,s,l,c="big"===n,u=8*o-i-1,p=(1<<u)-1,f=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=c?o-1:0,y=c?-1:1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=p?(s=0,a=p):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=y,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+d]=255&a,d+=y,a/=256,u-=8);e[r+d-y]|=128*m}},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(24).Long,o=r(39).Double,a=r(40).Timestamp,s=r(41).ObjectID,l=r(43).Symbol,c=r(42).BSONRegExp,u=r(44).Code,p=r(45),f=r(46).MinKey,h=r(47).MaxKey,d=r(48).DBRef,y=r(28).Binary,m=r(16).normalizedFunctionString,v=function(e,t,r){var n=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)n+=g(i.toString(),e[i],t,!0,r);else for(var o in e.toBSON&&(e=e.toBSON()),e)n+=g(o,e[o],t,!1,r);return n};function g(e,r,g,_,w){switch(r&&r.toBSON&&(r=r.toBSON()),n(r)){case"string":return 1+t.byteLength(e,"utf8")+1+4+t.byteLength(r,"utf8")+1;case"number":return Math.floor(r)===r&&r>=b.JS_INT_MIN&&r<=b.JS_INT_MAX&&r>=b.BSON_INT32_MIN&&r<=b.BSON_INT32_MAX?(null!=e?t.byteLength(e,"utf8")+1:0)+5:(null!=e?t.byteLength(e,"utf8")+1:0)+9;case"undefined":return _||!w?(null!=e?t.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?t.byteLength(e,"utf8")+1:0)+2;case"object":if(null==r||r instanceof f||r instanceof h||"MinKey"===r._bsontype||"MaxKey"===r._bsontype)return(null!=e?t.byteLength(e,"utf8")+1:0)+1;if(r instanceof s||"ObjectID"===r._bsontype||"ObjectId"===r._bsontype)return(null!=e?t.byteLength(e,"utf8")+1:0)+13;if(r instanceof Date||"object"===n(E=r)&&"[object Date]"===Object.prototype.toString.call(E))return(null!=e?t.byteLength(e,"utf8")+1:0)+9;if(void 0!==t&&t.isBuffer(r))return(null!=e?t.byteLength(e,"utf8")+1:0)+6+r.length;if(r instanceof i||r instanceof o||r instanceof a||"Long"===r._bsontype||"Double"===r._bsontype||"Timestamp"===r._bsontype)return(null!=e?t.byteLength(e,"utf8")+1:0)+9;if(r instanceof p||"Decimal128"===r._bsontype)return(null!=e?t.byteLength(e,"utf8")+1:0)+17;if(r instanceof u||"Code"===r._bsontype)return null!=r.scope&&Object.keys(r.scope).length>0?(null!=e?t.byteLength(e,"utf8")+1:0)+1+4+4+t.byteLength(r.code.toString(),"utf8")+1+v(r.scope,g,w):(null!=e?t.byteLength(e,"utf8")+1:0)+1+4+t.byteLength(r.code.toString(),"utf8")+1;if(r instanceof y||"Binary"===r._bsontype)return r.sub_type===y.SUBTYPE_BYTE_ARRAY?(null!=e?t.byteLength(e,"utf8")+1:0)+(r.position+1+4+1+4):(null!=e?t.byteLength(e,"utf8")+1:0)+(r.position+1+4+1);if(r instanceof l||"Symbol"===r._bsontype)return(null!=e?t.byteLength(e,"utf8")+1:0)+t.byteLength(r.value,"utf8")+4+1+1;if(r instanceof d||"DBRef"===r._bsontype){var x={$ref:r.namespace,$id:r.oid};return null!=r.db&&(x.$db=r.db),(null!=e?t.byteLength(e,"utf8")+1:0)+1+v(x,g,w)}return r instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(r)?(null!=e?t.byteLength(e,"utf8")+1:0)+1+t.byteLength(r.source,"utf8")+1+(r.global?1:0)+(r.ignoreCase?1:0)+(r.multiline?1:0)+1:r instanceof c||"BSONRegExp"===r._bsontype?(null!=e?t.byteLength(e,"utf8")+1:0)+1+t.byteLength(r.pattern,"utf8")+1+t.byteLength(r.options,"utf8")+1:(null!=e?t.byteLength(e,"utf8")+1:0)+v(r,g,w)+1;case"function":if(r instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(r)||"[object RegExp]"===String.call(r))return(null!=e?t.byteLength(e,"utf8")+1:0)+1+t.byteLength(r.source,"utf8")+1+(r.global?1:0)+(r.ignoreCase?1:0)+(r.multiline?1:0)+1;if(g&&null!=r.scope&&Object.keys(r.scope).length>0)return(null!=e?t.byteLength(e,"utf8")+1:0)+1+4+4+t.byteLength(m(r),"utf8")+1+v(r.scope,g,w);if(g)return(null!=e?t.byteLength(e,"utf8")+1:0)+1+4+t.byteLength(m(r),"utf8")+1}var E;return 0}var b={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992};e.exports=v}).call(this,r(2).Buffer)},function(e,t,r){"use strict";e.exports=r(38).Decimal128},function(e,t,r){"use strict";var n=r(38).ObjectID;Object.defineProperty(n.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}),e.exports=n},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(112).ctor("require","modify","init","default","ignore");e.exports=function(){this.strictMode=void 0,this.selected=void 0,this.shardval=void 0,this.saveError=void 0,this.validationError=void 0,this.adhocPaths=void 0,this.removing=void 0,this.inserting=void 0,this.saving=void 0,this.version=void 0,this.getters={},this._id=void 0,this.populate=void 0,this.populated=void 0,this.wasPopulated=!1,this.scope=void 0,this.activePaths=new n,this.pathsToScopes={},this.cachedRequired={},this.session=null,this.$setCalled=new Set,this.ownerDocument=void 0,this.fullPath=void 0}},function(e,t,r){"use strict";var n=r(1),i=e.exports=function(){};i.ctor=function(){var e=n.args(arguments),t=function(){i.apply(this,arguments),this.paths={},this.states={},this.stateNames=e;for(var t,r=e.length;r--;)t=e[r],this.states[t]={}};return t.prototype=new i,e.forEach((function(e){t.prototype[e]=function(t){this._changeState(t,e)}})),t},i.prototype._changeState=function(e,t){var r=this.states[this.paths[e]];r&&delete r[e],this.paths[e]=t,this.states[t][e]=!0},i.prototype.clear=function(e){for(var t,r=Object.keys(this.states[e]),n=r.length;n--;)t=r[n],delete this.states[e][t],delete this.paths[t]},i.prototype.some=function(){var e=this,t=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(t,(function(t){return Object.keys(e.states[t]).length}))},i.prototype._iter=function(e){return function(){var t=arguments.length,r=n.args(arguments,0,t-1),i=arguments[t-1];r.length||(r=this.stateNames);var o=this,a=r.reduce((function(e,t){return e.concat(Object.keys(o.states[t]))}),[]);return a[e]((function(e,t,r){return i(e,t,r)}))}},i.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)},i.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=1e3,i=6e4,o=60*i,a=24*o;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var l=r(e);if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===l&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=a?s(e,t,a,"day"):t>=o?s(e,t,o,"hour"):t>=i?s(e,t,i,"minute"):t>=n?s(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=o?Math.round(e/o)+"h":t>=i?Math.round(e/i)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(115),o=["__proto__","constructor","prototype"];function a(e){return e}t.get=function(e,r,n,o){var s;"function"==typeof n&&(n.length<2?(o=n,n=void 0):(s=n,n=void 0)),o||(o=a);var l="string"==typeof e?i(e):e;if(!Array.isArray(l))throw new TypeError("Invalid `path`. Must be either string or array");for(var c,u=r,p=0;p<l.length;++p){if(c=l[p],Array.isArray(u)&&!/^\d+$/.test(c)){var f=l.slice(p);return[].concat(u).map((function(e){return e?t.get(f,e,n||s,o):o(void 0)}))}if(s)u=s(u,c);else{var h=n&&u[n]?u[n]:u;u=h instanceof Map?h.get(c):h[c]}if(!u)return o(u)}return o(u)},t.has=function(e,t){var r="string"==typeof e?i(e):e;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=r.length,a=t,s=0;s<o;++s){if(null==a||"object"!==n(a)||!(r[s]in a))return!1;a=a[r[s]]}return!0},t.unset=function(e,t){var r="string"==typeof e?i(e):e;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var a=r.length,s=t,l=0;l<a;++l){if(null==s||"object"!==n(s)||!(r[l]in s))return!1;if(-1!==o.indexOf(r[l]))return!1;if(l===a-1)return delete s[r[l]],!0;s=s instanceof Map?s.get(r[l]):s[r[l]]}return!0},t.set=function(e,r,n,s,l,c){var u;"function"==typeof s&&(s.length<2?(l=s,s=void 0):(u=s,s=void 0)),l||(l=a);var p="string"==typeof e?i(e):e;if(!Array.isArray(p))throw new TypeError("Invalid `path`. Must be either string or array");if(null!=n){for(var f=0;f<p.length;++f)if(-1!==o.indexOf(p[f]))return;for(var h,d=c||/\$/.test(e)&&!1!==c,y=n,m=(f=0,p.length-1);f<m;++f)if("$"!=(h=p[f])){if(Array.isArray(y)&&!/^\d+$/.test(h)){var v=p.slice(f);if(!d&&Array.isArray(r))for(var g=0;g<y.length&&g<r.length;++g)t.set(v,r[g],y[g],s||u,l,d);else for(g=0;g<y.length;++g)t.set(v,r,y[g],s||u,l,d);return}if(u)y=u(y,h);else{var b=s&&y[s]?y[s]:y;y=b instanceof Map?b.get(h):b[h]}if(!y)return}else if(f==m-1)break;if(h=p[m],s&&y[s]&&(y=y[s]),Array.isArray(y)&&!/^\d+$/.test(h))if(!d&&Array.isArray(r))!function e(t,r,n,i,o,a){for(var s,l=0;l<t.length&&l<r.length;++l)s=t[l],Array.isArray(s)&&Array.isArray(r[l])?e(s,r[l],n,i,o,a):s&&(i?i(s,n,a(r[l])):(s[o]&&(s=s[o]),s[n]=a(r[l])))}(y,r,h,u,s,l);else for(g=0;g<y.length;++g){var _=y[g];_&&(u?u(_,h,l(r)):(_[s]&&(_=_[s]),_[h]=l(r)))}else u?u(y,h,l(r)):y instanceof Map?y.set(h,l(r)):y[h]=l(r)}}},function(e,t,r){"use strict";e.exports=function(e){for(var t=[],r="",n="DEFAULT",i=0;i<e.length;++i)"IN_SQUARE_BRACKETS"!==n||/\d/.test(e[i])||"]"===e[i]||(n="DEFAULT",r=t[t.length-1]+"["+r,t.splice(t.length-1,1)),"["===e[i]?("IMMEDIATELY_AFTER_SQUARE_BRACKETS"!==n&&(t.push(r),r=""),n="IN_SQUARE_BRACKETS"):"]"===e[i]?"IN_SQUARE_BRACKETS"===n?(n="IMMEDIATELY_AFTER_SQUARE_BRACKETS",t.push(r),r=""):(n="DEFAULT",r+=e[i]):"."===e[i]?("IMMEDIATELY_AFTER_SQUARE_BRACKETS"!==n&&(t.push(r),r=""),n="DEFAULT"):r+=e[i];return"IMMEDIATELY_AFTER_SQUARE_BRACKETS"!==n&&t.push(r),t}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(29);e.exports=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._docs={},this._childDocs=[],null!=t&&(t=i(t),Object.assign(this,t),"object"===n(t.subPopulate)&&(this.populate=t.subPopulate),null!=t.perDocumentLimit&&null!=t.limit))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+t.path+"`.")}},function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in r=Object(arguments[l]))i.call(r,c)&&(s[c]=r[c]);if(n){a=n(r);for(var u=0;u<a.length;u++)o.call(r,a[u])&&(s[a[u]]=r[a[u]])}}return s}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(62),o=r(23),a=r(4),s=r(68),l=r(121)("mquery");function c(e,t){if(!(this instanceof c))return new c(e,t);var r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?s.clone(r._conditions):{},this._fields=r._fields?s.clone(r._fields):void 0,this._update=r._update?s.clone(r._update):void 0,this._path=r._path||void 0,this._distinct=r._distinct||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,t&&this.setOptions(t),e&&(e.find&&e.remove&&e.update?this.collection(e):this.find(e))}var u="$geoWithin";Object.defineProperty(c,"use$geoWithin",{get:function(){return"$geoWithin"==u},set:function(e){u=!0===e?"$geoWithin":"$within"}}),c.prototype.toConstructor=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);c.call(this,t,r)}s.inherits(e,c);var t=e.prototype;return t.options={},t.setOptions(this.options),t.op=this.op,t._conditions=s.clone(this._conditions),t._fields=s.clone(this._fields),t._update=s.clone(this._update),t._path=this._path,t._distinct=this._distinct,t._collection=this._collection,t._traceFunction=this._traceFunction,e},c.prototype.setOptions=function(e){if(!e||!s.isObject(e))return this;for(var t,r=s.keys(e),n=0;n<r.length;++n)if("function"==typeof this[t=r[n]]){var i=s.isArray(e[t])?e[t]:[e[t]];this[t].apply(this,i)}else this.options[t]=e[t];return this},c.prototype.collection=function(e){return this._collection=new c.Collection(e),this},c.prototype.collation=function(e){return this.options.collation=e,this},c.prototype.$where=function(e){return this._conditions.$where=e,this},c.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");var e=n(arguments[0]);if("string"==e)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"==e&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")},c.prototype.equals=function(e){this._ensurePath("equals");var t=this._path;return this._conditions[t]=e,this},c.prototype.eq=function(e){this._ensurePath("eq");var t=this._path;return this._conditions[t]=e,this},c.prototype.or=function(e){var t=this._conditions.$or||(this._conditions.$or=[]);return s.isArray(e)||(e=[e]),t.push.apply(t,e),this},c.prototype.nor=function(e){var t=this._conditions.$nor||(this._conditions.$nor=[]);return s.isArray(e)||(e=[e]),t.push.apply(t,e),this},c.prototype.and=function(e){var t=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach((function(e){c.prototype[e]=function(){var t,r;return 1===arguments.length?(this._ensurePath(e),r=arguments[0],t=this._path):(r=arguments[1],t=arguments[0]),(null===this._conditions[t]||"object"===n(this._conditions[t])?this._conditions[t]:this._conditions[t]={})["$"+e]=r,this}})),c.prototype.mod=function(){var e,t;return 1===arguments.length?(this._ensurePath("mod"),e=arguments[0],t=this._path):2!==arguments.length||s.isArray(arguments[1])?3===arguments.length?(e=i(arguments,1),t=arguments[0]):(e=arguments[1],t=arguments[0]):(this._ensurePath("mod"),e=i(arguments),t=this._path),(this._conditions[t]||(this._conditions[t]={})).$mod=e,this},c.prototype.exists=function(){var e,t;return 0===arguments.length?(this._ensurePath("exists"),e=this._path,t=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),e=this._path,t=arguments[0]):(e=arguments[0],t=!0):2===arguments.length&&(e=arguments[0],t=arguments[1]),(this._conditions[e]||(this._conditions[e]={})).$exists=t,this},c.prototype.elemMatch=function(){if(null==arguments[0])throw new TypeError("Invalid argument");var e,t,r;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),t=this._path,e=arguments[0];else if(s.isObject(arguments[0]))this._ensurePath("elemMatch"),t=this._path,r=arguments[0];else if("function"==typeof arguments[1])t=arguments[0],e=arguments[1];else{if(!arguments[1]||!s.isObject(arguments[1]))throw new TypeError("Invalid argument");t=arguments[0],r=arguments[1]}return e&&(e(r=new c),r=r._conditions),(this._conditions[t]||(this._conditions[t]={})).$elemMatch=r,this},c.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=u,0===arguments.length)return this;if(2===arguments.length)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);var e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")},c.prototype.box=function(){var e,t;if(3===arguments.length)e=arguments[0],t=[arguments[1],arguments[2]];else{if(2!==arguments.length)throw new TypeError("Invalid argument");this._ensurePath("box"),e=this._path,t=[arguments[0],arguments[1]]}return(this._conditions[e]||(this._conditions[e]={}))[this._geoComparison||u]={$box:t},this},c.prototype.polygon=function(){var e,t;return"string"==typeof arguments[0]?(t=arguments[0],e=i(arguments,1)):(this._ensurePath("polygon"),t=this._path,e=i(arguments)),(this._conditions[t]||(this._conditions[t]={}))[this._geoComparison||u]={$polygon:e},this},c.prototype.circle=function(){var e,t;if(1===arguments.length)this._ensurePath("circle"),e=this._path,t=arguments[0];else{if(2!==arguments.length)throw new TypeError("Invalid argument");e=arguments[0],t=arguments[1]}if(!("radius"in t)||!t.center)throw new Error("center and radius are required");var r=this._conditions[e]||(this._conditions[e]={}),n=t.spherical?"$centerSphere":"$center",i=this._geoComparison||u;return r[i]={},r[i][n]=[t.center,t.radius],"unique"in t&&(r[i].$uniqueDocs=!!t.unique),this},c.prototype.near=function(){var e,t;if(this._geoComparison="$near",0===arguments.length)return this;if(1===arguments.length)this._ensurePath("near"),e=this._path,t=arguments[0];else{if(2!==arguments.length)throw new TypeError("Invalid argument");e=arguments[0],t=arguments[1]}if(!t.center)throw new Error("center is required");var r=this._conditions[e]||(this._conditions[e]={}),n=t.spherical?"$nearSphere":"$near";if(Array.isArray(t.center)){r[n]=t.center;var i="maxDistance"in t?t.maxDistance:null;null!=i&&(r.$maxDistance=i),null!=t.minDistance&&(r.$minDistance=t.minDistance)}else{if("Point"!=t.center.type||!Array.isArray(t.center.coordinates))throw new Error(a.format("Invalid GeoJSON specified for %s",n));r[n]={$geometry:t.center},"maxDistance"in t&&(r[n].$maxDistance=t.maxDistance),"minDistance"in t&&(r[n].$minDistance=t.minDistance)}return this},c.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",0===arguments.length)return this;var e=arguments[0];if(null!=e&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")},c.prototype.geometry=function(){if("$within"!=this._geoComparison&&"$geoWithin"!=this._geoComparison&&"$near"!=this._geoComparison&&"$geoIntersects"!=this._geoComparison)throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");var e,t;if(1!==arguments.length)throw new TypeError("Invalid argument");if(this._ensurePath("geometry"),t=this._path,!(e=arguments[0]).type||!Array.isArray(e.coordinates))throw new TypeError("Invalid argument");return(this._conditions[t]||(this._conditions[t]={}))[this._geoComparison]={$geometry:e},this},c.prototype.select=function(){var e=arguments[0];if(!e)return this;if(1!==arguments.length)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");var t,r,i=this._fields||(this._fields={}),o=n(e);if(("string"==o||s.isArgumentsObject(e))&&"number"==typeof e.length||Array.isArray(e)){for("string"==o&&(e=e.split(/\s+/)),t=0,r=e.length;t<r;++t){var a=e[t];if(a){var l="-"==a[0]?0:1;0===l&&(a=a.substring(1)),i[a]=l}}return this}if(s.isObject(e)){var c=s.keys(e);for(t=0;t<c.length;++t)i[c[t]]=e[c[t]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")},c.prototype.slice=function(){if(0===arguments.length)return this;var e,t;if(this._validate("slice"),1===arguments.length){var r=arguments[0];if("object"===n(r)&&!Array.isArray(r)){for(var o=Object.keys(r),a=o.length,s=0;s<a;++s)this.slice(o[s],r[o[s]]);return this}this._ensurePath("slice"),e=this._path,t=arguments[0]}else 2===arguments.length?"number"==typeof arguments[0]?(this._ensurePath("slice"),e=this._path,t=i(arguments)):(e=arguments[0],t=arguments[1]):3===arguments.length&&(e=arguments[0],t=i(arguments,1));return(this._fields||(this._fields={}))[e]={$slice:t},this},c.prototype.sort=function(e){if(!e)return this;var t,r,i;this._validate("sort");var o=n(e);if(Array.isArray(e)){for(r=e.length,t=0;t<e.length;++t){if(!Array.isArray(e[t]))throw new Error("Invalid sort() argument, must be array of arrays");h(this.options,e[t][0],e[t][1])}return this}if(1===arguments.length&&"string"==o){for(r=(e=e.split(/\s+/)).length,t=0;t<r;++t)if(i=e[t]){var a="-"==i[0]?-1:1;-1===a&&(i=i.substring(1)),f(this.options,i,a)}return this}if(s.isObject(e)){var l=s.keys(e);for(t=0;t<l.length;++t)i=l[t],f(this.options,i,e[i]);return this}if("undefined"!=typeof Map&&e instanceof Map)return function(e,t){if(e.sort=e.sort||new Map,!(e.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");t.forEach((function(t,r){var n=String(t||1).toLowerCase();if(!(n=p[n]))throw new TypeError("Invalid sort value: < "+r+": "+t+" >");e.sort.set(r,n)}))}(this.options,e),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var p={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function f(e,t,r){if(Array.isArray(e.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");var n;if(r&&r.$meta)(n=e.sort||(e.sort={}))[t]={$meta:r.$meta};else{n=e.sort||(e.sort={});var i=String(r||1).toLowerCase();if(!(i=p[i]))throw new TypeError("Invalid sort value: { "+t+": "+r+" }");n[t]=i}}function h(e,t,r){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");var n=String(r||1).toLowerCase();if(!(n=p[n]))throw new TypeError("Invalid sort value: [ "+t+", "+r+" ]");e.sort.push([t,n])}function d(e,t,r,n,i,o,a){return e.op=t,c.canMerge(r)&&e.merge(r),n&&e._mergeUpdate(n),s.isObject(i)&&e.setOptions(i),o||a?!e._update||!e.options.overwrite&&0===s.keys(e._update).length?(a&&s.soon(a.bind(null,null,0)),e):(i=e._optionsForExec(),a||(i.safe=!1),r=e._conditions,n=e._updateForExec(),l("update",e._collection.collectionName,r,n,i),a=e._wrapCallback(t,a,{conditions:r,doc:n,options:i}),e._collection[t](r,n,i,s.tick(a)),e):e}["limit","skip","maxScan","batchSize","comment"].forEach((function(e){c.prototype[e]=function(t){return this._validate(e),this.options[e]=t,this}})),c.prototype.maxTime=c.prototype.maxTimeMS=function(e){return this._validate("maxTime"),this.options.maxTimeMS=e,this},c.prototype.snapshot=function(){return this._validate("snapshot"),this.options.snapshot=!arguments.length||!!arguments[0],this},c.prototype.hint=function(){if(0===arguments.length)return this;this._validate("hint");var e=arguments[0];if(s.isObject(e)){var t=this.options.hint||(this.options.hint={});for(var r in e)t[r]=e[r];return this}if("string"==typeof e)return this.options.hint=e,this;throw new TypeError("Invalid hint. "+e)},c.prototype.j=function(e){return this.options.j=e,this},c.prototype.slaveOk=function(e){return this.options.slaveOk=!arguments.length||!!e,this},c.prototype.read=c.prototype.setReadPreference=function(e){return arguments.length>1&&!c.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),c.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=s.readPref(e),this},c.prototype.readConcern=c.prototype.r=function(e){return this.options.readConcern=s.readConcern(e),this},c.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=!arguments.length||!!arguments[0],this},c.prototype.writeConcern=c.prototype.w=function(e){return"object"===n(e)?(void 0!==e.j&&(this.options.j=e.j),void 0!==e.w&&(this.options.w=e.w),void 0!==e.wtimeout&&(this.options.wtimeout=e.wtimeout)):this.options.w="m"===e?"majority":e,this},c.prototype.wtimeout=c.prototype.wTimeout=function(e){return this.options.wtimeout=e,this},c.prototype.merge=function(e){if(!e)return this;if(!c.canMerge(e))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return e instanceof c?(e._conditions&&s.merge(this._conditions,e._conditions),e._fields&&(this._fields||(this._fields={}),s.merge(this._fields,e._fields)),e.options&&(this.options||(this.options={}),s.merge(this.options,e.options)),e._update&&(this._update||(this._update={}),s.mergeClone(this._update,e._update)),e._distinct&&(this._distinct=e._distinct),this):(s.merge(this._conditions,e),this)},c.prototype.find=function(e,t){if(this.op="find","function"==typeof e?(t=e,e=void 0):c.canMerge(e)&&this.merge(e),!t)return this;var r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),l("find",this._collection.collectionName,r,n),t=this._wrapCallback("find",t,{conditions:r,options:n}),this._collection.find(r,n,s.tick(t)),this},c.prototype.cursor=function(e){if(this.op){if("find"!==this.op)throw new TypeError(".cursor only support .find method")}else this.find(e);var t=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),l("findCursor",this._collection.collectionName,t,r),this._collection.findCursor(t,r)},c.prototype.findOne=function(e,t){if(this.op="findOne","function"==typeof e?(t=e,e=void 0):c.canMerge(e)&&this.merge(e),!t)return this;var r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),l("findOne",this._collection.collectionName,r,n),t=this._wrapCallback("findOne",t,{conditions:r,options:n}),this._collection.findOne(r,n,s.tick(t)),this},c.prototype.count=function(e,t){if(this.op="count",this._validate(),"function"==typeof e?(t=e,e=void 0):c.canMerge(e)&&this.merge(e),!t)return this;var r=this._conditions,n=this._optionsForExec();return l("count",this._collection.collectionName,r,n),t=this._wrapCallback("count",t,{conditions:r,options:n}),this._collection.count(r,n,s.tick(t)),this},c.prototype.distinct=function(e,t,r){if(this.op="distinct",this._validate(),!r){switch(n(t)){case"function":r=t,"string"==typeof e&&(t=e,e=void 0);break;case"undefined":case"string":break;default:throw new TypeError("Invalid `field` argument. Must be string or function")}switch(n(e)){case"function":r=e,e=t=void 0;break;case"string":t=e,e=void 0}}if("string"==typeof t&&(this._distinct=t),c.canMerge(e)&&this.merge(e),!r)return this;if(!this._distinct)throw new Error("No value for `distinct` has been declared");var i=this._conditions,o=this._optionsForExec();return l("distinct",this._collection.collectionName,i,o),r=this._wrapCallback("distinct",r,{conditions:i,options:o}),this._collection.distinct(this._distinct,i,o,s.tick(r)),this},c.prototype.update=function(e,t,r,i){var o;switch(arguments.length){case 3:"function"==typeof r&&(i=r,r=void 0);break;case 2:"function"==typeof t&&(i=t,t=e,e=void 0);break;case 1:switch(n(e)){case"function":i=e,e=r=t=void 0;break;case"boolean":o=e,e=void 0;break;default:t=e,e=r=void 0}}return d(this,"update",e,t,r,o,i)},c.prototype.updateMany=function(e,t,r,i){var o;switch(arguments.length){case 3:"function"==typeof r&&(i=r,r=void 0);break;case 2:"function"==typeof t&&(i=t,t=e,e=void 0);break;case 1:switch(n(e)){case"function":i=e,e=r=t=void 0;break;case"boolean":o=e,e=void 0;break;default:t=e,e=r=void 0}}return d(this,"updateMany",e,t,r,o,i)},c.prototype.updateOne=function(e,t,r,i){var o;switch(arguments.length){case 3:"function"==typeof r&&(i=r,r=void 0);break;case 2:"function"==typeof t&&(i=t,t=e,e=void 0);break;case 1:switch(n(e)){case"function":i=e,e=r=t=void 0;break;case"boolean":o=e,e=void 0;break;default:t=e,e=r=void 0}}return d(this,"updateOne",e,t,r,o,i)},c.prototype.replaceOne=function(e,t,r,i){var o;switch(arguments.length){case 3:"function"==typeof r&&(i=r,r=void 0);break;case 2:"function"==typeof t&&(i=t,t=e,e=void 0);break;case 1:switch(n(e)){case"function":i=e,e=r=t=void 0;break;case"boolean":o=e,e=void 0;break;default:t=e,e=r=void 0}}return this.setOptions({overwrite:!0}),d(this,"replaceOne",e,t,r,o,i)},c.prototype.remove=function(e,t){var r;if(this.op="remove","function"==typeof e?(t=e,e=void 0):c.canMerge(e)?this.merge(e):!0===e&&(r=e,e=void 0),!r&&!t)return this;var n=this._optionsForExec();t||(n.safe=!1);var i=this._conditions;return l("remove",this._collection.collectionName,i,n),t=this._wrapCallback("remove",t,{conditions:i,options:n}),this._collection.remove(i,n,s.tick(t)),this},c.prototype.deleteOne=function(e,t){var r;if(this.op="deleteOne","function"==typeof e?(t=e,e=void 0):c.canMerge(e)?this.merge(e):!0===e&&(r=e,e=void 0),!r&&!t)return this;var n=this._optionsForExec();t||(n.safe=!1),delete n.justOne;var i=this._conditions;return l("deleteOne",this._collection.collectionName,i,n),t=this._wrapCallback("deleteOne",t,{conditions:i,options:n}),this._collection.deleteOne(i,n,s.tick(t)),this},c.prototype.deleteMany=function(e,t){var r;if(this.op="deleteMany","function"==typeof e?(t=e,e=void 0):c.canMerge(e)?this.merge(e):!0===e&&(r=e,e=void 0),!r&&!t)return this;var n=this._optionsForExec();t||(n.safe=!1),delete n.justOne;var i=this._conditions;return l("deleteOne",this._collection.collectionName,i,n),t=this._wrapCallback("deleteOne",t,{conditions:i,options:n}),this._collection.deleteMany(i,n,s.tick(t)),this},c.prototype.findOneAndUpdate=function(e,t,r,n){switch(this.op="findOneAndUpdate",this._validate(),arguments.length){case 3:"function"==typeof r&&(n=r,r={});break;case 2:"function"==typeof t&&(n=t,t=e,e=void 0),r=void 0;break;case 1:"function"==typeof e?(n=e,e=r=t=void 0):(t=e,e=r=void 0)}return c.canMerge(e)&&this.merge(e),t&&this._mergeUpdate(t),r&&this.setOptions(r),n?this._findAndModify("update",n):this},c.prototype.findOneAndRemove=c.prototype.findOneAndDelete=function(e,t,r){return this.op="findOneAndRemove",this._validate(),"function"==typeof t?(r=t,t=void 0):"function"==typeof e&&(r=e,e=void 0),c.canMerge(e)&&this.merge(e),t&&this.setOptions(t),r?this._findAndModify("remove",r):this},c.prototype._findAndModify=function(e,t){o.equal("function",n(t));var r,i=this._optionsForExec();if("remove"==e)i.remove=!0;else if("new"in i||(i.new=!0),"upsert"in i||(i.upsert=!1),!(r=this._updateForExec())){if(!i.upsert)return this.findOne(t);r={$set:{}}}null!=this._fieldsForExec()&&(this.$useProjection?i.projection=this._fieldsForExec():i.fields=this._fieldsForExec());var a=this._conditions;return l("findAndModify",this._collection.collectionName,a,r,i),t=this._wrapCallback("findAndModify",t,{conditions:a,doc:r,options:i}),this._collection.findAndModify(a,r,i,s.tick(t)),this},c.prototype._wrapCallback=function(e,t,r){var n=this._traceFunction||c.traceFunction;if(n){r.collectionName=this._collection.collectionName;var i=n&&n.call(null,e,r,this),o=(new Date).getTime();return function(e,r){if(i){var n=(new Date).getTime()-o;i.call(null,e,r,n)}t&&t.apply(null,arguments)}}return t},c.prototype.setTraceFunction=function(e){return this._traceFunction=e,this},c.prototype.exec=function(e,t){switch(n(e)){case"function":t=e,e=null;break;case"string":this.op=e}o.ok(this.op,"Missing query type: (find, update, etc)"),"update"!=this.op&&"remove"!=this.op||t||(t=!0);var r=this;if("function"!=typeof t)return new c.Promise((function(e,t){r[r.op]((function(r,n){r?t(r):e(n),e=t=null}))}));this[this.op](t)},c.prototype.thunk=function(){var e=this;return function(t){e.exec(t)}},c.prototype.then=function(e,t){var r=this;return new c.Promise((function(e,t){r.exec((function(r,n){r?t(r):e(n),e=t=null}))})).then(e,t)},c.prototype.stream=function(e){if("find"!=this.op)throw new Error("stream() is only available for find");var t=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),l("stream",this._collection.collectionName,t,r,e),this._collection.findStream(t,r,e)},c.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)},c.prototype.selectedInclusively=function(){if(!this._fields)return!1;var e=Object.keys(this._fields);if(0===e.length)return!1;for(var t=0;t<e.length;++t){var r=e[t];if(0===this._fields[r])return!1;if(this._fields[r]&&"object"===n(this._fields[r])&&this._fields[r].$meta)return!1}return!0},c.prototype.selectedExclusively=function(){if(!this._fields)return!1;var e=Object.keys(this._fields);if(0===e.length)return!1;for(var t=0;t<e.length;++t){var r=e[t];if(0===this._fields[r])return!0}return!1},c.prototype._mergeUpdate=function(e){this._update||(this._update={}),e instanceof c?e._update&&s.mergeClone(this._update,e._update):s.mergeClone(this._update,e)},c.prototype._optionsForExec=function(){return s.clone(this.options)},c.prototype._fieldsForExec=function(){return s.clone(this._fields)},c.prototype._updateForExec=function(){for(var e=s.clone(this._update),t=s.keys(e),r=t.length,n={};r--;){var i=t[r];this.options.overwrite?n[i]=e[i]:"$"!==i[0]?(n.$set||(e.$set?n.$set=e.$set:n.$set={}),n.$set[i]=e[i],t.splice(r,1),~t.indexOf("$set")||t.push("$set")):"$set"===i&&n.$set||(n[i]=e[i])}return this._compiledUpdate=n,n},c.prototype._ensurePath=function(e){if(!this._path)throw new Error(e+"() must be used after where() when called with these arguments")},c.permissions=r(124),c._isPermitted=function(e,t){var r=c.permissions[t];return!r||!0!==r[e]},c.prototype._validate=function(e){var t,r;if(void 0===e){if("function"!=typeof(r=c.permissions[this.op]))return!0;t=r(this)}else c._isPermitted(e,this.op)||(t=e);if(t)throw new Error(t+" cannot be used with "+this.op)},c.canMerge=function(e){return e instanceof c||s.isObject(e)},c.setGlobalTraceFunction=function(e){c.traceFunction=e},c.utils=s,c.env=r(70),c.Collection=r(126),c.BaseCollection=r(31),c.Promise=r(128),e.exports=c},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,o,a,s,l=1,c={},u=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&d(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){o.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(i=p.documentElement,n=function(e){var t=p.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(d,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return c[l]=i,n(l),l++},f.clearImmediate=h}function h(e){delete c[e]}function d(e){if(u)setTimeout(d,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(10),r(11))},function(e,t,r){var n=r(2),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){(function(n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(122)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(11))},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;l++;var i=t.formatters[n];if("function"==typeof i){var o=a[l];r=i.call(e,o),a.splice(l,1),l--}return r})),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(123),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=1e3,i=6e4,o=60*i,a=24*o;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var l,c=r(e);if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(l=e,a,"day")||s(l,o,"hour")||s(l,i,"minute")||s(l,n,"second")||l+" ms":function(e){return e>=a?Math.round(e/a)+"d":e>=o?Math.round(e/o)+"h":e>=i?Math.round(e/i)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";var n=t;n.distinct=function(e){return e._fields&&Object.keys(e._fields).length>0?"field selection and slice":(Object.keys(n.distinct).every((function(r){return!e.options[r]||(t=r,!1)})),t);var t},n.distinct.select=n.distinct.slice=n.distinct.sort=n.distinct.limit=n.distinct.skip=n.distinct.batchSize=n.distinct.comment=n.distinct.maxScan=n.distinct.snapshot=n.distinct.hint=n.distinct.tailable=!0,n.findOneAndUpdate=n.findOneAndRemove=function(e){var t;return Object.keys(n.findOneAndUpdate).every((function(r){return!e.options[r]||(t=r,!1)})),t},n.findOneAndUpdate.limit=n.findOneAndUpdate.skip=n.findOneAndUpdate.batchSize=n.findOneAndUpdate.maxScan=n.findOneAndUpdate.snapshot=n.findOneAndUpdate.hint=n.findOneAndUpdate.tailable=n.findOneAndUpdate.comment=!0,n.count=function(e){return e._fields&&Object.keys(e._fields).length>0?"field selection and slice":(Object.keys(n.count).every((function(r){return!e.options[r]||(t=r,!1)})),t);var t},n.count.slice=n.count.batchSize=n.count.comment=n.count.maxScan=n.count.snapshot=n.count.tailable=!0},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=r(70);if("unknown"==n.type)throw new Error("Unknown environment");e.exports=n.isNode?r(127):(n.isMongo,r(31))},function(e,t,r){"use strict";var n=r(31);function i(e){this.collection=e,this.collectionName=e.collectionName}r(68).inherits(i,n),i.prototype.find=function(e,t,r){this.collection.find(e,t,(function(e,t){if(e)return r(e);try{t.toArray(r)}catch(e){r(e)}}))},i.prototype.findOne=function(e,t,r){this.collection.findOne(e,t,r)},i.prototype.count=function(e,t,r){this.collection.count(e,t,r)},i.prototype.distinct=function(e,t,r,n){this.collection.distinct(e,t,r,n)},i.prototype.update=function(e,t,r,n){this.collection.update(e,t,r,n)},i.prototype.updateMany=function(e,t,r,n){this.collection.updateMany(e,t,r,n)},i.prototype.updateOne=function(e,t,r,n){this.collection.updateOne(e,t,r,n)},i.prototype.replaceOne=function(e,t,r,n){this.collection.replaceOne(e,t,r,n)},i.prototype.deleteOne=function(e,t,r){this.collection.deleteOne(e,t,r)},i.prototype.deleteMany=function(e,t,r){this.collection.deleteMany(e,t,r)},i.prototype.remove=function(e,t,r){this.collection.remove(e,t,r)},i.prototype.findAndModify=function(e,t,r,n){var i=Array.isArray(r.sort)?r.sort:[];this.collection.findAndModify(e,i,t,r,n)},i.prototype.findStream=function(e,t,r){return this.collection.find(e,t).stream(r)},i.prototype.findCursor=function(e,t){return this.collection.find(e,t)},e.exports=i},function(e,t,r){(function(r,n,i){var o,a,s,l;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}l=function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(e,t,n){"use strict";var i;try{throw new Error}catch(e){i=e}var o=e("./schedule"),a=e("./queue"),s=e("./util");function l(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function c(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function u(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function p(e){this._normalQueue._pushOne(e),this._queueTick()}l.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},l.prototype.hasCustomScheduler=function(){return this._customScheduler},l.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},l.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},l.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},l.prototype.fatalError=function(e,t){t?(r.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),r.exit(2)):this.throwLater(e)},l.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(l.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?c.call(this,e,t,r):this._schedule((function(){setTimeout((function(){e.call(t,r)}),100)}))},l.prototype.invoke=function(e,t,r){this._trampolineEnabled?u.call(this,e,t,r):this._schedule((function(){e.call(t,r)}))},l.prototype.settlePromises=function(e){this._trampolineEnabled?p.call(this,e):this._schedule((function(){e._settlePromises()}))}):(l.prototype.invokeLater=c,l.prototype.invoke=u,l.prototype.settlePromises=p),l.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var r=e.shift(),n=e.shift();t.call(r,n)}else t._settlePromises()}},l.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},l.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},l.prototype._reset=function(){this._isTickUsed=!1},t.exports=l,t.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var c=r(o),u=new e(t);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(c),c instanceof e){var f={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:c};p._then(t,a,void 0,u,f),c._then(s,l,void 0,u,f),u._setOnCancel(c)}else u._resolveCallback(p);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}t.exports=function(t){var r=e("./util"),n=r.canEvaluate;function i(e){return function(e,n){var i;if(null!=e&&(i=e[n]),"function"!=typeof i){var o="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(o)}return i}(e,this.pop()).apply(e,this)}function o(e){return e[this]}function a(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}r.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=a;else if(n){var r=(void 0)(e);t=null!==r?r:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,l=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=a(e).call(this._boundValue());n===s&&(this._attachExtraTrace(n.e),l.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,i=r.tryCatch,o=r.errorObj;return function(e,a,s){return function(l){var c=s._boundValue();e:for(var u=0;u<e.length;++u){var p=e[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(l instanceof p)return i(a).call(c,l)}else if("function"==typeof p){var f=i(p).call(c,l);if(f===o)return f;if(f)return i(a).call(c,l)}else if(r.isObject(l)){for(var h=n(p),d=0;d<h.length;++d){var y=h[d];if(p[y]!=l[y])continue e}return i(a).call(c,l)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(i())}function i(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,l=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=l,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(e,t,n){"use strict";t.exports=function(t,n){var i,o,a,s=t._getDomain,l=t._async,u=e("./errors").Warning,p=e("./util"),f=p.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,m=null,v=null,g=!1,b=!(0==p.env("BLUEBIRD_DEBUG")),_=!(0==p.env("BLUEBIRD_WARNINGS")||!b&&!p.env("BLUEBIRD_WARNINGS")),w=!(0==p.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!p.env("BLUEBIRD_LONG_STACK_TRACES")),x=0!=p.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(_||!!p.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout((function(){e._notifyUnhandledRejection()}),1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){V("rejectionHandled",i,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),V("unhandledRejection",o,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,r){return z(e,t,r||this)},t.onPossiblyUnhandledRejection=function(e){var t=s();o="function"==typeof e?null===t?e:p.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=s();i="function"==typeof e?null===t?e:p.domainBind(t,e):void 0};var E=function(){};t.longStackTraces=function(){if(l.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!J.longStackTraces&&q()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace;J.longStackTraces=!0,E=function(){if(l.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),l.enableTrampoline(),J.longStackTraces=!1},t.prototype._captureStackTrace=F,t.prototype._attachExtraTrace=B,n.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return J.longStackTraces&&q()};var S=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return p.global.dispatchEvent(e),function(e,t){var r=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!p.global.dispatchEvent(r)}}return"function"==typeof Event?(e=new Event("CustomEvent"),p.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,!p.global.dispatchEvent(r)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),p.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!p.global.dispatchEvent(r)})}catch(e){}return function(){return!1}}(),k=p.isNode?function(){return r.emit.apply(r,arguments)}:p.global?function(e){var t="on"+e.toLowerCase(),r=p.global[t];return!!r&&(r.apply(p.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(e,t){return{promise:t}}var O={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:T},A=function(e){var t=!1;try{t=k.apply(null,arguments)}catch(e){l.throwLater(e),t=!0}var r=!1;try{r=S(e,O[e].apply(null,arguments))}catch(e){l.throwLater(e),r=!0}return r||t};function P(){return!1}function C(e,t,r){var n=this;try{e(t,r,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+p.toString(e));n._attachCancellationCallback(e)}))}catch(e){return e}}function N(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?p.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function R(){return this._onCancelField}function j(e){this._onCancelField=e}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function I(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}t.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&E()),"warnings"in e){var r=e.warnings;J.warnings=!!r,x=J.warnings,p.isObject(r)&&"wForgottenReturn"in r&&(x=!!r.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!J.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=M,t.prototype._propagateFrom=I,t.prototype._onCancel=R,t.prototype._setOnCancel=j,t.prototype._attachCancellationCallback=N,t.prototype._execute=C,D=I,J.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!J.monitoring?(J.monitoring=!0,t.prototype._fireEvent=A):!e.monitoring&&J.monitoring&&(J.monitoring=!1,t.prototype._fireEvent=P)),t},t.prototype._fireEvent=P,t.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var D=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function L(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function F(){this._trace=new X(this._peekContext())}function B(e,t){if(f(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=U(e);p.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),p.notEnumerableProp(e,"__stackCleaned__",!0)}}}function z(e,r,n){if(J.warnings){var i,o=new u(e);if(r)n._attachExtraTrace(o);else if(J.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=U(o);o.stack=a.message+"\n"+a.stack.join("\n")}A("warning",o)||H(o,"",!0)}}function $(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i="    (No stack trace)"===n||m.test(n),o=i&&W(n);i&&!o&&(g&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function U(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||m.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:$(t)}}function H(e,t,r){if("undefined"!=typeof console){var n;if(p.isObject(e)){var i=e.stack;n=t+v(i,e)}else n=t+String(e);"function"==typeof a?a(n,r):"function"!=typeof console.log&&"object"!==c(console.log)||console.log(n)}}function V(e,t,r,n){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){l.throwLater(e)}"unhandledRejection"===e?A(e,r,n)||i||H(r,"Unhandled rejection "):A(e,n)}function G(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():p.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function q(){return"function"==typeof Z}var W=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function K(e){var t=e.match(Y);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function X(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Z(this,X),t>32&&this.uncycle()}p.inherits(X,Error),n.CapturedTrace=X,X.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;for(n=(e=this._length=n)-1;n>=0;--n){var o=t[n].stack;void 0===r[o]&&(r[o]=n)}for(n=0;n<e;++n){var a=r[t[n].stack];if(void 0!==a&&a!==n){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var s=n>0?t[n-1]:this;a<e-1?(s._parent=t[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=n-2;c>=0;--c)t[c]._length=l,l++;return}}}},X.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=U(e),r=t.message,n=[t.stack],i=this;void 0!==i;)n.push($(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,o=t[i],a=-1,s=n.length-1;s>=0;--s)if(n[s]===o){a=s;break}for(s=a;s>=0;--s){var l=n[s];if(t[i]!==l)break;t.pop(),i--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),p.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),p.notEnumerableProp(e,"__stackCleaned__",!0)}};var Z=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():G(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,m=e,v=t;var r=Error.captureStackTrace;return W=function(e){return h.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return m=/@/,v=t,g=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return!("stack"in i)&&n&&"number"==typeof Error.stackTraceLimit?(m=e,v=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}):(v=function(e,t){return"string"==typeof e?e:"object"!==c(t)&&"function"!=typeof t||void 0===t.name||void 0===t.message?G(t):t.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(e){console.warn(e)},p.isNode&&r.stderr.isTTY?a=function(e,t){var r=t?"\x1b[33m":"\x1b[31m";console.warn(r+e+"\x1b[0m\n")}:p.isNode||"string"!=typeof(new Error).stack||(a=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var J={warnings:_,longStackTraces:!1,cancellation:!1,monitoring:!1};return w&&t.longStackTraces(),{longStackTraces:function(){return J.longStackTraces},warnings:function(){return J.warnings},cancellation:function(){return J.cancellation},monitoring:function(){return J.monitoring},propagateFromFunction:function(){return D},boundValueFunction:function(){return L},checkForgottenReturns:function(e,t,r,n,i){if(void 0===e&&null!==t&&x){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),l=$(s),c=l.length-1;c>=0;--c){var u=l[c];if(!d.test(u)){var p=u.match(y);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(l.length>0){var f=l[0];for(c=0;c<s.length;++c)if(s[c]===f){c>0&&(a="\n"+s[c-1]);break}}}var h="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(h,!0,t)}},setBounds:function(e,t){if(q()){for(var r,n,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,l=0;l<i.length;++l)if(c=K(i[l])){r=c.fileName,a=c.line;break}for(l=0;l<o.length;++l){var c;if(c=K(o[l])){n=c.fileName,s=c.line;break}}a<0||s<0||!r||!n||r!==n||a>=s||(W=function(e){if(h.test(e))return!0;var t=K(e);return!!(t&&t.fileName===r&&a<=t.line&&t.line<=s)})}},warn:z,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),z(r)},CapturedTrace:X,fireDomEvent:S,fireGlobalEvent:k}}},{"./errors":12,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,(function(){throw t}))},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();return this.caught(r,(function(){return n}))}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function i(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,i,o=e("./es5"),a=o.freeze,s=e("./util"),l=s.inherits,c=s.notEnumerableProp;function u(e,t){function r(n){if(!(this instanceof r))return new r(n);c(this,"message","string"==typeof n?n:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(r,Error),r}var p=u("Warning","warning"),f=u("CancellationError","cancellation error"),h=u("TimeoutError","timeout error"),d=u("AggregateError","aggregate error");try{n=TypeError,i=RangeError}catch(e){n=u("TypeError","type error"),i=u("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(d.prototype[y[m]]=Array.prototype[y[m]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var v=0;function g(e){if(!(this instanceof g))return new g(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(n=i.join("\n"))+"\n"}return v--,t},l(g,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:f,TimeoutError:h,OperationalError:g,RejectionError:g,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),o=t.CancellationError,a=i.errorObj,s=e("./catch_filter")(n);function l(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function c(e){this.finallyHandler=e}function u(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function p(){return h.call(this,this.promise._target()._settledValue())}function f(e){if(!u(this,e))return a.e=e,a}function h(e){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),e);if(l===n)return l;if(void 0!==l){i._setReturnedNonUndefined();var h=r(l,i);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),a.e=d,a}h.isPending()&&h._attachCancellationCallback(new c(this))}return h._then(p,f,void 0,this,void 0)}}}return i.isRejected()?(u(this),a.e=e,a):(u(this),e)}return l.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){u(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new l(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,h,h)},t.prototype.tap=function(e){return this._passThrough(e,1,h)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,h);var n,o=new Array(r-1),a=0;for(n=0;n<r-1;++n){var l=arguments[n];if(!i.isObject(l))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(l)));o[a++]=l}o.length=a;var c=arguments[n];return this._passThrough(s(o,c,this),1,void 0,h)},l}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,a){var s=e("./errors").TypeError,l=e("./util"),c=l.errorObj,u=l.tryCatch,p=[];function f(e,r,i,o){if(a.cancellation()){var s=new t(n),l=this._finallyPromise=new t(n);this._promise=s.lastly((function(){return l})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new t(n))._captureStackTrace();this._stack=o,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}l.inherits(f,o),f.prototype._isResolved=function(){return null===this._promise},f.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=u(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},f.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=u(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},f.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=u(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(e){var r=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var o=i(n,this._promise);if(o instanceof t||null!==(o=function(e,r,n){for(var o=0;o<r.length;++o){n._pushContext();var a=u(r[o])(e);if(n._popContext(),a===c){n._pushContext();var s=t.reject(c.e);return n._popContext(),s}var l=i(a,n);if(l instanceof t)return l}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=f,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new n(void 0,void 0,r,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new s("expecting a function but got "+l.classString(e));p.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new f(e,this),i=n.promise();return n._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var i=new r(n).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,a){var s=t._getDomain,l=e("./util"),u=l.tryCatch,p=l.errorObj,f=t._async;function h(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var i=s();this._callback=null===i?t:l.domainBind(i,t),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function d(e,r,i,o){if("function"!=typeof r)return n("expecting a function but got "+l.classString(r));var a=0;if(void 0!==i){if("object"!==c(i)||null===i)return t.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return new h(e,r,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}l.inherits(h,r),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,r){var n=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(r<0){if(n[r=-1*r-1]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return n[r]=e,this._queue.push(r),!1;null!==s&&(s[r]=e);var c=this._promise,f=this._callback,h=c._boundValue();c._pushContext();var d=u(f).call(h,e,r,o),y=c._popContext();if(a.checkForgottenReturns(d,y,null!==s?"Promise.filter":"Promise.map",c),d===p)return this._reject(d.e),!0;var m=i(d,this._promise);if(m instanceof t){var v=(m=m._target())._bitField;if(0==(50397184&v))return l>=1&&this._inFlight++,n[r]=m,m._proxy(this,-1*(r+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);d=m._value()}n[r]=d}return++this._totalResolved>=o&&(null!==s?this._filter(n,s):this._resolve(n),!0)},h.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},h.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,o=0;o<r;++o)e[o]&&(n[i++]=t[o]);n.length=i,this._resolve(n)},h.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return d(this,e,t,null)},t.map=function(e,t,r,n){return d(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var i=s(e).apply(this,arguments),a=n._popContext();return o.checkForgottenReturns(i,a,"Promise.method",n),n._resolveFromSyncValue(i),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var n,l=new t(r);if(l._captureStackTrace(),l._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];n=a.isArray(c)?s(e).apply(u,c):s(e).call(u,c)}else n=s(e)();var p=l._popContext();return o.checkForgottenReturns(n,p,"Promise.try",l),l._resolveFromSyncValue(n),l},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),i=n.maybeWrapAsError,o=e("./errors").OperationalError,a=e("./es5"),s=/^(?:name|message|stack|cause)$/;function l(e){var t;if(function(e){return e instanceof Error&&a.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=a.keys(e),i=0;i<r.length;++i){var l=r[i];s.test(l)||(t[l]=e[l])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var o=l(i(r));e._attachExtraTrace(o),e._reject(o)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,i=r.tryCatch,o=r.errorObj;function a(e,t){if(!r.isArray(e))return s.call(this,e,t);var a=i(t).apply(this._boundValue(),[null].concat(e));a===o&&n.throwLater(a.e)}function s(e,t){var r=this._boundValue(),a=void 0===e?i(t).call(r,null):i(t).call(r,null,e);a===o&&n.throwLater(a.e)}function l(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var a=i(t).call(this._boundValue(),e);a===o&&n.throwLater(a.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=s;void 0!==t&&Object(t).spread&&(r=a),this._then(r,l,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){"use strict";t.exports=function(){var n=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new P.PromiseInspection(this._target())},o=function(e){return P.reject(new d(e))};function a(){}var s,l={},c=e("./util");s=c.isNode?function(){var e=r.domain;return void 0===e&&(e=null),e}:function(){return null},c.notEnumerableProp(P,"_getDomain",s);var u=e("./es5"),p=e("./async"),f=new p;u.defineProperty(P,"_async",{value:f});var h=e("./errors"),d=P.TypeError=h.TypeError;P.RangeError=h.RangeError;var y=P.CancellationError=h.CancellationError;P.TimeoutError=h.TimeoutError,P.OperationalError=h.OperationalError,P.RejectionError=h.OperationalError,P.AggregateError=h.AggregateError;var m=function(){},v={},g={},b=e("./thenables")(P,m),_=e("./promise_array")(P,m,b,o,a),w=e("./context")(P),x=w.create,E=e("./debuggability")(P,w),S=(E.CapturedTrace,e("./finally")(P,b,g)),k=e("./catch_filter")(g),T=e("./nodeback"),O=c.errorObj,A=c.tryCatch;function P(e){e!==m&&function(e,t){if(null==e||e.constructor!==P)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new d("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function C(e){this.promise._resolveCallback(e)}function N(e){this.promise._rejectCallback(e,!1)}function R(e){var t=new P(m);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return P.prototype.toString=function(){return"[object Promise]"},P.prototype.caught=P.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var a=arguments[r];if(!c.isObject(a))return o("Catch statement predicate: expecting an object but got "+c.classString(a));n[i++]=a}return n.length=i,e=arguments[r],this.then(void 0,k(n,e,this))}return this.then(void 0,e)},P.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},P.prototype.then=function(e,t){if(E.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(r+=", "+c.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},P.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},P.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},P.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},P.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},P.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},P.getNewLibraryCopy=t.exports,P.is=function(e){return e instanceof P},P.fromNode=P.fromCallback=function(e){var t=new P(m);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=A(e)(T(t,r));return n===O&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},P.all=function(e){return new _(e).promise()},P.cast=function(e){var t=b(e);return t instanceof P||((t=new P(m))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},P.resolve=P.fulfilled=P.cast,P.reject=P.rejected=function(e){var t=new P(m);return t._captureStackTrace(),t._rejectCallback(e,!0),t},P.setScheduler=function(e){if("function"!=typeof e)throw new d("expecting a function but got "+c.classString(e));return f.setScheduler(e)},P.prototype._then=function(e,t,r,n,i){var o=void 0!==i,a=o?i:new P(m),l=this._target(),u=l._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=s();if(0!=(50397184&u)){var h,d,v=l._settlePromiseCtx;0!=(33554432&u)?(d=l._rejectionHandler0,h=e):0!=(16777216&u)?(d=l._fulfillmentHandler0,h=t,l._unsetRejectionIsUnhandled()):(v=l._settlePromiseLateCancellationObserver,d=new y("late cancellation observer"),l._attachExtraTrace(d),h=t),f.invoke(v,l,{handler:null===p?h:"function"==typeof h&&c.domainBind(p,h),promise:a,receiver:n,value:d})}else l._addCallbacks(e,t,a,n,p);return a},P.prototype._length=function(){return 65535&this._bitField},P.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},P.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},P.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},P.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},P.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},P.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},P.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},P.prototype._isFinal=function(){return(4194304&this._bitField)>0},P.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},P.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},P.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},P.prototype._setAsyncGuaranteed=function(){f.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},P.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==l)return void 0===t&&this._isBound()?this._boundValue():t},P.prototype._promiseAt=function(e){return this[4*e-4+2]},P.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},P.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,i=e._receiverAt(0);void 0===i&&(i=l),this._addCallbacks(t,r,n,i,null)},P.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=l),this._addCallbacks(r,n,i,o,null)},P.prototype._addCallbacks=function(e,t,r,n,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:c.domainBind(i,t));else{var a=4*o-4;this[a+2]=r,this[a+3]=n,"function"==typeof e&&(this[a+0]=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:c.domainBind(i,t))}return this._setLength(o+1),o},P.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},P.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=b(e,this);if(!(r instanceof P))return this._fulfill(e);t&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var l=new y("late cancellation observer");i._attachExtraTrace(l),this._reject(l)}}else this._reject(n())}},P.prototype._rejectCallback=function(e,t,r){var n=c.ensureErrorObject(e),i=n===e;if(!i&&!r&&E.warnings()){var o="a promise was rejected with a non-error: "+c.classString(e);this._warn(o,!0)}this._attachExtraTrace(n,!!t&&i),this._reject(e)},P.prototype._resolveFromExecutor=function(e){if(e!==m){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,r)}));r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},P.prototype._settlePromiseFromHandler=function(e,t,r,n){var i=n._bitField;if(0==(65536&i)){var o;n._pushContext(),t===v?r&&"number"==typeof r.length?o=A(e).apply(this._boundValue(),r):(o=O).e=new d("cannot .spread() a non-array: "+c.classString(r)):o=A(e).call(t,r);var a=n._popContext();0==(65536&(i=n._bitField))&&(o===g?n._reject(r):o===O?n._rejectCallback(o.e,!1):(E.checkForgottenReturns(o,a,"",n,this),n._resolveCallback(o)))}},P.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(e){this._rejectionHandler0=e},P.prototype._settlePromise=function(e,t,r,n){var o=e instanceof P,s=this._bitField,l=0!=(134217728&s);0!=(65536&s)?(o&&e._invokeInternalOnCancel(),r instanceof S&&r.isFinallyHandler()?(r.cancelPromise=e,A(t).call(r,n)===O&&e._reject(O.e)):t===i?e._fulfill(i.call(r)):r instanceof a?r._promiseCancelled(e):o||e instanceof _?e._cancel():r.cancel()):"function"==typeof t?o?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof a?r._isResolved()||(0!=(33554432&s)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):o&&(l&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(n):e._reject(n))},P.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,i=e.value;"function"==typeof t?r instanceof P?this._settlePromiseFromHandler(t,n,i,r):t.call(n,i,r):r instanceof P&&r._reject(i)},P.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},P.prototype._settlePromise0=function(e,t,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},P.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},P.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():f.settlePromises(this))}},P.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return f.fatalError(e,c.isNode);(65535&t)>0?f.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,t)}},P.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,t)}},P.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},P.defer=P.pending=function(){return E.deprecated("Promise.defer","new Promise"),{promise:new P(m),resolve:C,reject:N}},c.notEnumerableProp(P,"_makeSelfResolutionError",n),e("./method")(P,m,b,o,E),e("./bind")(P,m,b,E),e("./cancel")(P,_,o,E),e("./direct_resolve")(P),e("./synchronous_inspection")(P),e("./join")(P,_,b,m,f,s),P.Promise=P,P.version="3.5.1",e("./map.js")(P,_,o,b,m,E),e("./call_get.js")(P),e("./using.js")(P,o,b,x,m,E),e("./timers.js")(P,m,E),e("./generators.js")(P,o,m,b,a,E),e("./nodeify.js")(P),e("./promisify.js")(P,m),e("./props.js")(P,_,b,o),e("./race.js")(P,m,b,o),e("./reduce.js")(P,_,o,b,m,E),e("./settle.js")(P,_,E),e("./some.js")(P,_,o),e("./filter.js")(P,m),e("./each.js")(P,m),e("./any.js")(P),c.toFastProperties(P),c.toFastProperties(P.prototype),R({a:1}),R({b:2}),R({c:3}),R(1),R((function(){})),R(void 0),R(!1),R(new P(m)),E.setBounds(p.firstLineError,c.lastLineError),P}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o){var a=e("./util");function s(e){var n=this._promise=new t(r);e instanceof t&&n._propagateFrom(e,3),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(r,o){var s=n(this._values,this._promise);if(s instanceof t){var l=(s=s._target())._bitField;if(this._values=s,0==(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,o);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(c,!1)}},s.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<r;++s){var l=n(e[s],i);a=l instanceof t?(l=l._target())._bitField:null,o?null!==a&&l.suppressUnhandledRejections():null!==a?0==(50397184&a)?(l._proxy(this,s),this._values[s]=l):o=0!=(33554432&a)?this._promiseFulfilled(l._value(),s):0!=(16777216&a)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},i=e("./util"),o=e("./nodeback"),a=i.withAppended,s=i.maybeWrapAsError,l=i.canEvaluate,u=e("./errors").TypeError,p={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function d(e){return!f.test(e)}function y(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function m(e,t,r){var n=i.getDataPropertyOrDefault(e,t+r,p);return!!n&&y(n)}function v(e,t,r,n){for(var o=i.inheritedDataKeys(e),a=[],s=0;s<o.length;++s){var l=o[s],c=e[l],p=n===h||h(l);"function"!=typeof c||y(c)||m(e,l,t)||!n(l,c,e,p)||a.push(l,c)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var o=i.replace(r,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(a,t,r),a}var g=l?void 0:function(e,l,c,u,p,f){var h=function(){return this}(),d=e;function y(){var i=l;l===n&&(i=this);var c=new t(r);c._captureStackTrace();var u="string"==typeof d&&this!==h?this[d]:e,p=o(c,f);try{u.apply(i,a(arguments,p))}catch(e){c._rejectCallback(s(e),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof d&&(e=u),i.notEnumerableProp(y,"__isPromisified__",!0),y};function b(e,t,r,o,a){for(var s=new RegExp(t.replace(/([$])/,"\\$")+"$"),l=v(e,t,s,r),c=0,u=l.length;c<u;c+=2){var p=l[c],f=l[c+1],h=p+t;if(o===g)e[h]=g(p,n,p,f,t,a);else{var d=o(f,(function(){return g(p,n,p,f,t,a)}));i.notEnumerableProp(d,"__isPromisified__",!0),e[h]=d}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new u("expecting a function but got "+i.classString(e));if(y(e))return e;var r=function(e,t,r){return g(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return i.copyDescriptors(e,r,d),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==c(e))throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var o=t.filter;"function"!=typeof o&&(o=h);var a=t.promisifier;if("function"!=typeof a&&(a=g),!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(e),l=0;l<s.length;++l){var p=e[s[l]];"constructor"!==s[l]&&i.isClass(p)&&(b(p.prototype,n,o,a,r),b(p,n,o,a,r))}return b(e,n,o,a,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o,a=e("./util"),s=a.isObject,l=e("./es5");"function"==typeof Map&&(o=Map);var c=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var i=new Array(2*n.size);return n.forEach(r,i),i}}();function u(e){var t,r=!1;if(void 0!==o&&e instanceof o)t=c(e),r=!0;else{var n=l.keys(e),i=n.length;t=new Array(2*i);for(var a=0;a<i;++a){var s=n[a];t[a]=e[s],t[a+i]=s}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function p(e){var r,o=n(e);return s(o)?(r=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof t&&r._propagateFrom(o,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(u,r),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new o,r=e.length/2|0,n=0;n<r;++n){var i=e[r+n],a=e[n];t.set(i,a)}return t}(this._values);else{r={};for(var n=this.length(),i=0,a=this.length();i<a;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return p(this)},t.props=function(e){return p(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,i){for(var o=0;o<i;++o)r[o+n]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o=e("./util");function a(e,s){var l,c=n(e);if(c instanceof t)return(l=c).then((function(e){return a(e,l)}));if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var u=new t(r);void 0!==s&&u._propagateFrom(s,3);for(var p=u._fulfill,f=u._reject,h=0,d=e.length;h<d;++h){var y=e[h];(void 0!==y||h in e)&&t.cast(y)._then(p,f,void 0,u,null)}return u}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,a){var s=t._getDomain,l=e("./util"),c=l.tryCatch;function u(e,r,n,i){this.constructor$(e);var a=s();this._fn=null===a?r:l.domainBind(a,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function f(e,t,r,i){return"function"!=typeof t?n("expecting a function but got "+l.classString(t)):new u(e,t,r,i).promise()}function h(e){this.accum=e,this.array._gotAccum(e);var r=i(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(d,void 0,void 0,this,void 0)):d.call(this,r)}function d(e){var r,n=this.array,i=n._promise,o=c(n._fn);i._pushContext(),(r=void 0!==n._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var s=i._popContext();return a.checkForgottenReturns(r,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),r}l.inherits(u,r),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},u.prototype._iterate=function(e){var r,n;this._values=e;var i=e.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var o={accum:null,value:e[n],index:n,length:i,array:this};r=r._then(h,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(p,p,void 0,r,this)},t.prototype.reduce=function(e,t){return f(this,e,t,null)},t.reduce=function(e,t,r,n){return f(e,t,r,n)}}},{"./util":36}],29:[function(e,t,o){"use strict";var a,s,l,c,u,p=e("./util"),f=p.getNativePromise();if(p.isNode&&"undefined"==typeof MutationObserver){var h=n.setImmediate,d=r.nextTick;a=p.isRecentNode?function(e){h.call(n,e)}:function(e){d.call(r,e)}}else if("function"==typeof f&&"function"==typeof f.resolve){var y=f.resolve();a=function(e){y.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(s=document.createElement("div"),l={attributes:!0},c=!1,u=document.createElement("div"),new MutationObserver((function(){s.classList.toggle("foo"),c=!1})).observe(u,l),function(e){var t=new MutationObserver((function(){t.disconnect(),e()}));t.observe(s,l),c||(c=!0,u.classList.toggle("foo"))});t.exports=a},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,r),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var r=new i;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},o.prototype._promiseRejected=function(e,t){var r=new i;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),o=e("./errors").RangeError,a=e("./errors").AggregateError,s=i.isArray,l={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new c(e),i=r.promise();return r.setHowMany(t),r.init(),i}i.inherits(c,r),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new a,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return u(e,t)},t.prototype.some=function(e){return u(this,e)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),i=n.errorObj,o=n.isObject,a={}.hasOwnProperty;return function(e,s){if(o(e)){if(e instanceof t)return e;var l=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(l===i){s&&s._pushContext();var c=t.reject(l.e);return s&&s._popContext(),c}if("function"==typeof l)return function(e){try{return a.call(e,"_promise0")}catch(e){return!1}}(e)?(c=new t(r),e._then(c._fulfill,c._reject,void 0,c,null),c):function(e,o,a){var s=new t(r),l=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=n.tryCatch(o).call(e,(function(e){s&&(s._resolveCallback(e),s=null)}),(function(e){s&&(s._rejectCallback(e,!1,!0),s=null)}));return s&&c===i&&(s._rejectCallback(c.e,!0,!0),s=null),l}(e,l,s)}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),o=t.TimeoutError;function a(e){this.handle=e}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,i){var o,l;return void 0!==i?(o=t.resolve(i)._then(s,null,null,e,void 0),n.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(r),l=setTimeout((function(){o._fulfill()}),+e),n.cancellation()&&o._setOnCancel(new a(l)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(e){return clearTimeout(this.handle),e}function u(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return l(e,this)},t.prototype.timeout=function(e,t){var r,s;e=+e;var l=new a(setTimeout((function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,s)}),e));return n.cancellation()?(s=this.then(),(r=s._then(c,u,void 0,l,void 0))._setOnCancel(l)):r=this._then(c,u,void 0,l,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,a){var s=e("./util"),l=e("./errors").TypeError,c=e("./util").inherits,u=s.errorObj,p=s.tryCatch,f={};function h(e){setTimeout((function(){throw e}),0)}function d(e,r){var i=0,a=e.length,s=new t(o);return function o(){if(i>=a)return s._fulfill();var l=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(l instanceof t&&l._isDisposable()){try{l=n(l._getDisposer().tryDispose(r),e.promise)}catch(e){return h(e)}if(l instanceof t)return l._then(o,h,null,null,null)}o()}(),s}function y(e,t,r){this._data=e,this._promise=t,this._context=r}function m(e,t,r){this.constructor$(e,t,r)}function v(e){return y.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function g(e){this.length=e,this.promise=null,this[e-1]=null}y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():f},y.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==f?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},y.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},c(m,y),m.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},g.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return r("expecting a function but got "+s.classString(o));var l=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,l=!1):(i=arguments,e--);for(var c=new g(e),f=0;f<e;++f){var h=i[f];if(y.isDisposer(h)){var m=h;(h=h.promise())._setDisposable(m)}else{var b=n(h);b instanceof t&&(h=b._then(v,null,null,{resources:c,index:f},void 0))}c[f]=h}var _=new Array(c.length);for(f=0;f<_.length;++f)_[f]=t.resolve(c[f]).reflect();var w=t.all(_).then((function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return u.e=r.error(),u;if(!r.isFulfilled())return void w.cancel();e[t]=r.value()}x._pushContext(),o=p(o);var n=l?o.apply(void 0,e):o(e),i=x._popContext();return a.checkForgottenReturns(n,i,"Promise.using",x),n})),x=w.lastly((function(){var e=new t.PromiseInspection(w);return d(c,e)}));return c.promise=x,x._setOnCancel(c),x},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new m(e,this,i());throw new l}}},{"./errors":12,"./util":36}],36:[function(e,t,i){"use strict";var o,a=e("./es5"),s="undefined"==typeof navigator,l={e:{}},u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function p(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return l.e=e,l}}function f(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function h(e,t,r){if(f(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return a.defineProperty(e,t,n),e}var d=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(a.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=r(e)}catch(e){return n}for(var s=0;s<o.length;++s){var l=o[s];if(!i[l]){i[l]=!0;var c=Object.getOwnPropertyDescriptor(e,l);null!=c&&null==c.get&&null==c.set&&n.push(l)}}e=a.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var o in r)if(n.call(r,o))i.push(o);else{for(var a=0;a<e.length;++a)if(n.call(e[a],o))continue e;i.push(o)}return i}}(),y=/this\s*\.\s*\S+\s*=/;var m=/^[a-z$_][a-z$_0-9]*$/i;function v(e){try{return e+""}catch(e){return"[no string representation]"}}function g(e){return e instanceof Error||null!==e&&"object"===c(e)&&"string"==typeof e.message&&"string"==typeof e.name}function b(e){return g(e)&&a.propertyIsWritable(e,"stack")}var _="stack"in new Error?function(e){return b(e)?e:new Error(v(e))}:function(e){if(b(e))return e;try{throw new Error(v(e))}catch(e){return e}};function w(e){return{}.toString.call(e)}var x=function(e){return a.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var E="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};x=function(e){return a.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?E(e):null}}var S=void 0!==r&&"[object process]"===w(r).toLowerCase(),k=void 0!==r&&void 0!==r.env;var T,O={isClass:function(e){try{if("function"==typeof e){var t=a.names(e.prototype),r=a.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=y.test(e+"")&&a.names(e).length>0;if(r||n||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return m.test(e)},inheritedDataKeys:d,getDataPropertyOrDefault:function(e,t,r){if(!a.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0},thrower:function(e){throw e},isArray:a.isArray,asArray:x,notEnumerableProp:h,isPrimitive:f,isObject:function(e){return"function"==typeof e||"object"===c(e)&&null!==e},isError:g,canEvaluate:s,errorObj:l,tryCatch:function(e){return o=e,p},inherits:function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype},withAppended:function(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=e[r];return i[r]=t,i},maybeWrapAsError:function(e){return f(e)?new Error(v(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var r=8;r--;)new t;return e},filledRange:function(e,t,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=t+i+r;return n},toString:v,canAttachTrace:b,ensureErrorObject:_,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{h(e,"isOperational",!0)}catch(e){}},classString:w,copyDescriptors:function(e,t,r){for(var n=a.names(e),i=0;i<n.length;++i){var o=n[i];if(r(o))try{a.defineProperty(t,o,a.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:S,hasEnvVariables:k,env:function(e){return k?r.env[e]:void 0},global:u,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise((function(){}));if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};O.isRecentNode=O.isNode&&(0===(T=r.versions.node.split(".").map(Number))[0]&&T[1]>10||T[0]>0),O.isNode&&O.toFastProperties(r);try{throw new Error}catch(e){O.lastLineError=e}t.exports=O},{"./es5":13}]},{},[4])(4)},"object"==c(t)&&void 0!==e?e.exports=l():(a=[],void 0===(s="function"==typeof(o=l)?o.apply(t,a):o)||(e.exports=s)),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(11),r(10),r(69).setImmediate)},function(e,t,r){"use strict";var n=e.exports={};n.DocumentNotFoundError=null,n.general={},n.general.default="Validator failed for path `{PATH}` with value `{VALUE}`",n.general.required="Path `{PATH}` is required.",n.Number={},n.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).",n.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).",n.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.",n.Date={},n.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).",n.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).",n.String={},n.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.",n.String.match="Path `{PATH}` is invalid ({VALUE}).",n.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).",n.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=r(5),l=r(4),c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e,n,i,o){var a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var u=s.messages;return c=null!=u.DocumentNotFoundError?"function"==typeof u.DocumentNotFoundError?u.DocumentNotFoundError(e,n):u.DocumentNotFoundError:'No document found for query "'+l.inspect(e)+'" on model "'+n+'"',(a=t.call(this,c)).result=o,a.numAffected=i,a.filter=e,a.query=e,a}return r}(s);Object.defineProperty(c.prototype,"name",{value:"DocumentNotFoundError"}),e.exports=c},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=i.join(", ");return(o=t.call(this,'No matching document found for id "'+e._id+'" version '+n+' modifiedPaths "'+a+'"')).version=n,o.modifiedPaths=i,o}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"VersionError"}),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,"Can't save() the same doc multiple times in parallel. Document: "+e._id)}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"ParallelSaveError"}),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,"Cannot overwrite `"+e+"` model once compiled.")}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"OverwriteModelError"}),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n="Schema hasn't been registered for model \""+e+'".\nUse mongoose.model(name, schema)';return t.call(this,n)}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"MissingSchemaError"}),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join("\n  ")+"\nUse Model.update() to update these arrays instead.";return t.call(this,n)}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"DivergentArrayError"}),e.exports=s},function(e,t,r){"use strict";var n=r(33);e.exports=function(e){var t,r;e.$immutable?(e.$immutableSetter=(t=e.path,r=e.options.immutable,function(e){if(null==this||null==this.$__)return e;if(this.isNew)return e;if(!("function"==typeof r?r.call(this,this):r))return e;var i=this.$__getValue(t);if("throw"===this.$__.strictMode&&e!==i)throw new n(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return i}),e.set(e.$immutableSetter)):e.$immutableSetter&&(e.setters=e.setters.filter((function(t){return t!==e.$immutableSetter})),delete e.$immutableSetter)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,'Parameter "'+n+'" to '+i+"() must be an object, got "+e.toString())}return r}(r(5));Object.defineProperty(s.prototype,"name",{value:"ObjectParameterError"}),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.call(this,"Can't validate() the same doc multiple times in parallel. Document: "+e._id)}return r}(r(14));Object.defineProperty(s.prototype,"name",{value:"ParallelValidateError"}),e.exports=s},function(e,t,r){"use strict";(function(t){function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){this._pres=new Map,this._posts=new Map}function a(e,t,r,n,i,o,a){if(o.useErrorHandlers){var s={error:t};return e.execPost(r,n,i,s,(function(e){return"function"==typeof a&&a(e)}))}return"function"==typeof a?a(t):void 0}function s(e,t,r){return e.has(t)?e.get(t):r}function l(e,t,r,n){var i;try{i=e.apply(t,r)}catch(e){return n(e)}c(i)&&i.then((function(){return n()}),(function(e){return n(e)}))}function c(e){return null!=e&&"function"==typeof e.then}function u(e){var r=!1,n=this;return function(){var i=arguments;if(!r)return r=!0,t.nextTick((function(){return e.apply(n,i)}))}}o.prototype.execPre=function(e,r,n,i){3===arguments.length&&(i=n,n=[]);var o=s(this._pres,e,[]),a=o.length,p=o.numAsync||0,f=0,h=p,d=!1,y=n;if(!a)return t.nextTick((function(){i(null)}));var m=function e(){if(!(f>=a)){var n=o[f];if(n.isAsync){var s=[u(v),u((function(e){if(e){if(d)return;return d=!0,i(e)}if(0==--h&&f>=a)return i(null)}))];l(n.fn,r,s,s[0])}else if(n.fn.length>0){s=[u(v)];for(var p=arguments.length>=2?arguments:[null].concat(y),m=1;m<p.length;++m)s.push(p[m]);l(n.fn,r,s,s[0])}else{var g=null;try{g=n.fn.call(r)}catch(e){if(null!=e)return i(e)}if(c(g))g.then((function(){return v()}),(function(e){return v(e)}));else{if(++f>=a)return h>0?void 0:t.nextTick((function(){i(null)}));e()}}}};function v(e){if(e){if(d)return;return d=!0,i(e)}if(++f>=a)return h>0?void 0:i(null);m.apply(r,arguments)}m.apply(null,[null].concat(n))},o.prototype.execPreSync=function(e,t,r){for(var n=s(this._pres,e,[]),i=n.length,o=0;o<i;++o)n[o].fn.apply(t,r||[])},o.prototype.execPost=function(e,r,n,i,o){arguments.length<5&&(o=i,i=null);var a=s(this._posts,e,[]),p=a.length,f=0,h=null;if(i&&i.error&&(h=i.error),!p)return t.nextTick((function(){o.apply(null,[h].concat(n))}));!function e(){for(var t=a[f].fn,i=0,s=n.length,d=[],y=0;y<s;++y)i+=n[y]&&n[y]._kareemIgnore?0:1,n[y]&&n[y]._kareemIgnore||d.push(n[y]);if(h)if(t.length===i+2){var m=u((function(t){if(t&&(h=t),++f>=p)return o.call(null,h);e()}));l(t,r,[h].concat(d).concat([m]),m)}else{if(++f>=p)return o.call(null,h);e()}else{var v=u((function(t){return t?(h=t,e()):++f>=p?o.apply(null,[null].concat(n)):void e()}));if(t.length===i+2)return++f>=p?o.apply(null,[null].concat(n)):e();if(t.length===i+1)l(t,r,d.concat([v]),v);else{var g,b;try{b=t.apply(r,d)}catch(e){g=e,h=e}if(c(b))return b.then((function(){return v()}),(function(e){return v(e)}));if(++f>=p)return o.apply(null,[g].concat(n));e()}}}()},o.prototype.execPostSync=function(e,t,r){for(var n=s(this._posts,e,[]),i=n.length,o=0;o<i;++o)n[o].fn.apply(t,r||[])},o.prototype.createWrapperSync=function(e,t){var r=this;return function(){r.execPreSync(e,this,arguments);var n=t.apply(this,arguments);return r.execPostSync(e,this,[n]),n}},o.prototype.wrap=function(e,t,r,n,i){var o=n.length>0?n[n.length-1]:null,s=("function"==typeof o&&n.slice(0,n.length-1),this),l=(i=i||{}).checkForPromise;this.execPre(e,r,n,(function(c){if(c){for(var u=i.numCallbackParams||0,p=i.contextParameter?[r]:[],f=p.length;f<u;++f)p.push(null);return a(s,c,e,r,p,i,o)}var h="function"==typeof o?n.length-1:n.length,d=t.length,y=t.apply(r,n.slice(0,h).concat(m));if(l){if(null!=y&&"function"==typeof y.then)return y.then((function(e){return m(null,e)}),(function(e){return m(e)}));if(d<h+1)return m(null,y)}function m(){var t=Array.prototype.slice.call(arguments,1);if(i.nullResultByDefault&&0===t.length&&t.push(null),arguments[0])return a(s,arguments[0],e,r,t,i,o);s.execPost(e,r,t,(function(){return arguments[0]?"function"==typeof o?o(arguments[0]):void 0:"function"==typeof o?o.apply(r,arguments):void 0}))}}))},o.prototype.filter=function(e){for(var t=this,r=this.clone(),n=Array.from(r._pres.keys()),i=function(){var n=a[o],i=t._pres.get(n).map((function(e){return Object.assign({},e,{name:n})})).filter(e);if(0===i.length)return r._pres.delete(n),"continue";i.numAsync=i.filter((function(e){return e.isAsync})).length,r._pres.set(n,i)},o=0,a=n;o<a.length;o++)i();for(var s=Array.from(r._posts.keys()),l=function(){var n=u[c],i=t._posts.get(n).map((function(e){return Object.assign({},e,{name:n})})).filter(e);if(0===i.length)return r._posts.delete(n),"continue";r._posts.set(n,i)},c=0,u=s;c<u.length;c++)l();return r},o.prototype.hasHooks=function(e){return this._pres.has(e)||this._posts.has(e)},o.prototype.createWrapper=function(e,r,n,i){var o=this;return this.hasHooks(e)?function(){var t=n||this,a=Array.prototype.slice.call(arguments);o.wrap(e,r,t,a,i)}:function(){var e=arguments,n=this;t.nextTick((function(){return r.apply(n,e)}))}},o.prototype.pre=function(e,t,r,n,o){var a={};"object"===i(t)&&null!=t?t=(a=t).isAsync:"boolean"!=typeof arguments[1]&&(n=r,r=t,t=!1);var l=s(this._pres,e,[]);if(this._pres.set(e,l),t&&(l.numAsync=l.numAsync||0,++l.numAsync),"function"!=typeof r)throw new Error('pre() requires a function, got "'+i(r)+'"');return o?l.unshift(Object.assign({},a,{fn:r,isAsync:t})):l.push(Object.assign({},a,{fn:r,isAsync:t})),this},o.prototype.post=function(e,t,r,n){var o=s(this._posts,e,[]);if("function"==typeof t&&(n=!!r,r=t,t={}),"function"!=typeof r)throw new Error('post() requires a function, got "'+i(r)+'"');return n?o.unshift(Object.assign({},t,{fn:r})):o.push(Object.assign({},t,{fn:r})),this._posts.set(e,o),this},o.prototype.clone=function(){var e,t=new o,n=r(this._pres.keys());try{for(n.s();!(e=n.n()).done;){var i=e.value,a=this._pres.get(i).slice();a.numAsync=this._pres.get(i).numAsync,t._pres.set(i,a)}}catch(e){n.e(e)}finally{n.f()}var s,l=r(this._posts.keys());try{for(l.s();!(s=l.n()).done;){var c=s.value;t._posts.set(c,this._posts.get(c).slice())}}catch(e){l.e(e)}finally{l.f()}return t},o.prototype.merge=function(e,t){var n,i=(t=1===arguments.length||t)?this.clone():this,o=r(e._pres.keys());try{var a=function(){var t=n.value,r=s(i._pres,t,[]),o=e._pres.get(t).filter((function(e){return-1===r.map((function(e){return e.fn})).indexOf(e.fn)})),a=r.concat(o);a.numAsync=r.numAsync||0,a.numAsync+=o.filter((function(e){return e.isAsync})).length,i._pres.set(t,a)};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}var l,c=r(e._posts.keys());try{var u=function(){var t=l.value,r=s(i._posts,t,[]),n=e._posts.get(t).filter((function(e){return-1===r.indexOf(e)}));i._posts.set(t,r.concat(n))};for(c.s();!(l=c.n()).done;)u()}catch(e){c.e(e)}finally{c.f()}return i},e.exports=o}).call(this,r(11))},function(e,t,r){"use strict";var n=r(9),i=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t),null!=t&&null!=t.options&&(this.options=Object.assign({},t.options))};Object.defineProperty(i.prototype,"ref",n),Object.defineProperty(i.prototype,"refPath",n),Object.defineProperty(i.prototype,"localField",n),Object.defineProperty(i.prototype,"foreignField",n),Object.defineProperty(i.prototype,"justOne",n),Object.defineProperty(i.prototype,"count",n),Object.defineProperty(i.prototype,"match",n),Object.defineProperty(i.prototype,"options",n),Object.defineProperty(i.prototype,"skip",n),Object.defineProperty(i.prototype,"limit",n),Object.defineProperty(i.prototype,"perDocumentLimit",n),e.exports=i},function(e,t,r){"use strict";var n=r(3),i=r(21);e.exports=function(e){var t=[],r=new WeakMap,o=e.constructor.indexTypes,a=new Map;return function e(s,l,c){if(!r.has(s)){r.set(s,!0),l=l||"";for(var u=0,p=Object.keys(s.paths);u<p.length;u++){var f=p[u],h=s.paths[f];if(null==c||!c.paths[f]){if(h.$isMongooseDocumentArray||h.$isSingleNested){if(!0!==n(h,"options.excludeIndexes")&&!0!==n(h,"schemaOptions.excludeIndexes")&&!0!==n(h,"schema.options.excludeIndexes")&&e(h.schema,l+f+"."),null!=h.schema.discriminators)for(var d=h.schema.discriminators,y=0,m=Object.keys(d);y<m.length;y++){e(d[m[y]],l+f+".",h.schema)}if(h.$isMongooseDocumentArray)continue}var v=h._index||h.caster&&h.caster._index;if(!1!==v&&null!=v){var g={},b=i(v),_=b?v:{},w="string"==typeof v?v:!!b&&v.type;if(w&&-1!==o.indexOf(w))g[l+f]=w;else if(_.text)g[l+f]="text",delete _.text;else{var x=-1===Number(v);g[l+f]=x?-1:1}delete _.type,"background"in _||(_.background=!0),null!=s.options.autoIndex&&(_._autoIndex=s.options.autoIndex);var E=_&&_.name;"string"==typeof E&&a.has(E)?Object.assign(a.get(E),g):(t.push([g,_]),a.set(E,g))}}}r.delete(s),l?function(e,r){for(var n=e._indexes,i=n.length,o=0;o<i;++o){for(var a=n[o][0],s=n[o][1],l=Object.keys(a),c=l.length,u={},p=0;p<c;++p){var f=l[p];u[r+f]=a[f]}var h=Object.assign({},s);if(null!=s&&null!=s.partialFilterExpression){h.partialFilterExpression={};for(var d=s.partialFilterExpression,y=0,m=Object.keys(d);y<m.length;y++){var v=m[y];h.partialFilterExpression[r+v]=d[v]}}t.push([u,h])}}(s,l):(s._indexes.forEach((function(e){"background"in e[1]||(e[1].background=!0)})),t=t.concat(s._indexes))}}(e),t}},function(e,t,r){"use strict";var n=r(143),i=r(145),o=r(3),a=r(76),s=r(34);e.exports=function(e,t){var r=e.childSchemas.find((function(e){return!!e.schema.options.timestamps}));if(t||r){var l=a(t,"createdAt"),c=a(t,"updatedAt"),u=null!=t&&t.hasOwnProperty("currentTime")?t.currentTime:null,p={};e.$timestamps={createdAt:l,updatedAt:c},c&&!e.paths[c]&&(p[c]=Date),l&&!e.paths[l]&&(p[l]=Date),e.add(p),e.pre("save",(function(e){var t=o(this,"$__.saveOptions.timestamps");if(!1===t)return e();var r=null!=t&&!1===t.updatedAt,n=null!=t&&!1===t.createdAt,i=null!=u?u():(this.ownerDocument?this.ownerDocument():this).constructor.base.now(),a=this._id&&this._id.auto;if(!n&&l&&!this.get(l)&&this.$__isSelected(l)&&this.$set(l,a?this._id.getTimestamp():i),!r&&c&&(this.isNew||this.isModified())){var s=i;this.isNew&&(null!=l?s=this.$__getValue(l):a&&(s=this._id.getTimestamp())),this.$set(c,s)}e()})),e.methods.initializeTimestamps=function(){var e=null!=u?u():this.constructor.base.now();return l&&!this.get(l)&&this.$set(l,e),c&&!this.get(c)&&this.$set(c,e),this},h[s.builtInMiddleware]=!0;var f={query:!0,model:!1};e.pre("findOneAndReplace",f,h),e.pre("findOneAndUpdate",f,h),e.pre("replaceOne",f,h),e.pre("update",f,h),e.pre("updateOne",f,h),e.pre("updateMany",f,h)}function h(e){var t=null!=u?u():this.model.base.now();"findOneAndReplace"===this.op&&null==this.getUpdate()&&this.setUpdate({}),i(t,l,c,this.getUpdate(),this.options,this.schema),n(t,this.getUpdate(),this.model.schema),e()}}},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(144),a=r(76);function s(e,t,r){if(null!=t){if(Object.keys(t).some((function(e){return e.startsWith("$")}))){if(t.$push)for(var i=0,o=Object.keys(t.$push);i<o.length;i++){var s=o[i],c=r.path(s);t.$push[s]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps&&function(){var r=c.schema.options.timestamps,n=a(r,"createdAt"),i=a(r,"updatedAt");t.$push[s].$each?t.$push[s].$each.forEach((function(t){null!=i&&(t[i]=e),null!=n&&(t[n]=e)})):(null!=i&&(t.$push[s][i]=e),null!=n&&(t.$push[s][n]=e))}()}if(null!=t.$set)for(var u=0,p=Object.keys(t.$set);u<p.length;u++)l(r,p[u],t.$set,e)}var f,h=n(Object.keys(t).filter((function(e){return!e.startsWith("$")})));try{for(h.s();!(f=h.n()).done;)l(r,f.value,t,e)}catch(e){h.e(e)}finally{h.f()}}}function l(e,t,r,i){var l=o(t),c=e.path(l);if(c){for(var u=[],p=l.split("."),f=p.length-1;f>0;--f){var h=e.path(p.slice(0,f).join("."));null!=h&&(h.$isMongooseDocumentArray||h.$isSingleNested)&&u.push({parentPath:t.split(".").slice(0,f).join("."),parentSchemaType:h})}if(Array.isArray(r[t])&&c.$isMongooseDocumentArray)!function(e,t,r){var n=t.schema.options.timestamps;if(n)for(var i=e.length,o=a(n,"createdAt"),l=a(n,"updatedAt"),c=0;c<i;++c)null!=l&&(e[c][l]=r),null!=o&&(e[c][o]=r),s(r,e[c],t.schema)}(r[t],c,i);else if(r[t]&&c.$isSingleNested)!function(e,t,r){var n=t.schema.options.timestamps;if(n){var i=a(n,"createdAt"),o=a(n,"updatedAt");null!=o&&(e[o]=r),null!=i&&(e[i]=r),s(r,e,t.schema)}}(r[t],c,i);else if(u.length>0){var d,y=n(u);try{for(y.s();!(d=y.n()).done;){var m=d.value,v=m.parentPath,g=m.parentSchemaType,b=g.schema.options.timestamps,_=a(b,"updatedAt");if(b&&null!=_)if(g.$isSingleNested)r[v+"."+_]=i;else if(g.$isMongooseDocumentArray){var w=t.substr(v.length+1);if(/^\d+$/.test(w)){r[v+"."+w][_]=i;continue}var x=w.indexOf(".");r[v+"."+(w=-1!==x?w.substr(0,x):w)+"."+_]=i}}}catch(e){y.e(e)}finally{y.f()}}else if(null!=c.schema&&c.schema!=e&&r[t]){var E=c.schema.options.timestamps,S=a(E,"createdAt"),k=a(E,"updatedAt");if(!E)return;null!=k&&(r[t][k]=i),null!=S&&(r[t][S]=i)}}}e.exports=s},function(e,t,r){"use strict";e.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e,t,r,i,o){var a=i,s=a,l=n(o,"overwrite",!1),c=n(o,"timestamps",!0);if(!c||null==a)return i;var u=null!=c&&!1===c.createdAt,p=null!=c&&!1===c.updatedAt;if(l)return i&&i.$set&&(i=i.$set,a.$set={},s=a.$set),p||!r||i[r]||(s[r]=e),u||!t||i[t]||(s[t]=e),a;if(i=i||{},Array.isArray(a))return a.push({$set:{updatedAt:e}}),a;if(a.$set=a.$set||{},!p&&r&&(!i.$currentDate||!i.$currentDate[r])){var f=!1;if(-1!==r.indexOf("."))for(var h=r.split("."),d=1;d<h.length;++d){var y=h.slice(-d).join("."),m=h.slice(0,-d).join(".");if(null!=i[m]){i[m][y]=e,f=!0;break}if(i.$set&&i.$set[m]){i.$set[m][y]=e,f=!0;break}}f||(a.$set[r]=e),a.hasOwnProperty(r)&&delete a[r]}if(!u&&t){i[t]&&delete i[t],i.$set&&i.$set[t]&&delete i.$set[t];var v=!1;if(-1!==t.indexOf("."))for(var g=t.split("."),b=1;b<g.length;++b){var _=g.slice(-b).join("."),w=g.slice(0,-b).join(".");if(null!=i[w]){i[w][_]=e,v=!0;break}if(i.$set&&i.$set[w]){i.$set[w][_]=e,v=!0;break}}v||(a.$setOnInsert=a.$setOnInsert||{},a.$setOnInsert[t]=e)}return 0===Object.keys(a.$set).length&&delete a.$set,a}},function(e,t,r){"use strict";var n=r(14),i=r(4);e.exports=function(e,t){if("string"!=typeof e&&"function"!=typeof e)throw new n('Invalid ref at path "'+t+'". Got '+i.inspect(e,{depth:0}))}},function(e,t,r){"use strict";function n(e,t){var r={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0},i=t.hooks.filter((function(e){var t=function(e){var t={};return e.hasOwnProperty("query")&&(t.query=e.query),e.hasOwnProperty("document")&&(t.document=e.document),t}(e);return"updateOne"===e.name?null==t.query||!!t.query:"deleteOne"===e.name?!!t.query||0===Object.keys(t).length:"validate"===e.name||"remove"===e.name?!!t.query:null==e.query&&null==e.document||!!e.query}));e.prototype._execUpdate=i.createWrapper("update",e.prototype._execUpdate,null,r),e.prototype.__distinct=i.createWrapper("distinct",e.prototype.__distinct,null,r),e.prototype.validate=i.createWrapper("validate",e.prototype.validate,null,r),n.middlewareFunctions.filter((function(e){return"update"!==e&&"distinct"!==e&&"validate"!==e})).forEach((function(t){e.prototype["_".concat(t)]=i.createWrapper(t,e.prototype["_".concat(t)],null,r)}))}e.exports=n,n.middlewareFunctions=["count","countDocuments","deleteMany","deleteOne","distinct","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndRemove","findOneAndReplace","findOneAndUpdate","remove","replaceOne","update","updateMany","updateOne","validate"]},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(6),a=r(5),s=r(149),l=r(78),c=r(1),u=o.CastError;function p(e,t){this.enumValues=[],this.regExp=null,o.call(this,e,t,"String")}function f(e){return this.castForQuery(e)}p.schemaName="String",p.defaultOptions={},p.prototype=Object.create(o.prototype),p.prototype.constructor=p,Object.defineProperty(p.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:s}),p._cast=l,p.cast=function(e){return 0===arguments.length||(!1===e&&(e=this._defaultCaster),this._cast=e),this._cast},p._defaultCaster=function(e){if(null!=e&&"string"!=typeof e)throw new Error;return e},p.get=o.get,p.set=o.set,p._checkRequired=function(e){return(e instanceof String||"string"==typeof e)&&e.length},p.checkRequired=o.checkRequired,p.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.enumValidator}),this),this.enumValidator=!1),void 0===arguments[0]||!1===arguments[0])return this;var e,t;c.isObject(arguments[0])?Array.isArray(arguments[0].values)?(e=arguments[0].values,t=arguments[0].message):(e=c.object.vals(arguments[0]),t=a.messages.String.enum):(e=arguments,t=a.messages.String.enum);var r,i=n(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;void 0!==o&&this.enumValues.push(this.cast(o))}}catch(e){i.e(e)}finally{i.f()}var s=this.enumValues;return this.enumValidator=function(e){return void 0===e||~s.indexOf(e)},this.validators.push({validator:this.enumValidator,message:t,type:"enum",enumValues:s}),this},p.prototype.lowercase=function(e){return arguments.length>0&&!e?this:this.set((function(e,t){return"string"!=typeof e&&(e=t.cast(e)),e?e.toLowerCase():e}))},p.prototype.uppercase=function(e){return arguments.length>0&&!e?this:this.set((function(e,t){return"string"!=typeof e&&(e=t.cast(e)),e?e.toUpperCase():e}))},p.prototype.trim=function(e){return arguments.length>0&&!e?this:this.set((function(e,t){return"string"!=typeof e&&(e=t.cast(e)),e?e.trim():e}))},p.prototype.minlength=function(e,t){if(this.minlengthValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.minlengthValidator}),this)),null!=e){var r=t||a.messages.String.minlength;r=r.replace(/{MINLENGTH}/,e),this.validators.push({validator:this.minlengthValidator=function(t){return null===t||t.length>=e},message:r,type:"minlength",minlength:e})}return this},p.prototype.minLength=p.prototype.minlength,p.prototype.maxlength=function(e,t){if(this.maxlengthValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.maxlengthValidator}),this)),null!=e){var r=t||a.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,e),this.validators.push({validator:this.maxlengthValidator=function(t){return null===t||t.length<=e},message:r,type:"maxlength",maxlength:e})}return this},p.prototype.maxLength=p.prototype.maxlength,p.prototype.match=function(e,t){var r=t||a.messages.String.match;return this.validators.push({validator:function(t){return!!e&&(e.lastIndex=0,null==t||""===t||e.test(t))},message:r,type:"regexp",regexp:e}),this},p.prototype.checkRequired=function(e,t){return o._isRef(this,e,t,!0)?!!e:("function"==typeof this.constructor.checkRequired?this.constructor.checkRequired():p.checkRequired())(e)},p.prototype.cast=function(e,t,r){if(o._isRef(this,e,t,r))return"string"==typeof e?e:this._castRef(e,t,r);var n;n="function"==typeof this._castFunction?this._castFunction:"function"==typeof this.constructor.cast?this.constructor.cast():p.cast();try{return n(e)}catch(t){throw new u("string",e,this.path,null,this)}};var h=c.options(o.prototype.$conditionalHandlers,{$all:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.castForQuery(e)})):[this.castForQuery(e)]},$gt:f,$gte:f,$lt:f,$lte:f,$options:String,$regex:f,$not:f});Object.defineProperty(p.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(h)}),p.prototype.castForQuery=function(e,t){var r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new Error("Can't use "+e+" with String.");return r.call(this,t)}return t=e,"[object RegExp]"===Object.prototype.toString.call(t)?t:this._castForQuery(t)},e.exports=p},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"enum",l),Object.defineProperty(s.prototype,"match",l),Object.defineProperty(s.prototype,"lowercase",l),Object.defineProperty(s.prototype,"trim",l),Object.defineProperty(s.prototype,"uppercase",l),Object.defineProperty(s.prototype,"minLength",l),Object.defineProperty(s.prototype,"minlength",l),Object.defineProperty(s.prototype,"maxLength",l),Object.defineProperty(s.prototype,"maxlength",l),Object.defineProperty(s.prototype,"populate",l),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"min",l),Object.defineProperty(s.prototype,"max",l),Object.defineProperty(s.prototype,"enum",l),Object.defineProperty(s.prototype,"populate",l),e.exports=s},function(e,t,r){"use strict";var n=r(23);e.exports=function(e){return null==e?e:""===e?null:("string"!=typeof e&&"boolean"!=typeof e||(e=Number(e)),n.ok(!isNaN(e)),e instanceof Number?e.valueOf():"number"==typeof e?e:Array.isArray(e)||"function"!=typeof e.valueOf?e.toString&&!Array.isArray(e)&&e.toString()==Number(e)?Number(e):void n.ok(!1):Number(e.valueOf()))}},function(e,t,r){"use strict";var n=r(13),i=r(6),o=r(52),a=r(1);function s(e,t){i.call(this,e,t,"Boolean")}s.schemaName="Boolean",s.defaultOptions={},s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s._cast=o,s.set=i.set,s.cast=function(e){return 0===arguments.length||(!1===e&&(e=this._defaultCaster),this._cast=e),this._cast},s._defaultCaster=function(e){if(null!=e&&"boolean"!=typeof e)throw new Error;return e},s._checkRequired=function(e){return!0===e||!1===e},s.checkRequired=i.checkRequired,s.prototype.checkRequired=function(e){return this.constructor._checkRequired(e)},Object.defineProperty(s,"convertToTrue",{get:function(){return o.convertToTrue},set:function(e){o.convertToTrue=e}}),Object.defineProperty(s,"convertToFalse",{get:function(){return o.convertToFalse},set:function(e){o.convertToFalse=e}}),s.prototype.cast=function(e){var t;t="function"==typeof this._castFunction?this._castFunction:"function"==typeof this.constructor.cast?this.constructor.cast():s.cast();try{return t(e)}catch(t){throw new n("Boolean",e,this.path,t,this)}},s.$conditionalHandlers=a.options(i.prototype.$conditionalHandlers,{}),s.prototype.castForQuery=function(e,t){var r;return 2===arguments.length?(r=s.$conditionalHandlers[e])?r.call(this,t):this._castForQuery(t):this._castForQuery(e)},s.prototype._castNullish=function(e){if(void 0===e&&null!=this.$$context&&null!=this.$$context._mongooseOptions&&this.$$context._mongooseOptions.omitUndefined)return e;var t="function"==typeof this.constructor.cast?this.constructor.cast():s.cast();return null==t?e:!(t.convertToFalse instanceof Set&&t.convertToFalse.has(e))&&(!!(t.convertToTrue instanceof Set&&t.convertToTrue.has(e))||e)},e.exports=s},function(e,t,r){"use strict";var n,i,o=r(56),a=r(13),s=r(19).EventEmitter,l=r(159),c=r(6),u=r(32),p=r(92),f=r(3),h=r(93),d=r(4),y=r(1),m=r(94),v=r(0).arrayAtomicsSymbol,g=r(0).arrayPathSymbol,b=r(0).documentArrayParent;function _(e,t,r,n){null!=n&&null!=n._id?t=h(t,n):null!=r&&null!=r._id&&(t=h(t,r));var i=w(t,r);i.prototype.$basePath=e,o.call(this,e,i,r),this.schema=t,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=i,i.base=t.base;var a=this.defaultValue;"defaultValue"in this&&void 0===a||this.default((function(){var e=a.call(this);return Array.isArray(e)||(e=[e]),e}));var s=this;this.$embeddedSchemaType=new c(e+".$",{required:f(this,"schemaOptions.required",!1)}),this.$embeddedSchemaType.cast=function(e,t,r){return s.cast(e,t,r)[0]},this.$embeddedSchemaType.$isMongooseDocumentArrayElement=!0,this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}function w(e,t,n){function o(){i.apply(this,arguments),this.$session(this.ownerDocument().$session())}i||(i=r(27));var a=null!=n?n.prototype:i.prototype;for(var l in o.prototype=Object.create(a),o.prototype.$__setSchema(e),o.schema=e,o.prototype.constructor=o,o.$isArraySubdocument=!0,o.events=new s,e.methods)o.prototype[l]=e.methods[l];for(var c in e.statics)o[c]=e.statics[c];for(var u in s.prototype)o[u]=s.prototype[u];return o.options=t,o}function x(e,t,r){if(r&&t){for(var n,i,o,a=e.path+".",s=Object.keys(t),l=s.length,c={};l--;)if((i=s[l]).startsWith(a)){if("$"===(o=i.substring(a.length)))continue;o.startsWith("$.")&&(o=o.substr(2)),n||(n=!0),c[o]=t[i]}return n&&c||void 0}}_.schemaName="DocumentArray",_.options={castNonArrays:!0},_.prototype=Object.create(o.prototype),_.prototype.constructor=_,_.prototype.OptionsConstructor=l,_.prototype.discriminator=function(e,t,r){"function"==typeof e&&(e=y.getFunctionName(e));var n=w(t=p(this.casterConstructor,e,t,r),null,this.casterConstructor);n.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(n,"name",{value:e})}catch(e){}return this.casterConstructor.discriminators[e]=n,this.casterConstructor.discriminators[e]},_.prototype.doValidate=function(e,t,o,a){n||(n=r(18));var s=this;try{c.prototype.doValidate.call(this,e,(function(r){if(r)return r.$isArrayValidatorError=!0,t(r);var l,c=e&&e.length;if(!c)return t();if(a&&a.updateValidator)return t();function p(e){null!=e&&((l=e)instanceof u||(l.$isArrayValidatorError=!0)),--c||t(l)}e.isMongooseDocumentArray||(e=new n(e,s.path,o));for(var f=0,h=c;f<h;++f){var d=e[f];if(null!=d){if(!(d instanceof i)){var y=m(s.casterConstructor,e[f]);d=e[f]=new y(d,e,void 0,void 0,f)}null==a||!a.validateModifiedOnly||d.isModified()?d.$__validate(p):--c||t(l)}else--c||t(l)}}),o)}catch(e){return e.$isArrayValidatorError=!0,t(e)}},_.prototype.doValidateSync=function(e,t,r){var n=c.prototype.doValidateSync.call(this,e,t);if(null!=n)return n.$isArrayValidatorError=!0,n;var o=e&&e.length,a=null;if(o){for(var s=0,l=o;s<l;++s){var u=e[s];if(u){if(!(u instanceof i)){var p=m(this.casterConstructor,e[s]);u=e[s]=new p(u,e,void 0,void 0,s)}if(null==r||!r.validateModifiedOnly||u.isModified()){var f=u.validateSync();f&&null==a&&(a=f)}}}return a}},_.prototype.getDefault=function(e){var t="function"==typeof this.defaultValue?this.defaultValue.call(e):this.defaultValue;if(null==t)return t;n||(n=r(18)),Array.isArray(t)||(t=[t]),t=new n(t,this.path,e);for(var i=0;i<t.length;++i){var o=new(m(this.casterConstructor,t[i]))({},t,void 0,void 0,i);o.init(t[i]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},t[i]=o}return t},_.prototype.cast=function(e,t,o,s,l){if(n||(n=r(18)),null!=e&&null!=e[g]&&e===s)return e;var c,u,p={transform:!1,virtuals:!1};if(l=l||{},!Array.isArray(e)){if(!o&&!_.options.castNonArrays)throw new a("DocumentArray",d.inspect(e),this.path,null,this);return t&&o&&t.markModified(this.path),this.cast([e],t,o,s,l)}e&&e.isMongooseDocumentArray||l.skipDocumentArrayCast?e&&e.isMongooseDocumentArray&&(e=new n(e,this.path,t)):e=new n(e,this.path,t),null!=s&&(e[v]=s[v]||{}),null!=l.arrayPathIndex&&(e[g]=this.path+"."+l.arrayPathIndex);for(var f=e.length,h={skipId:!0,willInit:!0},w=0;w<f;++w)if(e[w]){var E=m(this.casterConstructor,e[w]);if(!e[w].$__||e[w]instanceof E&&e[w][b]===t||(e[w]=e[w].toObject({transform:!1,virtuals:e[w].schema===E.schema})),e[w]instanceof i)null==e[w].__index&&e[w].$setIndex(w);else if(null!=e[w])if(o)t?c||(c=x(this,t.$__.selected,o)):c=!0,u=new E(null,e,h,c,w),e[w]=u.init(e[w]);else if(s&&"function"==typeof s.id&&(u=s.id(e[w]._id)),s&&u&&y.deepEqual(u.toObject(p),e[w]))u.set(e[w]),e[w]=u;else try{u=new E(e[w],e,void 0,void 0,w),e[w]=u}catch(t){var S=d.inspect(e[w]);throw new a("embedded",S,e[g],t,this)}}return e},_.prototype.clone=function(){var e=Object.assign({},this.options),t=new this.constructor(this.path,this.schema,e,this.schemaOptions);return t.validators=this.validators.slice(),void 0!==this.requiredValidator&&(t.requiredValidator=this.requiredValidator),t.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),t},_.prototype.applyGetters=function(e,t){return c.prototype.applyGetters.call(this,e,t)},_.defaultOptions={},_.set=c.set,e.exports=_},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"enum",l),Object.defineProperty(s.prototype,"of",l),e.exports=s},function(e,t,r){"use strict";e.exports=function e(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(0===t.length)return{min:1,max:1,containsNonArrayItem:!1};if(1===t.length&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};for(var r=e(t[0]),n=1;n<t.length;++n){var i=e(t[n]);i.min<r.min&&(r.min=i.min),i.max>r.max&&(r.max=i.max),r.containsNonArrayItem=r.containsNonArrayItem||i.containsNonArrayItem}return r.min=r.min+1,r.max=r.max+1,r}},function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(13),s=r(33),l=r(55),c=r(157),u=r(3),p=r(158),f=r(82),h=r(4),d=r(21),y=r(30),m=["Polygon","MultiPolygon"];function v(e,t,r){if(Array.isArray(e))e.forEach((function(n,i){if(Array.isArray(n)||d(n))return v(n,t,r);e[i]=t.castForQueryWrapper({val:n,context:r})}));else for(var n=Object.keys(e),i=n.length;i--;){var o=n[i],a=e[o];Array.isArray(a)||d(a)?(v(a,t,r),e[o]=a):e[o]=t.castForQuery({val:a,context:r})}}e.exports=function e(t,r,i,g){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",h.inspect(r));if(null==r)return r;r.hasOwnProperty("_bsontype")&&"ObjectID"!==r._bsontype&&delete r._bsontype,null!=t&&null!=t.discriminators&&null!=r[t.options.discriminatorKey]&&(t=p(t,r[t.options.discriminatorKey])||t);var b,_,w,x,E,S,k=Object.keys(r),T=k.length;for(i=i||{};T--;)if(S=r[x=k[T]],"$or"===x||"$nor"===x||"$and"===x){if(!Array.isArray(S))throw new a("Array",S,x);for(var O=0;O<S.length;++O){if(null==S[O]||"object"!==o(S[O]))throw new a("Object",S[O],x+"."+O);S[O]=e(t,S[O],i,g)}}else{if("$where"===x){if("string"!==(E=o(S))&&"function"!==E)throw new Error("Must have a string or function for $where");"function"===E&&(r[x]=S.toString());continue}if("$elemMatch"===x)S=e(t,S,i,g);else if("$text"===x)S=c(S,x);else{if(!t)continue;if(!(_=t.path(x)))for(var A=x.split("."),P=A.length;P--;){var C=A.slice(0,P).join("."),N=A.slice(P).join("."),R=t.path(C),j=u(R,"schema.options.discriminatorKey");if(null!=R&&null!=u(R,"schema.discriminators")&&null!=j&&N!==j){var M=u(r,C+"."+j);null!=M&&(_=R.schema.discriminators[M].path(N))}}if(_){if(null==S)continue;if("Object"===S.constructor.name)if(Object.keys(S).some(f))for(var I=Object.keys(S),D=void 0,L=I.length;L--;)if(w=S[D=I[L]],"$not"===D){if(w&&_&&!_.caster){if((b=Object.keys(w)).length&&f(b[0]))for(var F in w)w[F]=_.castForQueryWrapper({$conditional:F,val:w[F],context:g});else S[D]=_.castForQueryWrapper({$conditional:D,val:w,context:g});continue}e(_.caster?_.caster.schema:t,w,i,g)}else S[D]=_.castForQueryWrapper({$conditional:D,val:w,context:g});else r[x]=_.castForQueryWrapper({val:S,context:g});else if(Array.isArray(S)&&-1===["Buffer","Array"].indexOf(_.instance)){var B,z=[],$=n(S);try{for($.s();!(B=$.n()).done;){var U=B.value;z.push(_.castForQueryWrapper({val:U,context:g}))}}catch(e){$.e(e)}finally{$.f()}r[x]={$in:z}}else r[x]=_.castForQueryWrapper({val:S,context:g})}else{for(var H=x.split("."),V=H.length,G=void 0,q=void 0,W=void 0;V--&&(G=H.slice(0,V).join("."),!(_=t.path(G))););if(_){_.caster&&_.caster.schema?((W={})[q=H.slice(V).join(".")]=S,r[x]=e(_.caster.schema,W,i,g)[q]):r[x]=S;continue}if(d(S)){var Y="";if(S.$near?Y="$near":S.$nearSphere?Y="$nearSphere":S.$within?Y="$within":S.$geoIntersects?Y="$geoIntersects":S.$geoWithin&&(Y="$geoWithin"),Y){var K=new l.Number("__QueryCasting__"),X=S[Y];if(null!=S.$maxDistance&&(S.$maxDistance=K.castForQueryWrapper({val:S.$maxDistance,context:g})),null!=S.$minDistance&&(S.$minDistance=K.castForQueryWrapper({val:S.$minDistance,context:g})),"$within"===Y){var Z=X.$center||X.$centerSphere||X.$box||X.$polygon;if(!Z)throw new Error("Bad $within parameter: "+JSON.stringify(S));X=Z}else if("$near"===Y&&"string"==typeof X.type&&Array.isArray(X.coordinates))X=X.coordinates;else if(("$near"===Y||"$nearSphere"===Y||"$geoIntersects"===Y)&&X.$geometry&&"string"==typeof X.$geometry.type&&Array.isArray(X.$geometry.coordinates))null!=X.$maxDistance&&(X.$maxDistance=K.castForQueryWrapper({val:X.$maxDistance,context:g})),null!=X.$minDistance&&(X.$minDistance=K.castForQueryWrapper({val:X.$minDistance,context:g})),y(X.$geometry)&&(X.$geometry=X.$geometry.toObject({transform:!1,virtuals:!1})),X=X.$geometry.coordinates;else if("$geoWithin"===Y)if(X.$geometry){y(X.$geometry)&&(X.$geometry=X.$geometry.toObject({virtuals:!1}));var J=X.$geometry.type;if(-1===m.indexOf(J))throw new Error('Invalid geoJSON type for $geoWithin "'+J+'", must be "Polygon" or "MultiPolygon"');X=X.$geometry.coordinates}else X=X.$box||X.$polygon||X.$center||X.$centerSphere,y(X)&&(X=X.toObject({virtuals:!1}));v(X,K,g);continue}}if(t.nested[x])continue;if(i.upsert&&i.strict){if("throw"===i.strict)throw new s(x);throw new s(x,'Path "'+x+'" is not in schema, strict mode is `true`, and upsert is `true`.')}if("throw"===i.strictQuery)throw new s(x,'Path "'+x+"\" is not in schema and strictQuery is 'throw'.");i.strictQuery&&delete r[x]}}}return r}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(13),o=r(52),a=r(78);e.exports=function(e,t){if(null==e||"object"!==n(e))throw new i("$text",e,t);return null!=e.$search&&(e.$search=a(e.$search,t+".$search")),null!=e.$language&&(e.$language=a(e.$language,t+".$language")),null!=e.$caseSensitive&&(e.$caseSensitive=o(e.$caseSensitive,t+".$castSensitive")),null!=e.$diacriticSensitive&&(e.$diacriticSensitive=o(e.$diacriticSensitive,t+".$diacriticSensitive")),e}},function(e,t,r){"use strict";var n=r(81);e.exports=function(e,t){if(null==e||null==e.discriminators)return null;for(var r=0,i=Object.keys(e.discriminators);r<i.length;r++){var o=i[r],a=e.discriminators[o];if(null!=a.discriminatorMapping&&n(a.discriminatorMapping.value,t))return a}return null}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"excludeIndexes",l),Object.defineProperty(s.prototype,"_id",l),e.exports=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=r(13),a=r(19).EventEmitter,s=r(74),l=r(161),c=r(6),u=r(51),p=r(35).castToNumber,f=r(92),h=r(83),d=r(3),y=r(94),m=r(93),v=r(17).internalToObjectOptions;function g(e,t,r){e=m(e,r),this.caster=b(e),this.caster.path=t,this.caster.prototype.$basePath=t,this.schema=e,this.$isSingleNested=!0,c.call(this,t,r,"Embedded")}function b(e,t){i||(i=r(91));var n=function(e,t,r){var n=this;this.$__parent=r,i.apply(this,arguments),this.$session(this.ownerDocument().$session()),r&&(r.on("save",(function(){n.emit("save",n),n.constructor.emit("save",n)})),r.on("isNew",(function(e){n.isNew=e,n.emit("isNew",e),n.constructor.emit("isNew",e)})))},o=null!=t?t.prototype:i.prototype;for(var s in(n.prototype=Object.create(o)).$__setSchema(e),n.prototype.constructor=n,n.schema=e,n.$isSingleNested=!0,n.events=new a,n.prototype.toBSON=function(){return this.toObject(v)},e.methods)n.prototype[s]=e.methods[s];for(var l in e.statics)n[l]=e.statics[l];for(var c in a.prototype)n[c]=a.prototype[c];return n}e.exports=g,g.prototype=Object.create(c.prototype),g.prototype.constructor=g,g.prototype.OptionsConstructor=l,g.prototype.$conditionalHandlers.$geoWithin=function(e){return{$geometry:this.castForQuery(e.$geometry)}},g.prototype.$conditionalHandlers.$near=g.prototype.$conditionalHandlers.$nearSphere=h.cast$near,g.prototype.$conditionalHandlers.$within=g.prototype.$conditionalHandlers.$geoWithin=h.cast$within,g.prototype.$conditionalHandlers.$geoIntersects=h.cast$geoIntersects,g.prototype.$conditionalHandlers.$minDistance=p,g.prototype.$conditionalHandlers.$maxDistance=p,g.prototype.$conditionalHandlers.$exists=u,g.prototype.cast=function(e,t,r,i,o){if(e&&e.$isSingleNested&&e.parent===t)return e;if(null!=e&&("object"!==n(e)||Array.isArray(e)))throw new s(this.path,e);var a,l=y(this.caster,e),c=d(t,"$__.selected",{}),u=this.path,p=Object.keys(c).reduce((function(e,t){return t.startsWith(u+".")&&(e[t.substr(u.length+1)]=c[t]),e}),{});return o=Object.assign({},o,{priorDoc:i}),r?((a=new l(void 0,p,t)).init(e),a):0===Object.keys(e).length?new l({},p,t,void 0,o):new l(e,p,t,void 0,o)},g.prototype.castForQuery=function(e,t,r){var n;if(2===arguments.length){if(!(n=this.$conditionalHandlers[e]))throw new Error("Can't use "+e);return n.call(this,t)}if(null==(t=e))return t;this.options.runSetters&&(t=this._applySetters(t));var i=y(this.caster,t),a=null!=r&&null!=r.strict?r.strict:void 0;try{t=new i(t,a)}catch(e){if(!(e instanceof o))throw new o("Embedded",t,this.path,e,this);throw e}return t},g.prototype.doValidate=function(e,t,r,n){var i=y(this.caster,e);if(n&&n.skipSchemaValidators)return e instanceof i||(e=new i(e,null,r)),e.validate(t);c.prototype.doValidate.call(this,e,(function(r){return r?t(r):e?void e.validate(t):t(null)}),r,n)},g.prototype.doValidateSync=function(e,t,r){if(!r||!r.skipSchemaValidators){var n=c.prototype.doValidateSync.call(this,e,t);if(n)return n}if(e)return e.validateSync()},g.prototype.discriminator=function(e,t,r){return t=f(this.caster,e,t,r),this.caster.discriminators[e]=b(t,this.caster),this.caster.discriminators[e]},g.defaultOptions={},g.set=c.set,g.prototype.clone=function(){var e=Object.assign({},this.options),t=new this.constructor(this.schema,this.path,e);return t.validators=this.validators.slice(),void 0!==this.requiredValidator&&(t.requiredValidator=this.requiredValidator),t.caster.discriminators=Object.assign({},this.caster.discriminators),t}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"_id",l),e.exports=s},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(87),o=r(163),a=r(6),s=r(80),l=r(1),c=i.Binary,u=a.CastError;function p(e,t){a.call(this,e,t,"Buffer")}function f(e){return this.castForQuery(e)}p.schemaName="Buffer",p.defaultOptions={},p.prototype=Object.create(a.prototype),p.prototype.constructor=p,p.prototype.OptionsConstructor=o,p._checkRequired=function(e){return!(!e||!e.length)},p.set=a.set,p.checkRequired=a.checkRequired,p.prototype.checkRequired=function(e,t){return a._isRef(this,e,t,!0)?!!e:this.constructor._checkRequired(e)},p.prototype.cast=function(e,r,o){var s;if(a._isRef(this,e,r,o)){if(e&&e.isMongooseBuffer)return e;if(t.isBuffer(e))return e&&e.isMongooseBuffer||(e=new i(e,[this.path,r]),null!=this.options.subtype&&(e._subtype=this.options.subtype)),e;if(e instanceof c){if(s=new i(e.value(!0),[this.path,r]),"number"!=typeof e.sub_type)throw new u("Buffer",e,this.path,null,this);return s._subtype=e.sub_type,s}return this._castRef(e,r,o)}if(e&&e._id&&(e=e._id),e&&e.isMongooseBuffer)return e;if(t.isBuffer(e))return e&&e.isMongooseBuffer||(e=new i(e,[this.path,r]),null!=this.options.subtype&&(e._subtype=this.options.subtype)),e;if(e instanceof c){if(s=new i(e.value(!0),[this.path,r]),"number"!=typeof e.sub_type)throw new u("Buffer",e,this.path,null,this);return s._subtype=e.sub_type,s}if(null===e)return e;var l=n(e);if("string"===l||"number"===l||Array.isArray(e)||"object"===l&&"Buffer"===e.type&&Array.isArray(e.data))return"number"===l&&(e=[e]),s=new i(e,[this.path,r]),null!=this.options.subtype&&(s._subtype=this.options.subtype),s;throw new u("Buffer",e,this.path,null,this)},p.prototype.subtype=function(e){return this.options.subtype=e,this},p.prototype.$conditionalHandlers=l.options(a.prototype.$conditionalHandlers,{$bitsAllClear:s,$bitsAnyClear:s,$bitsAllSet:s,$bitsAnySet:s,$gt:f,$gte:f,$lt:f,$lte:f}),p.prototype.castForQuery=function(e,t){var r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new Error("Can't use "+e+" with Buffer.");return r.call(this,t)}t=e;var n=this._castForQuery(t);return n?n.toObject({transform:!1,virtuals:!1}):n},e.exports=p}).call(this,r(2).Buffer)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"subtype",l),e.exports=s},function(e,t,r){"use strict";var n=r(5),i=r(165),o=r(6),a=r(166),s=r(1),l=o.CastError;function c(e,t){o.call(this,e,t,"Date")}function u(e){return this.cast(e)}c.schemaName="Date",c.defaultOptions={},c.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.prototype.OptionsConstructor=i,c._cast=a,c.set=o.set,c.cast=function(e){return 0===arguments.length||(!1===e&&(e=this._defaultCaster),this._cast=e),this._cast},c._defaultCaster=function(e){if(null!=e&&!(e instanceof Date))throw new Error;return e},c.prototype.expires=function(e){return this._index&&"Object"===this._index.constructor.name||(this._index={}),this._index.expires=e,s.expires(this._index),this},c._checkRequired=function(e){return e instanceof Date},c.checkRequired=o.checkRequired,c.prototype.checkRequired=function(e,t){return o._isRef(this,e,t,!0)?!!e:("function"==typeof this.constructor.checkRequired?this.constructor.checkRequired():c.checkRequired())(e)},c.prototype.min=function(e,t){if(this.minValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.minValidator}),this)),e){var r=t||n.messages.Date.min;"string"==typeof r&&(r=r.replace(/{MIN}/,e===Date.now?"Date.now()":e.toString()));var i=this;this.validators.push({validator:this.minValidator=function(t){var r=e;"function"==typeof e&&e!==Date.now&&(r=r.call(this));var n=r===Date.now?r():i.cast(r);return null===t||t.valueOf()>=n.valueOf()},message:r,type:"min",min:e})}return this},c.prototype.max=function(e,t){if(this.maxValidator&&(this.validators=this.validators.filter((function(e){return e.validator!==this.maxValidator}),this)),e){var r=t||n.messages.Date.max;"string"==typeof r&&(r=r.replace(/{MAX}/,e===Date.now?"Date.now()":e.toString()));var i=this;this.validators.push({validator:this.maxValidator=function(t){var r=e;"function"==typeof r&&r!==Date.now&&(r=r.call(this));var n=r===Date.now?r():i.cast(r);return null===t||t.valueOf()<=n.valueOf()},message:r,type:"max",max:e})}return this},c.prototype.cast=function(e){var t;t="function"==typeof this._castFunction?this._castFunction:"function"==typeof this.constructor.cast?this.constructor.cast():c.cast();try{return t(e)}catch(t){throw new l("date",e,this.path,t,this)}},c.prototype.$conditionalHandlers=s.options(o.prototype.$conditionalHandlers,{$gt:u,$gte:u,$lt:u,$lte:u}),c.prototype.castForQuery=function(e,t){if(2!==arguments.length)return this._castForQuery(e);var r=this.$conditionalHandlers[e];if(!r)throw new Error("Can't use "+e+" with Date.");return r.call(this,t)},e.exports=c},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"min",l),Object.defineProperty(s.prototype,"max",l),Object.defineProperty(s.prototype,"expires",l),e.exports=s},function(e,t,r){"use strict";var n=r(23);e.exports=function(e){return null==e||""===e?null:e instanceof Date?(n.ok(!isNaN(e.valueOf())),e):(n.ok("boolean"!=typeof e),t=e instanceof Number||"number"==typeof e?new Date(e):"string"==typeof e&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?new Date(Number(e)):"function"==typeof e.valueOf?new Date(e.valueOf()):new Date(e),isNaN(t.valueOf())?void n.ok(!1):t);var t}},function(e,t,r){"use strict";var n,i=r(168),o=r(6),a=r(88),s=r(7),l=r(1),c=o.CastError;function u(e,t){var r="string"==typeof e&&24===e.length&&/^[a-f0-9]+$/i.test(e),n=t&&t.suppressWarning;!r&&void 0!==e||n||(console.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),console.trace()),o.call(this,e,t,"ObjectID")}function p(e){return this.cast(e)}function f(){return new s}function h(e){if(n||(n=r(12)),this instanceof n){if(void 0===e){var t=new s;return this.$__._id=t,t}this.$__._id=e}return e}u.schemaName="ObjectId",u.defaultOptions={},u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.prototype.OptionsConstructor=i,u.get=o.get,u.set=o.set,u.prototype.auto=function(e){return e&&(this.default(f),this.set(h)),this},u._checkRequired=function(e){return e instanceof s},u._cast=a,u.cast=function(e){return 0===arguments.length||(!1===e&&(e=this._defaultCaster),this._cast=e),this._cast},u._defaultCaster=function(e){if(!(e instanceof s))throw new Error(e+" is not an instance of ObjectId");return e},u.checkRequired=o.checkRequired,u.prototype.checkRequired=function(e,t){return o._isRef(this,e,t,!0)?!!e:("function"==typeof this.constructor.checkRequired?this.constructor.checkRequired():u.checkRequired())(e)},u.prototype.cast=function(e,t,r){if(o._isRef(this,e,t,r))return e instanceof s?e:null!=e&&"objectid"===(e.constructor.name||"").toLowerCase()?new s(e.toHexString()):this._castRef(e,t,r);var n;n="function"==typeof this._castFunction?this._castFunction:"function"==typeof this.constructor.cast?this.constructor.cast():u.cast();try{return n(e)}catch(t){throw new c("ObjectId",e,this.path,t,this)}},u.prototype.$conditionalHandlers=l.options(o.prototype.$conditionalHandlers,{$gt:p,$gte:p,$lt:p,$lte:p}),f.$runBeforeSetters=!0,e.exports=u},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"auto",l),Object.defineProperty(s.prototype,"populate",l),e.exports=s},function(e,t,r){"use strict";var n=r(6),i=n.CastError,o=r(20),a=r(170),s=r(1);function l(e,t){n.call(this,e,t,"Decimal128")}function c(e){return this.cast(e)}l.schemaName="Decimal128",l.defaultOptions={},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l._cast=a,l.set=n.set,l.cast=function(e){return 0===arguments.length||(!1===e&&(e=this._defaultCaster),this._cast=e),this._cast},l._defaultCaster=function(e){if(null!=e&&!(e instanceof o))throw new Error;return e},l._checkRequired=function(e){return e instanceof o},l.checkRequired=n.checkRequired,l.prototype.checkRequired=function(e,t){return n._isRef(this,e,t,!0)?!!e:("function"==typeof this.constructor.checkRequired?this.constructor.checkRequired():l.checkRequired())(e)},l.prototype.cast=function(e,t,r){if(n._isRef(this,e,t,r))return e instanceof o?e:this._castRef(e,t,r);var a;a="function"==typeof this._castFunction?this._castFunction:"function"==typeof this.constructor.cast?this.constructor.cast():l.cast();try{return a(e)}catch(t){throw new i("Decimal128",e,this.path,t,this)}},l.prototype.$conditionalHandlers=s.options(n.prototype.$conditionalHandlers,{$gt:c,$gte:c,$lt:c,$lte:c}),e.exports=l},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(20),o=r(23);e.exports=function(e){return null==e?e:"object"===n(e)&&"string"==typeof e.$numberDecimal?i.fromString(e.$numberDecimal):e instanceof i?e:"string"==typeof e?i.fromString(e):t.isBuffer(e)?new i(e):"number"==typeof e?i.fromString(String(e)):"function"==typeof e.valueOf&&"string"==typeof e.valueOf()?i.fromString(e.valueOf()):void o.ok(!1)}}).call(this,r(2).Buffer)},function(e,t,r){"use strict";(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r(89),h=r(172),d=r(6),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var r,n,o=c(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e,t,"Map")).$isSchemaMap=!0,r}return r=u,(n=[{key:"set",value:function(e,t){return d.set(e,t)}},{key:"cast",value:function(e,r,n){if(e instanceof f)return e;var o=this.path;if(n){var a=new f({},o,r,this.$__schemaType);if(e instanceof t.Map){var s,l=i(e.keys());try{for(l.s();!(s=l.n()).done;){var c=s.value,u=e.get(c);u=null==u?a.$__schemaType._castNullish(u):a.$__schemaType.cast(u,r,!0,null,{path:o+"."+c}),a.$init(c,u)}}catch(e){l.e(e)}finally{l.f()}}else for(var p=0,h=Object.keys(e);p<h.length;p++){var d=h[p],y=e[d];y=null==y?a.$__schemaType._castNullish(y):a.$__schemaType.cast(y,r,!0,null,{path:o+"."+d}),a.$init(d,y)}return a}return new f(e,o,r,this.$__schemaType)}},{key:"clone",value:function(){var e=s(p(u.prototype),"clone",this).call(this);return null!=this.$__schemaType&&(e.$__schemaType=this.$__schemaType.clone()),e}}])&&a(r.prototype,n),u}(d);y.prototype.OptionsConstructor=h,y.defaultOptions={},e.exports=y}).call(this,r(10))},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}(r(8)),l=r(9);Object.defineProperty(s.prototype,"of",l),e.exports=s},function(e,t,r){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(15).get().Binary,o=r(20),a=r(7),s=r(30);function l(t){return t&&"object"===n(t)&&!(t instanceof Date)&&!(t instanceof a)&&(!Array.isArray(t)||t.length>0)&&!(t instanceof e)&&!(t instanceof o)&&!(t instanceof i)}t.flatten=function t(r,n,i,o){var a,c=(a=r&&s(r)&&!e.isBuffer(r)?Object.keys(r.toObject({transform:!1,virtuals:!1})):Object.keys(r||{})).length,u={};n=n?n+".":"";for(var p=0;p<c;++p){var f=a[p],h=r[f];u[n+f]=h;var d=o&&o.path&&o.path(n+f),y=o&&o.nested&&o.nested[n+f];if(!d||"Mixed"!==d.instance){if(l(h)){if(i&&i.skipArrays&&Array.isArray(h))continue;var m=t(h,n+f,i,o);for(var v in m)u[v]=m[v];Array.isArray(h)&&(u[n+f]=h)}if(y)for(var g=0,b=Object.keys(o.paths);g<b.length;g++){var _=b[g];_.startsWith(n+f+".")&&!u.hasOwnProperty(_)&&(u[_]=void 0)}}}return u},t.modifiedPaths=function t(r,n,i){var o=Object.keys(r||{}),a=o.length;i=i||{},n=n?n+".":"";for(var c=0;c<a;++c){var u=o[c],p=r[u];i[n+u]=!0,s(p)&&!e.isBuffer(p)&&(p=p.toObject({transform:!1,virtuals:!1})),l(p)&&t(p,n+u,i)}return i}}).call(this,r(2).Buffer)},function(e,t,r){"use strict";var n=r(3);e.exports=function e(t,r,i){for(var o=(i=i||{}).typeOnly,a=r.split("."),s=null,l="adhocOrUndefined",c=0;c<a.length;++c){var u=a.slice(0,c+1).join(".");if(null!=(s=t.schema.path(u))){if("Mixed"===s.instance)return o?"real":s;if(l=t.schema.pathType(u),(s.$isSingleNested||s.$isMongooseDocumentArrayElement)&&null!=s.schema.discriminators){var p=s.schema.discriminators,f=t.get(u+"."+n(s,"schema.options.discriminatorKey"));if(null==f||null==p[f])continue;var h=a.slice(c+1).join(".");return e(t.get(u),h,i)}}else l="adhocOrUndefined"}return o?l:s}},function(e,t,r){"use strict";function n(){return null!=this._id?String(this._id):null}e.exports=function(e){!e.paths.id&&!e.options.noVirtualId&&e.options.id&&e.virtual("id").get(n)}},function(e,t,r){"use strict";var n=r(58);e.exports=function(e){if(null==e)return null;var t=Object.keys(e),r=t.length,i=null;if(1===r&&"_id"===t[0])i=!!e[t[r]];else for(;r--;)if("_id"!==t[r]&&n(e[t[r]])){i=!e[t[r]];break}return i}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=r(178),s=r(3),l=r(36),c=r(58),u=r(29);function p(e){return function(t){t.options||(t.options={}),null!=e&&Array.isArray(e.virtuals)&&((e=Object.assign({},e)).virtuals=e.virtuals.filter((function(e){return"string"==typeof e&&e.startsWith(t.path+".")})).map((function(e){return e.slice(t.path.length+1)}))),t.options.lean=e}}t.preparePopulationOptions=function(e,t){var r=e.options.populate,n=Object.keys(r).reduce((function(e,t){return e.concat([r[t]])}),[]);return null!=t.lean&&n.filter((function(e){return null==s(e,"options.lean")})).forEach(p(t.lean)),n.forEach((function(t){t._localModel=e.model})),n},t.preparePopulationOptionsMQ=function(e,t){var r=e._mongooseOptions.populate,n=Object.keys(r).reduce((function(e,t){return e.concat([r[t]])}),[]);null!=t.lean&&n.filter((function(e){return null==s(e,"options.lean")})).forEach(p(t.lean));var i=s(e,"options.session",null);null!=i&&n.forEach((function(e){null!=e.options?"session"in e.options||(e.options.session=i):e.options={session:i}}));var o=e._fieldsForExec();return n.forEach((function(e){e._queryProjection=o})),n.forEach((function(t){t._localModel=e.model})),n},t.createModel=function(e,r,n,i,o){e.hooks.execPreSync("createModel",r);var a=e.schema?e.schema.discriminatorMapping:null,s=a&&a.isRoot?a.key:null,c=r[s];if(s&&c&&e.discriminators){var p=e.discriminators[c]||l(e.discriminators,c);if(p){var f=u(i);return t.applyPaths(f,p.schema),new p(void 0,f,!0)}}return void 0===o&&((o={}).defaults=!0),new e(void 0,n,{skipId:!0,isNew:!1,willInit:!0,defaults:o.defaults})},t.applyPaths=function(e,t){var r,o,l;if(e)for(l=(o=Object.keys(e)).length;l--;)if("+"!==o[l][0]){var u=e[o[l]];if(c(u)){r=!u;break}}var p=[],f=[],h=[];switch(function t(n,i){if(i||(i=""),-1!==h.indexOf(n))return[];h.push(n);var o=[];return n.eachPath((function(n,s){i&&(n=i+"."+n);var l=T(n,s);if(null==l&&s.$isMongooseArray&&!s.$isMongooseDocumentArray&&(l=T(n,s.caster)),null!=l&&o.push(l),s.schema){var c=t(s.schema,n);!1===r&&a(e,n,s.schema,p,c)}})),h.pop(),o}(t),r){case!0:var d,y=i(f);try{for(y.s();!(d=y.n()).done;){var m=d.value;e[m]=0}}catch(e){y.e(e)}finally{y.f()}break;case!1:t&&t.paths._id&&t.paths._id.options&&!1===t.paths._id.options.select&&(e._id=0);var v,g=i(p);try{for(g.s();!(v=g.n()).done;){var b=v.value;e[b]=e[b]||1}}catch(e){g.e(e)}finally{g.f()}break;case void 0:if(null==e)break;for(var _=0,w=Object.keys(e||{});_<w.length;_++){var x=w[_];x.startsWith("+")&&delete e[x]}var E,S=i(f);try{for(S.s();!(E=S.n()).done;){var k=E.value;e[k]=0}}catch(e){S.e(e)}finally{S.f()}}function T(t,i){var a="+"+t,l=e&&a in e;if(l&&delete e[a],"boolean"==typeof i.selected){if(l)return delete e[a],void(!1===r&&o.length>1&&!~o.indexOf(t)&&(e[t]=1));for(var c=t.split("."),u="",h=0;h<c.length;++h)if(u+=u.length?"."+c[h]:c[h],-1!==f.indexOf(u))return;if(!r&&s(i,"options.$skipDiscriminatorCheck",!1))for(var d="",y=0;y<c.length;++y){d+=(0===d.length?"":".")+c[y];var m=s(e,d,!1)||s(e,d+".$",!1);if(m&&"object"!==n(m))return}return(i.selected?p:f).push(t),t}}},t.handleDeleteWriteOpResult=function(e){return function(t,r){if(t)return e(t);var n=Object.assign({},r.result);return null!=s(r,"result.n",null)&&(n.deletedCount=r.result.n),null!=r.deletedCount&&(n.deletedCount=r.deletedCount),e(null,n)}}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){var o=Object.keys(e).reduce((function(e,r){return e||r.startsWith(t+".")}),!1),a=t+"."+r.options.discriminatorKey;o||1!==i.length||i[0]!==a||n.splice(n.indexOf(a),1)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return!!e&&("object"===n(e)||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,r){"use strict";var n=r(12),i=r(19).EventEmitter,o=r(5),a=r(53),s=r(7),l=o.ValidationError,c=r(77),u=r(21);function p(e,t,r,i,l){if(!(this instanceof p))return new p(e,t,r,i,l);if(u(t)&&!t.instanceOfSchema&&(t=new a(t)),t=this.schema||t,!this.schema&&t.options._id&&void 0===(e=e||{})._id&&(e._id=new s),!t)throw new o.MissingSchemaError;for(var f in this.$__setSchema(t),n.call(this,e,r,i,l),c(this,t,{decorateDoc:!0}),t.methods)this[f]=t.methods[f];for(var h in t.statics)this[h]=t.statics[h]}p.prototype=Object.create(n.prototype),p.prototype.constructor=p,p.events=new i,p.$emitter=new i,["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach((function(e){p[e]=function(){return p.$emitter[e].apply(p.$emitter,arguments)}})),p.ValidationError=l,e.exports=p}])}))},8416:(e,t,r)=>{var n=r(4062);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},5036:(e,t,r)=>{var n=r(8698).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:(e,t,r)=>{var n=r(8698).default,i=r(5036);e.exports=function(e){var t=i(e,"string");return"symbol"==n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1418:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,o(r)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},7462:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:()=>n})},4578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(9611);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,n.Z)(e,t)}},3366:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}r.d(t,{Z:()=>n})},9611:(e,t,r)=>{"use strict";function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}r.d(t,{Z:()=>n})},6284:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>f,Qo:()=>d,RR:()=>c,US:()=>a,X5:()=>l,cv:()=>y,dp:()=>g,dr:()=>v,oo:()=>o,uY:()=>m,x7:()=>s});var n=r(5207);function i(e,t,r){let{reference:i,floating:o}=e;const a=(0,n.Qq)(t),s=(0,n.Wh)(t),l=(0,n.I4)(s),c=(0,n.k3)(t),u="y"===a,p=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,h=i[l]/2-o[l]/2;let d;switch(c){case"top":d={x:p,y:i.y-o.height};break;case"bottom":d={x:p,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:f};break;case"left":d={x:i.x-o.width,y:f};break;default:d={x:i.x,y:i.y}}switch((0,n.hp)(t)){case"start":d[s]-=h*(r&&u?-1:1);break;case"end":d[s]+=h*(r&&u?-1:1)}return d}const o=async(e,t,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:a=[],platform:s}=r,l=a.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:p,y:f}=i(u,n,c),h=n,d={},y=0;for(let m=0;m<l.length;m++){const{name:r,fn:a}=l[m],{x:v,y:g,data:b,reset:_}=await a({x:p,y:f,initialPlacement:n,placement:h,strategy:o,middlewareData:d,rects:u,platform:s,elements:{reference:e,floating:t}});p=null!=v?v:p,f=null!=g?g:f,d={...d,[r]:{...d[r],...b}},_&&y<=50&&(y++,"object"===typeof _&&(_.placement&&(h=_.placement),_.rects&&(u=!0===_.rects?await s.getElementRects({reference:e,floating:t,strategy:o}):_.rects),({x:p,y:f}=i(u,h,c))),m=-1)}return{x:p,y:f,placement:h,strategy:o,middlewareData:d}};async function a(e,t){var r;void 0===t&&(t={});const{x:i,y:o,platform:a,rects:s,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=(0,n.ku)(t,e),y=(0,n.yd)(d),m=l[h?"floating"===f?"reference":"floating":f],v=(0,n.JB)(await a.getClippingRect({element:null==(r=await(null==a.isElement?void 0:a.isElement(m)))||r?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:p,strategy:c})),g="floating"===f?{...s.floating,x:i,y:o}:s.reference,b=await(null==a.getOffsetParent?void 0:a.getOffsetParent(l.floating)),_=await(null==a.isElement?void 0:a.isElement(b))&&await(null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},w=(0,n.JB)(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:b,strategy:c}):g);return{top:(v.top-w.top+y.top)/_.y,bottom:(w.bottom-v.bottom+y.bottom)/_.y,left:(v.left-w.left+y.left)/_.x,right:(w.right-v.right+y.right)/_.x}}const s=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:o,rects:a,platform:s,elements:l,middlewareData:c}=t,{element:u,padding:p=0}=(0,n.ku)(e,t)||{};if(null==u)return{};const f=(0,n.yd)(p),h={x:r,y:i},d=(0,n.Wh)(o),y=(0,n.I4)(d),m=await s.getDimensions(u),v="y"===d,g=v?"top":"left",b=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[y]+a.reference[d]-h[d]-a.floating[y],x=h[d]-a.reference[d],E=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let S=E?E[_]:0;S&&await(null==s.isElement?void 0:s.isElement(E))||(S=l.floating[_]||a.floating[y]);const k=w/2-x/2,T=S/2-m[y]/2-1,O=(0,n.VV)(f[g],T),A=(0,n.VV)(f[b],T),P=O,C=S-m[y]-A,N=S/2-m[y]/2+k,R=(0,n.uZ)(P,N,C),j=!c.arrow&&null!=(0,n.hp)(o)&&N!==R&&a.reference[y]/2-(N<P?O:A)-m[y]/2<0,M=j?N<P?N-P:N-C:0;return{[d]:h[d]+M,data:{[d]:R,centerOffset:N-R-M,...j&&{alignmentOffset:M}},reset:j}}});const l=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var r,i,o;const{rects:s,middlewareData:l,placement:c,platform:u,elements:p}=t,{crossAxis:f=!1,alignment:h,allowedPlacements:d=n.Ct,autoAlignment:y=!0,...m}=(0,n.ku)(e,t),v=void 0!==h||d===n.Ct?function(e,t,r){return(e?[...r.filter((t=>(0,n.hp)(t)===e)),...r.filter((t=>(0,n.hp)(t)!==e))]:r.filter((e=>(0,n.k3)(e)===e))).filter((r=>!e||(0,n.hp)(r)===e||!!t&&(0,n.Go)(r)!==r))}(h||null,y,d):d,g=await a(t,m),b=(null==(r=l.autoPlacement)?void 0:r.index)||0,_=v[b];if(null==_)return{};const w=(0,n.i8)(_,s,await(null==u.isRTL?void 0:u.isRTL(p.floating)));if(c!==_)return{reset:{placement:v[0]}};const x=[g[(0,n.k3)(_)],g[w[0]],g[w[1]]],E=[...(null==(i=l.autoPlacement)?void 0:i.overflows)||[],{placement:_,overflows:x}],S=v[b+1];if(S)return{data:{index:b+1,overflows:E},reset:{placement:S}};const k=E.map((e=>{const t=(0,n.hp)(e.placement);return[e.placement,t&&f?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),T=(null==(o=k.filter((e=>e[2].slice(0,(0,n.hp)(e[0])?2:3).every((e=>e<=0))))[0])?void 0:o[0])||k[0][0];return T!==c?{data:{index:b+1,overflows:E},reset:{placement:T}}:{}}}},c=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:o,middlewareData:s,rects:l,initialPlacement:c,platform:u,elements:p}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...g}=(0,n.ku)(e,t);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};const b=(0,n.k3)(o),_=(0,n.k3)(c)===c,w=await(null==u.isRTL?void 0:u.isRTL(p.floating)),x=d||(_||!v?[(0,n.pw)(c)]:(0,n.gy)(c));d||"none"===m||x.push(...(0,n.KX)(c,v,m,w));const E=[c,...x],S=await a(t,g),k=[];let T=(null==(i=s.flip)?void 0:i.overflows)||[];if(f&&k.push(S[b]),h){const e=(0,n.i8)(o,l,w);k.push(S[e[0]],S[e[1]])}if(T=[...T,{placement:o,overflows:k}],!k.every((e=>e<=0))){var O,A;const e=((null==(O=s.flip)?void 0:O.index)||0)+1,t=E[e];if(t)return{data:{index:e,overflows:T},reset:{placement:t}};let r=null==(A=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:A.placement;if(!r)switch(y){case"bestFit":{var P;const e=null==(P=T.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:P[0];e&&(r=e);break}case"initialPlacement":r=c}if(o!==r)return{reset:{placement:r}}}return{}}}};function u(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function p(e){return n.mA.some((t=>e[t]>=0))}const f=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...o}=(0,n.ku)(e,t);switch(i){case"referenceHidden":{const e=u(await a(t,{...o,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:p(e)}}}case"escaped":{const e=u(await a(t,{...o,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:p(e)}}}default:return{}}}}};function h(e){const t=(0,n.VV)(...e.map((e=>e.left))),r=(0,n.VV)(...e.map((e=>e.top)));return{x:t,y:r,width:(0,n.Fp)(...e.map((e=>e.right)))-t,height:(0,n.Fp)(...e.map((e=>e.bottom)))-r}}const d=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:r,elements:i,rects:o,platform:a,strategy:s}=t,{padding:l=2,x:c,y:u}=(0,n.ku)(e,t),p=Array.from(await(null==a.getClientRects?void 0:a.getClientRects(i.reference))||[]),f=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),r=[];let i=null;for(let n=0;n<t.length;n++){const e=t[n];!i||e.y-i.y>i.height/2?r.push([e]):r[r.length-1].push(e),i=e}return r.map((e=>(0,n.JB)(h(e))))}(p),d=(0,n.JB)(h(p)),y=(0,n.yd)(l);const m=await a.getElementRects({reference:{getBoundingClientRect:function(){if(2===f.length&&f[0].left>f[1].right&&null!=c&&null!=u)return f.find((e=>c>e.left-y.left&&c<e.right+y.right&&u>e.top-y.top&&u<e.bottom+y.bottom))||d;if(f.length>=2){if("y"===(0,n.Qq)(r)){const e=f[0],t=f[f.length-1],i="top"===(0,n.k3)(r),o=e.top,a=t.bottom,s=i?e.left:t.left,l=i?e.right:t.right;return{top:o,bottom:a,left:s,right:l,width:l-s,height:a-o,x:s,y:o}}const e="left"===(0,n.k3)(r),t=(0,n.Fp)(...f.map((e=>e.right))),i=(0,n.VV)(...f.map((e=>e.left))),o=f.filter((r=>e?r.left===i:r.right===t)),a=o[0].top,s=o[o.length-1].bottom;return{top:a,bottom:s,left:i,right:t,width:t-i,height:s-a,x:i,y:a}}return d}},floating:i.floating,strategy:s});return o.reference.x!==m.reference.x||o.reference.y!==m.reference.y||o.reference.width!==m.reference.width||o.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};const y=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:o,y:a,placement:s,middlewareData:l}=t,c=await async function(e,t){const{placement:r,platform:i,elements:o}=e,a=await(null==i.isRTL?void 0:i.isRTL(o.floating)),s=(0,n.k3)(r),l=(0,n.hp)(r),c="y"===(0,n.Qq)(r),u=["left","top"].includes(s)?-1:1,p=a&&c?-1:1,f=(0,n.ku)(t,e);let{mainAxis:h,crossAxis:d,alignmentAxis:y}="number"===typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return l&&"number"===typeof y&&(d="end"===l?-1*y:y),c?{x:d*p,y:h*u}:{x:h*u,y:d*p}}(t,e);return s===(null==(r=l.offset)?void 0:r.placement)&&null!=(i=l.arrow)&&i.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:s}}}}},m=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:o}=t,{mainAxis:s=!0,crossAxis:l=!1,limiter:c={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...u}=(0,n.ku)(e,t),p={x:r,y:i},f=await a(t,u),h=(0,n.Qq)((0,n.k3)(o)),d=(0,n.Rn)(h);let y=p[d],m=p[h];if(s){const e="y"===d?"bottom":"right",t=y+f["y"===d?"top":"left"],r=y-f[e];y=(0,n.uZ)(t,y,r)}if(l){const e="y"===h?"bottom":"right",t=m+f["y"===h?"top":"left"],r=m-f[e];m=(0,n.uZ)(t,m,r)}const v=c.fn({...t,[d]:y,[h]:m});return{...v,data:{x:v.x-r,y:v.y-i}}}}},v=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:o,rects:a,middlewareData:s}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=(0,n.ku)(e,t),p={x:r,y:i},f=(0,n.Qq)(o),h=(0,n.Rn)(f);let d=p[h],y=p[f];const m=(0,n.ku)(l,t),v="number"===typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+v.mainAxis,r=a.reference[h]+a.reference[e]-v.mainAxis;d<t?d=t:d>r&&(d=r)}if(u){var g,b;const e="y"===h?"width":"height",t=["top","left"].includes((0,n.k3)(o)),r=a.reference[f]-a.floating[e]+(t&&(null==(g=s.offset)?void 0:g[f])||0)+(t?0:v.crossAxis),i=a.reference[f]+a.reference[e]+(t?0:(null==(b=s.offset)?void 0:b[f])||0)-(t?v.crossAxis:0);y<r?y=r:y>i&&(y=i)}return{[h]:d,[f]:y}}}},g=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:i,platform:o,elements:s}=t,{apply:l=(()=>{}),...c}=(0,n.ku)(e,t),u=await a(t,c),p=(0,n.k3)(r),f=(0,n.hp)(r),h="y"===(0,n.Qq)(r),{width:d,height:y}=i.floating;let m,v;"top"===p||"bottom"===p?(m=p,v=f===(await(null==o.isRTL?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(v=p,m="end"===f?"top":"bottom");const g=y-u[m],b=d-u[v],_=!t.middlewareData.shift;let w=g,x=b;if(h){const e=d-u.left-u.right;x=f||_?(0,n.VV)(b,e):e}else{const e=y-u.top-u.bottom;w=f||_?(0,n.VV)(g,e):e}if(_&&!f){const e=(0,n.Fp)(u.left,0),t=(0,n.Fp)(u.right,0),r=(0,n.Fp)(u.top,0),i=(0,n.Fp)(u.bottom,0);h?x=d-2*(0!==e||0!==t?e+t:(0,n.Fp)(u.left,u.right)):w=y-2*(0!==r||0!==i?r+i:(0,n.Fp)(u.top,u.bottom))}await l({...t,availableWidth:x,availableHeight:w});const E=await o.getDimensions(s.floating);return d!==E.width||y!==E.height?{reset:{rects:!0}}:{}}}}},3904:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>T,Jv:()=>_,Me:()=>w,Qo:()=>A,RR:()=>S,X5:()=>x,dp:()=>k,dr:()=>P,oo:()=>C,uY:()=>E,x7:()=>O});var n=r(5207),i=r(6284),o=r(1495);function a(e){const t=(0,o.Dx)(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=(0,o.Re)(e),s=a?e.offsetWidth:r,l=a?e.offsetHeight:i,c=(0,n.NM)(r)!==s||(0,n.NM)(i)!==l;return c&&(r=s,i=l),{width:r,height:i,$:c}}function s(e){return(0,o.kK)(e)?e:e.contextElement}function l(e){const t=s(e);if(!(0,o.Re)(t))return(0,n.ze)(1);const r=t.getBoundingClientRect(),{width:i,height:l,$:c}=a(t);let u=(c?(0,n.NM)(r.width):r.width)/i,p=(c?(0,n.NM)(r.height):r.height)/l;return u&&Number.isFinite(u)||(u=1),p&&Number.isFinite(p)||(p=1),{x:u,y:p}}const c=(0,n.ze)(0);function u(e){const t=(0,o.Jj)(e);return(0,o.Pf)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:c}function p(e,t,r,i){void 0===t&&(t=!1),void 0===r&&(r=!1);const a=e.getBoundingClientRect(),c=s(e);let p=(0,n.ze)(1);t&&(i?(0,o.kK)(i)&&(p=l(i)):p=l(e));const f=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==(0,o.Jj)(e))&&t}(c,r,i)?u(c):(0,n.ze)(0);let h=(a.left+f.x)/p.x,d=(a.top+f.y)/p.y,y=a.width/p.x,m=a.height/p.y;if(c){const e=(0,o.Jj)(c),t=i&&(0,o.kK)(i)?(0,o.Jj)(i):i;let r=e.frameElement;for(;r&&i&&t!==e;){const e=l(r),t=r.getBoundingClientRect(),n=(0,o.Dx)(r),i=t.left+(r.clientLeft+parseFloat(n.paddingLeft))*e.x,a=t.top+(r.clientTop+parseFloat(n.paddingTop))*e.y;h*=e.x,d*=e.y,y*=e.x,m*=e.y,h+=i,d+=a,r=(0,o.Jj)(r).frameElement}}return(0,n.JB)({width:y,height:m,x:h,y:d})}const f=[":popover-open",":modal"];function h(e){let t=!1,r=0,n=0;if(f.forEach((r=>{!function(r){try{t=t||e.matches(r)}catch(n){}}(r)})),t){const t=(0,o.gQ)(e);if(t){const e=t.getBoundingClientRect();r=e.x,n=e.y}}return[t,r,n]}function d(e){return p((0,o.tF)(e)).left+(0,o.Lw)(e).scrollLeft}function y(e,t,r){let i;if("viewport"===t)i=function(e,t){const r=(0,o.Jj)(e),n=(0,o.tF)(e),i=r.visualViewport;let a=n.clientWidth,s=n.clientHeight,l=0,c=0;if(i){a=i.width,s=i.height;const e=(0,o.Pf)();(!e||e&&"fixed"===t)&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:s,x:l,y:c}}(e,r);else if("document"===t)i=function(e){const t=(0,o.tF)(e),r=(0,o.Lw)(e),i=e.ownerDocument.body,a=(0,n.Fp)(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=(0,n.Fp)(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let l=-r.scrollLeft+d(e);const c=-r.scrollTop;return"rtl"===(0,o.Dx)(i).direction&&(l+=(0,n.Fp)(t.clientWidth,i.clientWidth)-a),{width:a,height:s,x:l,y:c}}((0,o.tF)(e));else if((0,o.kK)(t))i=function(e,t){const r=p(e,!0,"fixed"===t),i=r.top+e.clientTop,a=r.left+e.clientLeft,s=(0,o.Re)(e)?l(e):(0,n.ze)(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:a*s.x,y:i*s.y}}(t,r);else{const r=u(e);i={...t,x:t.x-r.x,y:t.y-r.y}}return(0,n.JB)(i)}function m(e,t){const r=(0,o.Ow)(e);return!(r===t||!(0,o.kK)(r)||(0,o.Py)(r))&&("fixed"===(0,o.Dx)(r).position||m(r,t))}function v(e,t,r,i){const a=(0,o.Re)(t),s=(0,o.tF)(t),l="fixed"===r,c=p(e,!0,l,t);let u={scrollLeft:0,scrollTop:0};const f=(0,n.ze)(0);if(a||!a&&!l)if(("body"!==(0,o.wk)(t)||(0,o.ao)(s))&&(u=(0,o.Lw)(t)),a){const e=p(t,!0,l,t);f.x=e.x+t.clientLeft,f.y=e.y+t.clientTop}else s&&(f.x=d(s));let y=c.left+u.scrollLeft-f.x,m=c.top+u.scrollTop-f.y;const[v,g,b]=h(i);return v&&(y+=g,m+=b,a&&(y+=t.clientLeft,m+=t.clientTop)),{x:y,y:m,width:c.width,height:c.height}}function g(e,t){return(0,o.Re)(e)&&"fixed"!==(0,o.Dx)(e).position?t?t(e):e.offsetParent:null}function b(e,t){const r=(0,o.Jj)(e);if(!(0,o.Re)(e))return r;let n=g(e,t);for(;n&&(0,o.Ze)(n)&&"static"===(0,o.Dx)(n).position;)n=g(n,t);return n&&("html"===(0,o.wk)(n)||"body"===(0,o.wk)(n)&&"static"===(0,o.Dx)(n).position&&!(0,o.hT)(n))?r:n||(0,o.gQ)(e)||r}const _={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:i,strategy:a}=e;const s=(0,o.tF)(i),[c]=t?h(t.floating):[!1];if(i===s||c)return r;let u={scrollLeft:0,scrollTop:0},f=(0,n.ze)(1);const d=(0,n.ze)(0),y=(0,o.Re)(i);if((y||!y&&"fixed"!==a)&&(("body"!==(0,o.wk)(i)||(0,o.ao)(s))&&(u=(0,o.Lw)(i)),(0,o.Re)(i))){const e=p(i);f=l(i),d.x=e.x+i.clientLeft,d.y=e.y+i.clientTop}return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-u.scrollLeft*f.x+d.x,y:r.y*f.y-u.scrollTop*f.y+d.y}},getDocumentElement:o.tF,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:i,strategy:a}=e;const s=[..."clippingAncestors"===r?function(e,t){const r=t.get(e);if(r)return r;let n=(0,o.Kx)(e,[],!1).filter((e=>(0,o.kK)(e)&&"body"!==(0,o.wk)(e))),i=null;const a="fixed"===(0,o.Dx)(e).position;let s=a?(0,o.Ow)(e):e;for(;(0,o.kK)(s)&&!(0,o.Py)(s);){const t=(0,o.Dx)(s),r=(0,o.hT)(s);r||"fixed"!==t.position||(i=null),(a?!r&&!i:!r&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||(0,o.ao)(s)&&!r&&m(e,s))?n=n.filter((e=>e!==s)):i=t,s=(0,o.Ow)(s)}return t.set(e,n),n}(t,this._c):[].concat(r),i],l=s[0],c=s.reduce(((e,r)=>{const i=y(t,r,a);return e.top=(0,n.Fp)(i.top,e.top),e.right=(0,n.VV)(i.right,e.right),e.bottom=(0,n.VV)(i.bottom,e.bottom),e.left=(0,n.Fp)(i.left,e.left),e}),y(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:b,getElementRects:async function(e){const t=this.getOffsetParent||b,r=this.getDimensions;return{reference:v(e.reference,await t(e.floating),e.strategy,e.floating),floating:{x:0,y:0,...await r(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=a(e);return{width:t,height:r}},getScale:l,isElement:o.kK,isRTL:function(e){return"rtl"===(0,o.Dx)(e).direction}};function w(e,t,r,i){void 0===i&&(i={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c="function"===typeof ResizeObserver,layoutShift:u="function"===typeof IntersectionObserver,animationFrame:f=!1}=i,h=s(e),d=a||l?[...h?(0,o.Kx)(h):[],...(0,o.Kx)(t)]:[];d.forEach((e=>{a&&e.addEventListener("scroll",r,{passive:!0}),l&&e.addEventListener("resize",r)}));const y=h&&u?function(e,t){let r,i=null;const a=(0,o.tF)(e);function s(){var e;clearTimeout(r),null==(e=i)||e.disconnect(),i=null}return function o(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),s();const{left:u,top:p,width:f,height:h}=e.getBoundingClientRect();if(l||t(),!f||!h)return;const d={rootMargin:-(0,n.GW)(p)+"px "+-(0,n.GW)(a.clientWidth-(u+f))+"px "+-(0,n.GW)(a.clientHeight-(p+h))+"px "+-(0,n.GW)(u)+"px",threshold:(0,n.Fp)(0,(0,n.VV)(1,c))||1};let y=!0;function m(e){const t=e[0].intersectionRatio;if(t!==c){if(!y)return o();t?o(!1,t):r=setTimeout((()=>{o(!1,1e-7)}),100)}y=!1}try{i=new IntersectionObserver(m,{...d,root:a.ownerDocument})}catch(v){i=new IntersectionObserver(m,d)}i.observe(e)}(!0),s}(h,r):null;let m,v=-1,g=null;c&&(g=new ResizeObserver((e=>{let[n]=e;n&&n.target===h&&g&&(g.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame((()=>{var e;null==(e=g)||e.observe(t)}))),r()})),h&&!f&&g.observe(h),g.observe(t));let b=f?p(e):null;return f&&function t(){const n=p(e);!b||n.x===b.x&&n.y===b.y&&n.width===b.width&&n.height===b.height||r();b=n,m=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach((e=>{a&&e.removeEventListener("scroll",r),l&&e.removeEventListener("resize",r)})),null==y||y(),null==(e=g)||e.disconnect(),g=null,f&&cancelAnimationFrame(m)}}const x=i.X5,E=i.uY,S=i.RR,k=i.dp,T=i.Cp,O=i.x7,A=i.Qo,P=i.dr,C=(e,t,r)=>{const n=new Map,o={platform:_,...r},a={...o.platform,_c:n};return(0,i.oo)(e,t,{...o,platform:a})}},1495:(e,t,r)=>{"use strict";function n(e){return a(e)?(e.nodeName||"").toLowerCase():"#document"}function i(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function o(e){var t;return null==(t=(a(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function a(e){return e instanceof Node||e instanceof i(e).Node}function s(e){return e instanceof Element||e instanceof i(e).Element}function l(e){return e instanceof HTMLElement||e instanceof i(e).HTMLElement}function c(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof i(e).ShadowRoot)}function u(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=m(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function p(e){return["table","td","th"].includes(n(e))}function f(e){const t=d(),r=m(e);return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function h(e){let t=g(e);for(;l(t)&&!y(t);){if(f(t))return t;t=g(t)}return null}function d(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function y(e){return["html","body","#document"].includes(n(e))}function m(e){return i(e).getComputedStyle(e)}function v(e){return s(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function g(e){if("html"===n(e))return e;const t=e.assignedSlot||e.parentNode||c(e)&&e.host||o(e);return c(t)?t.host:t}function b(e){const t=g(e);return y(t)?e.ownerDocument?e.ownerDocument.body:e.body:l(t)&&u(t)?t:b(t)}function _(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const o=b(e),a=o===(null==(n=e.ownerDocument)?void 0:n.body),s=i(o);return a?t.concat(s,s.visualViewport||[],u(o)?o:[],s.frameElement&&r?_(s.frameElement):[]):t.concat(o,_(o,[],r))}r.d(t,{Dx:()=>m,Jj:()=>i,Kx:()=>_,Lw:()=>v,Ow:()=>g,Pf:()=>d,Py:()=>y,Re:()=>l,Ze:()=>p,Zq:()=>c,ao:()=>u,gQ:()=>h,hT:()=>f,kK:()=>s,tF:()=>o,wk:()=>n})},5207:(e,t,r)=>{"use strict";r.d(t,{Ct:()=>o,Fp:()=>s,GW:()=>c,Go:()=>E,I4:()=>g,JB:()=>O,KX:()=>S,NM:()=>l,Qq:()=>b,Rn:()=>v,VV:()=>a,Wh:()=>_,gy:()=>x,hp:()=>m,i8:()=>w,k3:()=>y,ku:()=>d,mA:()=>n,pw:()=>k,uZ:()=>h,yd:()=>T,ze:()=>u});const n=["top","right","bottom","left"],i=["start","end"],o=n.reduce(((e,t)=>e.concat(t,t+"-"+i[0],t+"-"+i[1])),[]),a=Math.min,s=Math.max,l=Math.round,c=Math.floor,u=e=>({x:e,y:e}),p={left:"right",right:"left",bottom:"top",top:"bottom"},f={start:"end",end:"start"};function h(e,t,r){return s(e,a(t,r))}function d(e,t){return"function"===typeof e?e(t):e}function y(e){return e.split("-")[0]}function m(e){return e.split("-")[1]}function v(e){return"x"===e?"y":"x"}function g(e){return"y"===e?"height":"width"}function b(e){return["top","bottom"].includes(y(e))?"y":"x"}function _(e){return v(b(e))}function w(e,t,r){void 0===r&&(r=!1);const n=m(e),i=_(e),o=g(i);let a="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=k(a)),[a,k(a)]}function x(e){const t=k(e);return[E(e),t,E(t)]}function E(e){return e.replace(/start|end/g,(e=>f[e]))}function S(e,t,r,n){const i=m(e);let o=function(e,t,r){const n=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?o:a;default:return[]}}(y(e),"start"===r,n);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(E)))),o}function k(e){return e.replace(/left|right|bottom|top/g,(e=>p[e]))}function T(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function O(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}},4554:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=!0,i="Invariant failed";function o(e,t){if(!e){if(n)throw new Error(i);var r="function"===typeof t?t():t,o=r?"".concat(i,": ").concat(r):i;throw new Error(o)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var i=Object.create(null);__webpack_require__.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,__webpack_require__.d(i,o),i}})(),__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>"static/js/"+e+".d5fa4d18.chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="client:";__webpack_require__.l=(r,n,i,o)=>{if(e[r])e[r].push(n);else{var a,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){a=u;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[n];var p=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),s&&document.head.appendChild(a)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/",(()=>{var e={179:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,o=r[0],a=r[1],s=r[2],l=0;if(o.some((t=>0!==e[t]))){for(n in a)__webpack_require__.o(a,n)&&(__webpack_require__.m[n]=a[n]);if(s)s(__webpack_require__)}for(t&&t(r);l<o.length;l++)i=o[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:()=>vt,hasStandardBrowserEnv:()=>gt,hasStandardBrowserWebWorkerEnv:()=>_t});var t=__webpack_require__(2791),r=__webpack_require__.t(t,2),n=__webpack_require__(1250),i=__webpack_require__(9271),o=__webpack_require__(4578),a=__webpack_require__(2610),s=__webpack_require__(7462),l=__webpack_require__(3366),c=__webpack_require__(4554),u=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).history=(0,a.createBrowserHistory)(t.props),t}return(0,o.Z)(r,e),r.prototype.render=function(){return t.createElement(i.Router,{history:this.history,children:this.props.children})},r}(t.Component);t.Component;var p=function(e,t){return"function"===typeof e?e(t):e},f=function(e,t){return"string"===typeof e?(0,a.createLocation)(e,null,null,t):e},h=function(e){return e},d=t.forwardRef;"undefined"===typeof d&&(d=h);var y=d((function(e,r){var n=e.innerRef,i=e.navigate,o=e.onClick,a=(0,l.Z)(e,["innerRef","navigate","onClick"]),c=a.target,u=(0,s.Z)({},a,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return u.ref=h!==d&&r||n,t.createElement("a",u)}));var m=d((function(e,r){var n=e.component,o=void 0===n?y:n,u=e.replace,m=e.to,v=e.innerRef,g=(0,l.Z)(e,["component","replace","to","innerRef"]);return t.createElement(i.__RouterContext.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=e.history,i=f(p(m,e.location),e.location),l=i?n.createHref(i):"",y=(0,s.Z)({},g,{href:l,navigate:function(){var t=p(m,e.location),r=(0,a.createPath)(e.location)===(0,a.createPath)(f(t));(u||r?n.replace:n.push)(t)}});return h!==d?y.ref=r||v:y.innerRef=v,t.createElement(o,y)}))})),v=function(e){return e},g=t.forwardRef;"undefined"===typeof g&&(g=v);g((function(e,r){var n=e["aria-current"],o=void 0===n?"page":n,a=e.activeClassName,u=void 0===a?"active":a,h=e.activeStyle,d=e.className,y=e.exact,b=e.isActive,_=e.location,w=e.sensitive,x=e.strict,E=e.style,S=e.to,k=e.innerRef,T=(0,l.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(i.__RouterContext.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=_||e.location,a=f(p(S,n),n),l=a.pathname,O=l&&l.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),A=O?(0,i.matchPath)(n.pathname,{path:O,exact:y,sensitive:w,strict:x}):null,P=!!(b?b(A,n):A),C="function"===typeof d?d(P):d,N="function"===typeof E?E(P):E;P&&(C=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return e})).join(" ")}(C,u),N=(0,s.Z)({},N,h));var R=(0,s.Z)({"aria-current":P&&o||null,className:C,style:N,to:a},T);return v!==g?R.ref=r||k:R.innerRef=k,t.createElement(m,R)}))}));var b=__webpack_require__(184);const _=()=>(0,b.jsx)("div",{className:"parent",children:(0,b.jsxs)("div",{className:"center",children:[(0,b.jsx)("div",{className:"p-10 m-10",children:(0,b.jsx)(m,{to:"/user/login",children:"User Login"})}),(0,b.jsx)("div",{className:"p-10 m-10",children:(0,b.jsx)(m,{to:"/user/signup",children:"User Sign up"})}),(0,b.jsx)("div",{className:"p-10 m-10",children:(0,b.jsx)(m,{to:"/user/book-delivery",children:"Book delivery static UI"})})]})});var w=__webpack_require__(1418),x=__webpack_require__.n(w),E=__webpack_require__(2007),S=__webpack_require__.n(E);const k={type:S().string,tooltip:S().bool,as:S().elementType},T=t.forwardRef(((e,t)=>{let{as:r="div",className:n,type:i="valid",tooltip:o=!1,...a}=e;return(0,b.jsx)(r,{...a,ref:t,className:x()(n,"".concat(i,"-").concat(o?"tooltip":"feedback"))})}));T.displayName="Feedback",T.propTypes=k;const O=T,A=t.createContext({}),P=["xxl","xl","lg","md","sm","xs"],C="xs",N=t.createContext({prefixes:{},breakpoints:P,minBreakpoint:C}),{Consumer:R,Provider:j}=N;function M(e,r){const{prefixes:n}=(0,t.useContext)(N);return e||n[r]||r}const I=t.forwardRef(((e,r)=>{let{id:n,bsPrefix:i,className:o,type:a="checkbox",isValid:s=!1,isInvalid:l=!1,as:c="input",...u}=e;const{controlId:p}=(0,t.useContext)(A);return i=M(i,"form-check-input"),(0,b.jsx)(c,{...u,ref:r,type:a,id:n||p,className:x()(o,i,s&&"is-valid",l&&"is-invalid")})}));I.displayName="FormCheckInput";const D=I,L=t.forwardRef(((e,r)=>{let{bsPrefix:n,className:i,htmlFor:o,...a}=e;const{controlId:s}=(0,t.useContext)(A);return n=M(n,"form-check-label"),(0,b.jsx)("label",{...a,ref:r,htmlFor:o||s,className:x()(i,n)})}));L.displayName="FormCheckLabel";const F=L;function B(e,r){let n=0;return t.Children.map(e,(e=>t.isValidElement(e)?r(e,n++):e))}const z=t.forwardRef(((e,r)=>{let{id:n,bsPrefix:i,bsSwitchPrefix:o,inline:a=!1,reverse:s=!1,disabled:l=!1,isValid:c=!1,isInvalid:u=!1,feedbackTooltip:p=!1,feedback:f,feedbackType:h,className:d,style:y,title:m="",type:v="checkbox",label:g,children:_,as:w="input",...E}=e;i=M(i,"form-check"),o=M(o,"form-switch");const{controlId:S}=(0,t.useContext)(A),k=(0,t.useMemo)((()=>({controlId:n||S})),[S,n]),T=!_&&null!=g&&!1!==g||function(e,r){return t.Children.toArray(e).some((e=>t.isValidElement(e)&&e.type===r))}(_,F),P=(0,b.jsx)(D,{...E,type:"switch"===v?"checkbox":v,ref:r,isValid:c,isInvalid:u,disabled:l,as:w});return(0,b.jsx)(A.Provider,{value:k,children:(0,b.jsx)("div",{style:y,className:x()(d,T&&i,a&&"".concat(i,"-inline"),s&&"".concat(i,"-reverse"),"switch"===v&&o),children:_||(0,b.jsxs)(b.Fragment,{children:[P,T&&(0,b.jsx)(F,{title:m,children:g}),f&&(0,b.jsx)(O,{type:h,tooltip:p,children:f})]})})})}));z.displayName="FormCheck";const $=Object.assign(z,{Input:D,Label:F});__webpack_require__(2391);const U=t.forwardRef(((e,r)=>{let{bsPrefix:n,type:i,size:o,htmlSize:a,id:s,className:l,isValid:c=!1,isInvalid:u=!1,plaintext:p,readOnly:f,as:h="input",...d}=e;const{controlId:y}=(0,t.useContext)(A);return n=M(n,"form-control"),(0,b.jsx)(h,{...d,type:i,size:a,ref:r,readOnly:f,id:s||y,className:x()(l,p?"".concat(n,"-plaintext"):n,o&&"".concat(n,"-").concat(o),"color"===i&&"".concat(n,"-color"),c&&"is-valid",u&&"is-invalid")})}));U.displayName="FormControl";const H=Object.assign(U,{Feedback:O}),V=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"form-floating"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));V.displayName="FormFloating";const G=V,q=t.forwardRef(((e,r)=>{let{controlId:n,as:i="div",...o}=e;const a=(0,t.useMemo)((()=>({controlId:n})),[n]);return(0,b.jsx)(A.Provider,{value:a,children:(0,b.jsx)(i,{...o,ref:r})})}));q.displayName="FormGroup";const W=q;function Y(e){let{as:r,bsPrefix:n,className:i,...o}=e;n=M(n,"col");const a=function(){const{breakpoints:e}=(0,t.useContext)(N);return e}(),s=function(){const{minBreakpoint:e}=(0,t.useContext)(N);return e}(),l=[],c=[];return a.forEach((e=>{const t=o[e];let r,i,a;delete o[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:a}=t):r=t;const u=e!==s?"-".concat(e):"";r&&l.push(!0===r?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(r)),null!=a&&c.push("order".concat(u,"-").concat(a)),null!=i&&c.push("offset".concat(u,"-").concat(i))})),[{...o,className:x()(i,...l,...c)},{as:r,bsPrefix:n,spans:l}]}const K=t.forwardRef(((e,t)=>{const[{className:r,...n},{as:i="div",bsPrefix:o,spans:a}]=Y(e);return(0,b.jsx)(i,{...n,ref:t,className:x()(r,!a.length&&o)})}));K.displayName="Col";const X=K,Z=t.forwardRef(((e,r)=>{let{as:n="label",bsPrefix:i,column:o=!1,visuallyHidden:a=!1,className:s,htmlFor:l,...c}=e;const{controlId:u}=(0,t.useContext)(A);i=M(i,"form-label");let p="col-form-label";"string"===typeof o&&(p="".concat(p," ").concat(p,"-").concat(o));const f=x()(s,i,a&&"visually-hidden",o&&p);return l=l||u,o?(0,b.jsx)(X,{ref:r,as:"label",className:f,htmlFor:l,...c}):(0,b.jsx)(n,{ref:r,className:f,htmlFor:l,...c})}));Z.displayName="FormLabel";const J=Z,Q=t.forwardRef(((e,r)=>{let{bsPrefix:n,className:i,id:o,...a}=e;const{controlId:s}=(0,t.useContext)(A);return n=M(n,"form-range"),(0,b.jsx)("input",{...a,type:"range",ref:r,className:x()(i,n),id:o||s})}));Q.displayName="FormRange";const ee=Q,te=t.forwardRef(((e,r)=>{let{bsPrefix:n,size:i,htmlSize:o,className:a,isValid:s=!1,isInvalid:l=!1,id:c,...u}=e;const{controlId:p}=(0,t.useContext)(A);return n=M(n,"form-select"),(0,b.jsx)("select",{...u,size:o,ref:r,className:x()(a,n,i&&"".concat(n,"-").concat(i),s&&"is-valid",l&&"is-invalid"),id:c||p})}));te.displayName="FormSelect";const re=te,ne=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,as:i="small",muted:o,...a}=e;return r=M(r,"form-text"),(0,b.jsx)(i,{...a,ref:t,className:x()(n,r,o&&"text-muted")})}));ne.displayName="FormText";const ie=ne,oe=t.forwardRef(((e,t)=>(0,b.jsx)($,{...e,ref:t,type:"switch"})));oe.displayName="Switch";const ae=Object.assign(oe,{Input:$.Input,Label:$.Label}),se=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,children:i,controlId:o,label:a,...s}=e;return r=M(r,"form-floating"),(0,b.jsxs)(W,{ref:t,className:x()(n,r),controlId:o,...s,children:[i,(0,b.jsx)("label",{htmlFor:o,children:a})]})}));se.displayName="FloatingLabel";const le=se,ce={_ref:S().any,validated:S().bool,as:S().elementType},ue=t.forwardRef(((e,t)=>{let{className:r,validated:n,as:i="form",...o}=e;return(0,b.jsx)(i,{...o,ref:t,className:x()(r,n&&"was-validated")})}));ue.displayName="Form",ue.propTypes=ce;const pe=Object.assign(ue,{Group:W,Control:H,Floating:G,Check:$,Switch:ae,Label:J,Text:ie,Range:ee,Select:re,FloatingLabel:le}),fe=["as","disabled"];function he(e){let{tagName:t,disabled:r,href:n,target:i,rel:o,role:a,onClick:s,tabIndex:l=0,type:c}=e;t||(t=null!=n||null!=i||null!=o?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:r},u];const p=e=>{(r||"a"===t&&function(e){return!e||"#"===e.trim()}(n))&&e.preventDefault(),r?e.stopPropagation():null==s||s(e)};return"a"===t&&(n||(n="#"),r&&(n=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:r?void 0:l,href:n,target:"a"===t?i:void 0,"aria-disabled":r||void 0,rel:"a"===t?o:void 0,onClick:p,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),p(e))}},u]}const de=t.forwardRef(((e,t)=>{let{as:r,disabled:n}=e,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,fe);const[o,{tagName:a}]=he(Object.assign({tagName:r,disabled:n},i));return(0,b.jsx)(a,Object.assign({},i,o,{ref:t}))}));de.displayName="Button";const ye=de,me=t.forwardRef(((e,t)=>{let{as:r,bsPrefix:n,variant:i="primary",size:o,active:a=!1,disabled:s=!1,className:l,...c}=e;const u=M(n,"btn"),[p,{tagName:f}]=he({tagName:r,disabled:s,...c}),h=f;return(0,b.jsx)(h,{...p,...c,ref:t,disabled:s,className:x()(l,u,a&&"active",i&&"".concat(u,"-").concat(i),o&&"".concat(u,"-").concat(o),c.href&&s&&"disabled")})}));me.displayName="Button";const ve=me;function ge(e,t){return function(){return e.apply(t,arguments)}}const{toString:be}=Object.prototype,{getPrototypeOf:_e}=Object,we=(xe=Object.create(null),e=>{const t=be.call(e);return xe[t]||(xe[t]=t.slice(8,-1).toLowerCase())});var xe;const Ee=e=>(e=e.toLowerCase(),t=>we(t)===e),Se=e=>t=>typeof t===e,{isArray:ke}=Array,Te=Se("undefined");const Oe=Ee("ArrayBuffer");const Ae=Se("string"),Pe=Se("function"),Ce=Se("number"),Ne=e=>null!==e&&"object"===typeof e,Re=e=>{if("object"!==we(e))return!1;const t=_e(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},je=Ee("Date"),Me=Ee("File"),Ie=Ee("Blob"),De=Ee("FileList"),Le=Ee("URLSearchParams");function Fe(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ke(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let a;for(r=0;r<o;r++)a=n[r],t.call(null,e[a],a,e)}}function Be(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const ze="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,$e=e=>!Te(e)&&e!==ze;const Ue=(He="undefined"!==typeof Uint8Array&&_e(Uint8Array),e=>He&&e instanceof He);var He;const Ve=Ee("HTMLFormElement"),Ge=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),qe=Ee("RegExp"),We=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Fe(r,((r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)})),Object.defineProperties(e,n)},Ye="abcdefghijklmnopqrstuvwxyz",Ke="0123456789",Xe={DIGIT:Ke,ALPHA:Ye,ALPHA_DIGIT:Ye+Ye.toUpperCase()+Ke};const Ze=Ee("AsyncFunction"),Je={isArray:ke,isArrayBuffer:Oe,isBuffer:function(e){return null!==e&&!Te(e)&&null!==e.constructor&&!Te(e.constructor)&&Pe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Pe(e.append)&&("formdata"===(t=we(e))||"object"===t&&Pe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Oe(e.buffer),t},isString:Ae,isNumber:Ce,isBoolean:e=>!0===e||!1===e,isObject:Ne,isPlainObject:Re,isUndefined:Te,isDate:je,isFile:Me,isBlob:Ie,isRegExp:qe,isFunction:Pe,isStream:e=>Ne(e)&&Pe(e.pipe),isURLSearchParams:Le,isTypedArray:Ue,isFileList:De,forEach:Fe,merge:function e(){const{caseless:t}=$e(this)&&this||{},r={},n=(n,i)=>{const o=t&&Be(r,i)||i;Re(r[o])&&Re(n)?r[o]=e(r[o],n):Re(n)?r[o]=e({},n):ke(n)?r[o]=n.slice():r[o]=n};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Fe(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Fe(t,((t,n)=>{r&&Pe(t)?e[n]=ge(t,r):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&_e(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:we,kindOfTest:Ee,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(ke(e))return e;let t=e.length;if(!Ce(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Ve,hasOwnProperty:Ge,hasOwnProp:Ge,reduceDescriptors:We,freezeMethods:e=>{We(e,((t,r)=>{if(Pe(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Pe(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return ke(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Be,global:ze,isContextDefined:$e,ALPHABET:Xe,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe.ALPHA_DIGIT,r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&Pe(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Ne(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const i=ke(e)?[]:{};return Fe(e,((e,t)=>{const o=r(e,n+1);!Te(o)&&(i[t]=o)})),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:Ze,isThenable:e=>e&&(Ne(e)||Pe(e))&&Pe(e.then)&&Pe(e.catch)};function Qe(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Je.inherits(Qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const et=Qe.prototype,tt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{tt[e]={value:e}})),Object.defineProperties(Qe,tt),Object.defineProperty(et,"isAxiosError",{value:!0}),Qe.from=(e,t,r,n,i,o)=>{const a=Object.create(et);return Je.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Qe.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const rt=Qe;function nt(e){return Je.isPlainObject(e)||Je.isArray(e)}function it(e){return Je.endsWith(e,"[]")?e.slice(0,-2):e}function ot(e,t,r){return e?e.concat(t).map((function(e,t){return e=it(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const at=Je.toFlatObject(Je,{},null,(function(e){return/^is[A-Z]/.test(e)}));const st=function(e,t,r){if(!Je.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Je.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Je.isUndefined(t[e])}))).metaTokens,i=r.visitor||c,o=r.dots,a=r.indexes,s=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Je.isSpecCompliantForm(t);if(!Je.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Je.isDate(e))return e.toISOString();if(!s&&Je.isBlob(e))throw new rt("Blob is not supported. Use a Buffer instead.");return Je.isArrayBuffer(e)||Je.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,i){let s=e;if(e&&!i&&"object"===typeof e)if(Je.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Je.isArray(e)&&function(e){return Je.isArray(e)&&!e.some(nt)}(e)||(Je.isFileList(e)||Je.endsWith(r,"[]"))&&(s=Je.toArray(e)))return r=it(r),s.forEach((function(e,n){!Je.isUndefined(e)&&null!==e&&t.append(!0===a?ot([r],n,o):null===a?r:r+"[]",l(e))})),!1;return!!nt(e)||(t.append(ot(i,r,o),l(e)),!1)}const u=[],p=Object.assign(at,{defaultVisitor:c,convertValue:l,isVisitable:nt});if(!Je.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Je.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),Je.forEach(r,(function(r,o){!0===(!(Je.isUndefined(r)||null===r)&&i.call(t,r,Je.isString(o)?o.trim():o,n,p))&&e(r,n?n.concat(o):[o])})),u.pop()}}(e),t};function lt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ct(e,t){this._pairs=[],e&&st(e,this,t)}const ut=ct.prototype;ut.append=function(e,t){this._pairs.push([e,t])},ut.toString=function(e){const t=e?function(t){return e.call(this,t,lt)}:lt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const pt=ct;function ft(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ht(e,t,r){if(!t)return e;const n=r&&r.encode||ft,i=r&&r.serialize;let o;if(o=i?i(t,r):Je.isURLSearchParams(t)?t.toString():new pt(t,r).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const dt=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Je.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},yt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:pt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},vt="undefined"!==typeof window&&"undefined"!==typeof document,gt=(bt="undefined"!==typeof navigator&&navigator.product,vt&&["ReactNative","NativeScript","NS"].indexOf(bt)<0);var bt;const _t="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,wt={...e,...mt};const xt=function(e){function t(e,r,n,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&Je.isArray(n)?n.length:o,s)return Je.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a;n[o]&&Je.isObject(n[o])||(n[o]=[]);return t(e,r,n[o],i)&&Je.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}(n[o])),!a}if(Je.isFormData(e)&&Je.isFunction(e.entries)){const r={};return Je.forEachEntry(e,((e,n)=>{t(function(e){return Je.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null};const Et={transitional:yt,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=Je.isObject(e);i&&Je.isHTMLForm(e)&&(e=new FormData(e));if(Je.isFormData(e))return n&&n?JSON.stringify(xt(e)):e;if(Je.isArrayBuffer(e)||Je.isBuffer(e)||Je.isStream(e)||Je.isFile(e)||Je.isBlob(e))return e;if(Je.isArrayBufferView(e))return e.buffer;if(Je.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return st(e,new wt.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return wt.isNode&&Je.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Je.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return st(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(Je.isString(e))try{return(t||JSON.parse)(e),Je.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Et.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&Je.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(i){if(r){if("SyntaxError"===i.name)throw rt.from(i,rt.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wt.classes.FormData,Blob:wt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Je.forEach(["delete","get","head","post","put","patch"],(e=>{Et.headers[e]={}}));const St=Et,kt=Je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tt=Symbol("internals");function Ot(e){return e&&String(e).trim().toLowerCase()}function At(e){return!1===e||null==e?e:Je.isArray(e)?e.map(At):String(e)}function Pt(e,t,r,n,i){return Je.isFunction(n)?n.call(this,t,r):(i&&(t=r),Je.isString(t)?Je.isString(n)?-1!==t.indexOf(n):Je.isRegExp(n)?n.test(t):void 0:void 0)}class Ct{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=Ot(t);if(!i)throw new Error("header name must be a non-empty string");const o=Je.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||t]=At(e))}const o=(e,t)=>Je.forEach(e,((e,r)=>i(e,r,t)));return Je.isPlainObject(e)||e instanceof this.constructor?o(e,t):Je.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&kt[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t):null!=e&&i(t,e,r),this}get(e,t){if(e=Ot(e)){const r=Je.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Je.isFunction(t))return t.call(this,e,r);if(Je.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ot(e)){const r=Je.findKey(this,e);return!(!r||void 0===this[r]||t&&!Pt(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=Ot(e)){const i=Je.findKey(r,e);!i||t&&!Pt(0,r[i],i,t)||(delete r[i],n=!0)}}return Je.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];e&&!Pt(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return Je.forEach(this,((n,i)=>{const o=Je.findKey(r,i);if(o)return t[o]=At(n),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(i):String(i).trim();a!==i&&delete t[i],t[a]=At(n),r[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Je.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Je.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,r]=e;return t+": "+r})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Tt]=this[Tt]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Ot(e);t[n]||(!function(e,t){const r=Je.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})}))}(r,e),t[n]=!0)}return Je.isArray(e)?e.forEach(n):n(e),this}}Ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Je.reduceDescriptors(Ct.prototype,((e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}})),Je.freezeMethods(Ct);const Nt=Ct;function Rt(e,t){const r=this||St,n=t||r,i=Nt.from(n.headers);let o=n.data;return Je.forEach(e,(function(e){o=e.call(r,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function jt(e){return!(!e||!e.__CANCEL__)}function Mt(e,t,r){rt.call(this,null==e?"canceled":e,rt.ERR_CANCELED,t,r),this.name="CanceledError"}Je.inherits(Mt,rt,{__CANCEL__:!0});const It=Mt;const Dt=wt.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];Je.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Je.isString(n)&&a.push("path="+n),Je.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Lt(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ft=wt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function n(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(e){const t=Je.isString(e)?n(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0};const Bt=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[a];i||(i=l),r[o]=s,n[o]=l;let u=a,p=0;for(;u!==o;)p+=r[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const f=c&&l-c;return f?Math.round(1e3*p/f):void 0}};function zt(e,t){let r=0;const n=Bt(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,l=n(s);r=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const $t="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){let n=e.data;const i=Nt.from(e.headers).normalize();let o,a,{responseType:s,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(Je.isFormData(n))if(wt.hasStandardBrowserEnv||wt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(a=i.getContentType())){const[e,...t]=a?a.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+r))}const p=Lt(e.baseURL,e.url);function f(){if(!u)return;const n=Nt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new rt("Request failed with status code "+r.status,[rt.ERR_BAD_REQUEST,rt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}((function(e){t(e),c()}),(function(e){r(e),c()}),{data:s&&"text"!==s&&"json"!==s?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:n,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),ht(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(f)},u.onabort=function(){u&&(r(new rt("Request aborted",rt.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new rt("Network Error",rt.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||yt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new rt(t,n.clarifyTimeoutError?rt.ETIMEDOUT:rt.ECONNABORTED,e,u)),u=null},wt.hasStandardBrowserEnv&&(l&&Je.isFunction(l)&&(l=l(e)),l||!1!==l&&Ft(p))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Dt.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===n&&i.setContentType(null),"setRequestHeader"in u&&Je.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Je.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&"json"!==s&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",zt(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",zt(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{u&&(r(!t||t.type?new It(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(p);h&&-1===wt.protocols.indexOf(h)?r(new rt("Unsupported protocol "+h+":",rt.ERR_BAD_REQUEST,e)):u.send(n||null)}))},Ut={http:null,xhr:$t};Je.forEach(Ut,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ht=e=>"- ".concat(e),Vt=e=>Je.isFunction(e)||null===e||!1===e,Gt=e=>{e=Je.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){let t;if(r=e[o],n=r,!Vt(r)&&(n=Ut[(t=String(r)).toLowerCase()],void 0===n))throw new rt("Unknown adapter '".concat(t,"'"));if(n)break;i[t||"#"+o]=n}if(!n){const e=Object.entries(i).map((e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")}));let r=t?e.length>1?"since :\n"+e.map(Ht).join("\n"):" "+Ht(e[0]):"as no adapter specified";throw new rt("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function qt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new It(null,e)}function Wt(e){qt(e),e.headers=Nt.from(e.headers),e.data=Rt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Gt(e.adapter||St.adapter)(e).then((function(t){return qt(e),t.data=Rt.call(e,e.transformResponse,t),t.headers=Nt.from(t.headers),t}),(function(t){return jt(t)||(qt(e),t&&t.response&&(t.response.data=Rt.call(e,e.transformResponse,t.response),t.response.headers=Nt.from(t.response.headers))),Promise.reject(t)}))}const Yt=e=>e instanceof Nt?e.toJSON():e;function Kt(e,t){t=t||{};const r={};function n(e,t,r){return Je.isPlainObject(e)&&Je.isPlainObject(t)?Je.merge.call({caseless:r},e,t):Je.isPlainObject(t)?Je.merge({},t):Je.isArray(t)?t.slice():t}function i(e,t,r){return Je.isUndefined(t)?Je.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function o(e,t){if(!Je.isUndefined(t))return n(void 0,t)}function a(e,t){return Je.isUndefined(t)?Je.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,i,o){return o in t?n(r,i):o in e?n(void 0,r):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(Yt(e),Yt(t),!0)};return Je.forEach(Object.keys(Object.assign({},e,t)),(function(n){const o=l[n]||i,a=o(e[n],t[n],n);Je.isUndefined(a)&&o!==s||(r[n]=a)})),r}const Xt="1.6.5",Zt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Zt[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Jt={};Zt.transitional=function(e,t,r){function n(e,t){return"[Axios v1.6.5] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new rt(n(i," has been removed"+(t?" in "+t:"")),rt.ERR_DEPRECATED);return t&&!Jt[i]&&(Jt[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}};const Qt={assertOptions:function(e,t,r){if("object"!==typeof e)throw new rt("options must be an object",rt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const t=e[o],r=void 0===t||a(t,o,e);if(!0!==r)throw new rt("option "+o+" must be "+r,rt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new rt("Unknown option "+o,rt.ERR_BAD_OPTION)}},validators:Zt},er=Qt.validators;class tr{constructor(e){this.defaults=e,this.interceptors={request:new dt,response:new dt}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Kt(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;void 0!==r&&Qt.assertOptions(r,{silentJSONParsing:er.transitional(er.boolean),forcedJSONParsing:er.transitional(er.boolean),clarifyTimeoutError:er.transitional(er.boolean)},!1),null!=n&&(Je.isFunction(n)?t.paramsSerializer={serialize:n}:Qt.assertOptions(n,{encode:er.function,serialize:er.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Je.merge(i.common,i[t.method]);i&&Je.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Nt.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,p=0;if(!s){const e=[Wt.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);p<u;)c=c.then(e[p++],e[p++]);return c}u=a.length;let f=t;for(p=0;p<u;){const e=a[p++],t=a[p++];try{f=e(f)}catch(h){t.call(this,h);break}}try{c=Wt.call(this,f)}catch(h){return Promise.reject(h)}for(p=0,u=l.length;p<u;)c=c.then(l[p++],l[p++]);return c}getUri(e){return ht(Lt((e=Kt(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Je.forEach(["delete","get","head","options"],(function(e){tr.prototype[e]=function(t,r){return this.request(Kt(r||{},{method:e,url:t,data:(r||{}).data}))}})),Je.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,i){return this.request(Kt(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}tr.prototype[e]=t(),tr.prototype[e+"Form"]=t(!0)}));const rr=tr;class nr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,i){r.reason||(r.reason=new It(e,n,i),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new nr((function(t){e=t})),cancel:e}}}const ir=nr;const or={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(or).forEach((e=>{let[t,r]=e;or[r]=t}));const ar=or;const sr=function e(t){const r=new rr(t),n=ge(rr.prototype.request,r);return Je.extend(n,rr.prototype,r,{allOwnKeys:!0}),Je.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Kt(t,r))},n}(St);sr.Axios=rr,sr.CanceledError=It,sr.CancelToken=ir,sr.isCancel=jt,sr.VERSION=Xt,sr.toFormData=st,sr.AxiosError=rt,sr.Cancel=sr.CanceledError,sr.all=function(e){return Promise.all(e)},sr.spread=function(e){return function(t){return e.apply(null,t)}},sr.isAxiosError=function(e){return Je.isObject(e)&&!0===e.isAxiosError},sr.mergeConfig=Kt,sr.AxiosHeaders=Nt,sr.formToJSON=e=>xt(Je.isHTMLForm(e)?new FormData(e):e),sr.getAdapter=Gt,sr.HttpStatusCode=ar,sr.default=sr;const lr=sr;var cr=__webpack_require__(542);const ur=__webpack_require__.p+"static/media/delivery-bike.dccfe10cedb865f67bde.png",pr=__webpack_require__.p+"static/media/delivery-truck.bd950fdf9045eb1c95ab.png",fr=__webpack_require__.p+"static/media/delivery-man.cef3ed3a9331c0f49cef.png",hr=__webpack_require__.p+"static/media/pickup-truck.68e1cac65f432f7b3953.png",dr="https://dzapp.onrender.com",yr="5dkjdvL4XfpIXUgzcCe6-kXKkkEVf28uQcpgsT9Fqro",mr="https://geocode.search.hereapi.com/v1/geocode?apiKey=".concat(yr,"&in=countryCode:CAN"),vr="https://router.hereapi.com/v8/routes?return=summary&apikey=".concat(yr),gr=[{name:"walking",title:"Delivery man",image:fr},{name:"bicycle",title:"Delivery bike",image:ur},{name:"delivery_car",title:"Delivery car",image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGkUlEQVR4nO2Z/U8TdxzHuyx7+MFky5aY7DHZT1u2/bR/gCxmi4n24VqamE1d3A88O58m0PauVxCxWBEphaGA8wkHRRhQ2rsrE0ZFS1R8iHOozKgIaCQgAcSStfdZvuc0SiuP196VfF/JO2l63/ve+/u+79PdKRQYDAaDwWAwGAwGg8FgMBgMBoPBxCV62rlMaXTtTbRwg4lmNkSQHlAZ3aIJ1aezcCG9hRtSZrccUNGN7yuWChqDu1RnZkPJxaf50ra70HhtAk72B8F3H14qa9MNQTOVeV4n7wahqWcC9ncMwKb9Z3ktzfJqkmnQ087XFfFKAt3+ttbMDKyztvM1lx7OOYyFBDhdjT3jkOrw8zoLO/INzS1XxBsJdPubOpob2VxxDtoGQvMOYLEBInUM8mCu+Qv0Fm9ATzd/rIgntGbmbHqZn/9zkF9Q48UI8Pm6UIir8lwfKOIBldG1PtHCAXtralGNFitApAJXLyTmcI+JPOY9hZxJSGtfpjOzUxWd9xbda8QMEGkfdxsSLdxjFe2V7wqtNbNnsg5d4MUYdmIHiGT33gZ9Djep2i7DEFUGz5o1O1r51r5/Qa4BCiG23gE9zU4SmZ4PFXKBoLnlOjMbqO4eFqWR0QwQyXGyDw3nR0RmvRxChFd0Ftaf6/xbtAZaoxwgUnlHP+hodkLynqgh3ZvW7WoLLmS/55MwQCT05KKjmQmlqemTmIa2cqPnjdVGj1JtZDiCYviGq2OiNswaowCRKnyDoKO5oNrE1GkMzQl6vfPVqM1zSoN7m9rkuaIyeoJivgxQyUe80uAOqkye60ojY9Bntb61qND0NPuOivTQhJm7qSGZwIZC/8T2w72Q3zwENmZ0ScraMgxZR2/Cj3u7RggzN6Y1c3610ZOmNrEfzSu8VQbXlxqSGd5Q2PWIrLkDuz0PJW+cLcZCbSZr+yCl5MK4luZGtZS3V21i8lYbm79Ci+dLw9NkN7yrJpnRrCP/8FI3wiYj5dQPwsbyK1Nr8tqGCJId0lCeX5XZLSvRmvBCgFqSKU1xdAekNmyTsdA0tvXQ9dD6gs4hDcmMqk1u47NeqSGZIcuJQclN2uJEO5sewA+2MyMaijksBKgyukO7PSOSG7PF2Xz5fb5vSJntXq3wr1gB09WhSoT6zCIodD2Q3KxNpqLr+oEwe7siBvhUJ7L2SW7UJuNeSFDM8IwB+lQ6yY3aZKQibhTO3wrARIAHBEGxYzMG2KFOlNy0TUZC4T3PrAHWZdslN22TkZ72vFkDRIvIiexi2NOydB/jbGIFiB6spTZmixOdizSEcYCj81pEzk1fRBYSYM7xq5Bpd8FPO6oglSwRhH5nlbQIx6TuKbHyPe8Ad9bfhi3Wavh5VxVUOb3A+C7Aqe5rgtDvSicH2/IrYUtBtVBW6sCi7VsIUG1iAlbX8KyFc3/rgXS6DA7W/QH+Szeg63JvRKFjB+taIYMuE86ROrxo+hYC1FJMH3osme0OooobOP9LDXRNEyqLzpGyJ0bbtxCghmRK08suB2cquLWgWrg7czXR9b8q67zCsJAqwGj7fjIHGjyfa0jmcb4r8p4PTa5o7pip+3fNMCzQ3CLFwhJt3wXuEdBQ7MiTd4IUt3+t1Te52x3+Kj+z2AWVTm/YRU5fvA6OI82wOacMNueWQcnRZuG/sLtZywmrXKwDjLbvbYduhAgz2ygEmJR0/jWCZDvX7vJN7mx88RUWWubZUxfDLoAunGQoekHov+nl0CqH6oh1gNH0ndtwD7Rmdgx9S3r2ah+FqKE85WoTM5Vs7w4ajt8SvgugvVJn97WwC6A7mDTNyKbcX8LKnTrfI9SR+/v9mCoavum6Adh44EqIINlHapL9LuJHJjQnEiamREuxd9QmdyDZVCxUFmYkN9zI5khGunsg2WSP+XffaPhG30MIM9eoJJkv5vzJM4NyDKDuPJeh4DjiijgU0ij7gCLGyMZ3GmWvrqhl+UiTccnRZuGOzjQZH6hh+AzKfkyUVOLRd1L23m+35pWPL3Q7sGVH+TiqQ5RU4tV3OmW/WOX0huZrpNLJhjIoR7coJuLZd5Jhz2eppuLx+TwS1XNnAJ2TQhZ9KpqRePadZCj8Oo0sHqus44KzPZRXOtlQKmWfQOeIaiLefaM7ioYFmlsqalgerVRor4WEflfUMjw6hrq/lD1P9r7R5JpOlRxDW4UU474ppAyzoz+dsh+TYsFY6r4xGAwGg8FgMBgMBoPBYDAYjEIW/AdzXHgt8yR9OgAAAABJRU5ErkJggg=="},{name:"pickup_truck",title:"Pickup truck",image:hr}],br={walking:"Delivery Man",bicycle:"Delivery Moped",delivery_car:"Delivery Car",pickup_truck:"Delivery Truck"},_r={walking:[13,10,15],bicycle:[14,11,16],electric_moped:[15,12,17],car:[60,45,25],pickup_truck:[65,50,30]},wr="BOOKING_REQUESTED",xr=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];var Er=__webpack_require__(3628);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function kr(e){var t=function(e,t){if("object"!=Sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sr(t)?t:String(t)}function Tr(e,t,r){return(t=kr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(r),!0).forEach((function(t){Tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cr(e,t){if(e){if("string"===typeof e)return Pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pr(e,t):void 0}}function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||Cr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){if(null==e)return{};var r,n,i=(0,l.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var jr=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kr(n.key),n)}}var Ir=__webpack_require__(9611);function Dr(e){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dr(e)}function Lr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lr=function(){return!!e})()}function Fr(e,t){if(t&&("object"===Sr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Br(e){return function(e){if(Array.isArray(e))return Pr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zr=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(n){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),$r=Math.abs,Ur=String.fromCharCode,Hr=Object.assign;function Vr(e){return e.trim()}function Gr(e,t,r){return e.replace(t,r)}function qr(e,t){return e.indexOf(t)}function Wr(e,t){return 0|e.charCodeAt(t)}function Yr(e,t,r){return e.slice(t,r)}function Kr(e){return e.length}function Xr(e){return e.length}function Zr(e,t){return t.push(e),e}var Jr=1,Qr=1,en=0,tn=0,rn=0,nn="";function on(e,t,r,n,i,o,a){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:Jr,column:Qr,length:a,return:""}}function an(e,t){return Hr(on("",null,null,"",null,null,0),e,{length:-e.length},t)}function sn(){return rn=tn>0?Wr(nn,--tn):0,Qr--,10===rn&&(Qr=1,Jr--),rn}function ln(){return rn=tn<en?Wr(nn,tn++):0,Qr++,10===rn&&(Qr=1,Jr++),rn}function cn(){return Wr(nn,tn)}function un(){return tn}function pn(e,t){return Yr(nn,e,t)}function fn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hn(e){return Jr=Qr=1,en=Kr(nn=e),tn=0,[]}function dn(e){return nn="",e}function yn(e){return Vr(pn(tn-1,gn(91===e?e+2:40===e?e+1:e)))}function mn(e){for(;(rn=cn())&&rn<33;)ln();return fn(e)>2||fn(rn)>3?"":" "}function vn(e,t){for(;--t&&ln()&&!(rn<48||rn>102||rn>57&&rn<65||rn>70&&rn<97););return pn(e,un()+(t<6&&32==cn()&&32==ln()))}function gn(e){for(;ln();)switch(rn){case e:return tn;case 34:case 39:34!==e&&39!==e&&gn(rn);break;case 40:41===e&&gn(e);break;case 92:ln()}return tn}function bn(e,t){for(;ln()&&e+rn!==57&&(e+rn!==84||47!==cn()););return"/*"+pn(t,tn-1)+"*"+Ur(47===e?e:ln())}function _n(e){for(;!fn(cn());)ln();return pn(e,tn)}var wn="-ms-",xn="-moz-",En="-webkit-",Sn="comm",kn="rule",Tn="decl",On="@keyframes";function An(e,t){for(var r="",n=Xr(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function Pn(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Tn:return e.return=e.return||e.value;case Sn:return"";case On:return e.return=e.value+"{"+An(e.children,n)+"}";case kn:e.value=e.props.join(",")}return Kr(r=An(e.children,n))?e.return=e.value+"{"+r+"}":""}function Cn(e){return dn(Nn("",null,null,null,[""],e=hn(e),0,[0],e))}function Nn(e,t,r,n,i,o,a,s,l){for(var c=0,u=0,p=a,f=0,h=0,d=0,y=1,m=1,v=1,g=0,b="",_=i,w=o,x=n,E=b;m;)switch(d=g,g=ln()){case 40:if(108!=d&&58==Wr(E,p-1)){-1!=qr(E+=Gr(yn(g),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:E+=yn(g);break;case 9:case 10:case 13:case 32:E+=mn(d);break;case 92:E+=vn(un()-1,7);continue;case 47:switch(cn()){case 42:case 47:Zr(jn(bn(ln(),un()),t,r),l);break;default:E+="/"}break;case 123*y:s[c++]=Kr(E)*v;case 125*y:case 59:case 0:switch(g){case 0:case 125:m=0;case 59+u:-1==v&&(E=Gr(E,/\f/g,"")),h>0&&Kr(E)-p&&Zr(h>32?Mn(E+";",n,r,p-1):Mn(Gr(E," ","")+";",n,r,p-2),l);break;case 59:E+=";";default:if(Zr(x=Rn(E,t,r,c,u,i,s,b,_=[],w=[],p),o),123===g)if(0===u)Nn(E,t,x,x,_,o,p,s,w);else switch(99===f&&110===Wr(E,3)?100:f){case 100:case 108:case 109:case 115:Nn(e,x,x,n&&Zr(Rn(e,x,x,0,0,i,s,b,i,_=[],p),w),i,w,p,s,n?_:w);break;default:Nn(E,x,x,x,[""],w,0,s,w)}}c=u=h=0,y=v=1,b=E="",p=a;break;case 58:p=1+Kr(E),h=d;default:if(y<1)if(123==g)--y;else if(125==g&&0==y++&&125==sn())continue;switch(E+=Ur(g),g*y){case 38:v=u>0?1:(E+="\f",-1);break;case 44:s[c++]=(Kr(E)-1)*v,v=1;break;case 64:45===cn()&&(E+=yn(ln())),f=cn(),u=p=Kr(b=E+=_n(un())),g++;break;case 45:45===d&&2==Kr(E)&&(y=0)}}return o}function Rn(e,t,r,n,i,o,a,s,l,c,u){for(var p=i-1,f=0===i?o:[""],h=Xr(f),d=0,y=0,m=0;d<n;++d)for(var v=0,g=Yr(e,p+1,p=$r(y=a[d])),b=e;v<h;++v)(b=Vr(y>0?f[v]+" "+g:Gr(g,/&\f/g,f[v])))&&(l[m++]=b);return on(e,t,r,0===i?kn:s,l,c,u)}function jn(e,t,r){return on(e,t,r,Sn,Ur(rn),Yr(e,2,-2),0)}function Mn(e,t,r,n){return on(e,t,r,Tn,Yr(e,0,n),Yr(e,n+1,-1),n)}var In=function(e,t,r){for(var n=0,i=0;n=i,i=cn(),38===n&&12===i&&(t[r]=1),!fn(i);)ln();return pn(e,tn)},Dn=function(e,t){return dn(function(e,t){var r=-1,n=44;do{switch(fn(n)){case 0:38===n&&12===cn()&&(t[r]=1),e[r]+=In(tn-1,t,r);break;case 2:e[r]+=yn(n);break;case 4:if(44===n){e[++r]=58===cn()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Ur(n)}}while(n=ln());return e}(hn(e),t))},Ln=new WeakMap,Fn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Ln.get(r))&&!n){Ln.set(e,!0);for(var i=[],o=Dn(t,i),a=r.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},Bn=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function zn(e,t){switch(function(e,t){return 45^Wr(e,0)?(((t<<2^Wr(e,0))<<2^Wr(e,1))<<2^Wr(e,2))<<2^Wr(e,3):0}(e,t)){case 5103:return En+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return En+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return En+e+xn+e+wn+e+e;case 6828:case 4268:return En+e+wn+e+e;case 6165:return En+e+wn+"flex-"+e+e;case 5187:return En+e+Gr(e,/(\w+).+(:[^]+)/,En+"box-$1$2"+wn+"flex-$1$2")+e;case 5443:return En+e+wn+"flex-item-"+Gr(e,/flex-|-self/,"")+e;case 4675:return En+e+wn+"flex-line-pack"+Gr(e,/align-content|flex-|-self/,"")+e;case 5548:return En+e+wn+Gr(e,"shrink","negative")+e;case 5292:return En+e+wn+Gr(e,"basis","preferred-size")+e;case 6060:return En+"box-"+Gr(e,"-grow","")+En+e+wn+Gr(e,"grow","positive")+e;case 4554:return En+Gr(e,/([^-])(transform)/g,"$1"+En+"$2")+e;case 6187:return Gr(Gr(Gr(e,/(zoom-|grab)/,En+"$1"),/(image-set)/,En+"$1"),e,"")+e;case 5495:case 3959:return Gr(e,/(image-set\([^]*)/,En+"$1$`$1");case 4968:return Gr(Gr(e,/(.+:)(flex-)?(.*)/,En+"box-pack:$3"+wn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+En+e+e;case 4095:case 3583:case 4068:case 2532:return Gr(e,/(.+)-inline(.+)/,En+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Kr(e)-1-t>6)switch(Wr(e,t+1)){case 109:if(45!==Wr(e,t+4))break;case 102:return Gr(e,/(.+:)(.+)-([^]+)/,"$1"+En+"$2-$3$1"+xn+(108==Wr(e,t+3)?"$3":"$2-$3"))+e;case 115:return~qr(e,"stretch")?zn(Gr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Wr(e,t+1))break;case 6444:switch(Wr(e,Kr(e)-3-(~qr(e,"!important")&&10))){case 107:return Gr(e,":",":"+En)+e;case 101:return Gr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+En+(45===Wr(e,14)?"inline-":"")+"box$3$1"+En+"$2$3$1"+wn+"$2box$3")+e}break;case 5936:switch(Wr(e,t+11)){case 114:return En+e+wn+Gr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return En+e+wn+Gr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return En+e+wn+Gr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return En+e+wn+e+e}return e}var $n=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case Tn:e.return=zn(e.value,e.length);break;case On:return An([an(e,{value:Gr(e.value,"@","@"+En)})],n);case kn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return An([an(e,{props:[Gr(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return An([an(e,{props:[Gr(t,/:(plac\w+)/,":"+En+"input-$1")]}),an(e,{props:[Gr(t,/:(plac\w+)/,":-moz-$1")]}),an(e,{props:[Gr(t,/:(plac\w+)/,wn+"input-$1")]})],n)}return""}))}}],Un=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n=e.stylisPlugins||$n;var i,o,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;s.push(e)}));var l,c,u=[Pn,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],p=function(e){var t=Xr(e);return function(r,n,i,o){for(var a="",s=0;s<t;s++)a+=e[s](r,n,i,o)||"";return a}}([Fn,Bn].concat(n,u));o=function(e,t,r,n){l=r,An(Cn(e?e+"{"+t.styles+"}":t.styles),p),n&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new zr({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return f.sheet.hydrate(s),f};var Hn=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)};var Vn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Gn(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var qn=/[A-Z]|^ms/g,Wn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Yn=function(e){return 45===e.charCodeAt(1)},Kn=function(e){return null!=e&&"boolean"!==typeof e},Xn=Gn((function(e){return Yn(e)?e:e.replace(qn,"-$&").toLowerCase()})),Zn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Wn,(function(e,t,r){return Qn={name:t,styles:r,next:Qn},t}))}return 1===Vn[e]||Yn(e)||"number"!==typeof t||0===t?t:t+"px"};function Jn(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return Qn={name:r.name,styles:r.styles,next:Qn},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)Qn={name:n.name,styles:n.styles,next:Qn},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Jn(e,t,r[i])+";";else for(var o in r){var a=r[o];if("object"!==typeof a)null!=t&&void 0!==t[a]?n+=o+"{"+t[a]+"}":Kn(a)&&(n+=Xn(o)+":"+Zn(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=Jn(e,t,a);switch(o){case"animation":case"animationName":n+=Xn(o)+":"+s+";";break;default:n+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Kn(a[l])&&(n+=Xn(o)+":"+Zn(o,a[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=Qn,o=r(e);return Qn=i,Jn(e,t,o)}}if(null==t)return r;var a=t[r];return void 0!==a?a:r}var Qn,ei=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var ti=function(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";Qn=void 0;var o=e[0];null==o||void 0===o.raw?(n=!1,i+=Jn(r,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=Jn(r,t,e[a]),n&&(i+=o[a]);ei.lastIndex=0;for(var s,l="";null!==(s=ei.exec(i));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Qn}},ri=!!r.useInsertionEffect&&r.useInsertionEffect,ni=ri||function(e){return e()},ii=(ri||t.useLayoutEffect,{}.hasOwnProperty),oi=t.createContext("undefined"!==typeof HTMLElement?Un({key:"css"}):null);oi.Provider;var ai=function(e){return(0,t.forwardRef)((function(r,n){var i=(0,t.useContext)(oi);return e(r,i,n)}))};var si=t.createContext({});var li="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ci=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return Hn(t,r,n),ni((function(){return function(e,t,r){Hn(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+n:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,r,n)})),null},ui=ai((function(e,r,n){var i=e.css;"string"===typeof i&&void 0!==r.registered[i]&&(i=r.registered[i]);var o=e[li],a=[i],s="";"string"===typeof e.className?s=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}(r.registered,a,e.className):null!=e.className&&(s=e.className+" ");var l=ti(a,void 0,t.useContext(si));s+=r.key+"-"+l.name;var c={};for(var u in e)ii.call(e,u)&&"css"!==u&&u!==li&&(c[u]=e[u]);return c.ref=n,c.className=s,t.createElement(t.Fragment,null,t.createElement(ci,{cache:r,serialized:l,isStringTag:"string"===typeof o}),t.createElement(o,c))}));var pi=ui,fi=(__webpack_require__(2110),function(e,r){var n=arguments;if(null==r||!ii.call(r,"css"))return t.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=pi,o[1]=function(e,t){var r={};for(var n in t)ii.call(t,n)&&(r[n]=t[n]);return r[li]=e,r}(e,r);for(var a=2;a<i;a++)o[a]=n[a];return t.createElement.apply(null,o)});function hi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ti(t)}function di(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var yi=__webpack_require__(4164),mi=__webpack_require__(3904);const vi=t.useLayoutEffect;var gi=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],bi=function(){};function _i(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function wi(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o=[].concat(n);if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&o.push("".concat(_i(e,a)));return o.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var xi=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===Sr(e)&&null!==e?[e]:[];var t},Ei=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Ar({},Rr(e,gi))},Si=function(e,t,r){var n=e.cx,i=e.getStyles,o=e.getClassNames,a=e.className;return{css:i(t,e),className:n(null!==r&&void 0!==r?r:{},o(t,e),a)}};function ki(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Ti(e){return ki(e)?window.pageYOffset:e.scrollTop}function Oi(e,t){ki(e)?window.scrollTo(0,t):e.scrollTop=t}function Ai(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bi,i=Ti(e),o=t-i,a=0;!function t(){var s=function(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}(a+=10,i,o,r);Oi(e,s),a<r?window.requestAnimationFrame(t):n(e)}()}function Pi(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?Oi(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&Oi(e,Math.max(t.offsetTop-i,0))}function Ci(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var Ni=!1,Ri={get passive(){return Ni=!0}},ji="undefined"!==typeof window?window:{};ji.addEventListener&&ji.removeEventListener&&(ji.addEventListener("p",bi,Ri),ji.removeEventListener("p",bi,!1));var Mi=Ni;function Ii(e){return null!=e}function Di(e,t,r){return e?t:r}var Li=["children","innerProps"],Fi=["children","innerProps"];function Bi(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,o=e.shouldScroll,a=e.isFixedPosition,s=e.controlHeight,l=function(e){var t=getComputedStyle(e),r="absolute"===t.position,n=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!r||"static"!==t.position)&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(r),c={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return c;var u,p=l.getBoundingClientRect().height,f=r.getBoundingClientRect(),h=f.bottom,d=f.height,y=f.top,m=r.offsetParent.getBoundingClientRect().top,v=a?window.innerHeight:ki(u=l)?window.innerHeight:u.clientHeight,g=Ti(l),b=parseInt(getComputedStyle(r).marginBottom,10),_=parseInt(getComputedStyle(r).marginTop,10),w=m-_,x=v-y,E=w+g,S=p-g-y,k=h-v+g+b,T=g+y-_,O=160;switch(i){case"auto":case"bottom":if(x>=d)return{placement:"bottom",maxHeight:t};if(S>=d&&!a)return o&&Ai(l,k,O),{placement:"bottom",maxHeight:t};if(!a&&S>=n||a&&x>=n)return o&&Ai(l,k,O),{placement:"bottom",maxHeight:a?x-b:S-b};if("auto"===i||a){var A=t,P=a?w:E;return P>=n&&(A=Math.min(P-b-s,t)),{placement:"top",maxHeight:A}}if("bottom"===i)return o&&Oi(l,k),{placement:"bottom",maxHeight:t};break;case"top":if(w>=d)return{placement:"top",maxHeight:t};if(E>=d&&!a)return o&&Ai(l,T,O),{placement:"top",maxHeight:t};if(!a&&E>=n||a&&w>=n){var C=t;return(!a&&E>=n||a&&w>=n)&&(C=a?w-_:E-_),o&&Ai(l,T,O),{placement:"top",maxHeight:C}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var zi,$i=function(e){return"auto"===e?"bottom":e},Ui=(0,t.createContext)(null),Hi=function(e){var r=e.children,n=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,a=e.menuPosition,s=e.menuShouldScrollIntoView,l=e.theme,c=((0,t.useContext)(Ui)||{}).setPortalPlacement,u=(0,t.useRef)(null),p=Nr((0,t.useState)(i),2),f=p[0],h=p[1],d=Nr((0,t.useState)(null),2),y=d[0],m=d[1],v=l.spacing.controlHeight;return vi((function(){var e=u.current;if(e){var t="fixed"===a,r=Bi({maxHeight:i,menuEl:e,minHeight:n,placement:o,shouldScroll:s&&!t,isFixedPosition:t,controlHeight:v});h(r.maxHeight),m(r.placement),null===c||void 0===c||c(r.placement)}}),[i,o,a,s,n,c,v]),r({ref:u,placerProps:Ar(Ar({},e),{},{placement:y||$i(o),maxHeight:f})})},Vi=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"menu",{menu:!0}),{ref:r},n),t)},Gi=function(e,t){var r=e.theme,n=r.spacing.baseUnit,i=r.colors;return Ar({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},qi=Gi,Wi=Gi,Yi=["size"],Ki=["innerProps","isRtl","size"];var Xi={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Zi=function(e){var t=e.size,r=Rr(e,Yi);return fi("svg",(0,s.Z)({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Xi},r))},Ji=function(e){return fi(Zi,(0,s.Z)({size:20},e),fi("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Qi=function(e){return fi(Zi,(0,s.Z)({size:20},e),fi("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},eo=function(e,t){var r=e.isFocused,n=e.theme,i=n.spacing.baseUnit,o=n.colors;return Ar({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?o.neutral60:o.neutral20,padding:2*i,":hover":{color:r?o.neutral80:o.neutral40}})},to=eo,ro=eo,no=function(){var e=hi.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(zi||(zi=di(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),io=function(e){var t=e.delay,r=e.offset;return fi("span",{css:hi({animation:"".concat(no," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},oo=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,i=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return fi("div",(0,s.Z)({ref:i},Si(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":a}),o,{"aria-disabled":r||void 0}),t)},ao=["data"],so=function(e){var t=e.children,r=e.cx,n=e.getStyles,i=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,p=e.selectProps;return fi("div",(0,s.Z)({},Si(e,"group",{group:!0}),l),fi(o,(0,s.Z)({},a,{selectProps:p,theme:u,getStyles:n,getClassNames:i,cx:r}),c),fi("div",null,t))},lo=["innerRef","isDisabled","isHidden","inputClassName"],co={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},uo={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ar({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},co)},po=function(e){return Ar({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},co)},fo=function(e){var t=e.children,r=e.innerProps;return fi("div",r,t)};var ho=function(e){var t=e.children,r=e.components,n=e.data,i=e.innerProps,o=e.isDisabled,a=e.removeProps,s=e.selectProps,l=r.Container,c=r.Label,u=r.Remove;return fi(l,{data:n,innerProps:Ar(Ar({},Si(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:s},fi(c,{data:n,innerProps:Ar({},Si(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},t),fi(u,{data:n,innerProps:Ar(Ar({},Si(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},a),selectProps:s}))},yo={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||fi(Ji,null))},Control:oo,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||fi(Qi,null))},DownChevron:Qi,CrossIcon:Ji,Group:so,GroupHeading:function(e){var t=Ei(e);t.data;var r=Rr(t,ao);return fi("div",(0,s.Z)({},Si(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return fi("span",(0,s.Z)({},t,Si(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=Ei(e),i=n.innerRef,o=n.isDisabled,a=n.isHidden,l=n.inputClassName,c=Rr(n,lo);return fi("div",(0,s.Z)({},Si(e,"input",{"input-container":!0}),{"data-value":r||""}),fi("input",(0,s.Z)({className:t({input:!0},l),ref:i,style:po(a),disabled:o},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,i=void 0===n?4:n,o=Rr(e,Ki);return fi("div",(0,s.Z)({},Si(Ar(Ar({},o),{},{innerProps:t,isRtl:r,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),fi(io,{delay:0,offset:r}),fi(io,{delay:160,offset:!0}),fi(io,{delay:320,offset:!r}))},Menu:Vi,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,i=e.isMulti;return fi("div",(0,s.Z)({},Si(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:n},r),t)},MenuPortal:function(e){var r=e.appendTo,n=e.children,i=e.controlElement,o=e.innerProps,a=e.menuPlacement,l=e.menuPosition,c=(0,t.useRef)(null),u=(0,t.useRef)(null),p=Nr((0,t.useState)($i(a)),2),f=p[0],h=p[1],d=(0,t.useMemo)((function(){return{setPortalPlacement:h}}),[]),y=Nr((0,t.useState)(null),2),m=y[0],v=y[1],g=(0,t.useCallback)((function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===l?0:window.pageYOffset,r=e[f]+t;r===(null===m||void 0===m?void 0:m.offset)&&e.left===(null===m||void 0===m?void 0:m.rect.left)&&e.width===(null===m||void 0===m?void 0:m.rect.width)||v({offset:r,rect:e})}}),[i,l,f,null===m||void 0===m?void 0:m.offset,null===m||void 0===m?void 0:m.rect.left,null===m||void 0===m?void 0:m.rect.width]);vi((function(){g()}),[g]);var b=(0,t.useCallback)((function(){"function"===typeof u.current&&(u.current(),u.current=null),i&&c.current&&(u.current=(0,mi.Me)(i,c.current,g,{elementResize:"ResizeObserver"in window}))}),[i,g]);vi((function(){b()}),[b]);var _=(0,t.useCallback)((function(e){c.current=e,b()}),[b]);if(!r&&"fixed"!==l||!m)return null;var w=fi("div",(0,s.Z)({ref:_},Si(Ar(Ar({},e),{},{offset:m.offset,position:l,rect:m.rect}),"menuPortal",{"menu-portal":!0}),o),n);return fi(Ui.Provider,{value:d},r?(0,yi.createPortal)(w,r):w)},LoadingMessage:function(e){var t=e.children,r=void 0===t?"Loading...":t,n=e.innerProps,i=Rr(e,Fi);return fi("div",(0,s.Z)({},Si(Ar(Ar({},i),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=void 0===t?"No options":t,n=e.innerProps,i=Rr(e,Li);return fi("div",(0,s.Z)({},Si(Ar(Ar({},i),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:ho,MultiValueContainer:fo,MultiValueLabel:fo,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return fi("div",(0,s.Z)({role:"button"},r),t||fi(Ji,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,i=e.isSelected,o=e.innerRef,a=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":i}),{ref:o,"aria-disabled":r},a),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,i=e.isRtl;return fi("div",(0,s.Z)({},Si(e,"container",{"--is-disabled":n,"--is-rtl":i}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return fi("div",(0,s.Z)({},Si(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,i=e.hasValue;return fi("div",(0,s.Z)({},Si(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":i}),r),t)}},mo=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function vo(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],i=t[r],!(n===i||mo(n)&&mo(i)))return!1;var n,i;return!0}for(var go={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},bo=function(e){return fi("span",(0,s.Z)({css:go},e))},_o={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=void 0===r?"":r,i=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(n,o?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,i=e.label,o=void 0===i?"":i,a=e.selectValue,s=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&a)return"value ".concat(o," focused, ").concat(u(a,r),".");if("menu"===t&&c){var p=s?" disabled":"",f="".concat(l?" selected":"").concat(p);return"".concat(o).concat(f,", ").concat(u(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},wo=function(e){var r=e.ariaSelection,n=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,a=e.isFocused,s=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,p=l.ariaLiveMessages,f=l.getOptionLabel,h=l.inputValue,d=l.isMulti,y=l.isOptionDisabled,m=l.isSearchable,v=l.menuIsOpen,g=l.options,b=l.screenReaderStatus,_=l.tabSelectsValue,w=l.isLoading,x=l["aria-label"],E=l["aria-live"],S=(0,t.useMemo)((function(){return Ar(Ar({},_o),p||{})}),[p]),k=(0,t.useMemo)((function(){var e,t="";if(r&&S.onChange){var n=r.option,i=r.options,o=r.removedValue,a=r.removedValues,l=r.value,c=o||n||(e=l,Array.isArray(e)?null:e),u=c?f(c):"",p=i||a||void 0,h=p?p.map(f):[],d=Ar({isDisabled:c&&y(c,s),label:u,labels:h},r);t=S.onChange(d)}return t}),[r,S,y,s,f]),T=(0,t.useMemo)((function(){var e="",t=n||i,r=!!(n&&s&&s.includes(n));if(t&&S.onFocus){var a={focused:t,label:f(t),isDisabled:y(t,s),isSelected:r,options:o,context:t===n?"menu":"value",selectValue:s,isAppleDevice:u};e=S.onFocus(a)}return e}),[n,i,f,y,S,o,s,u]),O=(0,t.useMemo)((function(){var e="";if(v&&g.length&&!w&&S.onFilter){var t=b({count:o.length});e=S.onFilter({inputValue:h,resultsMessage:t})}return e}),[o,h,v,S,g,b,w]),A="initial-input-focus"===(null===r||void 0===r?void 0:r.action),P=(0,t.useMemo)((function(){var e="";if(S.guidance){var t=i?"value":v?"menu":"input";e=S.guidance({"aria-label":x,context:t,isDisabled:n&&y(n,s),isMulti:d,isSearchable:m,tabSelectsValue:_,isInitialFocus:A})}return e}),[x,n,i,d,y,m,v,S,s,_,A]),C=fi(t.Fragment,null,fi("span",{id:"aria-selection"},k),fi("span",{id:"aria-focused"},T),fi("span",{id:"aria-results"},O),fi("span",{id:"aria-guidance"},P));return fi(t.Fragment,null,fi(bo,{id:c},A&&C),fi(bo,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!A&&C))},xo=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],Eo=new RegExp("["+xo.map((function(e){return e.letters})).join("")+"]","g"),So={},ko=0;ko<xo.length;ko++)for(var To=xo[ko],Oo=0;Oo<To.letters.length;Oo++)So[To.letters[Oo]]=To.base;var Ao=function(e){return e.replace(Eo,(function(e){return So[e]}))},Po=function(e,t){void 0===t&&(t=vo);var r=null;function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return n.clear=function(){r=null},n}(Ao),Co=function(e){return e.replace(/^\s+|\s+$/g,"")},No=function(e){return"".concat(e.label," ").concat(e.value)},Ro=["innerRef"];function jo(e){var t=e.innerRef,r=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=Object.entries(e).filter((function(e){var t=Nr(e,1)[0];return!r.includes(t)}));return i.reduce((function(e,t){var r=Nr(t,2),n=r[0],i=r[1];return e[n]=i,e}),{})}(Rr(e,Ro),"onExited","in","enter","exit","appear");return fi("input",(0,s.Z)({ref:t},r,{css:hi({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Mo=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};var Io=["boxSizing","height","overflow","paddingRight","position"],Do={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Lo(e){e.preventDefault()}function Fo(e){e.stopPropagation()}function Bo(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;0===e?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function zo(){return"ontouchstart"in window||navigator.maxTouchPoints}var $o=!("undefined"===typeof window||!window.document||!window.document.createElement),Uo=0,Ho={capture:!1,passive:!1};var Vo=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Go={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function qo(e){var r=e.children,n=e.lockEnabled,i=e.captureEnabled,o=function(e){var r=e.isEnabled,n=e.onBottomArrive,i=e.onBottomLeave,o=e.onTopArrive,a=e.onTopLeave,s=(0,t.useRef)(!1),l=(0,t.useRef)(!1),c=(0,t.useRef)(0),u=(0,t.useRef)(null),p=(0,t.useCallback)((function(e,t){if(null!==u.current){var r=u.current,c=r.scrollTop,p=r.scrollHeight,f=r.clientHeight,h=u.current,d=t>0,y=p-f-c,m=!1;y>t&&s.current&&(i&&i(e),s.current=!1),d&&l.current&&(a&&a(e),l.current=!1),d&&t>y?(n&&!s.current&&n(e),h.scrollTop=p,m=!0,s.current=!0):!d&&-t>c&&(o&&!l.current&&o(e),h.scrollTop=0,m=!0,l.current=!0),m&&Mo(e)}}),[n,i,o,a]),f=(0,t.useCallback)((function(e){p(e,e.deltaY)}),[p]),h=(0,t.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),d=(0,t.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;p(e,t)}),[p]),y=(0,t.useCallback)((function(e){if(e){var t=!!Mi&&{passive:!1};e.addEventListener("wheel",f,t),e.addEventListener("touchstart",h,t),e.addEventListener("touchmove",d,t)}}),[d,h,f]),m=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",f,!1),e.removeEventListener("touchstart",h,!1),e.removeEventListener("touchmove",d,!1))}),[d,h,f]);return(0,t.useEffect)((function(){if(r){var e=u.current;return y(e),function(){m(e)}}}),[r,y,m]),function(e){u.current=e}}({isEnabled:void 0===i||i,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),a=function(e){var r=e.isEnabled,n=e.accountForScrollbars,i=void 0===n||n,o=(0,t.useRef)({}),a=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){if($o){var t=document.body,r=t&&t.style;if(i&&Io.forEach((function(e){var t=r&&r[e];o.current[e]=t})),i&&Uo<1){var n=parseInt(o.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,s=window.innerWidth-a+n||0;Object.keys(Do).forEach((function(e){var t=Do[e];r&&(r[e]=t)})),r&&(r.paddingRight="".concat(s,"px"))}t&&zo()&&(t.addEventListener("touchmove",Lo,Ho),e&&(e.addEventListener("touchstart",Bo,Ho),e.addEventListener("touchmove",Fo,Ho))),Uo+=1}}),[i]),l=(0,t.useCallback)((function(e){if($o){var t=document.body,r=t&&t.style;Uo=Math.max(Uo-1,0),i&&Uo<1&&Io.forEach((function(e){var t=o.current[e];r&&(r[e]=t)})),t&&zo()&&(t.removeEventListener("touchmove",Lo,Ho),e&&(e.removeEventListener("touchstart",Bo,Ho),e.removeEventListener("touchmove",Fo,Ho)))}}),[i]);return(0,t.useEffect)((function(){if(r){var e=a.current;return s(e),function(){l(e)}}}),[r,s,l]),function(e){a.current=e}}({isEnabled:n});return fi(t.Fragment,null,n&&fi("div",{onClick:Vo,css:Go}),r((function(e){o(e),a(e)})))}var Wo={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Yo=function(e){var t=e.name,r=e.onFocus;return fi("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Wo,value:"",onChange:function(){}})};function Ko(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function Xo(){return Ko(/^Mac/i)}function Zo(){return Ko(/^iPhone/i)||Ko(/^iPad/i)||Xo()&&navigator.maxTouchPoints>1}var Jo={clearIndicator:ro,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,i=e.theme,o=i.colors,a=i.borderRadius;return Ar({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:n?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:n?o.primary:o.neutral30}})},dropdownIndicator:to,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,i=r.spacing;return Ar({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,i=n.spacing.baseUnit,o=n.colors;return Ar({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var r=e.isDisabled,n=e.value,i=e.theme,o=i.spacing,a=i.colors;return Ar(Ar({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},uo),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,i=e.theme,o=i.colors,a=i.spacing.baseUnit;return Ar({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?o.neutral60:o.neutral20,padding:2*a})},loadingMessage:Wi,menu:function(e,t){var r,n=e.placement,i=e.theme,o=i.borderRadius,a=i.spacing,s=i.colors;return Ar((Tr(r={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(n),"100%"),Tr(r,"position","absolute"),Tr(r,"width","100%"),Tr(r,"zIndex",1),r),t?{}:{backgroundColor:s.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return Ar({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,i=r.borderRadius,o=r.colors;return Ar({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,i=r.colors,o=e.cropWithEllipsis;return Ar({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,i=r.borderRadius,o=r.colors,a=e.isFocused;return Ar({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:qi,option:function(e,t){var r=e.isDisabled,n=e.isFocused,i=e.isSelected,o=e.theme,a=o.spacing,s=o.colors;return Ar({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?s.primary:n?s.primary25:"transparent",color:r?s.neutral20:i?s.neutral0:"inherit",padding:"".concat(2*a.baseUnit,"px ").concat(3*a.baseUnit,"px"),":active":{backgroundColor:r?void 0:i?s.primary:s.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,i=r.colors;return Ar({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,i=n.spacing,o=n.colors;return Ar({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Ar({alignItems:"center",display:n&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}};var Qo={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},ea={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Ci(),captureMenuScroll:!Ci(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e){return function(t,r){if(t.data.__isNew__)return!0;var n=Ar({ignoreCase:!0,ignoreAccents:!0,stringify:No,trim:!0,matchFrom:"any"},e),i=n.ignoreCase,o=n.ignoreAccents,a=n.stringify,s=n.trim,l=n.matchFrom,c=s?Co(r):r,u=s?Co(a(t)):a(t);return i&&(c=c.toLowerCase(),u=u.toLowerCase()),o&&(c=Po(c),u=Ao(u)),"start"===l?u.substr(0,c.length)===c:u.indexOf(c)>-1}}(),formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function ta(e,t,r,n){return{type:"option",data:t,isDisabled:ca(e,t,r),isSelected:ua(e,t,r),label:sa(e,t),value:la(e,t),index:n}}function ra(e,t){return e.options.map((function(r,n){if("options"in r){var i=r.options.map((function(r,n){return ta(e,r,t,n)})).filter((function(t){return oa(e,t)}));return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var o=ta(e,r,t,n);return oa(e,o)?o:void 0})).filter(Ii)}function na(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,Br(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function ia(e,t){return e.reduce((function(e,r){return"group"===r.type?e.push.apply(e,Br(r.options.map((function(e){return{data:e.data,id:"".concat(t,"-").concat(r.index,"-").concat(e.index)}})))):e.push({data:r.data,id:"".concat(t,"-").concat(r.index)}),e}),[])}function oa(e,t){var r=e.inputValue,n=void 0===r?"":r,i=t.data,o=t.isSelected,a=t.label,s=t.value;return(!fa(e)||!o)&&pa(e,{label:a,value:s,data:i},n)}var aa=function(e,t){var r;return(null===(r=e.find((function(e){return e.data===t})))||void 0===r?void 0:r.id)||null},sa=function(e,t){return e.getOptionLabel(t)},la=function(e,t){return e.getOptionValue(t)};function ca(e,t,r){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,r)}function ua(e,t,r){if(r.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,r);var n=la(e,t);return r.some((function(t){return la(e,t)===n}))}function pa(e,t,r){return!e.filterOption||e.filterOption(t,r)}var fa=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return void 0===t?r:t},ha=1,da=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,Ir.Z)(e,t)}(a,e);var r,n,i,o=function(e){var t=Lr();return function(){var r,n=Dr(e);if(t){var i=Dr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fr(this,r)}}(a);function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=Xo()||Zo(),t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,r){var n=t.props,i=n.onChange,o=n.name;r.name=o,t.ariaOnChange(e,r),i(e,r)},t.setValue=function(e,r,n){var i=t.props,o=i.closeMenuOnSelect,a=i.isMulti,s=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:s}),o&&(t.setState({inputIsHiddenAfterUpdate:!a}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:r,option:n})},t.selectOption=function(e){var r=t.props,n=r.blurInputOnSelect,i=r.isMulti,o=r.name,a=t.state.selectValue,s=i&&t.isOptionSelected(e,a),l=t.isOptionDisabled(e,a);if(s){var c=t.getOptionValue(e);t.setValue(a.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:o});i?t.setValue([].concat(Br(a),[e]),"select-option",e):t.setValue(e,"select-option")}n&&t.blurInput()},t.removeValue=function(e){var r=t.props.isMulti,n=t.state.selectValue,i=t.getOptionValue(e),o=n.filter((function(e){return t.getOptionValue(e)!==i})),a=Di(r,o,o[0]||null);t.onChange(a,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(Di(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,r=t.state.selectValue,n=r[r.length-1],i=r.slice(0,r.length-1),o=Di(e,i,i[0]||null);t.onChange(o,{action:"pop-value",removedValue:n})},t.getFocusedOptionId=function(e){return aa(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return ia(ra(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return wi.apply(void 0,[t.props.classNamePrefix].concat(r))},t.getOptionLabel=function(e){return sa(t.props,e)},t.getOptionValue=function(e){return la(t.props,e)},t.getStyles=function(e,r){var n=t.props.unstyled,i=Jo[e](r,n);i.boxSizing="border-box";var o=t.props.styles[e];return o?o(i,r):i},t.getClassNames=function(e,r){var n,i;return null===(n=(i=t.props.classNames)[e])||void 0===n?void 0:n.call(i,r)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,Ar(Ar({},yo),e.components);var e},t.buildCategorizedOptions=function(){return ra(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return na(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,r){t.setState({ariaSelection:Ar({value:e},r)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var r=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():r&&t.openMenu("first"):(r&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var r=t.props,n=r.isMulti,i=r.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!n}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&ki(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var r=e.touches,n=r&&r.item(0);n&&(t.initialTouchX=n.clientX,t.initialTouchY=n.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var r=e.touches,n=r&&r.item(0);if(n){var i=Math.abs(n.clientX-t.initialTouchX),o=Math.abs(n.clientY-t.initialTouchY);t.userIsDragging=i>5||o>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var r=t.props.inputValue,n=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(n,{action:"input-change",prevInputValue:r}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var r=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:r}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var r=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:r>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return fa(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var r=t.props,n=r.isMulti,i=r.backspaceRemovesValue,o=r.escapeClearsValue,a=r.inputValue,s=r.isClearable,l=r.isDisabled,c=r.menuIsOpen,u=r.onKeyDown,p=r.tabSelectsValue,f=r.openMenuOnFocus,h=t.state,d=h.focusedOption,y=h.focusedValue,m=h.selectValue;if(!l&&("function"!==typeof u||(u(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!n||a)return;t.focusValue("previous");break;case"ArrowRight":if(!n||a)return;t.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(y)t.removeValue(y);else{if(!i)return;n?t.popValue():s&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!p||!d||f&&t.isOptionSelected(d,m))return;t.selectOption(d);break;case"Enter":if(229===e.keyCode)break;if(c){if(!d)return;if(t.isComposing)return;t.selectOption(d);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:a}),t.onMenuClose()):s&&o&&t.clearValue();break;case" ":if(a)return;if(!c){t.openMenu("first");break}if(!d)return;t.selectOption(d);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++ha),t.state.selectValue=xi(e.value),e.menuIsOpen&&t.state.selectValue.length){var r=t.getFocusableOptionsWithIds(),n=t.buildFocusableOptions(),i=n.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=r,t.state.focusedOption=n[i],t.state.focusedOptionId=aa(r,n[i])}return t}return r=a,n=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Pi(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isDisabled,n=t.menuIsOpen,i=this.state.isFocused;(i&&!r&&e.isDisabled||i&&n&&!e.menuIsOpen)&&this.focusInput(),i&&r&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||r||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Pi(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,r=this.state,n=r.selectValue,i=r.isFocused,o=this.buildFocusableOptions(),a="first"===e?0:o.length-1;if(!this.props.isMulti){var s=o.indexOf(n[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[a],focusedOptionId:this.getFocusedOptionId(o[a])},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,r=t.selectValue,n=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=r.indexOf(n);n||(i=-1);var o=r.length-1,a=-1;if(r.length){switch(e){case"previous":a=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(a=i+1)}this.setState({inputIsHidden:-1!==a,focusedValue:r[a]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,r=this.state.focusedOption,n=this.getFocusableOptions();if(n.length){var i=0,o=n.indexOf(r);r||(o=-1),"up"===e?i=o>0?o-1:n.length-1:"down"===e?i=(o+1)%n.length:"pageup"===e?(i=o-t)<0&&(i=0):"pagedown"===e?(i=o+t)>n.length-1&&(i=n.length-1):"last"===e&&(i=n.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:n[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(n[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(Qo):Ar(Ar({},Qo),this.props.theme):Qo}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,r=this.getStyles,n=this.getClassNames,i=this.getValue,o=this.selectOption,a=this.setValue,s=this.props,l=s.isMulti,c=s.isRtl,u=s.options;return{clearValue:e,cx:t,getStyles:r,getClassNames:n,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:o,selectProps:s,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,r=e.isMulti;return void 0===t?r:t}},{key:"isOptionDisabled",value:function(e,t){return ca(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return ua(this.props,e,t)}},{key:"filterOption",value:function(e,t){return pa(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var r=this.props.inputValue,n=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:r,selectValue:n})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,r=e.isDisabled,n=e.isSearchable,i=e.inputId,o=e.inputValue,a=e.tabIndex,l=e.form,c=e.menuIsOpen,u=e.required,p=this.getComponents().Input,f=this.state,h=f.inputIsHidden,d=f.ariaSelection,y=this.commonProps,m=i||this.getElementId("input"),v=Ar(Ar(Ar({"aria-autocomplete":"list","aria-expanded":c,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":u,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},c&&{"aria-controls":this.getElementId("listbox")}),!n&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===d||void 0===d?void 0:d.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return n?t.createElement(p,(0,s.Z)({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:r,isHidden:h,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:a,form:l,type:"text",value:o},v)):t.createElement(jo,(0,s.Z)({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:bi,onFocus:this.onInputFocus,disabled:r,tabIndex:a,inputMode:"none",form:l,value:""},v))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,r=this.getComponents(),n=r.MultiValue,i=r.MultiValueContainer,o=r.MultiValueLabel,a=r.MultiValueRemove,l=r.SingleValue,c=r.Placeholder,u=this.commonProps,p=this.props,f=p.controlShouldRenderValue,h=p.isDisabled,d=p.isMulti,y=p.inputValue,m=p.placeholder,v=this.state,g=v.selectValue,b=v.focusedValue,_=v.isFocused;if(!this.hasValue()||!f)return y?null:t.createElement(c,(0,s.Z)({},u,{key:"placeholder",isDisabled:h,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),m);if(d)return g.map((function(r,l){var c=r===b,p="".concat(e.getOptionLabel(r),"-").concat(e.getOptionValue(r));return t.createElement(n,(0,s.Z)({},u,{components:{Container:i,Label:o,Remove:a},isFocused:c,isDisabled:h,key:p,index:l,removeProps:{onClick:function(){return e.removeValue(r)},onTouchEnd:function(){return e.removeValue(r)},onMouseDown:function(e){e.preventDefault()}},data:r}),e.formatOptionLabel(r,"value"))}));if(y)return null;var w=g[0];return t.createElement(l,(0,s.Z)({},u,{data:w,isDisabled:h}),this.formatOptionLabel(w,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,r=this.commonProps,n=this.props,i=n.isDisabled,o=n.isLoading,a=this.state.isFocused;if(!this.isClearable()||!e||i||!this.hasValue()||o)return null;var l={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,(0,s.Z)({},r,{innerProps:l,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,r=this.commonProps,n=this.props,i=n.isDisabled,o=n.isLoading,a=this.state.isFocused;return e&&o?t.createElement(e,(0,s.Z)({},r,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:a})):null}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),r=e.DropdownIndicator,n=e.IndicatorSeparator;if(!r||!n)return null;var i=this.commonProps,o=this.props.isDisabled,a=this.state.isFocused;return t.createElement(n,(0,s.Z)({},i,{isDisabled:o,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var r=this.commonProps,n=this.props.isDisabled,i=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,(0,s.Z)({},r,{innerProps:o,isDisabled:n,isFocused:i}))}},{key:"renderMenu",value:function(){var e=this,r=this.getComponents(),n=r.Group,i=r.GroupHeading,o=r.Menu,a=r.MenuList,l=r.MenuPortal,c=r.LoadingMessage,u=r.NoOptionsMessage,p=r.Option,f=this.commonProps,h=this.state.focusedOption,d=this.props,y=d.captureMenuScroll,m=d.inputValue,v=d.isLoading,g=d.loadingMessage,b=d.minMenuHeight,_=d.maxMenuHeight,w=d.menuIsOpen,x=d.menuPlacement,E=d.menuPosition,S=d.menuPortalTarget,k=d.menuShouldBlockScroll,T=d.menuShouldScrollIntoView,O=d.noOptionsMessage,A=d.onMenuScrollToTop,P=d.onMenuScrollToBottom;if(!w)return null;var C,N=function(r,n){var i=r.type,o=r.data,a=r.isDisabled,l=r.isSelected,c=r.label,u=r.value,d=h===o,y=a?void 0:function(){return e.onOptionHover(o)},m=a?void 0:function(){return e.selectOption(o)},v="".concat(e.getElementId("option"),"-").concat(n),g={id:v,onClick:m,onMouseMove:y,onMouseOver:y,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:l};return t.createElement(p,(0,s.Z)({},f,{innerProps:g,data:o,isDisabled:a,isSelected:l,key:v,label:c,type:i,value:u,isFocused:d,innerRef:d?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(r.data,"menu"))};if(this.hasOptions())C=this.getCategorizedOptions().map((function(r){if("group"===r.type){var o=r.data,a=r.options,l=r.index,c="".concat(e.getElementId("group"),"-").concat(l),u="".concat(c,"-heading");return t.createElement(n,(0,s.Z)({},f,{key:c,data:o,options:a,Heading:i,headingProps:{id:u,data:r.data},label:e.formatGroupLabel(r.data)}),r.options.map((function(e){return N(e,"".concat(l,"-").concat(e.index))})))}if("option"===r.type)return N(r,"".concat(r.index))}));else if(v){var R=g({inputValue:m});if(null===R)return null;C=t.createElement(c,f,R)}else{var j=O({inputValue:m});if(null===j)return null;C=t.createElement(u,f,j)}var M={minMenuHeight:b,maxMenuHeight:_,menuPlacement:x,menuPosition:E,menuShouldScrollIntoView:T},I=t.createElement(Hi,(0,s.Z)({},f,M),(function(r){var n=r.ref,i=r.placerProps,l=i.placement,c=i.maxHeight;return t.createElement(o,(0,s.Z)({},f,M,{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:v,placement:l}),t.createElement(qo,{captureEnabled:y,onTopArrive:A,onBottomArrive:P,lockEnabled:k},(function(r){return t.createElement(a,(0,s.Z)({},f,{innerRef:function(t){e.getMenuListRef(t),r(t)},innerProps:{role:"listbox","aria-multiselectable":f.isMulti,id:e.getElementId("listbox")},isLoading:v,maxHeight:c,focusedOption:h}),C)})))}));return S||"fixed"===E?t.createElement(l,(0,s.Z)({},f,{appendTo:S,controlElement:this.controlRef,menuPlacement:x,menuPosition:E}),I):I}},{key:"renderFormField",value:function(){var e=this,r=this.props,n=r.delimiter,i=r.isDisabled,o=r.isMulti,a=r.name,s=r.required,l=this.state.selectValue;if(s&&!this.hasValue()&&!i)return t.createElement(Yo,{name:a,onFocus:this.onValueInputFocus});if(a&&!i){if(o){if(n){var c=l.map((function(t){return e.getOptionValue(t)})).join(n);return t.createElement("input",{name:a,type:"hidden",value:c})}var u=l.length>0?l.map((function(r,n){return t.createElement("input",{key:"i-".concat(n),name:a,type:"hidden",value:e.getOptionValue(r)})})):t.createElement("input",{name:a,type:"hidden",value:""});return t.createElement("div",null,u)}var p=l[0]?this.getOptionValue(l[0]):"";return t.createElement("input",{name:a,type:"hidden",value:p})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,r=this.state,n=r.ariaSelection,i=r.focusedOption,o=r.focusedValue,a=r.isFocused,l=r.selectValue,c=this.getFocusableOptions();return t.createElement(wo,(0,s.Z)({},e,{id:this.getElementId("live-region"),ariaSelection:n,focusedOption:i,focusedValue:o,isFocused:a,selectValue:l,focusableOptions:c,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),r=e.Control,n=e.IndicatorsContainer,i=e.SelectContainer,o=e.ValueContainer,a=this.props,l=a.className,c=a.id,u=a.isDisabled,p=a.menuIsOpen,f=this.state.isFocused,h=this.commonProps=this.getCommonProps();return t.createElement(i,(0,s.Z)({},h,{className:l,innerProps:{id:c,onKeyDown:this.onKeyDown},isDisabled:u,isFocused:f}),this.renderLiveRegion(),t.createElement(r,(0,s.Z)({},h,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:u,isFocused:f,menuIsOpen:p}),t.createElement(o,(0,s.Z)({},h,{isDisabled:u}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(n,(0,s.Z)({},h,{isDisabled:u}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevProps,n=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,o=t.ariaSelection,a=t.isFocused,s=t.prevWasFocused,l=t.instancePrefix,c=e.options,u=e.value,p=e.menuIsOpen,f=e.inputValue,h=e.isMulti,d=xi(u),y={};if(r&&(u!==r.value||c!==r.options||p!==r.menuIsOpen||f!==r.inputValue)){var m=p?function(e,t){return na(ra(e,t))}(e,d):[],v=p?ia(ra(e,d),"".concat(l,"-option")):[],g=n?function(e,t){var r=e.focusedValue,n=e.selectValue.indexOf(r);if(n>-1){if(t.indexOf(r)>-1)return r;if(n<t.length)return t[n]}return null}(t,d):null,b=function(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}(t,m);y={selectValue:d,focusedOption:b,focusedOptionId:aa(v,b),focusableOptionsWithIds:v,focusedValue:g,clearFocusValueOnUpdate:!1}}var _=null!=i&&e!==r?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},w=o,x=a&&s;return a&&!x&&(w={value:Di(h,d,d[0]||null),options:d,action:"initial-input-focus"},x=!s),"initial-input-focus"===(null===o||void 0===o?void 0:o.action)&&(w=null),Ar(Ar(Ar({},y),_),{},{prevProps:e,ariaSelection:w,prevWasFocused:x})}}],n&&Mr(r.prototype,n),i&&Mr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),a}(t.Component);da.defaultProps=ea;var ya=(0,t.forwardRef)((function(e,r){var n=function(e){var r=e.defaultInputValue,n=void 0===r?"":r,i=e.defaultMenuIsOpen,o=void 0!==i&&i,a=e.defaultValue,s=void 0===a?null:a,l=e.inputValue,c=e.menuIsOpen,u=e.onChange,p=e.onInputChange,f=e.onMenuClose,h=e.onMenuOpen,d=e.value,y=Rr(e,jr),m=Nr((0,t.useState)(void 0!==l?l:n),2),v=m[0],g=m[1],b=Nr((0,t.useState)(void 0!==c?c:o),2),_=b[0],w=b[1],x=Nr((0,t.useState)(void 0!==d?d:s),2),E=x[0],S=x[1],k=(0,t.useCallback)((function(e,t){"function"===typeof u&&u(e,t),S(e)}),[u]),T=(0,t.useCallback)((function(e,t){var r;"function"===typeof p&&(r=p(e,t)),g(void 0!==r?r:e)}),[p]),O=(0,t.useCallback)((function(){"function"===typeof h&&h(),w(!0)}),[h]),A=(0,t.useCallback)((function(){"function"===typeof f&&f(),w(!1)}),[f]),P=void 0!==l?l:v,C=void 0!==c?c:_,N=void 0!==d?d:E;return Ar(Ar({},y),{},{inputValue:P,menuIsOpen:C,onChange:k,onInputChange:T,onMenuClose:A,onMenuOpen:O,value:N})}(e);return t.createElement(da,(0,s.Z)({ref:r},n))})),ma=ya;const va=e=>{let{countries:t=[],selectedCountry:r={value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"},setSelectedCountry:n=(()=>{})}=e;return(0,b.jsx)(ma,{options:t,value:r,onChange:e=>n(e)})},ga=e=>{let{selectedAddress:t={},addressList:r=[],setSelectedCountry:n,countries:i,handleChange:o=(()=>{}),handleSelect:a=(()=>{}),selectedCountry:s={value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"},showCountrySelect:l=!0}=e;return(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[l&&(0,b.jsx)("div",{style:{flexBasis:"35%"},children:(0,b.jsx)(va,{countries:i,setSelectedCountry:n,selectedCountry:s})}),(0,b.jsxs)("div",{style:l?{flexBasis:"75%"}:{flexBasis:"100%"},children:[(0,b.jsx)("div",{style:{width:"100%",borderRadius:2},children:(0,b.jsx)(Er.DebounceInput,{className:"form-control",placeholder:"search here...",minLength:5,debounceTimeout:1e3,onChange:e=>o(e.target.value),value:t.title})}),r&&r.length>0&&(0,b.jsx)("div",{style:{maxHeight:100,overflowY:"scroll",borderRadius:5,border:"1px solid lightgray"},children:r.map(((e,t)=>(0,b.jsx)("li",{className:"address-dropdown",onClick:t=>a(t.target.value,e),children:e.title},t)))})]})]})},ba=[{value:"AW",label:"\ud83c\udde6\ud83c\uddfc Aruba"},{value:"AF",label:"\ud83c\udde6\ud83c\uddeb Afghanistan"},{value:"AO",label:"\ud83c\udde6\ud83c\uddf4 Angola"},{value:"AI",label:"\ud83c\udde6\ud83c\uddee Anguilla"},{value:"AX",label:"\ud83c\udde6\ud83c\uddfd \xc5land Islands"},{value:"AL",label:"\ud83c\udde6\ud83c\uddf1 Albania"},{value:"AD",label:"\ud83c\udde6\ud83c\udde9 Andorra"},{value:"AE",label:"\ud83c\udde6\ud83c\uddea United Arab Emirates"},{value:"AR",label:"\ud83c\udde6\ud83c\uddf7 Argentina"},{value:"AM",label:"\ud83c\udde6\ud83c\uddf2 Armenia"},{value:"AS",label:"\ud83c\udde6\ud83c\uddf8 American Samoa"},{value:"AQ",label:"\ud83c\udde6\ud83c\uddf6 Antarctica"},{value:"TF",label:"\ud83c\uddf9\ud83c\uddeb French Southern and Antarctic Lands"},{value:"AG",label:"\ud83c\udde6\ud83c\uddec Antigua and Barbuda"},{value:"AU",label:"\ud83c\udde6\ud83c\uddfa Australia"},{value:"AT",label:"\ud83c\udde6\ud83c\uddf9 Austria"},{value:"AZ",label:"\ud83c\udde6\ud83c\uddff Azerbaijan"},{value:"BI",label:"\ud83c\udde7\ud83c\uddee Burundi"},{value:"BE",label:"\ud83c\udde7\ud83c\uddea Belgium"},{value:"BJ",label:"\ud83c\udde7\ud83c\uddef Benin"},{value:"BF",label:"\ud83c\udde7\ud83c\uddeb Burkina Faso"},{value:"BD",label:"\ud83c\udde7\ud83c\udde9 Bangladesh"},{value:"BG",label:"\ud83c\udde7\ud83c\uddec Bulgaria"},{value:"BH",label:"\ud83c\udde7\ud83c\udded Bahrain"},{value:"BS",label:"\ud83c\udde7\ud83c\uddf8 Bahamas"},{value:"BA",label:"\ud83c\udde7\ud83c\udde6 Bosnia and Herzegovina"},{value:"BL",label:"\ud83c\udde7\ud83c\uddf1 Saint Barth\xe9lemy"},{value:"SH",label:"\ud83c\uddf8\ud83c\udded Saint Helena, Ascension and Tristan da Cunha"},{value:"BY",label:"\ud83c\udde7\ud83c\uddfe Belarus"},{value:"BZ",label:"\ud83c\udde7\ud83c\uddff Belize"},{value:"BM",label:"\ud83c\udde7\ud83c\uddf2 Bermuda"},{value:"BO",label:"\ud83c\udde7\ud83c\uddf4 Bolivia"},{value:"BQ",label:" Caribbean Netherlands"},{value:"BR",label:"\ud83c\udde7\ud83c\uddf7 Brazil"},{value:"BB",label:"\ud83c\udde7\ud83c\udde7 Barbados"},{value:"BN",label:"\ud83c\udde7\ud83c\uddf3 Brunei"},{value:"BT",label:"\ud83c\udde7\ud83c\uddf9 Bhutan"},{value:"BV",label:"\ud83c\udde7\ud83c\uddfb Bouvet Island"},{value:"BW",label:"\ud83c\udde7\ud83c\uddfc Botswana"},{value:"CF",label:"\ud83c\udde8\ud83c\uddeb Central African Republic"},{value:"CA",label:"\ud83c\udde8\ud83c\udde6 Canada"},{value:"CC",label:"\ud83c\udde8\ud83c\udde8 Cocos (Keeling) Islands"},{value:"CH",label:"\ud83c\udde8\ud83c\udded Switzerland"},{value:"CL",label:"\ud83c\udde8\ud83c\uddf1 Chile"},{value:"CN",label:"\ud83c\udde8\ud83c\uddf3 China"},{value:"CI",label:"\ud83c\udde8\ud83c\uddee Ivory Coast"},{value:"CM",label:"\ud83c\udde8\ud83c\uddf2 Cameroon"},{value:"CD",label:"\ud83c\udde8\ud83c\udde9 DR Congo"},{value:"CG",label:"\ud83c\udde8\ud83c\uddec Republic of the Congo"},{value:"CK",label:"\ud83c\udde8\ud83c\uddf0 Cook Islands"},{value:"CO",label:"\ud83c\udde8\ud83c\uddf4 Colombia"},{value:"KM",label:"\ud83c\uddf0\ud83c\uddf2 Comoros"},{value:"CV",label:"\ud83c\udde8\ud83c\uddfb Cape Verde"},{value:"CR",label:"\ud83c\udde8\ud83c\uddf7 Costa Rica"},{value:"CU",label:"\ud83c\udde8\ud83c\uddfa Cuba"},{value:"CW",label:"\ud83c\udde8\ud83c\uddfc Cura\xe7ao"},{value:"CX",label:"\ud83c\udde8\ud83c\uddfd Christmas Island"},{value:"KY",label:"\ud83c\uddf0\ud83c\uddfe Cayman Islands"},{value:"CY",label:"\ud83c\udde8\ud83c\uddfe Cyprus"},{value:"CZ",label:"\ud83c\udde8\ud83c\uddff Czechia"},{value:"DE",label:"\ud83c\udde9\ud83c\uddea Germany"},{value:"DJ",label:"\ud83c\udde9\ud83c\uddef Djibouti"},{value:"DM",label:"\ud83c\udde9\ud83c\uddf2 Dominica"},{value:"DK",label:"\ud83c\udde9\ud83c\uddf0 Denmark"},{value:"DO",label:"\ud83c\udde9\ud83c\uddf4 Dominican Republic"},{value:"DZ",label:"\ud83c\udde9\ud83c\uddff Algeria"},{value:"EC",label:"\ud83c\uddea\ud83c\udde8 Ecuador"},{value:"EG",label:"\ud83c\uddea\ud83c\uddec Egypt"},{value:"ER",label:"\ud83c\uddea\ud83c\uddf7 Eritrea"},{value:"EH",label:"\ud83c\uddea\ud83c\udded Western Sahara"},{value:"ES",label:"\ud83c\uddea\ud83c\uddf8 Spain"},{value:"EE",label:"\ud83c\uddea\ud83c\uddea Estonia"},{value:"ET",label:"\ud83c\uddea\ud83c\uddf9 Ethiopia"},{value:"FI",label:"\ud83c\uddeb\ud83c\uddee Finland"},{value:"FJ",label:"\ud83c\uddeb\ud83c\uddef Fiji"},{value:"FK",label:"\ud83c\uddeb\ud83c\uddf0 Falkland Islands"},{value:"FR",label:"\ud83c\uddeb\ud83c\uddf7 France"},{value:"FO",label:"\ud83c\uddeb\ud83c\uddf4 Faroe Islands"},{value:"FM",label:"\ud83c\uddeb\ud83c\uddf2 Micronesia"},{value:"GA",label:"\ud83c\uddec\ud83c\udde6 Gabon"},{value:"GB",label:"\ud83c\uddec\ud83c\udde7 United Kingdom"},{value:"GE",label:"\ud83c\uddec\ud83c\uddea Georgia"},{value:"GG",label:"\ud83c\uddec\ud83c\uddec Guernsey"},{value:"GH",label:"\ud83c\uddec\ud83c\udded Ghana"},{value:"GI",label:"\ud83c\uddec\ud83c\uddee Gibraltar"},{value:"GN",label:"\ud83c\uddec\ud83c\uddf3 Guinea"},{value:"GP",label:"\ud83c\uddec\ud83c\uddf5 Guadeloupe"},{value:"GM",label:"\ud83c\uddec\ud83c\uddf2 Gambia"},{value:"GW",label:"\ud83c\uddec\ud83c\uddfc Guinea-Bissau"},{value:"GQ",label:"\ud83c\uddec\ud83c\uddf6 Equatorial Guinea"},{value:"GR",label:"\ud83c\uddec\ud83c\uddf7 Greece"},{value:"GD",label:"\ud83c\uddec\ud83c\udde9 Grenada"},{value:"GL",label:"\ud83c\uddec\ud83c\uddf1 Greenland"},{value:"GT",label:"\ud83c\uddec\ud83c\uddf9 Guatemala"},{value:"GF",label:"\ud83c\uddec\ud83c\uddeb French Guiana"},{value:"GU",label:"\ud83c\uddec\ud83c\uddfa Guam"},{value:"GY",label:"\ud83c\uddec\ud83c\uddfe Guyana"},{value:"HK",label:"\ud83c\udded\ud83c\uddf0 Hong Kong"},{value:"HM",label:"\ud83c\udded\ud83c\uddf2 Heard Island and McDonald Islands"},{value:"HN",label:"\ud83c\udded\ud83c\uddf3 Honduras"},{value:"HR",label:"\ud83c\udded\ud83c\uddf7 Croatia"},{value:"HT",label:"\ud83c\udded\ud83c\uddf9 Haiti"},{value:"HU",label:"\ud83c\udded\ud83c\uddfa Hungary"},{value:"ID",label:"\ud83c\uddee\ud83c\udde9 Indonesia"},{value:"IM",label:"\ud83c\uddee\ud83c\uddf2 Isle of Man"},{value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"},{value:"IO",label:"\ud83c\uddee\ud83c\uddf4 British Indian Ocean Territory"},{value:"IE",label:"\ud83c\uddee\ud83c\uddea Ireland"},{value:"IR",label:"\ud83c\uddee\ud83c\uddf7 Iran"},{value:"IQ",label:"\ud83c\uddee\ud83c\uddf6 Iraq"},{value:"IS",label:"\ud83c\uddee\ud83c\uddf8 Iceland"},{value:"IL",label:"\ud83c\uddee\ud83c\uddf1 Israel"},{value:"IT",label:"\ud83c\uddee\ud83c\uddf9 Italy"},{value:"JM",label:"\ud83c\uddef\ud83c\uddf2 Jamaica"},{value:"JE",label:"\ud83c\uddef\ud83c\uddea Jersey"},{value:"JO",label:"\ud83c\uddef\ud83c\uddf4 Jordan"},{value:"JP",label:"\ud83c\uddef\ud83c\uddf5 Japan"},{value:"KZ",label:"\ud83c\uddf0\ud83c\uddff Kazakhstan"},{value:"KE",label:"\ud83c\uddf0\ud83c\uddea Kenya"},{value:"KG",label:"\ud83c\uddf0\ud83c\uddec Kyrgyzstan"},{value:"KH",label:"\ud83c\uddf0\ud83c\udded Cambodia"},{value:"KI",label:"\ud83c\uddf0\ud83c\uddee Kiribati"},{value:"KN",label:"\ud83c\uddf0\ud83c\uddf3 Saint Kitts and Nevis"},{value:"KR",label:"\ud83c\uddf0\ud83c\uddf7 South Korea"},{value:"XK",label:"\ud83c\uddfd\ud83c\uddf0 Kosovo"},{value:"KW",label:"\ud83c\uddf0\ud83c\uddfc Kuwait"},{value:"LA",label:"\ud83c\uddf1\ud83c\udde6 Laos"},{value:"LB",label:"\ud83c\uddf1\ud83c\udde7 Lebanon"},{value:"LR",label:"\ud83c\uddf1\ud83c\uddf7 Liberia"},{value:"LY",label:"\ud83c\uddf1\ud83c\uddfe Libya"},{value:"LC",label:"\ud83c\uddf1\ud83c\udde8 Saint Lucia"},{value:"LI",label:"\ud83c\uddf1\ud83c\uddee Liechtenstein"},{value:"LK",label:"\ud83c\uddf1\ud83c\uddf0 Sri Lanka"},{value:"LS",label:"\ud83c\uddf1\ud83c\uddf8 Lesotho"},{value:"LT",label:"\ud83c\uddf1\ud83c\uddf9 Lithuania"},{value:"LU",label:"\ud83c\uddf1\ud83c\uddfa Luxembourg"},{value:"LV",label:"\ud83c\uddf1\ud83c\uddfb Latvia"},{value:"MO",label:"\ud83c\uddf2\ud83c\uddf4 Macau"},{value:"MF",label:"\ud83c\uddf2\ud83c\uddeb Saint Martin"},{value:"MA",label:"\ud83c\uddf2\ud83c\udde6 Morocco"},{value:"MC",label:"\ud83c\uddf2\ud83c\udde8 Monaco"},{value:"MD",label:"\ud83c\uddf2\ud83c\udde9 Moldova"},{value:"MG",label:"\ud83c\uddf2\ud83c\uddec Madagascar"},{value:"MV",label:"\ud83c\uddf2\ud83c\uddfb Maldives"},{value:"MX",label:"\ud83c\uddf2\ud83c\uddfd Mexico"},{value:"MH",label:"\ud83c\uddf2\ud83c\udded Marshall Islands"},{value:"MK",label:"\ud83c\uddf2\ud83c\uddf0 North Macedonia"},{value:"ML",label:"\ud83c\uddf2\ud83c\uddf1 Mali"},{value:"MT",label:"\ud83c\uddf2\ud83c\uddf9 Malta"},{value:"MM",label:"\ud83c\uddf2\ud83c\uddf2 Myanmar"},{value:"ME",label:"\ud83c\uddf2\ud83c\uddea Montenegro"},{value:"MN",label:"\ud83c\uddf2\ud83c\uddf3 Mongolia"},{value:"MP",label:"\ud83c\uddf2\ud83c\uddf5 Northern Mariana Islands"},{value:"MZ",label:"\ud83c\uddf2\ud83c\uddff Mozambique"},{value:"MR",label:"\ud83c\uddf2\ud83c\uddf7 Mauritania"},{value:"MS",label:"\ud83c\uddf2\ud83c\uddf8 Montserrat"},{value:"MQ",label:"\ud83c\uddf2\ud83c\uddf6 Martinique"},{value:"MU",label:"\ud83c\uddf2\ud83c\uddfa Mauritius"},{value:"MW",label:"\ud83c\uddf2\ud83c\uddfc Malawi"},{value:"MY",label:"\ud83c\uddf2\ud83c\uddfe Malaysia"},{value:"YT",label:"\ud83c\uddfe\ud83c\uddf9 Mayotte"},{value:"NA",label:"\ud83c\uddf3\ud83c\udde6 Namibia"},{value:"NC",label:"\ud83c\uddf3\ud83c\udde8 New Caledonia"},{value:"NE",label:"\ud83c\uddf3\ud83c\uddea Niger"},{value:"NF",label:"\ud83c\uddf3\ud83c\uddeb Norfolk Island"},{value:"NG",label:"\ud83c\uddf3\ud83c\uddec Nigeria"},{value:"NI",label:"\ud83c\uddf3\ud83c\uddee Nicaragua"},{value:"NU",label:"\ud83c\uddf3\ud83c\uddfa Niue"},{value:"NL",label:"\ud83c\uddf3\ud83c\uddf1 Netherlands"},{value:"NO",label:"\ud83c\uddf3\ud83c\uddf4 Norway"},{value:"NP",label:"\ud83c\uddf3\ud83c\uddf5 Nepal"},{value:"NR",label:"\ud83c\uddf3\ud83c\uddf7 Nauru"},{value:"NZ",label:"\ud83c\uddf3\ud83c\uddff New Zealand"},{value:"OM",label:"\ud83c\uddf4\ud83c\uddf2 Oman"},{value:"PK",label:"\ud83c\uddf5\ud83c\uddf0 Pakistan"},{value:"PA",label:"\ud83c\uddf5\ud83c\udde6 Panama"},{value:"PN",label:"\ud83c\uddf5\ud83c\uddf3 Pitcairn Islands"},{value:"PE",label:"\ud83c\uddf5\ud83c\uddea Peru"},{value:"PH",label:"\ud83c\uddf5\ud83c\udded Philippines"},{value:"PW",label:"\ud83c\uddf5\ud83c\uddfc Palau"},{value:"PG",label:"\ud83c\uddf5\ud83c\uddec Papua New Guinea"},{value:"PL",label:"\ud83c\uddf5\ud83c\uddf1 Poland"},{value:"PR",label:"\ud83c\uddf5\ud83c\uddf7 Puerto Rico"},{value:"KP",label:"\ud83c\uddf0\ud83c\uddf5 North Korea"},{value:"PT",label:"\ud83c\uddf5\ud83c\uddf9 Portugal"},{value:"PY",label:"\ud83c\uddf5\ud83c\uddfe Paraguay"},{value:"PS",label:"\ud83c\uddf5\ud83c\uddf8 Palestine"},{value:"PF",label:"\ud83c\uddf5\ud83c\uddeb French Polynesia"},{value:"QA",label:"\ud83c\uddf6\ud83c\udde6 Qatar"},{value:"RE",label:"\ud83c\uddf7\ud83c\uddea R\xe9union"},{value:"RO",label:"\ud83c\uddf7\ud83c\uddf4 Romania"},{value:"RU",label:"\ud83c\uddf7\ud83c\uddfa Russia"},{value:"RW",label:"\ud83c\uddf7\ud83c\uddfc Rwanda"},{value:"SA",label:"\ud83c\uddf8\ud83c\udde6 Saudi Arabia"},{value:"SD",label:"\ud83c\uddf8\ud83c\udde9 Sudan"},{value:"SN",label:"\ud83c\uddf8\ud83c\uddf3 Senegal"},{value:"SG",label:"\ud83c\uddf8\ud83c\uddec Singapore"},{value:"GS",label:"\ud83c\uddec\ud83c\uddf8 South Georgia"},{value:"SJ",label:"\ud83c\uddf8\ud83c\uddef Svalbard and Jan Mayen"},{value:"SB",label:"\ud83c\uddf8\ud83c\udde7 Solomon Islands"},{value:"SL",label:"\ud83c\uddf8\ud83c\uddf1 Sierra Leone"},{value:"SV",label:"\ud83c\uddf8\ud83c\uddfb El Salvador"},{value:"SM",label:"\ud83c\uddf8\ud83c\uddf2 San Marino"},{value:"SO",label:"\ud83c\uddf8\ud83c\uddf4 Somalia"},{value:"PM",label:"\ud83c\uddf5\ud83c\uddf2 Saint Pierre and Miquelon"},{value:"RS",label:"\ud83c\uddf7\ud83c\uddf8 Serbia"},{value:"SS",label:"\ud83c\uddf8\ud83c\uddf8 South Sudan"},{value:"ST",label:"\ud83c\uddf8\ud83c\uddf9 S\xe3o Tom\xe9 and Pr\xedncipe"},{value:"SR",label:"\ud83c\uddf8\ud83c\uddf7 Suriname"},{value:"SK",label:"\ud83c\uddf8\ud83c\uddf0 Slovakia"},{value:"SI",label:"\ud83c\uddf8\ud83c\uddee Slovenia"},{value:"SE",label:"\ud83c\uddf8\ud83c\uddea Sweden"},{value:"SZ",label:"\ud83c\uddf8\ud83c\uddff Eswatini"},{value:"SX",label:"\ud83c\uddf8\ud83c\uddfd Sint Maarten"},{value:"SC",label:"\ud83c\uddf8\ud83c\udde8 Seychelles"},{value:"SY",label:"\ud83c\uddf8\ud83c\uddfe Syria"},{value:"TC",label:"\ud83c\uddf9\ud83c\udde8 Turks and Caicos Islands"},{value:"TD",label:"\ud83c\uddf9\ud83c\udde9 Chad"},{value:"TG",label:"\ud83c\uddf9\ud83c\uddec Togo"},{value:"TH",label:"\ud83c\uddf9\ud83c\udded Thailand"},{value:"TJ",label:"\ud83c\uddf9\ud83c\uddef Tajikistan"},{value:"TK",label:"\ud83c\uddf9\ud83c\uddf0 Tokelau"},{value:"TM",label:"\ud83c\uddf9\ud83c\uddf2 Turkmenistan"},{value:"TL",label:"\ud83c\uddf9\ud83c\uddf1 Timor-Leste"},{value:"TO",label:"\ud83c\uddf9\ud83c\uddf4 Tonga"},{value:"TT",label:"\ud83c\uddf9\ud83c\uddf9 Trinidad and Tobago"},{value:"TN",label:"\ud83c\uddf9\ud83c\uddf3 Tunisia"},{value:"TR",label:"\ud83c\uddf9\ud83c\uddf7 Turkey"},{value:"TV",label:"\ud83c\uddf9\ud83c\uddfb Tuvalu"},{value:"TW",label:"\ud83c\uddf9\ud83c\uddfc Taiwan"},{value:"TZ",label:"\ud83c\uddf9\ud83c\uddff Tanzania"},{value:"UG",label:"\ud83c\uddfa\ud83c\uddec Uganda"},{value:"UA",label:"\ud83c\uddfa\ud83c\udde6 Ukraine"},{value:"UM",label:"\ud83c\uddfa\ud83c\uddf2 United States Minor Outlying Islands"},{value:"UY",label:"\ud83c\uddfa\ud83c\uddfe Uruguay"},{value:"US",label:"\ud83c\uddfa\ud83c\uddf8 United States"},{value:"UZ",label:"\ud83c\uddfa\ud83c\uddff Uzbekistan"},{value:"VA",label:"\ud83c\uddfb\ud83c\udde6 Vatican City"},{value:"VC",label:"\ud83c\uddfb\ud83c\udde8 Saint Vincent and the Grenadines"},{value:"VE",label:"\ud83c\uddfb\ud83c\uddea Venezuela"},{value:"VG",label:"\ud83c\uddfb\ud83c\uddec British Virgin Islands"},{value:"VI",label:"\ud83c\uddfb\ud83c\uddee United States Virgin Islands"},{value:"VN",label:"\ud83c\uddfb\ud83c\uddf3 Vietnam"},{value:"VU",label:"\ud83c\uddfb\ud83c\uddfa Vanuatu"},{value:"WF",label:"\ud83c\uddfc\ud83c\uddeb Wallis and Futuna"},{value:"WS",label:"\ud83c\uddfc\ud83c\uddf8 Samoa"},{value:"YE",label:"\ud83c\uddfe\ud83c\uddea Yemen"},{value:"ZA",label:"\ud83c\uddff\ud83c\udde6 South Africa"},{value:"ZM",label:"\ud83c\uddff\ud83c\uddf2 Zambia"},{value:"ZW",label:"\ud83c\uddff\ud83c\uddfc Zimbabwe"}];var _a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wa=t.createContext&&t.createContext(_a),xa=["attr","size","title"];function Ea(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sa.apply(this,arguments)}function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aa(e){return e&&e.map(((e,r)=>t.createElement(e.tag,Ta({key:r},e.attr),Aa(e.child))))}function Pa(e){return r=>t.createElement(Ca,Sa({attr:Ta({},e.attr)},r),Aa(e.child))}function Ca(e){var r=r=>{var n,{attr:i,size:o,title:a}=e,s=Ea(e,xa),l=o||r.size||"1em";return r.className&&(n=r.className),e.className&&(n=(n?n+" ":"")+e.className),t.createElement("svg",Sa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,s,{className:n,style:Ta(Ta({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&t.createElement("title",null,a),e.children)};return void 0!==wa?t.createElement(wa.Consumer,null,(e=>r(e))):r(_a)}function Na(e){return Pa({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}const Ra=()=>localStorage.getItem("userToken"),ja=()=>JSON.parse(localStorage.getItem("userData")),Ma=()=>{localStorage.removeItem("userToken"),localStorage.removeItem("userData"),localStorage.removeItem("rideRates"),delete lr.defaults.headers.post.Authorization},Ia=()=>localStorage.getItem("driverToken"),Da=()=>JSON.parse(localStorage.getItem("driverData")),La=__webpack_require__.p+"static/media/can-deliver-v2.544a40559c75f3e23023.png",Fa=e=>{const r=(0,i.useLocation)(),[n,o]=(0,t.useState)(null),a=ja(),s=(0,i.useHistory)();return(0,t.useEffect)((()=>{o(r.pathname)}),[r]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("nav",{className:"navbar navbar-light navbar-expand-md fixed-top py-3 shadow",id:"mainNav",children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("a",{className:"navbar-brand d-flex align-items-center",href:"/",children:(0,b.jsx)("img",{alt:"can-deliver-logo",src:La,height:40,width:100,className:"d-inline-block align-top"})}),(0,b.jsxs)("button",{"data-bs-toggle":"collapse",className:"navbar-toggler","data-bs-target":"#navcol-1",children:[(0,b.jsx)("span",{className:"visually-hidden",children:"Toggle navigation"}),(0,b.jsx)("span",{className:"navbar-toggler-icon"})]}),(0,b.jsxs)("div",{className:"collapse navbar-collapse",id:"navcol-1",children:[(0,b.jsxs)("ul",{className:"navbar-nav mx-auto",children:[Ra()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/user/home"===n?" active":""),to:"/user/home",children:"Home"})}),Ra()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/user/helpdesk"===n?" active":""),to:"/user/helpdesk",children:"Help Desk"})}),Ra()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/user/orders"===n?" active":""),to:"/user/orders",children:"Previous Orders"})}),Ra()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsxs)(m,{className:"nav-link "+("/user/update-profile"===n?" active":""),to:"/user/update-profile",children:[a.firstName,"  ",a.ratingCount>0?(0,b.jsxs)("span",{children:[" - ",(a.ratingSum/a.ratingCount).toPrecision(2),"  ",(0,b.jsx)(Na,{color:"#24285b"})]}):""]})})]}),Ra()&&(0,b.jsx)("a",{className:"btn btn-primary shadow",role:"button",onClick:()=>{Ma(),s.push("/user/login")},children:"Logout"})]})]})})})},Ba=e=>{const r=(0,i.useLocation)(),[n,o]=(0,t.useState)(null),[a,s]=(0,t.useState)(Da()),l=(0,i.useHistory)();return(0,t.useEffect)((()=>{o(r.pathname)}),[r]),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{children:(0,b.jsx)("nav",{className:"navbar navbar-light navbar-expand-md fixed-top py-3 shadow",id:"mainNav",children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("a",{className:"navbar-brand d-flex align-items-center",href:"/driver/home",children:(0,b.jsx)("img",{alt:"can-deliver-logo",src:La,height:40,width:100,className:"d-inline-block align-top"})}),(0,b.jsxs)("button",{"data-bs-toggle":"collapse",className:"navbar-toggler","data-bs-target":"#navcol-1",children:[(0,b.jsx)("span",{className:"visually-hidden",children:"Toggle navigation"}),(0,b.jsx)("span",{className:"navbar-toggler-icon"})]}),(0,b.jsxs)("div",{className:"collapse navbar-collapse",id:"navcol-1",children:[(0,b.jsxs)("ul",{className:"navbar-nav mx-auto",children:[Ia()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/driver/home"===n?" active":""),to:"/driver/home",children:"Driver Home"})}),Ia()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/driver/helpdesk"===n?" active":""),to:"/driver/helpdesk",children:"Help Desk"})}),Ia()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/driver/schedule-rides"===n?" active":""),to:"/driver/schedule-rides",children:"Community Ride"})}),Ia()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(m,{className:"nav-link "+("/driver/orders"===n?" active":""),to:"/driver/orders",children:"Previous Rides"})}),Ia()&&(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)("span",{className:"nav-link ",children:a.ratingCount>0?(0,b.jsxs)("span",{children:["Rating - ",(a.ratingSum/a.ratingCount).toPrecision(2),"  ",(0,b.jsx)(Na,{color:"#24285b"})]}):""})})]}),Ia()&&(0,b.jsx)("a",{className:"btn btn-primary shadow",role:"button",onClick:()=>{localStorage.removeItem("driverToken"),localStorage.removeItem("driverData"),delete lr.defaults.headers.post.Authorization,l.push("/user/login")},children:"Logout"})]})]})})})})},za=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,$a=/^\d{10}$/,Ua="0123456789bcdefghjkmnpqrstuvwxyz";class Ha{static encode(e,t,r){if("undefined"==typeof r){for(let r=1;r<=12;r++){const n=Ha.encode(e,t,r),i=Ha.decode(n);if(i.lat==e&&i.lon==t)return n}r=12}if(e=Number(e),t=Number(t),r=Number(r),isNaN(e)||isNaN(t)||isNaN(r))throw new Error("Invalid geohash");let n=0,i=0,o=!0,a="",s=-90,l=90,c=-180,u=180;for(;a.length<r;){if(o){const e=(c+u)/2;t>=e?(n=2*n+1,c=e):(n*=2,u=e)}else{const t=(s+l)/2;e>=t?(n=2*n+1,s=t):(n*=2,l=t)}o=!o,5==++i&&(a+=Ua.charAt(n),i=0,n=0)}return a}static decode(e){const t=Ha.bounds(e),r=t.sw.lat,n=t.sw.lon,i=t.ne.lat,o=t.ne.lon;let a=(r+i)/2,s=(n+o)/2;return a=a.toFixed(Math.floor(2-Math.log(i-r)/Math.LN10)),s=s.toFixed(Math.floor(2-Math.log(o-n)/Math.LN10)),{lat:Number(a),lon:Number(s)}}static bounds(e){if(0==e.length)throw new Error("Invalid geohash");e=e.toLowerCase();let t=!0,r=-90,n=90,i=-180,o=180;for(let a=0;a<e.length;a++){const s=e.charAt(a),l=Ua.indexOf(s);if(-1==l)throw new Error("Invalid geohash");for(let e=4;e>=0;e--){const a=l>>e&1;if(t){const e=(i+o)/2;1==a?i=e:o=e}else{const e=(r+n)/2;1==a?r=e:n=e}t=!t}}return{sw:{lat:r,lon:i},ne:{lat:n,lon:o}}}static adjacent(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),0==e.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(t))throw new Error("Invalid direction");const r=e.slice(-1);let n=e.slice(0,-1);const i=e.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[t][i].indexOf(r)&&""!=n&&(n=Ha.adjacent(n,t)),n+Ua.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[t][i].indexOf(r))}static neighbours(e){return{n:Ha.adjacent(e,"n"),ne:Ha.adjacent(Ha.adjacent(e,"n"),"e"),e:Ha.adjacent(e,"e"),se:Ha.adjacent(Ha.adjacent(e,"s"),"e"),s:Ha.adjacent(e,"s"),sw:Ha.adjacent(Ha.adjacent(e,"s"),"w"),w:Ha.adjacent(e,"w"),nw:Ha.adjacent(Ha.adjacent(e,"n"),"w")}}}const Va=Ha,Ga=(e,t)=>Va.encode(e,t,5),qa=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],Wa=[],Ya=(new Date).getFullYear();for(let Rv=Ya;Rv<=Ya+10;Rv++)Wa.push({value:Rv,label:Rv.toString()});const Ka=e=>{let{history:r}=e;const[n,i]=(0,t.useState)({firstName:"",lastName:"",password:"",email:"",contact:""}),[o,a]=(0,t.useState)({}),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[p,f]=(0,t.useState)([]),[h,d]=(0,t.useState)({value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"}),[y,m]=(0,t.useState)(!1),[v,g]=(0,t.useState)(""),[_,w]=(0,t.useState)(""),[x,E]=(0,t.useState)(null),[S,k]=(0,t.useState)(null),[T,O]=(0,t.useState)(""),[A,P]=(0,t.useState)(""),C=e=>{const{name:t,value:r}=e.target;i((e=>({...e,[t]:r}))),n[t]&&(o[t]="",a(o))},N=async e=>{e.preventDefault(),m(!0),console.log("Callled");let{newErrors:t,isValid:i}=((e,t)=>{let r=!0;const n={};return e.firstName.trim()||(n.firstName="Name is required",r=!1),e.lastName.trim()||(n.lastName="last name is required",r=!1),t.trim()||(n.address="address is required",r=!1),e.password.trim()||(n.password="Password is required",r=!1),e.email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(n.email="Enter a valid email address",r=!1),e.contact.trim()&&$a.test(e.contact)||(n.contact="Enter a valid 10-digit phone number",r=!1),{isValid:r,newErrors:n}})(n,s);if(console.log("newErrors",t),!i)return console.log("not valid"),M(),a(t),void m(!1);if(!M())return void m(!1);const{lat:o,lng:l}=c.position;let u={lat:o,lng:l,geoHash:Ga(o,l)};try{let e=await lr.post("".concat(dr,"/api/user/signup/"),{...n,address:c,currentLocation:u,creditCard:{cardNumber:v,cvv:_,month:x,year:S,formattedCardNumber:T}});console.log("response signup",e),201===e.status&&r.push("/user/login")}catch(p){"MongoError"===p.response.data.error.name?alert("email Id or contact no. is not unique"):alert("Something went wrong")}m(!1)},R=(0,t.useCallback)((async e=>{let t=[];var r;(l(e),e)?(o.address="",a(o),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),f((null===(r=t)||void 0===r?void 0:r.items)||[])):f([])}),[s,c,p]),j=e=>{const t=e.target.value.replace(/\D/g,""),r=e.target.value;if(r.length<=T.length)return g(r),void O(r);let n="";n=4==r.length||9==r.length||14==r.length?r+" ":r,n=n.slice(0,19),O(n),g(t),P("")},M=()=>{let e=!0;P("");const t=v.replace(/\s/g,"");if(console.log(t),16!==t.length&&(e=!1,P("Invalid credit card number. Must be 16 digits.")),3!==_.length&&(e=!1,P("Invalid CVV. Must be 3 digits.")),x&&S){const t=new Date,r=t.getMonth()+1,n=t.getFullYear();(S<n||S===n&&x<r)&&(e=!1,P("Card has expired."))}else e=!1,P("Please select both month and year for expiry date.");return e};return(0,b.jsxs)("div",{children:[(0,b.jsx)(Fa,{}),(0,b.jsx)("div",{className:"container",style:{display:"flex",backgroundColor:"rgba(0, 0, 0, 0)",padding:20,paddingTop:"8em"},children:(0,b.jsxs)(pe,{className:"shadow p-4  rounded",style:{flexBasis:"100%"},children:[(0,b.jsx)("h3",{children:"Sign Up"}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"First name"}),(0,b.jsx)("input",{type:"text",name:"firstName",onChange:C,className:"form-control",placeholder:"First name"}),o.firstName&&(0,b.jsx)("span",{className:"red-text",children:o.firstName})]}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"Last name"}),(0,b.jsx)("input",{type:"text",onChange:C,name:"lastName",className:"form-control",placeholder:"Last name"}),o.lastName&&(0,b.jsx)("span",{className:"red-text",children:o.lastName})]}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"Email address"}),(0,b.jsx)("input",{onChange:C,type:"email",name:"email",className:"form-control",placeholder:"Enter email"}),o.email&&(0,b.jsx)("span",{className:"red-text",children:o.email})]}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"Contact"}),(0,b.jsx)("input",{onChange:C,type:"number",name:"contact",className:"form-control",placeholder:"Enter contact"}),o.contact&&(0,b.jsx)("span",{className:"red-text",children:o.contact})]}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"Password"}),(0,b.jsx)("input",{onChange:C,type:"password",name:"password",className:"form-control",placeholder:"Enter password"}),o.password&&(0,b.jsx)("span",{className:"red-text",children:o.password})]}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"address"}),(0,b.jsx)(ga,{showCountrySelect:!1,address:s,selectedAddress:c,addressList:p,setSelectedCountry:d,countries:ba,handleChange:R,handleSelect:(e,t)=>{u(t),f([])},selectedCountry:h}),o.address&&(0,b.jsx)("span",{className:"red-text",children:o.address})]}),(0,b.jsx)("h5",{children:" Credit Card Details"}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{htmlFor:"cardNumber",children:"Card Number:"}),(0,b.jsx)("input",{type:"text",id:"cardNumber",value:T,className:"form-control",onChange:j,onKeyDown:j,maxLength:19,required:!0})]}),(0,b.jsx)("br",{}),(0,b.jsxs)("div",{className:"row m-1",children:[(0,b.jsxs)("div",{className:"col input-group ",children:[(0,b.jsx)("div",{class:"input-group-prepend",children:(0,b.jsx)("label",{class:"input-group-text",for:"cvc",children:"CVV::"})}),(0,b.jsx)("input",{type:"text",id:"cvc",value:_,onChange:e=>{const t=e.target.value.replace(/\D/g,"");w(t.slice(0,3)),P("")},maxLength:3,className:"form-control",required:!0})]}),(0,b.jsxs)("div",{className:"col input-group",children:[(0,b.jsx)("div",{class:"input-group-prepend",children:(0,b.jsx)("label",{class:"input-group-text",for:"inputGroupSelect01",children:"Expiry Date (MM/YY):"})}),(0,b.jsxs)("select",{id:"month",class:"custom-select",value:x,onChange:e=>{E(parseInt(e.target.value,10)),P("")},required:!0,children:[(0,b.jsx)("option",{value:"",children:"Month"}),qa.map((e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,b.jsxs)("select",{id:"year",value:S,onChange:e=>{k(parseInt(e.target.value,10)),P("")},required:!0,children:[(0,b.jsx)("option",{value:"",children:"Year"}),Wa.map((e=>(0,b.jsx)("option",{value:e.value,children:e.value},e.value)))]})]}),A&&(0,b.jsx)("p",{className:"red-text error-message",children:A})]}),(0,b.jsx)("br",{}),(0,b.jsx)("div",{className:"d-grid",children:y?(0,b.jsx)(ve,{type:"submit",variant:"primary",onClick:N,children:"Signing Up ..."}):(0,b.jsx)(ve,{type:"submit",variant:"primary",onClick:N,children:"Sign Up"})}),(0,b.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",(0,b.jsx)(cr.rU,{to:"/user/login",children:"Log In"})]})]})})]})};__webpack_require__(2176);function Xa(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Za(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Ja(e,r){return Object.keys(r).reduce((function(n,i){var o,a=n,c=a[Xa(i)],u=a[i],p=(0,l.Z)(a,[Xa(i),i].map(Za)),f=r[i],h=function(e,r,n){var i=(0,t.useRef)(void 0!==e),o=(0,t.useState)(r),a=o[0],s=o[1],l=void 0!==e,c=i.current;return i.current=l,!l&&c&&a!==r&&s(r),[l?e:a,(0,t.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}(u,c,e[f]),d=h[0],y=h[1];return(0,s.Z)({},p,((o={})[i]=d,o[f]=y,o))}),e)}function Qa(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function es(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!==r&&void 0!==r?r:null}.bind(this))}function ts(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}Qa.__suppressDeprecationWarning=!0,es.__suppressDeprecationWarning=!0,ts.__suppressDeprecationWarning=!0;const rs=function(e){const r=(0,t.useRef)(e);return(0,t.useEffect)((()=>{r.current=e}),[e]),r};function ns(e){const r=rs(e);return(0,t.useCallback)((function(){return r.current&&r.current(...arguments)}),[r])}const is=e=>t.forwardRef(((t,r)=>(0,b.jsx)("div",{...t,ref:r,className:x()(t.className,e)}))),os=is("h4");os.displayName="DivStyledAsH4";const as=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i=os,...o}=e;return n=M(n,"alert-heading"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));as.displayName="AlertHeading";const ss=as;function ls(){const e=(0,t.useRef)(!0),r=(0,t.useRef)((()=>e.current));return(0,t.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),r.current}const cs="undefined"!==typeof global&&global.navigator&&"ReactNative"===global.navigator.product,us="undefined"!==typeof document||cs?t.useLayoutEffect:t.useEffect;new WeakMap;const ps=["onKeyDown"];const fs=t.forwardRef(((e,t)=>{let{onKeyDown:r}=e,n=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,ps);const[i]=he(Object.assign({tagName:"a"},n)),o=ns((e=>{i.onKeyDown(e),null==r||r(e)}));return(a=n.href)&&"#"!==a.trim()&&"button"!==n.role?(0,b.jsx)("a",Object.assign({ref:t},n,{onKeyDown:r})):(0,b.jsx)("a",Object.assign({ref:t},n,i,{onKeyDown:o}));var a}));fs.displayName="Anchor";const hs=fs,ds=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i=hs,...o}=e;return n=M(n,"alert-link"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));ds.displayName="AlertLink";const ys=ds,ms=!1,vs=t.createContext(null);var gs="unmounted",bs="exited",_s="entering",ws="entered",xs="exiting",Es=function(e){function r(t,r){var n;n=e.call(this,t,r)||this;var i,o=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?o?(i=bs,n.appearStatus=_s):i=ws:i=t.unmountOnExit||t.mountOnEnter?gs:bs,n.state={status:i},n.nextCallback=null,n}(0,o.Z)(r,e),r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===gs?{status:bs}:null};var n=r.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==_s&&r!==ws&&(t=_s):r!==_s&&r!==ws||(t=xs)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!==typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===_s){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:yi.findDOMNode(this);r&&function(e){e.scrollTop}(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===bs&&this.setState({status:gs})},n.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[yi.findDOMNode(this),n],o=i[0],a=i[1],s=this.getTimeouts(),l=n?s.appear:s.enter;!e&&!r||ms?this.safeSetState({status:ws},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:_s},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:ws},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:yi.findDOMNode(this);t&&!ms?(this.props.onExit(n),this.safeSetState({status:xs},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:bs},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:bs},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:yi.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===gs)return null;var r=this.props,n=r.children,i=(r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef,(0,l.Z)(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(vs.Provider,{value:null},"function"===typeof n?n(e,i):t.cloneElement(t.Children.only(n),i))},r}(t.Component);function Ss(){}Es.contextType=vs,Es.propTypes={},Es.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ss,onEntering:Ss,onEntered:Ss,onExit:Ss,onExiting:Ss,onExited:Ss},Es.UNMOUNTED=gs,Es.EXITED=bs,Es.ENTERING=_s,Es.ENTERED=ws,Es.EXITING=xs;const ks=Es;function Ts(e){return e&&e.ownerDocument||document}function Os(e,t){return function(e){var t=Ts(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var As=/([A-Z])/g;var Ps=/^ms-/;function Cs(e){return function(e){return e.replace(As,"-$1").toLowerCase()}(e).replace(Ps,"-ms-")}var Ns=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const Rs=function(e,t){var r="",n="";if("string"===typeof t)return e.style.getPropertyValue(Cs(t))||Os(e).getPropertyValue(Cs(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!Ns.test(e))}(i)?r+=Cs(i)+": "+o+";":n+=i+"("+o+") ":e.style.removeProperty(Cs(i))})),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r},js=!("undefined"===typeof window||!window.document||!window.document.createElement);var Ms=!1,Is=!1;try{var Ds={get passive(){return Ms=!0},get once(){return Is=Ms=!0}};js&&(window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,!0))}catch(Nv){}const Ls=function(e,t,r,n){if(n&&"boolean"!==typeof n&&!Is){var i=n.once,o=n.capture,a=r;!Is&&i&&(a=r.__once||function e(n){this.removeEventListener(t,e,o),r.call(this,n)},r.__once=a),e.addEventListener(t,a,Ms?n:o)}e.addEventListener(t,r,n)};const Fs=function(e,t,r,n){var i=n&&"boolean"!==typeof n?n.capture:n;e.removeEventListener(t,r,i),r.__once&&e.removeEventListener(t,r.__once,i)};const Bs=function(e,t,r,n){return Ls(e,t,r,n),function(){Fs(e,t,r,n)}};function zs(e,t,r){void 0===r&&(r=5);var n=!1,i=setTimeout((function(){n||function(e,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,r,n),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+r),o=Bs(e,"transitionend",(function(){n=!0}),{once:!0});return function(){clearTimeout(i),o()}}function $s(e,t,r,n){null==r&&(r=function(e){var t=Rs(e,"transitionDuration")||"",r=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*r}(e)||0);var i=zs(e,r,n),o=Bs(e,"transitionend",t);return function(){i(),o()}}function Us(e,t){const r=Rs(e,t)||"",n=-1===r.indexOf("ms")?1e3:1;return parseFloat(r)*n}function Hs(e,t){const r=Us(e,"transitionDuration"),n=Us(e,"transitionDelay"),i=$s(e,(r=>{r.target===e&&(i(),t(r))}),r+n)}const Vs=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Gs=function(e,r){return(0,t.useMemo)((()=>function(e,t){const r=Vs(e),n=Vs(t);return e=>{r&&r(e),n&&n(e)}}(e,r)),[e,r])};const qs=t.forwardRef(((e,r)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:a,onExiting:s,onExited:l,addEndListener:c,children:u,childRef:p,...f}=e;const h=(0,t.useRef)(null),d=Gs(h,p),y=e=>{var t;d((t=e)&&"setState"in t?yi.findDOMNode(t):null!=t?t:null)},m=e=>t=>{e&&h.current&&e(h.current,t)},v=(0,t.useCallback)(m(n),[n]),g=(0,t.useCallback)(m(i),[i]),_=(0,t.useCallback)(m(o),[o]),w=(0,t.useCallback)(m(a),[a]),x=(0,t.useCallback)(m(s),[s]),E=(0,t.useCallback)(m(l),[l]),S=(0,t.useCallback)(m(c),[c]);return(0,b.jsx)(ks,{ref:r,...f,onEnter:v,onEntered:_,onEntering:g,onExit:w,onExited:E,onExiting:x,addEndListener:S,nodeRef:h,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:y}):t.cloneElement(u,{ref:y})})})),Ws=qs,Ys={[_s]:"show",[ws]:"show"},Ks=t.forwardRef(((e,r)=>{let{className:n,children:i,transitionClasses:o={},onEnter:a,...s}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},c=(0,t.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==a||a(e,t)}),[a]);return(0,b.jsx)(Ws,{ref:r,addEndListener:Hs,...l,onEnter:c,childRef:i.ref,children:(e,r)=>t.cloneElement(i,{...r,className:x()("fade",n,i.props.className,Ys[e],o[e])})})}));Ks.displayName="Fade";const Xs=Ks,Zs={"aria-label":S().string,onClick:S().func,variant:S().oneOf(["white"])},Js=t.forwardRef(((e,t)=>{let{className:r,variant:n,"aria-label":i="Close",...o}=e;return(0,b.jsx)("button",{ref:t,type:"button",className:x()("btn-close",n&&"btn-close-".concat(n),r),"aria-label":i,...o})}));Js.displayName="CloseButton",Js.propTypes=Zs;const Qs=Js,el=t.forwardRef(((e,t)=>{const{bsPrefix:r,show:n=!0,closeLabel:i="Close alert",closeVariant:o,className:a,children:s,variant:l="primary",onClose:c,dismissible:u,transition:p=Xs,...f}=Ja(e,{show:"onClose"}),h=M(r,"alert"),d=ns((e=>{c&&c(!1,e)})),y=!0===p?Xs:p,m=(0,b.jsxs)("div",{role:"alert",...y?void 0:f,ref:t,className:x()(a,h,l&&"".concat(h,"-").concat(l),u&&"".concat(h,"-dismissible")),children:[u&&(0,b.jsx)(Qs,{onClick:d,"aria-label":i,variant:o}),s]});return y?(0,b.jsx)(y,{unmountOnExit:!0,...f,ref:void 0,in:n,children:m}):n?m:null}));el.displayName="Alert";const tl=Object.assign(el,{Link:ys,Heading:ss}),rl=e=>{let{history:r}=e;const[n,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[p,f]=(0,t.useState)("user"),h=e=>{console.log("event data",e),f(e.target.value)};return console.log("selected user",p),(0,b.jsxs)("div",{children:[(0,b.jsx)(Fa,{}),(0,b.jsx)("div",{class:"",children:(0,b.jsx)("div",{class:"row justify-content-center",style:{paddingTop:"5em"},children:(0,b.jsx)("div",{class:"col-md-9 col-lg-12 col-xl-10",children:(0,b.jsx)("div",{class:"card shadow-lg o-hidden border-0 my-5",children:(0,b.jsx)("div",{class:"card-body p-0",children:(0,b.jsxs)("div",{class:"row",children:[(0,b.jsx)("div",{class:"col-lg-6 d-none d-lg-flex",children:(0,b.jsxs)("div",{class:"flex-grow-1 bg-login-image",children:[" ",(0,b.jsx)("img",{src:La,class:"d-block mx-lg-auto img-fluid logo_height",alt:"Bootstrap Themes",loading:"lazy"})]})}),(0,b.jsx)("div",{class:"col-lg-6",children:(0,b.jsx)("div",{class:"p-2",children:(0,b.jsxs)(pe,{className:"shadow p-4 bg-white rounded ",onSubmit:async e=>{e.preventDefault(),u(!0);try{if("user"===p){let e=await lr.post("".concat(dr,"/api/user/login/"),{email:n,password:o});200===e.status&&(console.log("response.data",e.data),((e,t,r)=>{localStorage.setItem("userToken",e),localStorage.setItem("userData",JSON.stringify(t)),localStorage.setItem("rideRates",r),lr.defaults.headers.post.Authorization="Bearer ".concat(e)})(e.data.token,e.data.user,JSON.stringify(e.data.rideRates)),r.push("/user/home",{userData:(null===e||void 0===e?void 0:e.data)||{}}))}else{let e=await lr.post("".concat(dr,"/api/driver/login/"),{email:n,password:o});200===e.status&&(console.log("response.data",e.data),((e,t)=>{localStorage.setItem("driverToken",e),localStorage.setItem("driverData",JSON.stringify(t)),lr.defaults.headers.post.Authorization="Bearer ".concat(e)})(e.data.token,e.data.driver),r.push("/driver/home",{driverData:(null===e||void 0===e?void 0:e.data)||{}}))}}catch(t){console.log("Error",t),l(!0)}u(!1)},children:[(0,b.jsx)("div",{class:"text-center",children:(0,b.jsx)("h4",{class:"text-dark mb-4 display-6 fw-bold mb-5",children:(0,b.jsxs)("span",{class:"underline pb-1",children:[(0,b.jsx)("strong",{children:"Login"}),(0,b.jsx)("br",{})]})})}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)(pe.Check,{inline:!0,label:"User",name:"user",type:"radio",value:"user",id:"inline-radio-user",onChange:h,checked:"user"===p}),(0,b.jsx)(pe.Check,{inline:!0,label:"Driver",name:"driver",type:"radio",value:"driver",id:"inline-radio-driver",onChange:h,checked:"driver"===p})]},"inline-radio")}),s?(0,b.jsx)(tl,{className:"mb-2",variant:"danger",onClose:()=>l(!1),dismissible:!0,children:"Incorrect username or password."}):(0,b.jsx)("div",{}),(0,b.jsxs)(pe.Group,{className:"mb-2",controlId:"username",children:[(0,b.jsx)(pe.Label,{children:"Username"}),(0,b.jsx)(pe.Control,{type:"text",value:n,className:"shadow",placeholder:"Username",onChange:e=>i(e.target.value),required:!0})]}),(0,b.jsxs)(pe.Group,{className:"mb-2",controlId:"password",children:[(0,b.jsx)(pe.Label,{children:"Password"}),(0,b.jsx)(pe.Control,{type:"password",value:o,className:"shadow",placeholder:"Password",onChange:e=>a(e.target.value),required:!0})]}),c?(0,b.jsx)(ve,{className:"w-100 shadow",variant:"primary",type:"submit",disabled:!0,children:"Logging In..."}):(0,b.jsx)(ve,{className:"w-100 shadow",variant:"primary",type:"submit",children:"Log In"}),"user"===p?(0,b.jsxs)("p",{className:"forgot-password text-right",style:{padding:5,margin:5},children:["New user ",(0,b.jsx)(m,{to:"/user/signup",children:"Sign up"})]}):(0,b.jsxs)("p",{className:"forgot-password text-right",style:{padding:5,margin:5},children:["New driver ",(0,b.jsx)(m,{to:"/driver/signup",children:"Sign up"})]}),(0,b.jsx)(m,{to:{pathname:"/forgot-password",userType:p},children:"Forgot password"})]})})})]})})})})})})]})},nl=e=>{let{history:r}=e;const[n,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1);return(0,b.jsxs)("div",{className:"sign-in__wrapper",style:{paddingTop:"5em"},children:[(0,b.jsx)("div",{className:"sign-in__backdrop"}),(0,b.jsxs)(pe,{className:"shadow p-4 bg-white rounded",onSubmit:async e=>{e.preventDefault(),console.log("this is called"),u(!0);try{let e=await lr.post("http://localhost:3001/api/driver/login/",{email:n,password:o});console.log("response",e),200===e.status&&(r.push("/home"),console.log("response",e))}catch(t){console.log("Error",t),l(!0)}u(!1)},children:[(0,b.jsx)("div",{className:"h4 mb-2 text-center",children:"Driver login"}),s?(0,b.jsx)(tl,{className:"mb-2",variant:"danger",onClose:()=>l(!1),dismissible:!0,children:"Incorrect username or password."}):(0,b.jsx)("div",{}),(0,b.jsxs)(pe.Group,{className:"mb-2",controlId:"username",children:[(0,b.jsx)(pe.Label,{children:"Username"}),(0,b.jsx)(pe.Control,{type:"text",value:n,placeholder:"Username",onChange:e=>i(e.target.value),required:!0})]}),(0,b.jsxs)(pe.Group,{className:"mb-2",controlId:"password",children:[(0,b.jsx)(pe.Label,{children:"Password"}),(0,b.jsx)(pe.Control,{type:"password",value:o,placeholder:"Password",onChange:e=>a(e.target.value),required:!0})]}),c?(0,b.jsx)(ve,{className:"w-100",variant:"primary",type:"submit",disabled:!0,children:"Logging In..."}):(0,b.jsx)(ve,{className:"w-100",variant:"primary",type:"submit",children:"Log In"})]})]})};var il=__webpack_require__(9513),ol=__webpack_require__.n(il);const al=e=>{let{handleChange:t,errors:r,setExpirationDate:n,licenceExpirationDate:i}=e;return(0,b.jsxs)("div",{style:{borderTop:"5px solid lightgray",marginTop:20,paddingTop:10},children:[(0,b.jsxs)("div",{style:{fontWeight:"bold",fontSize:"larger"},children:[" ","Licence details"," "]}),(0,b.jsxs)("div",{className:"mb-3",style:{marginTop:5,paddingTop:5},children:[(0,b.jsx)("label",{children:"Number"}),(0,b.jsx)("input",{onChange:t,type:"number",name:"licenceNumber",className:"form-control",placeholder:"Enter licence number"}),r.licenceNumber&&(0,b.jsx)("span",{className:"red-text",children:r.licenceNumber})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"Expiration Date"}),(0,b.jsx)("div",{children:(0,b.jsx)(ol(),{className:"form-control w-100",wrapperClassName:"w-100",selected:i,onChange:e=>n(e)})}),r.licenceExpirationDate&&(0,b.jsx)("span",{className:"red-text",children:r.licenceExpirationDate})]})]})},sl=e=>{let{handleSelect:r,handleChange:n,setVehicleType:i,errors:o}=e;const[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)("");return(0,b.jsxs)("div",{style:{borderTop:"5px solid lightgray",marginTop:20,paddingTop:10},children:[(0,b.jsx)("div",{style:{fontWeight:"bold",fontSize:"larger"},children:"Vehicle details"}),(0,b.jsxs)("div",{style:{marginTop:5,paddingTop:5},children:[(0,b.jsx)("label",{children:"Vehicle type"}),(0,b.jsxs)(pe.Select,{onChange:e=>{r(e,i)},children:[(0,b.jsx)("option",{name:"delivery_car",value:"delivery_car",children:"Delivery car"}),(0,b.jsx)("option",{name:"delivery_truck",value:"delivery_truck",children:"Delivery truck"}),(0,b.jsx)("option",{name:"bicycle",value:"bicycle",children:"Moped"})]})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"Registration Number"}),(0,b.jsx)("input",{onChange:e=>{const t=e.target.value.replace(/\D/g,""),r=e.target.value;console.log("number",l,r);let i="";if(r.length<=l.length)return s(r),c(r),void n({target:{name:"vehicleRegistrationNumber",value:r}});console.log("number1",l,",",r),i=3==r.length?r+" ":r,i=i.slice(0,7),s(t),c(i),n({target:{name:"vehicleRegistrationNumber",value:i}})},type:"text",maxLength:7,value:l,name:"vehicleRegistrationNumber",className:"form-control",placeholder:"Enter registration number - XXX XXX"}),o.vehicleRegistrationNumber&&(0,b.jsx)("span",{className:"red-text",children:o.vehicleRegistrationNumber})]})]})},ll=e=>{let{history:r}=e;const[n,i]=(0,t.useState)({firstName:"",lastName:"",password:"",email:"",contact:"",vehicleRegistrationNumber:"",licenceNumber:"",institutionNumber:"",transitNumber:"",accountNumber:""}),[o,a]=(0,t.useState)({}),[s,l]=(0,t.useState)("self"),[c,u]=(0,t.useState)(new Date),[p,f]=(0,t.useState)("delivery_car");console.log("vehicle details",p);const[h,d]=(0,t.useState)(""),[y,m]=(0,t.useState)(""),[v,g]=(0,t.useState)([]),[_,w]=(0,t.useState)({value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"}),x=(e,t)=>{t(e.target.value)},E=e=>{const{name:t,value:r}=e.target;i((e=>({...e,[t]:r}))),console.log(n),n[t]&&(o[t]="",a(o))},S=(0,t.useCallback)((async e=>{let t=[];var r;(d(e),e)?(o[h]="",a(o),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),g((null===(r=t)||void 0===r?void 0:r.items)||[])):g([])}),[h,y,v]);return(0,b.jsxs)("div",{children:[(0,b.jsx)(Fa,{}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0)",padding:20,paddingTop:"5em"},className:"container",children:(0,b.jsxs)(pe,{className:"shadow p-4 bg-white rounded",style:{flexBasis:"100%"},children:[(0,b.jsx)("h3",{children:"Driver Sign Up"}),(0,b.jsxs)("div",{style:{fontWeight:"bold",fontSize:"larger",borderTop:"5px solid lightgray",marginTop:20,paddingTop:10},children:[" ","Personal details"," "]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"First name"}),(0,b.jsx)("input",{type:"text",name:"firstName",onChange:E,className:"form-control",placeholder:"First name"}),o.firstName&&(0,b.jsx)("span",{className:"red-text",children:o.firstName})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"Last name"}),(0,b.jsx)("input",{type:"text",onChange:E,name:"lastName",className:"form-control",placeholder:"Last name"}),o.lastName&&(0,b.jsx)("span",{className:"red-text",children:o.lastName})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"Email address"}),(0,b.jsx)("input",{onChange:E,type:"email",name:"email",className:"form-control",placeholder:"Enter email"}),o.email&&(0,b.jsx)("span",{className:"red-text",children:o.email})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"phone Number"}),(0,b.jsx)("input",{onChange:E,type:"number",name:"contact",className:"form-control",placeholder:"Enter contact"}),o.contact&&(0,b.jsx)("span",{className:"red-text",children:o.contact})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("label",{children:"Password"}),(0,b.jsx)("input",{onChange:E,type:"password",name:"password",className:"form-control",placeholder:"Enter password"}),o.password&&(0,b.jsx)("span",{className:"red-text",children:o.password})]}),(0,b.jsxs)("div",{className:"m-2",children:[(0,b.jsx)("label",{children:"address"}),(0,b.jsx)(ga,{showCountrySelect:!1,address:h,selectedAddress:y,addressList:v,setSelectedCountry:w,countries:ba,handleChange:S,handleSelect:(e,t)=>{m(t),g([])},selectedCountry:_}),o.address&&(0,b.jsx)("span",{className:"red-text",children:o.address})]}),(0,b.jsx)("div",{className:"m-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Delivery type"}),(0,b.jsxs)(pe.Select,{onChange:e=>{x(e,l)},children:[(0,b.jsx)("option",{name:"self",value:"self",children:"Self"}),(0,b.jsx)("option",{name:"car",value:"car",children:"Vehicle"})]})]})}),"car"===s&&(0,b.jsxs)("div",{className:"m-2",style:{marginTop:10},children:[(0,b.jsx)(sl,{handleSelect:x,handleChange:E,setVehicleType:f,errors:o}),(0,b.jsx)(al,{handleChange:E,errors:o,setExpirationDate:u,licenceExpirationDate:c})]}),(0,b.jsx)("h5",{children:" Bank Details"}),(0,b.jsxs)("div",{className:" m-3",children:[(0,b.jsx)("label",{for:"cardNumber",children:"Institution Number:"}),(0,b.jsx)("input",{type:"text",pattern:"\\d*",name:"institutionNumber",id:"cardNumber",className:"form-control",minLength:3,maxLength:3,onChange:E,required:!0}),o.lastName&&(0,b.jsx)("span",{className:"red-text",children:o.institutionNumber})]}),(0,b.jsxs)("div",{className:"m-3",children:[(0,b.jsx)("label",{for:"cvc",children:"Transit Number:"}),(0,b.jsx)("input",{type:"text",pattern:"\\d*",id:"cvc",name:"transitNumber",minLength:5,maxLength:5,onChange:E,className:"form-control",required:!0}),o.lastName&&(0,b.jsx)("span",{className:"red-text",children:o.transitNumber})]}),(0,b.jsxs)("div",{className:"m-3",children:[(0,b.jsx)("label",{for:"cvc",children:"Account Number:"}),(0,b.jsx)("input",{type:"text",pattern:"\\d*",id:"cvc",name:"accountNumber",minLength:7,maxLength:7,onChange:E,className:"form-control",required:!0}),o.lastName&&(0,b.jsx)("span",{className:"red-text",children:o.accountNumber})]}),(0,b.jsx)("div",{className:"d-grid",children:(0,b.jsx)(ve,{type:"submit",variant:"primary",onClick:async e=>{e.preventDefault();let{newErrors:t,isValid:i}=((e,t)=>{let r=!0;const n={};return e.firstName.trim()||(n.firstName="Name is required",r=!1),e.lastName.trim()||(n.lastName="last name is required",r=!1),e.password.trim()||(n.password="Password is required",r=!1),e.email.trim()&&za.test(e.email)||(n.email="Enter a valid email address",r=!1),e.contact.trim()&&$a.test(e.contact)||(n.contact="Enter a valid 10-digit phone number",r=!1),3!=e.institutionNumber.length&&(n.institutionNumber="Institution number is invalid",r=!1),5!=e.transitNumber.length&&(n.transitNumber="Transit number is invalid",r=!1),7!=e.accountNumber.length&&(n.accountNumber="Account number is invalid",r=!1),t.trim()||(n.address="address is required",r=!1),6!=e.vehicleRegistrationNumber.replace(/\s/g,"").length?(n.vehicleRegistrationNumber="Registration number is incorrect",r=!1):n.vehicleRegistrationNumber="",{newErrors:n,isValid:r}})(n,h);if(!i)return void a(t);const{lat:o,lng:s}=y.position;try{let e={number:n.licenceNumber,expirationDate:n.licenceNumber?c:""};console.log("vehicle details",p,n.vehicleRegistrationNumber);let t={type:p,registrationNumber:p?n.vehicleRegistrationNumber:""},i={lat:o,lng:s,geoHash:Ga(o,s)};201===(await lr.post("".concat(dr,"/api/driver/signup/"),{...n,license:e,vehicle:t,address:h,currentLocation:i,bankDetails:{institutionNumber:n.institutionNumber,transitNumber:n.transitNumber,accountNumber:n.accountNumber}})).status&&r.push("/user/login")}catch(l){return void alert("Something went wrong",l)}},children:"Sign Up"})}),(0,b.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",(0,b.jsx)("a",{href:"/user/login",children:"LogIn?"})]})]})})]})};var cl;function ul(e){if((!cl&&0!==cl||e)&&js){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),cl=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return cl}function pl(e){const r=function(e){const r=(0,t.useRef)(e);return r.current=e,r}(e);(0,t.useEffect)((()=>()=>r.current()),[])}function fl(e){void 0===e&&(e=Ts());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Nv){return e.body}}function hl(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}const dl="data-rr-ui-";function yl(e){return"".concat(dl).concat(e)}const ml=yl("modal-open");const vl=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",n=this.getElement();e.style={overflow:n.style.overflow,[r]:n.style[r]},e.scrollBarWidth&&(t[r]="".concat(parseInt(Rs(n,r)||"0",10)+e.scrollBarWidth,"px")),n.setAttribute(ml,""),Rs(n,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(ml),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},gl=(0,t.createContext)(js?window:void 0);gl.Provider;function bl(){return(0,t.useContext)(gl)}const _l=(e,t)=>js?null==e?(t||Ts()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const wl=function(e){let{children:r,in:n,onExited:i,mountOnEnter:o,unmountOnExit:a}=e;const s=(0,t.useRef)(null),l=(0,t.useRef)(n),c=ns(i);(0,t.useEffect)((()=>{n?l.current=!0:c(s.current)}),[n,c]);const u=Gs(s,r.ref),p=(0,t.cloneElement)(r,{ref:u});return n?p:a||!l.current&&o?null:p};function xl(e){let{children:r,in:n,onExited:i,onEntered:o,transition:a}=e;const[s,l]=(0,t.useState)(!n);n&&s&&l(!1);const c=function(e){let{in:r,onTransition:n}=e;const i=(0,t.useRef)(null),o=(0,t.useRef)(!0),a=ns(n);return us((()=>{if(!i.current)return;let e=!1;return a({in:r,element:i.current,initial:o.current,isStale:()=>e}),()=>{e=!0}}),[r,a]),us((()=>(o.current=!1,()=>{o.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(a(e)).then((()=>{e.isStale()||(e.in?null==o||o(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=Gs(c,r.ref);return s&&!n?null:(0,t.cloneElement)(r,{ref:u})}function El(e,t,r){return e?(0,b.jsx)(e,Object.assign({},r)):t?(0,b.jsx)(xl,Object.assign({},r,{transition:t})):(0,b.jsx)(wl,Object.assign({},r))}const Sl=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let kl;function Tl(e){const r=bl(),n=e||function(e){return kl||(kl=new vl({ownerDocument:null==e?void 0:e.document})),kl}(r),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,t.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((e=>{i.current.backdrop=e}),[])})}const Ol=(0,t.forwardRef)(((e,r)=>{let{show:n=!1,role:i="dialog",className:o,style:a,children:s,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:p,transition:f,runTransition:h,backdropTransition:d,runBackdropTransition:y,autoFocus:m=!0,enforceFocus:v=!0,restoreFocus:g=!0,restoreFocusOptions:_,renderDialog:w,renderBackdrop:x=(e=>(0,b.jsx)("div",Object.assign({},e))),manager:E,container:S,onShow:k,onHide:T=(()=>{}),onExit:O,onExited:A,onExiting:P,onEnter:C,onEntering:N,onEntered:R}=e,j=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,Sl);const M=bl(),I=function(e,r){const n=bl(),[i,o]=(0,t.useState)((()=>_l(e,null==n?void 0:n.document)));if(!i){const t=_l(e);t&&o(t)}return(0,t.useEffect)((()=>{r&&i&&r(i)}),[r,i]),(0,t.useEffect)((()=>{const t=_l(e);t!==i&&o(t)}),[e,i]),i}(S),D=Tl(E),L=ls(),F=function(e){const r=(0,t.useRef)(null);return(0,t.useEffect)((()=>{r.current=e})),r.current}(n),[B,z]=(0,t.useState)(!n),$=(0,t.useRef)(null);(0,t.useImperativeHandle)(r,(()=>D),[D]),js&&!F&&n&&($.current=fl(null==M?void 0:M.document)),n&&B&&z(!1);const U=ns((()=>{if(D.add(),Y.current=Bs(document,"keydown",q),W.current=Bs(document,"focus",(()=>setTimeout(V)),!0),k&&k(),m){var e,t;const r=fl(null!=(e=null==(t=D.dialog)?void 0:t.ownerDocument)?e:null==M?void 0:M.document);D.dialog&&r&&!hl(D.dialog,r)&&($.current=r,D.dialog.focus())}})),H=ns((()=>{var e;(D.remove(),null==Y.current||Y.current(),null==W.current||W.current(),g)&&(null==(e=$.current)||null==e.focus||e.focus(_),$.current=null)}));(0,t.useEffect)((()=>{n&&I&&U()}),[n,I,U]),(0,t.useEffect)((()=>{B&&H()}),[B,H]),pl((()=>{H()}));const V=ns((()=>{if(!v||!L()||!D.isTopModal())return;const e=fl(null==M?void 0:M.document);D.dialog&&e&&!hl(D.dialog,e)&&D.dialog.focus()})),G=ns((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&T())})),q=ns((e=>{c&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&D.isTopModal()&&(null==p||p(e),e.defaultPrevented||T())})),W=(0,t.useRef)(),Y=(0,t.useRef)();if(!I)return null;const K=Object.assign({role:i,ref:D.setDialogRef,"aria-modal":"dialog"===i||void 0},j,{style:a,className:o,tabIndex:-1});let X=w?w(K):(0,b.jsx)("div",Object.assign({},K,{children:t.cloneElement(s,{role:"document"})}));X=El(f,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:O,onExiting:P,onExited:function(){z(!0),null==A||A(...arguments)},onEnter:C,onEntering:N,onEntered:R,children:X});let Z=null;return l&&(Z=x({ref:D.setBackdropRef,onClick:G}),Z=El(d,y,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Z})),(0,b.jsx)(b.Fragment,{children:yi.createPortal((0,b.jsxs)(b.Fragment,{children:[Z,X]}),I)})}));Ol.displayName="Modal";const Al=Object.assign(Ol,{Manager:vl});var Pl=Function.prototype.bind.call(Function.prototype.call,[].slice);function Cl(e,t){return Pl(e.querySelectorAll(t))}function Nl(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Rl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",jl=".sticky-top",Ml=".navbar-toggler";class Il extends vl{adjustAndStore(e,t,r){const n=t.style[e];t.dataset[e]=n,Rs(t,{[e]:"".concat(parseFloat(Rs(t,e))+r,"px")})}restore(e,t){const r=t.dataset[e];void 0!==r&&(delete t.dataset[e],Rs(t,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var r,n;if(n="modal-open",(r=t).classList?r.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"===typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Cl(t,Rl).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),Cl(t,jl).forEach((t=>this.adjustAndStore(o,t,-e.scrollBarWidth))),Cl(t,Ml).forEach((t=>this.adjustAndStore(o,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var r,n;n="modal-open",(r=t).classList?r.classList.remove(n):"string"===typeof r.className?r.className=Nl(r.className,n):r.setAttribute("class",Nl(r.className&&r.className.baseVal||"",n));const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Cl(t,Rl).forEach((e=>this.restore(i,e))),Cl(t,jl).forEach((e=>this.restore(o,e))),Cl(t,Ml).forEach((e=>this.restore(o,e)))}}let Dl;const Ll=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"modal-body"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Ll.displayName="ModalBody";const Fl=Ll,Bl=t.createContext({onHide(){}}),zl=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,contentClassName:i,centered:o,size:a,fullscreen:s,children:l,scrollable:c,...u}=e;r=M(r,"modal");const p="".concat(r,"-dialog"),f="string"===typeof s?"".concat(r,"-fullscreen-").concat(s):"".concat(r,"-fullscreen");return(0,b.jsx)("div",{...u,ref:t,className:x()(p,n,a&&"".concat(r,"-").concat(a),o&&"".concat(p,"-centered"),c&&"".concat(p,"-scrollable"),s&&f),children:(0,b.jsx)("div",{className:x()("".concat(r,"-content"),i),children:l})})}));zl.displayName="ModalDialog";const $l=zl,Ul=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"modal-footer"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Ul.displayName="ModalFooter";const Hl=Ul,Vl=t.forwardRef(((e,r)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:o=!1,onHide:a,children:s,...l}=e;const c=(0,t.useContext)(Bl),u=ns((()=>{null==c||c.onHide(),null==a||a()}));return(0,b.jsxs)("div",{ref:r,...l,children:[s,o&&(0,b.jsx)(Qs,{"aria-label":n,variant:i,onClick:u})]})})),Gl=Vl,ql=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,closeLabel:i="Close",closeButton:o=!1,...a}=e;return r=M(r,"modal-header"),(0,b.jsx)(Gl,{ref:t,...a,className:x()(n,r),closeLabel:i,closeButton:o})}));ql.displayName="ModalHeader";const Wl=ql,Yl=is("h4"),Kl=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i=Yl,...o}=e;return n=M(n,"modal-title"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Kl.displayName="ModalTitle";const Xl=Kl;function Zl(e){return(0,b.jsx)(Xs,{...e,timeout:null})}function Jl(e){return(0,b.jsx)(Xs,{...e,timeout:null})}const Ql=t.forwardRef(((e,r)=>{let{bsPrefix:n,className:i,style:o,dialogClassName:a,contentClassName:s,children:l,dialogAs:c=$l,"data-bs-theme":u,"aria-labelledby":p,"aria-describedby":f,"aria-label":h,show:d=!1,animation:y=!0,backdrop:m=!0,keyboard:v=!0,onEscapeKeyDown:g,onShow:_,onHide:w,container:E,autoFocus:S=!0,enforceFocus:k=!0,restoreFocus:T=!0,restoreFocusOptions:O,onEntered:A,onExit:P,onExiting:C,onEnter:R,onEntering:j,onExited:I,backdropClassName:D,manager:L,...F}=e;const[B,z]=(0,t.useState)({}),[$,U]=(0,t.useState)(!1),H=(0,t.useRef)(!1),V=(0,t.useRef)(!1),G=(0,t.useRef)(null),[q,W]=(0,t.useState)(null),Y=Gs(r,W),K=ns(w),X=function(){const{dir:e}=(0,t.useContext)(N);return"rtl"===e}();n=M(n,"modal");const Z=(0,t.useMemo)((()=>({onHide:K})),[K]);function J(){return L||function(e){return Dl||(Dl=new Il(e)),Dl}({isRTL:X})}function Q(e){if(!js)return;const t=J().getScrollbarWidth()>0,r=e.scrollHeight>Ts(e).documentElement.clientHeight;z({paddingRight:t&&!r?ul():void 0,paddingLeft:!t&&r?ul():void 0})}const ee=ns((()=>{q&&Q(q.dialog)}));pl((()=>{Fs(window,"resize",ee),null==G.current||G.current()}));const te=()=>{H.current=!0},re=e=>{H.current&&q&&e.target===q.dialog&&(V.current=!0),H.current=!1},ne=()=>{U(!0),G.current=$s(q.dialog,(()=>{U(!1)}))},ie=e=>{"static"!==m?V.current||e.target!==e.currentTarget?V.current=!1:null==w||w():(e=>{e.target===e.currentTarget&&ne()})(e)},oe=(0,t.useCallback)((e=>(0,b.jsx)("div",{...e,className:x()("".concat(n,"-backdrop"),D,!y&&"show")})),[y,D,n]),ae={...o,...B};ae.display="block";return(0,b.jsx)(Bl.Provider,{value:Z,children:(0,b.jsx)(Al,{show:d,ref:Y,backdrop:m,container:E,keyboard:!0,autoFocus:S,enforceFocus:k,restoreFocus:T,restoreFocusOptions:O,onEscapeKeyDown:e=>{v?null==g||g(e):(e.preventDefault(),"static"===m&&ne())},onShow:_,onHide:w,onEnter:(e,t)=>{e&&Q(e),null==R||R(e,t)},onEntering:(e,t)=>{null==j||j(e,t),Ls(window,"resize",ee)},onEntered:A,onExit:e=>{null==G.current||G.current(),null==P||P(e)},onExiting:C,onExited:e=>{e&&(e.style.display=""),null==I||I(e),Fs(window,"resize",ee)},manager:J(),transition:y?Zl:void 0,backdropTransition:y?Jl:void 0,renderBackdrop:oe,renderDialog:e=>(0,b.jsx)("div",{role:"dialog",...e,style:ae,className:x()(i,n,$&&"".concat(n,"-static"),!y&&"show"),onClick:m?ie:void 0,onMouseUp:re,"data-bs-theme":u,"aria-label":h,"aria-labelledby":p,"aria-describedby":f,children:(0,b.jsx)(c,{...F,onMouseDown:te,className:a,contentClassName:s,children:l})})})})}));Ql.displayName="Modal";const ec=Object.assign(Ql,{Body:Fl,Header:Wl,Title:Xl,Footer:Hl,Dialog:$l,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var tc=function(){return tc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tc.apply(this,arguments)};Object.create;function rc(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;var nc=__webpack_require__(9613),ic=__webpack_require__.n(nc),oc="-ms-",ac="-moz-",sc="-webkit-",lc="comm",cc="rule",uc="decl",pc="@import",fc="@keyframes",hc="@layer",dc=Math.abs,yc=String.fromCharCode,mc=Object.assign;function vc(e){return e.trim()}function gc(e,t){return(e=t.exec(e))?e[0]:e}function bc(e,t,r){return e.replace(t,r)}function _c(e,t,r){return e.indexOf(t,r)}function wc(e,t){return 0|e.charCodeAt(t)}function xc(e,t,r){return e.slice(t,r)}function Ec(e){return e.length}function Sc(e){return e.length}function kc(e,t){return t.push(e),e}function Tc(e,t){return e.filter((function(e){return!gc(e,t)}))}var Oc=1,Ac=1,Pc=0,Cc=0,Nc=0,Rc="";function jc(e,t,r,n,i,o,a,s){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:Oc,column:Ac,length:a,return:"",siblings:s}}function Mc(e,t){return mc(jc("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Ic(e){for(;e.root;)e=Mc(e.root,{children:[e]});kc(e,e.siblings)}function Dc(){return Nc=Cc<Pc?wc(Rc,Cc++):0,Ac++,10===Nc&&(Ac=1,Oc++),Nc}function Lc(){return wc(Rc,Cc)}function Fc(){return Cc}function Bc(e,t){return xc(Rc,e,t)}function zc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $c(e){return Oc=Ac=1,Pc=Ec(Rc=e),Cc=0,[]}function Uc(e){return Rc="",e}function Hc(e){return vc(Bc(Cc-1,qc(91===e?e+2:40===e?e+1:e)))}function Vc(e){for(;(Nc=Lc())&&Nc<33;)Dc();return zc(e)>2||zc(Nc)>3?"":" "}function Gc(e,t){for(;--t&&Dc()&&!(Nc<48||Nc>102||Nc>57&&Nc<65||Nc>70&&Nc<97););return Bc(e,Fc()+(t<6&&32==Lc()&&32==Dc()))}function qc(e){for(;Dc();)switch(Nc){case e:return Cc;case 34:case 39:34!==e&&39!==e&&qc(Nc);break;case 40:41===e&&qc(e);break;case 92:Dc()}return Cc}function Wc(e,t){for(;Dc()&&e+Nc!==57&&(e+Nc!==84||47!==Lc()););return"/*"+Bc(t,Cc-1)+"*"+yc(47===e?e:Dc())}function Yc(e){for(;!zc(Lc());)Dc();return Bc(e,Cc)}function Kc(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function Xc(e,t,r,n){switch(e.type){case hc:if(e.children.length)break;case pc:case uc:return e.return=e.return||e.value;case lc:return"";case fc:return e.return=e.value+"{"+Kc(e.children,n)+"}";case cc:if(!Ec(e.value=e.props.join(",")))return""}return Ec(r=Kc(e.children,n))?e.return=e.value+"{"+r+"}":""}function Zc(e,t,r){switch(function(e,t){return 45^wc(e,0)?(((t<<2^wc(e,0))<<2^wc(e,1))<<2^wc(e,2))<<2^wc(e,3):0}(e,t)){case 5103:return sc+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return sc+e+e;case 4789:return ac+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return sc+e+ac+e+oc+e+e;case 5936:switch(wc(e,t+11)){case 114:return sc+e+oc+bc(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return sc+e+oc+bc(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return sc+e+oc+bc(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return sc+e+oc+e+e;case 6165:return sc+e+oc+"flex-"+e+e;case 5187:return sc+e+bc(e,/(\w+).+(:[^]+)/,sc+"box-$1$2"+oc+"flex-$1$2")+e;case 5443:return sc+e+oc+"flex-item-"+bc(e,/flex-|-self/g,"")+(gc(e,/flex-|baseline/)?"":oc+"grid-row-"+bc(e,/flex-|-self/g,""))+e;case 4675:return sc+e+oc+"flex-line-pack"+bc(e,/align-content|flex-|-self/g,"")+e;case 5548:return sc+e+oc+bc(e,"shrink","negative")+e;case 5292:return sc+e+oc+bc(e,"basis","preferred-size")+e;case 6060:return sc+"box-"+bc(e,"-grow","")+sc+e+oc+bc(e,"grow","positive")+e;case 4554:return sc+bc(e,/([^-])(transform)/g,"$1"+sc+"$2")+e;case 6187:return bc(bc(bc(e,/(zoom-|grab)/,sc+"$1"),/(image-set)/,sc+"$1"),e,"")+e;case 5495:case 3959:return bc(e,/(image-set\([^]*)/,sc+"$1$`$1");case 4968:return bc(bc(e,/(.+:)(flex-)?(.*)/,sc+"box-pack:$3"+oc+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+sc+e+e;case 4200:if(!gc(e,/flex-|baseline/))return oc+"grid-column-align"+xc(e,t)+e;break;case 2592:case 3360:return oc+bc(e,"template-","")+e;case 4384:case 3616:return r&&r.some((function(e,r){return t=r,gc(e.props,/grid-\w+-end/)}))?~_c(e+(r=r[t].value),"span",0)?e:oc+bc(e,"-start","")+e+oc+"grid-row-span:"+(~_c(r,"span",0)?gc(r,/\d+/):+gc(r,/\d+/)-+gc(e,/\d+/))+";":oc+bc(e,"-start","")+e;case 4896:case 4128:return r&&r.some((function(e){return gc(e.props,/grid-\w+-start/)}))?e:oc+bc(bc(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return bc(e,/(.+)-inline(.+)/,sc+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ec(e)-1-t>6)switch(wc(e,t+1)){case 109:if(45!==wc(e,t+4))break;case 102:return bc(e,/(.+:)(.+)-([^]+)/,"$1"+sc+"$2-$3$1"+ac+(108==wc(e,t+3)?"$3":"$2-$3"))+e;case 115:return~_c(e,"stretch",0)?Zc(bc(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return bc(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,r,n,i,o,a,s){return oc+r+":"+n+s+(i?oc+r+"-span:"+(o?a:+a-+n)+s:"")+e}));case 4949:if(121===wc(e,t+6))return bc(e,":",":"+sc)+e;break;case 6444:switch(wc(e,45===wc(e,14)?18:11)){case 120:return bc(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+sc+(45===wc(e,14)?"inline-":"")+"box$3$1"+sc+"$2$3$1"+oc+"$2box$3")+e;case 100:return bc(e,":",":"+oc)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return bc(e,"scroll-","scroll-snap-")+e}return e}function Jc(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case uc:return void(e.return=Zc(e.value,e.length,r));case fc:return Kc([Mc(e,{value:bc(e.value,"@","@"+sc)})],n);case cc:if(e.length)return function(e,t){return e.map(t).join("")}(r=e.props,(function(t){switch(gc(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ic(Mc(e,{props:[bc(t,/:(read-\w+)/,":"+ac+"$1")]})),Ic(Mc(e,{props:[t]})),mc(e,{props:Tc(r,n)});break;case"::placeholder":Ic(Mc(e,{props:[bc(t,/:(plac\w+)/,":"+sc+"input-$1")]})),Ic(Mc(e,{props:[bc(t,/:(plac\w+)/,":"+ac+"$1")]})),Ic(Mc(e,{props:[bc(t,/:(plac\w+)/,oc+"input-$1")]})),Ic(Mc(e,{props:[t]})),mc(e,{props:Tc(r,n)})}return""}))}}function Qc(e){return Uc(eu("",null,null,null,[""],e=$c(e),0,[0],e))}function eu(e,t,r,n,i,o,a,s,l){for(var c=0,u=0,p=a,f=0,h=0,d=0,y=1,m=1,v=1,g=0,b="",_=i,w=o,x=n,E=b;m;)switch(d=g,g=Dc()){case 40:if(108!=d&&58==wc(E,p-1)){-1!=_c(E+=bc(Hc(g),"&","&\f"),"&\f",dc(c?s[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:E+=Hc(g);break;case 9:case 10:case 13:case 32:E+=Vc(d);break;case 92:E+=Gc(Fc()-1,7);continue;case 47:switch(Lc()){case 42:case 47:kc(ru(Wc(Dc(),Fc()),t,r,l),l);break;default:E+="/"}break;case 123*y:s[c++]=Ec(E)*v;case 125*y:case 59:case 0:switch(g){case 0:case 125:m=0;case 59+u:-1==v&&(E=bc(E,/\f/g,"")),h>0&&Ec(E)-p&&kc(h>32?nu(E+";",n,r,p-1,l):nu(bc(E," ","")+";",n,r,p-2,l),l);break;case 59:E+=";";default:if(kc(x=tu(E,t,r,c,u,i,s,b,_=[],w=[],p,o),o),123===g)if(0===u)eu(E,t,x,x,_,o,p,s,w);else switch(99===f&&110===wc(E,3)?100:f){case 100:case 108:case 109:case 115:eu(e,x,x,n&&kc(tu(e,x,x,0,0,i,s,b,i,_=[],p,w),w),i,w,p,s,n?_:w);break;default:eu(E,x,x,x,[""],w,0,s,w)}}c=u=h=0,y=v=1,b=E="",p=a;break;case 58:p=1+Ec(E),h=d;default:if(y<1)if(123==g)--y;else if(125==g&&0==y++&&125==(Nc=Cc>0?wc(Rc,--Cc):0,Ac--,10===Nc&&(Ac=1,Oc--),Nc))continue;switch(E+=yc(g),g*y){case 38:v=u>0?1:(E+="\f",-1);break;case 44:s[c++]=(Ec(E)-1)*v,v=1;break;case 64:45===Lc()&&(E+=Hc(Dc())),f=Lc(),u=p=Ec(b=E+=Yc(Fc())),g++;break;case 45:45===d&&2==Ec(E)&&(y=0)}}return o}function tu(e,t,r,n,i,o,a,s,l,c,u,p){for(var f=i-1,h=0===i?o:[""],d=Sc(h),y=0,m=0,v=0;y<n;++y)for(var g=0,b=xc(e,f+1,f=dc(m=a[y])),_=e;g<d;++g)(_=vc(m>0?h[g]+" "+b:bc(b,/&\f/g,h[g])))&&(l[v++]=_);return jc(e,t,r,0===i?cc:s,l,c,u,p)}function ru(e,t,r,n){return jc(e,t,r,lc,yc(Nc),xc(e,2,-2),0,n)}function nu(e,t,r,n,i){return jc(e,t,r,uc,xc(e,0,n),xc(e,n+1,-1),n,i)}const iu={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ou="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",au="active",su="data-styled-version",lu="6.1.8",cu="/*!sc*/\n",uu="undefined"!=typeof window&&"HTMLElement"in window,pu=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),fu=(new Set,Object.freeze([])),hu=Object.freeze({});function du(e,t,r){return void 0===r&&(r=hu),e.theme!==r.theme&&e.theme||t||r.theme}var yu=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),mu=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,vu=/(^-|-$)/g;function gu(e){return e.replace(mu,"-").replace(vu,"")}var bu=/(a)(d)/gi,_u=52,wu=function(e){return String.fromCharCode(e+(e>25?39:97))};function xu(e){var t,r="";for(t=Math.abs(e);t>_u;t=t/_u|0)r=wu(t%_u)+r;return(wu(t%_u)+r).replace(bu,"$1-$2")}var Eu,Su=5381,ku=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},Tu=function(e){return ku(Su,e)};function Ou(e){return xu(Tu(e)>>>0)}function Au(e){return e.displayName||e.name||"Component"}function Pu(e){return"string"==typeof e&&!0}var Cu="function"==typeof Symbol&&Symbol.for,Nu=Cu?Symbol.for("react.memo"):60115,Ru=Cu?Symbol.for("react.forward_ref"):60112,ju={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mu={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Iu={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Du=((Eu={})[Ru]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Eu[Nu]=Iu,Eu);function Lu(e){return("type"in(t=e)&&t.type.$$typeof)===Nu?Iu:"$$typeof"in e?Du[e.$$typeof]:ju;var t}var Fu=Object.defineProperty,Bu=Object.getOwnPropertyNames,zu=Object.getOwnPropertySymbols,$u=Object.getOwnPropertyDescriptor,Uu=Object.getPrototypeOf,Hu=Object.prototype;function Vu(e,t,r){if("string"!=typeof t){if(Hu){var n=Uu(t);n&&n!==Hu&&Vu(e,n,r)}var i=Bu(t);zu&&(i=i.concat(zu(t)));for(var o=Lu(e),a=Lu(t),s=0;s<i.length;++s){var l=i[s];if(!(l in Mu||r&&r[l]||a&&l in a||o&&l in o)){var c=$u(t,l);try{Fu(e,l,c)}catch(e){}}}}return e}function Gu(e){return"function"==typeof e}function qu(e){return"object"==typeof e&&"styledComponentId"in e}function Wu(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Yu(e,t){if(0===e.length)return"";for(var r=e[0],n=1;n<e.length;n++)r+=t?t+e[n]:e[n];return r}function Ku(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Xu(e,t,r){if(void 0===r&&(r=!1),!r&&!Ku(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=Xu(e[n],t[n]);else if(Ku(t))for(var n in t)e[n]=Xu(e[n],t[n]);return e}function Zu(e,t){Object.defineProperty(e,"toString",{value:t})}function Ju(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Qu=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,i=n;e>=i;)if((i<<=1)<0)throw Ju(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var o=n;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=(o=0,t.length);o<s;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var i=r;i<n;i++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),i=n+r,o=n;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(cu);return t},e}(),ep=new Map,tp=new Map,rp=1,np=function(e){if(ep.has(e))return ep.get(e);for(;tp.has(rp);)rp++;var t=rp++;return ep.set(e,t),tp.set(t,e),t},ip=function(e,t){rp=t+1,ep.set(e,t),tp.set(t,e)},op="style[".concat(ou,"][").concat(su,'="').concat(lu,'"]'),ap=new RegExp("^".concat(ou,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),sp=function(e,t,r){for(var n,i=r.split(","),o=0,a=i.length;o<a;o++)(n=i[o])&&e.registerName(t,n)},lp=function(e,t){for(var r,n=(null!==(r=t.textContent)&&void 0!==r?r:"").split(cu),i=[],o=0,a=n.length;o<a;o++){var s=n[o].trim();if(s){var l=s.match(ap);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(ip(u,c),sp(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}};function cp(){return __webpack_require__.nc}var up=function(e){var t=document.head,r=e||t,n=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(ou,"]")));return t[t.length-1]}(r),o=void 0!==i?i.nextSibling:null;n.setAttribute(ou,au),n.setAttribute(su,lu);var a=cp();return a&&n.setAttribute("nonce",a),r.insertBefore(n,o),n},pp=function(){function e(e){this.element=up(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,n=t.length;r<n;r++){var i=t[r];if(i.ownerNode===e)return i}throw Ju(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),fp=function(){function e(e){this.element=up(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),hp=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),dp=uu,yp={isServer:!uu,useCSSOMInjection:!pu},mp=function(){function e(e,t,r){void 0===e&&(e=hu),void 0===t&&(t={});var n=this;this.options=tc(tc({},yp),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&uu&&dp&&(dp=!1,function(e){for(var t=document.querySelectorAll(op),r=0,n=t.length;r<n;r++){var i=t[r];i&&i.getAttribute(ou)!==au&&(lp(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),Zu(this,(function(){return function(e){for(var t=e.getTag(),r=t.length,n="",i=function(r){var i=function(e){return tp.get(e)}(r);if(void 0===i)return"continue";var o=e.names.get(i),a=t.getGroup(r);if(void 0===o||0===a.length)return"continue";var s="".concat(ou,".g").concat(r,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),n+="".concat(a).concat(s,'{content:"').concat(l,'"}').concat(cu)},o=0;o<r;o++)i(o);return n}(n)}))}return e.registerId=function(e){return np(e)},e.prototype.reconstructWithOptions=function(t,r){return void 0===r&&(r=!0),new e(tc(tc({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,r=e.target;return e.isServer?new hp(r):t?new pp(r):new fp(r)}(this.options),new Qu(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(np(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},e.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(np(e),r)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(np(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),vp=/&/g,gp=/^\s*\/\/.*$/gm;function bp(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=bp(e.children,t)),e}))}function _p(e){var t,r,n,i=void 0===e?hu:e,o=i.options,a=void 0===o?hu:o,s=i.plugins,l=void 0===s?fu:s,c=function(e,n,i){return i.startsWith(r)&&i.endsWith(r)&&i.replaceAll(r,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===cc&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(vp,r).replace(n,c))})),a.prefix&&u.push(Jc),u.push(Xc);var p=function(e,i,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s="&"),t=s,r=i,n=new RegExp("\\".concat(r,"\\b"),"g");var l=e.replace(gp,""),c=Qc(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);a.namespace&&(c=bp(c,a.namespace));var p,f=[];return Kc(c,function(e){var t=Sc(e);return function(r,n,i,o){for(var a="",s=0;s<t;s++)a+=e[s](r,n,i,o)||"";return a}}(u.concat((p=function(e){return f.push(e)},function(e){e.root||(e=e.return)&&p(e)})))),f};return p.hash=l.length?l.reduce((function(e,t){return t.name||Ju(15),ku(e,t.name)}),Su).toString():"",p}var wp=new mp,xp=_p(),Ep=t.createContext({shouldForwardProp:void 0,styleSheet:wp,stylis:xp}),Sp=(Ep.Consumer,t.createContext(void 0));function kp(){return(0,t.useContext)(Ep)}function Tp(e){var r=(0,t.useState)(e.stylisPlugins),n=r[0],i=r[1],o=kp().styleSheet,a=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),s=(0,t.useMemo)((function(){return _p({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,t.useEffect)((function(){ic()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:s}}),[e.shouldForwardProp,a,s]);return t.createElement(Ep.Provider,{value:l},t.createElement(Sp.Provider,{value:s},e.children))}var Op=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=xp);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Zu(this,(function(){throw Ju(12,String(r.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=xp),this.name+e.hash},e}(),Ap=function(e){return e>="A"&&e<="Z"};function Pp(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(1===r&&"-"===n&&"-"===e[0])return e;Ap(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var Cp=function(e){return null==e||!1===e||""===e},Np=function(e){var t,r,n=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!Cp(o)&&(Array.isArray(o)&&o.isCss||Gu(o)?n.push("".concat(Pp(i),":"),o,";"):Ku(o)?n.push.apply(n,rc(rc(["".concat(i," {")],Np(o),!1),["}"],!1)):n.push("".concat(Pp(i),": ").concat((t=i,null==(r=o)||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||t in iu||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return n};function Rp(e,t,r,n){return Cp(e)?[]:qu(e)?[".".concat(e.styledComponentId)]:Gu(e)?!Gu(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Rp(e(t),t,r,n):e instanceof Op?r?(e.inject(r,n),[e.getName(n)]):[e]:Ku(e)?Np(e):Array.isArray(e)?Array.prototype.concat.apply(fu,e.map((function(e){return Rp(e,t,r,n)}))):[e.toString()];var i}function jp(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(Gu(r)&&!qu(r))return!1}return!0}var Mp=Tu(lu),Ip=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&jp(e),this.componentId=t,this.baseHash=ku(Mp,t),this.baseStyle=r,mp.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=Wu(n,this.staticRulesId);else{var i=Yu(Rp(this.rules,e,t,r)),o=xu(ku(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=r(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}n=Wu(n,o),this.staticRulesId=o}else{for(var s=ku(this.baseHash,r.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var p=Yu(Rp(u,e,t,r));s=ku(s,p+c),l+=p}}if(l){var f=xu(s>>>0);t.hasNameForId(this.componentId,f)||t.insertRules(this.componentId,f,r(l,".".concat(f),void 0,this.componentId)),n=Wu(n,f)}}return n},e}(),Dp=t.createContext(void 0);Dp.Consumer;var Lp={};new Set;function Fp(e,r,n){var i=qu(e),o=e,a=!Pu(e),s=r.attrs,l=void 0===s?fu:s,c=r.componentId,u=void 0===c?function(e,t){var r="string"!=typeof e?"sc":gu(e);Lp[r]=(Lp[r]||0)+1;var n="".concat(r,"-").concat(Ou(lu+r+Lp[r]));return t?"".concat(t,"-").concat(n):n}(r.displayName,r.parentComponentId):c,p=r.displayName,f=void 0===p?function(e){return Pu(e)?"styled.".concat(e):"Styled(".concat(Au(e),")")}(e):p,h=r.displayName&&r.componentId?"".concat(gu(r.displayName),"-").concat(r.componentId):r.componentId||u,d=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,y=r.shouldForwardProp;if(i&&o.shouldForwardProp){var m=o.shouldForwardProp;if(r.shouldForwardProp){var v=r.shouldForwardProp;y=function(e,t){return m(e,t)&&v(e,t)}}else y=m}var g=new Ip(n,h,i?o.componentStyle:void 0);function b(e,r){return function(e,r,n){var i=e.attrs,o=e.componentStyle,a=e.defaultProps,s=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=t.useContext(Dp),p=kp(),f=e.shouldForwardProp||p.shouldForwardProp,h=du(r,u,a)||hu,d=function(e,t,r){for(var n,i=tc(tc({},t),{className:void 0,theme:r}),o=0;o<e.length;o+=1){var a=Gu(n=e[o])?n(i):n;for(var s in a)i[s]="className"===s?Wu(i[s],a[s]):"style"===s?tc(tc({},i[s]),a[s]):a[s]}return t.className&&(i.className=Wu(i.className,t.className)),i}(i,r,h),y=d.as||c,m={};for(var v in d)void 0===d[v]||"$"===v[0]||"as"===v||"theme"===v&&d.theme===h||("forwardedAs"===v?m.as=d.forwardedAs:f&&!f(v,y)||(m[v]=d[v]));var g=function(e,t){var r=kp();return e.generateAndInjectStyles(t,r.styleSheet,r.stylis)}(o,d),b=Wu(s,l);return g&&(b+=" "+g),d.className&&(b+=" "+d.className),m[Pu(y)&&!yu.has(y)?"class":"className"]=b,m.ref=n,(0,t.createElement)(y,m)}(_,e,r)}b.displayName=f;var _=t.forwardRef(b);return _.attrs=d,_.componentStyle=g,_.displayName=f,_.shouldForwardProp=y,_.foldedComponentIds=i?Wu(o.foldedComponentIds,o.styledComponentId):"",_.styledComponentId=h,_.target=i?o.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t;n<i.length;n++)Xu(e,i[n],!0);return e}({},o.defaultProps,e):e}}),Zu(_,(function(){return".".concat(_.styledComponentId)})),a&&Vu(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function Bp(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r}var zp=function(e){return Object.assign(e,{isCss:!0})};function $p(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Gu(e)||Ku(e))return zp(Rp(Bp(fu,rc([e],t,!0))));var n=e;return 0===t.length&&1===n.length&&"string"==typeof n[0]?Rp(n):zp(Rp(Bp(n,t)))}function Up(e,t,r){if(void 0===r&&(r=hu),!t)throw Ju(1,t);var n=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,r,$p.apply(void 0,rc([n],i,!1)))};return n.attrs=function(n){return Up(e,t,tc(tc({},r),{attrs:Array.prototype.concat(r.attrs,n).filter(Boolean)}))},n.withConfig=function(n){return Up(e,t,tc(tc({},r),n))},n}var Hp=function(e){return Up(Fp,e)},Vp=Hp;yu.forEach((function(e){Vp[e]=Hp(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=jp(e),mp.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,r,n){var i=n(Yu(Rp(this.rules,t,r,n)),""),o=this.componentId+e;r.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,r,n){e>2&&mp.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,n)}}();var Gp,qp,Wp;(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),r=cp(),n=Yu([r&&'nonce="'.concat(r,'"'),"".concat(ou,'="true"'),"".concat(su,'="').concat(lu,'"')].filter(Boolean)," ");return"<style ".concat(n,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw Ju(2);return e._emitSheetCSS()},this.getStyleElement=function(){var r;if(e.sealed)throw Ju(2);var n=((r={})[ou]="",r[su]=lu,r.dangerouslySetInnerHTML={__html:e.instance.toString()},r),i=cp();return i&&(n.nonce=i),[t.createElement("style",tc({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new mp({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw Ju(2);return t.createElement(Tp,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw Ju(3)}})(),"__sc-".concat(ou,"__");Vp.div(Gp||(Gp=di(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nmin-height: 60vh;\nfont-size: 60px;\n"])));const Yp=Vp.input(qp||(qp=di(["\ndisplay: none;\n"]))),Kp=Vp.div(Wp||(Wp=di(["\ncursor: pointer;\n"]))),Xp=e=>{const{orderId:r,isRated:n,ratedValue:i=0}=e,[o,a]=(0,t.useState)(i);return(0,t.useEffect)((()=>{}),[]),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[...Array(5)].map(((e,t)=>{const i=t+1;return(0,b.jsxs)("label",{children:[(0,b.jsx)(Yp,{type:"radio",value:i,disabled:n,onClick:()=>{a(i),async function(e){let t={status:500};console.log("rating given ",e);try{t=await lr.get("".concat(dr,"/api/booking/orders/rateDriver/?orderId=")+r+"&rating="+e,{headers:{Authorization:"Basic ".concat(Ra())}})}catch(n){alert("Something went wrong while updating rating . please try again later")}t.status<=300&&alert("rating update successfully !")}(i)}}),(0,b.jsx)(Kp,{children:(0,b.jsx)(Na,{color:i<o||i===o?"000":"rgb(192,192,192)"})})]})}))})};function Zp(e){var t,r,n="";if("string"===typeof e||"number"===typeof e)n+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Zp(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Jp(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Zp(e))&&(n&&(n+=" "),n+=t);return n}Math.max,Math.min,Math.round;__webpack_require__(77),"undefined"!==typeof window&&window.document&&window.document.createElement?t.useLayoutEffect:t.useEffect;var Qp=function(){return Qp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qp.apply(this,arguments)};function ef(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}var tf=t.forwardRef((function(e,r){var n=e.breakpoint,i=e.fluid,o=e.children,a=e.className,s=e.tag,l=ef(e,["breakpoint","fluid","children","className","tag"]),c=Jp("".concat(i?"container-fluid":"container".concat(n?"-"+n:"")),a);return t.createElement(s,Qp({className:c},l,{ref:r}),o)}));tf.defaultProps={tag:"div"};var rf=t.forwardRef((function(e,r){var n=e.center,i=e.children,o=e.className,a=e.end,s=e.lg,l=e.md,c=e.offsetLg,u=e.offsetMd,p=e.offsetSm,f=e.order,h=e.size,d=e.sm,y=e.start,m=e.tag,v=e.xl,g=e.xxl,b=e.xs,_=ef(e,["center","children","className","end","lg","md","offsetLg","offsetMd","offsetSm","order","size","sm","start","tag","xl","xxl","xs"]),w=Jp(h&&"col-".concat(h),b&&"col-xs-".concat(b),d&&"col-sm-".concat(d),l&&"col-md-".concat(l),s&&"col-lg-".concat(s),v&&"col-xl-".concat(v),g&&"col-xxl-".concat(g),h||b||d||l||s||v||g?"":"col",f&&"order-".concat(f),y&&"align-self-start",n&&"align-self-center",a&&"align-self-end",p&&"offset-sm-".concat(p),u&&"offset-md-".concat(u),c&&"offset-lg-".concat(c),o);return t.createElement(m,Qp({className:w,ref:r},_),i)}));rf.defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.color,o=e.pill,a=e.light,s=e.dot,l=e.tag,c=e.children,u=e.notification,p=ef(e,["className","color","pill","light","dot","tag","children","notification"]),f=Jp("badge",a?i&&"badge-".concat(i):i&&"bg-".concat(i),s&&"badge-dot",o&&"rounded-pill",u&&"badge-notification",n);return t.createElement(l,Qp({className:f,ref:r},p),c)})).defaultProps={tag:"span",color:"primary"};var nf=function(e){var r=ef(e,[]),n=(0,t.useState)(!1),i=n[0],o=n[1],a=Jp("ripple-wave",i&&"active");return(0,t.useEffect)((function(){var e=setTimeout((function(){o(!0)}),50);return function(){clearTimeout(e)}}),[]),t.createElement("div",Qp({className:a},r))},of=t.forwardRef((function(e,r){var n=e.className,i=e.rippleTag,o=e.rippleCentered,a=e.rippleDuration,s=e.rippleUnbound,l=e.rippleRadius,c=e.rippleColor,u=e.children,p=e.onClick,f=ef(e,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick"]),h=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.useRef();return t.useEffect((function(){e.forEach((function(e){e&&("function"==typeof e?e(n.current):e.current=n.current)}))}),[e]),n}(r,(0,t.useRef)(null)),d=[0,0,0],y=["primary","secondary","success","danger","warning","info","light","dark"],m=(0,t.useState)([]),v=m[0],g=m[1],b=(0,t.useState)(!1),_=b[0],w=b[1],x=Jp("ripple","ripple-surface",s&&"ripple-surface-unbound",_&&"ripple-surface-".concat(c),n),E=function(){if(y.find((function(e){return e===(null==c?void 0:c.toLowerCase())})))return w(!0);var e=S(c).join(","),t="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e));return"radial-gradient(circle, ".concat(t,")")},S=function(e){return"transparent"===e.toLowerCase()?d:"#"===e[0]?function(e){return e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),r="rgb(1, 2, 3)";return t.style.color=r,t.style.color!==r?d:(t.style.color=e,t.style.color===r||""===t.style.color?d:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):d)};return(0,t.useEffect)((function(){var e=setTimeout((function(){v.length>0&&g(v.splice(1,v.length-1))}),a);return function(){clearTimeout(e)}}),[a,v]),t.createElement(i,Qp({className:x,onClick:function(e){return function(e){var t=function(e){var t,r=null===(t=h.current)||void 0===t?void 0:t.getBoundingClientRect(),n=e.clientX-r.left,i=e.clientY-r.top,s=r.height,c=r.width,u={delay:a&&.5*a,duration:a&&a-.5*a},p=function(e){var t=e.offsetX,r=e.offsetY,n=e.height,i=e.width,o=r<=n/2,a=t<=i/2,s=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},l=r===n/2&&t===i/2,c=!0===o&&!1===a,u=!0===o&&!0===a,p=!1===o&&!0===a,f=!1===o&&!1===a,h={topLeft:s(t,r),topRight:s(i-t,r),bottomLeft:s(t,n-r),bottomRight:s(i-t,n-r)},d=0;return l||f?d=h.topLeft:p?d=h.topRight:u?d=h.bottomRight:c&&(d=h.bottomLeft),2*d}({offsetX:o?s/2:n,offsetY:o?c/2:i,height:s,width:c}),f=l||p/2,d={left:"".concat(o?c/2-f:n-f,"px"),top:"".concat(o?s/2-f:i-f,"px"),height:"".concat(l?2*l:p,"px"),width:"".concat(l?2*l:p,"px"),transitionDelay:"0s, ".concat(u.delay,"ms"),transitionDuration:"".concat(a,"ms, ").concat(u.duration,"ms")};return _?d:Qp(Qp({},d),{backgroundImage:"".concat(E())})}(e),r=v.concat(t);g(r),p&&p(e)}(e)},ref:h},f),u,v.map((function(e,r){return t.createElement(nf,{key:r,style:e})})))}));of.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var af=t.forwardRef((function(e,r){var n=e.className,i=e.color,o=e.outline,a=e.children,s=e.rounded,l=e.disabled,c=e.floating,u=e.size,p=e.href,f=e.block,h=e.active,d=e.toggle,y=e.noRipple,m=e.tag,v=ef(e,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),g=(0,t.useState)(h||!1),b=g[0],_=g[1],w=i&&["light","link"].includes(i)||o?"dark":"light",x=Jp("none"!==i&&"btn","none"!==i?o?i?"btn-outline-".concat(i):"btn-outline-primary":i?"btn-".concat(i):"btn-primary":"",s&&"btn-rounded",c&&"btn-floating",u&&"btn-".concat(u),"".concat((p||"button"!==m)&&l?"disabled":""),f&&"btn-block",b&&"active",n);return p&&"a"!==m&&(m="a"),["hr","img","input"].includes(m)||y?t.createElement(m,Qp({className:x,onClick:d?function(){_(!b)}:void 0,disabled:!(!l||"button"!==m)||void 0,href:p,ref:r},v),a):t.createElement(of,Qp({rippleTag:m,rippleColor:w,className:x,onClick:d?function(){_(!b)}:void 0,disabled:!(!l||"button"!==m)||void 0,href:p,ref:r},v),a)}));af.defaultProps={tag:"button",role:"button",color:"primary"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.shadow,a=e.toolbar,s=e.size,l=e.vertical,c=e.tag,u=ef(e,["className","children","shadow","toolbar","size","vertical","tag"]),p=Jp(a?"btn-toolbar":l?"btn-group-vertical":"btn-group",o&&"shadow-".concat(o),s&&"btn-group-".concat(s),n);return t.createElement(c,Qp({className:p,ref:r},u),i)})).defaultProps={tag:"div",role:"group"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=e.color,s=e.grow,l=e.size,c=ef(e,["className","children","tag","color","grow","size"]),u=Jp("".concat(s?"spinner-grow":"spinner-border"),a&&"text-".concat(a),"".concat(l?s?"spinner-grow-"+l:"spinner-border-"+l:""),n);return t.createElement(o,Qp({className:u,ref:r},c),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.border,a=e.background,s=e.tag,l=e.shadow,c=e.alignment,u=ef(e,["className","children","border","background","tag","shadow","alignment"]),p=Jp("card",o&&"border border-".concat(o),a&&"bg-".concat(a),l&&"shadow-".concat(l),c&&"text-".concat(c),n);return t.createElement(s,Qp({className:p,ref:r},u),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.border,a=e.background,s=e.tag,l=ef(e,["className","children","border","background","tag"]),c=Jp("card-header",o&&"border-".concat(o),a&&"bg-".concat(a),n);return t.createElement(s,Qp({className:c},l,{ref:r}),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("card-subtitle",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"p"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("card-title",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"h5"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("card-text",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"p"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("card-body",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.border,a=e.background,s=e.tag,l=ef(e,["className","children","border","background","tag"]),c=Jp("card-footer",o&&"border-".concat(o),a&&"bg-".concat(a),n);return t.createElement(s,Qp({className:c},l,{ref:r}),i)})).defaultProps={tag:"div"};t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("card-img-overlay",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"};t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("card-group",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.tag,o=e.horizontal,a=e.horizontalSize,s=e.light,l=e.numbered,c=e.children,u=e.small,p=ef(e,["className","tag","horizontal","horizontalSize","light","numbered","children","small"]),f=Jp("list-group",o&&(a?"list-group-horizontal-".concat(a):"list-group-horizontal"),s&&"list-group-light",l&&"list-group-numbered",u&&"list-group-small",n);return t.createElement(i,Qp({className:f,ref:r},p),c)})).defaultProps={tag:"ul"},t.forwardRef((function(e,r){var n=e.className,i=e.tag,o=e.active,a=e.disabled,s=e.action,l=e.color,c=e.children,u=e.noBorders,p=ef(e,["className","tag","active","disabled","action","color","children","noBorders"]),f="button"===i,h=Jp("list-group-item",o&&"active",a&&!f&&"disabled",s&&"list-group-item-action",l&&"list-group-item-".concat(l),u&&"border-0",n);return t.createElement(i,Qp({className:h,disabled:f&&a,ref:r},p),c)})).defaultProps={tag:"li"};var sf=t.forwardRef((function(e,r){var n=e.around,i=e.between,o=e.bottom,a=e.center,s=e.children,l=e.className,c=e.evenly,u=e.end,p=e.middle,f=e.start,h=e.tag,d=e.top,y=ef(e,["around","between","bottom","center","children","className","evenly","end","middle","start","tag","top"]),m=Jp("row",n&&"justify-content-around",i&&"justify-content-between",o&&"align-self-end",a&&"justify-content-center",c&&"justifty-content-evenly",u&&"justify-content-end",p&&"align-self-center",f&&"justify-content-start",d&&"align-self-start",l);return t.createElement(h,Qp({className:m},y,{ref:r}),s)}));sf.defaultProps={tag:"div"};var lf=t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=e.variant,s=e.color,l=e.blockquote,c=e.note,u=e.noteColor,p=e.listUnStyled,f=e.listInLine,h=ef(e,["className","children","tag","variant","color","blockquote","note","noteColor","listUnStyled","listInLine"]),d=Jp(a&&a,l&&"blockquote",c&&"note",s&&"text-".concat(s),u&&"note-".concat(u),p&&"list-unstyled",f&&"list-inline",n);return l&&(o="blockquote"),(p||f)&&(o="ul"),t.createElement(o,Qp({className:d,ref:r},h),i)}));lf.defaultProps={tag:"p"};t.forwardRef((function(e,r){var n=e.className,i=e.color,o=e.uppercase,a=e.bold,s=e.children,l=ef(e,["className","color","uppercase","bold","children"]),c=Jp("breadcrumb",a&&"font-weight-bold",i&&"text-".concat(i),o&&"text-uppercase",n);return t.createElement("nav",{"aria-label":"breadcrumb"},t.createElement("ol",Qp({className:c,ref:r},l),s))}));t.forwardRef((function(e,r){var n=e.className,i=e.active,o=e.current,a=e.children,s=ef(e,["className","active","current","children"]),l=Jp("breadcrumb-item",i&&"active",n);return t.createElement("li",Qp({className:l,ref:r,"aria-current":i&&o},s),a)})).defaultProps={current:"page"};var cf=t.forwardRef((function(e,r){var n,i=e.className,o=e.children,a=e.light,s=e.dark,l=e.scrolling,c=e.fixed,u=e.sticky,p=e.scrollingNavbarOffset,f=e.color,h=e.transparent,d=e.expand,y=e.tag,m=e.bgColor,v=ef(e,["className","children","light","dark","scrolling","fixed","sticky","scrollingNavbarOffset","color","transparent","expand","tag","bgColor"]),g=(0,t.useState)(!1),b=g[0],_=g[1],w=Jp(((n={"navbar-light":a,"navbar-dark":s,"scrolling-navbar":l||p,"top-nav-collapse":b})["text-".concat(f)]=f&&h?b:f,n),c&&"fixed-".concat(c),u&&"sticky-top","navbar",d&&function(e){if(!1!==e)return"navbar-expand-".concat(e)}(d),m&&"bg-".concat(m),i),x=(0,t.useCallback)((function(){p&&window.pageYOffset>p?_(!0):_(!1)}),[p]);return(0,t.useEffect)((function(){return(l||p)&&window.addEventListener("scroll",x),function(){window.removeEventListener("scroll",x)}}),[x,l,p]),t.createElement(y,Qp({className:w,role:"navigation"},v,{ref:r}),o)}));cf.defaultProps={tag:"nav"},t.forwardRef((function(e,r){var n=e.children,i=e.className,o=e.disabled,a=e.active,s=e.tag,l=ef(e,["children","className","disabled","active","tag"]),c=Jp("nav-link",o?"disabled":a?"active":"",i);return t.createElement(s,Qp({"data-test":"nav-link",className:c,ref:r},l),n)})).defaultProps={tag:"a",active:!1,className:"",disabled:!1},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("navbar-brand",n);return t.createElement(o,Qp({className:s,ref:r},a),i)})).defaultProps={tag:"a"},t.forwardRef((function(e,r){var n=e.children,i=e.className,o=e.active,a=e.text,s=e.tag,l=ef(e,["children","className","active","text","tag"]),c=Jp("nav-item",o&&"active",a&&"navbar-text",i);return t.createElement(s,Qp({},l,{className:c,ref:r}),n)})).defaultProps={tag:"li"},t.forwardRef((function(e,r){var n=e.children,i=e.className,o=e.right,a=e.fullWidth,s=e.left,l=e.tag,c=ef(e,["children","className","right","fullWidth","left","tag"]),u=Jp("navbar-nav",a&&"w-100",o&&"ms-auto",s&&"me-auto",i);return t.createElement(l,Qp({className:u,ref:r},c),n)})).defaultProps={tag:"ul",fullWidth:!0},t.forwardRef((function(e,r){var n=e.children,i=e.className,o=e.tag,a=ef(e,["children","className","tag"]),s=Jp("navbar-toggler",i);return t.createElement(o,Qp({},a,{className:s,ref:r}),n)})).defaultProps={tag:"button"};t.forwardRef((function(e,r){var n=e.children,i=e.bgColor,o=e.color,a=e.className,s=ef(e,["children","bgColor","color","className"]),l=Jp(i&&"bg-".concat(i),o&&"text-".concat(o),a);return t.createElement("footer",Qp({className:l},s,{ref:r}),n)})),t.forwardRef((function(e,r){var n=e.children,i=e.size,o=e.circle,a=e.center,s=e.end,l=e.start,c=e.className,u=ef(e,["children","size","circle","center","end","start","className"]),p=Jp("pagination",a&&"justify-content-center",o&&"pagination-circle",s&&"justify-content-end",i&&"pagination-".concat(i),l&&"justify-content-start",c);return t.createElement("ul",Qp({className:p},u,{ref:r}),n)}));t.forwardRef((function(e,r){var n=e.children,i=e.className,o=e.tag,a=ef(e,["children","className","tag"]),s=Jp("page-link",i);return t.createElement(o,Qp({className:s},a,{ref:r}),n)})).defaultProps={tag:"a"};t.forwardRef((function(e,r){var n=e.children,i=e.className,o=e.active,a=e.disabled,s=ef(e,["children","className","active","disabled"]),l=Jp("page-item",o&&"active",a&&"disabled",i);return t.createElement("li",Qp({className:l},s,{ref:r}),n)}));var uf=t.forwardRef((function(e,r){var n,i=e.animated,o=e.children,a=e.className,s=e.style,l=e.tag,c=e.valuenow,u=e.valuemax,p=e.striped,f=e.bgColor,h=e.valuemin,d=e.width,y=ef(e,["animated","children","className","style","tag","valuenow","valuemax","striped","bgColor","valuemin","width"]),m=Jp("progress-bar",f&&"bg-".concat(f),p&&"progress-bar-striped",i&&"progress-bar-animated",a),v=Qp({width:"".concat(d,"%")},s);return t.createElement(l,Qp({className:m,style:v,ref:r,role:"progressbar"},y,{"aria-valuenow":null!==(n=Number(d))&&void 0!==n?n:c,"aria-valuemin":Number(h),"aria-valuemax":Number(u)}),o)}));uf.defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=e.height,s=e.style,l=ef(e,["className","children","tag","height","style"]),c=Jp("progress",n),u=Qp({height:"".concat(a,"px")},s);return t.createElement(o,Qp({className:c,ref:r,style:u},l),t.Children.map(i,(function(e){return t.isValidElement(e)&&e.type===uf?e:void console.error("Progress component only allows ProgressBar as child")})))})).defaultProps={tag:"div"};var pf=function(e){var r=e.className,n=e.inputRef,i=e.labelClass,o=e.wrapperClass,a=e.labelStyle,s=e.wrapperTag,l=e.wrapperStyle,c=e.label,u=e.inline,p=e.btn,f=e.id,h=e.btnColor,d=e.disableWrapper,y=e.toggleSwitch,m=ef(e,["className","inputRef","labelClass","wrapperClass","labelStyle","wrapperTag","wrapperStyle","label","inline","btn","id","btnColor","disableWrapper","toggleSwitch"]),v="form-check-input",g="form-check-label";p&&(v="btn-check",g=h?"btn btn-".concat(h):"btn btn-primary");var b=Jp(c&&!p&&"form-check",u&&!p&&"form-check-inline",y&&"form-switch",o),_=Jp(v,r),w=Jp(g,i),x=t.createElement(t.Fragment,null,t.createElement("input",Qp({className:_,id:f,ref:n},m)),c&&t.createElement("label",{className:w,style:a,htmlFor:f},c));return t.createElement(t.Fragment,null,d?x:t.createElement(s,{style:l,className:b},x))};pf.defaultProps={wrapperTag:"div"};var ff=function(e){var r=e.className,n=e.children,i=e.show,o=e.id,a=e.navbar,s=e.tag,l=e.collapseRef,c=ef(e,["className","children","show","id","navbar","tag","collapseRef"]),u=Jp("collapse",a&&"navbar-collapse",r),p=(0,t.useRef)(null),f=(0,t.useRef)(i),h=null!=l?l:p;return(0,t.useEffect)((function(){var e;if(f.current&&i)return f.current=!1,void(null===(e=null==h?void 0:h.current)||void 0===e||e.classList.add("show"))}),[h,i]),(0,t.useEffect)((function(){var e=h.current;if(e&&!f.current){var t=function(){e.classList.toggle("collapsing"),e.classList.toggle("collapse")};i?(t(),e.style.height="".concat(e.scrollHeight,"px"),setTimeout((function(){t(),e.classList.toggle("show"),e.style.height=""}),350)):(e.style.height="".concat(e.scrollHeight,"px"),setTimeout((function(){t(),e.style.height="",e.classList.toggle("show")})),setTimeout((function(){t()}),350))}}),[i,h]),t.createElement(s,Qp({id:o,className:u},c,{ref:h}),n)};ff.defaultProps={tag:"div"};(0,t.createContext)(null);function hf(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}hf(".dropdown-menu .active {\n  color: #16181b;\n  background-color: #eee;\n}\n");hf(".dropdown-menu [data-active='true'] a.dropdown-item,\n.dropdown-menu .dropdown-item:focus,\n.dropdown-menu li:focus .dropdown-item :not(.disabled) {\n  color: #16181b;\n  background-color: #eee;\n}\n\n.dropdown-menu li:focus {\n  outline: none;\n}\n\n.dropdown-menu.dropdown-menu-dark [data-active='true'] a.dropdown-item,\n.dropdown-menu.dropdown-menu-dark .dropdown-item:focus,\n.dropdown-menu.dropdown-menu-dark li:focus .dropdown-item {\n  color: #fff;\n  background-color: #1266f1;\n}\n\n.btn-group.dropstart > .dropdown-menu {\n  right: 0 !important;\n}\n");t.forwardRef((function(e,r){var n=e.className,i=e.centered,o=e.children,a=e.size,s=e.scrollable,l=e.tag,c=ef(e,["className","centered","children","size","scrollable","tag"]),u=Jp("modal-dialog",s&&"modal-dialog-scrollable",i&&"modal-dialog-centered",a&&"modal-".concat(a),n);return t.createElement(l,Qp({className:u},c,{ref:r}),o)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("modal-content",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("modal-header",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("modal-title",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"h5"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("modal-body",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.tag,a=ef(e,["className","children","tag"]),s=Jp("modal-footer",n);return t.createElement(o,Qp({className:s},a,{ref:r}),i)})).defaultProps={tag:"div"};t.createContext({activeElement:null,setTargets:null});var df=function(e){var r=e.value,n=e.min,i=e.max,o=e.showThumb,a=Number(r),s=(0,t.useState)(100*(a||0-Number(n))/(Number(i)-Number(n))),l=s[0],c=s[1],u=Jp("thumb",o&&"thumb-active");return(0,t.useEffect)((function(){c(100*(Number(r)-Number(n))/(Number(i)-Number(n)))}),[r,i,n]),t.createElement("span",{className:u,style:{left:"calc(".concat(l,"% + (").concat(8-.15*l,"px))")}},t.createElement("span",{className:"thumb-value"},r))};df.defaultProps={min:"0",max:"100"};var yf=t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.noBorder,a=e.textBefore,s=e.textAfter,l=e.noWrap,c=e.tag,u=e.textTag,p=e.textClass,f=e.size,h=e.textProps,d=ef(e,["className","children","noBorder","textBefore","textAfter","noWrap","tag","textTag","textClass","size","textProps"]),y=Jp("input-group",l&&"flex-nowrap",f&&"input-group-".concat(f),n),m=Jp("input-group-text",o&&"border-0",p),v=function(e){return t.createElement(t.Fragment,null,e&&Array.isArray(e)?e.map((function(e,r){return t.createElement(u,Qp({key:r,className:m},h),e)})):t.createElement(u,Qp({className:m},h),e))};return t.createElement(c,Qp({className:y,ref:r},d),a&&v(a),i,s&&v(s))}));yf.defaultProps={tag:"div",textTag:"span"},t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.isValidated,a=e.onReset,s=e.onSubmit,l=ef(e,["className","children","isValidated","onReset","onSubmit"]),c=(0,t.useState)(o),u=c[0],p=c[1],f=Jp("needs-validation",u&&"was-validated",n);return t.createElement("form",Qp({className:f,onSubmit:function(e){e.preventDefault(),p(!0),s&&s(e)},onReset:function(e){e.preventDefault(),p(!1),a&&a(e)},ref:r},l),i)})).defaultProps={noValidate:!0};t.forwardRef((function(e,r){var n=e.className,i=e.fill,o=e.pills,a=e.justify,s=e.children,l=ef(e,["className","fill","pills","justify","children"]),c=Jp("nav",o?"nav-pills":"nav-tabs",i&&"nav-fill",a&&"nav-justified",n);return t.createElement("ul",Qp({className:c,ref:r},l),s)})),t.forwardRef((function(e,r){var n=e.className,i=e.children,o=e.style,a=ef(e,["className","children","style"]),s=Jp("nav-item",n);return t.createElement("li",Qp({className:s,style:Qp({cursor:"pointer"},o),role:"presentation",ref:r},a),i)})),t.forwardRef((function(e,r){var n=e.className,i=e.color,o=e.active,a=e.onShow,s=e.onHide,l=e.children,c=ef(e,["className","color","active","onShow","onHide","children"]),u=Jp("nav-link",o&&"active",i&&"bg-".concat(i),n);return(0,t.useEffect)((function(){o?null==a||a():null==s||s()}),[o]),t.createElement("a",Qp({className:u,ref:r},c),l)}));t.forwardRef((function(e,r){var n=e.className,i=e.tag,o=e.children,a=ef(e,["className","tag","children"]),s=Jp("tab-content",n);return t.createElement(i,Qp({className:s,ref:r},a),o)})).defaultProps={tag:"div"},t.forwardRef((function(e,r){var n=e.className,i=e.tag,o=e.show,a=e.children,s=ef(e,["className","tag","show","children"]),l=(0,t.useState)(!1),c=l[0],u=l[1],p=Jp("tab-pane","fade",c&&"show",o&&"active",n);return(0,t.useEffect)((function(){var e;return o?e=setTimeout((function(){u(!0)}),100):u(!1),function(){clearTimeout(e)}}),[o]),t.createElement(i,Qp({className:p,role:"tabpanel",ref:r},s),a)})).defaultProps={tag:"div"};var mf=(0,t.createContext)({active:0}),vf=function(e){var r=e.imagesCount,n=e.to,i=(0,t.useContext)(mf).active;return t.createElement("ol",{className:"carousel-indicators"},Array.from(Array(r)).map((function(e,r){return t.createElement("li",{"data-mdb-target":r,key:r,className:Jp(i===r&&"active"),onClick:function(){return n(r)}})})))},gf=function(e){var r=e.move;return t.createElement(t.Fragment,null,t.createElement("a",{role:"button",className:"carousel-control-prev",onClick:function(){return r("prev")}},t.createElement("span",{className:"carousel-control-prev-icon"}),t.createElement("span",{className:"visually-hidden"},"Previous")),t.createElement("a",{role:"button",className:"carousel-control-next",onClick:function(){return r("next")}},t.createElement("span",{className:"carousel-control-next-icon"}),t.createElement("span",{className:"visually-hidden"},"Next")))},bf=function(e){"function"==typeof e&&e()};(function(e){var r=e.fade,n=e.className,i=e.dark,o=e.children,a=e.interval,s=e.keyboard,l=e.touch,c=e.showControls,u=e.showIndicators,p=e.onSlide,f=ef(e,["fade","className","dark","children","interval","keyboard","touch","showControls","showIndicators","onSlide"]),h=(0,t.useRef)([]),d=(0,t.useRef)(null),y=(0,t.useRef)(0),m=(0,t.useRef)(!1),v=(0,t.useState)(0),g=v[0],b=v[1],_=(0,t.useState)(0),w=_[0],x=_[1],E=(0,t.useState)({initialX:0,initialY:0}),S=E[0],k=E[1],T=(0,t.useState)(!1),O=T[0],A=T[1],P=(0,t.useRef)(null),C=Jp("carousel","slide",r&&"carousel-fade",i&&"carousel-dark",n),N=function(){d.current&&(clearInterval(d.current),d.current=null)},R=(0,t.useCallback)((function(e,t){if(void 0!==t)y.current=t,b(t);else{var r=g===w-1?0:g+1,n=0===g?w-1:g-1;y.current="next"===e?r:n,b("next"===e?r:n)}}),[g,w]),j=(0,t.useCallback)((function(e,t,r){var n;A(!0);var i=h.current[g],o=Boolean(d.current),a="next"===e,s=a?"carousel-item-start":"carousel-item-end",l=a?"carousel-item-next":"carousel-item-prev";t.classList.contains("active")?m.current=!1:(R(e,r),i&&t&&(m.current=!0,o&&N(),(null===(n=P.current)||void 0===n?void 0:n.classList.contains("slide"))?(t.classList.add(l),t.offsetHeight,i.classList.add(s),t.classList.add(s),function(e,t,r){if(void 0===r&&(r=!0),r){var n=function(e){if(!e)return 0;var t=window.getComputedStyle(e),r=t.transitionDuration,n=t.transitionDelay,i=Number.parseFloat(r),o=Number.parseFloat(n);return i||o?(r=r.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(r)+Number.parseFloat(n))):0}(t);t.addEventListener("transitionend",(function(){return bf(e)}),{once:!0}),function(e,t){var r=!1,n=t+5;e.addEventListener("transitionend",(function t(){r=!0,e.removeEventListener("transitionend",t)})),setTimeout((function(){r||function(e){e.dispatchEvent(new Event("transitionend"))}(e)}),n)}(t,n)}else bf(e)}((function(){A(!1),t.classList.remove(s,l),t.classList.add("active"),i.classList.remove("active",l,s),m.current=!1}),i,!0)):(i.classList.remove("active"),t.classList.add("active"),m.current=!1)))}),[P,g,R]),M=function(e){m.current||(m.current=!0,setTimeout((function(){m.current=!1}),e))},I=(0,t.useCallback)((function(e){var t="prev"===e,r=(y.current+(t?-1:1))%w,n=h.current;return-1===r?n[w-1]:n[r]}),[w]),D=(0,t.useCallback)((function(e){if(!m.current){M(600);var t=I(e);j(e,t)}}),[I,j]),L=(0,t.useCallback)((function(){var e,t,r,n=document.visibilityState,i=document.hidden;if(n){if(i||(e=P.current,t=getComputedStyle(e),r=getComputedStyle(null==e?void 0:e.parentNode),"none"===t.display||"none"===r.display||"hidden"===t.visibility))return;return D("next")}D("next")}),[P,D]),F=(0,t.useCallback)((function(){d.current&&(clearInterval(d.current),d.current=null),d.current=setInterval(L,a)}),[L,a]),B=(0,t.useCallback)((function(e){switch(e.key){case"ArrowLeft":e.preventDefault(),D("prev");break;case"ArrowRight":e.preventDefault(),D("next")}}),[D]);return(0,t.useEffect)((function(){if(s)return window.addEventListener("keydown",B),function(){window.removeEventListener("keydown",B)}}),[B,s]),(0,t.useEffect)((function(){var e=function(e){return Array.from(null==e?void 0:e.querySelectorAll(".carousel-item"))}(P.current);h.current=e,x(e.length)}),[P]),(0,t.useEffect)((function(){null==p||p()}),[O,p]),(0,t.useEffect)((function(){F()}),[F]),t.createElement("div",Qp({onTouchStart:function(e){l&&k({initialX:e.touches[0].clientX,initialY:e.touches[0].clientY})},onTouchMove:function(e){m.current=!0;var t=S.initialX,r=S.initialY;if(t&&r){var n=t-e.touches[0].clientX,i=r-e.touches[0].clientY;Math.abs(n)>Math.abs(i)&&D(n>0?"prev":"next"),k({initialX:0,initialY:0})}},onTouchEnd:function(){m.current=!1},onMouseEnter:N,onMouseLeave:F,className:C,ref:P},f),t.createElement("div",{className:"carousel-inner"},t.createElement(mf.Provider,{value:{active:g}},u&&t.createElement(vf,{to:function(e){if(!(m.current||(M(700),e>w-1||e<0))){var t=function(e){return{direction:e>y.current?"next":"prev",nextElement:h.current[e]}}(e),r=t.direction,n=t.nextElement;j(r,n,e)}},imagesCount:w}),o,c&&t.createElement(gf,{move:D}))))}).defaultProps={fade:!1,interval:5e3,touch:!0,keyboard:!1};var _f=t.createContext({activeItem:0,setActiveItem:null,alwaysOpen:!1,initialActive:0}),wf=t.forwardRef((function(e,r){var n=e.alwaysOpen,i=e.className,o=e.flush,a=e.initialActive,s=e.tag,l=e.children,c=e.onChange,u=ef(e,["alwaysOpen","className","flush","initialActive","tag","children","onChange"]),p=Jp("accordion",o&&"accordion-flush",i),f=(0,t.useState)(a),h=f[0],d=f[1];return(0,t.useEffect)((function(){h&&c&&c(h)}),[c,h]),t.createElement(s,Qp({className:p,ref:r},u),t.createElement(_f.Provider,{value:{activeItem:h,setActiveItem:d,alwaysOpen:n,initialActive:a}},l))}));wf.defaultProps={tag:"div",initialActive:0};var xf=t.forwardRef((function(e,r){var n=e.className,i=e.bodyClassName,o=e.bodyStyle,a=e.headerClassName,s=e.collapseId,l=e.headerTitle,c=e.headerStyle,u=e.tag,p=e.children,f=ef(e,["className","bodyClassName","bodyStyle","headerClassName","collapseId","headerTitle","headerStyle","tag","children"]),h=(0,t.useContext)(_f),d=h.activeItem,y=h.setActiveItem,m=h.alwaysOpen,v=h.initialActive,g=(0,t.useState)(v),b=g[0],_=g[1],w=Jp("accordion-item",n),x=Jp("accordion-header",a),E=Jp("accordion-body",i),S=Jp("accordion-button",m?s!==b&&"collapsed":s!==d&&"collapsed");return t.createElement(u,Qp({className:w,ref:r},f),t.createElement("h2",{className:x,style:c},t.createElement("button",{onClick:function(){return e=s,void(m?_(e!==b?e:0):y(e!==d?e:0));var e},className:S,type:"button"},l)),t.createElement(ff,{id:s.toString(),show:m?b===s:d===s},t.createElement("div",{className:E,style:o},p)))}));xf.defaultProps={tag:"div"};const Ef=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"card-body"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Ef.displayName="CardBody";const Sf=Ef,kf=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"card-footer"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));kf.displayName="CardFooter";const Tf=kf,Of=t.createContext(null);Of.displayName="CardHeaderContext";const Af=Of,Pf=t.forwardRef(((e,r)=>{let{bsPrefix:n,className:i,as:o="div",...a}=e;const s=M(n,"card-header"),l=(0,t.useMemo)((()=>({cardHeaderBsPrefix:s})),[s]);return(0,b.jsx)(Af.Provider,{value:l,children:(0,b.jsx)(o,{ref:r,...a,className:x()(i,s)})})}));Pf.displayName="CardHeader";const Cf=Pf,Nf=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,variant:i,as:o="img",...a}=e;const s=M(r,"card-img");return(0,b.jsx)(o,{ref:t,className:x()(i?"".concat(s,"-").concat(i):s,n),...a})}));Nf.displayName="CardImg";const Rf=Nf,jf=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"card-img-overlay"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));jf.displayName="CardImgOverlay";const Mf=jf,If=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="a",...o}=e;return n=M(n,"card-link"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));If.displayName="CardLink";const Df=If,Lf=is("h6"),Ff=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i=Lf,...o}=e;return n=M(n,"card-subtitle"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Ff.displayName="CardSubtitle";const Bf=Ff,zf=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="p",...o}=e;return n=M(n,"card-text"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));zf.displayName="CardText";const $f=zf,Uf=is("h5"),Hf=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i=Uf,...o}=e;return n=M(n,"card-title"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Hf.displayName="CardTitle";const Vf=Hf,Gf=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,bg:i,text:o,border:a,body:s=!1,children:l,as:c="div",...u}=e;const p=M(r,"card");return(0,b.jsx)(c,{ref:t,...u,className:x()(n,p,i&&"bg-".concat(i),o&&"text-".concat(o),a&&"border-".concat(a)),children:s?(0,b.jsx)(Sf,{children:l}):l})}));Gf.displayName="Card";const qf=Object.assign(Gf,{Img:Rf,Title:Vf,Subtitle:Bf,Body:Sf,Link:Df,Text:$f,Header:Cf,Footer:Tf,ImgOverlay:Mf}),Wf={BOOKING_REQUESTED:"Delivery Requested",BOOKING_ACCEPTED:"Driver Accepted",OTP_VERIFIED:"Driver Picked up",BOOKING_COMPLETED:"Pacakge Delivered",PACKAGE_RECEIVED:"In-transit"},Yf=e=>{let{orderId:r,secondsRemaining:n}=e;const[i,o]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{console.log("remaining",n);0==n&&(async()=>{try{await lr.get("".concat(dr,"/api/booking/update/?orderId=")+r+"&field=userCanCancel&value=false")}catch(e){console.log("cancel booking error"),alert("something went wrong, please try again later")}})()}),[n]),(0,b.jsxs)("button",{className:"countdown-cancel-button ".concat(n<=0?"hidden":""),disabled:n<=0,onClick:async()=>{o(!0);try{await lr.post("".concat(dr,"/api/booking/cancel/"),{orderId:r})}catch(e){console.log("cancel booking error"),alert("something went wrong, please try again later")}o(!1)},children:[i?"Cancelling ..":"Cancel"," (",n,"s)"]})},Kf=e=>{let{orderId:r}=e;const[n,i]=(0,t.useState)(60);return(0,t.useEffect)((()=>{i(60);const e=setInterval((()=>{n>=0&&i((e=>Math.max(0,e-1)))}),1e3);return()=>clearInterval(e)}),[]),(0,b.jsx)(Yf,{secondsRemaining:n,orderId:r})},Xf=()=>(0,b.jsx)("div",{class:"card border-light border-1 d-flex justify-content-center p-4 uber-card",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("img",{src:fr,alt:"Delivery Truck",className:"card-image",style:{objectFit:"contain"}}),(0,b.jsx)("h4",{class:"fw-bold",children:"Send Package"}),(0,b.jsx)("p",{class:"text-muted",children:"Ship anything, anywhere, conveniently."})]})})}),Zf=()=>(0,b.jsx)("div",{class:"card border-light border-1 d-flex justify-content-center p-4 uber-card",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("img",{src:pr,alt:"Delivery Truck",className:"card-image",style:{objectFit:"contain"}}),(0,b.jsx)("h4",{class:"fw-bold",children:"Move Your Supplies"}),(0,b.jsx)("p",{class:"text-muted",children:"Effortlessly transport your belongings, big or small."})]})})}),Jf=()=>(0,b.jsxs)("div",{class:"row gy-4 row-cols-1 row-cols-md-3 flex-grow-1",children:[(0,b.jsx)("div",{class:"col",children:(0,b.jsx)("div",{class:"card border-light border-1 d-flex justify-content-center p-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{class:"fw-bold",children:"Guaranteed Delivery."}),(0,b.jsx)("p",{class:"text-muted d-none d-xl-block",children:"If we fail to deliver timely, the delivery is on us."})]})})})}),(0,b.jsx)("div",{class:"col",children:(0,b.jsx)("div",{class:"card border-light border-1 d-flex justify-content-center p-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{class:"fw-bold",children:"Safe Handling."}),(0,b.jsx)("p",{class:"text-muted d-none d-xl-block",children:"We care for your stuff just as much as you do."})]})})})}),(0,b.jsx)("div",{class:"col",children:(0,b.jsx)("div",{class:"card border-light border-1 d-flex justify-content-center p-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{class:"fw-bold",children:"Verified CanDoers."}),(0,b.jsx)("p",{class:"text-muted d-none d-xl-block",children:"Each agent goes through stringent checks."})]})})})})]}),Qf=()=>(0,b.jsxs)("div",{class:"container py-4 py-lg-5",children:[(0,b.jsx)("hr",{}),(0,b.jsxs)("div",{class:"text-muted d-flex justify-content-between align-items-center pt-3",children:[(0,b.jsx)("p",{class:"mb-0",children:"Copyright \xa9 2024 CanDeliver"}),(0,b.jsxs)("span",{children:["  ",(0,b.jsx)("a",{target:"_blank",href:"https://icons8.com/icon/I0bgGDfiCLem/sedan",children:"Car"})," icon by ",(0,b.jsx)("a",{target:"_blank",href:"https://icons8.com",children:"Icons8"})]}),(0,b.jsxs)("ul",{class:"list-inline mb-0",children:[(0,b.jsx)("li",{class:"list-inline-item",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 16 16",class:"bi bi-facebook",children:(0,b.jsx)("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"})})}),(0,b.jsx)("li",{class:"list-inline-item",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 16 16",class:"bi bi-twitter",children:(0,b.jsx)("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})})}),(0,b.jsx)("li",{class:"list-inline-item",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 16 16",class:"bi bi-instagram",children:(0,b.jsx)("path",{d:"M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"})})})]})]})]}),eh=()=>(0,b.jsxs)("div",{class:"row gy-4 gy-md-0",children:[(0,b.jsx)("div",{class:"col-md-6 text-center text-md-start d-flex d-sm-flex d-md-flex justify-content-center align-items-center justify-content-md-start align-items-md-center justify-content-xl-center",children:(0,b.jsxs)("div",{style:{maxWidth:"350px;"},children:[(0,b.jsxs)("h1",{class:"display-6 fw-bold mb-4",children:["Missing your ID last moment? \xa0",(0,b.jsx)("span",{class:"underline",children:"CanDeliver!"}),"."]}),(0,b.jsx)("p",{class:"my-4",children:"Schedule blazing fast pickups and drops of documents, keys, anything!. "}),(0,b.jsx)("p",{class:"my-4",children:"We deliver from keys to recliners.Superfast! "}),"                    "]})}),(0,b.jsx)("div",{class:"col-md-6",children:(0,b.jsx)("div",{children:(0,b.jsx)("img",{class:"rounded img-fluid w-100 fit-cover",style:{minHeight:"300px;"},src:ur})})})]}),th=e=>{let{history:r,user:n={}}=e;const[i,o]=(0,t.useState)([]),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(ja()),u=(0,t.useRef)(null),[p,f]=(0,t.useState)(!1),h=()=>f(!1);return(0,t.useEffect)((()=>{const e=async()=>{try{let e=await lr.get("".concat(dr,"/api/user/get-order/").concat(l._id),{headers:{Authorization:"Basic ".concat(Ra())}});console.log("orders api",e),o(e.data.orders),s(e.data.currentOrders)}catch(e){console.log("Error",e),o([]),s([])}};return e(),u.current=setInterval(e,1e4),()=>{clearInterval(u.current)}}),[]),(0,b.jsxs)("div",{className:"",style:{paddingTop:"5em"},children:[(0,b.jsxs)("div",{style:{padding:10,margin:5},children:[(0,b.jsx)("div",{children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{style:{margin:0,fontWeight:"bold",fontSize:"x-large"},children:["Hi ",null===l||void 0===l?void 0:l.firstName]}),(0,b.jsx)("p",{style:{fontSize:"x-large"},children:"What would you like to do today ?"})]}):(0,b.jsx)("div",{children:" No user found"})}),(0,b.jsx)(ve,{size:"lg",style:{paddingLeft:22,paddingRight:22,paddingBottom:10,paddingTop:10,margin:2,fontSize:"larger"},onClick:()=>{r.push("/user/send-package")},children:"Send package"})]}),a.length>0&&(0,b.jsx)("div",{style:{padding:20,margin:10,maxHeight:650,overflowY:"scroll"},children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{marginBottom:10,padding:5,fontSize:"larger",fontWeight:"bold"},children:"Current Orders"}),a.map(((e,t)=>{var r,n,i;return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Order Id : ",e._id," | ",e.description," -"," ",e.packageObj.packageName]})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["from ",null===(r=e.userId)||void 0===r?void 0:r.firstName," - to"," ",e.receiverId.name]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Driver - ",null===(n=e.driverId)||void 0===n?void 0:n.firstName," ",null===(i=e.driverId)||void 0===i?void 0:i.lastName]}),(0,b.jsxs)("div",{style:{fontSize:"small",fontWeight:"bold"},children:["OTP : ",e.senderOtp]})]}),(1==e.userCanCancel||void 0==e.userCanCancel)&&(0,b.jsx)(Kf,{orderId:e._id})]})})}),(0,b.jsx)("div",{children:(0,b.jsx)(tf,{fluid:!0,style:{paddingTop:"3em"},children:(0,b.jsx)(sf,{children:(0,b.jsx)(rf,{lg:"12",children:(0,b.jsx)("div",{className:"horizontal-timeline",children:(0,b.jsx)(lf,{listInLine:!0,className:"items",children:e.orderStatus.map(((e,t)=>(0,b.jsx)("li",{className:"items-list",children:(0,b.jsx)("div",{className:"px-12",children:(0,b.jsx)("div",{className:"event-date badge bg-success",children:Wf[e]})})},t)))})})})})})})]},t)}))]})}),(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)(eh,{}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsx)(Xf,{})}),(0,b.jsx)("div",{className:"col-md-6",children:(0,b.jsx)(Zf,{})})]}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)(Jf,{})]}),(0,b.jsx)("div",{style:{padding:20,margin:10,maxHeight:650,overflowY:"scroll"},children:(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"row",children:[i.map(((e,t)=>(0,b.jsx)("div",{className:"col-md-4"},t)))," "]})})}),(0,b.jsxs)(ec,{show:p,onHide:h,size:"sm",children:[(0,b.jsx)(ec.Header,{children:(0,b.jsx)(ec.Title,{children:"Rate your pacakge delivery from 1 to 5"})}),(0,b.jsx)(ec.Body,{children:(0,b.jsx)("div",{})}),(0,b.jsxs)(ec.Footer,{children:[(0,b.jsx)(ve,{variant:"secondary",onClick:h,children:"Close"}),(0,b.jsx)(ve,{variant:"primary",onClick:h,children:"Save Changes"})]})]}),(0,b.jsx)(Qf,{})]})},rh=e=>{var t,r,n;return(0,b.jsxs)("div",{children:[(0,b.jsx)(Fa,{}),(0,b.jsx)(th,{history:e.history,user:(null===e||void 0===e||null===(t=e.location)||void 0===t||null===(r=t.state)||void 0===r||null===(n=r.userData)||void 0===n?void 0:n.user)||{}})]})},nh=e=>{const{receiverErrors:t,showCountrySelect:r=!1,address:n="",selectedAddress:i,addressList:o=[],setSelectedCountry:a=(()=>{}),countries:s=[],handleAddressChange:l=(()=>{}),handleAddressSelect:c=(()=>{}),selectedCountry:u={},handleReceiverDataChange:p,showBooking:f,handleBookingView:h,parentStyle:d={},childStyle:y={}}=e;return(0,b.jsx)("div",{style:{...d},className:"shadow",children:(0,b.jsxs)(pe,{className:"shadow p-4 bg-white rounded",style:y,children:[(0,b.jsx)("div",{className:"h4 mb-2 text-center",children:(0,b.jsx)("div",{children:"Enter receiver details"})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("label",{children:"Name"})}),(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("input",{type:"text",name:"receiverName",placeholder:"Name",onChange:p,className:"form-control"}),t.receiverName&&(0,b.jsx)("span",{className:"red-text",children:t.receiverName})]}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("label",{children:"Contact"})}),(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("input",{type:"number",name:"receiverContact",placeholder:"contact",onChange:p,className:"form-control",required:!0}),t.receiverContact&&(0,b.jsx)("span",{className:"red-text",children:t.receiverContact})]}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("label",{children:"Address"})}),(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)(ga,{showCountrySelect:r,address:n,selectedAddress:i,addressList:o,setSelectedCountry:a,countries:s,handleChange:l,handleSelect:c,selectedCountry:u}),t.receiverAddress&&(0,b.jsx)("span",{className:"red-text",children:t.receiverAddress})]}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("label",{children:"Building "})}),(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("input",{type:"text",name:"receiverBuilding",placeholder:"Building/House",onChange:p,className:"form-control"}),t.receiverBuilding&&(0,b.jsx)("span",{className:"red-text",children:t.receiverBuilding})]}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)(ve,{style:{marginTop:10},variant:"primary",onClick:()=>{h(f)},children:"Continue"})})]})})},ih=e=>{const{errors:t,handlePackageSubmit:r,handlePackageDataChange:n}=e;return(0,b.jsx)("div",{style:{flexBasis:"65%"},children:(0,b.jsxs)(pe,{className:"shadow p-4 bg-white rounded",children:[(0,b.jsx)("div",{className:"h4 mb-2 text-center",children:(0,b.jsx)("div",{children:"Enter package details"})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:"Package name"})})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"text",name:"packageName",placeholder:"package name",onChange:n,className:"form-control"}),t.packageName&&(0,b.jsx)("span",{className:"red-text",children:t.packageName})]})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:"Package weight"})})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"number",min:0,placeholder:"package weight in kg",name:"packageWeight",onChange:n,className:"form-control",required:!0}),t.packageWeight&&(0,b.jsx)("span",{className:"red-text",children:t.packageWeight})]})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:"Package length"})})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"number",name:"packageLength",min:0,placeholder:"Length in inches",onChange:n,className:"form-control",required:!0}),t.packageLength&&(0,b.jsx)("span",{className:"red-text",children:t.packageLength})]})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:"Package breadth"})})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"number",min:0,name:"packageBreadth",placeholder:"Breadth inches",onChange:n,className:"form-control",required:!0}),t.packageBreadth&&(0,b.jsx)("span",{className:"red-text",children:t.packageBreadth})]})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:"Package height"})})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"number",name:"packageHeight",placeholder:"Height in inches",onChange:n,className:"form-control",min:0,required:!0}),t.packageHeight&&(0,b.jsx)("span",{className:"red-text",children:t.packageHeight})]})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)(ve,{style:{marginTop:10},variant:"primary",onClick:r,children:"Confirm"})})})]})})},oh=e=>{const{handleBookingViewForExistingUser:r,parentStyle:n,childStyle:i}=e,[o,a]=(0,t.useState)([]);(0,t.useEffect)((()=>{!async function(){try{let e=await lr.get("".concat(dr,"/api/receiver/").concat(s._id),{headers:{Authorization:"Basic ".concat(Ra())}});return a(e.data.recievers)}catch(e){console.log("error while fetching receivers",e),a([])}}()}),[]);const s=ja();return(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"shadow p-4  rounded",children:(null===o||void 0===o?void 0:o.length)>0?o.map(((e,t)=>(0,b.jsxs)(qf,{children:[(0,b.jsxs)(qf.Header,{as:"h5",children:["Name :- ",e.name]}),(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:["Address :- ",e.address.title]}),(0,b.jsx)(ve,{variant:"primary",onClick:()=>{r(e,s)},children:"Select"})]})]},t))):(0,b.jsx)("div",{children:"No existing users. Please select new"})})})};function ah(e,r,n){const i=(0,t.useRef)(void 0!==e),[o,a]=(0,t.useState)(r),s=void 0!==e,l=i.current;return i.current=s,!s&&l&&o!==r&&a(r),[s?e:o,(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,...o]=t;let s=null==n?void 0:n(i,...o);return a(i),s}),[n])]}const sh={prefix:String(Math.round(1e10*Math.random())),current:0},lh=t.createContext(sh),ch=t.createContext(!1);let uh=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),ph=new WeakMap;function fh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,t.useContext)(lh),n=(0,t.useRef)(null);if(null===n.current&&!e){var i,o;let e=null===(o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===o||null===(i=o.ReactCurrentOwner)||void 0===i?void 0:i.current;if(e){let t=ph.get(e);null==t?ph.set(e,{id:r.current,state:e.memoizedState}):e.memoizedState!==t.state&&(r.current=t.id,ph.delete(e))}n.current=++r.current}return n.current}const hh="function"===typeof t.useId?function(e){let r=t.useId(),[n]=(0,t.useState)("function"===typeof t.useSyncExternalStore?t.useSyncExternalStore(mh,dh,yh):(0,t.useContext)(ch)),i=n?"react-aria":"react-aria".concat(sh.prefix);return e||"".concat(i,"-").concat(r)}:function(e){let r=(0,t.useContext)(lh);r!==sh||uh||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=fh(!!e),i="react-aria".concat(r.prefix);return e||"".concat(i,"-").concat(n)};function dh(){return!1}function yh(){return!0}function mh(e){return()=>{}}const vh=t.createContext(null),gh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},bh=t.createContext(null),_h=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],wh=["activeKey","getControlledId","getControllerId"],xh=["as"];function Eh(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function Sh(e){let{active:r,eventKey:n,mountOnEnter:i,transition:o,unmountOnExit:a,role:s="tabpanel",onEnter:l,onEntering:c,onEntered:u,onExit:p,onExiting:f,onExited:h}=e,d=Eh(e,_h);const y=(0,t.useContext)(vh);if(!y)return[Object.assign({},d,{role:s}),{eventKey:n,isActive:r,mountOnEnter:i,transition:o,unmountOnExit:a,onEnter:l,onEntering:c,onEntered:u,onExit:p,onExiting:f,onExited:h}];const{activeKey:m,getControlledId:v,getControllerId:g}=y,b=Eh(y,wh),_=gh(n);return[Object.assign({},d,{role:s,id:v(n),"aria-labelledby":g(n)}),{eventKey:n,isActive:null==r&&null!=_?gh(m)===_:r,transition:o||b.transition,mountOnEnter:null!=i?i:b.mountOnEnter,unmountOnExit:null!=a?a:b.unmountOnExit,onEnter:l,onEntering:c,onEntered:u,onExit:p,onExiting:f,onExited:h}]}const kh=t.forwardRef(((e,t)=>{let{as:r="div"}=e,n=Eh(e,xh);const[i,{isActive:o,onEnter:a,onEntering:s,onEntered:l,onExit:c,onExiting:u,onExited:p,mountOnEnter:f,unmountOnExit:h,transition:d=wl}]=Sh(n);return(0,b.jsx)(vh.Provider,{value:null,children:(0,b.jsx)(bh.Provider,{value:null,children:(0,b.jsx)(d,{in:o,onEnter:a,onEntering:s,onEntered:l,onExit:c,onExiting:u,onExited:p,mountOnEnter:f,unmountOnExit:h,children:(0,b.jsx)(r,Object.assign({},i,{ref:t,hidden:!o,"aria-hidden":!o}))})})})}));kh.displayName="TabPanel";const Th=e=>{const{id:r,generateChildId:n,onSelect:i,activeKey:o,defaultActiveKey:a,transition:s,mountOnEnter:l,unmountOnExit:c,children:u}=e,[p,f]=ah(o,a,i),h=hh(r),d=(0,t.useMemo)((()=>n||((e,t)=>h?"".concat(h,"-").concat(t,"-").concat(e):null)),[h,n]),y=(0,t.useMemo)((()=>({onSelect:f,activeKey:p,transition:s,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:e=>d(e,"tabpane"),getControllerId:e=>d(e,"tab")})),[f,p,s,l,c,d]);return(0,b.jsx)(vh.Provider,{value:y,children:(0,b.jsx)(bh.Provider,{value:f||null,children:u})})};Th.Panel=kh;const Oh=Th;function Ah(e){return"boolean"===typeof e?e?Xs:wl:e}const Ph=e=>{let{transition:t,...r}=e;return(0,b.jsx)(Oh,{...r,transition:Ah(t)})};Ph.displayName="TabContainer";const Ch=Ph,Nh=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"tab-content"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Nh.displayName="TabContent";const Rh=Nh,jh=t.forwardRef(((e,t)=>{let{bsPrefix:r,transition:n,...i}=e;const[{className:o,as:a="div",...s},{isActive:l,onEnter:c,onEntering:u,onEntered:p,onExit:f,onExiting:h,onExited:d,mountOnEnter:y,unmountOnExit:m,transition:v=Xs}]=Sh({...i,transition:Ah(n)}),g=M(r,"tab-pane");return(0,b.jsx)(vh.Provider,{value:null,children:(0,b.jsx)(bh.Provider,{value:null,children:(0,b.jsx)(v,{in:l,onEnter:c,onEntering:u,onEntered:p,onExit:f,onExiting:h,onExited:d,mountOnEnter:y,unmountOnExit:m,children:(0,b.jsx)(a,{...s,ref:t,className:x()(o,g,l&&"active")})})})})}));jh.displayName="TabPane";const Mh=jh,Ih={eventKey:S().oneOfType([S().string,S().number]),title:S().node.isRequired,disabled:S().bool,tabClassName:S().string,tabAttrs:S().object},Dh=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Dh.propTypes=Ih;const Lh=Object.assign(Dh,{Container:Ch,Content:Rh,Pane:Mh});__webpack_require__(3573);const Fh=t.createContext(null);Fh.displayName="NavContext";const Bh=Fh,zh=["as","active","eventKey"];function $h(e){let{key:r,onClick:n,active:i,id:o,role:a,disabled:s}=e;const l=(0,t.useContext)(bh),c=(0,t.useContext)(Bh),u=(0,t.useContext)(vh);let p=i;const f={role:a};if(c){a||"tablist"!==c.role||(f.role="tab");const e=c.getControllerId(null!=r?r:null),t=c.getControlledId(null!=r?r:null);f[yl("event-key")]=r,f.id=e||o,p=null==i&&null!=r?c.activeKey===r:i,!p&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(f["aria-controls"]=t)}return"tab"===f.role&&(f["aria-selected"]=p,p||(f.tabIndex=-1),s&&(f.tabIndex=-1,f["aria-disabled"]=!0)),f.onClick=ns((e=>{s||(null==n||n(e),null!=r&&l&&!e.isPropagationStopped()&&l(r,e))})),[f,{isActive:p}]}const Uh=t.forwardRef(((e,t)=>{let{as:r=ye,active:n,eventKey:i}=e,o=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,zh);const[a,s]=$h(Object.assign({key:gh(i,o.href),active:n},o));return a[yl("active")]=s.isActive,(0,b.jsx)(r,Object.assign({},o,a,{ref:t}))}));Uh.displayName="NavItem";const Hh=Uh,Vh=["as","onSelect","activeKey","role","onKeyDown"];const Gh=()=>{},qh=yl("event-key"),Wh=t.forwardRef(((e,r)=>{let{as:n="div",onSelect:i,activeKey:o,role:a,onKeyDown:s}=e,l=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,Vh);const c=function(){const[,e]=(0,t.useReducer)((e=>!e),!1);return e}(),u=(0,t.useRef)(!1),p=(0,t.useContext)(bh),f=(0,t.useContext)(vh);let h,d;f&&(a=a||"tablist",o=f.activeKey,h=f.getControlledId,d=f.getControllerId);const y=(0,t.useRef)(null),m=e=>{const t=y.current;if(!t)return null;const r=Cl(t,"[".concat(qh,"]:not([aria-disabled=true])")),n=t.querySelector("[aria-selected=true]");if(!n||n!==document.activeElement)return null;const i=r.indexOf(n);if(-1===i)return null;let o=i+e;return o>=r.length&&(o=0),o<0&&(o=r.length-1),r[o]},v=(e,t)=>{null!=e&&(null==i||i(e,t),null==p||p(e,t))};(0,t.useEffect)((()=>{if(y.current&&u.current){const e=y.current.querySelector("[".concat(qh,"][aria-selected=true]"));null==e||e.focus()}u.current=!1}));const g=Gs(r,y);return(0,b.jsx)(bh.Provider,{value:v,children:(0,b.jsx)(Bh.Provider,{value:{role:a,activeKey:gh(o),getControlledId:h||Gh,getControllerId:d||Gh},children:(0,b.jsx)(n,Object.assign({},l,{onKeyDown:e=>{if(null==s||s(e),!f)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}var r;t&&(e.preventDefault(),v(t.dataset[(r="EventKey","".concat("rrUi").concat(r))]||null,e),u.current=!0,c())},ref:g,role:a}))})})}));Wh.displayName="Nav";const Yh=Object.assign(Wh,{Item:Hh}),Kh=t.createContext(null);Kh.displayName="NavbarContext";const Xh=Kh,Zh=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"nav-item"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));Zh.displayName="NavItem";const Jh=Zh,Qh=t.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,as:i=hs,active:o,eventKey:a,disabled:s=!1,...l}=e;r=M(r,"nav-link");const[c,u]=$h({key:gh(a,l.href),active:o,disabled:s,...l});return(0,b.jsx)(i,{...l,...c,ref:t,disabled:s,className:x()(n,r,s&&"disabled",u.isActive&&"active")})}));Qh.displayName="NavLink";const ed=Qh,td=t.forwardRef(((e,r)=>{const{as:n="div",bsPrefix:i,variant:o,fill:a=!1,justify:s=!1,navbar:l,navbarScroll:c,className:u,activeKey:p,...f}=Ja(e,{activeKey:"onSelect"}),h=M(i,"nav");let d,y,m=!1;const v=(0,t.useContext)(Xh),g=(0,t.useContext)(Af);return v?(d=v.bsPrefix,m=null==l||l):g&&({cardHeaderBsPrefix:y}=g),(0,b.jsx)(Yh,{as:n,ref:r,activeKey:p,className:x()(u,{[h]:!m,["".concat(d,"-nav")]:m,["".concat(d,"-nav-scroll")]:m&&c,["".concat(y,"-").concat(o)]:!!y,["".concat(h,"-").concat(o)]:!!o,["".concat(h,"-fill")]:a,["".concat(h,"-justified")]:s}),...f})}));td.displayName="Nav";const rd=Object.assign(td,{Item:Jh,Link:ed});function nd(e){let r;return function(e,r){let n=0;t.Children.forEach(e,(e=>{t.isValidElement(e)&&r(e,n++)}))}(e,(e=>{null==r&&(r=e.props.eventKey)})),r}function id(e){const{title:t,eventKey:r,disabled:n,tabClassName:i,tabAttrs:o,id:a}=e.props;return null==t?null:(0,b.jsx)(Jh,{as:"li",role:"presentation",children:(0,b.jsx)(ed,{as:"button",type:"button",eventKey:r,disabled:n,id:a,className:i,...o,children:t})})}const od=e=>{const{id:t,onSelect:r,transition:n,mountOnEnter:i=!1,unmountOnExit:o=!1,variant:a="tabs",children:s,activeKey:l=nd(s),...c}=Ja(e,{activeKey:"onSelect"});return(0,b.jsxs)(Oh,{id:t,activeKey:l,onSelect:r,transition:Ah(n),mountOnEnter:i,unmountOnExit:o,children:[(0,b.jsx)(rd,{...c,role:"tablist",as:"ul",variant:a,children:B(s,id)}),(0,b.jsx)(Rh,{children:B(s,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,b.jsx)(Mh,{...t})}))})]})};od.displayName="Tabs";const ad=od;var sd=__webpack_require__(5892);const ld=e=>{const r=(0,t.useRef)(null),n=(0,t.useRef)(null),i=(0,t.useRef)(null),{apikey:o,selectedAddress:a,senderAddress:s,transportMode:l}=e;let c=ja();function u(e){const t='<svg width="20" height="20" version="1.1" xmlns="http://www.w3.org/2000/svg">\n                    <g id="marker">\n                    <circle cx="10" cy="10" r="7" fill="'.concat(e,'" stroke="').concat(e,'" stroke-width="4" />\n                    </g></svg>');return new sd.Z.map.Icon(t,{anchor:{x:10,y:10}})}return null==c&&(c={address:s},console.log("current user",c.address.position)),(0,t.useEffect)((()=>{const e={lat:c.address.position.lat,lng:c.address.position.lng},t={lat:a.position.lat,lng:a.position.lng};if(!n.current){i.current=new sd.Z.service.Platform({apikey:o});const a=i.current.getRasterTileService({queryParams:{style:"explore.day",size:512}}),s=new sd.Z.service.rasterTile.Provider(a),c=new sd.Z.map.layer.TileLayer(s),p=new sd.Z.Map(r.current,c,{pixelRatio:window.devicePixelRatio,center:{lat:e.lat,lng:e.lng},zoom:14});new sd.Z.mapevents.Behavior(new sd.Z.mapevents.MapEvents(p));n.current=p,function(e,t,r,n,i){const o=e.getRoutingService(null,8);console.log("modeOfTransport",i);const a={origin:"".concat(r.lat,",").concat(r.lng),destination:"".concat(n.lat,",").concat(n.lng),transportMode:i||"car",return:"polyline"};o.calculateRoute(a,(function(e){const i=e.routes[0].sections,o=[];i.forEach((e=>{o.push(sd.Z.geo.LineString.fromFlexiblePolyline(e.polyline))}));const a=new sd.Z.geo.MultiLineString(o),s=(a.getBoundingBox(),new sd.Z.map.Polyline(a,{style:{lineWidth:5}}));t.removeObjects(t.getObjects()),t.addObject(s),t.addObjects([new sd.Z.map.Marker(r,{icon:u("red")}),new sd.Z.map.Marker(n,{icon:u("green")})])}),console.error)}(i.current,n.current,e,t,l)}}),[o]),(0,b.jsx)("div",{style:{width:"100%",height:"400px",maxHeight:"400px",overflow:"scroll"},ref:r})},cd=e=>{var t,r,n,i,o,a,s,l;let{userData:c={},receiverData:u={},submitBooking:p=(()=>{}),submitBookingCommunity:f=(()=>{}),selectedVehicle:h,distanceObj:d,selectedAddress:y,bookingLoader:m,transportMode:v,communityBookingLoader:g}=e;const _=Math.ceil((null===d||void 0===d||null===(t=d.routes[0])||void 0===t||null===(r=t.sections[0])||void 0===r||null===(n=r.summary)||void 0===n?void 0:n.duration)/60),w=Math.round((null===d||void 0===d||null===(i=d.routes[0])||void 0===i||null===(o=i.sections[0])||void 0===o||null===(a=o.summary)||void 0===a?void 0:a.length)/1e3*100)/100,x=JSON.parse(localStorage.getItem("rideRates")),E=Math.round(x[h]*w*100)/100;return(0,b.jsx)("div",{style:{maxHeight:"90vh",overflowY:"scroll"},children:(0,b.jsxs)("div",{className:"shadow p-4 bg-white rounded",style:{margin:10},children:[(0,b.jsx)("div",{style:{fontSize:"x-large",fontWeight:"bold"},children:"Delivery Booking Details"}),(0,b.jsx)("div",{style:{fontSize:"larger",fontWeight:500,margin:10,padding:10},children:"Delivery Type"}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",alignItems:"baseline",padding:10,margin:10,border:"2px solid lightgray",borderRadius:10},children:gr.map(((e,t)=>(0,b.jsx)("div",{className:"vehicle-card-style",style:e.name===h?{border:"2px solid red"}:{},children:(0,b.jsx)("img",{className:"car",src:e.image,alt:e.name,height:60})},t)))}),(0,b.jsxs)("div",{style:{fontSize:"large",fontWeight:500,padding:10},children:[" ","Summary"," "]}),(0,b.jsx)("div",{style:{padding:10,margin:10,border:"2px solid lightgray",borderRadius:10},children:(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[" ",(0,b.jsx)("div",{children:"Sender address - "}),(0,b.jsx)("div",{children:null===c||void 0===c||null===(s=c.address)||void 0===s?void 0:s.title})," "]})}),(0,b.jsx)("div",{style:{padding:10,margin:10,border:"2px solid lightgray",borderRadius:10},children:(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,b.jsxs)("div",{children:["Receiver details - ",null===u||void 0===u?void 0:u.receiverName," "]}),(0,b.jsxs)("div",{children:["\xa0 | ",null===y||void 0===y||null===(l=y.address)||void 0===l?void 0:l.label]})]})}),(0,b.jsxs)("div",{style:{padding:10,margin:10,border:"2px solid lightgray",borderRadius:10},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,b.jsxs)("div",{children:["Estimated time : ",_,"(min) | \xa0 "]}),(0,b.jsxs)("div",{children:["Distance : ",w,"(km) | \xa0"]}),(0,b.jsxs)("div",{children:["Estimated Cost : ",E,"(CAD)"]})]}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:(0,b.jsx)("div",{children:(0,b.jsxs)("b",{children:["Community Ride  Cost : ",Math.round(.8*E*100)/100,"(CAD)"]})})})]}),(0,b.jsx)("div",{id:"map",children:(0,b.jsx)(ld,{apikey:yr,selectedAddress:y,transportMode:v})}),(0,b.jsxs)("div",{style:{margin:5,padding:10},children:[(0,b.jsx)(ve,{variant:"success",onClick:p,disabled:m,children:m?"...Finding Delivery Partner":"Find Delivery Partner"})," \xa0\xa0",(0,b.jsx)(ve,{variant:"success",onClick:f,disabled:g,children:g?"...Finding rides":"Find Community Rides"})]})]})})},ud=e=>{const{senderDetails:t,receiverDetails:r,order:n,history:i,setShowBooking:o,selectedAddress:a}=e;return(0,b.jsxs)("div",{style:{background:"white"},children:[(0,b.jsxs)("div",{children:[" ",(0,b.jsx)("h3",{children:" Summary "})]}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsx)("div",{style:{fontSize:"small"},children:"Sender Details"})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Name - ",t.firstName," ",t.lastName]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Address - ",t.address.title]})]})]})}),(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsx)("div",{style:{fontSize:"small"},children:"Receiver Details"})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Name - ",r.receiverName]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Address - ",a.title]})]})]})}),(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsx)("div",{style:{fontSize:"small"},children:"Bill Details"})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Description - ",n.description]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Amount - ",n.orderPrice]})]})]})})]}),(0,b.jsx)(ve,{onClick:async()=>{i.push("/user/home")},children:"Go home"})]})},pd=t.forwardRef(((e,t)=>{let{bsPrefix:r,active:n,disabled:i,eventKey:o,className:a,variant:s,action:l,as:c,...u}=e;r=M(r,"list-group-item");const[p,f]=$h({key:gh(o,u.href),active:n,...u}),h=ns((e=>{if(i)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));i&&void 0===u.tabIndex&&(u.tabIndex=-1,u["aria-disabled"]=!0);const d=c||(l?u.href?"a":"button":"div");return(0,b.jsx)(d,{ref:t,...u,...p,onClick:h,className:x()(a,r,f.isActive&&"active",i&&"disabled",s&&"".concat(r,"-").concat(s),l&&"".concat(r,"-action"))})}));pd.displayName="ListGroupItem";const fd=pd,hd=t.forwardRef(((e,t)=>{const{className:r,bsPrefix:n,variant:i,horizontal:o,numbered:a,as:s="div",...l}=Ja(e,{activeKey:"onSelect"}),c=M(n,"list-group");let u;return o&&(u=!0===o?"horizontal":"horizontal-".concat(o)),(0,b.jsx)(Yh,{ref:t,...l,as:s,className:x()(r,c,i&&"".concat(c,"-").concat(i),u&&"".concat(c,"-").concat(u),a&&"".concat(c,"-numbered"))})}));hd.displayName="ListGroup";const dd=Object.assign(hd,{Item:fd}),yd=e=>{let{orderId:t="",communityRideList:r=[],history:n,goBackFromCommunityRides:i=(()=>{})}=e;function o(e,t){return new Date(e.getTime()+6e4*t).toLocaleTimeString()}return(0,b.jsxs)("div",{style:{flexBasis:"65%",background:"white",paddingTop:"5em"},children:[(0,b.jsx)("div",{style:{fontSize:"larger",fontWeight:"bold"},children:"Available Community Rides"}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:r.map(((e,r)=>{var i,a,s,l,c,u,p,f,h,d,y,m,v,g,_,w,x,E,S,k,T,O,A,P;return(0,b.jsxs)(qf,{style:{width:"18rem",padding:5,margin:5},children:[(0,b.jsxs)(qf.Header,{children:["Ride Details - ",(new Date).toLocaleDateString()]}),(0,b.jsxs)(dd,{variant:"flush",children:[(0,b.jsxs)(dd.Item,{children:["Driver - ",e.driverId.firstName]}),(0,b.jsxs)(dd.Item,{children:["Source - ",e.source.title," -"," ",new Date(e.rideStartDateTime).toLocaleTimeString()]}),(0,b.jsxs)(dd.Item,{children:["Way Point - ",e.point.title," - "," "," ",o(new Date(e.rideStartDateTime),Math.round((null===(i=e.metaData.journey)||void 0===i||null===(a=i.routes[0])||void 0===a||null===(s=a.sections[0])||void 0===s||null===(l=s.summary)||void 0===l?void 0:l.duration)/60)).toLocaleString(),"| Distance - ",Math.round((null===(c=e.metaData.journey)||void 0===c||null===(u=c.routes[0])||void 0===u||null===(p=u.sections[0])||void 0===p||null===(f=p.summary)||void 0===f?void 0:f.length)/1e3)," KM"]}),(0,b.jsxs)(dd.Item,{children:["Destination - ",e.destination.title," - "," "," ",o(new Date(e.rideStartDateTime),Math.round((null===(h=e.metaData.journey)||void 0===h||null===(d=h.routes[0])||void 0===d||null===(y=d.sections[0])||void 0===y||null===(m=y.summary)||void 0===m?void 0:m.duration)/60)+Math.round((null===(v=e.metaData.journey)||void 0===v||null===(g=v.routes[0])||void 0===g||null===(_=g.sections[1])||void 0===_||null===(w=_.summary)||void 0===w?void 0:w.duration)/60)+30).toLocaleString()," | Distance - ",Math.round((null===(x=e.metaData.journey)||void 0===x||null===(E=x.routes[0])||void 0===E||null===(S=E.sections[0])||void 0===S||null===(k=S.summary)||void 0===k?void 0:k.length)/1e3)+Math.round((null===(T=e.metaData.journey)||void 0===T||null===(O=T.routes[0])||void 0===O||null===(A=O.sections[1])||void 0===A||null===(P=A.summary)||void 0===P?void 0:P.length)/1e3)," KM"]}),(0,b.jsx)(dd.Item,{children:(0,b.jsx)(ve,{variant:"primary",onClick:()=>(async(e,r)=>{try{let i=await lr.post("".concat(dr,"/api/community/user/accept-community-rider/"),{driverId:e,communityOrderId:r,orderId:t}).then((e=>e.data)).then((e=>(console.log("User accept response",e),e)));n.push("/user/home"),console.log("accept response",i)}catch(i){console.log("error",i)}})(e.driverId._id,e._id),children:"Book ride"})})]})]},r)}))}),(0,b.jsx)("br",{}),(0,b.jsx)(ve,{variant:"primary",onClick:i,children:"Back"})]})},md=e=>{let{history:r}=e;const[n,i]=(0,t.useState)({packageName:"",packageWeight:"",packageHeight:"",packageLength:"",packageBreadth:""}),[o,a]=(0,t.useState)({receiverName:"",receiverContact:"",receiverPincode:"",receiverBuilding:""}),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(ja()),[p,f]=(0,t.useState)(!1),[h,d]=(0,t.useState)(!1),[y,m]=(0,t.useState)(!1),[v,g]=(0,t.useState)({}),[_,w]=(0,t.useState)({}),[x,E]=(0,t.useState)(""),[S,k]=(0,t.useState)({}),[T,O]=(0,t.useState)([]),[A,P]=(0,t.useState)(""),[C,N]=(0,t.useState)({}),[R,j]=(0,t.useState)(""),[M,I]=(0,t.useState)({}),[D,L]=(0,t.useState)(!1),[F,B]=(0,t.useState)(!1),[z,$]=(0,t.useState)(!1),[U,H]=(0,t.useState)([]),[V,G]=(0,t.useState)(null),q=(e,t)=>new Promise(((r,n)=>{setTimeout((async()=>{await lr.get("".concat(dr,"/api/booking/user/check-orders-status"),{headers:{Authorization:"Basic ".concat(Ra())},params:{driverId:e,orderId:t}}).then((e=>e.data)).then((e=>{console.log("CHECK ORDER STATUS DRIVER DATA",e),j(e.status[-1]),r(e)}))}),6e4)})),W=e=>[n.packageLength,n.packageBreadth,n.packageHeight].every(((t,r)=>t<=_r[e][r])),Y=async(e,t)=>{var r,i,o,a,s,l,c,u;let p={},f="",h=0,d={};try{d=await lr.get(vr,{params:{transportMode:"car",origin:"".concat(e.address.position.lat,",").concat(e.address.position.lng),destination:"".concat(t.position.lat,",").concat(t.position.lng)}}).then((e=>e.data))}catch(v){console.log("error",v),alert("Something went wrong please try again later")}h=(null===(r=d)||void 0===r||null===(i=r.routes[0])||void 0===i||null===(o=i.sections[0])||void 0===o||null===(a=o.summary)||void 0===a?void 0:a.length)||10,f=n.packageWeight<=5&&W("walking")&&h<=2e3?"pedestrian":n.packageWeight<=1&&W("bicycle")||n.packageWeight<=1&&W("electric_moped")?"scooter":n.packageWeight<=150&&W("car")?"car":"truck";let y={transportMode:f,origin:"".concat(e.address.position.lat,",").concat(e.address.position.lng),destination:"".concat(t.position.lat,",").concat(t.position.lng)};"scooter"==f&&(y["avoid[features]"]="controlledAccessHighway");try{p=await lr.get(vr,{params:y}).then((e=>e.data))}catch(v){console.log("error",v)}N(p);let m=(null===(s=p)||void 0===s||null===(l=s.routes[0])||void 0===l||null===(c=l.sections[0])||void 0===c||null===(u=c.summary)||void 0===u?void 0:u.length)||10;return G(f),n.packageWeight<=5&&W("walking")&&m<=2e3?"walking":n.packageWeight<=1&&W("bicycle")||n.packageWeight<=1&&W("bicycle")?"bicycle":n.packageWeight<=150&&W("car")?"delivery_car":"pickup_truck"},K=(0,t.useCallback)((async e=>{let t=[];var r;(E(e),e)?(_[x]="",w(v),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),O((null===(r=t)||void 0===r?void 0:r.items)||[])):O([])}),[x,S,T]);return console.log("communityBookingResponse",U),(0,b.jsxs)("div",{children:[(0,b.jsx)(Fa,{}),(0,b.jsxs)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",paddingTop:"5em"},children:[p&&(0,b.jsx)("div",{style:{flexBasis:"65%"},children:(0,b.jsxs)(ad,{defaultActiveKey:"existing",id:"justify-tab-example",variant:"pills",justify:!0,style:{background:"white",border:"3px solid lightgray"},children:[(0,b.jsx)(Lh,{eventKey:"new",title:"New",style:{maxHeight:"80vh",overflowY:"scroll"},children:(0,b.jsx)(nh,{receiverErrors:_,handleAddressSelect:(e,t)=>{k(t),O([])},address:x,setAddress:E,selectedAddress:S,setSelectedAddress:k,addressList:T,setAddressList:O,handleAddressChange:K,setReceiverData:a,handleReceiverDataChange:e=>{const{name:t,value:r}=e.target;a((e=>({...e,[t]:r}))),o[t]&&(v[t]="",w(v))},showBooking:h,handleBookingView:async e=>{let{isValid:t,newErrors:r}=((e,t)=>{let r=!0;const n={};return e.receiverName.trim()||(n.receiverName="Receiver name is required",r=!1),e.receiverBuilding.trim()||(n.receiverBuilding="Receiver building is required",r=!1),t.trim()||(n.receiverAddress="Receiver address is required",r=!1),null!==e&&void 0!==e&&e.receiverContact.trim()&&$a.test(e.receiverContact)||(n.receiverContact="Enter a valid 10-digit phone number",r=!1),{isValid:r,newErrors:n}})(o,x);if(!t)return void w(r);const n=ja();try{let t=await lr.post("".concat(dr,"/api/receiver/"),{name:o.receiverName,contact:o.receiverContact,pincode:o.receiverPincode,userId:n._id,building:o.receiverBuilding,address:S},{headers:{Authorization:"Basic ".concat(Ra())}});if(201===t.status){l(t.data.doc._id);let r=await Y(n,S);P(r),f(!p),d(!e)}}catch(i){alert("Something went wrong ".concat(i))}}})}),(0,b.jsx)(Lh,{eventKey:"existing",title:"Existing",style:{maxHeight:"80vh",overflowY:"scroll",borderLeft:"2px solid lightgray"},children:(0,b.jsx)(oh,{handleBookingViewForExistingUser:async(e,t)=>{l(e._id);let r=await Y(t,e.address);a({...o,receiverName:e.name,receiverContact:e.contact,receiverPincode:e.pincode,receiverBuilding:e.building}),k({...S,...e.address}),P(r),f(!p),d(!h)}})})]})}),h&&(0,b.jsx)(cd,{userData:c,receiverData:o,submitBooking:async()=>{var e,t,r,i,o,a;B(!0);const l=(null===C||void 0===C||null===(e=C.routes[0])||void 0===e||null===(t=e.sections[0])||void 0===t||null===(r=t.summary)||void 0===r?void 0:r.length)/1e3,u=Math.floor((null===C||void 0===C||null===(i=C.routes[0])||void 0===i||null===(o=i.sections[0])||void 0===o||null===(a=o.summary)||void 0===a?void 0:a.duration)/60),p=JSON.parse(localStorage.getItem("rideRates")),h=Math.round(p[A]*l*100)/100;console.log("selectedVehicle",A);const y={description:"Delivery package",orderPrice:h,packageObj:n,orderStatus:wr,receiverId:s,userId:c._id,vehicleType:A,metaData:{distance:l,estimatedTime:u}};try{let e=await lr.post("".concat(dr,"/api/booking/create/"),{...y},{headers:{Authorization:"Basic ".concat(Ra())}}),t=!1;if(201===e.status){let r=e.data.drivers;for(let n=0;n<r.length;n++){await lr.post("".concat(dr,"/api/booking/add/driver-to-order"),{orderId:e.data.orderId,driverId:r[n]._id,requestStatus:"BOOKING_REQUESTED"});let i=await q(r[n]._id,e.data.orderId);if(console.log("response from status api",i),"ALREADY_ASSIGNED_TO_DRIVER"===i.status){t=!0,I(i.order),d(!1),f(!1);break}console.log("Driver not assigned yet")}if(console.log("assignedTodriverFlag",t),t)console.log("Driver assigned"),B(!1),L(!0);else{console.log("Cancel booking",e);await lr.post("".concat(dr,"/api/booking/cancel/"),{orderId:e.data.orderId});B(!1),alert("No neary by driver found")}}else console.log("ELSE PART"),alert("Failed to create booking"),B(!1)}catch(m){alert("Something went wrong ".concat(m)),B(!1)}},submitBookingCommunity:async()=>{var e,t,r,i,o,a;$(!0);const l=Math.round((null===C||void 0===C||null===(e=C.routes[0])||void 0===e||null===(t=e.sections[0])||void 0===t||null===(r=t.summary)||void 0===r?void 0:r.length)/1e3*100)/100,u=Math.ceil((null===C||void 0===C||null===(i=C.routes[0])||void 0===i||null===(o=i.sections[0])||void 0===o||null===(a=o.summary)||void 0===a?void 0:a.duration)/60),p=JSON.parse(localStorage.getItem("rideRates")),h=Math.round(p[A]*l*100)/100;console.log("selectedVehicle",A);const y={description:"Delivery package",orderPrice:h,packageObj:n,orderStatus:wr,receiverId:s,userId:c._id,vehicleType:A,isCommunityRide:!0,communityRide:"65fabfcb8b622854d2fd92cf",metaData:{distance:l,estimatedTime:u,communityOrderPrice:Math.round(.8*h*100)/100}};try{var v;let e=await lr.post("".concat(dr,"/api/community/create/"),{...y},{headers:{Authorization:"Basic ".concat(Ra())}});if(console.log("community",e),!((null===(v=e.data.rides)||void 0===v?void 0:v.length)>0))return alert("Community rides are not available"),void $(!1);H(e.data),m(!0),L(!1),d(!1),f(!1)}catch(g){console.log("error",g),$(!1)}},selectedVehicle:A,distanceObj:C,selectedAddress:S,bookingLoader:F,transportMode:V,communityBookingLoader:z}),!D&&!h&&!p&&!y&&(0,b.jsx)(ih,{errors:v,handlePackageSubmit:()=>{let{isValid:e,newErrors:t}=(e=>{let t=!0;const r={};return e.packageName.trim()||(r.packageName="Package name is required",t=!1),e.packageWeight&&0!==e.packageWeight||(r.packageWeight="Invalid package",t=!1),e.packageHeight&&0!==e.packageHeight||(r.packageHeight="Invalid height",t=!1),e.packageBreadth&&0!==e.packageBreadth||(r.packageBreadth="Invalid breadth",t=!1),e.packageLength&&0!==e.packageLength||(r.packageLength="Invalid length",t=!1),{isValid:t,newErrors:r}})(n);e?f(!0):g(t)},handlePackageDataChange:e=>{const{name:t,value:r}=e.target;i((e=>({...e,[t]:r}))),n[t]&&(v[t]="",g(v))}}),y&&(0,b.jsx)(yd,{orderId:U.orderId,communityRideList:U.rides,goBackFromCommunityRides:()=>{m(!1),L(!1),d(!0),f(!1),$(!1)},history:r}),D&&(0,b.jsx)(ud,{senderDetails:c,receiverDetails:o,order:M,history:r,selectedAddress:S})]})]})},vd=e=>{const[r,n]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[a,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1),[u,p]=(0,t.useState)(null),[f,h]=(0,t.useState)(!1),[d,y]=(0,t.useState)(!1),[m,v]=(0,t.useState)("user");const g=e=>{console.log("event data",e.target.value),v(e.target.value)};return(0,b.jsxs)("div",{children:[" ",(0,b.jsx)(Fa,{}),(0,b.jsxs)("form",{className:"forgot-password-form",style:{paddingTop:"8em"},onSubmit:async e=>{e.preventDefault(),c(!0),p(null);try{try{let e=await lr.post("".concat(dr,"/api/user/update-password/otp"),{email:r,userType:m});200===e.status&&(console.log("response.data",e.data),p(e.data.message))}catch(u){console.log("Error",u),h(!0)}y(!0)}catch(u){console.error("Error:",u),p("An error occurred. Please try again later.")}finally{c(!1)}},children:[(0,b.jsx)("h3",{children:"Forgot Password"}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)(pe.Check,{inline:!0,label:"User",name:"user",type:"radio",value:"user",id:"inline-radio-user",onChange:g,checked:"user"===m}),(0,b.jsx)(pe.Check,{inline:!0,label:"Driver",name:"driver",type:"radio",value:"driver",id:"inline-radio-driver",onChange:g,checked:"driver"===m})]},"inline-radio"),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,b.jsx)("input",{type:"email",id:"email",value:r,onChange:e=>n(e.target.value),required:!0,className:"form-control"})]}),d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"otp",children:"Enter OTP"}),(0,b.jsx)("input",{type:"text",id:"otp",value:i,onChange:e=>{o(e.target.value)},maxLength:6,required:!0,className:"form-control"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"newPassword",children:"New Password"}),(0,b.jsx)("input",{type:f?"text":"password",id:"newPassword",value:a,onChange:e=>{s(e.target.value)},minLength:5,required:!0,className:"form-control"}),(0,b.jsx)("i",{className:"fas fa-eye".concat(f?"-slash":""),onClick:()=>{h(!f)}})]}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary shadow",onClick:async()=>{try{c(!0),p(null);let e=await lr.post("".concat(dr,"/api/user/update-password/verify-otp"),{email:r,otp:i,newPassword:a,userType:m});200===e.status&&p(e.data.message)}catch(u){console.log("Error",u),p(u.response.data.message),h(!0)}finally{c(!1)}},disabled:l||!d,children:l?"Upding password...":"Update password"})]}),u&&(0,b.jsx)("div",{className:"error",children:u}),!d&&(0,b.jsx)("button",{className:"btn btn-primary shadow",type:"submit",disabled:l,children:l?"Sending OTP...":"Request OTP"})]}),(0,b.jsx)("div",{children:d&&(0,b.jsx)("button",{className:"btn btn-primary shadow",onClick:function(){window.location.reload(!1)},children:"Click here to resend otp"})})]})},gd=e=>{let{component:t,...r}=e;return(0,b.jsx)(i.Route,{...r,render:e=>localStorage.getItem("userToken")?(0,b.jsx)(t,{...e}):(0,b.jsx)(i.Redirect,{to:{pathname:"/user/login"}})})},bd=e=>{let{component:t,...r}=e;return(0,b.jsx)(i.Route,{...r,render:e=>localStorage.getItem("driverToken")?(0,b.jsx)(t,{...e}):(0,b.jsx)(i.Redirect,{to:{pathname:"/user/login"}})})};var _d=__webpack_require__(2025);const wd=e=>{let{history:t}=e;console.log("History in logout component",t);let r=Ra();return r?(0,b.jsx)(ve,{onClick:()=>{console.log("Logging out"),Ma(),r=!1},children:"Logout"}):(0,b.jsx)(_d.l_,{to:"/user/login"})},xd=1e3;function Ed(e,t,r){const n=(e-t)/(r-t)*100;return Math.round(n*xd)/xd}function Sd(e,t){let{min:r,now:n,max:i,label:o,visuallyHidden:a,striped:s,animated:l,className:c,style:u,variant:p,bsPrefix:f,...h}=e;return(0,b.jsx)("div",{ref:t,...h,role:"progressbar",className:x()(c,"".concat(f,"-bar"),{["bg-".concat(p)]:p,["".concat(f,"-bar-animated")]:l,["".concat(f,"-bar-striped")]:l||s}),style:{width:"".concat(Ed(n,r,i),"%"),...u},"aria-valuenow":n,"aria-valuemin":r,"aria-valuemax":i,children:a?(0,b.jsx)("span",{className:"visually-hidden",children:o}):o})}const kd=t.forwardRef(((e,r)=>{let{isChild:n=!1,...i}=e;const o={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...i};if(o.bsPrefix=M(o.bsPrefix,"progress"),n)return Sd(o,r);const{min:a,now:s,max:l,label:c,visuallyHidden:u,striped:p,animated:f,bsPrefix:h,variant:d,className:y,children:m,...v}=o;return(0,b.jsx)("div",{ref:r,...v,className:x()(y,h),children:m?B(m,(e=>(0,t.cloneElement)(e,{isChild:!0}))):Sd({min:a,now:s,max:l,label:c,visuallyHidden:u,striped:p,animated:f,bsPrefix:h,variant:d},r)})}));kd.displayName="ProgressBar";const Td=kd,Od=e=>{const{senderDetails:r,receiverDetails:n,order:i,history:o,setShowBooking:a,setBookingCard:s,showSubmitBtn:l,setBookingObj:c=(()=>{})}=e,[u,p]=(0,t.useState)(""),[f,h]=(0,t.useState)(i.isVerified);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{children:[" ",(0,b.jsx)("h3",{children:" Ride details "})]}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:[(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsx)("div",{style:{fontSize:"small"},children:"Sender Details"})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Name - ",r.firstName," ",r.lastName]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Address - ",r.address.title]})]})]})}),(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsx)("div",{style:{fontSize:"small"},children:"Receiver Details"})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Name - ",n.name]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Address - ",n.address.title]})]})]})}),(0,b.jsx)(qf,{bg:"primary",text:"white",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsxs)(qf.Title,{children:[" ",(0,b.jsx)("div",{style:{fontSize:"small"},children:"Bill Details"})]}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Description - ",i.description]}),(0,b.jsxs)("div",{style:{fontSize:"small"},children:["Amount - ",i.isCommunityRide?i.metaData.communityOrderPrice:i.orderPrice," CAD"]})]})]})})]}),f?(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",border:"1px solid lightgray",padding:10,margin:10},children:(0,b.jsx)("div",{style:{marginLeft:5},children:(0,b.jsx)(ve,{onClick:async()=>{await lr.post("".concat(dr,"/api/booking/driver/complete-booking/"),{orderId:i._id}).then((e=>(a(!1),s(!1),c([]),e.data))).catch((e=>{console.log("Something went wrong while completing ride"),alert("Something went wrong ".concat(e))}))},children:"Complete Ride"})})}):(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:10,margin:10},children:[(0,b.jsx)("div",{className:"mb-2",style:{paddingTop:5,paddingRight:5,margin:2},children:(0,b.jsx)("div",{children:(0,b.jsx)("label",{children:"Enter OTP"})})}),(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)("div",{children:(0,b.jsx)("input",{type:"text",name:"otp",placeholder:"enter otp",className:"form-control",onChange:e=>{console.log("e",e),p(e.target.value),console.log("otp",u)}})})}),(0,b.jsx)("div",{style:{marginLeft:5},children:(0,b.jsx)(ve,{onClick:async()=>{await lr.post("".concat(dr,"/api/booking/driver/accept/package/"),{orderId:i._id,driverOtp:u}).then((e=>{e.data.verified?(console.log("res",e),alert("!!! OTP verified !!!"),h(e.data.order.isVerified)):(h(!1),alert("Invalid OTP, Please add correct OTP"))})).catch((e=>{console.log("Error in OTP component",e),alert("Invalid OTP")}))},children:"Accept package"})})]})]})},Ad=e=>{var r;const[n,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)({}),[s,l]=(0,t.useState)({}),[c,u]=(0,t.useState)({}),[p,f]=(0,t.useState)({}),[h,d]=(0,t.useState)(!1),[y,m]=(0,t.useState)(!1),[v,g]=(0,t.useState)(Da()),[_,w]=(0,t.useState)(0),x=(0,t.useRef)(null),E=async()=>{var e;w((e=>e+8>=100?100:e+8));let t=await lr.get("".concat(dr,"/api/booking/driver/check-orders"),{headers:{Authorization:"Basic ".concat(Ia())},params:{driverId:v._id}});if(l(t.data.earnings),u(t.data.communityEarnings),localStorage.setItem("driverData",JSON.stringify(t.data.driver)),(null===(e=t.data.currentRides)||void 0===e?void 0:e.length)>0){let e={senderDetails:t.data.currentRides[0].userId,receiverDetails:t.data.currentRides[0].receiverId,order:t.data.currentRides[0]};f(e),m(!0)}t.data.showCard?(i(!0),a(t.data.order)):(i(!1),a({}),w(0))};(0,t.useEffect)((()=>(E(),x.current=setInterval(E,5e3),()=>clearInterval(x.current))),[]);return(0,b.jsxs)("div",{class:"container pt-8 pt-xl-8",style:{paddingTop:"6em"},children:[(0,b.jsxs)("h4",{style:{margin:2},children:[" Hi ",null===v||void 0===v?void 0:v.firstName," "]}),y?(0,b.jsxs)("div",{children:[(0,b.jsx)(Od,{senderDetails:p.senderDetails,receiverDetails:p.receiverDetails,order:p.order,history:e.history,setShowBooking:m,setBookingCard:i,showSubmitBtn:h,setBookingObj:f}),(0,b.jsx)("div",{id:"map",children:(0,b.jsx)(ld,{apikey:yr,selectedAddress:p.receiverDetails.address,senderAddress:p.senderDetails.address})})]}):!(null!==p&&void 0!==p&&null!==(r=p.order)&&void 0!==r&&r._id)&&(0,b.jsx)("div",{children:(0,b.jsx)("div",{style:{padding:10,margin:5},children:n?(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:(0,b.jsx)(qf,{border:"primary",text:"black",style:{width:"18rem",margin:"5px"},className:"mb-2",children:(0,b.jsxs)(qf.Body,{children:[(0,b.jsx)(Td,{animated:!0,now:_}),(0,b.jsx)(qf.Title,{children:" New Delivery Request"}),(0,b.jsxs)(qf.Text,{children:[(0,b.jsxs)("div",{style:{fontSize:"small"},children:["From - ",o.userId.address.title," | To -"," ",o.receiverId.address.title]}),(0,b.jsx)("div",{style:{fontSize:"small"},children:(0,b.jsxs)("b",{children:["Estimate Time (in mins) -"," ",o.metaData.estimatedTime]})})]}),(0,b.jsx)(ve,{variant:"primary",onClick:async()=>{try{let e=await lr.post("".concat(dr,"/api/booking/driver/accept-order/"),{driverId:v._id,request_status:"BOOKING_ACCEPTED",orderId:o._id}).then((e=>e.data)).then((e=>(console.log("Driver accept response",e),i(!1),f(e),m(!0),e)));console.log("accept response",e)}catch(e){console.log("error",e)}},style:{margin:5},children:"Accept Booking"}),(0,b.jsx)(ve,{style:{margin:5},variant:"danger",onClick:async()=>{try{let e=await lr.post("".concat(dr,"/api/booking/driver/reject-order/"),{driverId:v._id,request_status:"BOOKING_ACCEPTED",orderId:o._id}).then((e=>e.data)).then((e=>(console.log("Reject driver response",e),i(!1),e)));console.log("cancel response",e)}catch(e){console.log("error",e)}},children:"Reject"})]})})}):(0,b.jsx)("div",{style:{padding:20,marginTop:5,fontSize:"medium"},children:"Checking for new rides ..."})})}),(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("h5",{children:(0,b.jsx)("b",{children:"Rides"})}),(0,b.jsxs)("div",{class:"row",children:[(0,b.jsx)("div",{class:"col-md-4 col-xl-4 mb-4",children:(0,b.jsx)("div",{class:"card shadow border-start-success py-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{class:"row align-items-center no-gutters",children:[(0,b.jsxs)("div",{class:"col me-2",children:[(0,b.jsx)("div",{class:"text-uppercase text-success fw-bold text-xs mb-1",children:(0,b.jsx)("span",{children:"Earnings (Weekly)"})}),(0,b.jsx)("div",{class:"text-dark fw-bold h5 mb-0",children:(0,b.jsxs)("span",{children:["$ ",s.weekly?s.weekly.toPrecision(4):0," "]})})]}),(0,b.jsx)("div",{class:"col-auto",children:(0,b.jsx)("i",{class:"fas fa-dollar-sign fa-2x text-gray-300"})})]})})})}),(0,b.jsx)("div",{class:"col-md-4 col-xl-4 mb-4",children:(0,b.jsx)("div",{class:"card shadow border-start-primary py-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{class:"row align-items-center no-gutters",children:[(0,b.jsxs)("div",{class:"col me-2",children:[(0,b.jsx)("div",{class:"text-uppercase text-primary fw-bold text-xs mb-1",children:(0,b.jsx)("span",{children:"Earnings (monthly)"})}),(0,b.jsx)("div",{class:"text-dark fw-bold h5 mb-0",children:(0,b.jsx)("span",{children:s.month?s.month.toPrecision(4):0})})]}),(0,b.jsx)("div",{class:"col-auto",children:(0,b.jsx)("i",{class:"fas fa-calendar fa-2x text-gray-300"})})]})})})}),(0,b.jsx)("div",{class:"col-md-4 col-xl-4 mb-4",children:(0,b.jsx)("div",{class:"card shadow border-start-primary py-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{class:"row align-items-center no-gutters",children:[(0,b.jsxs)("div",{class:"col me-2",children:[(0,b.jsx)("div",{class:"text-uppercase text-warning fw-bold text-xs mb-1",children:(0,b.jsx)("span",{children:"Earnings (Yearly)"})}),(0,b.jsx)("div",{class:"text-dark fw-bold h5 mb-0",children:(0,b.jsx)("span",{children:s.yearly?s.yearly.toPrecision(4):0})})]}),(0,b.jsx)("div",{class:"col-auto",children:(0,b.jsx)("i",{class:"fas fa-calendar fa-2x text-gray-300"})})]})})})})]}),(0,b.jsx)("h5",{children:(0,b.jsx)("b",{children:"Community Rides"})}),(0,b.jsxs)("div",{class:"row",children:[(0,b.jsx)("div",{class:"col-md-4 col-xl-4 mb-4",children:(0,b.jsx)("div",{class:"card shadow border-start-success py-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{class:"row align-items-center no-gutters",children:[(0,b.jsxs)("div",{class:"col me-2",children:[(0,b.jsx)("div",{class:"text-uppercase text-success fw-bold text-xs mb-1",children:(0,b.jsx)("span",{children:"Earnings (Weekly)"})}),(0,b.jsx)("div",{class:"text-dark fw-bold h5 mb-0",children:(0,b.jsxs)("span",{children:["$ ",c.weekly?c.weekly.toPrecision(4):0," "]})})]}),(0,b.jsx)("div",{class:"col-auto",children:(0,b.jsx)("i",{class:"fas fa-dollar-sign fa-2x text-gray-300"})})]})})})}),(0,b.jsx)("div",{class:"col-md-4 col-xl-4 mb-4",children:(0,b.jsx)("div",{class:"card shadow border-start-primary py-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{class:"row align-items-center no-gutters",children:[(0,b.jsxs)("div",{class:"col me-2",children:[(0,b.jsx)("div",{class:"text-uppercase text-primary fw-bold text-xs mb-1",children:(0,b.jsx)("span",{children:"Earnings (monthly)"})}),(0,b.jsx)("div",{class:"text-dark fw-bold h5 mb-0",children:(0,b.jsx)("span",{children:c.month?c.month.toPrecision(4):0})})]}),(0,b.jsx)("div",{class:"col-auto",children:(0,b.jsx)("i",{class:"fas fa-calendar fa-2x text-gray-300"})})]})})})}),(0,b.jsx)("div",{class:"col-md-4 col-xl-4 mb-4",children:(0,b.jsx)("div",{class:"card shadow border-start-primary py-2",children:(0,b.jsx)("div",{class:"card-body",children:(0,b.jsxs)("div",{class:"row align-items-center no-gutters",children:[(0,b.jsxs)("div",{class:"col me-2",children:[(0,b.jsx)("div",{class:"text-uppercase text-warning fw-bold text-xs mb-1",children:(0,b.jsx)("span",{children:"Earnings (Yearly)"})}),(0,b.jsx)("div",{class:"text-dark fw-bold h5 mb-0",children:(0,b.jsx)("span",{children:c.yearly?c.yearly.toPrecision(4):0})})]}),(0,b.jsx)("div",{class:"col-auto",children:(0,b.jsx)("i",{class:"fas fa-calendar fa-2x text-gray-300"})})]})})})})]})]})]})},Pd=e=>(console.log("driver home props",e),(0,b.jsxs)("div",{children:[(0,b.jsx)(Ba,{}),(0,b.jsx)(Ad,{history:e.history}),(0,b.jsx)(Qf,{})]}));var Cd=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},Nd=Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd(Cd([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function Rd(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Rd(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const jd=function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Rd(e))&&(n&&(n+=" "),n+=t);return n};function Md(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Md(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}const Id=function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Md(e))&&(n&&(n+=" "),n+=t);return n};function Dd(e,t,r){return function(n,i){void 0===i&&(i=r);var o=e(n)+i;return t(o)}}function Ld(e){return function(t){return new Date(e(t).getTime()-1)}}function Fd(e,t){return function(r){return[e(r),t(r)]}}function Bd(e){if(e instanceof Date)return e.getFullYear();if("number"===typeof e)return e;var t=parseInt(e,10);if("string"===typeof e&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function zd(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function $d(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Ud(e){if(e instanceof Date)return e.getHours();if("string"===typeof e){var t=e.split(":");if(t.length>=2){var r=t[0];if(r){var n=parseInt(r,10);if(!isNaN(n))return n}}}throw new Error("Failed to get hours from date: ".concat(e,"."))}function Hd(e){if(e instanceof Date)return e.getMinutes();if("string"===typeof e){var t=e.split(":");if(t.length>=2){var r=t[1]||"0",n=parseInt(r,10);if(!isNaN(n))return n}}throw new Error("Failed to get minutes from date: ".concat(e,"."))}function Vd(e){if(e instanceof Date)return e.getSeconds();if("string"===typeof e){var t=e.split(":");if(t.length>=2){var r=t[2]||"0",n=parseInt(r,10);if(!isNaN(n))return n}}throw new Error("Failed to get seconds from date: ".concat(e,"."))}function Gd(e){if(e instanceof Date)return e.getMilliseconds();if("string"===typeof e){var t=e.split(":");if(t.length>=2){var r=(t[2]||"0").split(".")[1]||"0",n=parseInt(r,10);if(!isNaN(n))return n}}throw new Error("Failed to get seconds from date: ".concat(e,"."))}function qd(e){var t=Bd(e),r=t+(1-t)%100,n=new Date;return n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}Dd(Bd,qd,-100);var Wd=Ld(Dd(Bd,qd,100));Dd(Bd,Wd,-100),Dd(Bd,Wd,100),Fd(qd,Wd);function Yd(e){var t=Bd(e),r=t+(1-t)%10,n=new Date;return n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}Dd(Bd,Yd,-10);var Kd=Ld(Dd(Bd,Yd,10));Dd(Bd,Kd,-10),Dd(Bd,Kd,10),Fd(Yd,Kd);function Xd(e){var t=Bd(e),r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}Dd(Bd,Xd,-1);var Zd=Ld(Dd(Bd,Xd,1));Dd(Bd,Zd,-1),Dd(Bd,Zd,1),Fd(Xd,Zd);function Jd(e,t){return function(r,n){void 0===n&&(n=t);var i=Bd(r),o=zd(r)+n,a=new Date;return a.setFullYear(i,o,1),a.setHours(0,0,0,0),e(a)}}function Qd(e){var t=Bd(e),r=zd(e),n=new Date;return n.setFullYear(t,r,1),n.setHours(0,0,0,0),n}Jd(Qd,-1);var ey=Ld(Jd(Qd,1));Jd(ey,-1),Jd(ey,1),Fd(Qd,ey);function ty(e,t){return function(r,n){void 0===n&&(n=t);var i=Bd(r),o=zd(r),a=$d(r)+n,s=new Date;return s.setFullYear(i,o,a),s.setHours(0,0,0,0),e(s)}}function ry(e){var t=Bd(e),r=zd(e),n=$d(e),i=new Date;return i.setFullYear(t,r,n),i.setHours(0,0,0,0),i}ty(ry,-1);var ny=Ld(ty(ry,1));ty(ny,-1),ty(ny,1),Fd(ry,ny);function iy(e,t){void 0===t&&(t=2);var r="".concat(e);return r.length>=t?e:"0000".concat(r).slice(-t)}function oy(e){var t=iy(Ud(e)),r=iy(Hd(e));return"".concat(t,":").concat(r)}function ay(e){var t=iy(Ud(e)),r=iy(Hd(e)),n=iy(Vd(e));return"".concat(t,":").concat(r,":").concat(n)}function sy(e){var r=e.angle,n=void 0===r?0:r,i=e.name,o=e.length,a=void 0===o?100:o,s=e.oppositeLength,l=void 0===s?10:s,c=e.width,u=void 0===c?1:c;return t.createElement("div",{className:"react-clock__hand react-clock__".concat(i,"-hand"),style:{transform:"rotate(".concat(n,"deg)")}},t.createElement("div",{className:"react-clock__hand__body react-clock__".concat(i,"-hand__body"),style:{width:"".concat(u,"px"),top:"".concat(50-a/2,"%"),bottom:"".concat(50-l/2,"%")}}))}function ly(e){var r=e.angle,n=void 0===r?0:r,i=e.length,o=void 0===i?10:i,a=e.name,s=e.width,l=void 0===s?1:s,c=e.number;return t.createElement("div",{className:"react-clock__mark react-clock__".concat(a,"-mark"),style:{transform:"rotate(".concat(n,"deg)")}},t.createElement("div",{className:"react-clock__mark__body react-clock__".concat(a,"-mark__body"),style:{width:"".concat(l,"px"),top:0,bottom:"".concat(100-o/2,"%")}}),c?t.createElement("div",{className:"react-clock__mark__number",style:{transform:"rotate(-".concat(n,"deg)"),top:"".concat(o/2,"%")}},c):null)}var cy=function(){return cy=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cy.apply(this,arguments)};const uy=(0,t.memo)((function(e){return t.createElement(ly,cy({},e))}));var py=__webpack_require__(9498);function fy(e){return JSON.stringify(e)}function hy(e){return"string"===typeof e}function dy(e,t,r){return r.indexOf(e)===t}function yy(e){return-1===e.indexOf(",")?e:e.split(",")}function my(e){if(!e)return e;if("C"===e||"posix"===e||"POSIX"===e)return"en-US";if(-1!==e.indexOf(".")){var t=e.split(".")[0];return my(void 0===t?"":t)}if(-1!==e.indexOf("@")){var r=e.split("@")[0];return my(void 0===r?"":r)}if(-1===e.indexOf("-")||(n=e).toLowerCase()!==n)return e;var n,i=e.split("-"),o=i[0],a=i[1],s=void 0===a?"":a;return"".concat(o,"-").concat(s.toUpperCase())}var vy=py((function(e){var t=void 0===e?{}:e,r=t.useFallbackLocale,n=void 0===r||r,i=t.fallbackLocale,o=void 0===i?"en-US":i,a=[];if("undefined"!==typeof navigator){for(var s=[],l=0,c=navigator.languages||[];l<c.length;l++){var u=c[l];s=s.concat(yy(u))}var p=navigator.language,f=p?yy(p):p;a=a.concat(s,f)}return n&&a.push(o),a.filter(hy).map(my).filter(dy)}),fy);var gy=py((function(e){return vy(e)[0]||null}),fy);const by=gy;function _y(e,t){return t.toLocaleString(e||by()||void 0)}var wy=function(){return wy=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wy.apply(this,arguments)},xy=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const Ey=(0,t.memo)((function(e){var r=e.formatHour,n=void 0===r?_y:r,i=e.locale,o=e.number,a=xy(e,["formatHour","locale","number"]);return t.createElement(ly,wy({number:o?n(i,o):null},a))}));function Sy(e,t){return function(r,n,i){var o=r[n];if("undefined"!==typeof o){if("number"!==typeof o)return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(i,"`, expected `number`."));if(o<e||o>t)return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(i,"`, length must be between ").concat(e," and ").concat(t,"."))}return null}}var ky=Sy(0,100),Ty=Sy(-100,100),Oy=function(e,t,r){var n=e[t];if("undefined"!==typeof n){if("number"!==typeof n)return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, expected `number`."));if(n<0)return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, width must be greater or equal to 0."))}return null},Ay=ky,Py=Oy,Cy=function(e){var r=e.className,n=e.formatHour,i=e.hourHandLength,o=void 0===i?50:i,a=e.hourHandOppositeLength,s=e.hourHandWidth,l=void 0===s?4:s,c=e.hourMarksLength,u=void 0===c?10:c,p=e.hourMarksWidth,f=void 0===p?3:p,h=e.locale,d=e.minuteHandLength,y=void 0===d?70:d,m=e.minuteHandOppositeLength,v=e.minuteHandWidth,g=void 0===v?2:v,b=e.minuteMarksLength,_=void 0===b?6:b,w=e.minuteMarksWidth,x=void 0===w?1:w,E=e.renderHourMarks,S=void 0===E||E,k=e.renderMinuteHand,T=void 0===k||k,O=e.renderMinuteMarks,A=void 0===O||O,P=e.renderNumbers,C=e.renderSecondHand,N=void 0===C||C,R=e.secondHandLength,j=void 0===R?90:R,M=e.secondHandOppositeLength,I=e.secondHandWidth,D=void 0===I?1:I,L=e.size,F=void 0===L?150:L,B=e.useMillisecondPrecision,z=e.value;return t.createElement("time",{className:Id("react-clock",r),dateTime:z instanceof Date?z.toISOString():z||void 0,style:{width:F,height:F}},t.createElement("div",{className:"react-clock__face"},function(){if(!A)return null;for(var e=[],r=1;r<=60;r+=1)S&&!(r%5)||e.push(t.createElement(uy,{key:"minute_".concat(r),angle:6*r,length:_,name:"minute",width:x}));return e}(),function(){if(!S)return null;for(var e=[],r=1;r<=12;r+=1)e.push(t.createElement(Ey,{key:"hour_".concat(r),angle:30*r,formatHour:n,length:u,locale:h,name:"hour",number:P?r:void 0,width:f}));return e}()),function(){var e=z?30*Ud(z)+Hd(z)/2+Vd(z)/120+(B?Gd(z)/12e4:0):0;return t.createElement(sy,{angle:e,length:o,name:"hour",oppositeLength:a,width:l})}(),function(){if(!T)return null;var e=z?360*Ud(z)+6*Hd(z)+Vd(z)/10+(B?Gd(z)/1e4:0):0;return t.createElement(sy,{angle:e,length:y,name:"minute",oppositeLength:m,width:g})}(),function(){if(!N)return null;var e=z?360*Hd(z)+6*Vd(z)+(B?.006*Gd(z):0):0;return t.createElement(sy,{angle:e,length:j,name:"second",oppositeLength:M,width:D})}())};Cy.propTypes={className:E.oneOfType([E.string,E.arrayOf(E.string)]),formatHour:E.func,hourHandLength:ky,hourHandOppositeLength:Ty,hourHandWidth:Oy,hourMarksLength:Ay,hourMarksWidth:Py,locale:E.string,minuteHandLength:ky,minuteHandOppositeLength:Ty,minuteHandWidth:Oy,minuteMarksLength:Ay,minuteMarksWidth:Py,renderHourMarks:E.bool,renderMinuteHand:E.bool,renderMinuteMarks:E.bool,renderNumbers:E.bool,renderSecondHand:E.bool,secondHandLength:ky,secondHandOppositeLength:Ty,secondHandWidth:Oy,size:E.oneOfType([E.number,E.string]),value:E.oneOfType([E.string,E.instanceOf(Date)])};const Ny=Cy;function Ry(e){return e.getBoundingClientRect()}function jy(e,t){return{get collidedTop(){return Ry(e).top<Ry(t).top},get collidedBottom(){return Ry(e).bottom>Ry(t).bottom},get collidedLeft(){return Ry(e).left<Ry(t).left},get collidedRight(){return Ry(e).right>Ry(t).right},get overflowTop(){return Ry(t).top-Ry(e).top},get overflowBottom(){return Ry(e).bottom-Ry(t).bottom},get overflowLeft(){return Ry(t).left-Ry(e).left},get overflowRight(){return Ry(e).right-Ry(t).right}}}var My=__webpack_require__(5501),Iy=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dy=function(){return Dy=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Dy.apply(this,arguments)},Ly=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},Fy="undefined"!==typeof document,By=Fy&&"CSS"in window&&"supports"in window.CSS&&CSS.supports("display","contents"),zy=Fy&&"MutationObserver"in window;function $y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Uy(e){for(var t=e.parentElement;t;){if(window.getComputedStyle(t).overflow.split(" ").every((function(e){return"auto"===e||"scroll"===e})))return t;t=t.parentElement}return document.documentElement}function Hy(e){var t=e.axis,r=e.container,n=e.element,i=e.invertAxis,o=e.scrollContainer,a=e.secondary,s=e.spacing,l=window.getComputedStyle(n),c=r.parentElement;if(c){var u=jy(c,o),p=jy(c,document.documentElement),f="x"===t,h=f?"left":"top",d=f?"right":"bottom",y=f?"width":"height",m="overflow".concat($y(h)),v="overflow".concat($y(d)),g="scroll".concat($y(h)),b=$y(y),_="offset".concat(b),w="client".concat(b),x="min-".concat(y),E=o[_]-o[w],S="object"===typeof s?s[h]:s,k=-Math.max(u[m],p[m]+document.documentElement[g])-S,T="object"===typeof s?s[d]:s,O=-Math.max(u[v],p[v]-document.documentElement[g])-T-E;a&&(k+=c[w],O+=c[w]);var A=n[_];(i?R()||j():j()||R())||function(){var e=k>O,t=l.getPropertyValue(x),r=t?parseInt(t,10):null;function i(e){(0,My.default)(!r||e>=r,"<Fit />'s child will not fit anywhere with its current ".concat(x," of ").concat(r,"px."));var t=Math.max(e,r||0);(0,My.default)(!1,"<Fit />'s child needed to have its ".concat(y," decreased to ").concat(t,"px.")),n.style[y]="".concat(t,"px")}e?(i(k),P()):(i(O),C())}()}function P(){n.style[h]="auto",n.style[d]=a?"0":"100%"}function C(){n.style[h]=a?"0":"100%",n.style[d]="auto"}function N(e,t){var r=A<=e;return r&&t(),r}function R(){return N(k,P)}function j(){return N(O,C)}}function Vy(e){var t=e.invertAxis,r=e.invertSecondaryAxis,n=Ly(e,["invertAxis","invertSecondaryAxis"]);!function(e){Hy(e)}(Dy(Dy({},n),{invertAxis:t})),function(e){Hy(Dy(Dy({},e),{axis:"x"===e.axis?"y":"x",secondary:!0}))}(Dy(Dy({},n),{invertAxis:r}))}const Gy=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.fit=function(){var e=t,r=e.scrollContainer,n=e.container,i=e.element;if(r&&n&&i){var o=i.clientWidth,a=i.clientHeight;if(t.elementWidth!==o||t.elementHeight!==a){t.elementWidth=o,t.elementHeight=a;var s=n.parentElement;if(s){"absolute"!==window.getComputedStyle(i).position&&(i.style.position="absolute");var l=window.getComputedStyle(s).position;"relative"!==l&&"absolute"!==l&&(s.style.position="relative");var c=t.props,u=c.invertAxis,p=c.invertSecondaryAxis,f=c.mainAxis,h=void 0===f?"y":f,d=c.spacing;Vy({axis:h,container:n,element:i,invertAxis:u,invertSecondaryAxis:p,scrollContainer:r,spacing:void 0===d?8:d})}}}},t}return Iy(r,e),r.prototype.componentDidMount=function(){var e=this;if(!By){var t=(0,yi.findDOMNode)(this);if(!t||!(t instanceof HTMLElement))return;this.container=t,this.element=t,this.scrollContainer=Uy(t)}this.fit();zy&&this.element&&new MutationObserver((function(){e.fit()})).observe(this.element,{attributes:!0,attributeFilter:["class","style"]})},r.prototype.render=function(){var e=this,r=this.props.children,n=t.Children.only(r);return By?t.createElement("span",{ref:function(t){e.container=t;var r=t&&t.firstElementChild;r&&r instanceof HTMLElement&&(e.element=r,e.scrollContainer=Uy(r))},style:{display:"contents"}},n):n},r.propTypes={children:E.node.isRequired,invertAxis:E.bool,invertSecondaryAxis:E.bool,mainAxis:E.oneOf(["x","y"]),spacing:E.oneOfType([E.number,E.shape({bottom:E.number.isRequired,left:E.number.isRequired,right:E.number.isRequired,top:E.number.isRequired})])},r}(t.Component);function qy(e){var r=e.children;return t.createElement("span",{className:"react-time-picker__inputGroup__divider"},r)}var Wy,Yy=["normal","small-caps"];function Ky(e){if(!e)return"";var t=window.getComputedStyle(e);if(t.font)return t.font;if(!(""!==t.fontFamily))return"";var r=Yy.includes(t.fontVariant)?t.fontVariant:"normal";return"".concat(t.fontStyle," ").concat(r," ").concat(t.fontWeight," ").concat(t.fontSize," / ").concat(t.lineHeight," ").concat(t.fontFamily)}const Xy=function(e){if("undefined"===typeof document||!e)return null;var t=Ky(e),r=function(e,t){var r=(Wy||(Wy=document.createElement("canvas"))).getContext("2d");if(!r)return null;r.font=t;var n=r.measureText(e).width;return Math.ceil(n)}(e.value||e.placeholder,t);return null===r?null:(e.style.width="".concat(r,"px"),r)};var Zy="undefined"!==typeof document,Jy=Zy?t.useLayoutEffect:t.useEffect,Qy=Zy&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),em=Zy&&/Firefox/.test(navigator.userAgent);function tm(e){var t=e.target;Qy?requestAnimationFrame((function(){return t.select()})):t.select()}function rm(e){if(null!==e)return function(t){if(!em){var r=t.key,n=t.target,i=n.value,o=1===r.length&&/\d/.test(r),a=function(e){if(e&&"selectionStart"in e&&null!==e.selectionStart&&"selectionEnd"in e&&null!==e.selectionEnd)return e.value.slice(e.selectionStart,e.selectionEnd);if("getSelection"in window){var t=window.getSelection();return t&&t.toString()}return null}(n);o&&(a||i.length<e)||t.preventDefault()}}}function nm(e){var r=e.ariaLabel,n=e.autoFocus,i=e.className,o=e.disabled,a=e.inputRef,s=e.max,l=e.min,c=e.name,u=e.nameForClass,p=e.onChange,f=e.onKeyDown,h=e.onKeyUp,d=e.placeholder,y=void 0===d?"--":d,m=e.required,v=e.showLeadingZeros,g=e.step,b=e.value;Jy((function(){var e;a&&a.current&&(Xy(a.current),e=a.current,"complete"!==document.readyState&&window.addEventListener("load",(function(){Xy(e)})),function(e){if(document.fonts){var t=Ky(e);t&&(document.fonts.check(t)||document.fonts.addEventListener("loadingdone",(function(){Xy(e)})))}}(a.current))}),[a,b]);var _=v&&b&&Number(b)<10&&("0"===b||!b.toString().startsWith("0")),w=s?s.toString().length:null;return t.createElement(t.Fragment,null,_?t.createElement("span",{className:"".concat(i,"__leadingZero")},"0"):null,t.createElement("input",{"aria-label":r,autoComplete:"off",autoFocus:n,className:jd("".concat(i,"__input"),"".concat(i,"__").concat(u||c),_&&"".concat(i,"__input--hasLeadingZero")),"data-input":"true",disabled:o,inputMode:"numeric",max:s,min:l,name:c,onChange:p,onFocus:tm,onKeyDown:f,onKeyPress:rm(w),onKeyUp:function(e){Xy(e.target),h&&h(e)},placeholder:y,ref:a,required:m,step:g,type:"number",value:null!==b?b:""}))}function im(e,t){var r=Number(e);return"am"===t&&12===r?r=0:"pm"===t&&r<12&&(r+=12),r}function om(e){return[Number(e)%12||12,Number(e)<12?"am":"pm"]}var am=new Map;function sm(e){return function(t,r){var n=t||by();am.has(n)||am.set(n,new Map);var i=am.get(n);return i.has(e)||i.set(e,new Intl.DateTimeFormat(n||void 0,e).format),i.get(e)(r)}}var lm=new Map;var cm=new RegExp("[".concat(["9","\u0669"].join(""),"]")),um=sm({hour:"numeric"});function pm(e){var t=um(e,new Date(2017,0,1,9)),r=um(e,new Date(2017,0,1,21)),n=t.split(cm),i=n[0],o=n[1],a=r.split(cm),s=a[0],l=a[1];if(void 0!==l){if(i!==s)return[i,s].map((function(e){return e.trim()}));if(o!==l)return[o,l].map((function(e){return e.trim()}))}return["AM","PM"]}function fm(e){return null!==e&&!1!==e&&!Number.isNaN(Number(e))}function hm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.min.apply(Math,e.filter(fm))}function dm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.max.apply(Math,e.filter(fm))}var ym=function(){return ym=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ym.apply(this,arguments)},mm=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function vm(e){var r=e.amPm,n=e.maxTime,i=e.minTime,o=e.value,a=mm(e,["amPm","maxTime","minTime","value"]),s=hm(12,n&&function(){var e=om(Ud(n)),t=e[0];return e[1]!==r?null:t}()),l=dm(1,i&&function(){var e=om(Ud(i)),t=e[0];return e[1]!==r||12===t?null:t}()),c=o?om(o)[0].toString():"";return t.createElement(nm,ym({max:s,min:l,name:"hour12",nameForClass:"hour",value:c},a))}var gm=function(){return gm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gm.apply(this,arguments)},bm=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function _m(e){var r=e.maxTime,n=e.minTime,i=bm(e,["maxTime","minTime"]),o=hm(23,r&&Ud(r)),a=dm(0,n&&Ud(n));return t.createElement(nm,gm({max:o,min:a,name:"hour24",nameForClass:"hour"},i))}var wm=function(){return wm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wm.apply(this,arguments)},xm=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function Em(e){var r=e.hour,n=e.maxTime,i=e.minTime,o=e.showLeadingZeros,a=void 0===o||o,s=xm(e,["hour","maxTime","minTime","showLeadingZeros"]);function l(e){return r===Ud(e).toString()}var c=hm(59,n&&l(n)&&Hd(n)),u=dm(0,i&&l(i)&&Hd(i));return t.createElement(nm,wm({max:c,min:u,name:"minute",showLeadingZeros:a},s))}var Sm=function(){return Sm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Sm.apply(this,arguments)},km=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function Tm(e){var r=e.hour,n=e.maxTime,i=e.minTime,o=e.minute,a=e.showLeadingZeros,s=void 0===a||a,l=km(e,["hour","maxTime","minTime","minute","showLeadingZeros"]);function c(e){return r===Ud(e).toString()&&o===Hd(e).toString()}var u=hm(59,n&&c(n)&&Vd(n)),p=dm(0,i&&c(i)&&Vd(i));return t.createElement(nm,Sm({max:u,min:p,name:"second",showLeadingZeros:s},l))}function Om(e){var r=e.ariaLabel,n=e.disabled,i=e.maxTime,o=e.minTime,a=e.name,s=e.onChange,l=e.required,c=e.value,u=e.valueType,p=function(){switch(u){case"hour":return function(e){return"".concat(Ud(e),":00")};case"minute":return oy;case"second":return ay;default:throw new Error("Invalid valueType")}}(),f=function(){switch(u){case"hour":return 3600;case"minute":return 60;case"second":return 1;default:throw new Error("Invalid valueType")}}();return t.createElement("input",{"aria-label":r,disabled:n,hidden:!0,max:i?p(i):void 0,min:o?p(o):void 0,name:a,onChange:s,onFocus:function(e){e.stopPropagation()},required:l,step:f,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:"time",value:c?p(c):""})}function Am(e){var r=e.ariaLabel,n=e.autoFocus,i=e.className,o=e.disabled,a=e.inputRef,s=e.locale,l=e.maxTime,c=e.minTime,u=e.onChange,p=e.onKeyDown,f=e.required,h=e.value,d=!!c&&"pm"===om(Ud(c))[1],y=!!l&&"am"===om(Ud(l))[1],m="amPm",v=pm(s),g=v[0],b=v[1];return t.createElement("select",{"aria-label":r,autoFocus:n,className:jd("".concat(i,"__input"),"".concat(i,"__").concat(m)),"data-input":"true","data-select":"true",disabled:o,name:m,onChange:u,onKeyDown:p,ref:a,required:f,value:null!==h?h:""},!h&&t.createElement("option",{value:""},"--"),t.createElement("option",{disabled:d,value:"am"},g),t.createElement("option",{disabled:y,value:"pm"},b))}var Pm=function(){return Pm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pm.apply(this,arguments)},Cm=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},Nm={},Rm=["hour","minute","second"];function jm(e){return"true"===e.dataset.input}function Mm(e,t){var r=e;do{r=r[t]}while(r&&!jm(r));return r}function Im(e){e&&e.focus()}var Dm=function(e){return function(t,r){var n=t||by();lm.has(n)||lm.set(n,new Map);var i=lm.get(n);return i.has(e)||i.set(e,new Intl.NumberFormat(n||void 0,e).format),i.get(e)(r)}}({useGrouping:!1});function Lm(e){var r=e.amPmAriaLabel,n=e.autoFocus,i=e.className,o=e.disabled,a=e.format,s=e.hourAriaLabel,l=e.hourPlaceholder,c=e.isClockOpen,u=void 0===c?null:c,p=e.locale,f=e.maxDetail,h=void 0===f?"minute":f,d=e.maxTime,y=e.minTime,m=e.minuteAriaLabel,v=e.minutePlaceholder,g=e.name,b=void 0===g?"time":g,_=e.nativeInputAriaLabel,w=e.onChange,x=e.onInvalidChange,E=e.required,S=e.secondAriaLabel,k=e.secondPlaceholder,T=e.value,O=(0,t.useState)(null),A=O[0],P=O[1],C=(0,t.useState)(null),N=C[0],R=C[1],j=(0,t.useState)(null),M=j[0],I=j[1],D=(0,t.useState)(null),L=D[0],F=D[1],B=(0,t.useState)(null),z=B[0],$=B[1],U=(0,t.useRef)(null),H=(0,t.useRef)(null),V=(0,t.useRef)(null),G=(0,t.useRef)(null),q=(0,t.useRef)(null),W=(0,t.useState)(u),Y=W[0],K=W[1],X=(0,t.useRef)();(0,t.useEffect)((function(){K(u)}),[u]),(0,t.useEffect)((function(){var e=T;e?(P(om(Ud(e))[1]),R(Ud(e).toString()),I(Hd(e).toString()),F(Vd(e).toString()),$(e)):(P(null),R(null),I(null),F(null),$(null))}),[T,y,d,h,Y]);var Z=h,J=function(){var e=Rm.indexOf(h),t=Nm[e]||function(){var t={hour:"numeric"};return e>=1&&(t.minute="numeric"),e>=2&&(t.second="numeric"),Nm[e]=t,t}();return sm(t)}();var Q=a||function(){var e=new Date(2017,0,1,21,13,14);return J(p,e).replace(Dm(p,9),"h").replace(Dm(p,21),"H").replace(Dm(p,13),"mm").replace(Dm(p,14),"ss").replace(new RegExp(pm(p).join("|")),"a")}(),ee=function(){var e=Q.match(/[^0-9a-z]/i);return e?e[0]:null}();function te(){if(w){var e=[U.current,H.current,V.current,G.current,q.current].filter((function(e){return Boolean(e)})),t=e.slice(1),r={};if(e.forEach((function(e){r[e.name]="number"===e.type?"valueAsNumber"in e?e.valueAsNumber:Number(e.value):e.value})),t.every((function(e){return!e.value})))w(null,!1);else{var n=e.every((function(e){return e.value})),i=e.every((function(e){return e.validity.valid}));if(n&&i){var o=Number(r.hour24||r.hour12&&r.amPm&&im(r.hour12,r.amPm)||0),a=Number(r.minute||0),s=Number(r.second||0),l=function(e){return"0".concat(e).slice(-2)},c=function(e){return function(){switch(Z){case"hour":case"minute":return oy;case"second":return ay;default:throw new Error("Invalid valueType")}}()(e)}("".concat(l(o),":").concat(l(a),":").concat(l(s)));w(c,!1)}else x&&x()}}}function re(e){var t=e.target,r=t.name,n=t.value;switch(r){case"amPm":P(n);break;case"hour12":R(n?im(n,A||"am").toString():"");break;case"hour24":R(n);break;case"minute":I(n);break;case"second":F(n)}te()}function ne(e){var t=e.target.value;w&&w(t||null,!1)}var ie={className:i,disabled:o,maxTime:d,minTime:y,onChange:re,onKeyDown:function(e){switch(X.current=e.key,e.key){case"ArrowLeft":case"ArrowRight":case ee:e.preventDefault(),Im(Mm(e.target,"ArrowLeft"===e.key?"previousElementSibling":"nextElementSibling"))}},onKeyUp:function(e){var t=e.key,r=e.target;if(X.current===t&&!isNaN(Number(t))){var n=r.getAttribute("max");if(n){var i=r.value;if(10*Number(i)>Number(n)||i.length>=n.length){Im(Mm(r,"nextElementSibling"))}}}},required:Boolean(E||Y)};function oe(e,r){return/h/.test(e)?function(e,r){if(e&&e.length>2)throw new Error("Unsupported token: ".concat(e));var i=!!e&&2===e.length;return t.createElement(vm,Pm({key:"hour12"},ie,{amPm:A,ariaLabel:s,autoFocus:0===r&&n,inputRef:H,placeholder:l,showLeadingZeros:i,value:N}))}(e,r):function(e,r){if(e&&e.length>2)throw new Error("Unsupported token: ".concat(e));var i=!!e&&2===e.length;return t.createElement(_m,Pm({key:"hour24"},ie,{ariaLabel:s,autoFocus:0===r&&n,inputRef:V,placeholder:l,showLeadingZeros:i,value:N}))}(e,r)}function ae(e,r){if(e&&e.length>2)throw new Error("Unsupported token: ".concat(e));var i=!!e&&2===e.length;return t.createElement(Em,Pm({key:"minute"},ie,{ariaLabel:m,autoFocus:0===r&&n,hour:N,inputRef:G,placeholder:v,showLeadingZeros:i,value:M}))}function se(e,r){if(e&&e.length>2)throw new Error("Unsupported token: ".concat(e));var i=!e||2===e.length;return t.createElement(Tm,Pm({key:"second"},ie,{ariaLabel:S,autoFocus:0===r&&n,hour:N,inputRef:q,minute:M,placeholder:k,showLeadingZeros:i,value:L}))}function le(e,i){return t.createElement(Am,Pm({key:"ampm"},ie,{ariaLabel:r,autoFocus:0===i&&n,inputRef:U,locale:p,onChange:re,value:A}))}return t.createElement("div",{className:i,onClick:function(e){e.target===e.currentTarget&&Im(e.target.children[1])}},t.createElement(Om,{key:"time",ariaLabel:_,disabled:o,maxTime:d,minTime:y,name:b,onChange:ne,required:E,value:z,valueType:Z}),function(e,r,n){var i=[],o=new RegExp(Object.keys(r).map((function(e){return"".concat(e,"+")})).join("|"),"g"),a=e.match(o);return e.split(o).reduce((function(e,o,s){var l=o&&t.createElement(qy,{key:"separator_".concat(s)},o),c=Cm(Cm([],e,!0),[l],!1),u=a&&a[s];if(u){var p=r[u]||r[Object.keys(r).find((function(e){return u.match(e)}))];if(!p)return c;!n&&i.includes(p)?c.push(u):(c.push(p(u,s)),i.push(p))}return c}),[])}(Q,{h:oe,H:oe,m:ae,s:se,a:le},"undefined"!==typeof a))}var Fm,Bm=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],["hour","minute","second"],!0),zm=/^(([0-1])?[0-9]|2[0-3]):[0-5][0-9](:([0-5][0-9]))?$/,$m=function(e,t,r){var n=e[t];return!n||"string"===typeof n&&zm.test(n)?null:new Error("Invalid prop `".concat(t,"` of type `").concat(typeof n,"` supplied to `").concat(r,"`, expected time in HH:mm(:ss) format."))},Um=(E.oneOf(Bm),E.oneOfType([E.func,E.exact({current:E.any})]),function(){return Um=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Um.apply(this,arguments)}),Hm=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},Vm="undefined"!==typeof document,Gm="react-time-picker",qm=["mousedown","focusin","touchstart"],Wm={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},Ym=t.createElement("svg",Um({},Wm,{className:"".concat(Gm,"__clock-button__icon ").concat(Gm,"__button__icon"),fill:"none"}),t.createElement("circle",{cx:"9.5",cy:"9.5",r:"7.5"}),t.createElement("path",{d:"M9.5 4.5 v5 h4"})),Km=t.createElement("svg",Um({},Wm,{className:"".concat(Gm,"__clear-button__icon ").concat(Gm,"__button__icon")}),t.createElement("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),t.createElement("line",{x1:"15",x2:"4",y1:"4",y2:"15"})),Xm=function(e){var r=e.amPmAriaLabel,n=e.autoFocus,i=e.className,o=e.clearAriaLabel,a=e.clearIcon,s=void 0===a?Km:a,l=e.clockAriaLabel,c=e.clockIcon,u=void 0===c?Ym:c,p=e.closeClock,f=void 0===p||p,h=e["data-testid"],d=e.hourAriaLabel,y=e.hourPlaceholder,m=e.disableClock,v=e.disabled,g=e.format,b=e.id,_=e.isOpen,w=void 0===_?null:_,x=e.locale,E=e.maxTime,S=e.maxDetail,k=void 0===S?"minute":S,T=e.minTime,O=e.minuteAriaLabel,A=e.minutePlaceholder,P=e.name,C=void 0===P?"time":P,N=e.nativeInputAriaLabel,R=e.onClockClose,j=e.onClockOpen,M=e.onChange,I=e.onFocus,D=e.onInvalidChange,L=e.openClockOnFocus,F=void 0===L||L,B=e.required,z=e.value,$=e.secondAriaLabel,U=e.secondPlaceholder,H=e.shouldCloseClock,V=e.shouldOpenClock,G=Hm(e,["amPmAriaLabel","autoFocus","className","clearAriaLabel","clearIcon","clockAriaLabel","clockIcon","closeClock","data-testid","hourAriaLabel","hourPlaceholder","disableClock","disabled","format","id","isOpen","locale","maxTime","maxDetail","minTime","minuteAriaLabel","minutePlaceholder","name","nativeInputAriaLabel","onClockClose","onClockOpen","onChange","onFocus","onInvalidChange","openClockOnFocus","required","value","secondAriaLabel","secondPlaceholder","shouldCloseClock","shouldOpenClock"]),q=(0,t.useState)(w),W=q[0],Y=q[1],K=(0,t.useRef)(null),X=(0,t.useRef)(null);function Z(e){var t=e.reason;V&&!V({reason:t})||(Y(!0),j&&j())}(0,t.useEffect)((function(){Y(w)}),[w]);var J=(0,t.useCallback)((function(e){var t=e.reason;H&&!H({reason:t})||(Y(!1),R&&R())}),[R,H]);function Q(){W?J({reason:"buttonClick"}):Z({reason:"buttonClick"})}function ee(e,t){void 0===t&&(t=f),t&&J({reason:"select"}),M&&M(e)}var te=(0,t.useCallback)((function(e){"Escape"===e.key&&J({reason:"escape"})}),[J]);function re(){ee(null)}function ne(e){e.stopPropagation()}var ie=(0,t.useCallback)((function(e){var t=K.current,r=X.current,n="composedPath"in e?e.composedPath()[0]:e.target;!n||!t||t.contains(n)||r&&r.contains(n)||J({reason:"outsideAction"})}),[X,J,K]),oe=(0,t.useCallback)((function(e){void 0===e&&(e=W),qm.forEach((function(t){e?document.addEventListener(t,ie):document.removeEventListener(t,ie)})),e?document.addEventListener("keydown",te):document.removeEventListener("keydown",te)}),[W,ie,te]);(0,t.useEffect)((function(){return oe(),function(){oe(!1)}}),[oe]);var ae=(0,t.useMemo)((function(){return function(e,t){var r={};return Nd.forEach((function(n){var i=e[n];i&&(r[n]=t?function(e){return i(e,t(n))}:i)})),r}(G)}),[G]);return t.createElement("div",Um({className:jd(Gm,"".concat(Gm,"--").concat(W?"open":"closed"),"".concat(Gm,"--").concat(v?"disabled":"enabled"),i),"data-testid":h,id:b},ae,{onFocus:function(e){I&&I(e),v||W||!F||"true"===e.target.dataset.select||Z({reason:"focus"})},ref:K}),function(){var e=(Array.isArray(z)?z:[z])[0],i={amPmAriaLabel:r,hourAriaLabel:d,minuteAriaLabel:O,nativeInputAriaLabel:N,secondAriaLabel:$},a={hourPlaceholder:y,minutePlaceholder:A,secondPlaceholder:U};return t.createElement("div",{className:"".concat(Gm,"__wrapper")},t.createElement(Lm,Um({},i,a,{autoFocus:n,className:"".concat(Gm,"__inputGroup"),disabled:v,format:g,isClockOpen:W,locale:x,maxDetail:k,maxTime:E,minTime:T,name:C,onChange:ee,onInvalidChange:D,required:B,value:e})),null!==s&&t.createElement("button",{"aria-label":o,className:"".concat(Gm,"__clear-button ").concat(Gm,"__button"),disabled:v,onClick:re,onFocus:ne,type:"button"},"function"===typeof s?t.createElement(s):s),null!==u&&!m&&t.createElement("button",{"aria-label":l,className:"".concat(Gm,"__clock-button ").concat(Gm,"__button"),disabled:v,onClick:Q,onFocus:ne,type:"button"},"function"===typeof u?t.createElement(u):u))}(),function(){if(null===W||m)return null;var r=e.clockClassName,n=(e.className,e.onChange,e.portalContainer),i=e.value,o=Hm(e,["clockClassName","className","onChange","portalContainer","value"]),a="".concat(Gm,"__clock"),s=jd(a,"".concat(a,"--").concat(W?"open":"closed")),l=(Array.isArray(i)?i:[i])[0],c=t.createElement(Ny,Um({className:r,value:l},o));return n?(0,yi.createPortal)(t.createElement("div",{ref:X,className:s},c),n):t.createElement(Gy,null,t.createElement("div",{ref:function(e){e&&!W&&e.removeAttribute("style")},className:s},c))}())},Zm=E.oneOfType([$m,E.instanceOf(Date)]),Jm=E.oneOfType([Zm,(Fm=Zm,E.arrayOf(Fm))]);Xm.propTypes={amPmAriaLabel:E.string,autoFocus:E.bool,className:E.oneOfType([E.string,E.arrayOf(E.string)]),clearAriaLabel:E.string,clearIcon:E.oneOfType([E.node,E.func]),clockAriaLabel:E.string,clockClassName:E.oneOfType([E.string,E.arrayOf(E.string)]),clockIcon:E.oneOfType([E.node,E.func]),closeClock:E.bool,"data-testid":E.string,disableClock:E.bool,disabled:E.bool,format:E.string,hourAriaLabel:E.string,hourPlaceholder:E.string,id:E.string,isOpen:E.bool,locale:E.string,maxDetail:E.oneOf(["hour","minute","second"]),maxTime:$m,minTime:$m,minuteAriaLabel:E.string,minutePlaceholder:E.string,name:E.string,nativeInputAriaLabel:E.string,onChange:E.func,onClockClose:E.func,onClockOpen:E.func,onFocus:E.func,openClockOnFocus:E.bool,required:E.bool,secondAriaLabel:E.string,secondPlaceholder:E.string,value:Jm},Vm&&(Xm.propTypes.portalContainer=E.instanceOf(HTMLElement));const Qm=Xm;__webpack_require__(9572);const ev=()=>{const[e,r]=(0,t.useState)(""),[n,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(new Date),[c,u]=(0,t.useState)($(new Date,35).toTimeString().substring(0,5)),[p,f]=(0,t.useState)(""),[h,d]=(0,t.useState)(""),[y,m]=(0,t.useState)({}),[v,g]=(0,t.useState)([]),[_,w]=(0,t.useState)(""),[x,E]=(0,t.useState)({}),[S,k]=(0,t.useState)([]),[T,O]=(0,t.useState)(""),[A,P]=(0,t.useState)({}),[C,N]=(0,t.useState)([]),[R,j]=(0,t.useState)(!1),[M,I]=(0,t.useState)({}),[D,L]=(0,t.useState)({}),F=(0,t.useCallback)((async e=>{let t=[];var r;(d(e),e)?(M[h]="",I(D),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),g((null===(r=t)||void 0===r?void 0:r.items)||[])):(g([]),U())}),[h,y,v]),B=(0,t.useCallback)((async e=>{let t=[];var r;(w(e),e)?(M[_]="",I(D),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),k((null===(r=t)||void 0===r?void 0:r.items)||[])):(k([]),U())}),[_,x,S]),z=(0,t.useCallback)((async e=>{let t=[];var r;(O(e),e)?(M[T]="",I(D),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),N((null===(r=t)||void 0===r?void 0:r.items)||[])):N([]);U()}),[T,A,C]);function $(e,t){return new Date(e.getTime()+6e4*t)}function U(){a(""!=h&&""!=T&&""!=_)}return(0,b.jsxs)("div",{className:"ride-scheduler compact",children:[" ",(0,b.jsx)("h2",{children:"Schedule Your Ride"}),(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log((new Date).toISOString().split("T")[0]+"T"+c);const{lat:t,lng:n}=y.position;let o={lat:t,lng:n,geoHash:Ga(t,n)};y.currentLocation=o;let a={lat:x.position.lat,lng:x.position.lng,geoHash:Ga(x.position.lat,x.position.lng)};x.currentLocation=a;let s={};""!=T&&(s={lat:A.position.lat,lng:A.position.lng,geoHash:Ga(A.position.lat,A.position.lng)}),A.currentLocation=s;try{let e={};try{e=await lr.get(vr,{params:{transportMode:"car",origin:"".concat(y.position.lat,",").concat(y.position.lng),destination:"".concat(x.position.lat,",").concat(x.position.lng),via:"".concat(A.position.lat,",").concat(A.position.lng)}}).then((e=>(console.log("way point response",e.data),e.data)))}catch(u){console.log("error",u)}j(!0);let t=await lr.post("".concat(dr,"/api/community/ride/"),{source:y,destination:x,point:A,driverId:Da()._id,rideStatus:"CREATED",vehicleType:Da().vehicle.type,rideStartDateTime:(new Date).toISOString().split("T")[0]+"T"+c,metaData:{journey:e}});console.log("schedule ride created",t),alert("Community Ride Created !!"),201===t.status&&console.log("created")}catch(u){alert("Something went wrong")}j(!1),r(""),i(""),l(""),f("")},children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"source",children:"Trip Start Point"}),(0,b.jsx)(ga,{className:"form-control compact",showCountrySelect:!1,address:h,selectedAddress:y,addressList:v,handleChange:F,handleSelect:(e,t)=>{console.log(c.substring(0,5)),m(t),g([])}}),M.receiverAddress&&(0,b.jsx)("span",{className:"red-text",children:M.receiverAddress})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"destination",children:"Trip End Point"}),(0,b.jsx)(ga,{className:"form-control compact",showCountrySelect:!1,address:h,selectedAddress:x,addressList:S,handleChange:B,handleSelect:(e,t)=>{E(t),k([])}}),M.receiverAddress&&(0,b.jsx)("span",{className:"red-text",children:M.receiverAddress})]}),(0,b.jsx)("div",{className:"form-group",children:(0,b.jsxs)("label",{htmlFor:"date",children:["Date - ",(new Date).toLocaleDateString()]})}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"startTime",children:"Time - Valid time value is greater than 30 mins from now"}),(0,b.jsx)(Qm,{minTime:$(new Date,30),onChange:function(e){console.log(e),u(e)},value:c})]}),(0,b.jsx)("h6",{children:"Add Waypoint - stops in between start and end points"}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"date",children:"Way Point 1"}),(0,b.jsx)(ga,{className:"form-control compact",showCountrySelect:!1,address:T,selectedAddress:A,addressList:C,handleChange:z,handleSelect:(e,t)=>{P(t),N([])}}),M.receiverAddress&&(0,b.jsx)("span",{className:"red-text",children:M.receiverAddress})]}),(0,b.jsx)("br",{}),(0,b.jsxs)("button",{type:"submit",className:"btn btn-primary shadow",disabled:R||o,children:[" ",R?"Saving...":"Save Ride"]})]})]})},tv=e=>{const{myRides:r}=e,[n,i]=(0,t.useState)([]);console.log("rides component",r);return(0,b.jsx)("div",{className:"container",children:(0,b.jsx)("div",{className:"row",children:r.length>0?(0,b.jsx)("div",{className:"col-lg-12",children:r.map(((e,t)=>{var r,n,i,o,a,s,l,c,u,p,f,h,d,y,m,v,g,_,w,x,E,S;return(0,b.jsx)("div",{className:"col-md-8 col-xl-6 mx-auto p-1 shadow",children:(0,b.jsxs)(qf,{style:{padding:5,margin:5},children:[(0,b.jsxs)(qf.Header,{style:"CREATED"==e.rideStatus[e.rideStatus.length-1]?{background:"green",color:"white",fontWeight:"bold"}:{background:"#24285b",color:"white",fontWeight:"bold"},children:["Start Time -"," ",new Date(e.rideStartDateTime).toLocaleString()," "," |  ",e.rideStatus[e.rideStatus.length-1]]}),(0,b.jsxs)(dd,{variant:"flush",children:[(0,b.jsxs)(dd.Item,{children:["Source - ",e.source.title]}),(0,b.jsxs)(dd.Item,{children:["Destination - ",e.destination.title]}),(0,b.jsxs)(dd.Item,{children:["Way Point - ",e.point.title]}),void 0!=e.metaData&&(0,b.jsxs)(dd.Item,{children:["Arrival Time -"," ",(E=new Date(e.rideStartDateTime),S=Math.round((null===(r=e.metaData.journey)||void 0===r||null===(n=r.routes[0])||void 0===n||null===(i=n.sections[0])||void 0===i||null===(o=i.summary)||void 0===o?void 0:o.duration)/60)+Math.round((null===(a=e.metaData.journey)||void 0===a||null===(s=a.routes[0])||void 0===s||null===(l=s.sections[1])||void 0===l||null===(c=l.summary)||void 0===c?void 0:c.duration)/60)+30,new Date(E.getTime()+6e4*S).toLocaleTimeString())," ","| Total Distance -"," ",Math.round((null===(u=e.metaData.journey)||void 0===u||null===(p=u.routes[0])||void 0===p||null===(f=p.sections[0])||void 0===f||null===(h=f.summary)||void 0===h?void 0:h.length)/1e3)+Math.round((null===(d=e.metaData.journey)||void 0===d||null===(y=d.routes[0])||void 0===y||null===(m=y.sections[1])||void 0===m||null===(v=m.summary)||void 0===v?void 0:v.length)/1e3)," ","KM"]}),"BOOKED"==e.rideStatus[e.rideStatus.length-1]&&void 0!=e.rideDetails&&(0,b.jsxs)(fd,{children:["Sender Address - ",null===e||void 0===e||null===(g=e.rideDetails)||void 0===g?void 0:g.details.senderAddress," | ",null===e||void 0===e||null===(_=e.rideDetails)||void 0===_?void 0:_.details.senderContact]}),"BOOKED"==e.rideStatus[e.rideStatus.length-1]&&void 0!=e.rideDetails&&(0,b.jsxs)(fd,{children:["Reciver Address - ",null===e||void 0===e||null===(w=e.rideDetails)||void 0===w?void 0:w.details.receiverAddress," | ",null===e||void 0===e||null===(x=e.rideDetails)||void 0===x?void 0:x.details.recieverContact]}),"BOOKED"==e.rideStatus[e.rideStatus.length-1]&&void 0!=e.rideDetails&&(0,b.jsxs)(fd,{children:["Price - ",null===e||void 0===e?void 0:e.rideDetails.price," CAD"]})]})]},t)},t)}))}):(0,b.jsx)("p",{children:"No ride requests found."})})})},rv=()=>{const[e,r]=(0,t.useState)(!0),[n,i]=(0,t.useState)("Your Community Rides"),[o,a]=(0,t.useState)([]);return(0,t.useEffect)((()=>{}),[]),(0,b.jsxs)("div",{style:{paddingTop:"5em"},children:[(0,b.jsx)(Ba,{}),(0,b.jsx)("br",{}),(0,b.jsx)(ve,{onClick:()=>{if(r(!e),e){i("Schedule Community Ride");(async()=>{try{let e=await lr.get("".concat(dr,"/api/community/ride/").concat(Da()._id),{headers:{Authorization:"Basic ".concat(Ia())}});a(e.data.rides),console.log("rides",e)}catch(e){console.log("Error",e),a([])}})()}else i("Your Community Rides")},children:n}),e&&(0,b.jsx)(ev,{})," ",!e&&(0,b.jsx)(tv,{myRides:o})]})},nv=2**31-1;function iv(e,t,r){const n=r-Date.now();e.current=n<=nv?setTimeout(t,n):setTimeout((()=>iv(e,t,r)),nv)}function ov(){const e=ls(),r=(0,t.useRef)();return pl((()=>clearTimeout(r.current))),(0,t.useMemo)((()=>{const t=()=>clearTimeout(r.current);return{set:function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(t(),i<=nv?r.current=setTimeout(n,i):iv(r,n,Date.now()+i))},clear:t,handleRef:r}}),[])}const av={[_s]:"showing",[xs]:"showing show"},sv=t.forwardRef(((e,t)=>(0,b.jsx)(Xs,{...e,ref:t,transitionClasses:av})));sv.displayName="ToastFade";const lv=sv,cv=t.createContext({onClose(){}}),uv=t.forwardRef(((e,r)=>{let{bsPrefix:n,closeLabel:i="Close",closeVariant:o,closeButton:a=!0,className:s,children:l,...c}=e;n=M(n,"toast-header");const u=(0,t.useContext)(cv),p=ns((e=>{null==u||null==u.onClose||u.onClose(e)}));return(0,b.jsxs)("div",{ref:r,...c,className:x()(n,s),children:[l,a&&(0,b.jsx)(Qs,{"aria-label":i,variant:o,onClick:p,"data-dismiss":"toast"})]})}));uv.displayName="ToastHeader";const pv=uv,fv=t.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:i="div",...o}=e;return n=M(n,"toast-body"),(0,b.jsx)(i,{ref:t,className:x()(r,n),...o})}));fv.displayName="ToastBody";const hv=fv,dv=t.forwardRef(((e,r)=>{let{bsPrefix:n,className:i,transition:o=lv,show:a=!0,animation:s=!0,delay:l=5e3,autohide:c=!1,onClose:u,onEntered:p,onExit:f,onExiting:h,onEnter:d,onEntering:y,onExited:m,bg:v,...g}=e;n=M(n,"toast");const _=(0,t.useRef)(l),w=(0,t.useRef)(u);(0,t.useEffect)((()=>{_.current=l,w.current=u}),[l,u]);const E=ov(),S=!(!c||!a),k=(0,t.useCallback)((()=>{S&&(null==w.current||w.current())}),[S]);(0,t.useEffect)((()=>{E.set(k,_.current)}),[E,k]);const T=(0,t.useMemo)((()=>({onClose:u})),[u]),O=!(!o||!s),A=(0,b.jsx)("div",{...g,ref:r,className:x()(n,i,v&&"bg-".concat(v),!O&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,b.jsx)(cv.Provider,{value:T,children:O&&o?(0,b.jsx)(o,{in:a,onEnter:d,onEntering:y,onEntered:p,onExit:f,onExiting:h,onExited:m,unmountOnExit:!0,children:A}):A})}));dv.displayName="Toast";const yv=Object.assign(dv,{Body:hv,Header:pv}),mv={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},vv=t.forwardRef(((e,t)=>{let{bsPrefix:r,position:n,containerPosition:i,className:o,as:a="div",...s}=e;return r=M(r,"toast-container"),(0,b.jsx)(a,{ref:t,...s,className:x()(r,n&&mv[n],i&&"position-".concat(i),o)})}));vv.displayName="ToastContainer";const gv=vv,bv=()=>{const[e,r]=(0,t.useState)(""),[n,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[h,d]=(0,t.useState)(!1),y=e=>{const{name:t,value:n,files:o}=e.target;switch(t){case"orderId":r(n);break;case"email":i(n);break;case"subject":a(n);break;case"message":l(n)}};return(0,b.jsxs)("div",{className:"container-sm",children:[(0,b.jsxs)("form",{className:"shadow m-2 p-4",onSubmit:async t=>{t.preventDefault();const c=null==ja()?Da():ja();let p={};try{p=await lr.post("".concat(dr,"/api/cases/create/"),{orderId:e,email:n,subject:o,userId:c._id,message:s},{headers:{}}),console.log("orders driver api",p),d("New ticket created"),f(!0)}catch(h){alert(h.response.data.error.message),console.log("Error",p,h.response.data.message)}console.log("Form submitted!",{orderId:e,email:n,userId:c._id,subject:o,message:s}),r(""),i(""),a(""),l(""),u("")},children:[(0,b.jsx)("h4",{style:{fontFamily:"sans-serif"},children:" Helpdesk Form"}),(0,b.jsxs)("div",{className:"form-group",children:[" ",(0,b.jsx)("label",{htmlFor:"orderId",children:"Order ID:"}),(0,b.jsx)("input",{type:"text",id:"orderId",name:"orderId",value:e,className:"form-control",onChange:y,required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[" ",(0,b.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,b.jsx)("input",{type:"email",id:"email",name:"email",value:n,className:"form-control",onChange:y,required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[" ",(0,b.jsx)("label",{htmlFor:"subject",children:"Subject:"}),(0,b.jsx)("input",{type:"text",id:"subject",name:"subject",value:o,className:"form-control",onChange:y,required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[" ",(0,b.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,b.jsx)("textarea",{id:"message",name:"message",value:s,className:"form-control",onChange:y,required:!0})]}),(0,b.jsxs)("button",{type:"submit",className:"helpdesk-submit-button btn btn-primary shadow",children:[" ","Submit"]})]}),(0,b.jsx)(gv,{position:"middle-end",style:{zIndex:1},children:(0,b.jsxs)(yv,{bg:"success",onClose:()=>f(!1),show:p,delay:3e3,autohide:!0,children:[(0,b.jsxs)(yv.Header,{children:[(0,b.jsx)("img",{className:"rounded me-2",alt:""}),(0,b.jsx)("strong",{className:"me-auto",children:"CanDeliver"})]}),(0,b.jsxs)(yv.Body,{children:[h,"!"]})]})})]})},_v=e=>{const{tickets:t}=e;return(0,b.jsxs)("table",{className:"helpdesk-table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Sr No"}),(0,b.jsx)("th",{children:"Order Id"}),(0,b.jsx)("th",{children:"Subject"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Timestamp"})]})}),(0,b.jsx)("tbody",{children:t.map(((e,t)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:t+1}),(0,b.jsx)("td",{children:e.orderId}),(0,b.jsx)("td",{children:e.subject}),(0,b.jsx)("td",{children:e.caseStatus}),(0,b.jsx)("td",{children:new Date(e.createdAt).toLocaleString()})]},t)))})]})},wv=()=>{const[e,r]=(0,t.useState)(!1),[n,i]=(0,t.useState)("My Tickets"),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0);let c=ja();return(0,t.useEffect)((()=>{null==c&&(l(!1),console.log("setUserData",c))}),[]),(0,b.jsxs)("div",{children:[s&&(0,b.jsx)(Fa,{}),!s&&(0,b.jsx)(Ba,{}),(0,b.jsxs)("div",{className:"helpdesk-dashboard container",style:{paddingTop:"5em"},children:[(0,b.jsx)("button",{style:{margin:"1%"},className:"btn btn-primary shadow",onClick:async()=>{if(r(!e),e)i("My Tickets");else{i("Create New Ticket"),null==c&&(c=Da());(async()=>{try{let e=await lr.get("".concat(dr,"/api/cases/")+c._id,{headers:{}});console.log("cases api",e.data.cases),a(e.data.cases)}catch(e){alert(e)}})()}},children:n}),e&&o.length>0&&(0,b.jsx)(_v,{tickets:o}),e&&o.length<=0&&"No records available",!e&&(0,b.jsx)(bv,{})]})]})},xv=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(ja()),[o,a]=(0,t.useState)(!0),{vehicleImage:s,receiverName:l,receiverAddress:c,vehicleNumber:u,price:p,rating:f,orderId:h}={vehicleImage:"https://example.com/car.jpg",receiverName:"John Doe",receiverAddress:"123 Main Street, Anytown, CA 12345",vehicleNumber:"ABC123",price:15.75,rating:4.8,orderId:"1234567890"};return(0,t.useEffect)((()=>{(async()=>{a(!0),console.log("setUserData",n);try{let e=await lr.get("".concat(dr,"/api/user/get-order/").concat(n._id),{headers:{Authorization:"Basic ".concat(Ra())}});console.log("orders api",e),r(e.data.orders),localStorage.setItem("userData",JSON.stringify(e.data.user))}catch(e){console.log("Error",e),r([])}})()}),[]),(0,b.jsxs)("div",{children:[o&&(0,b.jsx)(Fa,{}),!o&&(0,b.jsx)(Ba,{}),(0,b.jsxs)("div",{className:"container",style:{paddingTop:"5em"},children:[(0,b.jsx)("div",{style:{marginBottom:10,padding:5,fontSize:"larger",fontWeight:"bold"},children:"Previous Orders"}),(0,b.jsxs)("div",{className:"row",children:[e.map(((e,t)=>(0,b.jsx)("div",{className:"col-lg-12",children:(0,b.jsx)("div",{className:"col-md-8 col-xl-6 mx-auto p-4 shadow",children:(0,b.jsx)("div",{className:"d-flex align-items-center align-items-md-start align-items-xl-center",children:(0,b.jsx)("table",{children:(0,b.jsxs)("tbody",{children:[" ",(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Receiver:"}),(0,b.jsx)("td",{children:e.receiverId.name})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Address:"}),(0,b.jsx)("td",{children:c})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Vehicle:"}),(0,b.jsxs)("td",{children:[br[e.driverId.vehicle.type]," ","| ",e.driverId.vehicle.registrationNumber]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Price:"}),(0,b.jsxs)("td",{children:["$",e.isCommunityRide?e.metaData.communityOrderPrice:e.orderPrice]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Rating:"}),(0,b.jsx)("td",{children:(0,b.jsx)(Xp,{orderId:e._id,isRated:e.isUserRatingAvailable,ratedValue:e.isUserRatingAvailable?e.driverRating:0})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Order ID:"}),(0,b.jsx)("td",{children:e._id})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Last updated:"}),(0,b.jsx)("td",{children:(0,b.jsxs)("span",{className:"delivery-card-text1",children:[" ",(0,b.jsx)("span",{className:"text2",children:new Date(e.updatedAt).toLocaleString()})]})})]})]})})})})},t)))," "]})]})]})},Ev=e=>{const{orderId:r,isRated:n,ratedValue:i=0}=e,[o,a]=(0,t.useState)(i);return(0,t.useEffect)((()=>{}),[]),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[...Array(5)].map(((e,t)=>{const i=t+1;return(0,b.jsxs)("label",{children:[(0,b.jsx)(Yp,{type:"radio",value:i,disabled:n,onClick:()=>{a(i),async function(e){let t={status:500};console.log("rating given ",e);try{t=await lr.get("".concat(dr,"/api/booking/orders/rateUser/?orderId=")+r+"&rating="+e,{headers:{Authorization:"Basic ".concat(Ia())}})}catch(n){alert("Something went wrong while updating rating . please try again later")}t.status<=300&&alert("rating update successfully !")}(i)}}),(0,b.jsx)(Kp,{children:(0,b.jsx)(Na,{color:i<o||i===o?"000":"rgb(192,192,192)"})})]})}))})},Sv=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(Da()),[o,a]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{(async()=>{a(!0),console.log("setDriverData",n);try{let e=await lr.get("".concat(dr,"/api/driver/get-order/").concat(n._id),{headers:{Authorization:"Basic ".concat(Ia())}});console.log("orders api",e),r(e.data.orders)}catch(e){console.log("Error",e),r([])}})()}),[]),(0,b.jsxs)("div",{children:[(0,b.jsx)(Ba,{}),(0,b.jsxs)("div",{className:"container",style:{paddingTop:"5em"},children:[(0,b.jsx)("div",{style:{marginBottom:10,padding:5,fontSize:"larger",fontWeight:"bold"},children:"Previous Orders"}),(0,b.jsxs)("div",{className:"row",children:[e.map(((e,t)=>(0,b.jsx)("div",{className:"col-lg-12",children:(0,b.jsx)("div",{className:"col-md-8 col-xl-6 mx-auto p-4 shadow",children:(0,b.jsx)("div",{className:"d-flex align-items-center align-items-md-start align-items-xl-center",children:(0,b.jsx)("table",{children:(0,b.jsxs)("tbody",{children:[" ",(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"User:"}),(0,b.jsxs)("td",{children:[e.userId.firstName," ",e.userId.lastName]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"From:"}),(0,b.jsx)("td",{children:e.receiverId.address.title})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"To:"}),(0,b.jsx)("td",{children:e.userId.address.title})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Vehicle:"}),(0,b.jsxs)("td",{children:[br[e.driverId.vehicle.type]," | ",e.driverId.vehicle.registrationNumber]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Price:"}),(0,b.jsxs)("td",{children:["$",e.isCommunityRide?e.metaData.communityOrderPrice:e.orderPrice]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Rating:"}),(0,b.jsx)("td",{children:(0,b.jsx)(Ev,{orderId:e._id,isRated:e.isDriverRatingAvailable,ratedValue:e.isDriverRatingAvailable?e.userRating:0})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Order ID:"}),(0,b.jsx)("td",{children:e._id})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"Last updated:"}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"delivery-card-text1",children:(0,b.jsx)("span",{className:"text2",children:new Date(e.updatedAt).toLocaleString()})})})]})]})})})})},t)))," "]})]})]})},kv=[],Tv=(new Date).getFullYear();for(let Rv=Tv;Rv<=Tv+10;Rv++)kv.push({value:Rv,label:Rv.toString()});const Ov=e=>{var r,n,i,o,a;const[s,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(ja()),[p,f]=(0,t.useState)({firstName:null===c||void 0===c?void 0:c.firstName,lastName:null===c||void 0===c?void 0:c.lastName}),[h,d]=(0,t.useState)({}),[y,m]=(0,t.useState)(c.address.title||""),[v,g]=(0,t.useState)(c.address),[_,w]=(0,t.useState)([]),[x,E]=(0,t.useState)(!1),[S,k]=(0,t.useState)({value:"IN",label:"\ud83c\uddee\ud83c\uddf3 India"}),[T,O]=(0,t.useState)((null===(r=c.creditCard)||void 0===r?void 0:r.cardNumber)||""),[A,P]=(0,t.useState)((null===(n=c.creditCard)||void 0===n?void 0:n.cvv)||""),[C,N]=(0,t.useState)((null===(i=c.creditCard)||void 0===i?void 0:i.month)||null),[R,j]=(0,t.useState)((null===(o=c.creditCard)||void 0===o?void 0:o.year)||null),[M,I]=(0,t.useState)((null===(a=c.creditCard)||void 0===a?void 0:a.formattedCardNumber)||"");(0,t.useEffect)((()=>{null==ja()&&(l(!1),console.log("setUserData",ja()))}),[]);const D=(0,t.useCallback)((async e=>{let t=[];var r;(m(e),e)?(h[y]="",d(h),t=await lr.get(mr,{params:{q:e}}).then((e=>e.data)),w((null===(r=t)||void 0===r?void 0:r.items)||[])):w([])}),[y,v,_]),L=e=>{const{name:t,value:r}=e.target;f((e=>({...e,[t]:r}))),p[t]&&(h[t]="",d(h))},F=e=>{const t=e.target.value.replace(/\D/g,""),r=e.target.value;if(r.length<=M.length)return O(r),void I(r);let n="";n=4==r.length||9==r.length||14==r.length?r+" ":r,n=n.slice(0,19),I(n),O(t)},B=e=>{let t=!0;const r=T.replace(/\s/g,"");if(console.log(r),16!==r.length?(t=!1,e.cardNumber="Invalid credit card number. Must be 16 digits."):e.cardNumber="",3!==A.length?(t=!1,e.cvv="Invalid CVV. Must be 3 digits."):e.cvv="",C&&R){const r=new Date,n=r.getMonth()+1,i=r.getFullYear();R<i||R===i&&C<n?(t=!1,e.date="Card has expired."):e.date=""}else t=!1,e.date="Please select both month and year for expiry date.";return t};return(0,b.jsxs)("div",{children:[s&&(0,b.jsx)(Fa,{}),!s&&(0,b.jsx)(Ba,{}),(0,b.jsx)("div",{className:"helpdesk-dashboard container",style:{paddingTop:"7em"}}),(0,b.jsxs)("div",{className:"helpdesk-form",children:[(0,b.jsx)("h2",{children:"Update User profile"}),(0,b.jsxs)("div",{className:"helpdesk-form-group",children:[(0,b.jsx)("label",{htmlFor:"firstName",children:"First name :"}),(0,b.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:p.firstName,onChange:L,required:!0})]}),(0,b.jsxs)("div",{className:"helpdesk-form-group",children:[(0,b.jsx)("label",{htmlFor:"lasttName",children:"Last name :"}),(0,b.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:p.lastName,onChange:L,required:!0})]}),(0,b.jsxs)("div",{className:"helpdesk-form-group",children:[(0,b.jsx)("label",{htmlFor:"address",children:"Address"}),(0,b.jsx)(ga,{showCountrySelect:!1,address:y,selectedAddress:v,addressList:_,setSelectedCountry:k,countries:ba,handleChange:D,handleSelect:(e,t)=>{g(t),w([])},selectedCountry:S}),h.address&&(0,b.jsx)("span",{className:"red-text",children:h.address})]}),(0,b.jsx)("h5",{children:" Credit Card Details"}),(0,b.jsxs)("div",{className:"helpdesk-form-group",children:[(0,b.jsx)("label",{htmlFor:"cardNumber",children:"Card Number:"}),(0,b.jsx)("input",{type:"text",id:"cardNumber",value:M,className:"form-control",onChange:F,onKeyDown:F,maxLength:19,required:!0}),h.cardNumber&&(0,b.jsx)("span",{className:"red-text",children:h.cardNumber})]}),(0,b.jsxs)("div",{className:"helpdesk-form-group",children:[(0,b.jsx)("label",{htmlFor:"cvc",children:"CVV:"}),(0,b.jsx)("input",{type:"text",id:"cvc",value:A,onChange:e=>{const t=e.target.value.replace(/\D/g,"");P(t.slice(0,3)),d("")},maxLength:3,className:"form-control",required:!0}),h.cvv&&(0,b.jsx)("span",{className:"red-text",children:h.cvv})]}),(0,b.jsx)("br",{}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("div",{class:"input-group-prepend",children:(0,b.jsx)("label",{class:"input-group-text",for:"inputGroupSelect01",children:"Expiry Date (MM/YY) "})}),(0,b.jsxs)("select",{id:"month",class:"custom-select",value:C,onChange:e=>{N(parseInt(e.target.value,10)),d("")},required:!0,children:[(0,b.jsx)("option",{value:"",children:"Month"}),xr.map((e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,b.jsxs)("select",{id:"year",value:R,onChange:e=>{j(parseInt(e.target.value,10)),d("")},required:!0,children:[(0,b.jsx)("option",{value:"",children:"Year"}),kv.map((e=>(0,b.jsx)("option",{value:e.value,children:e.value},e.value)))]}),h.date&&(0,b.jsx)("span",{className:"red-text",children:h.date})]}),(0,b.jsx)("button",{type:"submit",className:"helpdesk-submit-button btn btn-primary shadow",onClick:async()=>{console.log("CALLED"),E(!0);let{newErrors:t,isValid:r}=((e,t)=>{let r=!0;const n={};return e.firstName.trim()||(n.firstName="Name is required",r=!1),e.lastName.trim()||(n.lastName="last name is required",r=!1),t.trim()||(n.address="address is required",r=!1),{isValid:r,newErrors:n}})(p,y);if(console.log("isvalid",r),!r)return E(!1),d(t),void B(t);if(!B(t))return d(t),void E(!1);const{lat:n,lng:i}=v.position;let o={lat:n,lng:i,geoHash:Ga(n,i)};try{let t=await lr.post("".concat(dr,"/api/user/update/"),{...p,address:v,currentLocation:o,userId:c._id,creditCard:{cardNumber:T,cvv:A,month:C,year:R,formattedCardNumber:M}});console.log("response",t.data),console.log("response signup",t),localStorage.setItem("response",t),200===t.status&&(console.log("response",t.data),localStorage.setItem("userData",JSON.stringify(t.data.doc)),alert("User details updated"),e.history.push("/user/home",{userData:t.data.doc||{}}))}catch(a){"MongoError"===a.response.data.error.name?alert("email Id or contact no. is not unique"):alert("Something went wrong")}E(!1)},children:x?"Updating ...":"Submit"})]}),";"]})},Av=()=>(0,b.jsx)("div",{children:(0,b.jsx)(u,{children:(0,b.jsx)("div",{children:(0,b.jsxs)(i.Switch,{children:[(0,b.jsx)(gd,{path:"/",exact:!0,strict:!0,component:rh}),(0,b.jsx)(i.Route,{path:"/home",component:_}),(0,b.jsx)(i.Route,{path:"/user/login",component:rl}),(0,b.jsx)(i.Route,{path:"/user/signup",component:Ka}),(0,b.jsx)(i.Route,{path:"/forgot-password",component:vd}),(0,b.jsx)(i.Route,{path:"/user/book-delivery",component:cd}),(0,b.jsx)(i.Route,{path:"/user/helpdesk",component:wv}),(0,b.jsx)(i.Route,{path:"/user/orders",component:xv}),(0,b.jsx)(i.Route,{path:"/driver/helpdesk",component:wv}),(0,b.jsx)(i.Route,{path:"/user/update-profile",component:Ov}),(0,b.jsx)(gd,{path:"/user/home",component:rh}),(0,b.jsx)(gd,{path:"/user/send-package",component:md}),(0,b.jsx)(i.Route,{path:"/user/logout",component:wd}),(0,b.jsx)(i.Route,{path:"/user/cride",component:yd}),(0,b.jsx)(i.Route,{path:"/driver/login",component:nl}),(0,b.jsx)(i.Route,{path:"/driver/signup",component:ll}),(0,b.jsx)(i.Route,{path:"/driver/schedule-rides",component:rv}),(0,b.jsx)(i.Route,{path:"/driver/orders",component:Sv}),(0,b.jsx)(bd,{path:"/driver/home",component:Pd})]})})})});const Pv=function(){return(0,b.jsx)("div",{className:"App ",children:(0,b.jsx)(Av,{})})},Cv=e=>{e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((t=>{let{getCLS:r,getFID:n,getFCP:i,getLCP:o,getTTFB:a}=t;r(e),n(e),i(e),o(e),a(e)}))};n.createRoot(document.getElementById("root")).render((0,b.jsx)(t.StrictMode,{children:(0,b.jsx)(Pv,{})})),Cv()})()})();
//# sourceMappingURL=main.02925656.js.map